{"old":{"name":"怀旧","skill":{"enyuan":{"name":"恩怨","script":"{audio: \"enyuan1\",locked: \"true\",group: [\"enyuan1\",\"enyuan2\"],ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')) return [1,0,0,-1];\n\t\t\t\t\t\t},},},}","info":"锁定技，当有其他角色令你回复一点体力后，该角色摸一张牌；其他角色对你造成伤害后，须交给你一张♥手牌，否则该角色失去1点体力。"},"xuanhuo":{"name":"眩惑","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",discard: \"false\",lose: \"false\",delay: \"0\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'heart'});\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.suit(card)=='heart';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(game.countPlayer()==2) return false;\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=get.owner(card);\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player&&get.attitude(player,players[i])>3) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(i==players.length) return -1;\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.gain(cards,player,'give');\n\t\t\t\t\t// game.delay();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.gainPlayerCard(target,'he',true);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar source=target;\n\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\tplayer.chooseTarget('选择一个目标送出'+get.translation(event.card),function(card,player,target){\n\t\t\t\t\t\treturn target!=_status.event.sourcex&&target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('sourcex',target);\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets[0].gain(card,player,'give');\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: \"-0.5\",},basic: {order: \"9\",},},}","info":"出牌阶段限一次，你可以将一张红桃手牌交给一名其他角色，获得该角色的一张牌，然后交给除该角色外的一名其他角色"},"wangzun":{"name":"妄尊","script":"{audio: \"2\",trigger: {global: \"phaseZhunbeiBegin\",},check: function (event,player){\n\t\t\t\t\tvar att=get.attitude(player,event.player);\n\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(player,current)<att;\n\t\t\t\t\t});\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&!player.storage.wangzun;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.markSkill('wangzun');\n\t\t\t\t\tplayer.storage.wangzun=trigger.player;\n\t\t\t\t\ttrigger.player.addTempSkill('wangzun3');\n\t\t\t\t},ai: {expose: \"0.2\",},intro: {content: \"player\",},group: \"wangzun2\",}","info":"其他角色的准备阶段开始时，你可以摸一张牌。若如此做，该角色此回合的手牌上限-1。然后你不能再发动〖妄尊〗直到回合开始。"},"tongji":{"name":"同疾","script":"{global: \"tongji_disable\",audio: \"2\",trigger: {global: \"useCard1\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.targets.contains(player)&&player!=event.player&&event.card.name=='sha'&&player.hp<player.countCards('h');\n\t\t\t\t},content: function (){},unique: \"true\",gainable: \"true\",subSkill: {disable: {mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\t\t\tif(player.hasSkill('tongji')) return;\n\t\t\t\t\t\t\t\t\tif(target.hasSkill('tongji')) return;\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn current.hasSkill('tongji')&&current.hp<current.countCards('h')&&\n\t\t\t\t\t\t\t\t\t\tplayer.inRange(current);\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"锁定技。若你的手牌数大于你的体力值，则攻击范围包含你的其他角色使用【杀】时不能指定你以外的角色为目标。"},"mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-1。"},"mengjin":{"name":"猛进","script":"{shaRelated: \"true\",audio: \"2\",trigger: {player: \"shaMiss\",},filter: function (event){\n\t\t\t\t\treturn event.target.countCards('he')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\tplayer.discardPlayerCard('he',trigger.target,true);\n\t\t\t\t},}","info":"当你使用的【杀】被【闪】抵消时，你可以弃置目标角色的一张牌。"},"new_reyaowu":{"name":"耀武","script":"{trigger: {player: \"damageBegin3\",},audio: \"2\",filter: function (event){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&(get.color(event.card)!='red'||event.source&&event.source.isAlive());\n\t\t\t\t},forced: \"true\",check: function (event){\n\t\t\t\t\tif(event.card&&(event.card.name=='sha')){\n\t\t\t\t\t\treturn get.color(event.card)=='black';\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(get.color(trigger.card)!='red') player.draw();\n\t\t\t\t\telse trigger.source.chooseDrawRecover(true);\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&(get.color(card)=='red')&&get.attitude(player,target)<=0){\n\t\t\t\t\t\t\t\treturn [1,0.8,1,0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card.name=='sha'&&(get.color(card)=='black')){\n\t\t\t\t\t\t\t\treturn [1,0.4];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当一名角色使用【杀】对你造成伤害时，若此杀为红色，该角色回复1点体力或摸一张牌。否则则你摸一张牌。"},"wylianji":{"name":"连计","script":"{enable: \"phaseUse\",audio: \"2\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.hasCard(lib.skill.wylianji.filterCard);\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(card.name=='sha') return 1;\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\tif(get.tag(card,'multineg')) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.name(card)=='sha'||(get.type(card,'trick')=='trick'&&get.color(card)=='black'&&!get.info(card).multitarget)&&get.info(card).enable;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.isMin()&&\n\t\t\t\t\t(player.canUse(card,target,false)||game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&target.canUse(card,current);\n\t\t\t\t\t}));\n\t\t\t\t},discard: \"false\",lose: \"true\",delay: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showCards(get.translation(player)+'对'+get.translation(target)+'发动了【连计】',cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar equip1=get.cardPile2(function(card){\n\t\t\t\t\t\treturn get.subtype(card)=='equip1';\n\t\t\t\t\t});\n\t\t\t\t\tif(!equip1){\n\t\t\t\t\t\tplayer.popup('连计失败');\n\t\t\t\t\t\tgame.log('牌堆中无装备');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(equip1.name=='qinggang'&&!lib.inpile.contains('qibaodao')){\n\t\t\t\t\t\tequip1.remove();\n\t\t\t\t\t\tequip1=game.createCard2('qibaodao',equip1.suit,equip1.number);\n\t\t\t\t\t}\n\t\t\t\t\ttarget.$draw(equip1);\n\t\t\t\t\ttarget.chooseUseTarget(true,equip1,'nothrow','nopopup');\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tvar card=cards[0];\n\t\t\t\t\tvar bool1=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&target.canUse(card,current);\n\t\t\t\t\t});\n\t\t\t\t\tvar bool2=player.canUse(card,target,false);\n\t\t\t\t\tif(bool1&&bool2){\n\t\t\t\t\t\ttarget.chooseControl(function(){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}).set('choiceList',[\n\t\t\t\t\t\t\t'对除'+get.translation(player)+'以外的角色使用'+get.translation(cards)+'，并将装备区里的武器牌交给该牌的一个目标角色',\n\t\t\t\t\t\t\t'视为'+get.translation(player)+'对你使用'+get.translation(cards)+'，并将装备区内的武器牌交给'+get.translation(player)\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t\telse if(bool1){\n\t\t\t\t\t\tevent.directindex=0;\n\t\t\t\t\t}\n\t\t\t\t\telse if(bool2){\n\t\t\t\t\t\tevent.directindex=1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar card=cards[0];\n\t\t\t\t\tif(result&&typeof event.directindex!='number'){\n\t\t\t\t\t\tevent.directindex=result.index;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.directindex==1){\n\t\t\t\t\t\tevent.insert(lib.skill.wylianji.content_use,{\n\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.insert(lib.skill.wylianji.content_give,{\n\t\t\t\t\t\t\tplayer:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\ttargets:game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},content_use: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.useCard(card,target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!get.owner(card)){\n\t\t\t\t\t\ttarget.gain(card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar equip1=target.getEquip(1);\n\t\t\t\t\tif(equip1){\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\ttarget.give(equip1,player);\n\t\t\t\t\t\ttarget.line(player);\n\t\t\t\t\t}\n\t\t\t\t},content_give: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar select=get.select(get.info(card).selectTarget);\n\t\t\t\t\tif(select[1]==-1){\n\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\t\tif(!player.canUse(card,targets[i])){\n\t\t\t\t\t\t\t\ttargets.splice(i--,1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\t\tplayer.useCard(card,targets);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.list=targets.slice(0);\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget(select,'选择'+get.translation(card)+'的目标',true,function(cardx,player,target){\n\t\t\t\t\t\t\tvar card=_status.event.card;\n\t\t\t\t\t\t\treturn _status.event.targets.contains(target)&&player.canUse(card,target);\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar card=_status.event.card;\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.effect(target,card,player,player);\n\t\t\t\t\t\t}).set('targets',targets).set('card',card);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.useCard(card,result.targets);\n\t\t\t\t\t\tevent.list=result.targets.slice(0);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar equip1=player.getEquip(1);\n\t\t\t\t\tif(equip1){\n\t\t\t\t\t\tfor(var i=0;i<event.list.length;i++){\n\t\t\t\t\t\t\tif(event.list[i].isDead()) event.list.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.list.length>1){\n\t\t\t\t\t\t\tplayer.chooseTarget(true,'将'+get.translation(equip1)+'交给一名角色',function(card,player,target){\n\t\t\t\t\t\t\t\treturn _status.event.list.contains(target);\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t\t}).set('list',_status.event.list);\n\t\t\t\t\t\t\tevent.equip1=equip1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(event.list.length==1){\n\t\t\t\t\t\t\t\tplayer.give(equip1,event.list[0]);\n\t\t\t\t\t\t\t\tplayer.line(event.list);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool&&result.targets.length&&event.equip1){\n\t\t\t\t\t\tplayer.give(event.equip1,result.targets[0]);\n\t\t\t\t\t\tplayer.line(result.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\t\tvar bool=(card.name!='sha');\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn target.canUse(card,current,bool)&&get.effect(current,card,target,player)>0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\t\t\t\tif(target.getEquip(1)){\n\t\t\t\t\t\t\t\t\t\tnum=0.6;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(target.hasSkillTag('noe')) 2*num;\n\t\t\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以展示一张【杀】或黑色锦囊牌，并令一名其他角色将牌堆中的随机一张武器牌置入装备区（可替换原装备）。然后该角色选择一项：1.对除你以外的角色使用该牌，并将装备区里的武器牌交给该牌的一个目标角色；2.令你对其使用此牌，然后获得此牌，并将装备区内的武器牌交给你。"},"moucheng":{"name":"谋逞","script":"{audio: \"2\",derivation: [\"jingong\",\"wy_meirenji\",\"wy_xiaolicangdao\"],trigger: {global: \"damageEnd\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\treturn event.source!=player&&event.getParent(2).name=='useCard'&&event.getParent(3).name=='wylianjiInserted';\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.moucheng=0;\n\t\t\t\t},intro: {content: \"已造成#点伤害\",},unique: \"true\",juexingji: \"true\",content: function (){\n\t\t\t\t\tplayer.storage.moucheng+=trigger.num;\n\t\t\t\t\tif(player.hasSkill('moucheng')){\n\t\t\t\t\t\tplayer.markSkill('moucheng');\n\t\t\t\t\t\tplayer.syncStorage('moucheng');\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.moucheng>=3){\n\t\t\t\t\t\tevent.trigger('mouchengAwaken');\n\t\t\t\t\t}\n\t\t\t\t},group: \"moucheng_awaken\",subSkill: {awaken: {trigger: {player: \"mouchengAwaken\",},forced: \"true\",skillAnimation: \"true\",animationColor: \"gray\",content: function (){\n\t\t\t\t\t\t\tplayer.awakenSkill('moucheng');\n\t\t\t\t\t\t\tplayer.removeSkill('wylianji');\n\t\t\t\t\t\t\tplayer.addSkill('jingong');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"觉醒技，当其他角色使用因〖连计〗交给其的牌累计造成伤害达到3点后，你失去技能〖连计〗，然后获得技能〖矜功〗"},"tianxiang":{"name":"天香","script":"{audio: \"2\",audioname: [\"daxiaoqiao\",\"re_xiaoqiao\",\"ol_xiaoqiao\"],trigger: {player: \"damageBegin3\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{suit:'heart'})>0&&event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.suit(card)=='heart'&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\tvar da=0;\n\t\t\t\t\t\t\tif(_status.event.player.hp==1){\n\t\t\t\t\t\t\t\tda=10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(trigger.num>1){\n\t\t\t\t\t\t\t\tif(target.maxHp>5&&target.hp>1) return -att/10+da;\n\t\t\t\t\t\t\t\treturn -att+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,trigger.source,target,trigger.nature);\n\t\t\t\t\t\t\tif(att==0) return 0.1+da;\n\t\t\t\t\t\t\tif(eff>=0&&trigger.num==1){\n\t\t\t\t\t\t\t\treturn att+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==target.maxHp) return -att+da;\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tif(target.maxHp<=4&&!target.hasSkillTag('maixie')){\n\t\t\t\t\t\t\t\t\tif(target.maxHp<=3){\n\t\t\t\t\t\t\t\t\t\treturn -att+da;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -att/2+da;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==target.maxHp-1){\n\t\t\t\t\t\t\t\tif(target.hp>2||target.hasSkillTag('maixie')) return att/5+da;\n\t\t\t\t\t\t\t\tif(att>0) return 0.02+da;\n\t\t\t\t\t\t\t\treturn 0.05+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att/2+da;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt2('tianxiang')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill(event.name,result.targets);\n\t\t\t\t\t\ttrigger.player=result.targets[0];\n\t\t\t\t\t\ttrigger.player.addSkill('tianxiang2');\n\t\t\t\t\t\tplayer.discard(result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.countCards('h')>1) return 0.7;\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(target.countCards('h')==0) return 2;\n\t\t\t\t\t},},}","info":"当你即将受到伤害时，你可以弃置一张♥手牌，将伤害转移给一名其他角色，然后该角色摸X张牌（X为其已损失的体力值）。"},"hongyan":{"name":"红颜","script":"{mod: {suit: function (card,suit){\n\t\t\t\t\t\tif(suit=='spade') return 'heart';\n\t\t\t\t\t},},}","info":"锁定技，你区域内的黑桃牌和黑桃判定牌均视为红桃。"},"kuanggu":{"name":"狂骨","script":"{audio: \"2\",audioname: [\"re_weiyan\",\"ol_weiyan\"],trigger: {source: \"damageSource\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.distance(player,event.player)<=1&&player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.recover(trigger.num);\n\t\t\t\t},}","info":"锁定技，当你造成一点伤害后，若受伤角色与你的距离不大于1，你回复一点体力。"},"shensu":{"name":"神速","script":"{audio: \"shensu1\",audioname: [\"xiahouba\",\"re_xiahouyuan\",\"ol_xiahouyuan\"],group: [\"shensu1\",\"shensu2\"],}","info":"你可以跳过判定阶段和摸牌阶段，或跳过出牌阶段并弃置一张装备牌。若如此做，则你可以视为对任意一名角色使用一张无距离限制的【杀】"},"zishu":{"name":"自书","script":"{audio: \"2\",locked: \"true\",subSkill: {discard: {trigger: {global: \"phaseEnd\",},audio: \"zishu\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player){\n\t\t\t\t\t\t\t\tvar he=player.getCards('h');\n\t\t\t\t\t\t\t\tvar bool=false;\n\t\t\t\t\t\t\t\tplayer.getHistory('gain',function(evt){\n\t\t\t\t\t\t\t\t\tif(!bool&&evt&&evt.cards){\n\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<evt.cards.length;i++){\n\t\t\t\t\t\t\t\t\t\t\tif(he.contains(evt.cards[i])) bool=true;break;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn bool;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar he=player.getCards('h');\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tplayer.getHistory('gain',function(evt){\n\t\t\t\t\t\t\t\tif(evt&&evt.cards){\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<evt.cards.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(he.contains(evt.cards[i])) list.add(evt.cards[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tplayer.$throw(list,1000);\n\t\t\t\t\t\t\tplayer.lose(list,ui.discardPile,'visible');\n\t\t\t\t\t\t\tgame.log(player,'将',list,'置入弃牌堆');\n\t\t\t\t\t\t},sub: \"true\",},mark: {trigger: {player: \"gainBegin\",global: \"phaseBeginStart\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.name!='gain'||player!=_status.currentPhase;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(trigger.name=='gain') trigger.gaintag.add('zishu');\n\t\t\t\t\t\t\telse player.removeGaintag('zishu');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},draw: {trigger: {player: \"gainAfter\",},audio: \"zishu\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\t\t\treturn event.getParent(2).name!='zishu_draw';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw('nodelay');\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: \"1.2\",nogain: \"1\",skillTagFilter: function (player){\n\t\t\t\t\t\treturn player!=_status.currentPhase;\n\t\t\t\t\t},},group: [\"zishu_draw\",\"zishu_discard\",\"zishu_mark\"],}","info":"锁定技，你的回合外，你获得的牌均会在当前回合结束后置入弃牌堆；你的回合内，当你不因〖自书〗而获得牌时，你摸一张牌。"},"yingyuan":{"name":"应援","script":"{audio: \"2\",trigger: {player: \"useCardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tif(player.getHistory('custom',function(evt){\n\t\t\t\t\t\treturn evt.yingyuan_name==event.card.name;\n\t\t\t\t\t}).length>0) return false;\n\t\t\t\t\treturn event.cards.filterInD().length>0\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('yingyuan'),'将'+get.translation(trigger.cards)+'交给一名其他角色',function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(target.hasJudge('lebu')) return 0;\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att<3) return 0;\n\t\t\t\t\t\tif(target.hasSkillTag('nogain')) att/=10;\n\t\t\t\t\t\tif(target.hasSha()&&_status.event.sha){\n\t\t\t\t\t\t\tatt/=5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.wuxie&&target.needsToDiscard(1)){\n\t\t\t\t\t\t\tatt/=5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att/(1+get.distance(player,target,'absolute'));\n\t\t\t\t\t}).set('sha',trigger.cards[0].name=='sha').set('wuxie',trigger.cards[0].name=='wuxie');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yingyuan',result.targets[0]);\n\t\t\t\t\t\tresult.targets[0].gain(trigger.cards.filterInD(),'gain2');\n\t\t\t\t\t\tplayer.getHistory('custom').push({yingyuan_name:trigger.card.name});\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你于回合内使用的牌结算完成后，你可以将其交给一名其他角色（相同牌名的牌每回合限一次）。"},"fenyue":{"name":"奋钺","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('h')) return false;\n\t\t\t\t\tvar num;\n\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\tnum=game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn current.identity=='zhong'||current.identity=='mingzhong';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnum=1;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.getStat().skill.fenyue>=num) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},ai: {order: \"2.8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&player.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn (card.number>=9&&get.value(card)<=5)||get.value(card)<=3;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseControl(function(){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}).set('choiceList',[\n\t\t\t\t\t\t\t'令'+get.translation(target)+'不能使用或打出手牌直到回合结束',\n\t\t\t\t\t\t\t'视为对'+get.translation(target)+'使用一张杀（不计入次数限制）'\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\t\tif(evt&&evt.name=='phaseUse'){\n\t\t\t\t\t\t\tevt.skipped=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control=='选项一'){\n\t\t\t\t\t\ttarget.addTempSkill('fenyue2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.useCard({name:'sha',isCard:true},target,false);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段限X次，你可以与一名角色拼点，若你赢，你选择一项：1.令其不能使用或打出手牌直到回合结束；2.视为你对其使用了【杀】（不计入次数限制）。若你没赢，你结束出牌阶段。（X为存活的忠臣数）"},"xinfu_jingxie1":{"name":"精械","script":"{group: [\"xinfu_jingxie2\"],position: \"he\",audio: \"xinfu_jingxie\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tvar he=player.getCards('he');\n\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\tif([\"bagua\",\"baiyin\",\"lanyinjia\",\"renwang\",\"tengjia\",\"zhuge\"].contains(he[i].name)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn [\"bagua\",\"baiyin\",\"lanyinjia\",\"renwang\",\"tengjia\",\"zhuge\"].contains(card.name);\n\t\t\t\t},discard: \"false\",check: function (){\n\t\t\t\t\treturn 1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar card=cards[0];\n\t\t\t\t\tplayer.gain(game.createCard('rewrite_'+card.name,get.suit(card),card.number),'gain2');\n\t\t\t\t},ai: {basic: {order: \"10\",},result: {player: \"1\",},},}","info":"出牌阶段，你可以展示一张未强化过的【诸葛连弩】或标准包/军争包/SP包中的防具牌，然后对其进行强化。当你处于濒死状态时，你可以重铸一张防具牌，然后将体力回复至1点。"},"xinfu_qiaosi":{"name":"巧思","script":"{enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(get.isLuckyStar(player)){\n\t\t\t\t\t\tevent.num=6;\n\t\t\t\t\t\tplayer.throwDice(6);\n\t\t\t\t\t}\n\t\t\t\t\telse player.throwDice();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.cards=get.cards(event.num);\n\t\t\t\t\tplayer.showCards(event.cards);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.gain(event.cards,'gain2');\n\t\t\t\t\tplayer.chooseControl().set('choiceList',[\n\t\t\t\t\t\t'将'+get.cnNumber(event.num)+'张牌交给一名其他角色',\n\t\t\t\t\t\t'弃置'+get.cnNumber(event.num)+'张牌',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&get.attitude(player,current)>2;\n\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tselectCard:event.num,\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprompt:'请选择要送人的卡牌',\n\t\t\t\t\t\t\tforced:true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseToDiscard(event.num,true,'he');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.give(result.cards,target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7.5\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以投掷一枚六面骰子，展示牌堆顶的X张牌并获得之。然后，你选择一项：1.交给一名其他角色X张牌。2.弃置X张牌。（X为骰子的点数）"},"oldshenxian":{"name":"甚贤","script":"{audio: \"shenxian\",inherit: \"shenxian\",trigger: {global: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.type!='discard'||event.player==player||_status.currentPhase==player) return false;\n\t\t\t\t\tif(player.hasSkill('shenxian2')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards2[i],null,event.hs.contains(event.cards2[i])?event.player:false)=='basic'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tif(event.name=='shenxian') player.addTempSkill('shenxian2');\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"你的回合外，每当有其他角色因弃置而失去基本牌时，你可以摸一张牌。"},"qiangwu":{"name":"枪舞","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.storage.qiangwu=result.number;\n\t\t\t\t\tplayer.addTempSkill('qiangwu3','phaseUseEnd');\n\t\t\t\t},ai: {result: {player: \"1\",},order: \"11\",},}","info":"出牌阶段，你可以进行判定。若如此做，直到回合结束，你使用点数小于判定结果的【杀】时不受距离限制，且你使用点数大于判定结果的【杀】时不计入出牌阶段的使用次数限制。"},"oldzhuikong":{"name":"惴恐","script":"{audio: \"zhuikong\",inherit: \"zhuikong\",trigger: {global: \"phaseZhunbeiBegin\",},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<-2){\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tif(cards.length>player.hp) return true;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tvar useful=get.useful(cards[i]);\n\t\t\t\t\t\t\tif(useful<5) return true;\n\t\t\t\t\t\t\tif(cards[i].number>9&&useful<7) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp&&player.canCompare(event.player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(event.name=='zhuikong') trigger.player.addTempSkill('zishou2');\n\t\t\t\t\t\telse trigger.player.skip('phaseUse');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.storage.zhuikong_distance=player;\n\t\t\t\t\t\ttrigger.player.addTempSkill('zhuikong_distance');\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {distance: {sub: \"true\",onremove: \"true\",mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\t\t\tif(from.storage.zhuikong_distance==to) return -Infinity;\n\t\t\t\t\t\t\t},},},},}","info":"其他角色的准备阶段，若你已受伤，你可以与该角色拼点。若你赢，该角色跳过本回合的出牌阶段。若你没赢，其本回合至你的距离视为1。"},"oldqiuyuan":{"name":"求援","script":"{audio: \"qiuyuan\",inherit: \"qiuyuan\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('oldqiuyuan'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!_status.event.targets.contains(target)&&_status.event.playerx.canUse('sha',target,false)&&target.countCards('h');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,trigger.player,player)+0.1;\n\t\t\t\t\t}).set('targets',trigger.targets).set('playerx',trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('oldqiuyuan',target);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\ttarget.chooseCard('交给'+get.translation(player)+\n\t\t\t\t\t\t'一张牌，若此牌不为【闪】，则也成为此杀的额外目标',true).set('ai',function(card){\n\t\t\t\t\t\t\treturn -get.value(card,player,'raw');\n\t\t\t\t\t\t}).set('sourcex',player);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,event.target,'give');\n\t\t\t\t\t\tif(get.name(result.cards[0])!='shan'){\n\t\t\t\t\t\t\ttrigger.getParent().targets.push(event.target);\n\t\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.push(event.target);\n\t\t\t\t\t\t\tgame.log(event.target,'成为了额外目标');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},trigger: {target: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},ai: {expose: \"0.2\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name!='sha') return;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0){\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar target2=players[i];\n\t\t\t\t\t\t\t\t\tif(player!=target2&&target!=target2&&player.canUse(card,target2,false)&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,target)>0&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,player)<0){\n\t\t\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return 0.3;\n\t\t\t\t\t\t\t\t\t\treturn 0.6;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar target2=players[i];\n\t\t\t\t\t\t\t\t\tif(player!=target2&&target!=target2&&player.canUse(card,target2,false)&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,player)>0){\n\t\t\t\t\t\t\t\t\t\tif(player.canUse(card,target2)) return;\n\t\t\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return [0,1];\n\t\t\t\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标时，你可以令一名有手牌的其他角色正面朝上交给你一张牌。若此牌不为【闪】，则该角色也成为此【杀】的额外目标。"},"oldrenxin":{"name":"仁心","script":"{trigger: {global: \"dying\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.hp<=0&&player.countCards('h')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<0) return false;\n\t\t\t\t\tif(player.countCards('h',{name:['tao','jiu']})+event.player.hp<0) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttrigger.player.gain(player.getCards('h'),'give',player);\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttrigger.player.recover();\n\t\t\t\t},}","info":"其他角色进入濒死状态时，你可以将所有手牌交给该角色并翻面，然后该角色回复1点体力。"},"oldchengxiang":{"name":"称象","script":"{audio: \"chengxiang\",inherit: \"chengxiang\",trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.cards=get.cards(4);\n\t\t\t\t\tgame.cardsGotoOrdering(event.cards);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tgame.broadcastAll(function(player,id,cards,num){\n\t\t\t\t\t\tvar str;\n\t\t\t\t\t\tif(player==game.me&&!_status.auto){\n\t\t\t\t\t\t\tstr='称象：选择任意张点数不大于'+num+'的牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr='称象';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar dialog=ui.create.dialog(str,cards);\n\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t},player,event.videoId,event.cards,event.name=='chengxiang'?13:12);\n\t\t\t\t\tevent.time=get.utc();\n\t\t\t\t\tgame.addVideo('showCards',player,['称象',get.cardsInfo(event.cards)]);\n\t\t\t\t\tgame.addVideo('delay',null,2);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar next=player.chooseButton([0,4]);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tvar num=0\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.buttons[i].link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (num+get.number(button.link)<=_status.event.maxNum);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('maxNum',event.name=='chengxiang'?13:12);\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.links){\n\t\t\t\t\t\t//player.logSkill('chengxiang');\n\t\t\t\t\t\tvar cards2=[];\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tcards2.push(result.links[i]);\n\t\t\t\t\t\t\tcards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.cards2=cards2;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\tvar time=1000-(get.utc()-event.time);\n\t\t\t\t\tif(time>0){\n\t\t\t\t\t\tgame.delay(0,time);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tvar cards2=event.cards2;\n\t\t\t\t\tplayer.gain(cards2,'log','gain2');\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以亮出牌堆顶的四张牌。然后获得其中任意数量点数之和不大于12的牌"},"old_guhuo":{"name":"蛊惑","script":"{group: [\"old_guhuo_guess\",\"old_guhuo_respond\",\"old_guhuo_wuxie\"],enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('h')) return false;\n\t\t\t\t\tvar list=['sha','tao','shan','jiu','taoyuan','wugu','juedou','huogong','jiedao','tiesuo','guohe','shunshou','wuzhong','wanjian','nanman'];\n\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\tlist=list.concat(['xietianzi','shuiyanqijunx','lulitongxin','lianjunshengyan','chiling','diaohulishan','yuanjiao','huoshaolianying']);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(event.filterCard({name:list[i]},player)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(name=='wuxie') continue;\n\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('蛊惑',[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(evt&&evt.filterCard){\n\t\t\t\t\t\t\treturn evt.filterCard({name:button.link[2]},player,evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tselectCard:1,\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3]},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将一张手牌当'+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {save: \"true\",respondShan: \"true\",respondSha: \"true\",},}","info":"你可以说出任何一种基本牌或普通锦囊牌，并正面朝下使用或打出一张手牌。体力值不为0的其他角色依次选择是否质疑。若无角色质疑，则该牌按你所述之牌结算。若有角色质疑则亮出验明：若为真，质疑者各失去1点体力；若为假，质疑者各摸一张牌。无论真假，弃置被质疑的牌。仅当被质疑的牌为红桃花色且为真时，该牌仍然可以进行结算。"},"leiji":{"name":"雷击","script":"{audio: \"2\",trigger: {player: [\"useCard\",\"respond\"],},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='shan';\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\";\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('leiji')).ai=function(target){\n\t\t\t\t\t\tif(target.hasSkill('hongyan')) return 0;\n\t\t\t\t\t\treturn get.damageEffect(target,_status.event.player,_status.event.player,'thunder');\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('leiji',result.targets,'thunder');\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tevent.target.judge(function(card){\n\t\t\t\t\t\t\tif(get.suit(card)=='spade') return -4;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\tevent.target.damage(2,'thunder');\n\t\t\t\t\t}\n\t\t\t\t},ai: {mingzhi: \"false\",useShan: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\tvar hastarget=game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn get.attitude(target,current)<0;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(target.countCards('h','shan')&&target.countCards('e',{suit:'spade'})){\n\t\t\t\t\t\t\t\t\treturn [0,hastarget?target.countCards('he')/2:0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h','shan')){\n\t\t\t\t\t\t\t\t\treturn [1,hastarget?target.countCards('he')/2:0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn [1,target.countCards('h')/4];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你使用或打出一张【闪】时，你可令任意一名角色进行一次判定。若结果为黑桃，其受到两点雷电伤害"},"guidao":{"name":"鬼道","script":"{audio: \"2\",audioname: [\"sp_zhangjiao\"],trigger: {global: \"judge\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，'+get.prompt('guidao'),'he',function(card){\n\t\t\t\t\t\tif(get.color(card)!='black') return false;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0||result==0) return 0;\n\t\t\t\t\t\tif(attitude>0){\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.respond(result.cards,'highlight','guidao','noOrdering');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.$gain2(trigger.player.judging[0]);\n\t\t\t\t\t\tplayer.gain(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.orderingCards.addArray(result.cards);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"1\",},},}","info":"一名角色的判定牌生效前，你可以打出一张黑色牌替换之。"},"huangtian":{"name":"黄天","script":"{unique: \"true\",audio: \"huangtian2\",audioname: [\"zhangjiao\",\"re_zhangjiao\"],global: \"huangtian2\",zhuSkill: \"true\",}","info":"主公技，其他群势力角色的出牌阶段限一次，其可以交给你一张【闪】或【闪电】。"},"new_repaoxiao":{"name":"咆哮","script":"{audio: \"paoxiao\",firstDo: \"true\",audioname2: {old_guanzhang: \"old_fuhun\",xin_zhangfei: \"paoxiao_re_zhangfei\",},audioname: [\"re_zhangfei\",\"guanzhang\",\"xiahouba\"],trigger: {player: \"useCard1\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn (!event.audioed||!player.hasSkill('new_repaoxiao2'))&&event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.audioed=true;\n\t\t\t\t\tplayer.addTempSkill('new_repaoxiao2');\n\t\t\t\t},mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha') return Infinity;\n\t\t\t\t\t},},ai: {unequip: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!get.zhu(player,'shouyue')) return false;\n\t\t\t\t\t\tif(arg&&arg.name=='sha') return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技，出牌阶段，你使用【杀】没有数量限制。若你于此出牌阶段内使用过【杀】，则你本回合内使用【杀】没有距离限制。"},"new_tishen":{"name":"替身","script":"{trigger: {player: \"phaseUseEnd\",},check: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar he=player.getCards('he');\n\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\tif(get.type(he[i],'trick')=='trick'){\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.type(he[i])=='equip'){\n\t\t\t\t\t\t\tvar subtype=get.subtype(he[i]);\n\t\t\t\t\t\t\tif(subtype=='equip3'||subtype=='equip4'){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn num==0||num<=player.countCards('h')-player.getHandcardLimit();\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar he=player.getCards('he');\n\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\tif(get.type(he[i],'trick')=='trick'){\n\t\t\t\t\t\t\tlist.push(he[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.type(he[i])=='equip'){\n\t\t\t\t\t\t\tvar subtype=get.subtype(he[i]);\n\t\t\t\t\t\t\tif(subtype=='equip3'||subtype=='equip4'){\n\t\t\t\t\t\t\t\tlist.push(he[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length) player.discard(list);\n\t\t\t\t\tplayer.addTempSkill('new_tishen2',{player:'phaseBefore'});\n\t\t\t\t},audio: \"retishen\",}","info":"出牌阶段结束时，你可以弃置你所有的锦囊牌与坐骑牌。若如此做，直到你的下个回合开始，你获得所有以你为目标且未对你造成伤害的【杀】。"},"longdan":{"name":"龙胆","script":"{audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],group: [\"longdan_sha\",\"longdan_shan\",\"longdan_draw\"],subSkill: {draw: {trigger: {player: [\"useCard\",\"respond\"],},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!get.zhu(player,'shouyue')) return false;\n\t\t\t\t\t\t\treturn event.skill=='longdan_sha'||event.skill=='longdan_shan';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tplayer.storage.fanghun2++;\n\t\t\t\t\t\t},sub: \"true\",},sha: {audio: \"2\",audioname: [\"re_zhaoyun\"],enable: [\"chooseToUse\",\"chooseToRespond\"],filterCard: {name: \"shan\",},viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\t},prompt: \"将一张闪当杀使用或打出\",check: function (){return 1},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondSha')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\t\t},order: function (){\n\t\t\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t\t\t},useful: \"-1\",value: \"-1\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},sub: \"true\",},shan: {audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: {name: \"sha\",},viewAs: {name: \"shan\",},prompt: \"将一张杀当闪使用或打出\",check: function (){return 1},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return false;\n\t\t\t\t\t\t},ai: {respondShan: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return false;\n\t\t\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},order: \"4\",useful: \"-1\",value: \"-1\",basic: {useful: [7,2],value: [7,2],},result: {player: \"1\",},},sub: \"true\",},},}","info":"你可以将【杀】当做【闪】，或将【闪】当做【杀】使用或打出。"},"new_yajiao":{"name":"涯角","script":"{audio: \"reyajiao\",trigger: {player: \"loseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=_status.currentPhase&&event.hs&&event.hs.length>0&&['useCard','respond'].contains(event.getParent().name);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.card=get.cards();\n\t\t\t\t\tplayer.showCards(event.card);\n\t\t\t\t\tevent.same=false;\n\t\t\t\t\tif(get.type(event.card[0],'trick')==get.type(trigger.getParent().card,'trick')) event.same=true;\n\t\t\t\t\tplayer.chooseTarget('选择获得此牌的角色',true).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(_status.event.du){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0;\n\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!_status.event.same) att+=target==_status.event.player?1:0;\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\treturn att+Math.max(0,5-target.countCards('h'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t}).set('du',event.card.name=='du').set('same',event.same);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.targets){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tresult.targets[0].gain(event.card,'gain2');\n\t\t\t\t\t\tif(!event.same) player.chooseToDiscard(true,'he');\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'respond')&&target.countCards('h')>1) return [1,0.2];\n\t\t\t\t\t\t},},},}","info":"每当你于回合外使用或打出牌时，你可以亮出牌堆顶的一张牌，并将其交给一名角色。若此牌与你此次使用或打出的牌类别不同，则你弃置一张牌。"},"jijiu":{"name":"急救","script":"{audio: \"2\",audioname: [\"re_huatuo\"],enable: \"chooseToUse\",viewAsFilter: function (player){\n\t\t\t\t\treturn player!=_status.currentPhase&&player.countCards('he',{color:'red'})>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},position: \"he\",viewAs: {name: \"tao\",},prompt: \"将一张红色牌当桃使用\",check: function (card){return 15-get.value(card)},ai: {threaten: \"1.5\",basic: {order: function (card,player){\n\t\t\t\t\t\t\tif(player.hasSkillTag('pretao')) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},useful: [8,6.5,5,4],value: [8,6.5,5,4],},result: {target: \"2\",target_use: function (player,target){\n\t\t\t\t\t\t\t// if(player==target&&player.hp<=0) return 2;\n\t\t\t\t\t\t\tif(player.hasSkillTag('nokeep',true,null,true)) return 2;\n\t\t\t\t\t\t\tvar nd=player.needsToDiscard();\n\t\t\t\t\t\t\tvar keep=false;\n\t\t\t\t\t\t\tif(nd<=0){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nd==1&&target.hp>=2&&target.countCards('h','tao')<=1){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\t\t\tif(target.hp>=2&&keep&&target.hasFriend()){\n\t\t\t\t\t\t\t\tif(target.hp>2||nd==0) return 0;\n\t\t\t\t\t\t\t\tif(target.hp==2){\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(target!=current&&get.attitude(target,current)>=3){\n\t\t\t\t\t\t\t\t\t\t\tif(current.hp<=1) return true;\n\t\t\t\t\t\t\t\t\t\t\tif((mode=='identity'||mode=='versus'||mode=='chess')&&current.identity=='zhu'&&current.hp<=2) return true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<0&&target!=player&&target.identity!='zhu') return 0;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att<3&&att>=0&&player!=target) return 0;\n\t\t\t\t\t\t\tvar tri=_status.event.getTrigger();\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='fan'&&target.identity=='fan'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='fan'&&tri.source!=target){\n\t\t\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(current.identity=='fan'){\n\t\t\t\t\t\t\t\t\t\t\treturn current.countCards('h','tao');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif(num>1&&player==target) return 2;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='zhu'&&target.identity=='nei'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='zhong'){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='stone'&&target.isMin()&&\n\t\t\t\t\t\t\tplayer!=target&&tri&&tri.name=='dying'&&player.side==target.side&&\n\t\t\t\t\t\t\ttri.source!=target.getEnemy()){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},},tag: {recover: \"1\",save: \"1\",},},}","info":"你的回合外，你可以将一张红色牌当做【桃】使用。"},"chulao":{"name":"除疠","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(target.group=='unknown') return false;\n\t\t\t\t\tfor(var i=0;i<ui.selected.targets.length;i++){\n\t\t\t\t\t\tif(ui.selected.targets[i].group==target.group) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn target.countCards('he')>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},filterCard: \"true\",position: \"he\",selectTarget: [1,null],check: function (card){\n\t\t\t\t\tif(get.suit(card)=='spade') return 8-get.value(card);\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(num==0&&get.suit(cards[0])=='spade') player.draw();\n\t\t\t\t\tplayer.choosePlayerCard(targets[num],'he',true);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(result.links.length) targets[num].discard(result.links[0]);\n\t\t\t\t\t\tif(get.suit(result.links[0])=='spade') targets[num].draw();\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: \"-1\",},threaten: \"1.2\",order: \"3\",},}","info":"出牌阶段限一次，若你有牌，你可以选择任意名势力各不相同的其他角色，你弃置你和这些角色的各一张牌。然后以此法弃置黑桃牌的角色各摸一张牌。"},"kuiwei":{"name":"溃围","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},check: function (event,player){\n\t\t\t\t\tif(player.isTurnedOver()) return true;\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.getEquip(1);\n\t\t\t\t\t});\n\t\t\t\t\treturn num>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.getEquip(1);\n\t\t\t\t\t});\n\t\t\t\t\tplayer.draw(2+num);\n\t\t\t\t\tplayer.addSkill('kuiwei2');\n\t\t\t\t},ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='guiyoujie') return [0,2];\n\t\t\t\t\t\t},},},}","info":"结束阶段开始时，你可以摸2+X张牌并记录X，然后将你的武将牌翻面（X为场上所有角色装备区内武器牌数目之和）。你的下个摸牌阶段开始时，你弃置X张牌。"},"yanzheng":{"name":"严整","script":"{enable: \"chooseToUse\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.countCards('h')&&player.countCards('e')>0;\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\treturn player.hp<player.countCards('h')&&player.countCards('e')>0;\n\t\t\t\t},filterCard: \"true\",position: \"e\",viewAs: {name: \"wuxie\",},prompt: \"将一张装备区内的牌当无懈可击使用\",check: function (card){return 8-get.equipValue(card)},threaten: \"1.2\",ai: {basic: {useful: [6,4],value: [6,4],},result: {player: \"1\",},expose: \"0.2\",},}","info":"若你的手牌数大于你的体力值，则你可以将你装备区内的牌当作【无懈可击】使用。"},"shanjia":{"name":"缮甲","script":"{sync: function (player){\n\t\t\t\t\tif(game.online) return;\n\t\t\t\t\tvar history=player.actionHistory;\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tfor(var j=0;j<history[i].useCard.length;j++){\n\t\t\t\t\t\t\tif(get.type(history[i].useCard[j].card)=='equip') num++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.shanjia=num;\n\t\t\t\t\tif(num>0) player.markSkill('shanjia');\n\t\t\t\t},audio: \"2\",intro: {content: function (storage){\n\t\t\t\t\t\tif(storage==0) return '未使用过装备牌';\n\t\t\t\t\t\treturn '已使用过'+storage+'张装备牌';\n\t\t\t\t\t},},group: \"shanjia2\",trigger: {player: \"phaseUseBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tlib.skill.shanjia.sync(player);\n\t\t\t\t\treturn player.storage.shanjia>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tlib.skill.shanjia.sync(player);\n\t\t\t\t\tplayer.draw(Math.min(7,player.storage.shanjia));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseToDiscard('he',Math.min(7,player.storage.shanjia),true);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar useCard=false;\n\t\t\t\t\tif(result.bool&&result.cards){\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tif(result.cards[i].original=='e'){\n\t\t\t\t\t\t\t\tuseCard=true;break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(useCard){\n\t\t\t\t\t\tplayer.chooseUseTarget({name:'sha'},false,'是否视为使用一张【杀】？','nodistance');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(typeof target.storage.shanjia=='number'){\n\t\t\t\t\t\t\treturn Math.min(2,Math.sqrt(1+target.storage.shanjia));\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"出牌阶段开始时，你可以摸X张牌，然后弃置等量的牌。若你以此法弃置了装备区内的牌，则你可以视为使用一张【杀】。（X为你于本局游戏内使用过的装备牌数且最大为7）"},"xinzhan":{"name":"心战","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn true;//player.countCards('h')>player.maxHp;\n\t\t\t\t},usable: \"1\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=get.cards(3);\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar next=player.chooseCardButton(cards,'选择获得的红桃牌',[1,Infinity]).set('filterButton',function(button){\n\t\t\t\t\t\treturn get.suit(button.link)=='heart';\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.links);\n\t\t\t\t\t\tplayer.$draw(result.links);\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=event.cards.length-1;i>=0;i--){\n\t\t\t\t\t\tif(!result.bool||!result.links.contains(event.cards[i])){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(event.cards[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"11\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以观看牌堆顶的3张牌，然后展示其中任意数量♥的牌并获得之。"},"huilei":{"name":"挥泪","script":"{audio: \"2\",trigger: {player: \"die\",},forced: \"true\",forceDie: \"true\",filter: function (event){\n\t\t\t\t\treturn event.source!=undefined;\n\t\t\t\t},logTarget: \"source\",skillAnimation: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\ttrigger.source.discard(trigger.source.getCards('he'));\n\t\t\t\t},ai: {threaten: \"0.7\",},}","info":"锁定技，当你死亡时，杀死你的角色弃置所有的牌。"},"wuyan":{"name":"无言","script":"{audio: \"2\",trigger: {target: \"useCardToBefore\",player: \"useCardToBefore\",},forced: \"true\",priority: \"15\",check: function (event,player){\n\t\t\t\t\treturn get.effect(event.target,event.card,event.player,player)<0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(!event.target) return false;\n\t\t\t\t\tif(event.player==player&&event.target==player) return false;\n\t\t\t\t\treturn (get.type(event.card)=='trick');\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&player!=target) return 'zeroplayertarget';\n\t\t\t\t\t\t},player: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&player!=target) return 'zeroplayertarget';\n\t\t\t\t\t\t},},},}","info":"锁定技，你使用的普通锦囊牌对其他角色无效；其他角色使用的普通锦囊牌对你无效。"},"jujian":{"name":"举荐","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",filterCard: \"true\",position: \"he\",selectCard: [1,3],check: function (card){\n\t\t\t\t\tvar player=get.owner(card);\n\t\t\t\t\tif(get.type(card)=='trick') return 10;\n\t\t\t\t\tif(player.countCards('h')-player.hp-ui.selected.cards.length>0){\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 4-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.draw(cards.length);\n\t\t\t\t\tif(cards.length==3){\n\t\t\t\t\t\tif(get.type(cards[0],'trick')==get.type(cards[1],'trick')&&\n\t\t\t\t\t\t\tget.type(cards[0],'trick')==get.type(cards[2],'trick')){\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",order: \"1\",result: {target: \"1\",},},}","info":"出牌阶段限一次，你可以弃至多三张牌，然后令一名其他角色摸等量的牌。若你以此法弃牌不少于三张且均为同一类别，你回复1点体力。"},"juece":{"name":"绝策","script":"{audio: \"2\",trigger: {global: \"loseAfter\",},check: function (event,player){\n\t\t\t\t\treturn get.damageEffect(event.player,player,player)>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.player.countCards('h')) return false;\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\treturn event.hs&&event.hs.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\ttrigger.player.damage();\n\t\t\t\t},ai: {threaten: \"1.1\",},}","info":"当其他角色在你回合内失去最后一张手牌时，你可以对其造成一点伤害。"},"mieji":{"name":"灭计","script":"{trigger: {player: \"useCard2\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn event.targets.length==1&&get.type(event.card)=='trick'&&get.color(event.card)=='black';\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('mieji'),'为'+get.translation(trigger.card)+'增加一个额外目标',function(card,player,target){\n\t\t\t\t\t\tvar trigger=_status.event;\n\t\t\t\t\t\treturn lib.filter.filterTarget(trigger.card,player,target)&&target!=trigger.targets[0];\n\t\t\t\t\t}).set('autodelay',true).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player);\n\t\t\t\t\t}).set('targets',trigger.targets).set('card',trigger.card);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.targets.push(result.targets[0]);\n\t\t\t\t\t\tplayer.logSkill('mieji',result.targets);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用黑色普通锦囊牌选择目标后，若目标数为1，则你可以额外指定一个目标。"},"fencheng":{"name":"焚城","script":"{skillAnimation: \"epic\",animationColor: \"gray\",audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.fencheng;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},unique: \"true\",limited: \"true\",selectTarget: \"-1\",mark: \"true\",line: \"fire\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.storage.fencheng=true;\n\t\t\t\t\tplayer.awakenSkill('fencheng');\n\t\t\t\t\tvar res=get.damageEffect(target,player,target,'fire');\n\t\t\t\t\tvar num=Math.max(1,target.countCards('e'));\n\t\t\t\t\ttarget.chooseToDiscard(num,'he','弃置'+get.cnNumber(num)+'张牌或受到1点火焰伤害').set('ai',function(card){\n\t\t\t\t\t\tvar res=_status.event.res;\n\t\t\t\t\t\tvar num=_status.event.num;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(res>=0) return -1;\n\t\t\t\t\t\tif(num>2&&player.hp>1) return -1;\n\t\t\t\t\t\tif(num>1&&player.hp>2) return -1;\n\t\t\t\t\t\tif(get.position(card)=='e'){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}).set('res',res).set('num',num);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttarget.damage('fire');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tvar num=0,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(player!=players[i]&&get.damageEffect(players[i],player,players[i],'fire')<0){\n\t\t\t\t\t\t\t\t\tvar att=get.attitude(player,players[i]);\n\t\t\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\t\t\tnum-=Math.max(1,players[i].countCards('e'));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(att<0){\n\t\t\t\t\t\t\t\t\t\tnum+=Math.max(1,players[i].countCards('e'));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(players.length<5){\n\t\t\t\t\t\t\t\treturn num-1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn num-2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},init: function (player){\n\t\t\t\t\tplayer.storage.fencheng=false;\n\t\t\t\t},intro: {content: \"limited\",},}","info":"限定技。出牌阶段，你可令所有其他角色依次选择一项：弃置X张牌；或受到1点火焰伤害。(X为该角色装备区里牌的数量且至少为1)"},"yizhong":{"name":"毅重","script":"{trigger: {target: \"shaBefore\",},forced: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\tif(player.getEquip(2)) return false;\n\t\t\t\t\treturn (event.card.name=='sha'&&get.color(event.card)=='black')\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player==target&&get.subtype(card)=='equip2'){\n\t\t\t\t\t\t\t\tif(get.equipValue(card)<=8) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.getEquip(2)) return;\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='black') return 'zerotarget';\n\t\t\t\t\t\t},},},}","info":"锁定技，当你的防具栏为空时，黑色的杀对你无效"},"jieyue":{"name":"节钺","script":"{group: \"jieyue1\",}","info":"结束阶段开始时，你可以弃置一张手牌，然后令一名其他角色选择一项：将一张牌置于你的武将牌上（称之为“节”）；或令你弃置其一张牌。当你你武将牌上有“节”时，你可以将红色手牌当作【闪】、黑色的手牌当作【无懈可击】使用或打出。准备阶段开始时，你获得你武将牌上的“节”。"},"zzhenggong":{"name":"争功","script":"{trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.countCards('e')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar att=get.attitude(player,trigger.source);\n\t\t\t\t\tplayer.choosePlayerCard('e',get.prompt('zzhenggong'),trigger.source).ai=function(button){\n\t\t\t\t\t\tif(att<=0){\n\t\t\t\t\t\t\treturn get.equipValue(button.link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('zzhenggong',trigger.source);\n\t\t\t\t\t\tplayer.equip(result.links[0]);\n\t\t\t\t\t\ttrigger.source.$give(result.links[0],player,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",},}","info":"你每受到一次伤害，可以获得伤害来源装备区中的一张牌并立即放入你的装备区。"},"zquanji":{"name":"权计","script":"{trigger: {global: \"phaseZhunbeiBefore\",},check: function (event,player){\n\t\t\t\t\tvar att=get.attitude(player,event.player);\n\t\t\t\t\tif(att<0){\n\t\t\t\t\t\tvar nh1=event.player.countCards('h');\n\t\t\t\t\t\tvar nh2=player.countCards('h');\n\t\t\t\t\t\treturn nh1<=2&&nh2>nh1+1;\n\t\t\t\t\t}\n\t\t\t\t\tif(att>0&&event.player.hasJudge('lebu')&&event.player.countCards('h')>event.player.hp+1) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\treturn player.canCompare(event.player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.skip('phaseJudge');\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"其他角色的回合即将开始时，你可以与该角色进行一次拼点。若你赢，该角色跳过准备阶段及判定阶段。"},"zbaijiang":{"name":"拜将","script":"{skillAnimation: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",unique: \"true\",derivation: [\"zyexin\",\"zzili\"],init: function (player){\n\t\t\t\t\tplayer.storage.zbaijiang=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.zbaijiang&&player.countCards('e')>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.zbaijiang=true;\n\t\t\t\t\tplayer.removeSkill('zzhenggong');\n\t\t\t\t\tplayer.removeSkill('zquanji');\n\t\t\t\t\tplayer.removeSkill('zbaijiang');\n\t\t\t\t\tplayer.addSkill('zyexin');\n\t\t\t\t\tplayer.addSkill('zzili');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t},}","info":"觉醒技，准备阶段若你的装备区的装备牌为两张或更多时，你必须增加1点体力上限，失去技能〖权计〗和〖争功〗并获得技能〖野心〗和〖自立〗。"},"pojun":{"name":"破军","script":"{audio: \"2\",trigger: {source: \"damageSource\",},check: function (event,player){\n\t\t\t\t\tif(event.player.isTurnedOver()) return get.attitude(player,event.player)>0;\n\t\t\t\t\tif(event.player.hp<3){\n\t\t\t\t\t\treturn get.attitude(player,event.player)<0;\n\t\t\t\t\t}\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},filter: function (event){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player.isAlive();\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttrigger.player.draw(Math.min(5,trigger.player.hp));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttrigger.player.turnOver();\n\t\t\t\t},}","info":"当你使用【杀】造成伤害后，你可以令受到该伤害的角色摸X张牌（X为该角色当前的体力值且最多为5），然后该角色将其武将牌翻面。"},"olddanshou":{"name":"胆守","script":"{trigger: {source: \"damageSource\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tvar cards=Array.from(ui.ordering.childNodes);\n\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\tcards.shift().discard();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar evt=_status.event.getParent('phase');\n\t\t\t\t\tif(evt){\n\t\t\t\t\t\tgame.resetSkills();\n\t\t\t\t\t\t_status.event=evt;\n\t\t\t\t\t\t_status.event.finish();\n\t\t\t\t\t\t_status.event.untrigger(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {jueqing: \"true\",},}","info":"当你造成伤害后，你可以摸一张牌。若如此做，终止一切结算，当前回合结束。"},"oldxuanfeng":{"name":"旋风","script":"{audio: \"xuanfeng\",trigger: {player: \"loseAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.es&&event.es.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('oldxuanfeng'),function(card,player,target){\n\t\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\t\treturn get.distance(player,target)<=1||player.canUse('sha',target,false);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(get.distance(player,target)<=1){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player)*2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('oldxuanfeng',result.targets);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar distance=get.distance(player,target);\n\t\t\t\t\t\tif(distance<=1&&player.canUse('sha',target,false)){\n\t\t\t\t\t\t\tplayer.chooseControl('出杀','造成伤害').ai=function(){\n\t\t\t\t\t\t\t\treturn '造成伤害';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(distance<=1){\n\t\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.useCard({name:'sha',isCard:true},target,false).animate=false;\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar target=event.target;\n\t\t\t\t\tif(result.control=='出杀'){\n\t\t\t\t\t\tplayer.useCard({name:'sha',isCard:true},target,false).animate=false;\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip') return [1,3];\n\t\t\t\t\t\t},},reverseEquip: \"true\",noe: \"true\",},}","info":"每当你失去一次装备区里的牌时，你可以执行下列两项中的一项：1.视为对任意一名其他角色使用一张【杀】（此【杀】不计入每回合的使用限制）；2.对与你距离1以内的一名其他角色造成一点伤害"},"taoxi":{"name":"讨袭","script":"{audio: \"2\",trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase==player&&event.targets.length==1&&\n\t\t\t\t\t\tevent.target.countCards('h')>0&&!player.hasSkill('taoxi4')&&player!=event.target;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},intro: {content: \"card\",},content: function (){\n\t\t\t\t\tvar card=trigger.target.getCards('h').randomGet();\n\t\t\t\t\tplayer.showCards([card]);\n\t\t\t\t\tplayer.storage.taoxi=card;\n\t\t\t\t\tplayer.storage.taoxi2=trigger.target;\n\t\t\t\t\tplayer.syncStorage('taoxi');\n\t\t\t\t\tplayer.markSkill('taoxi');\n\t\t\t\t\tplayer.addTempSkill('taoxi4');\n\t\t\t\t},group: [\"taoxi2\",\"taoxi3\"],}","info":"出牌阶段限一次，当你使用牌指定一名其他角色为唯一目标后，你可以亮出其一张手牌直到回合结束，并且你可以于此回合内将此牌如手牌般使用。结束阶段，若该角色未失去此手牌，则你失去1点体力"},"sidi":{"name":"司敌","script":"{audio: \"2\",trigger: {global: \"useCard\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='shan') return false;\n\t\t\t\t\tif(event.player==player) return true;\n\t\t\t\t\treturn _status.currentPhase==player;\n\t\t\t\t},frequent: \"true\",init: function (player){\n\t\t\t\t\tif(!player.storage.sidi) player.storage.sidi=[];\n\t\t\t\t},intro: {content: \"cards\",onunmark: \"throw\",},content: function (){\n\t\t\t\t\tvar card=game.cardsGotoSpecial(get.cards()).cards[0];\n\t\t\t\t\tgame.log(player,'将',card,'置于武将牌上');\n\t\t\t\t\tplayer.$gain2(card);\n\t\t\t\t\tplayer.storage.sidi.add(card);\n\t\t\t\t\tplayer.markSkill('sidi');\n\t\t\t\t\tplayer.syncStorage('sidi');\n\t\t\t\t},group: \"sidi2\",}","info":"当你使用或其他角色在你的回合内使用【闪】时，你可以将牌堆顶的一张牌正面向上置于你的武将牌上；一名其他角色的出牌阶段开始时，你可以移去一张“司敌”牌，然后该角色本阶段可使用杀的次数上限-1"},"zhenshan":{"name":"振赡","script":"{trigger: {player: \"chooseToRespondBegin\",},filter: function (event,player){\n\t\t\t\t\tif(event.responded) return false;\n\t\t\t\t\tif(!event.filterCard({name:'shan'},player,event)&&!event.filterCard({name:'sha'},player,event)) return false;\n\t\t\t\t\tif(player.hasSkill('zhenshan2')) return false;\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h')<nh;\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('zhenshan'),function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')<player.countCards('h');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(player,target)\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.responded=true;\n\t\t\t\t\t\tif(trigger.filterCard({name:'shan',isCard:true})){\n\t\t\t\t\t\t\ttrigger.result={bool:true,card:{name:'shan',isCard:true}}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttrigger.result={bool:true,card:{name:'sha',isCard:true}}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('zhenshan',result.targets);\n\t\t\t\t\t\tplayer.addTempSkill('zhenshan2');\n\t\t\t\t\t\tplayer.swapHandcards(result.targets[0]);\n\t\t\t\t\t}\n\t\t\t\t},group: \"zhenshan_use\",}","info":"每名角色的回合限一次，每当你需要使用或打出一张基本牌时，你可以与一名手牌数少于你的角色交换手牌。若如此做，视为你使用或打出了此牌"},"jieyuan":{"name":"竭缘","script":"{group: [\"jieyuan_more\",\"jieyuan_less\"],subSkill: {more: {audio: \"true\",trigger: {source: \"damageBegin1\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.countCards(player.hasSkill('fenxin_nei')?'he':'h',function(card){\n\t\t\t\t\t\t\t\tif(player.hasSkill('fenxin_nei')||(_status.connectMode&&get.position(card)=='h')) return true;\n\t\t\t\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t\t\t\t})) return false;\n\t\t\t\t\t\t\treturn (event.player.hp>=player.hp||player.hasSkill('fenxin_fan'))&&player!=event.player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar goon=(get.attitude(player,trigger.player)<0);\n\t\t\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('jieyuan',trigger.player),player.hasSkill('fenxin_nei')?'he':'h');\n\t\t\t\t\t\t\tif(!player.hasSkill('fenxin_nei')){\n\t\t\t\t\t\t\t\tnext.set('filterCard',function(card){\n\t\t\t\t\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnext.set('prompt2','弃置一张黑色手牌令伤害+1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnext.set('prompt2','弃置一张手牌令伤害+1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\t\tif(_status.event.goon){\n\t\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.set('goon',goon);\n\t\t\t\t\t\t\tnext.logSkill=['jieyuan_more',trigger.player];\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},less: {audio: \"true\",trigger: {player: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.countCards(player.hasSkill('fenxin_nei')?'he':'h',function(card){\n\t\t\t\t\t\t\t\tif(player.hasSkill('fenxin_nei')||(_status.connectMode&&get.position(card)=='h')) return true;\n\t\t\t\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t\t\t\t})) return false;\n\t\t\t\t\t\t\treturn event.source&&(event.source.hp>=player.hp||player.hasSkill('fenxin_zhong'))&&player!=event.source;\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('jieyuan'),player.hasSkill('fenxin_nei')?'he':'h');\n\t\t\t\t\t\t\tif(!player.hasSkill('fenxin_nei')){\n\t\t\t\t\t\t\t\tnext.set('filterCard',function(card){\n\t\t\t\t\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnext.set('prompt2','弃置一张红色手牌令伤害-1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnext.set('prompt2','弃置一张手牌令伤害-1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(player.hp==1||_status.event.getTrigger().num>1){\n\t\t\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(player.hp==2){\n\t\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.logSkill='jieyuan_less';\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {expose: \"0.2\",threaten: \"1.5\",},}","info":"当你对一名其他角色造成伤害时，若其体力值大于或等于你的体力值，你可弃置一张黑色手牌，令此伤害+1；当你受到一名其他角色造成的伤害时，若其体力值大于或等于你的体力值，你可弃置一张红色手牌，令此伤害-1。"},"fenxin_old":{"name":"焚心","script":"{}","info":"此模式下不可用"},"xiemu":{"name":"协穆","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0;\n\t\t\t\t},filterCard: {name: \"sha\",},check: function (card){return 6-get.value(card)},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=lib.group.filter(function(group){\n\t\t\t\t\t\treturn ['wei','shu','wu','qun'].contains(group)||game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.group==group;\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tif(player.storage.xiemu2) list.removeArray(player.storage.xiemu2);\n\t\t\t\t\tvar list2=list.slice(0);\n\t\t\t\t\tlist2.sort(function(a,b){\n\t\t\t\t\t\treturn lib.skill.xiemu.count(b)-lib.skill.xiemu.count(a);\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseControl(list).set('prompt','请选择一个势力').ai=function(){return list2[0]};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.popup(result.control+2,get.groupnature(result.control));\n\t\t\t\t\tgame.log(player,'选择了','#g'+get.translation(result.control+2));\n\t\t\t\t\tplayer.addTempSkill('xiemu2',{player:'phaseBegin'});\n\t\t\t\t\tplayer.storage.xiemu2.add(result.control);\n\t\t\t\t\tplayer.updateMarks('xiemu2');\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},count: function (group){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group==group&&get.attitude(current,player)<0;\n\t\t\t\t\t});\n\t\t\t\t},}","info":"出牌阶段限一次，你可以弃置一张【杀】并选择一个势力。若如此做，直到你的下回合开始时，当你成为该势力的其他角色使用的黑色牌的目标后，你摸两张牌。"},"naman":{"name":"纳蛮","script":"{audio: \"2\",trigger: {global: \"respondEnd\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.position(event.cards[i],true)=='o') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tvar cards=trigger.cards.slice(0);\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.position(cards[i],true)!='o'){\n\t\t\t\t\t\t\tcards.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\tplayer.gain(cards,'gain2');\n\t\t\t\t},}","info":"当其他角色打出的【杀】进入弃牌堆时，你可以获得之。"},"dingpin":{"name":"定品","script":"{group: [\"dingpin3\",\"dingpin4\"],enable: \"phaseUse\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hp<target.maxHp&&!target.tempSkills.dingpin2;\n\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\treturn !player.storage.dingpin||!player.storage.dingpin.contains(get.type(card,'trick'));\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(!player.storage.dingpin) player.storage.dingpin=[];\n\t\t\t\t\tplayer.storage.dingpin.push(get.type(cards[0],'trick'));\n\t\t\t\t\ttarget.judge(function(card){\n\t\t\t\t\t\treturn get.color(card)=='black'?1:-1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.draw(target.maxHp-target.hp);\n\t\t\t\t\t\ttarget.addTempSkill('dingpin2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.isTurnedOver()) return 1;\n\t\t\t\t\t\t\tif(target.hp<target.maxHp-1) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张手牌，然后令一名已受伤的角色进行一次判定，若结果为黑色，该角色摸X张牌(X为该角色已损失的体力值)，然后你本回合不能再对其发动〖定品〗；若结果为红色，将你的武将牌翻面。（你不能弃置本回合已弃置或使用过的类型的牌）"},"oldfaen":{"name":"法恩","script":"{audio: \"faen\",trigger: {global: [\"turnOverAfter\",\"linkAfter\"],},filter: function (event,player){\n\t\t\t\t\tif(event.name=='link') return event.player.isLinked();\n\t\t\t\t\treturn true;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"当一名角色翻面或横置后，你可以令其摸一张牌。"},"youdi":{"name":"诱敌","script":"{audio: \"true\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('youdi'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\tif(target.countCards('he')==0) return 0;\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('goon',player.countCards('h','sha')<=player.countCards('h')/3);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tplayer.logSkill('youdi',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tevent.target.discardPlayerCard(player,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.links[0].name!='sha'&&event.target.countCards('he')){\n\t\t\t\t\t\tplayer.gainPlayerCard('he',event.target,true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.4\",},}","info":"结束阶段开始时，你可以令一名其他角色弃置你的一张牌，若此牌不为【杀】，你获得该角色的一张牌。"},"anguo":{"name":"安国","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('e')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.choosePlayerCard(target,'e',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.links){\n\t\t\t\t\t\tvar num=0,players=game.filterPlayer();\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(target.inRange(players[i])){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.num=num;\n\t\t\t\t\t\ttarget.gain(result.links,'gain2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar num2=0,players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(target.inRange(players[i])){\n\t\t\t\t\t\t\tnum2++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(event.num>num2){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('noe')) return 1;\n\t\t\t\t\t\t\tif(target.getEquip(1)||target.getEquip(4)) return -1;\n\t\t\t\t\t\t\tif(target.getEquip(2)) return -0.7;\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择一名其他角色装备区里的一张牌，令其将此牌收回手牌。然后若该角色攻击范围内的角色数因此减少，则你摸一张牌。"},"zhuiji":{"name":"追击","script":"{mod: {globalFrom: function (from,to){\n\t\t\t\t\t\tif(from.hp>=to.hp) return -Infinity;\n\t\t\t\t\t},},}","info":"锁定技，你与体力值不大于你的角色的距离视为1。"},"oldcihuai":{"name":"刺槐","script":"{audio: \"cihuai\",trigger: {player: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn !player.countCards('h','sha');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\tif(!player.countCards('h','sha')) player.addTempSkill('oldcihuai2');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以展示手牌。若其中没有【杀】，则当你于此阶段内手牌数变化之前/有角色死亡之前需要使用【杀】时，你可以使用无对应实体牌的【杀】。"},"old_zuilun":{"name":"罪论","script":"{audio: \"xinfu_zuilun\",subSkill: {e: {sub: \"true\",},h: {sub: \"true\",},},enable: \"phaseUse\",usable: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tvar pos='he';\n\t\t\t\t\tif(player.hasSkill('old_zuilun_h')) pos='e';\n\t\t\t\t\tif(player.hasSkill('old_zuilun_e')) pos='h';\n\t\t\t\t\treturn target.countGainableCards(player,pos)>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar pos='he';\n\t\t\t\t\tif(player.hasSkill('old_zuilun_h')) pos='e';\n\t\t\t\t\tif(player.hasSkill('old_zuilun_e')) pos='h';\n\t\t\t\t\tplayer.gainPlayerCard(target,pos,true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length){\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\tvar pos=result.cards[0].original;\n\t\t\t\t\t\tif(pos=='h'||pos=='e') player.addTempSkill('old_zuilun_'+pos,'phaseUseAfter');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7\",result: {target: \"-1\",},},}","info":"出牌阶段，你可以获得一名其他角色的一张牌（手牌、装备区各一次），然后该角色摸一张牌。"},"old_fuyin":{"name":"父荫","script":"{mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\tif((card.name=='juedou'||card.name=='sha'||card.name=='huogong')&&player!=target&&player.countCards('h')>=target.countCards('h')&&target.isEmpty(2)) return false;\n\t\t\t\t\t},},}","info":"锁定技，若你的装备区内没有防具牌，手牌数大于或等于你的其他角色不能使用【杀】、【决斗】或【火攻】指定你为目标"},"old_jijun":{"name":"集军","script":"{marktext: \"方\",audio: \"xinfu_jijun\",intro: {content: \"cards\",},enable: \"phaseUse\",filterCard: \"true\",selectCard: [1,null],filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(player.storage.old_jijun&&(36-player.storage.old_jijun.length)<=player.countCards('h')) return 1;\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},discard: \"false\",lose: \"false\",content: function (){\n\t\t\t\t\tplayer.lose(cards,ui.special,'toStorage');\n\t\t\t\t\tplayer.$give(cards,player);\n\t\t\t\t\tif(!player.storage.old_jijun) player.storage.old_jijun=[];\n\t\t\t\t\tplayer.storage.old_jijun.addArray(cards);\n\t\t\t\t\tplayer.markSkill('old_jijun');\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段，你可以将任意张手牌置于你的武将牌上。（均称为“方”）"},"old_fangtong":{"name":"方统","script":"{trigger: {player: \"phaseJieshuBegin\",},audio: \"xinfu_fangtong\",forced: \"true\",skillAnimation: \"true\",animationColor: \"metal\",filter: function (event,player){\n\t\t\t\t\treturn (player.storage.old_jijun&&player.storage.old_jijun.length>35);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tif(player==game.me) bool=true;\n\t\t\t\t\telse switch(get.mode()){\n\t\t\t\t\t\tcase 'identity':{\n\t\t\t\t\t\t\tgame.showIdentity();\n\t\t\t\t\t\t\tvar id1=player.identity;\n\t\t\t\t\t\t\tvar id2=game.me.identity;\n\t\t\t\t\t\t\tif(['zhu','zhong','mingzhong'].contains(id1)){\n\t\t\t\t\t\t\t\tif(['zhu','zhong','mingzhong'].contains(id2)) bool=true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t   else if(id1=='fan'){\n\t\t\t\t\t\t\t\tif(id2=='fan') bool=true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'guozhan':{\n\t\t\t\t\t\t\tif(game.me.isFriendOf(player)) bool=true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'versus':{\n\t\t\t\t\t\t\tif(player.side==game.me.side) bool=true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'boss':{\n\t\t\t\t\t\t\tif(player.side==game.me.side) bool=true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdefault:{}\n\t\t\t\t\t}\n\t\t\t\t\tgame.over(bool);\n\t\t\t\t},}","info":"锁定技，结束阶段，若你的“方”的数目大于等于36，则你所在的游戏阵营直接取得游戏胜利。"},"xintaoluan":{"name":"滔乱","script":"{audio: \"taoluan\",enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn event.type!='wuxie'&&event.type!='respondShan'&&!player.hasSkill('xintaoluan3')&&player.countCards('he')>0&&!_status.dying.length;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.xintaoluan) player.storage.xintaoluan=[];\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(player.storage.xintaoluan.contains(name)) continue;\n\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length==0){\n\t\t\t\t\t\t\treturn ui.create.dialog('滔乱已无可用牌');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('滔乱',[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\treturn _status.event.getParent().filterCard({name:button.link[2]},player,_status.event.getParent());\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h',button.link[2])>0) return 0;\n\t\t\t\t\t\tif(button.link[2]=='wugu') return;\n\t\t\t\t\t\tvar effect=player.getUseValue(button.link[2]);\n\t\t\t\t\t\tif(effect>0) return effect;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\taudio:'taoluan',\n\t\t\t\t\t\t\tselectCard:1,\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tcheck:function(card){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3]},\n\t\t\t\t\t\t\tonuse:function(result,player){\n\t\t\t\t\t\t\t\tvar evt=_status.event.getParent('phase');\n\t\t\t\t\t\t\t\tif(evt&&evt.name=='phase'&&!evt.xintaoluan){\n\t\t\t\t\t\t\t\t\tevt.xintaoluan=true;\n\t\t\t\t\t\t\t\t\tvar next=game.createEvent('taoluan_clear');\n\t\t\t\t\t\t\t\t\t_status.event.next.remove(next);\n\t\t\t\t\t\t\t\t\tevt.after.push(next);\n\t\t\t\t\t\t\t\t\tnext.player=player;\n\t\t\t\t\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\t\t\t\t\tplayer.storage.xintaoluan=[];\n\t\t\t\t\t\t\t\t\t\tdelete player.storage.xintaoluan2;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplayer.storage.xintaoluan.add(result.card.name);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将一张牌当做'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {order: \"4\",result: {player: function (player){\n\t\t\t\t\t\t\tif(!player.storage.xintaoluan2) player.storage.xintaoluan2=0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=player&&players[i].countCards('he')>((player.storage.xintaoluan2+1)*2)&&get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: \"1.9\",},group: [\"xintaoluan2\",\"xintaoluan4\",\"xintaoluan5\"],}","info":"若场上没有濒死的角色，则你可以将一张牌当做任意一张基本牌或普通锦囊牌使用（此牌不得是本回合内你以此法使用过的牌），然后你令一名其他角色选择一项：1.交给你X张与你以此法使用的牌类别不同的牌；2.你失去X点体力且滔乱无效直到回合结束（X为你本回合内发动过〖滔乱〗的次数且至多为3）"},"zhengnan":{"name":"征南","script":"{audio: \"1\",trigger: {global: \"dieAfter\",},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(!player.hasSkill('new_rewusheng')){\n\t\t\t\t\t\tlist.push('new_rewusheng');\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.hasSkill('dangxian')){\n\t\t\t\t\t\tlist.push('dangxian');\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.hasSkill('zhiman')){\n\t\t\t\t\t\tlist.push('zhiman');\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.chooseControl(list).set('prompt','选择获得一项技能');\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.addSkill(result.control);\n\t\t\t\t\tplayer.popup(result.control);\n\t\t\t\t\tgame.log(player,'获得技能','【'+get.translation(result.control)+'】');\n\t\t\t\t},ai: {threaten: \"2.4\",},derivation: [\"wusheng\",\"dangxian\",\"zhiman\"],}","info":"其他角色死亡后，你可以摸三张牌并获得下列技能中的任意一个：〖武圣〗、 〖当先〗和〖制蛮〗。"},"xiefang":{"name":"撷芳","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn current.sex=='female';\n\t\t\t\t\t\t});\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-X。（X为女性角色数）"},"zongzuo":{"name":"宗祚","script":"{trigger: {global: \"phaseBefore\",},forced: \"true\",priority: \"10\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.zongzuo;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.zongzuo=true;\n\t\t\t\t\tvar num=game.countGroup();\n\t\t\t\t\tplayer.gainMaxHp(num);\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover(event.num);\n\t\t\t\t\t//player.update();\n\t\t\t\t},group: \"zongzuo_lose\",subSkill: {lose: {trigger: {global: \"dieAfter\",},forced: \"true\",audio: \"zongzuo\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!lib.group.contains(event.player.group)) return false;\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.group==event.player.group;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，游戏的第一个回合开始前，你加X点体力上限并回复X点体力（X为全场势力数）；当一名角色死亡后，若没有与其势力相同的角色，你减1点体力上限。"},"zhige":{"name":"止戈","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>player.hp;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn get.distance(target,player,'attack')<=1&&target.countCards('e')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseToUse({name:'sha'},'止戈：使用一张杀，或将其装备区里的一张牌交给'+get.translation(player));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool&&target.countCards('e')){\n\t\t\t\t\t\ttarget.chooseCard('e',true,'将其装备区里的一张牌交给'+get.translation(player));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length){\n\t\t\t\t\t\tplayer.gain(result.cards,target,'give');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",order: \"5\",result: {target: \"-1\",player: function (player,target){\n\t\t\t\t\t\t\tif(target.countCards('h')==0) return 0;\n\t\t\t\t\t\t\tif(target.countCards('h')==1) return -0.1;\n\t\t\t\t\t\t\tif(player.hp<=2) return -2;\n\t\t\t\t\t\t\tif(player.countCards('h','shan')==0) return -1;\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，若你的手牌数大于你的体力值，你可以选择攻击范围内含有你的一名其他角色，除非该角色使用一张【杀】，否则其将其装备区里的一张牌交给你"},"drlt_zhenrong":{"name":"徵荣","script":"{init: function (player,skill){\n\t\t\t\t\tif(!player.storage[skill]) player.storage.drlt_zhenrong=[];\n\t\t\t\t},marktext: \"荣\",intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},mark: \"true\",audio: \"2\",trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.countCards('h')>player.countCards('h');\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.choosePlayerCard('hej',get.prompt('drlt_zhenrong'),trigger.player).set('ai',function(button){\n\t\t\t\t\t\treturn -get.attitude(player,trigger.player)+1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result&&result.links&&result.links.length){\n\t\t\t\t\t\tplayer.line(player,trigger.player);\n\t\t\t\t\t\tplayer.logSkill('drlt_zhenrong');\n\t\t\t\t\t\tplayer.storage.drlt_zhenrong.push(result.links[0]);\n\t\t\t\t\t\tplayer.syncStorage('drlt_zhenrong');\n\t\t\t\t\t\ttrigger.player.lose(result.links[0],ui.special,'toStorage');\n\t\t\t\t\t\ttrigger.player.$give(result.links,player);\n\t\t\t\t\t\tgame.log(player,'将',result.links[0],'置于其武将牌上');\n\t\t\t\t\t};\n\t\t\t\t},}","info":"当你对其他角色造成伤害后，若其手牌比你多，你可以将其一张牌置于你的武将牌上，称为“荣”"},"drlt_hongju":{"name":"鸿举","script":"{skillAnimation: \"true\",animationColor: \"thunder\",audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",unique: \"true\",juexingji: \"true\",derivation: [\"drlt_qingce\"],init: function (player){\n\t\t\t\t\tplayer.storage.drlt_hongju=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.drlt_hongju&&player.storage.drlt_zhenrong&&player.storage.drlt_zhenrong.length>=3&&game.dead.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('drlt_hongju'),\n\t\t\t\t\tplayer.storage.drlt_hongju=true;\n\t\t\t\t\tvar num=player.storage.drlt_zhenrong.length;\n\t\t\t\t\tif(num>player.countCards('h')) num=player.countCards('h');\n\t\t\t\t\tplayer.chooseCard('h',[1,num],'请选择需要替换“荣”的手牌').set('ai',function(card){\n\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t}).set('promptx',[player.storage.drlt_zhengrong]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.cards=result.cards;\n\t\t\t\t\t\tplayer.chooseCardButton(player.storage.drlt_zhenrong,result.cards.length,'请选择需要替换的“荣”',true).ai=function(button){\n\t\t\t\t\t\t\treturn 6-get.value(button.link);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tplayer.addSkill('drlt_qingce');\n\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=result.links;\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tplayer.storage.drlt_zhenrong.push(event.cards[i]);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tplayer.syncStorage('drlt_zhenrong');\n\t\t\t\t\t\tplayer.lose(event.cards,ui.special,'toStorage');\n\t\t\t\t\t\tgame.log(player,'将',event.cards,'置于其武将牌上');\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tplayer.storage.drlt_zhenrong.remove(cards[i]);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tplayer.syncStorage('drlt_zhenrong');\n\t\t\t\t\t\tplayer.gain(cards,'gain2','fromStorage');\n\t\t\t\t\t};\n\t\t\t\t\tplayer.addSkill('drlt_qingce');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t},}","info":"觉醒技，准备阶段，若“荣”的数量大于或等于3且场上有角色死亡，则你可以用任意张手牌替换等量的“荣”，然后扣减一点体力上限并获得技能“清侧”"}},"card":{},"hero":{"fazheng":{"name":"旧法正","attr":["male","shu",3,["enyuan","xuanhuo"]]},"ol_yuanshu":{"name":"旧袁术","attr":["male","qun",4,["wangzun","tongji"]]},"pangde":{"name":"旧庞德","attr":["male","qun",4,["mashu","mengjin"]]},"ol_huaxiong":{"name":"旧华雄","attr":["male","qun",6,["new_reyaowu"]]},"old_wangyun":{"name":"旧王允","attr":["male","qun",4,["wylianji","moucheng"]]},"xiaoqiao":{"name":"旧小乔","attr":["female","wu",3,["tianxiang","hongyan"]]},"weiyan":{"name":"旧魏延","attr":["male","shu",4,["kuanggu"]]},"xiahouyuan":{"name":"旧夏侯渊","attr":["male","wei",4,["shensu"]]},"ol_maliang":{"name":"旧马良","attr":["male","shu",3,["zishu","yingyuan"]]},"old_huangfusong":{"name":"旧皇甫嵩","attr":["male","qun",4,["fenyue"]]},"old_majun":{"name":"骰子马钧","attr":["male","wei",3,["xinfu_jingxie1","xinfu_qiaosi"],[]]},"old_zhangxingcai":{"name":"旧张星彩","attr":["female","shu",3,["oldshenxian","qiangwu"]]},"old_fuhuanghou":{"name":"旧伏皇后","attr":["female","qun",3,["oldzhuikong","oldqiuyuan"]]},"old_caochong":{"name":"旧曹冲","attr":["male","wei",3,["oldrenxin","oldchengxiang"]]},"yuji":{"name":"旧于吉","attr":["male","qun",3,["old_guhuo"],["forbidai"]]},"zhangjiao":{"name":"张角","attr":["male","qun",3,["leiji","guidao","huangtian"],["zhu"]]},"old_zhangfei":{"name":"OL张飞","attr":["male","shu",4,["new_repaoxiao","new_tishen"]]},"old_zhaoyun":{"name":"旧赵云","attr":["male","shu",4,["longdan","new_yajiao"]]},"old_huatuo":{"name":"OL华佗","attr":["male","qun",3,["jijiu","chulao"]]},"jsp_caoren":{"name":"☆SP曹仁","attr":["male","wei",4,["kuiwei","yanzheng"]]},"old_caochun":{"name":"旧曹纯","attr":["male","wei",4,["shanjia"]]},"masu":{"name":"旧马谡","attr":["male","shu",3,["xinzhan","huilei"]]},"xushu":{"name":"旧徐庶","attr":["male","shu",3,["wuyan","jujian"]]},"liru":{"name":"旧李儒","attr":["male","qun",3,["juece","mieji","fencheng"]]},"yujin":{"name":"毅重于禁","attr":["male","wei",4,["yizhong"]]},"xin_yujin":{"name":"节钺于禁","attr":["male","wei",4,["jieyue"]]},"old_zhonghui":{"name":"旧钟会","attr":["male","wei",3,["zzhenggong","zquanji","zbaijiang"]]},"old_xusheng":{"name":"旧徐盛","attr":["male","wu",4,["pojun"]]},"old_zhuran":{"name":"旧朱然","attr":["male","wu",4,["olddanshou"]]},"old_lingtong":{"name":"旧凌统","attr":["male","wu",4,["oldxuanfeng"]]},"old_caoxiu":{"name":"旧曹休","attr":["male","wei",4,["taoxi"]]},"old_caozhen":{"name":"旧曹真","attr":["male","wei",4,["sidi"]]},"old_quancong":{"name":"旧全琮","attr":["male","wu",4,["zhenshan"]]},"old_lingju":{"name":"旧灵雎","attr":["female","qun",3,["jieyuan","fenxin_old"]]},"old_maliang":{"name":"旧马良","attr":["male","shu",3,["xiemu","naman"]]},"old_chenqun":{"name":"旧陈群","attr":["male","wei",3,["dingpin","oldfaen"]]},"old_zhuhuan":{"name":"旧朱桓","attr":["male","wu",4,["youdi"]]},"old_zhuzhi":{"name":"旧朱治","attr":["male","wu",4,["anguo"]]},"old_machao":{"name":"☆SP马超","attr":["male","qun",4,["zhuiji","oldcihuai"]]},"old_zhugezhan":{"name":"旧诸葛瞻","attr":["male","shu",3,["old_zuilun","old_fuyin"]]},"zhangliang":{"name":"SP张梁","attr":["male","qun",4,["old_jijun","old_fangtong"]]},"ol_zhangrang":{"name":"旧张让","attr":["male","qun",3,["xintaoluan"]]},"ol_guansuo":{"name":"OL关索","attr":["male","shu",4,["zhengnan","xiefang"]]},"ol_liuyu":{"name":"OL刘虞","attr":["male","qun",2,["zongzuo","zhige"]]},"old_guanqiujian":{"name":"旧毌丘俭","attr":["male","wei",4,["drlt_zhenrong","drlt_hongju"],[]]}}},"tw":{"name":"外服武将","skill":{"zongkui":{"name":"纵傀","script":"{trigger: {player: \"phaseBefore\",global: \"roundStart\",},direct: \"true\",audio: \"2\",audioname: [\"tw_beimihu\"],filter: function (event,player,name){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\tif(name=='roundStart'&&!current.isMinHp()) return false;\n\t\t\t\t\t\treturn current!=player&&!current.hasMark('zongkui_mark');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\tif(event.triggername=='roundStart'&&!current.isMinHp()) return false;\n\t\t\t\t\t\treturn current!=player&&!current.hasMark('zongkui_mark');\n\t\t\t\t\t});\n\t\t\t\t\tif(event.triggername=='roundStart'&&targets.length==1){\n\t\t\t\t\t\tevent._result={bool:true,targets:targets};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar next=player.chooseTarget(get.prompt('zongkui'),'令一名'+(event.triggername=='roundStart'?'体力值最小的':'')+'其他角色获得“傀”标记',function(card,player,target){\n\t\t\t\t\t\t\tif(_status.event.round&&!target.isMinHp()) return false;\n\t\t\t\t\t\t\treturn target!=player&&!target.hasMark('zongkui_mark');\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar num=target.isMinHp()?0.5:1;\n\t\t\t\t\t\t\treturn num*get.threaten(target);\n\t\t\t\t\t\t}).set('round',event.triggername=='roundStart');\n\t\t\t\t\t\tif(event.triggername=='roundStart') next.set('forced',true);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zongkui',target);\n\t\t\t\t\t\ttarget.addMark('zongkui_mark',1);\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {mark: {marktext: \"傀\",intro: {name2: \"傀\",content: \"mark\",},sub: \"true\",},},ai: {combo: \"guju\",threaten: \"1.4\",},}","info":"回合开始时，你可以指定一名未拥有“傀”标记的其他角色，令其获得一枚“傀”标记。每轮游戏开始时，你指定一名体力值最少且没有“傀”标记的其他角色，令其获得一枚“傀”标记。"},"guju":{"name":"骨疽","script":"{audio: \"2\",audioname: [\"tw_beimihu\"],init: function (player){\n\t\t\t\t\tif(!player.storage.guju) player.storage.guju=0;\n\t\t\t\t},intro: {content: \"已因此技能获得#张牌\",},trigger: {global: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.isAlive()&&event.player.hasMark('zongkui_mark');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.storage.guju++;\n\t\t\t\t\tplayer.markSkill('guju');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.hasZhuSkill('bingzhao',trigger.player)&&trigger.player.group==player.storage.bingzhao&&trigger.player.isAlive()){\n\t\t\t\t\t\ttrigger.player.chooseBool('是否对'+get.translation(player)+'发动【秉诏】？').ai=function(){\n\t\t\t\t\t\t\treturn get.attitude(trigger.player,player)>1;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.logSkill('bingzhao',player);\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.storage.guju++;\n\t\t\t\t\t\tplayer.markSkill('guju');\n\t\t\t\t\t}\n\t\t\t\t},ai: {combo: \"zongkui\",},}","info":"锁定技，拥有“傀”标记的角色受到伤害后，你摸一张牌。"},"baijia":{"name":"拜假","script":"{audio: \"2\",audioname: [\"tw_beimihu\"],unique: \"true\",derivation: \"bmcanshi\",juexingji: \"true\",ai: {combo: \"guju\",},trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",filter: function (event,player){\n\t\t\t\t\treturn player.hasSkill('guju')&&player.storage.guju>=7;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('baijia');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tvar list=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(list[i]!=player&&!list[i].hasMark('zongkui_mark')){\n\t\t\t\t\t\t\tlist[i].addMark('zongkui_mark',1);\n\t\t\t\t\t\t\tplayer.line(list[i],'green');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.removeSkill('guju');\n\t\t\t\t\tplayer.addSkill('bmcanshi');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你因〖骨疽〗获得的牌不少于7张，则你增加1点体力上限，回复1点体力，然后令所有未拥有“傀”标记的其他角色获得“傀”标记，最后失去技能〖骨疽〗，并获得技能〖蚕食〗。"},"bingzhao":{"name":"秉诏","script":"{audio: \"2\",unique: \"true\",zhuSkill: \"true\",forced: \"true\",intro: {content: function (group){\n\t\t\t\t\t\treturn '已选择了'+get.translation(group)+'势力'\n\t\t\t\t\t},},trigger: {global: [\"gameDrawAfter\",\"zhuUpdate\"],},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.bingzhao&&player.hasZhuSkill('bingzhao');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=lib.group.filter(function(group){\n\t\t\t\t\t\treturn ['wei','shu','wu','qun'].contains(group)||game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.group==group;\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseControl(list).set('prompt','秉诏：请选择一个势力').set('ai',function(){\n\t\t\t\t\t\tvar listx=list.slice(0);\n\t\t\t\t\t\tlistx.sort(function(a,b){\n\t\t\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.group==b;\n\t\t\t\t\t\t\t})-game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.group==a;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn listx[0];\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar group=result.control;\n\t\t\t\t\tplayer.popup(get.translation(group)+'势力',get.groupnature(group,'raw'));\n\t\t\t\t\tgame.log(player,'选择了','#y'+get.translation(group)+'势力');\n\t\t\t\t\tplayer.storage.bingzhao=group;\n\t\t\t\t\tplayer.markSkill('bingzhao');\n\t\t\t\t},}","info":"主公技，游戏开始时，你选择一个其他势力。当你对该势力的角色发动〖骨疽〗时，其可令你额外摸一张牌。"},"chijie":{"name":"持节","script":"{audio: \"true\",forbid: [\"guozhan\"],trigger: {global: \"gameDrawAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.group!=player.group;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=lib.group.filter(function(group){\n\t\t\t\t\t\treturn group!=player.group&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.group==group;\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\tif(!event.renshe) list.push('cancel2');\n\t\t\t\t\tplayer.chooseControl(list).set('prompt',event.renshe?'请选择一个势力':get.prompt('chijie')).set('prompt2',event.renshe?'':'将自己的势力变更为场上存在的一个势力').set('',function(){\n\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tif(!event.renshe) player.logSkill('chijie');\n\t\t\t\t\t\tplayer.changeGroup(result.control);\n\t\t\t\t\t}\n\t\t\t\t},}","info":" 游戏开始时，你可以选择一个现存势力，你的势力视为该势力。 "},"waishi":{"name":"外使","script":"{audio: \"2\",group: \"waishi_afterstory\",subSkill: {afterstory: {trigger: {player: \"phaseUseEnd\",},forced: \"true\",silent: \"true\",popup: \"false\",content: function (){player.storage.waishi=1},sub: \"true\",},},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=1;\n\t\t\t\t},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn typeof player.storage.waishi!='number'||player.storage.waishi>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>=ui.selected.cards.length;\n\t\t\t\t},filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=_status.event.player&&current.countCards('h')>ui.selected.cards.length;\n\t\t\t\t\t})) return 0;\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},selectCard: function (){\n\t\t\t\t\tif(!ui.selected.targets.length) return [1,game.countGroup()];\n\t\t\t\t\treturn [1,Math.min(ui.selected.targets[0].countCards('h'),game.countGroup())];\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"0\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(typeof player.storage.waishi!='number') player.storage.waishi=1;\n\t\t\t\t\tplayer.storage.waishi--;\n\t\t\t\t\tplayer.lose(cards,ui.special);\n\t\t\t\t\tplayer.choosePlayerCard(target,true,'h',cards.length).chooseonly=true;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.cards2=result.cards;\n\t\t\t\t\ttarget.lose(event.cards2,ui.special);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.gain(event.cards2);\n\t\t\t\t\ttarget.gain(cards);\n\t\t\t\t\tplayer.$give(cards.length,target);\n\t\t\t\t\ttarget.$give(event.cards2.length,player);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay(1.2);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(target.countCards('h')>player.countCards('h')||player.group==target.group) player.draw();\n\t\t\t\t},ai: {result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h')<target.countCards('h')||player.group==target.group) return 1;\n\t\t\t\t\t\t\treturn 0.1;\n\t\t\t\t\t\t},},},}","info":" 出牌阶段限一次，你可以用至多X张牌交换一名其他角色等量的手牌（X为现存势力数），然后若其与你势力相同或手牌多于你，你摸一张牌。"},"renshe":{"name":"忍涉","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar choiceList=['令一名其他角色与你各摸一张牌','令自己下个出牌阶段可以多发动一次【外使】'];\n\t\t\t\t\tif(lib.skill.chijie.filter&&lib.skill.chijie.filter({},player)) choiceList.push('将自己的势力变更为场上存在的一个其他势力');\n\t\t\t\t\tplayer.chooseControl('cancel2').set('prompt',get.prompt('renshe')).set('choiceList',choiceList).set('ai',function(){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn get.attitude(player,current)>0||current.hasSkillTag('nogain');\n\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2') event.finish();\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.index=result.index;\n\t\t\t\t\t\tplayer.logSkill('renshe');\n\t\t\t\t\t\tif(event.index==0){\n\t\t\t\t\t\t\tplayer.chooseTarget('请选择一名角色，与其各摸一张牌',lib.filter.notMe,true).ai=function(target){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0.1;\n\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(result.index==1){\n\t\t\t\t\t\t\tplayer.storage.waishi++;\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar next=game.createEvent('renshe_changeGroup');\n\t\t\t\t\t\t\tnext.player=player;\n\t\t\t\t\t\t\tnext.renshe=true;\n\t\t\t\t\t\t\tnext.setContent(lib.skill.chijie.content);\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tgame.asyncDraw([player,result.targets[0]].sortBySeat());\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"当你受到伤害后，你可以选择一项：将势力改为现存的另一个势力；或可以额外发动一次“外使”直到你的下个出牌阶段结束；或与另一名其他角色各摸一张牌。"},"twyanqin":{"name":"姻亲","script":"{forbid: [\"guozhan\"],audio: \"2\",trigger: {player: \"phaseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(player.group!='wei') list.push('wei2');\n\t\t\t\t\tif(player.group!='shu') list.push('shu2');\n\t\t\t\t\tlist.push('cancel2');\n\t\t\t\t\tplayer.chooseControl(list).set('ai',function(){\n\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t}).set('prompt',get.prompt2('twyanqin'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('twyanqin');\n\t\t\t\t\t\tvar group=result.control.slice(0,3);\n\t\t\t\t\t\tplayer.changeGroup(group);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段，你可以将势力变更为魏或蜀。"},"twbaobian":{"name":"豹变","script":"{audio: \"2\",trigger: {source: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tif(!card||(card.name!='sha'&&card.name!='juedou')) return false;\n\t\t\t\t\treturn event.player.group==player.group||event.player.countCards('h')>event.player.hp\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar att=get.attitude(player,event.player);\n\t\t\t\t\tif(event.player.group==player.group) return att>0;\n\t\t\t\t\treturn att<0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\tvar target=trigger.player;\n\t\t\t\t\tif(target.group==player.group){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tvar num=target.maxHp-target.countCards('h');\n\t\t\t\t\t\tif(num) target.draw(num);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.discardPlayerCard(target,'h',true,target.countCards('h')-target.hp)\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用【杀】或【决斗】造成伤害时，若目标角色的势力与你相同，则你可以防止此伤害，然后其将手牌数补充至与体力值相同。若不同且其手牌数大于体力值，则你可以将其手牌弃置至与其体力值相同。"},"twtijin":{"name":"替巾","script":"{audio: \"2\",trigger: {global: \"useCardToPlayer\",},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player!=player&&event.target!=player&&\n\t\t\t\t\tevent.targets.length==1&&event.player.inRange(player);\n\t\t\t\t},logTarget: \"target\",check: function (event,player){\n\t\t\t\t\treturn get.effect(event.targets[0],event.card,event.player,player)<=get.effect(player,event.card,event.player,player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.targets.length=0;\n\t\t\t\t\ttrigger.getParent().triggeredTargets1.length=0;\n\t\t\t\t\ttrigger.targets.push(player);\n\t\t\t\t\tvar next=game.createEvent('twtijin_discard',null,trigger.getParent(2));\n\t\t\t\t\tnext.player=player;\n\t\t\t\t\tnext.target=trigger.player;\n\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\tif(target.isDead()||!target.countCards('he')) return;\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tplayer.discardPlayerCard(target,true,'he');\n\t\t\t\t\t});\n\t\t\t\t},}","info":"当你攻击范围内的一名其他角色使用【杀】指定另一名其他角色为目标时，你可以将此【杀】的目标改为你。若如此做，此【杀】结算完成后，你弃置该角色的一张牌。"},"twxiaolian":{"name":"孝廉","script":"{audio: \"2\",trigger: {global: \"useCardToTarget\",},logTarget: \"target\",filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player!=player&&\n\t\t\t\t\tevent.targets.length==1&&event.targets[0]!=player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.effect(event.targets[0],event.card,event.player,player)<=get.effect(player,event.card,event.player,player);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.getParent().twxiaolian=trigger.targets[0];\n\t\t\t\t\ttrigger.targets.length=0;\n\t\t\t\t\ttrigger.getParent().triggeredTargets2.length=0;\n\t\t\t\t\ttrigger.targets.push(player);\n\t\t\t\t},group: \"twxiaolian_damage\",subSkill: {distance: {sub: \"true\",charlotte: \"true\",init: function (player,skill){\n\t\t\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]=[];\n\t\t\t\t\t\t},mark: \"true\",marktext: \"马\",intro: {content: \"cards\",onunmark: \"throw\",},mod: {globalTo: function (from,to,distance){\n\t\t\t\t\t\t\t\tif(from!=to&&to.storage.twxiaolian_distance) return distance+to.storage.twxiaolian_distance.length;\n\t\t\t\t\t\t\t},},},damage: {sub: \"true\",trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.getParent(2).twxiaolian!=undefined;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar target=trigger.getParent(2).twxiaolian;\n\t\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\t\tplayer.chooseCard('是否将一张牌当做【马】置于'+get.translation(target)+'的武将牌旁？','he').ai=function(card){\n\t\t\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.getParent('twxiaolian_damage').target)>2) return 7-get.value(card);\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('twxiaolian',target);\n\t\t\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\t\t\ttarget.addSkill('twxiaolian_distance');\n\t\t\t\t\t\t\t\ttarget.storage.twxiaolian_distance.addArray(result.cards);\n\t\t\t\t\t\t\t\ttarget.markSkill('twxiaolian_distance');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当一名其他角色使用【杀】指定另一名其他角色为目标时，你可以将此【杀】的目标改为你。若如此做，当你受到此【杀】的伤害后，你可以将一张牌放在此【杀】原目标的武将牌旁，称之为“马”。锁定技，场上的一名角色每有一张“马”，其他角色计算与其的距离便+1。"},"twqijia":{"name":"弃甲","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('e',function(card){\n\t\t\t\t\t\treturn !player.getStorage('twqijia_alka').contains(get.subtype(card));\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&player.canUse({name:'sha'},target);\n\t\t\t\t},position: \"e\",filterCard: function (card,player){\n\t\t\t\t\treturn !player.getStorage('twqijia_alka').contains(get.subtype(card));\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addTempSkill('twqijia_alka');\n\t\t\t\t\tplayer.storage.twqijia_alka.push(get.subtype(cards[0]));\n\t\t\t\t\tplayer.useCard({name:'sha'},target,false);\n\t\t\t\t},subSkill: {alka: {charlotte: \"true\",onremove: function (player){\n\t\t\t\t\t\t\tdelete player.storage.twqijia_alka;\n\t\t\t\t\t\t\tdelete player.storage.twzhuchen;\n\t\t\t\t\t\t\tplayer.unmarkSkill('twzhuchen');\n\t\t\t\t\t\t},init: function (player,skill){\n\t\t\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]=[];\n\t\t\t\t\t\t\tif(!player.storage.twzhuchen) player.storage.twzhuchen=[];\n\t\t\t\t\t\t},mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\t\t\tif(from.storage.twzhuchen&&from.storage.twzhuchen.contains(to)) return -Infinity;\n\t\t\t\t\t\t\t},},sub: \"true\",},},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})-0.2;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张装备区内的牌（每种类型的装备牌限一次），然后视为对攻击范围内的一名其他角色使用了一张【杀】。"},"twzhuchen":{"name":"诛綝","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',lib.skill.twzhuchen.filterCard)>0;\n\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\tvar name=get.name(card,player);\n\t\t\t\t\treturn name=='tao'||name=='jiu';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('twqijia_alka');\n\t\t\t\t\tplayer.storage.twzhuchen.add(target);\n\t\t\t\t\tplayer.markSkill('twzhuchen');\n\t\t\t\t},intro: {content: function (content,player){\n\t\t\t\t\t\treturn '至'+get.translation(content)+'的距离视为1';\n\t\t\t\t\t},},}","info":"出牌阶段，你可以弃置一张【桃】或【酒】并选择一名其他角色。你与其的距离视为1直到此阶段结束。"},"twhuzhu":{"name":"护主","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (e,player){\n\t\t\t\t\treturn player.countCards('e')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseCard('交给'+get.translation(player)+'一张手牌','h',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.give(result.cards,player);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.countGainableCards(player,'e')) target.gainPlayerCard(player,'e',true);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(target.isDamaged()&&target.hp<=player.hp){\n\t\t\t\t\t\tplayer.chooseBool('是否令'+get.translation(target)+'回复1点体力？').set('ai',function(){\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool) target.recover();\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=(target.isDamaged()&&target.hp<=player.hp)?get.recoverEffect(target,player,target):0;\n\t\t\t\t\t\t\tif(eff<=0&&!player.countGainableCards(target,'e')) return -1;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，若你的装备区内有牌，则你可以令一名其他角色交给你一张手牌，然后获得你装备区内的一张牌。若其体力值不大于你，则你可以令其回复1点体力。"},"twliancai":{"name":"敛财","script":"{audio: \"2\",trigger: {player: [\"turnOverEnd\",\"phaseJieshuBegin\"],},filter: function (card,player,target){\n\t\t\t\t\treturn target=='phaseJieshuBegin'||player.countCards('h')<player.hp;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countGainableCards(player,'e')>0;\n\t\t\t\t},check: function (card,player){\n\t\t\t\t\tif(card.name=='turnOver') return true;\n\t\t\t\t\tif(player.isTurnedOver()) return true;\n\t\t\t\t\tif(player.hp-player.countCards('h')>1) return true;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn lib.skill.twliancai.filterTarget(null,player,current)&&lib.skill.twliancai.filterAI(current);\n\t\t\t\t\t});\n\t\t\t\t},filterAI: function (target){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\tif(target.isDamaged()&&target.countCards('e','baiyin')&&att>0) return 2*att;\n\t\t\t\t\treturn -att;\n\t\t\t\t},prompt2: function (card,player,target){\n\t\t\t\t\treturn card.name=='phaseJieshu'?'将武将牌翻面，然后获得一名其他角色装备区内的一张牌':'将手牌摸至与体力值相同';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(event.triggername=='phaseJieshuBegin') player.turnOver();\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(player.hp-player.countCards('h'));\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseTarget('获得一名角色装备区内的一张牌',lib.skill.twliancai.filterTarget).ai=lib.skill.twliancai.filterAI;\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets,'thunder');\n\t\t\t\t\t\tplayer.gainPlayerCard('e',true,result.targets[0]);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以将武将牌翻面，然后获得一名其他角色装备区内的一张牌。当你的武将牌翻面时，你可以将手牌补至与体力值相同。"},"twrangyi":{"name":"攘夷","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},delay: \"0\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cards=player.getCards('h');\n\t\t\t\t\ttarget.gain(event.cards,player,'giveAuto').gaintag.add('twrangyi');\n\t\t\t\t\ttarget.addTempSkill('twrangyi2');\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.chooseToUse({\n\t\t\t\t\t\tprompt:'请使用得到的一张牌，或者受到来自'+get.translation(player)+'的一点伤害',\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\tif(get.itemtype(card)!='card'||!card.hasGaintag('twrangyi')) return false;\n\t\t\t\t\t\t\treturn lib.filter.filterCard(card,player,event);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcards:cards,\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.removeSkill('twrangyi');\n\t\t\t\t\tif(!result.bool) target.damage('nocard');\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tvar hi=hs[i];\n\t\t\t\t\t\t\t\tif(hi.name=='tao'||game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn target.canUse(hi,current)&&get.effect(current,hi,target,target);\n\t\t\t\t\t\t\t\t})) return 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,target);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以将所有手牌交给一名其他角色，然后令其选择一项：1.使用其中的一张牌，并于此牌被使用时将其余的牌交还给你。2.受到来自你的1点伤害。"},"twbaimei":{"name":"白眉","script":"{audio: \"2\",trigger: {player: \"damageBegin4\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tif(event.nature) return true;\n\t\t\t\t\treturn get.type(event.card,'trick')=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(target.countCards('h')) return;\n\t\t\t\t\t\t\tif(get.tag(card,'natureDamage')) return 'zerotarget';\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，若你没有手牌，则防止你受到的所有属性伤害和锦囊牌造成的伤害。"},"zhengfu":{"name":"征服","script":"{trigger: {player: \"useCardToPlayered\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},logTarget: \"target\",line: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.line(trigger.target,{color:[220, 90, 139]});\n\t\t\t\t\tplayer.chooseControl(['basic','trick','equip']).set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.target;\n\t\t\t\t\t\tif(!player.countCards('h','sha')&&player.countCards('h','shan')) return 'trick';\n\t\t\t\t\t\treturn 'basic';\n\t\t\t\t\t}).set('prompt','请选择一种牌的类别').set('target',trigger.target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttrigger.target.chooseCard('he','交给'+get.translation(player)+'一张'+get.translation(result.control)+'牌，否则此【杀】不可被闪避。',function(card){\n\t\t\t\t\t\treturn get.type(card,'trick')==result.control;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar num=_status.event.num;\n\t\t\t\t\t\tif(num==0) return 0;\n\t\t\t\t\t\tif(card.name=='shan') return num>1?2:0;\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t}).set('num',trigger.target.countCards('h','shan'))\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\t\tplayer.gain(cards,trigger.target,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\telse trigger.getParent().directHit.add(trigger.target);\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"当你使用【杀】指定目标时，你可以选择一种牌的类别，然后除非目标角色交给你一种该类别的牌，否则其不能闪避此【杀】。"}},"card":{},"hero":{"tw_beimihu":{"name":"TW卑弥呼","attr":["female","qun",3,["zongkui","guju","baijia","bingzhao"],["zhu"]]},"nashime":{"name":"难升米","attr":["male","qun",3,["chijie","waishi","renshe"]]},"tw_xiahouba":{"name":"TW夏侯霸","attr":["male","shu",4,["twyanqin","twbaobian"]]},"tw_zumao":{"name":"TW祖茂","attr":["male","wu",4,["twtijin"]]},"tw_caoang":{"name":"TW曹昂","attr":["male","wei",4,["twxiaolian"]]},"tw_dingfeng":{"name":"TW丁奉","attr":["male","wu",4,["twqijia","twzhuchen"]]},"tw_caohong":{"name":"TW曹洪","attr":["male","wei",4,["twhuzhu","twliancai"]]},"tw_maliang":{"name":"TW马良","attr":["male","shu",3,["twrangyi","twbaimei"]]},"kaisa":{"name":"凯撒","attr":["male","western",4,["zhengfu"]]}}},"mtg":{"name":"万智牌","skill":{"mbaizhan":{"name":"百战","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia(trigger.num);\n\t\t\t\t},ai: {damageBonus: \"true\",},}","info":"锁定技，每当你造成一点伤害，你获得一点护甲"},"msilian":{"name":"祀炼","script":"{trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn player.hujia>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hujia>1&&player.hp>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.msilian=player.hujia;\n\t\t\t\t\tplayer.changeHujia(-player.hujia);\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t},group: [\"msilian_hp\",\"msilian_draw\"],subSkill: {hp: {trigger: {player: \"phaseAfter\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.skill=='msilian'&&!player.getStat('damage');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},draw: {trigger: {player: \"phaseDrawBegin\",},filter: function (event){\n\t\t\t\t\t\t\treturn event.getParent('phase').skill=='msilian';\n\t\t\t\t\t\t},silent: \"true\",content: function (){\n\t\t\t\t\t\t\ttrigger.num+=player.storage.msilian-2;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"结束阶段，若你有护甲，你可以移去全部护甲，然后进行一个额外回合；在额外回合中，你的摸牌阶段摸牌基数为你移去的护甲数；额外回合结束后，若你未造成伤害，你失去一点体力"},"mtongnian":{"name":"通念","script":"{trigger: {player: \"phaseUseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\tfor(var i=0;i<enemies.length;i++){\n\t\t\t\t\t\tif(enemies[i].countCards('h')) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},getList: function (player){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\tfor(var i=0;i<enemies.length;i++){\n\t\t\t\t\t\tlist.addArray(enemies[i].getCards('h'));\n\t\t\t\t\t}\n\t\t\t\t\treturn list;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=lib.skill.mtongnian.getList(player);\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tvar card=list.randomGet();\n\t\t\t\t\t\tvar fake=game.createCard(card);\n\t\t\t\t\t\tfake.mtongnian_link=card;\n\t\t\t\t\t\tplayer.gain(fake,'draw')._triggered=null;\n\t\t\t\t\t\tfake.classList.add('glow');\n\t\t\t\t\t\tfake._destroy='mtongnian';\n\t\t\t\t\t}\n\t\t\t\t},group: [\"mtongnian_change\",\"mtongnian_use\",\"mtongnian_lose\"],subSkill: {change: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn card.mtongnian_link?true:false;\n\t\t\t\t\t\t\t},'h');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar list=lib.skill.mtongnian.getList(player);\n\t\t\t\t\t\t\tvar hs=player.getCards('h',function(card){\n\t\t\t\t\t\t\t\treturn card.mtongnian_link?true:false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tvar current=hs[i].mtongnian_link;\n\t\t\t\t\t\t\t\ths[i].mtongnian_link=list.randomGet(current);\n\t\t\t\t\t\t\t\tif(!hs[i].mtongnian_link){\n\t\t\t\t\t\t\t\t\ths[i].mtongnian_link=current;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ths[i].init(hs[i].mtongnian_link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},use: {trigger: {player: \"useCardBefore\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.mtongnian_link?true:false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar link=trigger.card.mtongnian_link;\n\t\t\t\t\t\t\tvar target=get.owner(link);\n\t\t\t\t\t\t\tif(target&&target!=player){\n\t\t\t\t\t\t\t\ttrigger.cards.add(trigger.card);\n\t\t\t\t\t\t\t\tplayer.lose(trigger.cards,ui.discardPile);\n\t\t\t\t\t\t\t\ttrigger.card=link;\n\t\t\t\t\t\t\t\ttrigger.cards.length=0;\n\t\t\t\t\t\t\t\ttrigger.cards.push(link);\n\t\t\t\t\t\t\t\ttarget.lose(link,ui.discardPile);\n\t\t\t\t\t\t\t\tplayer.logSkill('mtongnian',target);\n\t\t\t\t\t\t\t\tgame.log(target,'失去了',link);\n\t\t\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.lose(trigger.card);\n\t\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},lose: {trigger: {player: \"phaseUseEnd\",global: \"loseEnd\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event.name=='lose'){\n\t\t\t\t\t\t\t\treturn lib.skill.mtongnian.getList(player).length==0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar hs=player.getCards('h',function(card){\n\t\t\t\t\t\t\t\treturn card.mtongnian_link?true:false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\t\t\tplayer.lose(hs)._triggered=null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},ai: {threaten: \"1.3\",},}","info":"锁定技，出牌阶段开始时，你获得一张替身牌，此牌对应一名随机敌人的一张随机手牌；每当你使用一张非替身牌，随机更换替身牌对应的牌；当你使用替身牌时，改为使用替身牌对应的牌；当出牌阶段结束，或替身牌离开手牌区，或敌方角色没有手牌时，销毁替身牌"},"msuoling":{"name":"塑灵","script":"{trigger: {global: \"useCard\",},direct: \"true\",priority: \"5.5\",round: \"1\",filter: function (event,player){\n\t\t\t\t\tif(get.type(event.card)=='trick'&&event.card.isCard){\n\t\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\t\tif(!player.countCards('he',{suit:get.suit(event.card)})) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar att=get.attitude(player,trigger.player);\n\t\t\t\t\tvar suit=get.suit(trigger.card);\n\t\t\t\t\tplayer.chooseToDiscard('he',get.prompt2('msuoling',trigger.player),function(card){\n\t\t\t\t\t\treturn get.suit(card)==suit;\n\t\t\t\t\t}).set('autodelay',true).set('logSkill',['msuoling',trigger.player]).ai=function(card){\n\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tplayer.chooseUseTarget(true,trigger.card);\n\t\t\t\t\t}\n\t\t\t\t},group: [\"msuoling_roundcount\"],}","info":"每轮限一次，当一名其他角色使用一张非转化的普通锦囊牌时，你可以弃置一张与之花色相同的牌取消之，然后你视为使用该锦囊牌"},"mhuanyi":{"name":"幻逸","script":"{round: \"2\",trigger: {player: \"phaseEnd\",},direct: \"true\",addintro: function (storage,player){\n\t\t\t\t\tif(player.hasSkill('mhuanyi_target')){\n\t\t\t\t\t\treturn '直到下一回合开始，当成为某类型的卡牌的惟一目标时，将目标转移给某名其他角色；'\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar rand=Math.random();\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('mhuanyi'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(get.attitude(player,target)<0){\n\t\t\t\t\t\t\treturn rand;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\tplayer.line(event.target,'green');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseControl('基本牌','非基本牌','cancel2',function(){\n\t\t\t\t\t\t\treturn Math.floor(Math.random()*2);\n\t\t\t\t\t\t}).set('prompt','选择一种卡牌类型');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control&&result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('mhuanyi');\n\t\t\t\t\t\tplayer.storage.mhuanyi_target=[event.target,result.index];\n\t\t\t\t\t\tplayer.addTempSkill('mhuanyi_target',{player:'phaseBegin'});\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {target: {trigger: {target: \"useCardToBefore\",},priority: \"6\",forced: \"true\",onremove: \"true\",group: \"mhuanyi_die\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.storage.mhuanyi_target) return false;\n\t\t\t\t\t\t\tif(event.player==player.storage.mhuanyi_target[0]) return false;\n\t\t\t\t\t\t\tif(get.type(event.card)=='basic'){\n\t\t\t\t\t\t\t\tif(player.storage.mhuanyi_target[1]!=0) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(player.storage.mhuanyi_target[1]!=1) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!lib.filter.targetEnabled2(event.card,event.player,player.storage.mhuanyi_target[0])){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},logTarget: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.mhuanyi_target[0];\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.target=player.storage.mhuanyi_target[0];\n\t\t\t\t\t\t\tplayer.removeSkill('mhuanyi_target');\n\t\t\t\t\t\t},sub: \"true\",},die: {trigger: {global: \"dieAfter\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.storage.mhuanyi_target) return false;\n\t\t\t\t\t\t\treturn event.player==player.storage.mhuanyi_target[0];\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.removeSkill('mhuanyi_target');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},group: [\"mhuanyi_roundcount\"],}","info":"每两轮限一次，结束阶段，你可以选择一名其他角色和一种卡牌类型（选择结果对其他角色不可见），直到下一回合开始，当你首次成为该类型卡牌的惟一目标时，你将目标转移给你指定的角色（目标须合法）"},"lingyong":{"name":"灵俑","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('subplayer')&&player.getSubPlayers('lingyong_get').length>0;\n\t\t\t\t},nosub: \"true\",group: \"lingyong_get\",direct: \"true\",delay: \"0\",skillAnimation: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\tplayer.callSubPlayer().set('tag','lingyong_get');\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t// if(player.hp<=1) return 1;\n\t\t\t\t\t\t\t// if(!player.needsToDiscard(player.hp-1)) return 1;\n\t\t\t\t\t\t\t// return 0;\n\t\t\t\t\t\t},},},subSkill: {get: {trigger: {global: \"dieAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !event.player.isMin()&&![player.name,player.name1,player.name2].contains(event.player.name);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar skills=lib.character[trigger.player.name][3].slice(0);\n\t\t\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\t\t\tif(lib.skill[skills[i]].nosub){\n\t\t\t\t\t\t\t\t\tskills.splice(i--,1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.addSubPlayer({\n\t\t\t\t\t\t\t\tname:trigger.player.name,\n\t\t\t\t\t\t\t\tskills:skills,\n\t\t\t\t\t\t\t\ths:get.cards(2),\n\t\t\t\t\t\t\t\tintro:'出牌阶段，你可以调遣此随从（直到随从死亡不可再次切换）'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，每当一名其他角色死亡，你获得一个与该角色同名且体力上限为1、初始手牌为2的随从；出牌阶段，你可以调遣以此法获得的随从（直到随从死亡不可再次切换）"},"mduohun":{"name":"夺魂","script":"{trigger: {player: \"dyingAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.isIn()&&event.source.hp>0;\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\ttrigger.source.loseHp();\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 0.6;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(target.hp<=1&&get.tag(card,'damage')) return [1,0,0,-1];\n\t\t\t\t\t\t},},},}","info":"锁定技，当你解除濒死状态后，令你进入濒死状态的角色失去一点体力"}},"card":{},"hero":{"mtg_jiding":{"name":"基定","attr":["male","qun",4,["mbaizhan","msilian"]]},"mtg_jiesi":{"name":"杰斯","attr":["male","wei",3,["mtongnian","msuoling","mhuanyi"]]},"mtg_lilianna":{"name":"莉莲娜","attr":["female","qun",3,["lingyong","mduohun"]]}}},"xinghuoliaoyuan":{"name":"星火燎原","skill":{"xinfu_sanwen":{"name":"散文","script":"{audio: \"2\",usable: \"1\",trigger: {player: \"gainAfter\",},filter: function (event,player){\n\t\t\t\t\tvar namelist=[];\n\t\t\t\t\tvar namedlist=[];\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tnamelist.add(get.name(event.cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tfor(var j=0;j<hs.length;j++){\n\t\t\t\t\t\tif(namelist.contains(get.name(hs[j]))&&!event.cards.contains(hs[j])) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar namelist=[];\n\t\t\t\t\tvar namedlist=[];\n\t\t\t\t\tvar nameddlist=[];\n\t\t\t\t\tvar namedddlist=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tnamelist.add(get.name(trigger.cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tfor(var j=0;j<hs.length;j++){\n\t\t\t\t\t\tif(namelist.contains(get.name(hs[j]))&&!trigger.cards.contains(hs[j])){\n\t\t\t\t\t\t\tnamedlist.push(hs[j]);\n\t\t\t\t\t\t\tnamedddlist.add(get.name(hs[j]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var k=0;k<trigger.cards.length;k++){\n\t\t\t\t\t\tif(namedddlist.contains(get.name(trigger.cards[k]))) nameddlist.push(trigger.cards[k]);\n\t\t\t\t\t}\n\t\t\t\t\tvar showlist=namedlist.concat(nameddlist);\n\t\t\t\t\tplayer.showCards(showlist);\n\t\t\t\t\tplayer.discard(nameddlist);\n\t\t\t\t\tplayer.draw(2*nameddlist.length);\n\t\t\t\t},}","info":"每回合限一次。当你获得牌后，若你的原手牌中有与这些牌名称相同的牌，则你可以展示这些牌，弃置新得到的同名牌并摸两倍的牌。"},"xinfu_qiai":{"name":"七哀","script":"{unique: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.xinfu_qiai=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.storage.xinfu_qiai==false;\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"gray\",trigger: {player: \"dying\",},limited: \"true\",marktext: \"哀\",mark: \"true\",intro: {content: \"limited\",},audio: \"2\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('xinfu_qiai');\n\t\t\t\t\tplayer.storage.xinfu_qiai=true;\n\t\t\t\t\tevent.current=player.next;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!event.current.countCards('he')) event.goto(3);\n\t\t\t\t\telse event.current.chooseCard('交给'+get.translation(player)+'一张牌','he',true).set('ai',function(card){\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(get.attitude(_status.event.player,evt.player)>2){\n\t\t\t\t\t\t\tif(card.name=='jiu') return 120;\n\t\t\t\t\t\t\tif(card.name=='tao') return 110;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 100-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length){\n\t\t\t\t\t\tplayer.gain(result.cards,event.current,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tevent.current=event.current.next;\n\t\t\t\t\tif(event.current!=player) event.goto(1);\n\t\t\t\t},}","info":"限定技，当你进入濒死状态时，你可以令所有其他角色依次交给你一张牌。"},"xinfu_denglou":{"name":"登楼","script":"{unique: \"true\",audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},limited: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.xinfu_denglou=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\treturn player.storage.xinfu_denglou==false;\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"gray\",marktext: \"登\",mark: \"true\",intro: {content: \"limited\",},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('xinfu_denglou');\n\t\t\t\t\tplayer.storage.xinfu_denglou=true;\n\t\t\t\t\tevent.cards=get.cards(4);\n\t\t\t\t\tevent.gains=[]\n\t\t\t\t\tevent.discards=[]\n\t\t\t\t\tvar content=['牌堆顶的四张牌',event.cards];\n\t\t\t\t\tgame.log(player,'观看了','#y牌堆顶的四张牌');\n\t\t\t\t\tplayer.chooseControl('ok').set('dialog',content);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(get.type(event.cards[0])!=\"basic\"){\n\t\t\t\t\t\tevent.gains.push(event.cards[0]);\n\t\t\t\t\t\tevent.cards.remove(event.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar bool=game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse(event.cards[0],current);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(bool){\n\t\t\t\t\t\t\tplayer.chooseUseTarget(event.cards[0],true,false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.discards.push(event.cards[0]);\n\t\t\t\t\t\tevent.cards.remove(event.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.cards.length) event.goto(1);\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.gains.length) player.gain(event.gains,'gain2');\n\t\t\t\t\t\tif(event.discards.length){\n\t\t\t\t\t\t\tplayer.$throw(event.discards);\n\t\t\t\t\t\t\tgame.cardsDiscard(event.discards);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"限定技，结束阶段，若你没有手牌，则你可以观看牌堆顶的四张牌，依次使用其中的所有基本牌（不能使用则弃置），然后获得其余的牌。"},"xinfu_jixu":{"name":"击虚","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\treturn target.hp==ui.selected.targets[0].hp;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},selectTarget: [1,null],multitarget: \"true\",multiline: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!event.num) event.num=0;\n\t\t\t\t\tif(!event.caicuolist) event.caicuolist=[];\n\t\t\t\t\ttargets[event.num].chooseBool(\"是否押杀？\").ai=function(event,player){\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(get.attitude(targets[event.num],evt.player)>0) return evt.player.countCards('h','sha')?false:true;\n\t\t\t\t\t\treturn Math.random()<0.5;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttargets[event.num].chat('有杀');\n\t\t\t\t\t\tgame.log(targets[event.num],'认为',player,'#g有杀');\n\t\t\t\t\t\tif(!player.countCards('h','sha')) event.caicuolist.add(targets[event.num]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttargets[event.num].chat('没杀');\n\t\t\t\t\t\tgame.log(targets[event.num],'认为',player,'#y没有杀');\n\t\t\t\t\t\tif(player.countCards('h','sha')) event.caicuolist.add(targets[event.num]);\n\t\t\t\t\t}\n\t\t\t\t\tevent.num++;\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tif(event.num<targets.length) event.goto(1);\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tplayer.popup(player.countCards('h','sha')?\"有杀\":\"没杀\");\n\t\t\t\t\tgame.log(player,player.countCards('h','sha')?\"有杀\":\"没杀\");\n\t\t\t\t\tif(event.caicuolist.length==0){\n\t\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\t\tif(evt&&evt.name=='phaseUse'){\n\t\t\t\t\t\t\tevt.skipped=true;\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(event.caicuolist.length)\n\t\t\t\t\t\tif(player.countCards('h','sha')){\n\t\t\t\t\t\t\tplayer.addTempSkill('jixu_sha');\n\t\t\t\t\t\t\tplayer.storage.jixu_sha=event.caicuolist;\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.num=0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(event.num<event.caicuolist.length){\n\t\t\t\t\t\tvar target=event.caicuolist[event.num];\n\t\t\t\t\t\tplayer.discardPlayerCard(true,'he',target);\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar raweffect=function(player,target){\n\t\t\t\t\t\t\t\tif(player.countCards('h','sha')){\n\t\t\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,target);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\n\t\t\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\n\t\t\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\n\t\t\t\t\t\t\t\t\t\t\tif(target.hp==2) return 0.01;\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\n\t\t\t\t\t\t\t\t\tvar noe2=(es.length==1&&es[0].name=='baiyin'&&target.isDamaged());\n\t\t\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\n\t\t\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\n\t\t\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\n\t\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.hp==target.hp&&(raweffect(player,current)*get.attitude(player,current))>0\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn raweffect(player,target)*Math.max(0,num-1);\n\t\t\t\t\t\t},},expose: \"0.4\",},}","info":"出牌阶段限一次，若你有手牌，你可以令任意名体力值相等的其他角色猜测你的手牌中是否有【杀】。然后，你摸X张牌（X为猜错的角色数）。若你有【杀】，则你本回合内使用【杀】时，所有这些角色均成为【杀】的目标；若你没有【杀】，则你弃置所有这些角色的各一张牌。若X为零，你结束出牌阶段。"},"xinfu_guolun":{"name":"过论","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cardt=target.getCards('h').randomGet();\n\t\t\t\t\ttarget.showCards(event.cardt);\n\t\t\t\t\tplayer.chooseCard('he').ai=function(card){\n\t\t\t\t\t\tvar numt=event.cardt.number;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tvar value=get.value(event.cardt);\n\t\t\t\t\t\tif(card.number<numt||att>2) return value+6-get.value(card);\n\t\t\t\t\t\telse if(card.number==numt) return value-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool) event.finish();\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.showCards(result.cards);\n\t\t\t\t\t\tevent.cardp=result.cards;\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.$giveAuto(event.cardp,target);\n\t\t\t\t\ttarget.gain(event.cardp,player);\n\t\t\t\t\ttarget.give(event.cardt,player);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar nump=event.cardp[0].number;\n\t\t\t\t\tvar numt=event.cardt.number;\n\t\t\t\t\tif(nump<numt){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse if(nump>numt){\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",order: \"8\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0) return 1.5;\n\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以展示一名其他角色的手牌，然后展示你的一张牌。你与其交换这两张牌，然后展示的牌点数较小的角色摸一张牌。"},"xinfu_songsang":{"name":"送丧","script":"{limited: \"true\",unique: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.xinfu_songsang=false;\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"wood\",audio: \"2\",derivation: \"xinfu_zhanji\",trigger: {global: \"dieAfter\",},filter: function (event,player){\n\t\t\t\t\tif(player.storage.xinfu_songsang==true) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('xinfu_songsang');\n\t\t\t\t\tif(player.isDamaged()){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse player.gainMaxHp();\n\t\t\t\t\tplayer.addSkill('xinfu_zhanji');\n\t\t\t\t\tplayer.storage.xinfu_songsang=true;\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},}","info":"限定技，其他角色死亡时，你可以回复一点体力（若你未受伤，则改为加一点体力上限）；然后获得技能〖展骥〗。"},"xinfu_qinguo":{"name":"勤国","script":"{group: \"xinfu_qinguo_recover\",audio: \"qinguo_use\",subfrequent: [\"recover\"],trigger: {player: \"useCardEnd\",},filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card)=='equip';\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\tplayer.chooseUseTarget({name:'sha'},get.prompt('xinfu_qinguo'),'视为使用一张【杀】',false).logSkill='xinfu_qinguo';\n\t\t\t\t},subSkill: {recover: {audio: \"qinguo_use\",trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},prompt: \"是否发动【勤国】回复1点体力？\",filter: function (event,player){\n\t\t\t\t\t\t\tif(player.isHealthy()||player.countCards('e')!=player.hp) return false;\n\t\t\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\t\t\tif(event.name=='equip'&&event.player==player) return !evt||evt.cards.length!=1;\n\t\t\t\t\t\t\treturn evt&&evt.es.length;\n\t\t\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"当你使用的装备牌结算完成时，你可以视为使用一张【杀】；当你因使用或失去装备牌导致装备区内牌的数量发生变化后，若你装备区内牌的数量等于你的体力值，则你回复1点体力。"},"xinfu_jijun":{"name":"集军","script":"{ai: {reverseEquip: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&player==target&&player==_status.currentPhase&&get.subtype(card)=='equip1') return [1,3];\n\t\t\t\t\t\t},},},audio: \"2\",trigger: {player: \"useCardToPlayered\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player!=_status.currentPhase) return false;\n\t\t\t\t\tif(event.getParent().triggeredTargets3.length>1) return false;\n\t\t\t\t\tif(get.type(event.card)=='equip'&&get.subtype(event.card)!='equip1') return false;\n\t\t\t\t\tif(event.targets.contains(player)) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},callback: function (){\n\t\t\t\t\tgame.cardsGotoSpecial(card);\n\t\t\t\t\tplayer.storage.xinfu_jijun.push(card);\n\t\t\t\t\tvar node=event.judgeResult.node;\n\t\t\t\t\tnode.moveDelete(player);\n\t\t\t\t\tgame.broadcast(function(cardid,player){\n\t\t\t\t\t\tvar node=lib.cardOL[cardid];\n\t\t\t\t\t\tif(node){\n\t\t\t\t\t\t\tnode.moveDelete(player);\n\t\t\t\t\t\t}\n\t\t\t\t\t},node.cardid,player);\n\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([node]));\n\t\t\t\t\tplayer.markSkill('xinfu_jijun');\n\t\t\t\t\tgame.addVideo('storage',player,['xinfu_jijun',get.cardsInfo(player.storage.xinfu_jijun),'cards']);\n\t\t\t\t\t//event.trigger(\"addCardToStorage\");\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}).callback=lib.skill.xinfu_jijun.callback;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.xinfu_jijun) player.storage.xinfu_jijun=[];\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},mark: function (dialog,content,player){\n\t\t\t\t\t\tif(content&&content.length){\n\t\t\t\t\t\t\tdialog.addAuto(content);\n\t\t\t\t\t\t\tif(player==game.me||player.isUnderControl()){\n\t\t\t\t\t\t\t\tvar list=lib.skill.xinfu_fangtong.getAuto(player);\n\t\t\t\t\t\t\t\tif(list.length>0){\n\t\t\t\t\t\t\t\t\tdialog.addText('<li>推荐方案：'+get.translation(list));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},marktext: \"方\",}","info":"当你于回合内使用非装备牌或武器牌指定目标后，若你是此牌的目标，你可以进行一次判定。然后，你将判定牌置于自己的武将牌上，称之为「方」。"},"xinfu_fangtong":{"name":"方统","script":"{getAuto: function (player){\n\t\t\t\t\tvar hs=player.getCards('he');\n\t\t\t\t\tvar ss=player.storage.xinfu_jijun;\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tvar num=36-hs[i].number;\n\t\t\t\t\t\tfor(var j=0;j<ss.length;j++){\n\t\t\t\t\t\t\tif(ss[j]==num){var k=-1;bool=true;break}\n\t\t\t\t\t\t\tfor(var k=j+1;k<ss.length;k++){\n\t\t\t\t\t\t\t\tif(ss[j].number+ss[k].number==num){var l=-1;bool=true;break}\n\t\t\t\t\t\t\t\tfor(var l=k+1;l<ss.length;l++){\n\t\t\t\t\t\t\t\t\tif(ss[j].number+ss[k].number+ss[l].number==num){var m=-1;bool=true;break}\n\t\t\t\t\t\t\t\t\tfor(var m=l+1;m<ss.length;m++){\n\t\t\t\t\t\t\t\t\t\tif(ss[j].number+ss[k].number+ss[l].number+ss[m].number==num){var n=-1;bool=true;break}\n\t\t\t\t\t\t\t\t\t\tfor(var n=m+1;n<ss.length;n++){\n\t\t\t\t\t\t\t\t\t\t\tif(ss[j].number+ss[k].number+ss[l].number+ss[m].number+ss[n].number==num){var o=-1;bool=true;break}\n\t\t\t\t\t\t\t\t\t\t\tfor(var o=n+1;o<ss.length;o++){\n\t\t\t\t\t\t\t\t\t\t\t\tif(ss[j].number+ss[k].number+ss[l].number+ss[m].number+ss[n].number+ss[o].number==num){var p=-1;bool=true;break}\n\t\t\t\t\t\t\t\t\t\t\t\tfor(var p=o+1;p<ss.length;p++){\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(ss[j].number+ss[k].number+ss[l].number+ss[m].number+ss[n].number+ss[o].number+ss[p].number==num){bool=true;break}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif(bool) break;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tif(bool) break;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(bool) break;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(bool) break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(bool) break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(bool) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(bool) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(!bool) return [];\n\t\t\t\t\tvar list=[i,j,k,l,m,n,o,p];\n\t\t\t\t\tfor(var q=0;q<list.length;q++){\n\t\t\t\t\t\tif(list[q]==-1){\n\t\t\t\t\t\t\tlist=list.slice(0,q);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(q==0){\n\t\t\t\t\t\t\tlist[q]=hs[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse list[q]=ss[list[q]];\n\t\t\t\t\t}\n\t\t\t\t\treturn list;\n\t\t\t\t},audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.storage.xinfu_jijun&&player.storage.xinfu_jijun.length&&player.countCards('he');\n\t\t\t\t},direct: \"true\",skillAnimation: \"true\",animationColor: \"metal\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar info=['是否发动【方统】？'];\n\t\t\t\t\tif(player.storage.xinfu_jijun){\n\t\t\t\t\t\tinfo.push('<div class=\"text center\">'+get.translation(player)+'的“方”</div>');\n\t\t\t\t\t\tinfo.push(player.storage.xinfu_jijun);\n\t\t\t\t\t}\n\t\t\t\t\tif(player.countCards('h')){\n\t\t\t\t\t\tinfo.push('<div class=\"text center\">'+get.translation(player)+'的手牌区</div>');\n\t\t\t\t\t\tinfo.push(player.getCards('h'));\n\t\t\t\t\t}\n\t\t\t\t\tif(player.countCards('e')){\n\t\t\t\t\t\tinfo.push('<div class=\"text center\">'+get.translation(player)+'的装备区</div>');\n\t\t\t\t\t\tinfo.push(player.getCards('e'));\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseButton();\n\t\t\t\t\tnext.set('createDialog',info);\n\t\t\t\t\tnext.set('selectButton',function (){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.buttons[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num==36) return ui.selected.buttons.length;\n\t\t\t\t\t\treturn ui.selected.buttons.length+2;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(ui.selected.buttons.length){\n\t\t\t\t\t\t\tif(!player.storage.xinfu_jijun.contains(button.link)) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(player.storage.xinfu_jijun.contains(button.link)) return false;\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.buttons[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.number(button.link)+num<=36;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('autolist',lib.skill.xinfu_fangtong.getAuto(player));\n\t\t\t\t\tnext.set('processAI',function(){\n\t\t\t\t\t\tif(_status.event.autolist&&_status.event.autolist.length>0){\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\t\tlinks:_status.event.autolist,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('complexSelect',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xinfu_fangtong');\n\t\t\t\t\t\tvar tothrow=[];\n\t\t\t\t\t\tvar cards=result.links.slice(0);\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(player.storage.xinfu_jijun.contains(cards[i])){\n\t\t\t\t\t\t\t\tplayer.storage.xinfu_jijun.remove(cards[i]);\n\t\t\t\t\t\t\t\ttothrow.push(cards[i]);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tplayer.discard(cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.$throw(tothrow);\n\t\t\t\t\t\tplayer.chooseTarget('选择一个目标并对其造成3点雷电伤害',true,function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,_status.event.player,_status.event.player,'thunder');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\tplayer.line(target,'thunder');\n\t\t\t\t\ttarget.damage(3,'thunder');\n\t\t\t\t},}","info":"结束阶段，你可以弃置总点数之和为36的一张牌与任意张「方」，并对一名其他角色造成3点雷电伤害。"},"xinfu_weilu":{"name":"威虏","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn (event.source!=undefined&&!event.source.hasSkill('weilu_effect'));\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn (get.attitude(player,event.source)<=0);\n\t\t\t\t},forced: \"true\",logTarget: \"source\",content: function (){\n\t\t\t\t\ttrigger.source.storage.weilu_effect=player;\n\t\t\t\t\ttrigger.source.addTempSkill('weilu_effect',{player:\"dieAfter\",});\n\t\t\t\t\ttrigger.source.addTempSkill('weilu_effect_phase');\n\t\t\t\t},ai: {maixie_defend: \"true\",threaten: \"0.7\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1];\n\t\t\t\t\t\t\treturn 0.8;\n\t\t\t\t\t\t\t// if(get.tag(card,'damage')&&get.damageEffect(target,player,player)>0) return [1,0,0,-1.5];\n\t\t\t\t\t\t},},},}","info":"锁定技，当你受到伤害后，伤害来源获得一枚「虏」。你的下个出牌阶段开始时，所有有「虏」的角色将体力失去至1点。此阶段结束后，这些角色回复以此法失去的体力。"},"xinfu_zengdao":{"name":"赠刀","script":"{audio: \"2\",init: function (player){\n\t\t\t\t\tplayer.storage.xinfu_zengdao=false;\n\t\t\t\t},limited: \"true\",unique: \"true\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.xinfu_zengdao==true) return false;\n\t\t\t\t\treturn player.countCards('e')>0;\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"thunder\",position: \"e\",filterCard: \"true\",selectCard: [1,null],discard: \"false\",lose: \"true\",content: function (){\n\t\t\t\t\tplayer.awakenSkill('xinfu_zengdao');\n\t\t\t\t\tplayer.$give(cards,target,false);\n\t\t\t\t\ttarget.storage.xinfu_zengdao2=cards.slice(0);\n\t\t\t\t\ttarget.addSkill('xinfu_zengdao2');\n\t\t\t\t},ai: {order: \"1\",result: {target: \"0\",},},mark: \"true\",intro: {content: \"limited\",},}","info":"限定技，出牌阶段，你可以将装备牌内的任意张牌置于一名其他角色的武将牌旁，称之为「刀」。该角色造成伤害时，其须移去一张「刀」，然后此伤害+1。"},"xinfu_guanwei":{"name":"观微","script":"{audio: \"2\",usable: \"1\",trigger: {global: \"phaseUseEnd\",},filter: function (event,player){\n\t\t\t\t\tvar history=event.player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.getParent('phaseUse')==event;\n\t\t\t\t\t});\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar suit=false;\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tvar suit2=get.suit(history[i].card);\n\t\t\t\t\t\tif(!suit2) continue;\n\t\t\t\t\t\tif(suit&&suit!=suit2) return false;\n\t\t\t\t\t\tsuit=suit2;\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t}\n\t\t\t\t\treturn num>1;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard('he',get.prompt('xinfu_guanwei',trigger.player),'弃置一张牌，令其摸两张牌并进行一个额外的出牌阶段。').set('ai',function(card){\n\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.currentPhase)<1) return 0;\n\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t}).set('logSkill','xinfu_guanwei');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar next=trigger.player.phaseUse();\n\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\ttrigger.getParent('phase').next.push(next);\n\t\t\t\t},ai: {expose: \"0.5\",},}","info":"每回合限一次。一名角色的出牌阶段结束时，若其于出牌阶段内使用过两张以上的牌且花色均相同，则你可以弃置一张牌，令其摸两张牌并进行一个额外的出牌阶段。"},"xinfu_gongqing":{"name":"公清","script":"{audio: \"true\",trigger: {player: [\"damageBegin3\",\"damageBegin4\"],},forced: \"true\",filter: function (event,player,name){\n\t\t\t\t\tif(!event.source) return false;\n\t\t\t\t\tvar range=event.source.getAttackRange();\n\t\t\t\t\tif(name=='damageBegin3') return range>3;\n\t\t\t\t\treturn event.num>1&&range<3;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num=event.triggername=='damageBegin4'?1:trigger.num+1;\n\t\t\t\t},ai: {filterDamage: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg&&arg.player){\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('jueqing',false,player)) return false;\n\t\t\t\t\t\t\tif(arg.player.getAttackRange()<3) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技。当你受到伤害时，若伤害来源的攻击范围：<3，则你令此伤害的数值减为1。>3，你令此伤害+1。"},"xinfu_andong":{"name":"安东","script":"{subSkill: {add: {sub: \"true\",mod: {ignoredHandcard: function (card,player){\n\t\t\t\t\t\t\t\tif(get.suit(card)=='heart'){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},cardDiscardable: function (card,player,name){\n\t\t\t\t\t\t\t\tif(name=='phaseDiscard'&&get.suit(card)=='heart') return false;\n\t\t\t\t\t\t\t},},},},audio: \"2\",trigger: {player: \"damageBegin4\",},filter: function (event,player){\n\t\t\t\t\treturn get.itemtype(event.source)=='player';\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(!trigger.source.countCards('h')) event._result={index:1};\n\t\t\t\t\telse trigger.source.chooseControlList(\n\t\t\t\t\t\t['令'+get.translation(player)+'观看你的手牌，并获得其中所有的红桃牌。',\n\t\t\t\t\t\t'防止即将对'+get.translation(player)+'造成的伤害，并使自己本回合内的红桃手牌不计入手牌上限。'],\n\t\t\t\t\t\ttrue).set('ai',function(event,player){\n\t\t\t\t\t\tvar target=_status.event.getParent().player;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(player,target)>0) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.index==1){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\ttrigger.source.addTempSkill('xinfu_andong_add');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tplayer.viewHandcards(trigger.source);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar cards=trigger.source.getCards('h');\n\t\t\t\t\tvar togain=[]\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.suit(cards[i])=='heart') togain.push(cards[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(togain.length) trigger.source.give(togain,player);\n\t\t\t\t},}","info":"当你受到伤害时，你可以令伤害来源选择一项：1.令你观看其的手牌并获得其中的所有红桃牌；2.防止此伤害，然后其本回合内的红桃手牌不计入手牌上限。"},"xinfu_yingshi":{"name":"应势","script":"{audio: \"2\",group: [\"yingshi_die\"],trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'heart'})>0&&!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hasSkill('yingshi_heart');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xinfu_yingshi'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(){\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=player.getCards('he');\n\t\t\t\t\t\tvar togain=[]\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(get.suit(cards[i])=='heart') togain.push(cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('xinfu_yingshi',result.targets);\n\t\t\t\t\t\tplayer.lose(togain,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.$give(togain,result.targets[0],false);\n\t\t\t\t\t\tresult.targets[0].storage.yingshi_heart=togain;\n\t\t\t\t\t\tresult.targets[0].addSkill('yingshi_heart');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，若场上的所有角色均没有「酬」，则你可以将所有的红桃牌置于一名其他角色的武将牌旁，称之为「酬」。有「酬」的角色受到「杀」的伤害/死亡时，伤害来源/你获得其中的一张/所有的「酬」。"},"xinfu_duanfa":{"name":"断发","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.xinfu_duanfa=0;\n\t\t\t\t},audio: \"2\",enable: \"phaseUse\",position: \"he\",filter: function (card,player){\n\t\t\t\t\treturn player.storage.xinfu_duanfa<player.maxHp;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},selectCard: function (){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\treturn [1,player.maxHp-player.storage.xinfu_duanfa];\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},delay: \"false\",content: function (){\n\t\t\t\t\tplayer.draw(cards.length);\n\t\t\t\t\tplayer.storage.xinfu_duanfa+=cards.length;\n\t\t\t\t},group: \"xinfu_duanfa_clear\",subSkill: {clear: {trigger: {player: \"phaseBefore\",},forced: \"true\",silent: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.xinfu_duanfa=0;\n\t\t\t\t\t\t},sub: \"true\",},},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段，你可以弃置任意张黑色牌，然后摸等量的牌。（每回合内限X张，X为你的体力上限）"},"xinfu_youdi":{"name":"诱敌","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xinfu_youdi'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h','sha')>player.countCards('h')/3&&player.countCards('h',{color:'red'})>player.countCards('h')/2) return 0;\n\t\t\t\t\t\tif(target.countCards('he')==0) return 0.1;\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tplayer.logSkill('xinfu_youdi',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tevent.target.discardPlayerCard(player,'h',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(get.color(result.links[0])!='black') player.draw('nodelay');\n\t\t\t\t\tif(result.links[0].name!='sha'&&event.target.countCards('he')){\n\t\t\t\t\t\tplayer.gainPlayerCard('he',event.target,true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",threaten: \"1.4\",},}","info":"结束阶段开始时，你可以令一名其他角色弃置你的一张手牌，若此牌：不为黑色，你摸一张牌。不为【杀】，你获得该角色的一张牌。"},"xinfu_guanchao":{"name":"观潮","script":"{subSkill: {dizeng: {mark: \"true\",marktext: \"增\",intro: {content: \"单调递增\",},trigger: {player: \"useCard\",},audio: \"xinfu_guanchao\",forced: \"true\",mod: {aiOrder: function (player,card,num){\n\t\t\t\t\t\t\t\tif(typeof card.number!='number') return;\n\t\t\t\t\t\t\t\tvar history=player.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\t\t\treturn evt.isPhaseUsing();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(history.length==0) return num+10*(14-card.number);\n\t\t\t\t\t\t\t\tvar num=get.number(history[0].card);\n\t\t\t\t\t\t\t\tif(!num) return;\n\t\t\t\t\t\t\t\tfor(var i=1;i<history.length;i++){\n\t\t\t\t\t\t\t\t\tvar num2=get.number(history[i].card);\n\t\t\t\t\t\t\t\t\tif(!num2||num2<=num) return;\n\t\t\t\t\t\t\t\t\tnum=num2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(card.number>num) return num+10*(14-card.number);\n\t\t\t\t\t\t\t},},filter: function (event,player){\n\t\t\t\t\t\t\tvar history=player.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\t\treturn evt.isPhaseUsing();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(history.length<2) return false;\n\t\t\t\t\t\t\tvar num=get.number(history[0].card);\n\t\t\t\t\t\t\tif(!num) return false;\n\t\t\t\t\t\t\tfor(var i=1;i<history.length;i++){\n\t\t\t\t\t\t\t\tvar num2=get.number(history[i].card);\n\t\t\t\t\t\t\t\tif(!num2||num2<=num) return false;\n\t\t\t\t\t\t\t\tnum=num2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},dijian: {mark: \"true\",marktext: \"减\",intro: {content: \"单调递减\",},init: function (player){\n\t\t\t\t\t\t\tplayer.storage.guanchao=0;\n\t\t\t\t\t\t},onremove: function (player){\n\t\t\t\t\t\t\tdelete player.storage.guanchao;\n\t\t\t\t\t\t},trigger: {player: \"useCard\",},audio: \"xinfu_guanchao\",forced: \"true\",mod: {aiOrder: function (player,card,num){\n\t\t\t\t\t\t\t\tif(typeof card.number!='number') return;\n\t\t\t\t\t\t\t\tvar history=player.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\t\t\treturn evt.isPhaseUsing();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(history.length==0) return num+10*card.number;\n\t\t\t\t\t\t\t\tvar num=get.number(history[0].card);\n\t\t\t\t\t\t\t\tif(!num) return;\n\t\t\t\t\t\t\t\tfor(var i=1;i<history.length;i++){\n\t\t\t\t\t\t\t\t\tvar num2=get.number(history[i].card);\n\t\t\t\t\t\t\t\t\tif(!num2||num2>=num) return;\n\t\t\t\t\t\t\t\t\tnum=num2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(card.number<num) return num+10*card.number;\n\t\t\t\t\t\t\t},},filter: function (event,player){\n\t\t\t\t\t\t\tvar history=player.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\t\treturn evt.isPhaseUsing();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(history.length<2) return false;\n\t\t\t\t\t\t\tvar num=get.number(history[0].card);\n\t\t\t\t\t\t\tif(!num) return false;\n\t\t\t\t\t\t\tfor(var i=1;i<history.length;i++){\n\t\t\t\t\t\t\t\tvar num2=get.number(history[i].card);\n\t\t\t\t\t\t\t\tif(!num2||num2>=num) return false;\n\t\t\t\t\t\t\t\tnum=num2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},},audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=['递增','递减','取消'];\n\t\t\t\t\tplayer.chooseControl(list).set('prompt',get.prompt2('xinfu_guanchao')).set('ai',function(){\n\t\t\t\t\t\treturn [0,1].randomGet();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tswitch(result.control){\n\t\t\t\t\t\tcase '递增':{\n\t\t\t\t\t\t\tplayer.logSkill('xinfu_guanchao');\n\t\t\t\t\t\t\tplayer.addTempSkill('xinfu_guanchao_dizeng','phaseUseEnd');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase '递减':{\n\t\t\t\t\t\t\tplayer.logSkill('xinfu_guanchao');\n\t\t\t\t\t\t\tplayer.addTempSkill('xinfu_guanchao_dijian','phaseUseEnd');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase '取消':{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以选择获得一项效果直到回合结束：1.当你使用牌时，若你此阶段使用过的所有牌的点数为递增，你摸一张牌；2.当你使用牌时，若你此阶段使用过的所有牌的点数为递减，你摸一张牌。"},"xinfu_xunxian":{"name":"逊贤","script":"{usable: \"1\",audio: \"2\",trigger: {player: [\"useCardAfter\",\"respond\"],},filter: function (event,player){\n\t\t\t\t\tif(get.itemtype(event.cards)!='cards'||player==_status.currentPhase) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].isInPile()){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xinfu_xunxian'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('h')>player.countCards('h');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att<3) return 0;\n\t\t\t\t\t\tif(target.hasJudge('lebu')){\n\t\t\t\t\t\t\tatt/=5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(target.hasSha()&&_status.event.sha){\n\t\t\t\t\t\t\tatt/=5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(_status.event.wuxie&&target.needsToDiscard(1)){\n\t\t\t\t\t\t\tatt/=5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att/(1+get.distance(player,target,'absolute'));\n\t\t\t\t\t}).set('sha',trigger.cards[0].name=='sha').set('wuxie',trigger.cards[0].name=='wuxie');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\t\tif(trigger.cards[i].isInPile()){\n\t\t\t\t\t\t\t\tlist.push(trigger.cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('xinfu_xunxian',result.targets[0]);\n\t\t\t\t\t\tresult.targets[0].gain(list,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"每名其他角色的回合限一次，当你使用或打出的牌结算完成后，你可以将其对应的所有实体牌交给一名手牌数大于你的角色。"},"xinfu_kannan":{"name":"戡难","script":"{audio: \"true\",subSkill: {phase: {sub: \"true\",},},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('xinfu_kannan_phase')) return false;\n\t\t\t\t\tif(player.getStat().skill.xinfu_kannan>=player.hp) return false;\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hasSkill('xinfu_kannan_phase')) return false;\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.4;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hasCard(function(card){\n\t\t\t\t\t\t\t\tif(get.position(card)!=\"h\") return false;\n\t\t\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\t\t\tif(val<0) return true;\n\t\t\t\t\t\t\t\tif(val<=5){\n\t\t\t\t\t\t\t\t\treturn card.number>=12;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(val<=6){\n\t\t\t\t\t\t\t\t\treturn card.number>=13;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t})) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('xinfu_kannan_phase');\n\t\t\t\t\t\tif(!player.hasSkill('kannan_eff')){\n\t\t\t\t\t\t\tplayer.addSkill('kannan_eff');\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(!player.storage.kannan_eff) player.storage.kannan_eff=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.kannan_eff++;\n\t\t\t\t\t\tplayer.markSkill('kannan_eff');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.addTempSkill('xinfu_kannan_phase');\n\t\t\t\t\t\tif(!target.hasSkill('kannan_eff')){\n\t\t\t\t\t\t\ttarget.addSkill('kannan_eff');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(!target.storage.kannan_eff) player.storage.kannan_eff=0;\n\t\t\t\t\t\t\t//target.storage.kannan_eff++;\n\t\t\t\t\t\t\t//target.markSkill('kannan_eff');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.storage.kannan_eff++;\n\t\t\t\t\t\ttarget.markSkill('kannan_eff');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段限X次，你可以与一名本回合内未成为过〖戡难〗目标的角色拼点。若你赢，你使用的下一张【杀】的伤害值基数+1，且你本回合内不能再发动〖戡难〗。若你没赢，其使用的下一张【杀】的伤害值基数+1。（X为你的体力值）。"},"xinfu_tushe":{"name":"图射","script":"{audio: \"2\",trigger: {player: \"useCardToPlayered\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(get.type(event.card)=='equip') return false;\n\t\t\t\t\tif(event.getParent().triggeredTargets3.length>1) return false;\n\t\t\t\t\treturn event.targets.length>0&&!player.countCards('h',{type:'basic',});\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(trigger.targets.length);\n\t\t\t\t},ai: {presha: \"true\",pretao: \"true\",threaten: \"1.8\",},}","info":"当你使用非装备牌指定目标后，若你没有基本牌，则你可以摸X张牌。（X为此牌指定的目标数）"},"xinfu_limu":{"name":"立牧","script":"{mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(player.countCards('j')&&player.inRange(target)){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},cardUsableTarget: function (card,player,target){\n\t\t\t\t\t\tif(player.countCards('j')&&player.inRange(target)) return true;\n\t\t\t\t\t},aiValue: function (player,card,num){\n\t\t\t\t\t\tif(card.name=='zhangba') return 15;\n\t\t\t\t\t\tif(player.getEquip('zhangba')&&player.countCards('h')>1&&['shan','tao'].contains(card.name)) return 0;\n\t\t\t\t\t\tif(card.name=='shan'||card.name=='tao') return num/2;\n\t\t\t\t\t},},locked: \"false\",audio: \"2\",enable: \"phaseUse\",discard: \"false\",filter: function (event,player){\n\t\t\t\t\tif(player.hasJudge('lebu')) return false;\n\t\t\t\t\treturn player.countCards('he',{suit:'diamond'})>0;\n\t\t\t\t},viewAs: {name: \"lebu\",},position: \"he\",filterCard: function (card,player,event){\n\t\t\t\t\treturn get.suit(card)=='diamond'&&player.canAddJudge({name:'lebu',cards:[card]});\n\t\t\t\t},selectTarget: \"-1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player==target;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(!player.getEquip('zhangba')&&player.countCards('h','sha')<2){\n\t\t\t\t\t\tif(player.countCards('h',function(cardx){\n\t\t\t\t\t\t\treturn cardx!=card&&cardx.name=='shan';\n\t\t\t\t\t\t})>0) return 0;\n\t\t\t\t\t\tvar damaged=player.maxHp-player.hp-1;\n\t\t\t\t\t\tvar ts=player.countCards('h',function(cardx){\n\t\t\t\t\t\t\treturn cardx!=card&&cardx.name=='tao';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(ts>0&&ts>damaged) return 0;\n\t\t\t\t\t}\n\t\t\t\t\tif(card.name=='shan') return 15;\n\t\t\t\t\tif(card.name=='tao') return 10;\n\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t},onuse: function (links,player){\n\t\t\t\t\tvar next=game.createEvent('limu_recover',false,_status.event.getParent());\n\t\t\t\t\tnext.player=player;\n\t\t\t\t\tnext.setContent(function(){player.recover()});\n\t\t\t\t},ai: {result: {target: \"1\",},order: \"12\",basic: {order: \"1\",useful: \"1\",value: \"8\",},tag: {skip: \"phaseUse\",},},}","info":"出牌阶段限一次，你可以将一张♦牌当做【乐不思蜀】对自己使用，然后回复1点体力。只要你的判定区内有牌，你对攻击范围内的其他角色使用牌便没有次数和距离限制。"}},"card":{},"hero":{"wangcan":{"name":"王粲","attr":["male","qun",3,["xinfu_sanwen","xinfu_qiai","xinfu_denglou"],[]]},"sp_taishici":{"name":"SP太史慈","attr":["male","qun",4,["xinfu_jixu"],[]]},"re_jsp_pangtong":{"name":"SP庞统","attr":["male","wu",3,["xinfu_guolun","xinfu_songsang"],[]]},"lvdai":{"name":"吕岱","attr":["male","wu",4,["xinfu_qinguo"],[]]},"re_zhangliang":{"name":"张梁","attr":["male","qun",4,["xinfu_jijun","xinfu_fangtong"],[]]},"lvqian":{"name":"吕虔","attr":["male","wei",4,["xinfu_weilu","xinfu_zengdao"],[]]},"panjun":{"name":"潘濬","attr":["male","wu",3,["xinfu_guanwei","xinfu_gongqing"],[]]},"duji":{"name":"杜畿","attr":["male","wei",3,["xinfu_andong","xinfu_yingshi"],[]]},"zhoufang":{"name":"周鲂","attr":["male","wu",3,["xinfu_duanfa","xinfu_youdi"],[]]},"yanjun":{"name":"严畯","attr":["male","wu",3,["xinfu_guanchao","xinfu_xunxian"],[]]},"liuyao":{"name":"刘繇","attr":["male","qun",4,["xinfu_kannan"],[]]},"liuyan":{"name":"刘焉","attr":["male","qun",3,["xinfu_tushe","xinfu_limu"],[]]}}},"standard":{"name":"标准","skill":{"jianxiong":{"name":"奸雄","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn get.itemtype(event.cards)=='cards'&&get.position(event.cards[0],true)=='o';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(trigger.cards,'gain2');\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1];\n\t\t\t\t\t\t\tif(get.tag(card,'damage')) return [1,0.55];\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以获得对你造成伤害的牌。"},"hujia":{"name":"护驾","script":"{audio: \"2\",audioname: [\"re_caocao\"],unique: \"true\",zhuSkill: \"true\",trigger: {player: [\"chooseToRespondBefore\",\"chooseToUseBefore\"],},filter: function (event,player){\n\t\t\t\t\tif(event.responded) return false;\n\t\t\t\t\tif(player.storage.hujiaing) return false;\n\t\t\t\t\tif(!player.hasZhuSkill('hujia')) return false;\n\t\t\t\t\tif(!event.filterCard({name:'shan'},player,event)) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='wei';\n\t\t\t\t\t});\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.damageEffect(player,event.player,player)>=0) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(event.current==undefined) event.current=player.next;\n\t\t\t\t\tif(event.current==player){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.current.group=='wei'){\n\t\t\t\t\t\tif((event.current==game.me&&!_status.auto)||(\n\t\t\t\t\t\t\tget.attitude(event.current,player)>2)||\n\t\t\t\t\t\t\tevent.current.isOnline()){\n\t\t\t\t\t\t\tplayer.storage.hujiaing=true;\n\t\t\t\t\t\t\tvar next=event.current.chooseToRespond('是否替'+get.translation(player)+'打出一张闪？',{name:'shan'});\n\t\t\t\t\t\t\tnext.set('ai',function(){\n\t\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\t\treturn (get.attitude(event.player,event.source)-2);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.set('skillwarn','替'+get.translation(player)+'打出一张闪');\n\t\t\t\t\t\t\tnext.autochoose=lib.filter.autoRespondShan;\n\t\t\t\t\t\t\tnext.set('source',player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.storage.hujiaing=false;\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\ttrigger.result={bool:true,card:{name:'shan',isCard:true}};\n\t\t\t\t\t\ttrigger.responded=true;\n\t\t\t\t\t\ttrigger.animate=false;\n\t\t\t\t\t\tif(typeof event.current.ai.shown=='number'&&event.current.ai.shown<0.95){\n\t\t\t\t\t\t\tevent.current.ai.shown+=0.3;\n\t\t\t\t\t\t\tif(event.current.ai.shown>0.95) event.current.ai.shown=0.95;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.current=event.current.next;\n\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t}\n\t\t\t\t},ai: {respondShan: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.storage.hujiaing) return false;\n\t\t\t\t\t\tif(!player.hasZhuSkill('hujia')) return false;\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.group=='wei';\n\t\t\t\t\t\t});\n\t\t\t\t\t},},}","info":"主公技，当你需要使用或打出一张【闪】时，你可以令其他魏势力角色选择是否打出一张【闪】。若有角色响应，则你视为使用或打出了一张【闪】。"},"fankui":{"name":"反馈","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn (event.source&&event.source.countGainableCards(player,'he')&&event.num>0&&event.source!=player);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gainPlayerCard(get.prompt('fankui',trigger.source),trigger.source,get.buttonValue,'he').set('logSkill',['fankui',trigger.source]);\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.countCards('he')>1&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];\n\t\t\t\t\t\t\t\tif(get.attitude(target,player)<0) return [1,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以获得伤害来源的一张牌。"},"guicai":{"name":"鬼才","script":"{audio: \"2\",trigger: {global: \"judge\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards(get.mode()=='guozhan'?'he':'h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，'+get.prompt('guicai'),get.mode()=='guozhan'?'he':'h',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0||result==0) return 0;\n\t\t\t\t\t\tif(attitude>0){\n\t\t\t\t\t\t\treturn result-get.value(card)/2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -result-get.value(card)/2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.respond(result.cards,'guicai','highlight','noOrdering');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.player.judging[0].clone){\n\t\t\t\t\t\t\ttrigger.player.judging[0].clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\t\tcard.clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},trigger.player.judging[0]);\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.orderingCards.addArray(result.cards);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"1\",},},}","info":"一名角色的判定牌生效前，你可以打出一张手牌代替之。"},"ganglie":{"name":"刚烈","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn (event.source!=undefined);\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn (get.attitude(player,event.source)<=0);\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tif(get.suit(card)=='heart') return -2;\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t})\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.judge<2){\n\t\t\t\t\t\tevent.finish();return;\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.source.chooseToDiscard(2).set('ai',function(card){\n\t\t\t\t\t\tif(card.name=='tao') return -10;\n\t\t\t\t\t\tif(card.name=='jiu'&&_status.event.player.hp==1) return -10;\n\t\t\t\t\t\treturn get.unuseful(card)+2.5*(5-get.owner(card).hp);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\ttrigger.source.damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1];\n\t\t\t\t\t\t\treturn 0.8;\n\t\t\t\t\t\t\t// if(get.tag(card,'damage')&&get.damageEffect(target,player,player)>0) return [1,0,0,-1.5];\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以判定。若结果不为红桃，则伤害来源须弃置两张手牌，否则受到来自你的一点伤害。"},"tuxi":{"name":"突袭","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar check;\n\t\t\t\t\tvar i,num=game.countPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h')&&get.attitude(player,current)<=0;\n\t\t\t\t\t});\n\t\t\t\t\tcheck=(num>=2);\n\t\t\t\t\tplayer.chooseTarget(get.prompt('tuxi'),'获得其他一至两名角色的各一张手牌',[1,2],function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')>0&&player!=target;\n\t\t\t\t\t},function(target){\n\t\t\t\t\t\tif(!_status.event.aicheck) return 0;\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.hasSkill('tuntian')) return att/10;\n\t\t\t\t\t\treturn 1-att;\n\t\t\t\t\t}).set('aicheck',check);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('tuxi',result.targets);\n\t\t\t\t\t\tplayer.gainMultiple(result.targets);\n\t\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {threaten: \"2\",expose: \"0.3\",},}","info":"摸牌阶段，你可以改为获得至多两名其他角色的各一张手牌。"},"luoyi":{"name":"裸衣","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin2\",},check: function (event,player){\n\t\t\t\t\tif(player.countCards('h')<3) return false;\n\t\t\t\t\tif(!player.hasSha()) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(player,current)<0&&player.canUse('sha',current);\n\t\t\t\t\t});\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed&&event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('luoyi2','phaseJieshuBegin');\n\t\t\t\t\ttrigger.num--;\n\t\t\t\t},}","info":"摸牌阶段，你可以少摸一张牌。若如此做，当你本回合内使用【杀】或【决斗】造成伤害时，此伤害+1。"},"tiandu":{"name":"天妒","script":"{audio: \"2\",audioname: [\"re_guojia\",\"xizhicai\",\"gz_nagisa\"],trigger: {player: \"judgeEnd\",},frequent: function (event){\n\t\t\t\t\tif(event.result.card.name=='du') return false;\n\t\t\t\t\t//if(get.mode()=='guozhan') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},check: function (event){\n\t\t\t\t\tif(event.result.card.name=='du') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn get.position(event.result.card,true)=='o';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(trigger.result.card,'gain2');\n\t\t\t\t},}","info":"当你的判定牌生效后，你可以获得之。"},"yiji":{"name":"遗计","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},frequent: \"true\",filter: function (event){\n\t\t\t\t\treturn (event.num>0)\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tevent.cards=get.cards(2);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.cards.length>1){\n\t\t\t\t\t\tplayer.chooseCardButton('将“遗计”牌分配给任意角色',true,event.cards,[1,event.cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\tif(ui.selected.buttons.length==0) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.cards.length==1){\n\t\t\t\t\t\tevent._result={links:event.cards.slice(0),bool:true};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(5);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.togive=result.links.slice(0);\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(result.links)+'交给一名角色',true).set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.enemy){\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(att>0){\n\t\t\t\t\t\t\t\treturn att/(1+target.countCards('h'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn att/100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).set('enemy',get.value(event.togive[0],player,'raw')<0);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.targets.length){\n\t\t\t\t\t\tresult.targets[0].gain(event.togive,'draw');\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tgame.log(result.targets[0],'获得了'+get.cnNumber(event.togive.length)+'张牌');\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tif(event.count>0) player.chooseBool(get.prompt2(event.name)).set('frequentSkill',event.name);\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\tif(player.needsToDiscard()){\n\t\t\t\t\t\t\t\t\t\tnum=0.7;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tnum=0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,num*2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,num*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,num*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到一点伤害后，你可以观看牌堆顶的两张牌，然后将其分配给任意角色。"},"luoshen":{"name":"洛神","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(event.cards==undefined) event.cards=[];\n\t\t\t\t\tvar next=player.judge(function(card){\n\t\t\t\t\t\tif(get.color(card)=='black') return 1.5;\n\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t});\n\t\t\t\t\tif(get.mode()!='guozhan'&&!player.hasSkillTag('rejudge')) next.set('callback',function(){\n\t\t\t\t\t\tif(event.judgeResult.color=='black'&&get.position(card,true)=='o') player.gain(card,'gain2');\n\t\t\t\t\t});\n\t\t\t\t\telse next.set('callback',function(){\n\t\t\t\t\t\tif(event.judgeResult.color=='black') event.getParent().orderingCards.remove(card);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.judge>0){\n\t\t\t\t\t\tevent.cards.push(result.card);\n\t\t\t\t\t\tplayer.chooseBool('是否再次发动【洛神】？').set('frequentSkill','luoshen');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.position(event.cards[i],true)!='o'){\n\t\t\t\t\t\t\t\tevent.cards.splice(i,1);i--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.gain(event.cards,'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.gain(event.cards,'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段，你可以判定。若结果为黑色，你获得判定牌。你可重复此流程，直到出现红色的判定结果。"},"qingguo":{"name":"倾国","script":"{audio: \"2\",enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},viewAs: {name: \"shan\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('h',{color:'black'})) return false;\n\t\t\t\t},prompt: \"将一张黑色手牌当闪使用或打出\",check: function (){return 1},ai: {respondShan: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('h',{color:'black'})) return false;\n\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&current<0) return 0.6\n\t\t\t\t\t\t},},order: \"3\",basic: {useful: [7,2],value: [7,2],},result: {player: \"1\",},},}","info":"你可以将一张黑色手牌当做【闪】使用或打出。"},"rende":{"name":"仁德","script":"{audio: \"2\",enable: \"phaseUse\",filterCard: \"true\",selectCard: [1,null],discard: \"false\",lose: \"false\",delay: \"0\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length>1) return 0;\n\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du') return 0;\n\t\t\t\t\tif(!ui.selected.cards.length&&card.name=='du') return 20;\n\t\t\t\t\tvar player=get.owner(card);\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar evt2=_status.event.getParent();\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.getParent().skill=='rende'&&evt.getParent(3)==evt2) num+=evt.cards.length;\n\t\t\t\t\t});\n\t\t\t\t\tif(player.hp==player.maxHp||num>1||player.countCards('h')<=1){\n\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(players[i].hasSkill('haoshi')&&\n\t\t\t\t\t\t\t\t!players[i].isTurnedOver()&&\n\t\t\t\t\t\t\t\t!players[i].hasJudge('lebu')&&\n\t\t\t\t\t\t\t\tget.attitude(player,players[i])>=3&&\n\t\t\t\t\t\t\t\tget.attitude(players[i],player)>=3){\n\t\t\t\t\t\t\t\treturn 11-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.countCards('h')>player.hp) return 10-get.value(card);\n\t\t\t\t\t\tif(player.countCards('h')>2) return 6-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\tvar evt2=event.getParent(3);\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.getParent(2).name=='rende'&&evt.getParent(5)==evt2) num+=evt.cards.length;\n\t\t\t\t\t});\n\t\t\t\t\tif(num<2&&num+cards.length>1) player.recover();\n\t\t\t\t},ai: {order: function (skill,player){\n\t\t\t\t\t\tif(player.hp<player.maxHp&&player.storage.rende<2&&player.countCards('h')>1){\n\t\t\t\t\t\t\treturn 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0;\n\t\t\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0;\n\t\t\t\t\t\t\t\treturn -10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')) return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tvar np=player.countCards('h');\n\t\t\t\t\t\t\tif(player.hp==player.maxHp||player.storage.rende<0||player.countCards('h')<=1){\n\t\t\t\t\t\t\t\tif(nh>=np-1&&np<=player.hp&&!target.hasSkill('haoshi')) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn Math.max(1,5-nh);\n\t\t\t\t\t\t},},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player==target&&get.type(card)=='equip'){\n\t\t\t\t\t\t\t\tif(player.countCards('e',{subtype:get.subtype(card)})){\n\t\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(players[i]!=player&&get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"0.8\",},}","info":"出牌阶段，你可以将任意张手牌交给其他角色。当你以此法于一回合内给出第二张牌时，你回复1点体力。"},"jijiang":{"name":"激将","script":"{audio: \"jijiang1\",audioname: [\"liushan\",\"re_liubei\",\"re_liushan\",\"ol_liushan\"],unique: \"true\",group: [\"jijiang1\"],zhuSkill: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('jijiang')||!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='shu';\n\t\t\t\t\t})) return false;\n\t\t\t\t\treturn !event.jijiang&&(event.type!='phase'||!player.hasSkill('jijiang3'));\n\t\t\t\t},enable: [\"chooseToUse\",\"chooseToRespond\"],viewAs: {name: \"sha\",},filterCard: function (){return false},selectCard: \"-1\",ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.3;\n\t\t\t\t\t},respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.hasZhuSkill('jijiang')||!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.group=='shu';\n\t\t\t\t\t\t})) return false;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"主公技，当你需要使用或打出【杀】时，你可以令其他蜀势力角色依次选择是否打出一张【杀】。若有角色响应，则你视为使用或打出了此【杀】。"},"wusheng":{"name":"武圣","script":"{audio: \"2\",audioname2: {old_guanzhang: \"old_fuhun\",},audioname: [\"re_guanyu\",\"guanzhang\",\"jsp_guanyu\",\"guansuo\"],enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: function (card,player){\n\t\t\t\t\tif(get.zhu(player,'shouyue')) return true;\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},position: \"he\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\tif(get.zhu(player,'shouyue')){\n\t\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t\t}\n\t\t\t\t},prompt: \"将一张红色牌当杀使用或打出\",check: function (card){return 4-get.value(card)},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(get.zhu(player,'shouyue')){\n\t\t\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},respondSha: \"true\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"你可以将一张红色牌当做【杀】使用或打出。"},"paoxiao":{"name":"咆哮","script":"{audio: \"2\",firstDo: \"true\",audioname2: {old_guanzhang: \"old_fuhun\",},audioname: [\"re_zhangfei\",\"guanzhang\",\"xiahouba\"],trigger: {player: \"useCard1\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.audioed=true;\n\t\t\t\t},mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha') return Infinity;\n\t\t\t\t\t},},ai: {unequip: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!get.zhu(player,'shouyue')) return false;\n\t\t\t\t\t\tif(arg&&arg.name=='sha') return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技，出牌阶段，你使用【杀】没有数量限制。"},"guanxing":{"name":"观星","script":"{audio: \"2\",audioname: [\"jiangwei\",\"re_jiangwei\",\"re_zhugeliang\"],trigger: {player: \"phaseZhunbeiBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.swapPlayerAuto(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar num=Math.min(5,game.countPlayer());\n\t\t\t\t\tif(player.hasSkill('yizhi')&&player.hasSkill('guanxing')){\n\t\t\t\t\t\tnum=5;\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=get.cards(num);\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t\tvar top=[];\n\t\t\t\t\t\tvar judges=player.getCards('j');\n\t\t\t\t\t\tvar stopped=false;\n\t\t\t\t\t\tif(!player.hasWuxie()){\n\t\t\t\t\t\t\tfor(var i=0;i<judges.length;i++){\n\t\t\t\t\t\t\t\tvar judge=get.judge(judges[i]);\n\t\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\t\treturn judge(b)-judge(a);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(judge(cards[0])<0){\n\t\t\t\t\t\t\t\t\tstopped=true;break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar bottom;\n\t\t\t\t\t\tif(!stopped){\n\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.value(b,player)-get.value(a,player);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\t\tif(get.value(cards[0],player)<=5) break;\n\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom=cards;\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(bottom.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(online,player,cards){\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tplayer=player||event.player;\n\t\t\t\t\t\tcards=cards||event.cards;\n\t\t\t\t\t\tevent.top=[];\n\t\t\t\t\t\tevent.bottom=[];\n\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('按顺序选择置于牌堆顶的牌（先选择的在上）',cards);\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('pointerdiv');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result='ai';\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevent.control=ui.create.control('ok','pileTop','pileBottom',function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link=='ok'){\n\t\t\t\t\t\t\t\tif(online){\n\t\t\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\t\t\ttop:[],\n\t\t\t\t\t\t\t\t\t\tbottom:[]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.top.push(event.top[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.bottom.push(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tvar i;\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.insertBefore(event.top[i].link,ui.cardPile.firstChild);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(event.dialog.buttons[i].classList.contains('glow')==false&&\n\t\t\t\t\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.contains('target')==false)\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.dialog.buttons[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplayer.popup(get.cnNumber(event.top.length)+'上'+get.cnNumber(event.cards.length-event.top.length)+'下');\n\t\t\t\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(event.top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link=='pileTop'){\n\t\t\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆顶的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.status=false;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆底的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('selectable');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.button=function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link.classList.contains('target')){\n\t\t\t\t\t\t\t\tlink.classList.remove('target');\n\t\t\t\t\t\t\t\tevent.top.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link.classList.contains('glow')){\n\t\t\t\t\t\t\t\tlink.classList.remove('glow');\n\t\t\t\t\t\t\t\tevent.bottom.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(event.status){\n\t\t\t\t\t\t\t\tlink.classList.add('target');\n\t\t\t\t\t\t\t\tevent.top.unshift(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlink.classList.add('glow');\n\t\t\t\t\t\t\t\tevent.bottom.push(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.window=function(){\n\t\t\t\t\t\t\tfor(var i=0;i<_status.event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('target');\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('glow');\n\t\t\t\t\t\t\t\t_status.event.top.length=0;\n\t\t\t\t\t\t\t\t_status.event.bottom.length=0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t};\n\t\t\t\t\tevent.switchToAuto=switchToAuto;\n\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,true,event.player,event.cards);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.result=='ai'||!event.result){\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar top=event.result.top||[];\n\t\t\t\t\t\tvar bottom=event.result.bottom||[];\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(!top.contains(event.cards[i])&&!bottom.contains(event.cards[i])){\n\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(event.cards.length-top.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"准备阶段，你可以观看牌堆顶的X张牌，并将其以任意顺序置于牌堆项或牌堆底。（X为存活角色数且至多为5）"},"kongcheng":{"name":"空城","script":"{mod: {targetEnabled: function (card,player,target,now){\n\t\t\t\t\t\tif(target.countCards('h')==0){\n\t\t\t\t\t\t\tif(card.name=='sha'||card.name=='juedou') return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"kongcheng1\",audio: \"kongcheng1\",audioname: [\"re_zhugeliang\"],ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\tif(player.countCards('h')!=1) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，当你没有手牌时，你不能成为【杀】或【决斗】的目标。"},"longdan":{"name":"龙胆","script":"{audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],group: [\"longdan_sha\",\"longdan_shan\",\"longdan_draw\"],subSkill: {draw: {trigger: {player: [\"useCard\",\"respond\"],},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!get.zhu(player,'shouyue')) return false;\n\t\t\t\t\t\t\treturn event.skill=='longdan_sha'||event.skill=='longdan_shan';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tplayer.storage.fanghun2++;\n\t\t\t\t\t\t},sub: \"true\",},sha: {audio: \"2\",audioname: [\"re_zhaoyun\"],enable: [\"chooseToUse\",\"chooseToRespond\"],filterCard: {name: \"shan\",},viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\t},prompt: \"将一张闪当杀使用或打出\",check: function (){return 1},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondSha')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\t\t},order: function (){\n\t\t\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t\t\t},useful: \"-1\",value: \"-1\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},sub: \"true\",},shan: {audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: {name: \"sha\",},viewAs: {name: \"shan\",},prompt: \"将一张杀当闪使用或打出\",check: function (){return 1},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return false;\n\t\t\t\t\t\t},ai: {respondShan: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return false;\n\t\t\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},order: \"4\",useful: \"-1\",value: \"-1\",basic: {useful: [7,2],value: [7,2],},result: {player: \"1\",},},sub: \"true\",},},}","info":"你可以将【杀】当做【闪】，或将【闪】当做【杀】使用或打出。"},"mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-1。"},"tieji":{"name":"铁骑","script":"{audio: \"2\",shaRelated: \"true\",trigger: {player: \"useCardToPlayered\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tif(get.zhu(_status.event.player,'shouyue')){\n\t\t\t\t\t\t\tif(get.suit(card)!='spade') return 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(get.color(card)=='red') return 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(get.attitude(player,arg.target)>0||arg.card.name!='sha'||!ui.cardPile.firstChild||get.color(ui.cardPile.firstChild,player)!='red') return false;\n\t\t\t\t\t},},}","info":"当你使用【杀】指定目标后，你可以进行判定。若结果为红色，则此【杀】不可被闪避。"},"jizhi":{"name":"集智","script":"{audio: \"2\",audioname: [\"jianyong\"],trigger: {player: \"useCard\",},frequent: \"true\",filter: function (event){\n\t\t\t\t\treturn (get.type(event.card)=='trick'&&event.card.isCard);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {threaten: \"1.4\",noautowuxie: \"true\",},}","info":"当你使用非转化的普通锦囊牌时，你可以摸一张牌。"},"qicai":{"name":"奇才","script":"{mod: {targetInRange: function (card,player,target,now){\n\t\t\t\t\t\tvar type=get.type(card);\n\t\t\t\t\t\tif(type=='trick'||type=='delay') return true;\n\t\t\t\t\t},},}","info":"锁定技，你使用锦囊牌无距离限制。"},"zhiheng":{"name":"制衡","script":"{audio: \"2\",audioname: [\"gz_jun_sunquan\"],enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: \"true\",selectCard: [1,null],prompt: \"弃置任意张牌并摸等量的牌\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(cards.length);\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},threaten: \"1.5\",},}","info":"出牌阶段一次，你可以弃置任意张牌，然后摸等量的牌。"},"jiuyuan":{"name":"救援","script":"{audio: \"2\",unique: \"true\",trigger: {target: \"taoBegin\",},zhuSkill: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(!player.hasZhuSkill('jiuyuan')) return false;\n\t\t\t\t\tif(event.player.group!='wu') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.baseDamage++;\n\t\t\t\t},}","info":"主公技，锁定技，其他吴势力角色对你使用的【桃】的回复值+1。"},"qixi":{"name":"奇袭","script":"{audio: \"2\",audioname: [\"re_ganning\",\"re_heqi\"],enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},position: \"he\",viewAs: {name: \"guohe\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t},prompt: \"将一张黑色牌当过河拆桥使用\",check: function (card){return 4-get.value(card)},ai: {basic: {order: \"9\",useful: \"1\",value: \"5\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tvar js=target.getCards('j');\n\t\t\t\t\t\t\t\tif(js.length){\n\t\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\n\t\t\t\t\t\t\t\t\tif(jj.name=='guohe'||js.length>1||get.effect(target,jj,target,player)<0){\n\t\t\t\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\n\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\n\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\n\t\t\t\t\t\t\t\t\tif(target.hp==2) return 0.01;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\n\t\t\t\t\t\t\tvar noe2=(es.filter(function(esx){\n\t\t\t\t\t\t\t\treturn get.value(esx,target)>0;\n\t\t\t\t\t\t\t}).length==0);\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\n\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\n\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {loseCard: \"1\",discard: \"1\",},},}","info":"你可以将一张黑色牌当做【过河拆桥】使用。"},"keji":{"name":"克己","script":"{audio: \"2\",audioname: [\"re_lvmeng\",\"sp_lvmeng\"],trigger: {player: \"phaseDiscardBefore\",},frequent: function (event,player){\n\t\t\t\t\treturn player.needsToDiscard();\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.getHistory('skipped').contains('phaseUse')) return true;\n\t\t\t\t\tvar history=player.getHistory('useCard').concat(player.getHistory('respond'));\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tif(history[i].card.name=='sha'&&history[i].isPhaseUsing()) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},}","info":"弃牌阶段开始时，若你于本回合的出牌阶段内没有过使用或打出过【杀】，则你可以跳过此阶段。"},"kurou":{"name":"苦肉","script":"{audio: \"2\",enable: \"phaseUse\",prompt: \"失去一点体力并摸两张牌\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.loseHp(1);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {basic: {order: \"1\",},result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('h')>=player.hp-1) return -1;\n\t\t\t\t\t\t\tif(player.hp<3) return -1;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以失去一点体力，然后摸两张牌。"},"yingzi":{"name":"英姿","script":"{audio: \"2\",audioname: [\"sp_lvmeng\"],trigger: {player: \"phaseDrawBegin2\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},ai: {threaten: \"1.3\",},}","info":"摸牌阶段，你可以多摸一张牌。"},"fanjian":{"name":"反间","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.chooseControl('heart2','diamond2','club2','spade2').set('ai',function(event){\n\t\t\t\t\t\tswitch(Math.floor(Math.random()*6)){\n\t\t\t\t\t\t\tcase 0:return 'heart2';\n\t\t\t\t\t\t\tcase 1:case 4:case 5:return 'diamond2';\n\t\t\t\t\t\t\tcase 2:return 'club2';\n\t\t\t\t\t\t\tcase 3:return 'spade2';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tgame.log(target,'选择了'+get.translation(result.control));\n\t\t\t\t\tevent.choice=result.control;\n\t\t\t\t\ttarget.popup(event.choice);\n\t\t\t\t\tevent.card=player.getCards('h').randomGet();\n\t\t\t\t\ttarget.gain(event.card,player,'give');\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(get.suit(event.card)+'2'!=event.choice) target.damage('nocard');\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,player);\n\t\t\t\t\t\t\tif(eff>=0) return 1+eff;\n\t\t\t\t\t\t\tvar value=0,i;\n\t\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\t\tfor(i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\tvalue+=get.value(cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue/=player.countCards('h');\n\t\t\t\t\t\t\tif(target.hp==1) return Math.min(0,value-7);\n\t\t\t\t\t\t\treturn Math.min(0,value-5);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以令一名角色选择一种花色并展示你的一张手牌，若选择的花色与展示的不同，该角色受到来自你的一点伤害。然后该角色获得展示的牌。"},"guose":{"name":"国色","script":"{audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'diamond'})>0;\n\t\t\t\t},enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.suit(card)=='diamond';\n\t\t\t\t},position: \"he\",viewAs: {name: \"lebu\",},prompt: \"将一张方片牌当乐不思蜀使用\",check: function (card){return 6-get.value(card)},ai: {threaten: \"1.5\",basic: {order: \"1\",useful: \"1\",value: \"8\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar num=target.hp-target.countCards('h')-2;\n\t\t\t\t\t\t\tif(num>-1) return -0.01;\n\t\t\t\t\t\t\tif(target.hp<3) num--;\n\t\t\t\t\t\t\tif(target.isTurnedOver()) num/=2;\n\t\t\t\t\t\t\tvar dist=get.distance(player,target,'absolute');\n\t\t\t\t\t\t\tif(dist<1) dist=1;\n\t\t\t\t\t\t\treturn num/Math.sqrt(dist);\n\t\t\t\t\t\t},},tag: {skip: \"phaseUse\",},},}","info":"你可以将一张方片手牌当做【乐不思蜀】使用。"},"liuli":{"name":"流离","script":"{audio: \"2\",audioname: [\"re_daqiao\",\"daxiaoqiao\"],trigger: {target: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(player.countCards('he')==0) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.inRange(current)&&current!=event.player&&\n\t\t\t\t\t\t\tcurrent!=player&&lib.filter.targetEnabled(event.card,event.player,current);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\tvar trigger=_status.event;\n\t\t\t\t\t\t\tif(player.inRange(target)&&target!=trigger.source){\n\t\t\t\t\t\t\t\tif(lib.filter.targetEnabled(trigger.card,trigger.source,target)) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tif(_status.event.player.countCards('h','shan')){\n\t\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.attitude(_status.event.player,target)<5){\n\t\t\t\t\t\t\t\treturn 6-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==1&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\t\treturn 10-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==2&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\t\treturn 8-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('liuli'),\n\t\t\t\t\t\tprompt2:'弃置一张牌，将此【杀】转移给攻击范围内的一名其他角色',\n\t\t\t\t\t\tsource:trigger.player,\n\t\t\t\t\t\tcard:trigger.card,\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill(event.name,target);\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tvar evt=trigger.getParent();\n\t\t\t\t\t\tevt.triggeredTargets2.remove(player);\n\t\t\t\t\t\tevt.targets.remove(player);\n\t\t\t\t\t\tevt.targets.push(target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(target.countCards('he')==0) return;\n\t\t\t\t\t\t\tif(card.name!='sha') return;\n\t\t\t\t\t\t\tvar min=1;\n\t\t\t\t\t\t\tvar friend=get.attitude(player,target)>0;\n\t\t\t\t\t\t\tvar vcard={name:'shacopy',nature:card.nature,suit:card.suit};\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(player!=players[i]&&\n\t\t\t\t\t\t\t\t\tget.attitude(target,players[i])<0&&\n\t\t\t\t\t\t\t\t\ttarget.canUse(card,players[i])){\n\t\t\t\t\t\t\t\t\tif(!friend) return 0;\n\t\t\t\t\t\t\t\t\tif(get.effect(players[i],vcard,player,player)>0){\n\t\t\t\t\t\t\t\t\t\tif(!player.canUse(card,players[0])){\n\t\t\t\t\t\t\t\t\t\t\treturn [0,0.1];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tmin=0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn min;\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标时，你可以弃置一张牌并将此【杀】转移给攻击范围内的一名其他角色（不能是此【杀】的使用者）。"},"qianxun":{"name":"谦逊","script":"{mod: {targetEnabled: function (card,player,target,now){\n\t\t\t\t\t\tif(card.name=='shunshou'||card.name=='lebu') return false;\n\t\t\t\t\t},},audio: \"2\",}","info":"锁定技，你不能成为【顺手牵羊】和【乐不思蜀】的目标。"},"lianying":{"name":"连营","script":"{audio: \"2\",trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.player==player&&evt.hs&&evt.hs.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {threaten: \"0.8\",effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='guohe'||card.name=='liuxinghuoyu') return 0.5;\n\t\t\t\t\t\t},},noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\tif(player.countCards('h')!=1) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"当你失去最后的手牌时，你可以摸一张牌。"},"xiaoji":{"name":"枭姬","script":"{audio: \"2\",audioname: [\"sp_sunshangxiang\",\"re_sunshangxiang\"],trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.player==player&&evt.es&&evt.es.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.getl(player).es.length;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.count>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('xiaoji')).set('frequentSkill','xiaoji').ai=lib.filter.all;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xiaoji');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {noe: \"true\",reverseEquip: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},},}","info":"当你失去一张装备区内的牌后，你可以摸两张牌。"},"jieyin":{"name":"结姻","script":"{audio: \"2\",enable: \"phaseUse\",filterCard: \"true\",usable: \"1\",selectCard: \"2\",check: function (card){\n\t\t\t\t\tvar player=get.owner(card);\n\t\t\t\t\tif(player.countCards('h')>player.hp)\n\t\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t\tif(player.hp<player.maxHp)\n\t\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t\treturn 4-get.value(card)\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.sex!='male') return false;\n\t\t\t\t\tif(target.hp>=target.maxHp) return false;\n\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},ai: {order: \"5.5\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<player.maxHp) return 4;\n\t\t\t\t\t\t\tif(player.countCards('h')>player.hp) return 0\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},target: \"4\",},threaten: \"2\",},}","info":"出牌阶段限一次，你可以弃置两张手牌并选择一名已经受伤的男性角色。你与其各回复一点体力。"},"qingnang":{"name":"青囊","script":"{audio: \"2\",enable: \"phaseUse\",filterCard: \"true\",usable: \"1\",check: function (card){\n\t\t\t\t\treturn 9-get.value(card)\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hp>=target.maxHp) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp==1) return 5;\n\t\t\t\t\t\t\tif(player==target&&player.countCards('h')>player.hp) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},},threaten: \"2\",},}","info":"出牌阶段限一次，你可以弃置一张手牌并令一名角色回复一点体力。"},"jijiu":{"name":"急救","script":"{audio: \"2\",audioname: [\"re_huatuo\"],enable: \"chooseToUse\",viewAsFilter: function (player){\n\t\t\t\t\treturn player!=_status.currentPhase&&player.countCards('he',{color:'red'})>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},position: \"he\",viewAs: {name: \"tao\",},prompt: \"将一张红色牌当桃使用\",check: function (card){return 15-get.value(card)},ai: {threaten: \"1.5\",basic: {order: function (card,player){\n\t\t\t\t\t\t\tif(player.hasSkillTag('pretao')) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},useful: [8,6.5,5,4],value: [8,6.5,5,4],},result: {target: \"2\",target_use: function (player,target){\n\t\t\t\t\t\t\t// if(player==target&&player.hp<=0) return 2;\n\t\t\t\t\t\t\tif(player.hasSkillTag('nokeep',true,null,true)) return 2;\n\t\t\t\t\t\t\tvar nd=player.needsToDiscard();\n\t\t\t\t\t\t\tvar keep=false;\n\t\t\t\t\t\t\tif(nd<=0){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nd==1&&target.hp>=2&&target.countCards('h','tao')<=1){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\t\t\tif(target.hp>=2&&keep&&target.hasFriend()){\n\t\t\t\t\t\t\t\tif(target.hp>2||nd==0) return 0;\n\t\t\t\t\t\t\t\tif(target.hp==2){\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(target!=current&&get.attitude(target,current)>=3){\n\t\t\t\t\t\t\t\t\t\t\tif(current.hp<=1) return true;\n\t\t\t\t\t\t\t\t\t\t\tif((mode=='identity'||mode=='versus'||mode=='chess')&&current.identity=='zhu'&&current.hp<=2) return true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<0&&target!=player&&target.identity!='zhu') return 0;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att<3&&att>=0&&player!=target) return 0;\n\t\t\t\t\t\t\tvar tri=_status.event.getTrigger();\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='fan'&&target.identity=='fan'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='fan'&&tri.source!=target){\n\t\t\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(current.identity=='fan'){\n\t\t\t\t\t\t\t\t\t\t\treturn current.countCards('h','tao');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif(num>1&&player==target) return 2;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='zhu'&&target.identity=='nei'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='zhong'){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='stone'&&target.isMin()&&\n\t\t\t\t\t\t\tplayer!=target&&tri&&tri.name=='dying'&&player.side==target.side&&\n\t\t\t\t\t\t\ttri.source!=target.getEnemy()){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},},tag: {recover: \"1\",save: \"1\",},},}","info":"你的回合外，你可以将一张红色牌当做【桃】使用。"},"wushuang":{"name":"无双","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"re_lvbu\",\"shen_lvbu\"],forced: \"true\",locked: \"true\",group: [\"wushuang1\",\"wushuang2\"],}","info":"锁定技，当你使用【杀】或【决斗】指定目标后，你令此牌需要依次使用或打出两张【闪】或【杀】响应。"},"lijian":{"name":"离间","script":"{audio: \"2\",audioname: [\"re_diaochan\"],enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.sex=='male';\n\t\t\t\t\t})>1;\n\t\t\t\t},check: function (card){return 10-get.value(card)},filterCard: \"true\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(target.sex!='male') return false;\n\t\t\t\t\tif(ui.selected.targets.length==1){\n\t\t\t\t\t\treturn target.canUse({name:'juedou'},ui.selected.targets[0]);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},targetprompt: [\"先出杀\",\"后出杀\"],selectTarget: \"2\",multitarget: \"true\",content: function (){\n\t\t\t\t\ttargets[1].useCard({name:'juedou',isCard:true},'nowuxie',targets[0],'noai').animate=false;\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\t\treturn -3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'juedou'},ui.selected.targets[0],target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},expose: \"0.4\",threaten: \"3\",},}","info":"出牌阶段限一次，你可以弃置一张牌，视为一名男性角色对另一名男性角色使用一张【决斗】（不可被【无懈可击】响应）。"},"biyue":{"name":"闭月","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"结束阶段，你可以摸一张牌。"},"yaowu":{"name":"耀武","script":"{trigger: {player: \"damageBegin3\",},audio: \"2\",filter: function (event){\n\t\t\t\t\tif(event.card&&(event.card.name=='sha')){\n\t\t\t\t\t\tif(get.color(event.card)=='red') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.source.chooseDrawRecover(true);\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&(get.color(card)=='red')){\n\t\t\t\t\t\t\t\treturn [1,-2];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，一名角色使用红色【杀】对你造成伤害时，该角色回复1点体力或摸一张牌。"},"reyicong":{"name":"义从","script":"{trigger: {player: [\"changeHp\"],},audio: \"2\",audioname: {gongsunzan: \"yicong\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.sgn(player.hp-2.5)!=get.sgn(player.hp-2.5-event.num);\n\t\t\t\t},content: function (){},mod: {globalFrom: function (from,to,current){\n\t\t\t\t\t\treturn current-1;\n\t\t\t\t\t},globalTo: function (from,to,current){\n\t\t\t\t\t\tif(to.hp<=2) return current+1;\n\t\t\t\t\t},},ai: {threaten: \"0.8\",},}","info":"锁定技，你计算与其他角色的距离时-1。若你的体力值不大于2，则其他角色计算与你的距离时+1。"},"xinfu_jijie":{"name":"机捷","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\t//event.card=ui.cardPile.lastChild;\n\t\t\t\t\tevent.card=get.bottomCards()[0];\n\t\t\t\t\tvar content=['牌堆底的一张牌',[event.card]];\n\t\t\t\t\tgame.log(player,'观看了牌堆底的一张牌');\n\t\t\t\t\tplayer.chooseControl('ok').set('dialog',content);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseTarget('选择获得此牌的角色').set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.du){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0.5;\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tif(_status.event.player!=target) att+=2;\n\t\t\t\t\t\t\t\treturn att+Math.max(0,5-target.countCards('h'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t}).set('du',event.card.name=='du').set('same',event.same);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.line(event.target,'green');\n\t\t\t\t\t\tplayer.give(event.card,event.target);\n\t\t\t\t\t}\n\t\t\t\t\telse ui.cardPile.appendChild(event.card);\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},ai: {order: \"7.2\",result: {player: \"1\",},},}","info":"出牌阶段限一次。你可以观看牌堆底的一张牌，然后将其交给一名角色。"},"xinfu_jiyuan":{"name":"急援","script":"{trigger: {global: \"dying\",source: \"gainAfter\",},audio: \"2\",filter: function (event,player){\n\t\t\t\t\tif(event.name=='dying') return true;\n\t\t\t\t\treturn event.player!=player&&event.bySelf!=true;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t},}","info":"当一名角色进入濒死状态时，或你交给一名其他角色牌时，你可以令其摸一张牌。"},"rewangzun":{"name":"妄尊","script":"{trigger: {global: \"phaseZhunbeiBegin\",},forced: \"true\",audio: \"wangzun\",filter: function (event,player){\n\t\t\t\t\treturn event.player.hp>player.hp;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tvar zhu=false;\n\t\t\t\t\tvar target=trigger.player;\n\t\t\t\t\tswitch(get.mode()){\n\t\t\t\t\t\tcase 'identity':{\n\t\t\t\t\t\t\tzhu=target.isZhu;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'guozhan':{\n\t\t\t\t\t\t\tzhu=get.is.jun(target);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'versus':{\n\t\t\t\t\t\t\tzhu=target.identity=='zhu';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'doudizhu':{\n\t\t\t\t\t\t\tzhu=target==game.zhu;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(zhu){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\ttarget.addTempSkill('rewangzun2');\n\t\t\t\t\t\ttarget.addMark('rewangzun2',1,false);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，一名其他角色的准备阶段开始时，若其体力值大于你，你摸一张牌。然后若其身份为主公/主帅/君主/地主且明置，则你摸一张牌，且其本回合的手牌上限-1。"},"retongji":{"name":"同疾","script":"{trigger: {global: \"useCardToTarget\",},logTarget: \"target\",audio: \"tongji\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.player!=player&&!event.targets.contains(player)&&\n\t\t\t\t\tevent.target.inRange(player)&&event.target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.target.chooseCard('he','是否对'+get.translation(player)+'发动【同疾】？','弃置一张牌，将'+get.translation(trigger.card)+'转移给'+get.translation(player)).set('ai',function(card){\n\t\t\t\t\t\tif(!_status.event.check) return -1;\n\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t}).set('check',function(){\n\t\t\t\t\t\tif(trigger.target.countCards('h','shan')){\n\t\t\t\t\t\t\treturn -get.attitude(trigger.target,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.attitude(trigger.target,player)<5){\n\t\t\t\t\t\t\treturn 6-get.attitude(trigger.target,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(trigger.target.hp==1&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\treturn 10-get.attitude(trigger.target,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(trigger.target.hp==2&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\treturn 8-get.attitude(trigger.target,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}()>0);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\t\n\t\t\t\t\t\tplayer.logSkill('retongji',trigger.target);\n\t\t\t\t\t\ttrigger.target.discard(result.cards);\n\t\t\t\t\t\tvar evt=trigger.getParent();\n\t\t\t\t\t\tevt.triggeredTargets2.remove(trigger.target);\n\t\t\t\t\t\tevt.targets.remove(trigger.target);\n\t\t\t\t\t\tevt.targets.push(player);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"攻击范围内包含你的角色成为【杀】的目标时，若你不是此【杀】的使用者或目标，其可弃置一张牌，然后将此【杀】转移给你。"}},"card":{},"hero":{"caocao":{"name":"曹操","attr":["male","wei",4,["jianxiong","hujia"],["zhu"]]},"simayi":{"name":"司马懿","attr":["male","wei",3,["fankui","guicai"],[]]},"xiahoudun":{"name":"夏侯惇","attr":["male","wei",4,["ganglie"],[]]},"zhangliao":{"name":"张辽","attr":["male","wei",4,["tuxi"],[]]},"xuzhu":{"name":"许褚","attr":["male","wei",4,["luoyi"],[]]},"guojia":{"name":"郭嘉","attr":["male","wei",3,["tiandu","yiji"],[]]},"zhenji":{"name":"甄姬","attr":["female","wei",3,["luoshen","qingguo"],[]]},"liubei":{"name":"刘备","attr":["male","shu",4,["rende","jijiang"],["zhu"]]},"guanyu":{"name":"关羽","attr":["male","shu",4,["wusheng"],[]]},"zhangfei":{"name":"张飞","attr":["male","shu",4,["paoxiao"],[]]},"zhugeliang":{"name":"诸葛亮","attr":["male","shu",3,["guanxing","kongcheng"],[]]},"zhaoyun":{"name":"赵云","attr":["male","shu",4,["longdan"],[]]},"machao":{"name":"马超","attr":["male","shu",4,["mashu","tieji"],[]]},"huangyueying":{"name":"黄月英","attr":["female","shu",3,["jizhi","qicai"],[]]},"sunquan":{"name":"孙权","attr":["male","wu",4,["zhiheng","jiuyuan"],["zhu"]]},"ganning":{"name":"甘宁","attr":["male","wu",4,["qixi"],[]]},"lvmeng":{"name":"吕蒙","attr":["male","wu",4,["keji"],[]]},"huanggai":{"name":"黄盖","attr":["male","wu",4,["kurou"],[]]},"zhouyu":{"name":"周瑜","attr":["male","wu",3,["yingzi","fanjian"],[]]},"daqiao":{"name":"大乔","attr":["female","wu",3,["guose","liuli"],[]]},"luxun":{"name":"陆逊","attr":["male","wu",3,["qianxun","lianying"],[]]},"sunshangxiang":{"name":"孙尚香","attr":["female","wu",3,["xiaoji","jieyin"],[]]},"huatuo":{"name":"华佗","attr":["male","qun",3,["qingnang","jijiu"],[]]},"lvbu":{"name":"吕布","attr":["male","qun",4,["wushuang"],[]]},"diaochan":{"name":"貂蝉","attr":["female","qun",3,["lijian","biyue"],[]]},"huaxiong":{"name":"华雄","attr":["male","qun",6,["yaowu"],[]]},"gongsunzan":{"name":"公孙瓒","attr":["male","qun",4,["reyicong"],[]]},"xf_yiji":{"name":"伊籍","attr":["male","shu",3,["xinfu_jijie","xinfu_jiyuan"],[]]},"re_yuanshu":{"name":"袁术","attr":["male","qun",4,["rewangzun","retongji"],[]]}}},"gujian":{"name":"古剑奇谭","skill":{"xuelu":{"name":"血戮","script":"{unique: \"true\",trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.maxHp>player.hp&&player.countCards('he',{color:'red'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.color(card)=='red'&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player,'fire');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('xuelu')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('xuelu',event.target,'fire');\n\t\t\t\t\t\tif(get.is.altered('xuelu')){\n\t\t\t\t\t\t\tevent.num=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.num=Math.min(2,Math.ceil((player.maxHp-player.hp)/2));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.target){\n\t\t\t\t\t\tevent.target.damage(event.num,'fire');\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",expose: \"0.2\",threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 3;\n\t\t\t\t\t\tif(target.hp==2) return 1.5;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return [0,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.tag(card,'recover')&&player.hp>=player.maxHp-1) return [0,0];\n\t\t\t\t\t\t},},},}","info":"结束阶段，若你已受伤，你可以弃置一张红色牌并对一名其他角色造成一点火焰伤害；若你已损失体力值不少于3，改为造成两点火焰伤害"},"fanshi":{"name":"反噬","script":"{trigger: {player: \"phaseDiscardAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getStat('damage')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hp==player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"锁定技，弃牌阶段结束时，若你本回合内造成过伤害，你流失一点体力并摸一张牌"},"shahun":{"name":"煞魂","script":"{enable: \"chooseToUse\",skillAnimation: \"true\",animationColor: \"fire\",derivation: \"juejing\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.shahun&&player.hp<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=player.getCards('hej');\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(player.isLinked()) player.link();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(player.isTurnedOver()) player.turnOver();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tplayer.recover(1-player.hp);\n\t\t\t\t\tplayer.removeSkill('fanshi');\n\t\t\t\t\tplayer.addSkill('juejing');\n\t\t\t\t\tplayer.storage.shahun=2;\n\t\t\t\t\tplayer.markSkill('shahun');\n\t\t\t\t\tgame.addVideo('storage',player,['shahun',player.storage.shahun]);\n\t\t\t\t},group: \"shahun2\",intro: {content: \"turn\",},ai: {save: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.storage.shahun) return false;\n\t\t\t\t\t\tif(player.hp>0) return false;\n\t\t\t\t\t},result: {player: \"3\",},},}","info":"限定技，濒死阶段，你可以复原武将牌，弃置所有牌并摸三张牌，然后将体力回复至1；若如此做，你失去技能【反噬】，获得技能【绝境】，并于两回合后立即死亡"},"qinglan":{"name":"晴岚","script":"{trigger: {global: \"damageBefore\",},filter: function (event,player){\n\t\t\t\t\treturn event.nature&&player.countCards('he')>0;\n\t\t\t\t},direct: \"true\",priority: \"-5\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('qinglan',trigger.player),'he');\n\t\t\t\t\tnext.logSkill=['qinglan',trigger.player];\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(trigger.num>1||!trigger.source){\n\t\t\t\t\t\t\tif(get.attitude(player,trigger.player)>0){\n\t\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(get.attitude(player,trigger.player)>0){\n\t\t\t\t\t\t\tif(trigger.player.hp==1){\n\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(trigger.source.hp==trigger.source.maxHp){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(get.attitude(player,trigger.source)>0&&\n\t\t\t\t\t\t\ttrigger.source.hp<trigger.source.maxHp&&trigger.num<=1&&trigger.player.hp>1){\n\t\t\t\t\t\t\tif(get.color(card)=='red') return 5-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\t\ttrigger.source.recover();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\ttrigger.source.draw();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"每当有一名角色即将受到属性伤害，你可以弃置一张牌令其防止此伤害，然后伤害来源摸一张牌并回复一点体力"},"yuehua":{"name":"月华","script":"{trigger: {player: [\"useCardAfter\",\"respondAfter\",\"discardAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase) return false;\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.color(event.cards[i])=='red'&&\n\t\t\t\t\t\t\tevent.cards[i].original!='j') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {threaten: \"0.7\",},}","info":"每当你于回合外使用、打出或弃置红色牌，你可以摸一张牌"},"swd_wuxie":{"name":"无邪","script":"{mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\tif(get.type(card)=='delay'&&player!=target){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，你不能成为其他角色的延时锦囊的目标"},"xlqianhuan":{"name":"千幻","script":"{trigger: {player: \"phaseAfter\",},check: function (event,player){\n\t\t\t\t\treturn player.hp==1||player.isTurnedOver();\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t},mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\tif(target.isTurnedOver()) return false;\n\t\t\t\t\t},cardEnabled: function (card,player){\n\t\t\t\t\t\tif(player.isTurnedOver()) return false;\n\t\t\t\t\t},},}","info":"回合结束后，若你已受伤，你可以回复一点体力并将武将牌翻面。若你的武将牌背面朝上，你不能使用卡牌，也不能成为卡牌的目标"},"meihu":{"name":"魅狐","script":"{trigger: {player: \"damageEnd\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.source)<4;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source!=player&&event.source.countCards('h')>0;\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttrigger.source.chooseCard('交给'+get.translation(player)+'一张手牌',true).ai=function(card){\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards[0],trigger.source);\n\t\t\t\t\t\ttrigger.source.$give(1,player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];\n\t\t\t\t\t\t\t\treturn [1,0,0,-0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，可令伤害来源交给你一张手牌"},"xidie":{"name":"戏蝶","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('xidie'),[1,Math.min(3,player.countCards('h')-player.hp)]);\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill='xidie';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.xidie=result.cards.length;\n\t\t\t\t\t}\n\t\t\t\t},group: \"xidie2\",}","info":"准备阶段，若你的手牌数大于体力值，可以弃置至多X张牌，并于结束阶段摸等量的牌，X为你的体力值与手牌数之差且不超过3"},"fanyin":{"name":"梵音","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('fanyin'),function(card,player,target){\n\t\t\t\t\t\t// if(player==target) return false;\n\t\t\t\t\t\tif(target.isLinked()) return true;\n\t\t\t\t\t\tif(target.isTurnedOver()) return true;\n\t\t\t\t\t\tif(target.countCards('j')) return true;\n\t\t\t\t\t\tif(target.isMinHp()&&target.isDamaged()) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\tif(target.isMinHp()){\n\t\t\t\t\t\t\t\tnum+=5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.isTurnedOver()){\n\t\t\t\t\t\t\t\tnum+=5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.countCards('j')){\n\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.isLinked()){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\t\treturn num+att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('fanyin',event.target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.target.isLinked()){\n\t\t\t\t\t\tevent.target.link();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.target.isTurnedOver()){\n\t\t\t\t\t\tevent.target.turnOver();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tvar cards=event.target.getCards('j');\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tevent.target.discard(cards);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tif(event.target.isMinHp()){\n\t\t\t\t\t\tevent.target.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.3\",},}","info":"结束阶段，你可以令一名角色复原武将牌并移除判定区内的牌；若其体力值是全场最少的之一，其回复一点体力"},"mingkong":{"name":"明空","script":"{trigger: {player: \"damageBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')==0&&event.num>=1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.num>=1){\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t}\n\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\ttrigger.source.storage.mingkong=true;\n\t\t\t\t\t\ttrigger.source.addTempSkill('mingkong2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.countCards('h')==0){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\t\treturn 0.1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，若你没有手牌，你受到的伤害-1，然后伤害来源摸一张牌"},"fumo":{"name":"伏魔","script":"{trigger: {player: \"damageAfter\",},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.isAlive()&&player.countCards('h',{color:'red'})>1||player.countCards('h',{color:'black'})>1;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('fumo',trigger.source),2,function(card){\n\t\t\t\t\t\tif(get.damageEffect(trigger.source,player,player,'thunder')<=0) return 0;\n\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\treturn get.color(card)==get.color(ui.selected.cards[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn player.countCards('h',{color:get.color(card)})>1;\n\t\t\t\t\t}).set('complexCard',true);\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(get.damageEffect(trigger.source,player,player,'thunder')>0){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill=['fumo',trigger.source,'thunder'];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.source.damage('thunder');\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",threaten: \"0.8\",},}","info":"每当你受到一次伤害，可以弃置两张颜色相同的手牌并对伤害来源造成一点雷电伤害"},"zuiji":{"name":"醉饮","script":"{enable: \"phaseUse\",filterCard: \"true\",position: \"he\",viewAs: {name: \"jiu\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t},prompt: \"将一张手牌或装备牌当酒使用\",check: function (card){\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},ai: {threaten: \"1.2\",basic: {useful: function (card,i){\n\t\t\t\t\t\t\tif(_status.event.player.hp>1){\n\t\t\t\t\t\t\t\tif(i==0) return 4;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==0) return 7.3;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t},value: function (card,player,i){\n\t\t\t\t\t\t\tif(player.hp>1){\n\t\t\t\t\t\t\t\tif(i==0) return 5;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==0) return 7.3;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t},},order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.2;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target&&target.isDying()) return 2;\n\t\t\t\t\t\t\tif(target&&!target.isPhaseUsing()) return 0;\n\t\t\t\t\t\t\tif(lib.config.mode=='stone'&&!player.isMin()){\n\t\t\t\t\t\t\t\tif(player.getActCount()+1>=player.actcount) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar shas=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('h','zhuge'))){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshas.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.order(b)-get.order(a);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tvar card;\n\t\t\t\t\t\t\tif(shas.length){\n\t\t\t\t\t\t\t\tfor(var i=0;i<shas.length;i++){\n\t\t\t\t\t\t\t\t\tif(lib.filter.filterCard(shas[i],target)){\n\t\t\t\t\t\t\t\t\t\tcard=shas[i];break;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(player.hasSha()&&player.needsToDiscard()){\n\t\t\t\t\t\t\t\tif(player.countCards('h','hufu')!=1){\n\t\t\t\t\t\t\t\t\tcard={name:'sha'};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn (get.attitude(target,current)<0&&\n\t\t\t\t\t\t\t\t\t\ttarget.canUse(card,current,true,true)&&\n\t\t\t\t\t\t\t\t\t\t!current.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t\t})&&\n\t\t\t\t\t\t\t\t\t\tget.effect(current,card,target)>0);\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},tag: {save: \"1\",},},}","info":"出牌阶段，你可以将一张手牌或装备牌当作酒使用"},"zuizhan":{"name":"乱斩","script":"{trigger: {player: \"useCard\",},popup: \"false\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn (event.targets.contains(current)==false&&current!=player&&\n\t\t\t\t\t\tlib.filter.targetEnabled(event.card,player,current))\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn (trigger.targets.contains(current)==false&&current!=player&&\n\t\t\t\t\t\tlib.filter.targetEnabled(trigger.card,player,current))\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tevent.target=list.randomGet();\n\t\t\t\t\t\tplayer.line(event.target,'green');\n\t\t\t\t\t\tgame.log(event.target,'被追加为额外目标');\n\t\t\t\t\t\ttrigger.targets.push(event.target);\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你使用一张杀，可以摸一张牌，然后此杀随机增加一个额外目标"},"jianwu":{"name":"剑舞","script":"{trigger: {player: \"shaBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.distance(event.target,player,'attack')>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t},}","info":"锁定技，攻击范围不含你的角色无法闪避你的杀"},"meiying":{"name":"魅影","script":"{global: \"meiying2\",globalSilent: \"true\",trigger: {global: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&!event.player.tempSkills.meiying3&&event.player.isAlive()&&player.countCards('he',{color:'red'})>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he','魅影：是否弃置一张红色牌视为对'+get.translation(trigger.player)+'使用一张杀？');\n\t\t\t\t\tnext.logSkill=['meiying',trigger.player];\n\t\t\t\t\tvar eff=get.effect(trigger.player,{name:'sha'},player,player);\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(eff>0){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},trigger.player).animate=false;\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"一名其他角色的回合结束时，若其未于此回合内使用过指定另一名角色为目标的牌，你可以弃置一张红色牌视为对其使用一张杀"},"yanjia":{"name":"偃甲","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tvar he=player.getCards('he');\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\tvar info=lib.card[he[i].name];\n\t\t\t\t\t\tif(info.type=='equip'&&!info.nomod&&!info.unique&&lib.inpile.contains(he[i].name)){\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\tif(num>=2) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\tif(ui.selected.cards.length&&card.name==ui.selected.cards[0].name) return false;\n\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\treturn info.type=='equip'&&!info.nomod&&!info.unique&&lib.inpile.contains(card.name);\n\t\t\t\t},selectCard: \"2\",position: \"he\",check: function (card){\n\t\t\t\t\treturn get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar name=cards[0].name+'_'+cards[1].name;\n\t\t\t\t\tvar info1=get.info(cards[0]),info2=get.info(cards[1]);\n\t\t\t\t\tif(!lib.card[name]){\n\t\t\t\t\t\tvar info={\n\t\t\t\t\t\t\tenable:true,\n\t\t\t\t\t\t\ttype:'equip',\n\t\t\t\t\t\t\tsubtype:get.subtype(cards[0]),\n\t\t\t\t\t\t\tvanish:true,\n\t\t\t\t\t\t\tcardimage:info1.cardimage||cards[0].name,\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\treturn target==player;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tselectTarget:-1,\n\t\t\t\t\t\t\tmodTarget:true,\n\t\t\t\t\t\t\tcontent:lib.element.content.equipCard,\n\t\t\t\t\t\t\tlegend:true,\n\t\t\t\t\t\t\tsource:[cards[0].name,cards[1].name],\n\t\t\t\t\t\t\tonEquip:[],\n\t\t\t\t\t\t\tonLose:[],\n\t\t\t\t\t\t\tskills:[],\n\t\t\t\t\t\t\tdistance:{},\n\t\t\t\t\t\t\tai:{\n\t\t\t\t\t\t\t\torder:8.9,\n\t\t\t\t\t\t\t\tequipValue:10,\n\t\t\t\t\t\t\t\tuseful:2.5,\n\t\t\t\t\t\t\t\tvalue:function(card,player){\n\t\t\t\t\t\t\t\t\tvar value=0;\n\t\t\t\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\t\t\t\tvar current=player.getEquip(info.subtype);\n\t\t\t\t\t\t\t\t\tif(current&&card!=current){\n\t\t\t\t\t\t\t\t\t\tvalue=get.value(current,player);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvar equipValue=info.ai.equipValue||info.ai.basic.equipValue;\n\t\t\t\t\t\t\t\t\tif(typeof equipValue=='function') return equipValue(card,player)-value;\n\t\t\t\t\t\t\t\t\treturn equipValue-value;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tresult:{\n\t\t\t\t\t\t\t\t\ttarget:function(player,target){\n\t\t\t\t\t\t\t\t\t\treturn get.equipResult(player,target,name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i in info1.distance){\n\t\t\t\t\t\t\tinfo.distance[i]=info1.distance[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i in info2.distance){\n\t\t\t\t\t\t\tif(typeof info.distance[i]=='number'){\n\t\t\t\t\t\t\t\tinfo.distance[i]+=info2.distance[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tinfo.distance[i]=info2.distance[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(info1.skills){\n\t\t\t\t\t\t\tinfo.skills=info.skills.concat(info1.skills);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(info2.skills){\n\t\t\t\t\t\t\tinfo.skills=info.skills.concat(info2.skills);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(info1.onEquip){\n\t\t\t\t\t\t\tif(Array.isArray(info1.onEquip)){\n\t\t\t\t\t\t\t\tinfo.onEquip=info.onEquip.concat(info1.onEquip);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tinfo.onEquip.push(info1.onEquip);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(info2.onEquip){\n\t\t\t\t\t\t\tif(Array.isArray(info2.onEquip)){\n\t\t\t\t\t\t\t\tinfo.onEquip=info.onEquip.concat(info2.onEquip);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tinfo.onEquip.push(info2.onEquip);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(info1.onLose){\n\t\t\t\t\t\t\tif(Array.isArray(info1.onLose)){\n\t\t\t\t\t\t\t\tinfo.onLose=info.onLose.concat(info1.onLose);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tinfo.onLose.push(info1.onLose);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(info2.onLose){\n\t\t\t\t\t\t\tif(Array.isArray(info2.onLose)){\n\t\t\t\t\t\t\t\tinfo.onLose=info.onLose.concat(info2.onLose);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tinfo.onLose.push(info2.onLose);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(info.onEquip.length==0) delete info.onEquip;\n\t\t\t\t\t\tif(info.onLose.length==0) delete info.onLose;\n\t\t\t\t\t\tlib.card[name]=info;\n\t\t\t\t\t\tlib.translate[name]=get.translation(cards[0].name,'skill')+get.translation(cards[1].name,'skill');\n\t\t\t\t\t\tvar str=lib.translate[cards[0].name+'_info'];\n\t\t\t\t\t\tif(str[str.length-1]=='.'||str[str.length-1]=='。'){\n\t\t\t\t\t\t\tstr=str.slice(0,str.length-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlib.translate[name+'_info']=str+'；'+lib.translate[cards[1].name+'_info'];\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tgame.addVideo('newcard',null,{\n\t\t\t\t\t\t\t\tname:name,\n\t\t\t\t\t\t\t\ttranslate:lib.translate[name],\n\t\t\t\t\t\t\t\tinfo:lib.translate[name+'_info'],\n\t\t\t\t\t\t\t\tcard:cards[0].name,\n\t\t\t\t\t\t\t\tlegend:true,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch(e){\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(game.createCard({name:name,suit:cards[0].suit,number:cards[0].number}),'gain2');\n\t\t\t\t},ai: {order: \"9.5\",result: {player: \"1\",},},}","info":"出牌阶段，你可以将两张非特殊装备牌合成为一张强化装备"},"xiuhua":{"name":"袖花","script":"{trigger: {global: [\"loseEnd\",\"discardAfter\"],},filter: function (event,player){\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(event.name=='lose'&&event.parent.name!='equip') return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards[i])=='equip'&&get.position(event.cards[i])=='d'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tif(get.type(trigger.cards[i])=='equip'&&get.position(trigger.cards[i])=='d'){\n\t\t\t\t\t\t\tcards.push(trigger.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tplayer.gain(cards,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当一件其他角色的装备因被替换或弃置进入弃牌堆，你可以获得之"},"liuying":{"name":"流影","script":"{trigger: {player: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(!player.storage.liuying) player.storage.liuying=[];\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !player.storage.liuying.contains(current)&&player.canUse('sha',current,false);\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('liuying'),function(card,player,target){\n\t\t\t\t\t\treturn !player.storage.liuying.contains(target)&&player.canUse('sha',target,false);\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('liuying',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tvar cards=get.cards();\n\t\t\t\t\t\tplayer.showCards(cards,get.translation(player)+'对'+get.translation(result.targets)+'发动了【流影】');\n\t\t\t\t\t\tevent.bool=(get.color(cards[0])=='black');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.bool){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},event.target,false).animate=false;\n\t\t\t\t\t}\n\t\t\t\t},group: [\"liuying_count1\",\"liuying_count2\"],subSkill: {count1: {trigger: {player: \"shaAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tif(!player.storage.liuying) player.storage.liuying=[];\n\t\t\t\t\t\t\tplayer.storage.liuying.add(trigger.target);\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},count2: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.liuying;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"每当你使用一张杀结算完毕后，你可以指定一名本回合未成为过你的杀的目标的角色，并亮出牌堆顶的一张牌，若为黑色，你对该角色使用一张杀"},"chizhen":{"name":"驰阵","script":"{trigger: {player: \"phaseUseBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=Math.max(1,player.maxHp-player.hp);\n\t\t\t\t\tplayer.draw(event.num);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseToDiscard('he',event.num,true);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar useCard=false;\n\t\t\t\t\tif(result.bool&&result.cards){\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tif(result.cards[i].name=='sha'){\n\t\t\t\t\t\t\t\tuseCard=true;break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(useCard){\n\t\t\t\t\t\tplayer.chooseTarget('是否视为使用一张决斗？',function(card,player,target){\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled({name:'juedou'},player,target);\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\treturn get.effect(target,{name:'juedou'},_status.event.player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.useCard({name:'juedou'},result.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\treturn Math.sqrt(Math.max(1,target.maxHp-target.hp));\n\t\t\t\t\t},},}","info":"出牌阶段开始时，你可以摸X张牌并弃置X张牌，若你弃置了杀，可以视为使用一张决斗（X为你已损失的体力值且至少为1）"},"dangping":{"name":"荡平","script":"{trigger: {source: \"damageAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.parent.name!='dangping'&&!player.hasSkill('dangping2')&&player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&trigger.player!=target&&get.distance(trigger.player,target)<=1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('dangping')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tplayer.logSkill('dangping',result.targets);\n\t\t\t\t\t\tplayer.addTempSkill('dangping2');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你造成一次伤害，可以弃置一张手牌对其距离1以内的另一名角色造成一点伤害，每回合限一次"},"xuanning":{"name":"玄凝","script":"{group: [\"xuanning1\",\"xuanning2\"],intro: {content: \"mark\",},ai: {threaten: \"0.9\",},}","info":"出牌阶段，你可以弃置一基本牌，获得至多3个玄凝标记。当你受到伤害时，你失去一枚玄凝标记，伤害来源随机弃置一张牌"},"liuguang":{"name":"流光","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.xuanning) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t},get.prompt('liuguang'),[1,3]).ai=function(target){\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.xuanning--;\n\t\t\t\t\t\tif(!player.storage.xuanning){\n\t\t\t\t\t\t\tplayer.unmarkSkill('xuanning');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.targets=result.targets.slice(0);\n\t\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\tplayer.logSkill('liuguang',result.targets);\n\t\t\t\t\t\tgame.addVideo('storage',player,['xuanning',player.storage.xuanning]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar target=event.targets.shift();\n\t\t\t\t\t\tvar next=target.chooseToDiscard('流光：弃置一张牌或受到一点伤害','he');\n\t\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\t\tif(get.damageEffect(_status.event.player,player,_status.event.player)>=0) return -1;\n\t\t\t\t\t\t\tif(_status.event.player.hp==1) return 9-get.value(card);\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnext.autochoose=function(){\n\t\t\t\t\t\t\treturn this.player.countCards('he')==0;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tevent.current=target;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length){\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.current.damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.3\",},}","info":"准备阶段，若你有玄凝标记，你可以弃置一枚玄凝标记，选择至多三名角色依次令其选择一项：弃置一张牌，或受到一点伤害，并终止流光结算"},"yangming":{"name":"养命","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.yangming2>0) return false;\n\t\t\t\t\treturn player.countCards('h',{color:'red'})>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.yangming2=2;\n\t\t\t\t\tplayer.addSkill('yangming2');\n\t\t\t\t\tgame.addVideo('storage',player,['yangming2',player.storage.yangming2]);\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},ai: {result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('h')<=player.hp&&player.hp==player.maxHp){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},order: \"6\",threaten: \"1.3\",},}","info":"出牌阶段，你可以弃置一张红色牌，并在下个出牌阶段结束时令距离1以内的任意名角色回复一点体力，在此之前不可再次发动"},"zhaolu":{"name":"朝露","script":"{unique: \"true\",mark: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.zhaolu=Math.min(5,game.players.length);\n\t\t\t\t\tgame.addVideo('storage',player,['zhaolu',player.storage.zhaolu]);\n\t\t\t\t},trigger: {player: [\"phaseEnd\",\"damageEnd\"],global: \"dieAfter\",},forced: \"true\",content: function (){\n\t\t\t\t\tvar num=2;\n\t\t\t\t\tif(typeof trigger.num=='number') num=2*trigger.num;\n\t\t\t\t\tif(trigger.name=='phase') num=1;\n\t\t\t\t\tif(trigger.name=='die') num=2;\n\t\t\t\t\tplayer.storage.zhaolu-=num;\n\t\t\t\t\tif(player.storage.zhaolu<=0){\n\t\t\t\t\t\tplayer.loseMaxHp(true);\n\t\t\t\t\t\tplayer.storage.zhaolu=Math.min(5,game.players.length);\n\t\t\t\t\t}\n\t\t\t\t\tgame.addVideo('storage',player,['zhaolu',player.storage.zhaolu]);\n\t\t\t\t},intro: {content: \"turn\",},ai: {neg: \"true\",mingzhi: \"false\",threaten: \"0.8\",},}","info":"锁定技，每隔X回合，你流失一点体力上限，每当你受到一点伤害或有人死亡，视为减少两个回合，X为现存角色数且至多为5"},"jiehuo":{"name":"劫火","script":"{unique: \"true\",skillAnimation: \"true\",animationColor: \"fire\",enable: \"phaseUse\",line: \"fire\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.damage(2,'fire');\n\t\t\t\t\tplayer.awakenSkill('jiehuo');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.die();\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.hp>1) return false;\n\t\t\t\t\t\t\tif(target.hp>2) return false;\n\t\t\t\t\t\t\tif(get.attitude(player,target)>=0) return false;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player,'fire');\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以对一名其他角色造成两点火焰伤害，然后死亡"},"yuling":{"name":"御灵","script":"{unique: \"true\",locked: \"true\",group: [\"yuling1\",\"yuling2\",\"yuling3\",\"yuling4\",\"yuling5\",\"yuling6\"],intro: {content: \"time\",},ai: {noh: \"true\",threaten: \"0.8\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='bingliang') return 0;\n\t\t\t\t\t\t\tif(card.name=='lebu') return 1.5;\n\t\t\t\t\t\t\tif(card.name=='guohe'){\n\t\t\t\t\t\t\t\tif(!target.countCards('e')) return 0;\n\t\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card.name=='liuxinghuoyu') return 0;\n\t\t\t\t\t\t},},},}","info":"锁定技，你没有摸牌和弃牌阶段，你的手牌数始终为5，你在一个出牌阶段最多使用X+2张牌，X为你的体力上限"},"manwu":{"name":"曼舞","script":"{trigger: {global: \"phaseEnd\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.player.isMinHandcard();\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"在一名角色的结束阶段，若其手牌数为全场最少或之一，你可以令其摸一张牌"},"xfanghua":{"name":"芳华","script":"{trigger: {target: \"useCardToBegin\",},priority: \"-1\",filter: function (event,player){\n\t\t\t\t\treturn get.color(event.card)=='red'&&player.isDamaged();\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.color(card)=='red'&&target.isDamaged()) return [1,1];\n\t\t\t\t\t\t},},},}","info":"在你成为红色牌的目标后，你可以回复一点体力"},"yunyin":{"name":"云音","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",subSkill: {count: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn _status.currentPhase==player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(!player.storage.yunyin){\n\t\t\t\t\t\t\t\tplayer.storage.yunyin=[];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar suit=get.suit(trigger.card);\n\t\t\t\t\t\t\tif(suit){\n\t\t\t\t\t\t\t\tplayer.storage.yunyin.add(suit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},set: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.yunyin;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},filter: function (event,player){\n\t\t\t\t\tif(!player.storage.yunyin) return true;\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tif(!player.storage.yunyin.contains(get.suit(hs[i]))) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},group: [\"yunyin_count\",\"yunyin_set\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt('yunyin'),function(card){\n\t\t\t\t\t\tif(!player.storage.yunyin) return true;\n\t\t\t\t\t\treturn !player.storage.yunyin.contains(get.suit(card));\n\t\t\t\t\t}).set('logSkill','yunyin').ai=function(card){\n\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\tvar type=get.type(name);\n\t\t\t\t\t\tif(type=='trick'||type=='basic'){\n\t\t\t\t\t\t\tif(lib.filter.cardEnabled({name:name},player)){\n\t\t\t\t\t\t\t\tlist.push([get.translation(type),'',name]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar dialog=ui.create.dialog('云音',[list,'vcard']);\n\t\t\t\t\tvar taoyuan=0,nanman=0;\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tvar eff1=get.effect(players[i],{name:'taoyuan'},player,player);\n\t\t\t\t\t\tvar eff2=get.effect(players[i],{name:'nanman'},player,player);\n\t\t\t\t\t\tif(eff1>0){\n\t\t\t\t\t\t\ttaoyuan++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(eff1<0){\n\t\t\t\t\t\t\ttaoyuan--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(eff2>0){\n\t\t\t\t\t\t\tnanman++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(eff2<0){\n\t\t\t\t\t\t\tnanman--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton(dialog).ai=function(button){\n\t\t\t\t\t\tvar name=button.link[2];\n\t\t\t\t\t\tif(Math.max(taoyuan,nanman)>1){\n\t\t\t\t\t\t\tif(taoyuan>nanman) return name=='taoyuan'?1:0;\n\t\t\t\t\t\t\treturn name=='nanman'?1:0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.countCards('h')<player.hp&&player.hp>=2){\n\t\t\t\t\t\t\treturn name=='wuzhong'?1:0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.hp<player.maxHp&&player.hp<3){\n\t\t\t\t\t\t\treturn name=='tao'?1:0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn name=='zengbin'?1:0;\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseUseTarget(true,result.links[0][2]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"结束阶段，你可以弃置一张与本回合使用过的卡牌花色均不相同的手牌，视为使用一张基本牌或普通锦囊牌"},"shishui":{"name":"逝水","script":"{trigger: {player: \"useCardToBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.target&&get.color(event.card)=='red';\n\t\t\t\t},forced: \"true\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(get.info(trigger.card).multitarget){\n\t\t\t\t\t\tevent.list=trigger.targets.slice(0);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.target.loseHp();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\tevent.list.shift().loseHp();\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {halfneg: \"true\",effect: {player: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.color(card)=='red') return [1,0,1,-2];\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你使用一张红色牌，你令目标流失一点体力"},"duhun":{"name":"渡魂","script":"{enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\tif(event.type!='dying') return false;\n\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\tif(player.maxHp<=1) return false;\n\t\t\t\t\tif(player.countCards('h')==0) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0&&target.hp>0&&target.hp<=player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tplayer.die();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.num=target.hp-player.hp;\n\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.changeHp(event.num);\n\t\t\t\t\tif(get.is.altered('duhun')){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tevent.target.changeHp(-event.num);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(event.target.hp<=0){\n\t\t\t\t\t\tevent.target.dying({source:player});\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.maxHp<=1) return false;\n\t\t\t\t\t\tif(player.hp>0) return false;\n\t\t\t\t\t\tif(player.countCards('h')==0) return false;\n\t\t\t\t\t},save: \"true\",result: {target: \"-1\",player: \"1\",},threaten: \"2\",},}","info":"濒死阶段，你可以与一名体力值不超过你的体力上限的角色拼点，若你赢，你失去一点体力上限并与该角色交换体力值；若你没赢，你立即死亡"},"lingyan":{"name":"灵偃","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tvar nums=[];\n\t\t\t\t\tfor(var i=0;i<player.storage.lingyan.length;i++){\n\t\t\t\t\t\tnums.add(player.storage.lingyan[i].number);\n\t\t\t\t\t}\n\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\treturn !nums.contains(card.number);\n\t\t\t\t\t},'h');\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.lingyan=[];\n\t\t\t\t},intro: {mark: function (dialog,storage,player){\n\t\t\t\t\t\tif(Array.isArray(player.storage.humeng)&&player.storage.humeng.length){\n\t\t\t\t\t\t\tdialog.addText('武将牌');\n\t\t\t\t\t\t\tdialog.addSmall(storage);\n\t\t\t\t\t\t\tdialog.addText('偃甲蛋');\n\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\tfor(var i=0;i<player.storage.humeng.length;i++){\n\t\t\t\t\t\t\t\tvar suit=player.storage.humeng[i];\n\t\t\t\t\t\t\t\tcards.push(game.createCard('yanjiadan_'+suit,suit,''));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdialog.addSmall(cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdialog.addAuto(storage);\n\t\t\t\t\t\t}\n\t\t\t\t\t},},filterCard: function (card,player){\n\t\t\t\t\tvar nums=[];\n\t\t\t\t\tfor(var i=0;i<player.storage.lingyan.length;i++){\n\t\t\t\t\t\tnums.add(player.storage.lingyan[i].number);\n\t\t\t\t\t}\n\t\t\t\t\treturn !nums.contains(card);\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},discard: \"false\",prepare: function (cards,player){\n\t\t\t\t\tplayer.$give(cards,player,false);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.lingyan.add(cards[0]);\n\t\t\t\t\tplayer.syncStorage('lingyan');\n\t\t\t\t\tplayer.markSkill('lingyan');\n\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\tvar name='yanjiadan_'+get.suit(cards[0]);\n\t\t\t\t\tif(lib.card[name]){\n\t\t\t\t\t\tplayer.gain(game.createCard(name),'gain2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",order: \"4\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以将一张点数与武将牌上的牌均不同的手牌置于武将牌上，然后获得与其花色对应的一枚偃甲蛋"},"xunjian":{"name":"寻剑","script":"{trigger: {player: [\"useCard\",\"respond\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.storage.lingyan) return false;\n\t\t\t\t\tif(event.getRand()>player.storage.lingyan.length/13) return false;\n\t\t\t\t\treturn get.cardPile2(event.card.name)?true:false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar card=get.cardPile2(trigger.card.name);\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tplayer.gain(card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，每当你使用或打出一张牌，若牌堆中有同名牌，你有X的机率获得之，X为你的“灵偃”牌数/13"},"humeng":{"name":"湖梦","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.humeng=[];\n\t\t\t\t},locked: \"true\",group: [\"humeng_count\",\"humeng_call\",\"humeng_dying\"],unique: \"true\",threaten: function (player,target){\n\t\t\t\t\tif(target.hasSkill('humeng_sub')) return 1.6;\n\t\t\t\t\treturn 1;\n\t\t\t\t},subSkill: {call: {trigger: {player: \"humeng_yanjia\",},forced: \"true\",skillAnimation: \"true\",animationColor: \"water\",content: function (){\n\t\t\t\t\t\t\tplayer.addSkill('humeng_sub');\n\t\t\t\t\t\t},sub: \"true\",},sub: {init: function (player){\n\t\t\t\t\t\t\tplayer.markSkillCharacter('humeng_sub','gjqt_yanjiaxieyi','偃甲谢衣','当你进入濒死状态时激活此替身');\n\t\t\t\t\t\t},sub: \"true\",},dying: {unique: \"true\",skillAnimation: \"true\",animationColor: \"water\",trigger: {player: \"dying\",},priority: \"10\",forced: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.discard(player.getCards('hej'));\n\t\t\t\t\t\t\tif(player.hasSkill('humeng_sub')){\n\t\t\t\t\t\t\t\tevent.yanjia=true;\n\t\t\t\t\t\t\t\tplayer.removeSkill('humeng_sub');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.link(false);\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tplayer.turnOver(false);\n\t\t\t\t\t\t\t'step 3'\n\t\t\t\t\t\t\tplayer.draw(4);\n\t\t\t\t\t\t\tplayer.reinit('gjqt_xieyi','gjqt_chuqi');\n\t\t\t\t\t\t\tplayer.hp=player.maxHp;\n\t\t\t\t\t\t\t'step 4'\n\t\t\t\t\t\t\tif(event.yanjia){\n\t\t\t\t\t\t\t\tvar tag=player.addSubPlayer({\n\t\t\t\t\t\t\t\t\tname:'gjqt_yanjiaxieyi',\n\t\t\t\t\t\t\t\t\tskills:['xianju'],\n\t\t\t\t\t\t\t\t\ths:get.cards(2),\n\t\t\t\t\t\t\t\t\thp:2,\n\t\t\t\t\t\t\t\t\tmaxHp:2\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tplayer.callSubPlayer(tag);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},count: {trigger: {player: \"useCardAfter\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(player.storage.humeng_yanjia) return false;\n\t\t\t\t\t\t\treturn event.card.name.indexOf('yanjiadan_')==0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.humeng.add(trigger.card.name.slice(10));\n\t\t\t\t\t\t\tif(player.storage.humeng.length==4&&!player.hasSkill('humeng_sub')){\n\t\t\t\t\t\t\t\tevent.trigger('humeng_yanjia');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"觉醒技，当你使用过4种不同的偃甲蛋后，你获得替身偃甲谢衣；觉醒技，当你进入濒死状态时，你弃置所有牌，摸四张牌，变身为初七并激活偃甲谢衣"},"xianju":{"name":"仙居","script":"{trigger: {global: \"roundStart\",},forced: \"true\",init: function (player){\n\t\t\t\t\tif(game.roundNumber%2==1){\n\t\t\t\t\t\tplayer.addTempSkill('qianxing','roundStart');\n\t\t\t\t\t}\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn game.roundNumber%2==1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(game.roundNumber%2==1){\n\t\t\t\t\t\tplayer.addTempSkill('qianxing','roundStart');\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar list=get.typeCard('jiguan');\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(lib.card[list[i]].derivation){\n\t\t\t\t\t\t\t\tlist.splice(i--,1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()),'draw');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {gain: {trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn game.roundNumber%2==0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar list=get.typeCard('jiguan');\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tif(lib.card[list[i]].derivation){\n\t\t\t\t\t\t\t\t\tlist.splice(i--,1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()),'draw');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，奇数游戏轮次开始时，你获得潜行直到下一轮开始；偶数游戏轮次开始时，你随机获得一张机关牌"},"xuanci":{"name":"旋刺","script":"{locked: \"false\",mod: {targetInRange: function (card){\n\t\t\t\t\t\tif(card.name=='feibiao') return true;\n\t\t\t\t\t},},enable: \"phaseUse\",usable: \"1\",viewAs: {name: \"feibiao\",},filterCard: {suit: \"club\",},position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'club'});\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},group: \"xuanci_sha\",subSkill: {sha: {trigger: {player: \"useCardToAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event.card.name=='feibiao'){\n\t\t\t\t\t\t\t\treturn event.target.isIn()&&player.canUse('sha',event.target,false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},logTarget: \"target\",autodelay: \"0.5\",content: function (){\n\t\t\t\t\t\t\tplayer.useCard(trigger.target,{name:'sha'},false).line=false;\n\t\t\t\t\t\t},sub: \"true\",},},ai: {basic: {order: \"9\",value: \"3\",useful: \"1\",},result: {target: \"-2\",},tag: {discard: \"1\",loseHp: \"1\",},},}","info":"出牌阶段限一次，你可以将一张梅花牌当作飞镖使用；锁定技，你使用飞镖无距离限制，你使用飞镖后对目标结算后视为对目标使用一张杀"},"lingnu":{"name":"灵怒","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.lingnu={};\n\t\t\t\t},ai: {threaten: \"1.3\",},filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i in player.storage.lingnu){\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t\tif(num>=3) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar check=function(list){\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar info=lib.skill[list[i]];\n\t\t\t\t\t\t\tif(!info) continue;\n\t\t\t\t\t\t\tif(info.shaRelated) return true;\n\t\t\t\t\t\t\tif(info.trigger){\n\t\t\t\t\t\t\t\tfor(var j in info.trigger){\n\t\t\t\t\t\t\t\t\tif(j=='player'||j=='global'){\n\t\t\t\t\t\t\t\t\t\tvar cond=info.trigger[j];\n\t\t\t\t\t\t\t\t\t\tif(typeof cond=='string'){\n\t\t\t\t\t\t\t\t\t\t\tcond=[cond];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('shaBefore')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('shaBegin')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('shaEnd')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('shaAfter')!=-1) return true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tvar list = get.gainableSkills(function(info,skill){\n\t\t\t\t\t\tif(player.storage.lingnu[list]) return false;\n\t\t\t\t\t\tvar list=[skill];\n\t\t\t\t\t\tgame.expandSkills(list);\n\t\t\t\t\t\treturn check(list);\n\t\t\t\t\t},player);\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i in player.storage.lingnu){\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<trigger.num;i++){\n\t\t\t\t\t\tif(num>=3) break;\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tvar skill=list.randomGet();\n\t\t\t\t\t\t\tplayer.addAdditionalSkill('lingnu',skill,true);\n\t\t\t\t\t\t\tplayer.storage.lingnu[skill]=3;\n\t\t\t\t\t\t\tplayer.popup(skill);\n\t\t\t\t\t\t\tgame.log(player,'获得了技能','【'+get.translation(skill)+'】');\n\t\t\t\t\t\t\tplayer.markSkill('lingnu');\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: function (storage){\n\t\t\t\t\t\tvar str='<ul style=\"padding-top:0;margin-top:0\">';\n\t\t\t\t\t\tfor(var i in storage){\n\t\t\t\t\t\t\tstr+='<li>'+get.translation(i)+'：剩余'+storage[i]+'回合';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstr+='</ul>'\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},markcount: function (storage){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i in storage){\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t},},group: \"lingnu_remove\",subSkill: {remove: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tvar clear=true;\n\t\t\t\t\t\t\tfor(var i in player.storage.lingnu){\n\t\t\t\t\t\t\t\tplayer.storage.lingnu[i]--;\n\t\t\t\t\t\t\t\tif(player.storage.lingnu[i]<=0){\n\t\t\t\t\t\t\t\t\tdelete player.storage.lingnu[i];\n\t\t\t\t\t\t\t\t\tplayer.removeAdditionalSkill('lingnu',i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tclear=false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(clear){\n\t\t\t\t\t\t\t\tplayer.unmarkSkill('lingnu');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"锁定技，每当你造成一点伤害，你随机获得一个与杀相关的技能，技能在你行动3回合后消失（同一时间最多拥有3个以此法获得的技能）"},"zhenying":{"name":"振影","script":"{trigger: {player: [\"useCard\",\"respond\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(get.is.converted(event)) return false;\n\t\t\t\t\tif(event.card.zhenying_link) return false;\n\t\t\t\t\tif(get.color(event.card)!='black') return false;\n\t\t\t\t\tif(['delay','equip'].contains(get.type(event.card))) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar fake=game.createCard(trigger.card);\n\t\t\t\t\tfake.zhenying_link=true;\n\t\t\t\t\tplayer.gain(fake,'draw')._triggered=null;\n\t\t\t\t\tfake.classList.add('glow');\n\t\t\t\t\tfake._destroy='zhenying';\n\t\t\t\t\tfake._modUseful=function(){return 0.1};\n\t\t\t\t\tfake._modValue=function(){return 0.1};\n\t\t\t\t},group: [\"zhenying_discard\",\"zhenying_lose\"],subSkill: {discard: {trigger: {player: [\"useCardAfter\",\"respondAfter\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(get.is.converted(event)) return false;\n\t\t\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\t\t\tif(event.cards[0]&&event.cards[0].zhenying_link) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},popup: \"false\",content: function (){\n\t\t\t\t\t\t\tplayer.chooseToDiscard('he',true);\n\t\t\t\t\t\t},sub: \"true\",},lose: {trigger: {global: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tvar hs=player.getCards('h',function(card){\n\t\t\t\t\t\t\t\treturn card.zhenying_link?true:false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\t\t\tplayer.lose(hs)._triggered=null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"每当你使用或打出一张非转化的黑色牌（装备或延时锦囊牌除外），你可以获得一张此牌的“替身”；你使用或打出“替身”牌后需弃置一张牌（没有则不弃）；当前回合结束后，“替身”牌消失"},"cihong":{"name":"刺鸿","script":"{round: \"3\",trigger: {player: \"phaseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar goon=false;\n\t\t\t\t\tif(player.countCards('he',function(card){\n\t\t\t\t\t\treturn get.value(card)<8&&get.color(card)=='red';\n\t\t\t\t\t})){\n\t\t\t\t\t\tgoon=true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp==1&&player.canUse('sha',current,false)&&get.attitude(player,current)<0&&get.effect(current,{name:'sha'},player,player)>0;\n\t\t\t\t\t})){\n\t\t\t\t\t\tif(player.hp>1||!player.isTurnedOver()){\n\t\t\t\t\t\t\tgoon=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseTarget(get.prompt('cihong'),function(card,playe,target){\n\t\t\t\t\t\treturn player.canUse('sha',target,false);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(!_status.event.goon) return false;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(player,target)>=0) return false;\n\t\t\t\t\t\tif(target.hp>3) return false;\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t}).set('goon',goon);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('cihong',event.target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.target.isAlive()&&player.countCards('he',{color:'red'})){\n\t\t\t\t\t\tplayer.chooseToDiscard('he',{color:'red'},'是否弃置一张红色牌视为对'+get.translation(event.target)+'使用一张杀？').set('ai',function(card){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},event.target);\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(event.target.isAlive()){\n\t\t\t\t\t\tplayer.chooseBool('是否失去一点体力并视为对'+get.translation(event.target)+'使用一张杀？').set('choice',\n\t\t\t\t\t\t\tplayer.hp>event.target.hp&&player.hp>1&&event.target.hp>0\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\tplayer.useCard({name:'sha'},event.target);\n\t\t\t\t\t}\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(event.target.isAlive()&&!player.isTurnedOver()){\n\t\t\t\t\t\tplayer.chooseBool('是将武将牌翻至背面并视为对'+get.translation(event.target)+'使用一张杀？').set('choice',\n\t\t\t\t\t\t\tevent.target.hp==1\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 7'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.turnOver(true);\n\t\t\t\t\t\tplayer.useCard({name:'sha'},event.target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},group: [\"cihong_roundcount\"],}","info":"每三轮限一次，结束阶段，你可以指定一名其他角色并可以依次选择：1. 弃置一张红色牌；2. 失去一点体力；3. 将武将牌翻至背面；每选择一项，视为对目标使用一张杀"},"yange":{"name":"魇歌","script":"{trigger: {player: \"phaseBeginStart\",},direct: \"true\",init: function (player){\n\t\t\t\t\tif(player.storage.yange>0) {\n\t\t\t\t\t\tplayer.markSkill('yange');\n\t\t\t\t\t}\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.storage.yange>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t},get.prompt2('yange')).set('pskill',trigger.skill).set('ai',function(target){\n\t\t\t\t\t\tif(_status.event.pskill) return 0;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\tvar nh2=target.countCards('h');\n\t\t\t\t\t\tvar num=nh2-nh;\n\t\t\t\t\t\tif(player.hp==1){\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.threaten(target)>=1.5){\n\t\t\t\t\t\t\tif(num<2) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(num<3) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num+Math.sqrt(get.threaten(target));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.yange--;\n\t\t\t\t\t\tif(player.storage.yange<=0){\n\t\t\t\t\t\t\tplayer.unmarkSkill('yange');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('yange',target);\n\t\t\t\t\t\tvar clone=function(pos){\n\t\t\t\t\t\t\tvar cloned=[];\n\t\t\t\t\t\t\tvar cards=target.getCards(pos);\n\t\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\tcloned.push(game.createCard(cards[i]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn cloned;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar tag=player.addSubPlayer({\n\t\t\t\t\t\t\tname:target.name,\n\t\t\t\t\t\t\tskills:target.getStockSkills().concat('yange_exit'),\n\t\t\t\t\t\t\ths:clone('h'),\n\t\t\t\t\t\t\tes:clone('e'),\n\t\t\t\t\t\t\thp:target.hp,\n\t\t\t\t\t\t\tmaxHp:target.maxHp,\n\t\t\t\t\t\t\tintro:'回合结束后切换回主武将'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.callSubPlayer(tag);\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"mark\",},group: \"yange_init\",subSkill: {init: {trigger: {global: \"gameStart\",player: \"enterGame\",},forced: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.yange=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isEnemiesOf(player);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tplayer.markSkill('yange');\n\t\t\t\t\t\t},sub: \"true\",},exit: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.exitSubPlayer(true);\n\t\t\t\t\t\t\tgame.createTrigger('phaseAfter','lianjing',player,trigger);\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},ai: {threaten: \"1.5\",},}","info":"游戏开始时，你获得数量等于敌方角色数的“魇”标记；准备阶段开始时，你可以移去一枚“魇”标记并变为一名其他存活角色的复制，此回合结束后你变回原角色"},"woxue":{"name":"卧雪","script":"{trigger: {player: [\"useCardAfter\",\"respondAfter\"],},filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player&&!_status.currentPhase.hasSkill('gw_ciguhanshuang')){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,_status.currentPhase)<0;\n\t\t\t\t},logTarget: function (){\n\t\t\t\t\treturn _status.currentPhase;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.useCard({name:'gw_baishuang'},_status.currentPhase).animate=false;\n\t\t\t\t},ai: {threaten: \"0.9\",},}","info":"每当你于回合外使用或打出一张牌，你可以视为对当前回合角色使用【白霜】"},"lianjing":{"name":"莲境","script":"{unique: \"true\",trigger: {player: \"phaseAfter\",},direct: \"true\",round: \"2\",filter: function (event,player){\n\t\t\t\t\tif(event.skill) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget([1,2],get.prompt2('lianjing'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.targets.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,ui.selected.targets[i])<0) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tif(nh==0) return 2;\n\t\t\t\t\t\t\t\tif(nh==1) return 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(att>0){\n\t\t\t\t\t\t\tif(target.isTurnedOver()) return 2.5;\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tif(nh==0) return 2;\n\t\t\t\t\t\t\t\tif(nh==1) return 0.9;\n\t\t\t\t\t\t\t\tif(ui.selected.targets.length) return 0.3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target.hp==2){\n\t\t\t\t\t\t\t\tif(nh==0) return 1.5;\n\t\t\t\t\t\t\t\tif(nh==1) return 0.5;\n\t\t\t\t\t\t\t\tif(ui.selected.targets.length) return 0.2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target.hp==3){\n\t\t\t\t\t\t\t\tif(nh==0) return 0.4;\n\t\t\t\t\t\t\t\tif(nh==1) return 0.35;\n\t\t\t\t\t\t\t\tif(ui.selected.targets.length) return 0.1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!target.needsToDiscard(2)) return 0.2;\n\t\t\t\t\t\t\tif(ui.selected.targets.length||!player.needsToDiscard(2)) return 0.05;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('lianjing',result.targets);\n\t\t\t\t\t\tplayer.insertEvent('lianjing',lib.skill.lianjing.content_phase);\n\t\t\t\t\t\tplayer.storage.lianjing_targets=result.targets.slice(0);\n\t\t\t\t\t\t// player.storage.lianjing--;\n\t\t\t\t\t\t// if(player.storage.lianjing<=0){\n\t\t\t\t\t\t// \tplayer.unmarkSkill('lianjing');\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},content_phase: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.list=[player].concat(player.storage.lianjing_targets);\n\t\t\t\t\tevent.exlist=[];\n\t\t\t\t\tevent.list.sortBySeat();\n\t\t\t\t\tdelete player.storage.lianjing_targets;\n\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\tif(!event.list.contains(game.players[i])){\n\t\t\t\t\t\t\tgame.players[i].out('lianjing');\n\t\t\t\t\t\t\tevent.exlist.push(game.players[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\tevent.list.shift().phase('lianjing');\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tfor(var i=0;i<event.exlist.length;i++){\n\t\t\t\t\t\tevent.exlist[i].in('lianjing');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},group: [\"lianjing_roundcount\"],}","info":"每两轮限一次，回合结束后，你可以选择至多2名其他角色，将其他角色移出游戏，然后你与所选的角色依次进行一个回合"},"yunyou":{"name":"云游","script":"{enable: \"phaseUse\",round: \"2\",init: function (player){\n\t\t\t\t\tplayer.storage.yunyou=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('land_used')&&get.inpile('land').length>player.storage.yunyou.length;\n\t\t\t\t},delay: \"0\",content: function (){\n\t\t\t\t\tvar list=get.inpile('land');\n\t\t\t\t\tfor(var i=0;i<player.storage.yunyou.length;i++){\n\t\t\t\t\t\tlist.remove(player.storage.yunyou[i]);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.discoverCard(list,'use');\n\t\t\t\t},ai: {order: \"6\",threaten: \"1.2\",result: {player: \"1\",},},group: [\"yunyou_count\",\"yunyou_roundcount\"],subSkill: {count: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn get.type(event.card)=='land';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.yunyou.add(trigger.card.name);\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"每两轮限一次，出牌阶段，你可以发现一张地图牌本局未使用过的地图牌并使用之"},"xuanzhen":{"name":"玄阵","script":"{trigger: {global: \"useCard1\",},round: \"1\",filter: function (event,player){\n\t\t\t\t\tif(event.targets.length!=1) return false;\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(player!=event.targets[0]) return false;\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar info=lib.card[lib.inpile[i]];\n\t\t\t\t\t\tif(info.multitarget) continue;\n\t\t\t\t\t\tif(lib.filter.targetEnabled2({name:lib.inpile[i]},event.player,player)){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.effect(player,event.card,event.player,player)<0;\n\t\t\t\t},prompt2: function (event,player){\n\t\t\t\t\treturn '发现一张牌代替'+get.translation(event.player)+'对你使用的'+get.translation(event.card);\n\t\t\t\t},autodelay: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[],list1=[],list2=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar info=lib.card[lib.inpile[i]];\n\t\t\t\t\t\tif(info.multitarget) continue;\n\t\t\t\t\t\tif(lib.filter.targetEnabled2({name:lib.inpile[i]},trigger.player,trigger.targets[0])){\n\t\t\t\t\t\t\tvar cardinfo=[trigger.card.suit||'',trigger.card.number||'',lib.inpile[i]];\n\t\t\t\t\t\t\tlist1.push(cardinfo);\n\t\t\t\t\t\t\tif(info.type!='equip'){\n\t\t\t\t\t\t\t\tlist2.push(cardinfo);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar equipped=false;\n\t\t\t\t\tfor(var i=0;i<3;i++){\n\t\t\t\t\t\tif(equipped&&list2.length){\n\t\t\t\t\t\t\tlist.push(list2.randomRemove());\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tequipped=true;\n\t\t\t\t\t\t\tlist.push(list1.randomRemove());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton(true,['玄阵',[list,'vcard']]).ai=function(button){\n\t\t\t\t\t\tvar card={suit:trigger.card.suit,number:trigger.card.number,name:button.link[2]};\n\t\t\t\t\t\treturn get.effect(trigger.targets[0],card,trigger.player,player);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=game.createCard({\n\t\t\t\t\t\t\tsuit:trigger.card.suit||lib.suit.randomGet(),\n\t\t\t\t\t\t\tnumber:trigger.card.number||Math.ceil(Math.random()*13),\n\t\t\t\t\t\t\tname:result.links[0][2]}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\tgame.log(player,'将',trigger.card,'变为',card);\n\t\t\t\t\t\t// if(!event.isMine()) game.delayx();\n\t\t\t\t\t\ttrigger.card=get.autoViewAs(card);\n\t\t\t\t\t\ttrigger.cards=[card];\n\t\t\t\t\t\tgame.cardsGotoOrdering(card).relatedEvent=trigger;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.$throw(event.card,null,null,true);\n\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\tplayer.line(trigger.targets[0],'green');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\t}\n\t\t\t\t\tgame.delayx(0.5);\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(game.roundNumber-target.storage.xuanzhen_roundcount<1) return 2.2;\n\t\t\t\t\t\treturn 0.6;\n\t\t\t\t\t},},group: [\"xuanzhen_roundcount\"],}","info":"每轮限一次，当你成为一名其他角色的卡牌惟一目标时，你可以发现一张牌代替此牌"},"qingshu":{"name":"青书","script":"{ai: {threaten: \"1.4\",},trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tfor(var i=0;i<player.storage.qingshu.length;i++){\n\t\t\t\t\t\tif(ui.land&&ui.land.name==player.storage.qingshu[i]) continue;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.qingshu=[];\n\t\t\t\t\tplayer.storage.qingshu_all=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseVCardButton(player.storage.qingshu.slice(0),get.prompt('qingshu')).set('ai',function(button){\n\t\t\t\t\t\tvar skill=button.link[2]+'_skill';\n\t\t\t\t\t\tif(lib.skill[skill].ai&&lib.skill[skill].ai.mapValue){\n\t\t\t\t\t\t\treturn Math.abs(lib.skill[skill].ai.mapValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('filterButton',function(button){\n\t\t\t\t\t\tif(ui.land&&ui.land.name==button.link[2]) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar skill=result.links[0][2];\n\t\t\t\t\t\tevent.mapSkill=skill;\n\t\t\t\t\t\tvar value=0;\n\t\t\t\t\t\tif(lib.skill[skill]&&lib.skill[skill].ai&&lib.skill[skill].ai.mapValue){\n\t\t\t\t\t\t\tvalue=lib.skill[skill].ai.mapValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\t\treturn !target.hasSkill(skill+'_skill');\n\t\t\t\t\t\t},'选择一个目标获得技能'+get.translation(skill)).set('ai',function(target){\n\t\t\t\t\t\t\tvar result=get.sgnAttitude(player,target)*value;\n\t\t\t\t\t\t\tvar num=target.storage.qingshu_gained||0;\n\t\t\t\t\t\t\treturn result/(num+1);\n\t\t\t\t\t\t}).set('prompt2',lib.translate[skill+'_skill_info']);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar skill=event.mapSkill+'_skill';\n\t\t\t\t\t\tplayer.logSkill('qingshu',target);\n\t\t\t\t\t\ttarget.addSkill(skill);\n\t\t\t\t\t\ttarget.popup(skill);\n\t\t\t\t\t\tgame.log(target,'获得了技能','【'+get.translation(skill)+'】');\n\t\t\t\t\t\tif(!target.storage.qingshu_gained){\n\t\t\t\t\t\t\ttarget.storage.qingshu_gained=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.storage.qingshu_gained++;\n\t\t\t\t\t\tplayer.storage.qingshu.remove(event.mapSkill);\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {count: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn get.type(event.card)=='land'&&!player.storage.qingshu_all.contains(event.card.name);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.qingshu.push(trigger.card.name);\n\t\t\t\t\t\t\tplayer.storage.qingshu_all.push(trigger.card.name);\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},group: \"qingshu_count\",}","info":"结束阶段，你可以令一名角色永久获得一个你使用过且不是当前地图的地图牌效果（每个地图最多发动一次）"}},"card":{},"hero":{"gjqt_bailitusu":{"name":"百里屠苏","attr":["male","shu",4,["xuelu","fanshi","shahun"]]},"gjqt_fengqingxue":{"name":"风晴雪","attr":["female","wu",3,["qinglan","yuehua","swd_wuxie"]]},"gjqt_xiangling":{"name":"襄铃","attr":["female","wu",3,["xlqianhuan","meihu","xidie"]]},"gjqt_fanglansheng":{"name":"方兰生","attr":["male","wu",3,["fanyin","mingkong","fumo"]]},"gjqt_yinqianshang":{"name":"尹千觞","attr":["male","qun",4,["zuiji","zuizhan"]]},"gjqt_hongyu":{"name":"红玉","attr":["female","shu",4,["jianwu","meiying"]]},"gjqt_yuewuyi":{"name":"乐无异","attr":["male","wei",4,["yanjia","xiuhua","liuying"]]},"gjqt_wenrenyu":{"name":"闻人羽","attr":["female","shu",4,["chizhen","dangping"]]},"gjqt_xiayize":{"name":"夏夷则","attr":["male","qun",3,["xuanning","liuguang","yangming"]]},"gjqt_aruan":{"name":"阿阮","attr":["female","wu",3,["zhaolu","jiehuo","yuling"]]},"gjqt_xunfang":{"name":"巽芳","attr":["female","shu",3,["manwu","xfanghua"]]},"gjqt_ouyangshaogong":{"name":"欧阳少恭","attr":["male","shu",3,["yunyin","shishui","duhun"]]},"gjqt_xieyi":{"name":"谢衣","attr":["male","qun",3,["lingyan","xunjian","humeng"]]},"gjqt_yanjiaxieyi":{"name":"偃甲谢衣","attr":["male","qun",2,["xianju"],["unseen"]]},"gjqt_chuqi":{"name":"初七","attr":["male","qun",2,["xuanci"],["unseen"]]},"gjqt_beiluo":{"name":"北洛","attr":["male","qun",4,["lingnu","zhenying","cihong"]]},"gjqt_yunwuyue":{"name":"云无月","attr":["female","wei",3,["yange","woxue","lianjing"]]},"gjqt_cenying":{"name":"岑缨","attr":["female","shu",3,["yunyou","xuanzhen","qingshu"]]}}},"yxs":{"name":"英雄杀","skill":{"yxs_fanji":{"name":"反击","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",priority: \"12\",filter: function (event,player){      \n                if(!player.countCards('h',{name:'sha'})) return false;\n        return event.card.name=='sha'||event.card.name=='juedou';\n    },content: function (){    \n                player.addTempSkill('yxs_fanji2','shaAfter');   \n         player.chooseToUse({name:'sha'},trigger.source,'反击：是否对'+get.translation(trigger.source)+'使用一张杀？').logSkill='yxs_fanji';\n    },}","info":"当你受到【杀】或【决斗】造成的伤害后，你可以对伤害来源使用一张【杀】。若此【杀】为红色，其不可闪避"},"yxs_menshen":{"name":"门神","script":"{audio: \"2\",trigger: {player: \"phaseEnd\",},priority: \"15\",group: \"yxs_menshen3\",onremove: \"true\",filter: function (event,player){\n        return game.players.length>1;\n    },content: function (){\n              \"step 0\"\n     player.chooseTarget('选择【门神】的目标',lib.translate.yxs_menshen_info,true,function(card,player,target){\n             return target!=player;\n     }).set('ai',function(target){     \n             return get.attitude(player,target);            \n     });        \n     \"step 1\"\n     if(result.bool){           \n        var target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tgame.log(target,'成为了','【门神】','的目标');\n\t\t\t\t\t\ttarget.storage.yxs_menshen2=player;\n\t\t\t\t\t\ttarget.addSkill('yxs_menshen2');\n     }\n    else {       \n            event.finish(); \n    }                     \n   },ai: {expose: \"0.5\",},}","info":"回合结束阶段，你可选择一名其他角色，若如此做，直到你的下回合开始，所有角色对该角色使用的【杀】或【决斗】均视为对你使用"},"nvquan":{"name":"女权","script":"{locked: \"true\",group: [\"nvquan1\",\"nvquan2\",\"nvquan3\"],}","info":"你对男性角色使用【杀】或【决斗】时，对方需连续打出两张【闪】或【杀】响应；你不能成为男性角色的决斗目标"},"qiandu":{"name":"迁都","script":"{}","info":"此模式下不可用"},"weiyi":{"name":"威仪","script":"{trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn (event.source&&event.source.countCards('he'));\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.source)<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.source.chooseToDiscard(2,'he',true);\n\t\t\t\t},logTarget: \"source\",ai: {maixie_defend: \"true\",expose: \"0.3\",result: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.countCards('he')>1&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1];\n\t\t\t\t\t\t\t\tif(get.attitude(target,player)<0) return [1,0,0,-1.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，可以令伤害来源弃置两张牌"},"zhulu":{"name":"逐鹿","script":"{trigger: {global: \"useCardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase!=player&&event.player!=player&&get.type(event.card)=='trick'&&\n\t\t\t\t\t\tevent.cards.filterInD().length>0&&!player.hasSkill('zhulu2')&&\n\t\t\t\t\t\tplayer.countCards('he',{suit:get.suit(event.card)})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar val=get.value(trigger.card);\n\t\t\t\t\tvar suit=get.suit(trigger.card);\n\t\t\t\t\tvar next=player.chooseToDiscard('he','逐鹿：是否弃置一张'+get.translation(suit)+\n\t\t\t\t\t\t'牌并获得'+get.translation(trigger.cards.filterInD())+'？',{suit:suit});\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\treturn val-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill='zhulu';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(trigger.cards.filterInD(),'log','gain2');\n\t\t\t\t\t\tplayer.addTempSkill('zhulu2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"回合外，当有普通锦囊牌结算完毕后，你可以立即弃掉一张相同花色手牌或装备区的牌，获得这张锦囊牌。"},"xieling":{"name":"挟令","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",selectCard: \"2\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},multitarget: \"true\",targetprompt: [\"被移走\",\"移动目标\"],filterTarget: function (card,player,target){\n\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\tvar from=ui.selected.targets[0];\n\t\t\t\t\t\tvar judges=from.getCards('j');\n\t\t\t\t\t\tfor(var i=0;i<judges.length;i++){\n\t\t\t\t\t\t\tif(!target.hasJudge(judges[i].viewAs||judges[i].name)) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(target.isMin()) return false;\n\t\t\t\t\t\tif((from.getEquip(1)&&!target.getEquip(1))||\n\t\t\t\t\t\t\t(from.getEquip(2)&&!target.getEquip(2))||\n\t\t\t\t\t\t\t(from.getEquip(3)&&!target.getEquip(3))||\n\t\t\t\t\t\t\t(from.getEquip(4)&&!target.getEquip(4))||\n\t\t\t\t\t\t\t(from.getEquip(5)&&!target.getEquip(5))) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn target.countCards('ej')>0;\n\t\t\t\t\t}\n\t\t\t\t},selectTarget: \"2\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(targets.length==2){\n\t\t\t\t\t\tplayer.choosePlayerCard('ej',function(button){\n\t\t\t\t\t\t\tif(get.attitude(player,targets[0])>get.attitude(player,targets[1])){\n\t\t\t\t\t\t\t\treturn get.position(button.link)=='j'?10:0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(get.position(button.link)=='j') return -10;\n\t\t\t\t\t\t\t\treturn get.equipValue(button.link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},targets[0]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(get.position(result.buttons[0].link)=='e'){\n\t\t\t\t\t\t\tevent.targets[1].equip(result.buttons[0].link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(result.buttons[0].link.viewAs){\n\t\t\t\t\t\t\tevent.targets[1].addJudge({name:result.buttons[0].link.viewAs},[result.buttons[0].link]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.targets[1].addJudge(result.buttons[0].link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.targets[0].$give(result.buttons[0].link,event.targets[1])\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\t\tif(target.countCards('j')&&get.attitude(player,target)>0) return 1;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)<0){\n\t\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\t\t\tif((target.getEquip(1)&&!players[i].getEquip(1))||\n\t\t\t\t\t\t\t\t\t\t\t\t(target.getEquip(2)&&!players[i].getEquip(2))||\n\t\t\t\t\t\t\t\t\t\t\t\t(target.getEquip(3)&&!players[i].getEquip(3))||\n\t\t\t\t\t\t\t\t\t\t\t\t(target.getEquip(4)&&!players[i].getEquip(4))||\n\t\t\t\t\t\t\t\t\t\t\t\t(target.getEquip(5)&&!players[i].getEquip(5)))\n\t\t\t\t\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.attitude(player,ui.selected.targets[0])>0?-1:1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},expose: \"0.2\",threaten: \"1.5\",},}","info":"出牌阶段，弃掉两张手牌，将任意一名角色装备区或判定区的牌移动到另一名角色对应的区域"},"jieyong":{"name":"节用","script":"{trigger: {player: \"useCardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.cards.filterInD().length==0) return false;\n\t\t\t\t\tif(player.hasSkill('jieyong2')) return false;\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he','是否弃置一张黑色牌并收回'+get.translation(trigger.cards.filterInD())+'？',{color:'black'});\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\treturn get.value(trigger.card)-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill='jieyong';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(trigger.cards.filterInD(),'gain2','log');\n\t\t\t\t\t\tplayer.addTempSkill('jieyong2',['phaseAfter','phaseBegin']);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",},}","info":"你使用的卡牌结算完成后，你可以弃置一张黑色牌并重新获得之。（每回合限一次）"},"feigong":{"name":"非攻","script":"{trigger: {global: \"useCard\",},priority: \"15\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.player!=player&&\n\t\t\t\t\tplayer.countCards('h','sha')>0&&event.targets.contains(player)==false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar effect=0;\n\t\t\t\t\tfor(var i=0;i<trigger.targets.length;i++){\n\t\t\t\t\t\teffect+=get.effect(trigger.targets[i],trigger.card,trigger.player,player);\n\t\t\t\t\t}\n\t\t\t\t\tvar str='弃置一张杀令'+get.translation(trigger.player);\n\t\t\t\t\tif(trigger.targets&&trigger.targets.length){\n\t\t\t\t\t\tstr+='对'+get.translation(trigger.targets);\n\t\t\t\t\t}\n\t\t\t\t\tstr+='的'+get.translation(trigger.card)+'失效';\n\t\t\t\t\tvar next=player.chooseToDiscard('h',{name:'sha'},get.prompt('feigong'));\n\t\t\t\t\tnext.prompt2=str;\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(effect<0){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tnext.autodelay=true;\n\t\t\t\t\tnext.logSkill=['feigong',trigger.player];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",expose: \"0.2\",},}","info":"其他角色使用杀时，若你不是杀的目标，可以弃置一张杀取消之"},"jianai":{"name":"兼爱","script":"{trigger: {player: \"recoverEnd\",},check: function (event,player){\n\t\t\t\t\tif(event.parent.name=='taoyuan'&&event.parent.player==player){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar eff,players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player){\n\t\t\t\t\t\t\teff=0;\n\t\t\t\t\t\t\tif(players[i].hp<players[i].maxHp){\n\t\t\t\t\t\t\t\teff++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(players[i].hp==1&&players[i].maxHp>2){\n\t\t\t\t\t\t\t\teff+=0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\tnum+=eff;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\tnum-=eff;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.targets=game.filterPlayer();\n\t\t\t\t\tevent.targets.remove(player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.targets.shift().recover();\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"每当你回复一点体力，可以令所有其他角色回复一点体力"},"bolehuiyan":{"name":"慧眼","script":"{trigger: {global: \"shaBegin\",},direct: \"true\",priority: \"11\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('bolehuiyan4')) return false;\n\t\t\t\t\tif(event.target.isUnderControl()) return false;\n\t\t\t\t\treturn event.player!=player&&event.target!=player&&event.target.countCards('h')>0;\n\t\t\t\t},group: [\"bolehuiyan2\",\"bolehuiyan3\"],content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('慧眼：预言'+get.translation(trigger.player)+'对'+get.translation(trigger.target)+'的杀能否命中');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl('能命中','不能命中','cancel').ai=function(event){\n\t\t\t\t\t\tif(trigger.player.hasSkill('wushuang')) return 0;\n\t\t\t\t\t\tif(trigger.player.hasSkill('liegong')) return 0;\n\t\t\t\t\t\tif(trigger.player.hasSkill('tieji')) return 0;\n\t\t\t\t\t\tif(trigger.player.hasSkill('juji')) return 0;\n\t\t\t\t\t\tif(trigger.player.hasSkill('retieji')) return 0;\n\t\t\t\t\t\tif(trigger.player.hasSkill('roulin')&&trigger.target.sex=='female') return 0;\n\t\t\t\t\t\tif(trigger.player.hasSkill('nvquan')&&trigger.target.sex=='male') return 0;\n\t\t\t\t\t\tif(trigger.target.hasSkill('yijue2')) return 0;\n\t\t\t\t\t\tif(trigger.target.hasSkill('shejie2')) return 0;\n\t\t\t\t\t\tif(trigger.target.hasSkill('shanguang2')) return 0;\n\n\t\t\t\t\t\tvar equip=trigger.target.getEquip(2);\n\t\t\t\t\t\tif(equip&&equip.name=='bagua') return 1;\n\t\t\t\t\t\treturn trigger.target.countCards('h')<2?0:1;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.dialog){\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t}\n\t\t\t\t\tif(result.control!='cancel'){\n\t\t\t\t\t\tplayer.addTempSkill('bolehuiyan4');\n\t\t\t\t\t\tplayer.logSkill(['bolehuiyan',result.control],trigger.target);\n\t\t\t\t\t\tgame.log(player,'预言'+result.control);\n\t\t\t\t\t\tplayer.storage.bolehuiyan=result.control;\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",},}","info":"当一名有手牌的其他角色成为来源不为你的杀的目标时，你可以预言此杀能否命中，若预言正确，你摸一张牌，否则你须弃置一张牌。每回合限发动一次"},"xiangma":{"name":"相马","script":"{inherit: \"yicong\",trigger: {player: [\"changeHp\"],},audio: \"2\",audioname: [\"re_gongsunzan\"],forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.sgn(player.hp-2.5)!=get.sgn(player.hp-2.5-event.num);\n\t\t\t\t},content: function (){},mod: {globalFrom: function (from,to,current){\n\t\t\t\t\t\tif(from.hp>2) return current-1;\n\t\t\t\t\t},globalTo: function (from,to,current){\n\t\t\t\t\t\tif(to.hp<=2) return current+1;\n\t\t\t\t\t},},ai: {threaten: \"0.8\",},}","info":"锁定技，只要你的体力值大于2点，你的进攻距离+1；只要你的体力值为2点或更低，你的防御距离+1"},"seyou":{"name":"色诱","script":"{skillAnimation: \"true\",unique: \"true\",mark: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.seyou=false;\n\t\t\t\t},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.seyou\n\t\t\t\t},intro: {content: \"limited\",},filterTarget: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('seyou');\n\t\t\t\t\tplayer.storage.seyou=true;\n\t\t\t\t\tevent.targets=game.filterPlayer();\n\t\t\t\t\tevent.targets.remove(player);\n\t\t\t\t\tevent.targets.remove(target);\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\n\t\t\t\t\t\tif(event.targets[i].sex!='male'){\n\t\t\t\t\t\t\tevent.targets.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.current=event.targets.shift();\n\t\t\t\t\t\tif(event.current.countCards('he')&&target.isAlive()){\n\t\t\t\t\t\t\tevent.current.chooseToUse({name:'sha'},target,-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\tplayer.gainPlayerCard(event.current,true,'he');\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(1);\n\t\t\t\t},ai: {order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tif(player.hp>1){\n\t\t\t\t\t\t\t\tif(game.phaseNumber<game.players.length) return 0;\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(players[i].ai.shown==0) return 0;\n\t\t\t\t\t\t\t\t\tif(players[i].sex=='unknown') return 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar effect=0;\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i].sex=='male'&&players[i]!=target&&players[i]!=player&&players[i].countCards('he'))\n\t\t\t\t\t\t\t\teffect+=get.effect(target,{name:'sha'},players[i],target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn effect;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以指定任意1名角色，其他所有男性角色需选择1项执行：（1）对你指定的角色出【杀】；（2）令你获得其一张牌。"},"sheshi":{"name":"蛇噬","script":"{trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tevent.dialog=ui.create.dialog(get.prompt('sheshi'));\n\t\t\t\t\t}\n\t\t\t\t\tif(ui.cardPile.childNodes.length<4){\n\t\t\t\t\t\tvar discardcards=get.cards(4);\n\t\t\t\t\t\tfor(var i=0;i<discardcards.length;i++){\n\t\t\t\t\t\t\tdiscardcards[i].discard();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl('heart2','diamond2','club2','spade2','cancel').ai=function(event){\n\t\t\t\t\t\tif(Math.random()<0.5) return 'club2';\n\t\t\t\t\t\tif(Math.random()<0.5) return 'spade2';\n\t\t\t\t\t\tif(Math.random<2/3) return 'diamond2';\n\t\t\t\t\t\treturn 'heart2';\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.dialog){\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t}\n\t\t\t\t\tif(result.control&&result.control.indexOf('2')!=-1){\n\t\t\t\t\t\tplayer.logSkill('sheshi');\n\t\t\t\t\t\tgame.log(player,'指定的花色为'+get.translation(result.control));\n\t\t\t\t\t\tvar suit=result.control.slice(0,result.control.length-1);\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tfor(var i=0;i<ui.cardPile.childNodes.length;i++){\n\t\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\t\tif(get.suit(card)==suit||i>=3){\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\t\tevent.suit=suit;\n\t\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.cards&&event.cards.length){\n\t\t\t\t\t\tif(get.suit(event.cards[event.cards.length-1])==event.suit){\n\t\t\t\t\t\t\tevent.cards.pop().discard();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.gain(event.cards,'draw2');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每受到1次伤害，可以指定1种花色，依次展示牌堆顶的牌，直到出现指定花色的牌为止，你获得与指定花色不同花色的所有牌（最多展示4张牌）。"},"fengyi":{"name":"凤仪","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",filterTarget: \"true\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.draw(2);\n\t\t\t\t},ai: {result: {target: \"2\",},order: \"1\",threaten: \"1.5\",},}","info":"出牌阶段，你可以弃一张手牌，指定任意目标摸两张牌。（每回合限用一次）"},"wange":{"name":"婉歌","script":"{trigger: {player: \"phaseDrawBegin\",},check: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(player,current)<0&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num--;\n\t\t\t\t\tplayer.addSkill('wange2');\n\t\t\t\t},ai: {threaten: \"1.8\",},}","info":"摸牌时，你可以少摸一张牌，则结束阶段你可以抽取一名其他角色的手牌，至少1张，至多X张（X为你当前的掉血量）。"},"fengyan":{"name":"丰艳","script":"{trigger: {global: \"cardsDiscardAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar evt=event.getParent().relatedEvent;\n\t\t\t\t\tif(!evt||evt.name!='judge') return;\n\t\t\t\t\tif(evt.player.sex!='male') return false;\n\t\t\t\t\tif(get.position(event.cards[0],true)!='d') return false;\n\t\t\t\t\treturn (get.color(event.cards[0])=='red');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(trigger.cards,'gain2');\n\t\t\t\t},}","info":"你可以获得其他男性角色的红色判定牌。"},"nichang":{"name":"霓裳","script":"{trigger: {player: \"phaseDrawBefore\",},check: function (event,player){\n\t\t\t\t\tif(player.skipList.contains('phaseUse')) return true;\n\t\t\t\t\tvar suits=['spade','heart','diamond','club'];\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tsuits.remove(get.suit(cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\treturn suits.length>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.addSkill('nichang2');\n\t\t\t\t},}","info":"摸牌时，你可以选择不摸牌，并在结束阶段展示手牌，每少一种花色摸一张牌"},"jieyin":{"name":"结姻","script":"{audio: \"2\",enable: \"phaseUse\",filterCard: \"true\",usable: \"1\",selectCard: \"2\",check: function (card){\n\t\t\t\t\tvar player=get.owner(card);\n\t\t\t\t\tif(player.countCards('h')>player.hp)\n\t\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t\tif(player.hp<player.maxHp)\n\t\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t\treturn 4-get.value(card)\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.sex!='male') return false;\n\t\t\t\t\tif(target.hp>=target.maxHp) return false;\n\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},ai: {order: \"5.5\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<player.maxHp) return 4;\n\t\t\t\t\t\t\tif(player.countCards('h')>player.hp) return 0\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},target: \"4\",},threaten: \"2\",},}","info":"出牌阶段限一次，你可以弃置两张手牌并选择一名已经受伤的男性角色。你与其各回复一点体力。"},"fenghuo":{"name":"烽火","script":"{enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('e')>0;\n\t\t\t\t},filterCard: \"true\",position: \"e\",viewAs: {name: \"nanman\",},prompt: \"将一张装备区内的牌当南蛮入侵使用\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\tif(player.countCards('h')<player.hp){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 2-get.equipValue(card);\n\t\t\t\t},ai: {order: \"9\",threaten: \"1.1\",wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','sha')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"9\",useful: [5,1],value: \"5\",},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondSha: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"你可以将一张装备区内的牌当作南蛮入侵使用"},"tongling":{"name":"统领","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.tongling=0;\n\t\t\t\t},intro: {content: \"mark\",},forced: \"true\",trigger: {global: \"damageAfter\",},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.isFriendsOf(player)&&player.storage.tongling<3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.tongling++;\n\t\t\t\t\tplayer.syncStorage('tongling');\n\t\t\t\t\tplayer.markSkill('tongling');\n\t\t\t\t},ai: {combo: \"fanpu\",},}","info":"锁定技，每当一名友方角色造成一次伤害，你获得1个统领标记（标记上限为3）"},"fanpu":{"name":"反扑","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.tongling>=3;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canUse('sha',target);\n\t\t\t\t},selectTarget: [1,3],multitarget: \"true\",multiline: \"true\",content: function (){\n\t\t\t\t\tplayer.storage.tongling-=3;\n\t\t\t\t\tplayer.unmarkSkill('tongling');\n\t\t\t\t\tplayer.syncStorage('tongling');\n\t\t\t\t\tplayer.useCard({name:'sha'},targets,false);\n\t\t\t\t},ai: {combo: \"tongling\",order: \"2\",},}","info":"出牌阶段限一次，你可以移去3枚统领标记并视为对攻击范围内的至多3名角色使用一张杀"},"ducai":{"name":"独裁","script":"{enable: \"phaseUse\",usable: \"1\",unique: \"true\",forceunique: \"true\",check: function (card){\n\t\t\t\t\tif(_status.event.player.countCards('h')>=3){\n\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},position: \"he\",filterCard: \"true\",content: function (){\n\t\t\t\t\tplayer.storage.ducai2=cards[0];\n\t\t\t\t\tplayer.addTempSkill('ducai2',{player:'phaseBegin'});\n\t\t\t\t},ai: {order: \"8\",result: {player: \"1\",},},global: \"ducai3\",}","info":"出牌阶段限一次，你可以弃置一张牌，则本轮内除你外的角色不能使用或打出与该手牌花色相同的手牌"},"qiangyun":{"name":"强运","script":"{trigger: {player: \"loseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='guohe'||card.name=='liuxinghuoyu') return 0.5;\n\t\t\t\t\t\t},},},}","info":"每当你失去最后一张手牌，可摸两张牌"},"miaobi":{"name":"妙笔","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discardPlayerCard(target,true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar type=get.type(result.cards[0]);\n\t\t\t\t\t\tif(type!='basic'&&type!='trick'){\n\t\t\t\t\t\t\tplayer.chooseToDiscard('he',true);\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tcard={name:card.name,nature:card.nature,suit:card.suit,number:card.number};\n\t\t\t\t\tif(lib.filter.cardEnabled(card)){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse(card,current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tlib.skill.miaobix.viewAs=card;\n\t\t\t\t\t\t\tvar next=player.chooseToUse();\n\t\t\t\t\t\t\tnext.logSkill='miaobi';\n\t\t\t\t\t\t\tnext.set('openskilldialog','妙笔：将一张手牌当'+get.translation(card)+'使用');\n\t\t\t\t\t\t\tnext.set('norestore',true);\n\t\t\t\t\t\t\tnext.set('_backupevent','miaobix');\n\t\t\t\t\t\t\tnext.set('custom',{\n\t\t\t\t\t\t\t\tadd:{},\n\t\t\t\t\t\t\t\treplace:{window:function(){}}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.backup('miaobix');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以弃置一名其他角色的一张牌，若此牌是基本牌或普通锦囊，你可以将一张手牌当此牌使用；否则你须弃置一张牌"},"zhexian":{"name":"谪仙","script":"{trigger: {player: \"loseEnd\",},usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase!=player;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"当你于一名其他角色的回合内首次失去牌时，你可以摸一张牌"},"guifu":{"name":"鬼斧","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('e')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discardPlayerCard(target,'e',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.asyncDraw([player,target]);\n\t\t\t\t},ai: {order: \"8\",threaten: \"1.5\",result: {target: \"-1\",player: \"0.5\",},},}","info":"出牌阶段限一次，你可以指定一名角色装备区内的一张牌，将其弃掉，自己和对方同时摸取一张牌"},"lshengong":{"name":"神工","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hasCard(function(card){\n\t\t\t\t\t\treturn !get.info(card).unique;\n\t\t\t\t\t},'e');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\tvar info=lib.card[card.name];\n\t\t\t\t\tif(!info) return false;\n\t\t\t\t\treturn !info.image&&!info.fullimage;\n\t\t\t\t},discard: \"false\",lose: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.choosePlayerCard(target,'e',true);\n\t\t\t\t\tnext.ai=get.buttonValue;\n\t\t\t\t\tnext.filterButton=function(button){\n\t\t\t\t\t\treturn !get.info(button.link).unique;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.links[0]){\n\t\t\t\t\t\tcards[0].init([result.links[0].suit,result.links[0].number,result.links[0].name,result.links[0].nature]);\n\t\t\t\t\t\tevent.card=cards[0];\n\t\t\t\t\t\tplayer.chooseTarget('选择一个角色装备'+get.translation(result.links),function(card,player,target){\n\t\t\t\t\t\t\treturn !target.isMin();\n\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\tif(!target.countCards('e',{subtype:get.subtype(event.card)})){\n\t\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.targets&&result.targets[0]&&event.card){\n\t\t\t\t\t\tplayer.$give(event.card,result.targets[0]);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tevent.toequip=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.toequip){\n\t\t\t\t\t\tevent.toequip.equip(event.card);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",threaten: \"1.5\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('e')<3) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选定场上任意一名角色的装备区的非特殊牌，出自己的一张手牌复制该装备，然后可以选择装备上自己或者别的角色的装备区"},"zhensha":{"name":"鸩杀","script":"{trigger: {global: \"dying\",},priority: \"9\",filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=0&&(player.countCards('h','jiu')>0||player.countCards('h',{color:'black'})>=2)&&player!=event.player;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar goon=(get.attitude(player,trigger.player)<0);\n\t\t\t\t\tvar next=player.chooseToDiscard('鸠杀：是否弃置一张酒或两张黑色手牌令'+get.translation(trigger.player)+'立即死亡？');\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\tif(ui.selected.cards[0].name=='jiu') return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(goon){\n\t\t\t\t\t\t\tif(card.name=='jiu') return 2;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.filterCard=function(card){\n\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.color(card)=='black'||card.name=='jiu';\n\t\t\t\t\t};\n\t\t\t\t\tnext.complexCard=true,\n\t\t\t\t\tnext.logSkill=['zhensha',trigger.player];\n\t\t\t\t\tnext.selectCard=function(){\n\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\tif(get.color(ui.selected.cards[0])!='black') return [1,1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [1,2];\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.die();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!trigger.player.isAlive()){\n\t\t\t\t\t\ttrigger.cancel(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"当场上有角色进入濒死状态时，你可以弃置一张酒或两张黑色手牌，则该角色立即死亡。"},"xumou":{"name":"蓄谋","script":"{inherit: \"jushou\",audio: \"true\",trigger: {player: \"phaseJieshuBegin\",},content: function (){\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='guiyoujie') return [0,1];\n\t\t\t\t\t\t},},},}","info":"结束阶段，你可以将武将牌翻面并摸3张牌"},"keji":{"name":"克己","script":"{audio: \"2\",audioname: [\"re_lvmeng\",\"sp_lvmeng\"],trigger: {player: \"phaseDiscardBefore\",},frequent: function (event,player){\n\t\t\t\t\treturn player.needsToDiscard();\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.getHistory('skipped').contains('phaseUse')) return true;\n\t\t\t\t\tvar history=player.getHistory('useCard').concat(player.getHistory('respond'));\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tif(history[i].card.name=='sha'&&history[i].isPhaseUsing()) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},}","info":"弃牌阶段开始时，若你于本回合的出牌阶段内没有过使用或打出过【杀】，则你可以跳过此阶段。"},"tuqiang":{"name":"图强","script":"{trigger: {player: [\"respond\",\"useCard\"],},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='shan';\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {mingzhi: \"false\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\treturn 0.8;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你使用或打出一张闪，你可以摸一张牌"},"kongju":{"name":"控局","script":"{mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.hp<player.maxHp) return num+player.maxHp-player.hp;\n\t\t\t\t\t},targetEnabled: function (card,player,target,now){\n\t\t\t\t\t\tif(target.countCards('h')<target.maxHp){\n\t\t\t\t\t\t\tif(card.name=='shunshou'||card.name=='guohe') return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(target.countCards('h')>target.maxHp){\n\t\t\t\t\t\t\tif(card.name=='lebu') return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，你的手牌上限为你的体力上限；当你的手牌数小于体力上限时，你不能成为过河拆桥或顺手牵羊的目标；当你的手牌数大于体力上限时，你不能成为乐不思蜀的目标"},"xiaoji":{"name":"枭姬","script":"{audio: \"2\",audioname: [\"sp_sunshangxiang\",\"re_sunshangxiang\"],trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.player==player&&evt.es&&evt.es.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.getl(player).es.length;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.count>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('xiaoji')).set('frequentSkill','xiaoji').ai=lib.filter.all;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xiaoji');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {noe: \"true\",reverseEquip: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},},}","info":"当你失去一张装备区内的牌后，你可以摸两张牌。"},"yizhuang":{"name":"易装","script":"{trigger: {player: \"phaseBegin\",},group: \"yizhuang2\",direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(player.countCards('he')){\n\t\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\t\tprompt:get.prompt('yizhuang'),\n\t\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\t\t\t\tif(target.sex!='male') return false;\n\t\t\t\t\t\t\t\tvar name=target.name.indexOf('unknown')==0?target.name2:target.name;\n\t\t\t\t\t\t\t\tif(name==player.storage.yizhuang) return false;\n\n\t\t\t\t\t\t\t\tvar info=lib.character[name];\n\t\t\t\t\t\t\t\tif(info){\n\t\t\t\t\t\t\t\t\tvar skills=info[3];\n\t\t\t\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\t\t\t\tif(lib.translate[skills[j]+'_info']&&lib.skill[skills[j]]&&\n\t\t\t\t\t\t\t\t\t\t\t!lib.skill[skills[j]].unique&&!player.hasSkill(skills[j])){\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\tif(player.additionalSkills.yizhuang&&player.additionalSkills.yizhuang.length>0) return 0;\n\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\t\tif(target.isMin()) return 0;\n\t\t\t\t\t\t\t\treturn 6-target.maxHp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.unmark(player.storage.yizhuang+'_charactermark');\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tplayer.logSkill('yizhuang',result.targets);\n\t\t\t\t\t\tvar name=result.targets[0].name;\n\t\t\t\t\t\tif(name.indexOf('unknown')==0){\n\t\t\t\t\t\t\tname=result.targets[0].name2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tvar skills=lib.character[name][3];\n\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\tif(lib.translate[skills[j]+'_info']&&lib.skill[skills[j]]&&\n\t\t\t\t\t\t\t\t!lib.skill[skills[j]].unique&&!player.hasSkill(skills[j])){\n\t\t\t\t\t\t\t\tlist.push(skills[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.addAdditionalSkill('yizhuang',list);\n\t\t\t\t\t\tplayer.markCharacter(name,null,true,true);\n\t\t\t\t\t\tgame.addVideo('markCharacter',player,{\n\t\t\t\t\t\t\tname:'幻形',\n\t\t\t\t\t\t\tcontent:'',\n\t\t\t\t\t\t\tid:'yizhuang',\n\t\t\t\t\t\t\ttarget:name\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.storage.yizhuang=name;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"准备阶段，你可以弃置一张牌并选择一名男性角色，获得其所有技能，直到你首次受到伤害"},"xiadao":{"name":"侠盗","script":"{trigger: {source: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\tif(event.player.isDead()) return false;\n\t\t\t\t\tvar nh=event.player.countCards('h');\n\t\t\t\t\tif(nh==0) return false;\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player&&players[i]!=event.player&&players[i].countCards('h')<=nh){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar nh=trigger.player.countCards('h');\n\t\t\t\t\tvar att=get.attitude(player,trigger.player);\n\t\t\t\t\tplayer.chooseTarget(get.prompt('xiadao'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target!=trigger.player&&target.countCards('h')<=nh;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tif(att>0) return 0;\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xiadao');\n\t\t\t\t\t\tplayer.line2([trigger.player,result.targets[0]],'green');\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(event.target){\n\t\t\t\t\t\tvar card=trigger.player.getCards('h').randomGet();\n\t\t\t\t\t\tevent.target.gain(card,trigger.player);\n\t\t\t\t\t\ttrigger.player.$giveAuto(card,event.target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.4\",},}","info":"每当你造成一次伤害，你可以令一名手牌数不少于受伤害角色的另一名角色获得其一张手牌"},"sheshu":{"name":"射术","script":"{trigger: {player: \"shaBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.target.hp>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t},mod: {targetInRange: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\t},},}","info":"锁定技，你的杀无视距离；体力值不小于3的角色不能闪避你的杀"},"lguiyin":{"name":"归隐","script":"{unique: \"true\",forceunique: \"true\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('tongyu_guiyin')&&!player.getStat('damage');\n\t\t\t\t},derivation: [\"lzhangyi\",\"jimin\",\"tongyu\"],content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.setAvatar('yxs_luobinhan','yxs_handingdun');\n\t\t\t\t\tplayer.removeSkill('lguiyin');\n\t\t\t\t\tplayer.removeSkill('sheshu');\n\t\t\t\t\tplayer.removeSkill('xiadao');\n\t\t\t\t\tplayer.addSkill('jimin');\n\t\t\t\t\tplayer.addSkill('lzhangyi');\n\t\t\t\t\tplayer.addSkill('tongyu');\n\t\t\t\t\tplayer.addTempSkill('tongyu_guiyin');\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\tif(_status.event.player.hp==1) return 9;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<player.maxHp) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，若你本回合内未造成伤害，你可以摸一张牌，并转变为汉丁顿伯爵（每回合只能转变一次）"},"mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-1。"},"qianglue":{"name":"强掠","script":"{trigger: {player: \"shaMiss\",},priority: \"-1\",filter: function (event){\n\t\t\t\t\treturn event.target.countCards('he')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.color(card)=='black'?1:-1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gainPlayerCard('he',trigger.target);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你的杀被闪避时，你可以进行一次判定，若结果为黑色，你可以获得对方的一张牌"},"tiewan":{"name":"铁腕","script":"{trigger: {global: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card.viewAs||event.card.name)=='delay'&&event.player!=player;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt('tiewan'),\n\t\t\t\t\t\tfilterCard:{color:'red'},\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player.canUse({name:'lebu'},target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.effect(target,{name:'lebu'},player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('tiewan');\n\t\t\t\t\t\tplayer.useCard({name:'lebu'},result.cards,result.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"每当其他角色使用延时类锦囊牌时，你可以立即将一张红色牌当作乐不思蜀使用"},"chajue":{"name":"察觉","script":"{trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('chajue2',{player:'phaseBegin'});\n\t\t\t\t},}","info":"锁定技，你的回合外，你每受到一次伤害，任何【杀】或普通锦囊牌均对你无效，直到你的回合开始"},"heqin":{"name":"和亲","script":"{skillAnimation: \"true\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.heqin;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.sex=='male'&&target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('heqin');\n\n\t\t\t\t\tplayer.addSkill('heqin2');\n\t\t\t\t\ttarget.addSkill('heqin2');\n\n\t\t\t\t\ttarget.marks.heqin=target.markCharacter(player,{\n\t\t\t\t\t\tname:'和亲',\n\t\t\t\t\t\tcontent:'摸牌阶段摸牌数+1'\n\t\t\t\t\t});\n\t\t\t\t\tgame.addVideo('markCharacter',target,{\n\t\t\t\t\t\tname:'放权',\n\t\t\t\t\t\tcontent:'摸牌阶段摸牌数+1',\n\t\t\t\t\t\tid:'heqin',\n\t\t\t\t\t\ttarget:player.dataset.position\n\t\t\t\t\t});\n\n\t\t\t\t\tplayer.storage.heqin=target;\n\t\t\t\t\ttarget.storage.heqin=player;\n\n\t\t\t\t\tplayer.marks.heqin=player.markCharacter(target,{\n\t\t\t\t\t\tname:'和亲',\n\t\t\t\t\t\tcontent:'摸牌阶段摸牌数+1'\n\t\t\t\t\t});\n\t\t\t\t\tgame.addVideo('markCharacter',player,{\n\t\t\t\t\t\tname:'放权',\n\t\t\t\t\t\tcontent:'摸牌阶段摸牌数+1',\n\t\t\t\t\t\tid:'heqin',\n\t\t\t\t\t\ttarget:target.dataset.position\n\t\t\t\t\t});\n\t\t\t\t},ai: {order: \"1\",result: {target: \"1\",},},}","info":"限定技，你可以与场上一名男性角色形成【和亲】状态，你与该男性角色于摸牌阶段摸牌数+1。你或者男性角色阵亡时，【和亲】状态消失"},"wluoyan":{"name":"落雁","script":"{trigger: {player: \"damageBefore\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t},ai: {noDirectDamage: \"true\",},}","info":"锁定技，你防止即将受到的伤害，改为流失一点体力"},"hanqiang":{"name":"寒枪","script":"{mod: {attackFrom: function (from,to,distance){\n\t\t\t\t\t\tif(!from.getEquip(1)) return distance-1\n\t\t\t\t\t},},}","info":"锁定技，当你没装备武器时，攻击范围+1"},"biaoqi":{"name":"骠骑","script":"{trigger: {player: \"shaBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\tvar range=player.getAttackRange();\n\t\t\t\t\tif(range>trigger.target.hp){\n\t\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(range<trigger.target.hp){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，当你出杀指定目标后，若你的攻击范围大于目标体力值，则此杀不可闪避；若你的攻击范围小于目标体力值，你摸一张牌"},"shentan":{"name":"神探","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('h')>0&&get.distance(player,target)<=2;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar hs=target.getCards('h');\n\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\tevent.card=hs.randomGet();\n\t\t\t\t\t\tplayer.gain(event.card,target);\n\t\t\t\t\t\ttarget.$giveAuto(event.card,player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar source=target;\n\t\t\t\t\tplayer.chooseTarget('选择一个目标送出'+get.translation(event.card),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>3&&player.countCards('h')>target.countCards('h')){\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets[0].gain(card,player);\n\t\t\t\t\t\tplayer.$give(1,result.targets[0]);\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {target: \"-1\",player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌，获得距离2以内的一名角色的手牌，并可以将其交给任意一名角色"},"kanpo":{"name":"看破","script":"{audio: \"2\",enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('h',{color:'black'})>0;\n\t\t\t\t},viewAs: {name: \"wuxie\",},prompt: \"将一张黑色手牌当无懈可击使用\",check: function (card){\n\t\t\t\t\tvar tri=_status.event.getTrigger();\n\t\t\t\t\tif(tri&&tri.card&&tri.card.name=='chiling') return -1;\n\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t},threaten: \"1.2\",ai: {basic: {useful: [6,4],value: [6,4],},result: {player: \"1\",},expose: \"0.2\",},}","info":"你可以将你的任意一张黑色手牌当做【无懈可击】使用。"},"bingsheng":{"name":"兵圣","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: function (card){\n\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\treturn get.suit(card)!=get.suit(ui.selected.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},complexCard: \"true\",selectCard: \"2\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hp==Infinity) return false;\n\t\t\t\t\tif(target.hp>player.hp) return true;\n\t\t\t\t\tif(target.hp<player.hp&&target.hp<target.maxHp) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=target.hp-player.hp;\n\t\t\t\t\tif(num>2){\n\t\t\t\t\t\tnum=2;\n\t\t\t\t\t}\n\t\t\t\t\tif(num<-2){\n\t\t\t\t\t\tnum=-2;\n\t\t\t\t\t}\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\ttarget.damage(num);\n\t\t\t\t\t}\n\t\t\t\t\telse if(num<0&&target.hp<target.maxHp){\n\t\t\t\t\t\ttarget.recover(-num);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar num;\n\t\t\t\t\t\t\tif(player.hp>target.maxHp){\n\t\t\t\t\t\t\t\tnum=player.hp-target.maxHp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnum=player.hp-target.hp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==1&&num){\n\t\t\t\t\t\t\t\treturn num+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置两张花色不同的手牌，指定一名其他角色使其体力值与你相同（体力最多变化2点）"},"taolue":{"name":"韬略","script":"{mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+1;\n\t\t\t\t\t},},}","info":"锁定技，你的手牌上限+1"},"sanbanfu":{"name":"三板斧","script":"{trigger: {player: \"shaBegin\",},filter: function (event,player){\n\t\t\t\t\tif(player.storage.sanbanfu||player.storage.sanbanfu2) return false;\n\t\t\t\t\treturn !event.directHit;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.target)>=0) return false;\n\t\t\t\t\tif(event.target.getEquip('bagua')) return false;\n\t\t\t\t\tif(event.target.hasSkillTag('respondShan')&&event.target.countCards('h')>=3) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=trigger.target.chooseToRespond({name:'shan'});\n\t\t\t\t\tnext.autochoose=lib.filter.autoRespondShan;\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\treturn get.unuseful2(card);\n\t\t\t\t\t};\n\t\t\t\t\tplayer.storage.sanbanfu=false;\n\t\t\t\t\tplayer.storage.sanbanfu2=false;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t\t\tplayer.storage.sanbanfu2=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.sanbanfu=true;\n\t\t\t\t\t}\n\t\t\t\t},group: [\"sanbanfu2\",\"sanbanfu3\"],}","info":"当你对其他角色使用杀时，你可以使此杀有如下效果：若对方没有出闪，其受到2点伤害；若对方打出了一张闪，你与其各受到1点伤害；若对方打出了两张闪，你受到一点伤害"},"ysheshen":{"name":"舍身","script":"{inherit: \"yiji\",audio: \"2\",trigger: {player: \"damageEnd\",},frequent: \"true\",filter: function (event){\n\t\t\t\t\treturn (event.num>0)\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tevent.cards=get.cards(2);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.cards.length>1){\n\t\t\t\t\t\tplayer.chooseCardButton('将“遗计”牌分配给任意角色',true,event.cards,[1,event.cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\tif(ui.selected.buttons.length==0) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.cards.length==1){\n\t\t\t\t\t\tevent._result={links:event.cards.slice(0),bool:true};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(5);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.togive=result.links.slice(0);\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(result.links)+'交给一名角色',true).set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.enemy){\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(att>0){\n\t\t\t\t\t\t\t\treturn att/(1+target.countCards('h'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn att/100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).set('enemy',get.value(event.togive[0],player,'raw')<0);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.targets.length){\n\t\t\t\t\t\tresult.targets[0].gain(event.togive,'draw');\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tgame.log(result.targets[0],'获得了'+get.cnNumber(event.togive.length)+'张牌');\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tif(event.count>0) player.chooseBool(get.prompt2(event.name)).set('frequentSkill',event.name);\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\tif(player.needsToDiscard()){\n\t\t\t\t\t\t\t\t\t\tnum=0.7;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tnum=0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,num*2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,num*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,num*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一点伤害，可以观看牌堆顶的两张牌，并将其交给任意1~2名角色"},"changnian":{"name":"长念","script":"{forbid: [\"boss\"],trigger: {player: \"dieBegin\",},direct: \"true\",unique: \"true\",derivation: \"changnian2\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('changnian'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=player.getCards('hej');\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t// if(player.storage.shuiyun&&player.storage.shuiyun.length){\n\t\t\t\t\t\t// \ttarget.gainMaxHp();\n\t\t\t\t\t\t// \ttarget.recover(player.storage.shuiyun.length);\n\t\t\t\t\t\t// \tcards=cards.concat(player.storage.shuiyun);\n\t\t\t\t\t\t// \tplayer.storage.shuiyun.length=0;\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tplayer.$give(cards,target);\n\t\t\t\t\t\ttarget.gain(cards);\n\t\t\t\t\t\ttarget.addSkill('changnian2');\n\t\t\t\t\t\tplayer.logSkill('changnian',target);\n\t\t\t\t\t\ttarget.marks.changnian=target.markCharacter(player,{\n\t\t\t\t\t\t\tname:'长念',\n\t\t\t\t\t\t\tcontent:'<div class=\"skill\">【追思】</div><div>锁定技，结束阶段，你摸一张牌</div>'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tgame.addVideo('markCharacter',target,{\n\t\t\t\t\t\t\tname:'长念',\n\t\t\t\t\t\t\tcontent:'<div class=\"skill\">【追思】</div><div>锁定技，结束阶段，你摸一张牌</div>',\n\t\t\t\t\t\t\tid:'changnian',\n\t\t\t\t\t\t\ttarget:player.dataset.position\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",},}","info":"你死亡时，可以将所有牌交给一名其他角色，令其获得技能【追思】"},"wushuang":{"name":"无双","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"re_lvbu\",\"shen_lvbu\"],forced: \"true\",locked: \"true\",group: [\"wushuang1\",\"wushuang2\"],}","info":"锁定技，当你使用【杀】或【决斗】指定目标后，你令此牌需要依次使用或打出两张【闪】或【杀】响应。"},"ciqiu":{"name":"刺酋","script":"{unique: \"true\",trigger: {source: \"damageBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player.hp==event.player.maxHp&&event.notLink();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t\ttrigger._ciqiu3=true;\n\t\t\t\t},group: [\"ciqiu2\"],}","info":"锁定技，每当你使用【杀】对目标角色造成伤害时，若该角色未受伤，你令此伤害+1；若其因此进入濒死状态，你令其死亡，然后你失去“刺酋”。 "},"jianxiong":{"name":"奸雄","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn get.itemtype(event.cards)=='cards'&&get.position(event.cards[0],true)=='o';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(trigger.cards,'gain2');\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1];\n\t\t\t\t\t\t\tif(get.tag(card,'damage')) return [1,0.55];\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以获得对你造成伤害的牌。"},"batu":{"name":"霸图","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<game.countGroup();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(game.countGroup()-player.countCards('h'));\n\t\t\t\t},ai: {threaten: \"1.3\",},}","info":"结束阶段，你可以将手牌数补至X，X为现存的势力数"},"longdan":{"name":"龙胆","script":"{audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],group: [\"longdan_sha\",\"longdan_shan\",\"longdan_draw\"],subSkill: {draw: {trigger: {player: [\"useCard\",\"respond\"],},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!get.zhu(player,'shouyue')) return false;\n\t\t\t\t\t\t\treturn event.skill=='longdan_sha'||event.skill=='longdan_shan';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tplayer.storage.fanghun2++;\n\t\t\t\t\t\t},sub: \"true\",},sha: {audio: \"2\",audioname: [\"re_zhaoyun\"],enable: [\"chooseToUse\",\"chooseToRespond\"],filterCard: {name: \"shan\",},viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\t},prompt: \"将一张闪当杀使用或打出\",check: function (){return 1},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondSha')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\t\t},order: function (){\n\t\t\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t\t\t},useful: \"-1\",value: \"-1\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},sub: \"true\",},shan: {audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: {name: \"sha\",},viewAs: {name: \"shan\",},prompt: \"将一张杀当闪使用或打出\",check: function (){return 1},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return false;\n\t\t\t\t\t\t},ai: {respondShan: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return false;\n\t\t\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},order: \"4\",useful: \"-1\",value: \"-1\",basic: {useful: [7,2],value: [7,2],},result: {player: \"1\",},},sub: \"true\",},},}","info":"你可以将【杀】当做【闪】，或将【闪】当做【杀】使用或打出。"},"wumu":{"name":"武穆","script":"{mod: {targetInRange: function (card,player){\n\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='black') return true;\n\t\t\t\t\t},cardUsable: function (card){\n\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return Infinity;\n\t\t\t\t\t},},trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&get.color(event.card)=='red';\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tif(player.stat[player.stat.length-1].card.sha>0){\n\t\t\t\t\t\tplayer.stat[player.stat.length-1].card.sha--;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，你的黑杀无视距离，红色不计入回合内的出杀限制"},"yanyi":{"name":"演绎","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {color: \"black\",},position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseControl('heart2','diamond2','club2','spade2').ai=function(event){\n\t\t\t\t\t\tswitch(Math.floor(Math.random()*5)){\n\t\t\t\t\t\t\tcase 0:return 'heart2';\n\t\t\t\t\t\t\tcase 1:case 4:return 'diamond2';\n\t\t\t\t\t\t\tcase 2:return 'club2';\n\t\t\t\t\t\t\tcase 3:return 'spade2';\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tgame.log(player,'选择了'+get.translation(result.control));\n\t\t\t\t\tevent.choice=result.control.slice(0,result.control.length-1);\n\t\t\t\t\ttarget.popup(result.control);\n\t\t\t\t\ttarget.showHandcards();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(target.countCards('h',{suit:event.choice})){\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,target);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张黑色牌，指定1名角色和1种花色，若被指定角色的手牌中含有此花色，则受到1点伤害"},"jiean":{"name":"结案","script":"{trigger: {source: \"damageEnd\",},frequent: \"true\",filter: function (event){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.player.isAlive()&&event.parent.name=='yanyi'&&event.player.hp<event.player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw(trigger.player.maxHp-trigger.player.hp);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.cards=result;\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\treturn _status.event.parent.cards.contains(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectCard:[1,event.cards.length],\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>0) return -1;\n\t\t\t\t\t\t\treturn (_status.event.player.countCards('h')-_status.event.player.hp);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target)-4;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:'请选择要送人的卡牌'\n\t\t\t\t\t});\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets[0].gain(result.cards,player);\n\t\t\t\t\t\tplayer.$give(result.cards.length,result.targets[0]);\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(result.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.cards.length) event.goto(2);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当【演绎】造成伤害时，你可以摸X张牌，并以任意数量分配给任意角色（X为被【演绎】造成伤害角色的已损失体力值）。"},"baihe":{"name":"捭阖","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",filterTarget: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(target.isLinked()){\n\t\t\t\t\t\ttarget.link();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.link();\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(target.countCards('h')){\n\t\t\t\t\t\ttarget.chooseToDiscard('h',true);\n\t\t\t\t\t}\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(!player.hasSkill('xiushen')) return 0;\n\t\t\t\t\t\t\tif(target.isLinked()) return 0;\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked();\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌，选择以下1项执行：(1)横置1名未横置角色，该角色摸一张牌；(2)重置一名已横置角色，该角色弃置一张手牌"},"yinyang":{"name":"阴阳","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",selectCard: \"2\",filterTarget: \"true\",selectTarget: \"3\",content: function (){\n\t\t\t\t\ttarget.link();\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},ai: {order: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.isLinked()) return 1;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置两张手牌并选择3名角色，分别横置或重置这些角色"},"xiushen":{"name":"修身","script":"{trigger: {player: \"phaseUseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.isLinked();\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {threaten: \"1.6\",},}","info":"锁定技，出牌阶段结束时，若场上有横置角色，你摸两张牌"},"chujia":{"name":"初嫁","script":"{enable: \"phaseUse\",filterCard: function (card){\n\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\treturn get.color(card)==get.color(ui.selected.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},complexCard: \"true\",usable: \"1\",selectCard: \"2\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hp<target.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(target.maxHp>target.hp){\n\t\t\t\t\t\ttarget.draw(target.maxHp-target.hp);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar num=target.maxHp-target.hp;\n\t\t\t\t\t\t\tif(num>2) return num;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置两张相同颜色的手牌，指定任意一名角色摸X张牌。(X为该角色已损失的体力值) "},"zhijie":{"name":"知节","script":"{enable: \"phaseUse\",usable: \"1\",viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('h',{suit:'heart'})>0;\n\t\t\t\t},viewAs: {name: \"wuzhong\",},filterCard: {suit: \"heart\",},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},ai: {basic: {order: \"7.2\",useful: \"4.5\",value: \"9.2\",},result: {target: \"2\",},tag: {draw: \"2\",},},}","info":"出牌阶段限一次，你的红桃手牌可以当做无中生有使用"},"dili":{"name":"底力","script":"{trigger: {player: \"phaseDrawBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num+=Math.min(2, Math.ceil((player.maxHp-player.hp)/2));\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tvar num=Math.min(2, Math.ceil((player.maxHp-player.hp)/2));\n\t\t\t\t\t\tif(num==2) return 2;\n\t\t\t\t\t\tif(num==1) return 1;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},maixie: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(target.maxHp<=3) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return [0,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.tag(card,'recover')&&player.hp>=player.maxHp-1) return [0,0];\n\t\t\t\t\t\t},},},}","info":"锁定技，摸牌阶段，你额外摸X张牌，X为你已损失的体力值的一半，向上取整且最多为2"},"kuangchan":{"name":"狂禅","script":"{ai: {neg: \"true\",},init: function (player){\n\t\t\t\t\tif(player.isZhu){\n\t\t\t\t\t\tplayer.maxHp--;\n\t\t\t\t\t\tplayer.update();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，你做主公时，不增加体力上限"},"zyhufu":{"name":"胡服","script":"{trigger: {player: \"phaseDrawBegin\",},filter: function (event,player){\n\t\t\t\t\treturn !player.getEquip(2);\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},ai: {threaten: \"1.3\",},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.getEquip(2)) return num+5;\n\t\t\t\t\t},},}","info":"锁定技，当你的装备区内没有防具牌时，你摸牌阶段额外摸一张牌；当你装备区内有防具牌时，你的手牌上限+5"},"hanbei":{"name":"捍北","script":"{trigger: {player: \"shaBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.getEquip(3)||player.getEquip(4)) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t},}","info":"锁定技，你的装备区有马时，你的杀不可闪避"},"shiqin":{"name":"弑亲","script":"{trigger: {global: \"dying\",},priority: \"9\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.hp<=0&&event.player.group=='qun';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0;\n\t\t\t\t},forced: \"true\",logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t\ttrigger.player.die();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!trigger.player.isAlive()){\n\t\t\t\t\t\ttrigger.cancel(true);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，其他群势力角色濒死时，你令其立即死亡"},"yaoyi":{"name":"徭役","script":"{trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.group!='qun'&&current!=player;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('yaoyi'),[1,2],function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')&&target.group!='qun'&&target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn 0.5-get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yaoyi',result.targets);\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets&&event.targets.length){\n\t\t\t\t\t\tevent.target=event.targets.shift();\n\t\t\t\t\t\tevent.target.chooseCard('交给'+get.translation(player)+'一张手牌',true).ai=function(card){\n\t\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length){\n\t\t\t\t\t\tevent.target.$give(1,player);\n\t\t\t\t\t\tplayer.gain(result.cards,event.target);\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(2);\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",expose: \"0.2\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(players[i].group!='qun'&&\n\t\t\t\t\t\t\t\t\t\tget.attitude(player,players[i])<=0&&players[i]!=player){\n\t\t\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,get.tag(card,'damage')*2];\n\t\t\t\t\t\t\t\t\t\tif(target.hp==3) return [1,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\t\t\tif(target.hp==2) return [1,get.tag(card,'damage')*0.5];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，你可以令至多2名非群势力角色交给你一张手牌"},"luobi":{"name":"落笔","script":"{trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw(player.maxHp-player.hp);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.cards=result;\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\treturn _status.event.getParent().cards.contains(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectCard:[1,event.cards.length],\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>0) return -1;\n\t\t\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\t\t\treturn (_status.event.player.countCards('h')-_status.event.player.hp);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){\n\t\t\t\t\t\t\t\treturn 1-att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att-4;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:'请选择要送人的卡牌'\n\t\t\t\t\t});\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tresult.targets[0].gain(result.cards,player);\n\t\t\t\t\t\tplayer.$give(result.cards.length,result.targets[0]);\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(result.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.cards.length) event.goto(2);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，可以摸数量等同于已损失体力值的牌，并以任意方式分配给任意角色"},"fengliu":{"name":"风流","script":"{trigger: {player: \"phaseDrawBegin\",},filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.sex=='female';\n\t\t\t\t\t});\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.sex=='female';\n\t\t\t\t\t});\n\t\t\t\t\tif(num>2) num=2;\n\t\t\t\t\ttrigger.num+=num;\n\t\t\t\t},ai: {threaten: function (){\n\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn current.sex=='female';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tswitch(num){\n\t\t\t\t\t\t\tcase 0:return 1;\n\t\t\t\t\t\t\tcase 1:return 1.3;\n\t\t\t\t\t\t\tdefault:return 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，摸牌阶段，你额外摸X张牌，X为存活女性角色数且不超过2"},"zbudao":{"name":"布道","script":"{trigger: {player: \"phaseDrawBegin\",},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t\tplayer.addTempSkill('zbudao2','phaseDrawAfter');\n\t\t\t\t},ai: {threaten: \"1.3\",},}","info":"摸牌阶段，你可以额外摸一张牌，然后将摸到的牌中的一张交给一名其他角色"},"taiji":{"name":"太极","script":"{trigger: {player: [\"useCard\",\"respond\"],},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='shan'&&player.hasSha();\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\tplayer.chooseToUse({name:'sha'},'太极：是否使用一张杀？').logSkill='taiji';\n\t\t\t\t},}","info":"每当你使用或打出一张闪，你可以使用一张杀"},"huli":{"name":"护理","script":"{enable: \"phaseUse\",filterCard: {suit: \"heart\",},filterTarget: function (card,player,target){\n\t\t\t\t\treturn get.distance(player,target)<=1&&lib.filter.cardEnabled({name:'tao'},target,target);\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},discard: \"false\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h',{suit:'heart'})){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},prepare: \"throw\",content: function (){\n\t\t\t\t\tplayer.useCard({name:'tao'},cards,targets[0]).animate=false;\n\t\t\t\t},ai: {order: \"9.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,target);\n\t\t\t\t\t\t},},threaten: \"1.6\",},}","info":"出牌阶段，你可以将一张红桃手牌当作桃对距离1以内的角色使用"},"xianqu":{"name":"先驱","script":"{mod: {targetEnabled: function (card){\n\t\t\t\t\t\tif(card.name=='sha'&&card.number<8) return false;\n\t\t\t\t\t},},}","info":"锁定技，你不能成为点数小于8的杀的目标"},"yixin":{"name":"医心","script":"{skillAnimation: \"true\",unique: \"true\",mark: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.yixin=false;\n\t\t\t\t},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.yixin&&player.countCards('he')>2;\n\t\t\t\t},intro: {content: \"limited\",},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.isDamaged();\n\t\t\t\t},filterCard: \"true\",position: \"he\",selectCard: \"2\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('yixin');\n\t\t\t\t\tplayer.storage.yixin=true;\n\t\t\t\t\tvar num=Math.min(4,target.maxHp-target.hp);\n\t\t\t\t\ttarget.recover(num);\n\t\t\t\t\tif(num<4){\n\t\t\t\t\t\ttarget.draw(4-num);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9.6\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp==1&&target.maxHp>=3){\n\t\t\t\t\t\t\t\treturn get.recoverEffect(target,player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"限定技，你可以弃置两张牌，然后令一名已受伤角色回复X点体力并摸4-X张牌（X为该角色已损失的体力值且不超过4）"},"zhuxin":{"name":"诛心","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,target);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以与一名其他角色拼点，若你赢，你对其造成一点伤害"},"wlianhuan":{"name":"连环","script":"{trigger: {source: \"damageBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&player.countCards('e');\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseToDiscard('e',get.prompt('wlianhuan',trigger.player),'弃置一张装备区内的牌使伤害+1');\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(get.attitude(player,trigger.player)<0){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill=['wlianhuan',trigger.player];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"你使用杀造成伤害时，可以弃置一张装备区内的牌并令伤害+1"},"liebo":{"name":"裂帛","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn Math.abs(target.countCards('h')-player.countCards('h'))<=1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.swapHandcards(target);\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.value(card)>=8;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn get.attitude(player,current)<=0&&current.countCards('h')==nh+1;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn 9;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},result: {player: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att>0) return 0;\n\t\t\t\t\t\t\tif(player.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn get.value(card)>=8;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar n1=target.countCards('h'),n2=player.countCards('h');\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tif(n1-n2==1){\n\t\t\t\t\t\t\t\tnum=1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.countCards('h','du')){\n\t\t\t\t\t\t\t\tif(n1==n2) num=0.5;\n\t\t\t\t\t\t\t\telse num=0.1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(att==0){\n\t\t\t\t\t\t\t\tnum/=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以将你的手牌与一名其他角色交换（手牌数之差不能多于1）"},"yaoji":{"name":"妖姬","script":"{trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.isIn()&&event.source!=player&&!event.source.hasJudge('lebu');\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.source)<=0;\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\tvar card=game.createCard('lebu');\n\t\t\t\t\ttrigger.source.addJudge(card);\n\t\t\t\t\ttrigger.source.$draw(card);\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {maixie_defend: \"true\",},}","info":"每当你受到一次伤害，你可以将一张乐不思蜀置入伤害来源的判定区"},"guimian":{"name":"鬼面","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&_status.currentPhase==player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.getStat().card.sha--;\n\t\t\t\t},}","info":"锁定技，每当你在出牌阶段使用杀造成伤害，本阶段内出杀次数上限+1"},"lyuxue":{"name":"浴血","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.player.isIn()&&!event.player.hasSkill('lyuxue2');\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.player.addSkill('lyuxue2');\n\t\t\t\t},subSkill: {clear: {trigger: {player: [\"phaseBegin\",\"dieBegin\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.hasSkill('lyuxue2');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(!num) return false;\n\t\t\t\t\t\t\tif(event.name=='die') return true;\n\t\t\t\t\t\t\treturn num>=Math.floor(game.countPlayer()/2);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.hasSkill('lyuxue2');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlist.sortBySeat();\n\t\t\t\t\t\t\tevent.list=list;\n\t\t\t\t\t\t\tplayer.line(list,'green');\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\t\t\tevent.list.shift().removeSkill('lyuxue2');\n\t\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},group: \"lyuxue_clear\",}","info":"锁定技，每当你造成一次伤害，若目标没有浴血标记，你令其获得一个浴血标记；当一名角色失去浴血标记时，其流失一点体力；准备阶段，若场上浴血标记的数量不少于存活角色数的一半（向下取整），你清空浴血标记；当你即将死亡时，你清空浴血标记"}},"card":{},"hero":{"yxs_qinqiong":{"name":"秦琼","attr":["male","wei",4,["yxs_fanji","yxs_menshen"],[]]},"yxs_wuzetian":{"name":"武则天","attr":["female","wu",4,["nvquan","qiandu","weiyi"]]},"yxs_caocao":{"name":"曹操","attr":["male","wei",4,["zhulu","xieling"]]},"yxs_mozi":{"name":"墨子","attr":["male","qun",3,["jieyong","feigong","jianai"]]},"yxs_bole":{"name":"伯乐","attr":["male","wu",3,["bolehuiyan","xiangma"]]},"yxs_aijiyanhou":{"name":"埃及艳后","attr":["female","qun",3,["seyou","sheshi"]]},"yxs_diaochan":{"name":"貂蝉","attr":["female","qun",3,["fengyi","wange"]]},"yxs_yangyuhuan":{"name":"杨玉环","attr":["female","wu",3,["fengyan","nichang"]]},"yxs_baosi":{"name":"褒姒","attr":["female","wu",3,["jieyin","fenghuo"]]},"yxs_napolun":{"name":"拿破仑","attr":["male","wei",4,["tongling","fanpu"]]},"yxs_kaisa":{"name":"凯撒","attr":["male","shu",4,["ducai"]]},"yxs_zhuyuanzhang":{"name":"朱元璋","attr":["male","wu",4,["qiangyun"]]},"yxs_libai":{"name":"李白","attr":["male","qun",3,["miaobi","zhexian"]]},"yxs_luban":{"name":"鲁班","attr":["male","wu",3,["guifu","lshengong"]]},"yxs_lvzhi":{"name":"吕雉","attr":["female","shu",4,["zhensha","xumou"]]},"yxs_goujian":{"name":"勾践","attr":["male","wu",3,["keji","tuqiang"]]},"yxs_lishimin":{"name":"李世民","attr":["male","qun",4,["kongju"]]},"yxs_huamulan":{"name":"花木兰","attr":["female","shu",3,["xiaoji","yizhuang"]]},"yxs_luobinhan":{"name":"罗宾汉","attr":["male","wu",4,["xiadao","sheshu","lguiyin"]]},"yxs_chengjisihan":{"name":"成吉思汗","attr":["male","qun",4,["mashu","qianglue"]]},"yxs_mingchenghuanghou":{"name":"明成皇后","attr":["female","shu",3,["tiewan","chajue"]]},"yxs_wangzhaojun":{"name":"王昭君","attr":["female","wei",3,["heqin","wluoyan"]]},"yxs_luocheng":{"name":"罗成","attr":["male","wu",4,["hanqiang","biaoqi"]]},"yxs_direnjie":{"name":"狄仁杰","attr":["male","wei",3,["shentan","kanpo"]]},"yxs_sunwu":{"name":"孙武","attr":["male","wu",3,["bingsheng","taolue"]]},"yxs_chengyaojin":{"name":"程咬金","attr":["male","shu",4,["sanbanfu"]]},"yxs_yujix":{"name":"虞姬","attr":["female","shu",3,["ysheshen","changnian"]]},"yxs_xiangyu":{"name":"项羽","attr":["male","shu",4,["wushuang","ciqiu"]]},"yxs_yingzheng":{"name":"嬴政","attr":["male","qun",4,["jianxiong","batu"]]},"yxs_yuefei":{"name":"岳飞","attr":["male","qun",4,["longdan","wumu"]]},"yxs_fuermosi":{"name":"福尔摩斯","attr":["male","wei",3,["yanyi","jiean"]]},"yxs_guiguzi":{"name":"鬼谷子","attr":["male","qun",3,["baihe","yinyang","xiushen"]]},"yxs_xiaoqiao":{"name":"小乔","attr":["female","wu",3,["chujia","zhijie"]]},"yxs_luzhishen":{"name":"鲁智深","attr":["male","wei",4,["dili","kuangchan"]]},"yxs_zhaoyong":{"name":"赵雍","attr":["male","shu",3,["zyhufu","hanbei"]]},"yxs_yangguang":{"name":"杨广","attr":["male","qun",3,["shiqin","yaoyi"]]},"yxs_tangbohu":{"name":"唐伯虎","attr":["male","qun",3,["luobi","fengliu"]]},"yxs_zhangsanfeng":{"name":"张三丰","attr":["male","wei",4,["zbudao","taiji"]]},"yxs_nandinggeer":{"name":"南丁格尔","attr":["female","shu",3,["huli","xianqu","yixin"]]},"yxs_weizhongxian":{"name":"魏忠贤","attr":["male","qun",3,["zhuxin","wlianhuan"]]},"yxs_meixi":{"name":"妹喜","attr":["female","shu",3,["liebo","yaoji"]]},"yxs_lanlinwang":{"name":"兰陵王","attr":["male","shu",4,["guimian","lyuxue"]]}}},"ow":{"name":"守望先锋","skill":{"shanxian":{"name":"闪现","script":"{trigger: {global: \"phaseBefore\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&!player.isTurnedOver()&&!player.storage.shanxian;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0&&\n\t\t\t\t\t((player.countCards('h')>player.hp&&player.countCards('h','lebu')==0)||get.distance(player,event.player)>1);\n\t\t\t\t},intro: {content: function (storage,player){\n\t\t\t\t\t\tvar str='';\n\t\t\t\t\t\tif(player.storage.shanxian_h.length){\n\t\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\t\tstr+='手牌区：'+get.translation(player.storage.shanxian_h);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tstr+='手牌区：'+(player.storage.shanxian_h.length)+'张牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.storage.shanxian_e.length){\n\t\t\t\t\t\t\tif(str.length) str+='、';\n\t\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\t\tstr+='装备区：'+get.translation(player.storage.shanxian_e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tstr+='装备区：'+(player.storage.shanxian_e.length)+'张牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},mark: function (dialog,content,player){\n\t\t\t\t\t\tif(player.storage.shanxian_h.length){\n\t\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\t\tdialog.add('<div class=\"text center\">手牌区</div>');\n\t\t\t\t\t\t\t\tdialog.addSmall(player.storage.shanxian_h);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tdialog.add('<div class=\"text center\">手牌区：'+player.storage.shanxian_h.length+'张牌</div>');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.storage.shanxian_e.length){\n\t\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\t\tdialog.add('<div class=\"text center\">装备区</div>');\n\t\t\t\t\t\t\t\tdialog.addSmall(player.storage.shanxian_e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tdialog.add('<div class=\"text center\">装备区：'+player.storage.shanxian_e.length+'张牌</div>');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},logTarget: \"player\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(!get.is.altered('shanxian')){\n\t\t\t\t\t\tplayer.draw(false);\n\t\t\t\t\t\tplayer.$draw();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.storage.shanxian_h=player.getCards('h');\n\t\t\t\t\tplayer.storage.shanxian_e=player.getCards('e');\n\t\t\t\t\tplayer.storage.shanxian_n=1;\n\t\t\t\t\tplayer.syncStorage('shanxian_e');\n\t\t\t\t\tplayer.phase('shanxian');\n\t\t\t\t\tplayer.storage.shanxian=trigger.player;\n\t\t\t\t\tplayer.removeSkill('shanxian2');\n\t\t\t\t\tplayer.markSkill('shanxian');\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.turnOver(true);\n\t\t\t\t\tdelete player.storage.shanxian;\n\t\t\t\t},mod: {targetInRange: function (card,player,target,now){\n\t\t\t\t\t\tif(target==player.storage.shanxian) return true;\n\t\t\t\t\t},},ai: {expose: \"0.1\",effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='guiyoujie') return [0,0];\n\t\t\t\t\t\t},},},}","info":"在一名其他角色的回合开始前，若你的武将牌正面朝上，你可以摸一张牌并进行一个额外回合，并在回合结束后将武将牌翻至背面。若如此做，你对其使用卡牌无视距离直到回合结束。"},"shanhui":{"name":"闪回","script":"{unique: \"true\",trigger: {player: \"damageEnd\",source: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn player.storage.shanxian_h&&player.storage.shanxian_e&&\n\t\t\t\t\tplayer.storage.shanxian_n>0&&!player.hasSkill('shanxian2');\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar n1=player.countCards('he');\n\t\t\t\t\tvar n2=player.storage.shanxian_h.length+player.storage.shanxian_e.length;\n\t\t\t\t\tif(n1<n2) return true;\n\t\t\t\t\tif(player.hp==player.maxHp) return false;\n\t\t\t\t\tif(n1==n2+1) return true;\n\t\t\t\t\tif(n2==n2+2&&player.hp<=1) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},video: function (player){\n\t\t\t\t\tvar cards=player.getCards('he');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tcards[i].remove();\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<player.storage.shanxian_e.length;i++){\n\t\t\t\t\t\tplayer.$equip(player.storage.shanxian_e[i]);\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tgame.addVideo('skill',player,'shanhui');\n\t\t\t\t\tfor(var i=0;i<player.storage.shanxian_h.length;i++){\n\t\t\t\t\t\tif(get.position(player.storage.shanxian_h[i])=='s'){\n\t\t\t\t\t\t\tplayer.storage.shanxian_h[i]=game.createCard(player.storage.shanxian_h[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<player.storage.shanxian_e.length;i++){\n\t\t\t\t\t\tif(get.position(player.storage.shanxian_e[i])=='s'){\n\t\t\t\t\t\t\tplayer.storage.shanxian_e[i]=game.createCard(player.storage.shanxian_e[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.removeEquipTrigger();\n\t\t\t\t\tvar cards=player.getCards('he');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tcards[i].discard();\n\t\t\t\t\t}\n\t\t\t\t\tplayer.directgain(player.storage.shanxian_h);\n\t\t\t\t\tfor(var i=0;i<player.storage.shanxian_e.length;i++){\n\t\t\t\t\t\tplayer.$equip(player.storage.shanxian_e[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(cards.length>player.storage.shanxian_h.length+player.storage.shanxian_e.length){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.shanxian_n--;\n\t\t\t\t\tif(player.storage.shanxian_n<=0){\n\t\t\t\t\t\tdelete player.storage.shanxian_h;\n\t\t\t\t\t\tdelete player.storage.shanxian_e;\n\t\t\t\t\t\tdelete player.storage.shanxian_n;\n\t\t\t\t\t\tplayer.unmarkSkill('shanxian');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addSkill('shanxian2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你造成或受到伤害后，你可以将你的牌重置为上次发动闪现时的状态，若你的牌数因此而减少，你回复一点体力"},"xiandan":{"name":"霰弹","script":"{trigger: {player: \"shaBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar dis=trigger.target.countCards('h','shan')||trigger.target.getEquip('bagua')||trigger.target.countCards('h')>2;\n\t\t\t\t\tvar att=get.attitude(player,trigger.target);\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('xiandan'));\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(att) return 0;\n\t\t\t\t\t\tif(dis) return 7-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill='xiandan';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(get.color(result.cards[0])=='red'){\n\t\t\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.addTempSkill('xiandan2','shaAfter');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你使用一张杀，你可以弃置一张红色牌令此杀不可闪避，或弃置一张黑色牌令此杀伤害+1"},"yihun":{"name":"移魂","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0&&!player.hasSkill('yihun2');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt('yihun'),\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.color(card)=='black'&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=-get.attitude(player,target);\n\t\t\t\t\t\t\tif(target==player.next){\n\t\t\t\t\t\t\t\tatt/=10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target==player.next.next){\n\t\t\t\t\t\t\t\tatt/=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tplayer.logSkill('yihun',result.targets);\n\t\t\t\t\t\tplayer.addSkill('yihun2');\n\t\t\t\t\t\tvar target=result.targets[0]\n\t\t\t\t\t\tplayer.storage.yihun2=target;\n\t\t\t\t\t\tif(target&&(get.mode()!='guozhan')||!target.isUnseen()){\n\t\t\t\t\t\t\tplayer.markSkillCharacter('yihun2',target,'移魂','在'+get.translation(target)+'的下一准备阶段视为对其使用一张杀');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以弃置一张黑色牌并指定一名其他角色，你在该角色下一准备阶段视为对其使用一张杀；在此之前，你不能使用卡牌，也不能成为卡牌的目标"},"shouge":{"name":"收割","script":"{trigger: {source: \"dieAfter\",},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.gain(game.createCard('zhiliaobo'),'gain2');\n\t\t\t\t},}","info":"每当你杀死一名角色，你可以获得一张治疗波"},"shouhu":{"name":"守护","script":"{mod: {cardEnabled: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return false;\n\t\t\t\t\t},},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hp<target.maxHp&&target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},filterCard: {name: \"sha\",},ai: {order: \"7\",threaten: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,target);\n\t\t\t\t\t\t},},},}","info":"你不能使用杀；出牌阶段，你可以弃置一张杀令一名其他角色回复一点体力"},"ziyu":{"name":"自愈","script":"{trigger: {global: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(get.is.altered('ziyu')) return game.phaseNumber%6==0;\n\t\t\t\t\treturn game.phaseNumber%4==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.chooseDrawRecover(get.prompt('ziyu')).logSkill='ziyu';\n\t\t\t\t},}","info":"在一名角色的结束阶段，你可以回复一点体力或摸一张牌，每隔四回合发动一次"},"feiying":{"name":"飞影","script":"{mod: {globalTo: function (from,to,distance){\n\t\t\t\t\t\treturn distance+1;\n\t\t\t\t\t},},}","info":"锁定技，其他角色计算与你的距离时+1。"},"feidan":{"name":"飞弹","script":"{trigger: {source: \"damageAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('he')==0) return false;\n\t\t\t\t\tif(!event.card) return false;\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=event.player&&get.distance(event.player,current)<=1\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar eff=0;\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\tif(current!=trigger.player&&get.distance(trigger.player,current)<=1){\n\t\t\t\t\t\t\teff+=get.damageEffect(current,player,player);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt('feidan',targets)).set('ai',function(card){\n\t\t\t\t\t\tif(eff>0) return 7-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('logSkill',['feidan',targets]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.targets.shift().damage();\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\tif(get.distance(player,target)<=1) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"你的杀只能对距离1以外的角色使用；每当你使用杀造成伤害后，你可以弃置一张牌对距离目标1以内的其他角色各造成一点伤害"},"huoyu":{"name":"火雨","script":"{enable: \"phaseUse\",unique: \"true\",mark: \"true\",skillAnimation: \"true\",animationColor: \"fire\",init: function (player){\n\t\t\t\t\tplayer.storage.huoyu=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.huoyu) return false;\n\t\t\t\t\tif(player.countCards('he',{color:'red'})<2) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canUse('chiyuxi',target);\n\t\t\t\t},filterCard: {color: \"red\",},selectCard: \"2\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},selectTarget: \"-1\",multitarget: \"true\",multiline: \"true\",line: \"fire\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\tplayer.awakenSkill('huoyu');\n\t\t\t\t\tplayer.storage.huoyu=true;\n\t\t\t\t\tplayer.useCard({name:'chiyuxi'},targets).animate=false;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.useCard({name:'chiyuxi'},targets).animate=false;\n\t\t\t\t},ai: {order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\treturn get.effect(target,{name:'chiyuxi'},player,target);\n\t\t\t\t\t\t},},},intro: {content: \"limited\",},}","info":"限定技，出牌阶段，你可以弃置两张红色牌，视为使用两张炽羽袭"},"guangshu":{"name":"光枢","script":"{enable: \"phaseUse\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\tif(suit=='heart'){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.hp==1&&get.attitude(player,current)>0\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t\telse if(suit=='spade'){\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.hasSkill('guangshu_heart')&&\n\t\t\t\t\t\t!target.hasSkill('guangshu_spade')&&\n\t\t\t\t\t\t!target.hasSkill('guangshu_club')&&\n\t\t\t\t\t\t!target.hasSkill('guangshu_diamond');\n\t\t\t\t},filterCard: \"true\",position: \"he\",content: function (){\n\t\t\t\t\ttarget.addSkill('guangshu_'+get.suit(cards[0]));\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.6\",order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!ui.selected.cards.length) return 0;\n\t\t\t\t\t\t\tswitch(get.suit(ui.selected.cards[0])){\n\t\t\t\t\t\t\t\tcase 'heart':if(target.hp==1) return 1;return 0.1;\n\t\t\t\t\t\t\t\tcase 'diamond':return 1+Math.sqrt(target.countCards('h'));\n\t\t\t\t\t\t\t\tcase 'club':return -target.countCards('h')-Math.sqrt(target.countCards('h','sha'));\n\t\t\t\t\t\t\t\tcase 'spade':return get.damageEffect(target,player,target,'thunder');\n\t\t\t\t\t\t\t\tdefault:return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张牌，并指定一名角色，根据弃置牌的花色执行如下效果：♥该角色下次受到伤害时回复一点体力；♦︎该角色下次造成伤害时摸两张牌；♣该角色无法使用杀直到下一回合结束；♠该角色于下个结束阶段受到一点无来源的雷电伤害"},"yuedong":{"name":"乐动","script":"{trigger: {player: \"phaseUseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=1+player.storage.yuedong_num;\n\t\t\t\t\tplayer.chooseTarget(get.prompt('yuedong'),[1,num],function(card,player,target){\n\t\t\t\t\t\tif(player.storage.yuedong_recover){\n\t\t\t\t\t\t\treturn target.hp<target.maxHp;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(player.storage.yuedong_recover){\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar att=get.attitude(player,target)/Math.sqrt(2+target.countCards('h'));\n\t\t\t\t\t\tif(player==target){\n\t\t\t\t\t\t\tvar num2=player.needsToDiscard(num);\n\t\t\t\t\t\t\tif(num2>1) return att/5;\n\t\t\t\t\t\t\tif(num2==1){\n\t\t\t\t\t\t\t\tif(num>1) return att/3;\n\t\t\t\t\t\t\t\treturn att/4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att*1.1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yuedong',result.targets);\n\t\t\t\t\t\tvar eff=1+player.storage.yuedong_eff;\n\t\t\t\t\t\tif(player.storage.yuedong_recover){\n\t\t\t\t\t\t\tresult.targets.sort(lib.sort.seat);\n\t\t\t\t\t\t\tfor(var i=0;i<result.targets.length;i++){\n\t\t\t\t\t\t\t\tresult.targets[i].recover(eff);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tgame.asyncDraw(result.targets,eff);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.6\",},}","info":"出牌阶段结束时，你可以令一名角色摸一张牌"},"kuoyin":{"name":"扩音","script":"{enable: \"phaseUse\",filterCard: \"true\",selectCard: function (){\n\t\t\t\t\tif(get.is.altered('kuoyin')) return 1;\n\t\t\t\t\tif(_status.event.player.storage.yuedong_eff) return 1;\n\t\t\t\t\tif(_status.event.player.storage.yuedong_num) return 2;\n\t\t\t\t\treturn [1,2];\n\t\t\t\t},position: \"he\",filter: function (event,player){\n\t\t\t\t\tif(get.is.altered('kuoyin')&&player.storage.yuedong_num) return false;\n\t\t\t\t\tif(player.storage.yuedong_eff&&player.storage.yuedong_num) return false;\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar num1=0,num2=0,players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\tnum2++;\n\t\t\t\t\t\t\tif(players[i].hp<=2&&players[i].maxHp>2){\n\t\t\t\t\t\t\t\tnum1++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.yuedong_recover){\n\t\t\t\t\t\tif(num1>1&&!player.storage.yuedong_num){\n\t\t\t\t\t\t\tif(ui.selected.cards.length) return 0;\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(num2>1&&!player.storage.yuedong_num){\n\t\t\t\t\t\t\tif(ui.selected.cards.length) return 0;\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num2>2){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(cards.length==1){\n\t\t\t\t\t\tplayer.storage.yuedong_num+=2;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.yuedong_eff++;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.6\",order: \"10.1\",result: {player: \"1\",},},group: \"kuoyin2\",}","info":"出牌阶段，你可以弃置一张牌令本回合乐动的目标数改为3，或弃置两张牌令本回合乐动的摸牌量改为2"},"huhuan":{"name":"互换","script":"{enable: \"phaseUse\",filterCard: \"true\",selectCard: \"2\",position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>1&&!player.storage.yuedong_recover;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.yuedong_recover=true;\n\t\t\t\t},ai: {order: \"10.2\",result: {player: function (player){\n\t\t\t\t\t\t\tvar num1=0,num2=0,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\tnum2++;\n\t\t\t\t\t\t\t\t\tif(players[i].hp<=2&&players[i].maxHp>2){\n\t\t\t\t\t\t\t\t\t\tnum1++;\n\t\t\t\t\t\t\t\t\t\tif(players[i].hp==1){\n\t\t\t\t\t\t\t\t\t\t\tnum1++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num1>=3){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置两张牌令本回合乐动的摸牌效果改为回复等量体力"},"tuji":{"name":"突击","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\tif(_status.currentPhase==from){\n\t\t\t\t\t\t\treturn distance-from.countUsed();\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，在你的回合内，每当你使用一张牌，你的进攻距离+1"},"mujing":{"name":"目镜","script":"{enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},position: \"he\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t},prompt: \"将一张黑色牌当杀使用或打出\",check: function (card){return 4-get.value(card)},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t\t},respondSha: \"true\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},group: \"mujing2\",}","info":"你可以将一张黑色牌当作杀使用或打出；当你的杀被闪避后，此杀不计入出杀次数"},"lichang":{"name":"力场","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'red'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('lichang'),'he',{color:'red'});\n\t\t\t\t\tnext.logSkill='lichang';\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addSkill('lichang2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以弃置一张红色牌，若如此做，你可以在下个准备阶段令一名距离1以内的角色回复一点体力或摸两张牌"},"feiren":{"name":"飞刃","script":"{trigger: {source: \"damageBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !get.is.altered('feiren')&&event.card&&event.card.name=='sha'&&get.suit(event.card)=='spade'&&event.notLink();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},mod: {targetInRange: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\t},selectTarget: function (card,player,range){\n\t\t\t\t\t\tif(card.name=='sha'&&range[1]!=-1&&get.suit(card)=='club'){\n\t\t\t\t\t\t\trange[1]++;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},ai: {threaten: \"1.4\",},}","info":"你的杀无视距离；你的黑桃杀造成的伤害+1，梅花杀可以额外指定一个目标"},"lianpo":{"name":"连破","script":"{audio: \"2\",trigger: {global: \"phaseAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getStat('kill')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t},}","info":"一名角色的回合结束时，若你本回合内杀死过角色，则你可以进行一个额外的回合。"},"zhanlong":{"name":"斩龙","script":"{trigger: {player: \"phaseBegin\",},unique: \"true\",mark: \"true\",skillAnimation: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.zhanlong=false;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.hasJudge('lebu')) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.zhanlong) return false;\n\t\t\t\t\tif(player.countCards('he')==0) return false;\n\t\t\t\t\tif(player.hp!=1) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discard(player.getCards('he'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.addTempSkill('zhanlong2');\n\t\t\t\t\tplayer.awakenSkill('zhanlong');\n\t\t\t\t\tplayer.storage.zhanlong=true;\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<3;i++){\n\t\t\t\t\t\tcards.push(game.createCard('sha'));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards,'gain2');\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 3;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')==1&&target.hp==2&&target.countCards('he')&&\n\t\t\t\t\t\t\t!target.isTurnedOver()&&_status.currentPhase!=target){\n\t\t\t\t\t\t\t\tif(get.distance(_status.currentPhase,target,'absolute')<=2) return [0.5,1];\n\t\t\t\t\t\t\t\treturn 0.8;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},intro: {content: \"limited\",},}","info":"限定技，准备阶段，若你体力值为1，你可以弃置所有牌（至少一张），然后将三张杀置入你的手牌，若如此做，你本回合使用杀无次数限制"},"xie":{"name":"谐","script":"{enable: \"phaseUse\",unique: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.hasSkill('xie2');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{suit:'heart'});\n\t\t\t\t},filterCard: {suit: \"heart\",},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar current=game.findPlayer(function(player){\n\t\t\t\t\t\treturn player.hasSkill('xie2');\n\t\t\t\t\t});\n\t\t\t\t\tif(current){\n\t\t\t\t\t\tcurrent.removeSkill('xie2');\n\t\t\t\t\t}\n\t\t\t\t\ttarget.addSkill('xie2');\n\t\t\t\t\ttarget.storage.xie='now';\n\t\t\t\t\ttarget.storage.xie2=player;\n\t\t\t\t},ai: {expose: \"0.2\",order: \"9.1\",threaten: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar current=game.findPlayer(function(player){\n\t\t\t\t\t\t\t\treturn player.hasSkill('xie2');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(current&&get.recoverEffect(current,player,player)>0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,target);\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张红桃手牌并指定一名角色，该角色自其下一回合开始每隔六回合回复一点体力，直到你死亡。同一时间只能对一人发动"},"luan":{"name":"乱","script":"{enable: \"phaseUse\",unique: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.hasSkill('luan2');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{suit:'spade'});\n\t\t\t\t},filterCard: {suit: \"spade\",},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar current=game.findPlayer(function(player){\n\t\t\t\t\t\treturn player.hasSkill('luan2');\n\t\t\t\t\t});\n\t\t\t\t\tif(current){\n\t\t\t\t\t\tcurrent.removeSkill('luan2');\n\t\t\t\t\t}\n\t\t\t\t\ttarget.addSkill('luan2');\n\t\t\t\t\t// target.storage.luan='now';\n\t\t\t\t\ttarget.storage.luan2=player;\n\t\t\t\t},ai: {expose: \"0.2\",order: \"9.1\",threaten: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar current=game.findPlayer(function(player){\n\t\t\t\t\t\t\t\treturn player.hasSkill('luan2');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(current&&get.attitude(player,current)<0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==1) return 0.5;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张黑桃手牌并指定一名角色，该角色受到伤害后流失一点体力，直到你死亡或其首次进入濒死状态。同一时间只能对一人发动"},"sheng":{"name":"圣","script":"{enable: \"phaseUse\",unique: \"true\",mark: \"true\",skillAnimation: \"true\",animationColor: \"metal\",init: function (player){\n\t\t\t\t\tplayer.storage.sheng=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.sheng) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.isDamaged();\n\t\t\t\t},selectTarget: [1,null],contentBefore: function (){\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\tplayer.addSkill('sheng2');\n\t\t\t\t\tplayer.awakenSkill('sheng');\n\t\t\t\t\tplayer.storage.sheng=true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=get.recoverEffect(target,player,target);\n\t\t\t\t\t\t\tif(player.hp==1) return eff;\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\tvar num1=0,num2=0,num3=0,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\tnum1++;\n\t\t\t\t\t\t\t\t\tif(players[i].isDamaged()){\n\t\t\t\t\t\t\t\t\t\tnum2++;\n\t\t\t\t\t\t\t\t\t\tif(players[i].hp<=1){\n\t\t\t\t\t\t\t\t\t\t\tnum3++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num1==num2) return eff;\n\t\t\t\t\t\t\tif(num2==num1-1&&num3) return eff;\n\t\t\t\t\t\t\tif(num3>=2) return eff;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},intro: {content: \"limited\",},}","info":"限定技，出牌阶段，你可以将你的武将牌翻面，然后令任意名角色回复一点体力，若如此做，你不能成为其他角色的卡牌目标直到下一回合开始"},"jijia":{"name":"机甲","script":"{mark: \"true\",unique: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.jijia=4;\n\t\t\t\t\tplayer.storage.jijia2=0;\n\t\t\t\t},intro: {content: \"机甲体力值：#\",},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.storage.jijia>0){\n\t\t\t\t\t\t\treturn num+player.storage.jijia;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},trigger: {player: \"changeHp\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.jijia>0&&event.parent.name=='damage'&&event.num<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.hp-=trigger.num;\n\t\t\t\t\tplayer.update();\n\t\t\t\t\tplayer.storage.jijia+=trigger.num;\n\t\t\t\t\tif(player.storage.jijia<=0){\n\t\t\t\t\t\tplayer.unmarkSkill('jijia');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.storage.jijia<=0) return 2;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},},}","info":"锁定技，游戏开始时，你获得一个体力为4的机甲；你的手牌上限为你和机甲的体力之和；你受到的伤害由机甲承担"},"tuijin":{"name":"推进","script":"{enable: \"phaseUse\",usable: \"1\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.jijia>0){\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn get.distance(player,current)>1\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&get.distance(player,target)>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.tuijin2=target;\n\t\t\t\t\tplayer.addTempSkill('tuijin2');\n\t\t\t\t},ai: {order: \"11\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0){\n\t\t\t\t\t\t\t\tif(get.distance(player,target)>2) return -1.5;\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0.3;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，若你有机甲，你可以指定一名角色，本回合内视为与其距离为1"},"zihui":{"name":"自毁","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.jijia>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&get.distance(player,target)<=2;\n\t\t\t\t},unique: \"true\",selectTarget: \"-1\",skillAnimation: \"true\",animationColor: \"fire\",line: \"fire\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=player.storage.jijia;\n\t\t\t\t\tif(get.is.altered('zihui')){\n\t\t\t\t\t\tnum=Math.max(1,Math.min(num,target.countCards('he')));\n\t\t\t\t\t}\n\t\t\t\t\ttarget.chooseToDiscard(num,'he','弃置'+get.cnNumber(num)+'张牌，或受到2点火焰伤害').ai=function(card){\n\t\t\t\t\t\tif(target.hasSkillTag('nofire')) return 0;\n\t\t\t\t\t\tif(get.type(card)!='basic') return 11-get.value(card);\n\t\t\t\t\t\tif(target.hp>4) return 7-get.value(card);\n\t\t\t\t\t\tif(target.hp==4&&num>=3) return 7-get.value(card);\n\t\t\t\t\t\tif(target.hp==3&&num>=4) return 7-get.value(card);\n\t\t\t\t\t\tif(num>1) return 8-get.value(card);\n\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttarget.damage(2,'fire');\n\t\t\t\t\t}\n\t\t\t\t\tif(target==targets[targets.length-1]){\n\t\t\t\t\t\tplayer.storage.jijia=0;\n\t\t\t\t\t\tplayer.unmarkSkill('jijia');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"2\",result: {player: function (player){\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]==player||players[i].hasSkillTag('nofire')||get.distance(player,players[i])>2) continue;\n\t\t\t\t\t\t\t\tvar nh=players[i].countCards('h');\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,players[i]);\n\t\t\t\t\t\t\t\tif(nh<player.storage.jijia){\n\t\t\t\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\t\t\t\tif(players[i].hp<=2){\n\t\t\t\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\tnum+=1.5;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(att>0){\n\t\t\t\t\t\t\t\t\t\tif(players[i].hp<=2){\n\t\t\t\t\t\t\t\t\t\t\tnum-=2;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\tnum-=1.5;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(nh==player.storage.jijia){\n\t\t\t\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\t\t\t\tnum+=0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(att>0){\n\t\t\t\t\t\t\t\t\t\tnum-=0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num>=2) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以令距离2以内的所有其他角色选择一项：弃置数量等同你机甲体力值的牌，或受到2点火焰伤害，并在结算完毕后摧毁你的机甲"},"chongzhuang":{"name":"重装","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.jijia<=0&&event.num>0;\n\t\t\t\t},popup: \"false\",unique: \"true\",content: function (){\n\t\t\t\t\tplayer.storage.jijia2+=trigger.num;\n\t\t\t\t\tif(player.storage.jijia2>=4){\n\t\t\t\t\t\tplayer.storage.jijia=4;\n\t\t\t\t\t\tplayer.storage.jijia2=0;\n\t\t\t\t\t\tplayer.markSkill('jijia');\n\t\t\t\t\t\tif(lib.config.skill_animation_type!='off'){\n\t\t\t\t\t\t\tplayer.logSkill('chongzhuang');\n\t\t\t\t\t\t\tplayer.$skill('重装')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"在你失去机甲后，当你累计造成了4点伤害时，你重新获得机甲"},"bingqiang":{"name":"冰墙","script":"{enable: \"phaseUse\",position: \"he\",filterCard: function (card){\n\t\t\t\t\tvar color=get.color(card);\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tif(get.color(ui.selected.cards[i])!=color) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},selectCard: [1,null],complexCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.hasSkill('bingqiang2')&&!target.hasSkill('bingqiang5')&&\n\t\t\t\t\t!target.next.hasSkill('bingqiang2')&&!target.next.hasSkill('bingqiang5')&&\n\t\t\t\t\t!target.previous.hasSkill('bingqiang2')&&!target.previous.hasSkill('bingqiang5');\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length) return 0;\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar max=0,min=0,players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(!lib.skill.bingqiang.filterTarget(null,player,players[i])) continue;\n\t\t\t\t\t\tvar num=lib.skill.bingqiang.ai.result.playerx(player,players[i]);\n\t\t\t\t\t\tif(num>max){\n\t\t\t\t\t\t\tmax=num;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num<min){\n\t\t\t\t\t\t\tmin=num;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(max==-min){\n\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\telse if(max>-min){\n\t\t\t\t\t\tif(get.color(card)=='red') return 5-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(get.color(card)=='black') return 5-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},changeTarget: function (player,targets){\n\t\t\t\t\tvar target=targets[0];\n\t\t\t\t\tvar add=game.filterPlayer(function(player){\n\t\t\t\t\t\treturn get.distance(target,player,'pure')==1;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i=0;i<add.length;i++){\n\t\t\t\t\t\ttargets.add(add[i]);\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(get.color(cards[0])=='red'){\n\t\t\t\t\t\ttarget.storage.bingqiang2=cards.length;\n\t\t\t\t\t\ttarget.addSkill('bingqiang2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.storage.bingqiang5=cards.length;\n\t\t\t\t\t\ttarget.addSkill('bingqiang5');\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.storage.bingqiang){\n\t\t\t\t\t\tplayer.storage.bingqiang=[];\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.bingqiang.add(target);\n\t\t\t\t},ai: {order: \"11\",result: {playerx: function (player,target){\n\t\t\t\t\t\t\tvar targets=game.filterPlayer(function(player){\n\t\t\t\t\t\t\t\treturn player==target||get.distance(target,player,'pure')==1;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\t\t\tnum+=get.attitude(player,targets[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},player: function (player,target){\n\t\t\t\t\t\t\tvar num=lib.skill.bingqiang.ai.result.playerx(player,target);\n\t\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\t\tif(get.color(ui.selected.cards[0])=='black'){\n\t\t\t\t\t\t\t\t\treturn -num;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},group: \"bingqiang_remove\",}","info":"出牌阶段，你可以弃置X张红色牌令一名角色和其相邻角色的防御离+X，或弃置X张黑色牌令一名角色和其相邻角色的进攻离-X，效果持续到你的下个回合开始"},"jidong":{"name":"急冻","script":"{trigger: {global: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn player.hp==1&&!player.isTurnedOver();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\tplayer.recover(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.isTurnedOver()&&!get.is.altered('jidong')){\n\t\t\t\t\t\tplayer.addTempSkill('jidong2',{player:'turnOverAfter'});\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 2;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},},}","info":"在一名角色的结束阶段，若你的体力值为1且未翻面，你可以翻面并回复两点体力，在你的武将牌翻至正面前，你防止所有伤害，也不能成为其他角色卡牌的目标"},"baoxue":{"name":"暴雪","script":"{enable: \"phaseUse\",init: function (player){\n\t\t\t\t\tplayer.storage.baoxue=false;\n\t\t\t\t},intro: {content: \"limited\",},mark: \"true\",unique: \"true\",skillAnimation: \"true\",animationColor: \"water\",line: \"thunder\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.baoxue&&player.countCards('he',{color:'black'})>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},selectTarget: function (){\n\t\t\t\t\treturn [1,_status.event.player.countCards('he',{color:'black'})];\n\t\t\t\t},delay: \"false\",contentBefore: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.storage.baoxue=true;\n\t\t\t\t\tplayer.awakenSkill('baoxue');\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\tplayer.discard(player.getCards('he',{color:'black'}));\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!get.is.altered('baoxue')){\n\t\t\t\t\t\tvar he=target.getCards('he');\n\t\t\t\t\t\tif(he.length){\n\t\t\t\t\t\t\ttarget.discard(he.randomGet());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.turnOver(true);\n\t\t\t\t},contentAfter: function (){\n\t\t\t\t\tplayer.turnOver(true);\n\t\t\t\t},ai: {order: function (skill,player){\n\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn get.attitude(player,current)<0;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar nh=player.countCards('he',{color:'black'});\n\t\t\t\t\t\tif(nh==1&&num>1) return 0;\n\t\t\t\t\t\tif(nh>num) return 1;\n\t\t\t\t\t\treturn 11;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('noturn')) return 0;\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，若你未翻面，你可以展示并弃置你的所有黑色牌，然后令至多X名其他角色随机弃置一张牌并将武将牌翻至背面，X为你的弃牌数；结算后你将武将牌翻至背面"},"zhiyuan":{"name":"支援","script":"{trigger: {source: \"damageBefore\",},check: function (event,player){\n\t\t\t\t\tplayer.disableSkill('tmp','zhiyuan');\n\t\t\t\t\tvar eff=get.damageEffect(event.player,player,player);\n\t\t\t\t\tvar att=get.attitude(player,event.player);\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tif(att>0){\n\t\t\t\t\t\tif(eff<=0||event.player.hp<event.player.maxHp){\n\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(eff<0&&event.player.hp==event.player.maxHp){\n\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.enableSkill('tmp','zhiyuan');\n\t\t\t\t\treturn bool;\n\t\t\t\t},logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\treturn event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\ttrigger.player.recover(trigger.num);\n\t\t\t\t},ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\tif(target.hp==target.maxHp||get.recoverEffect(target,player,player)<=0) return 'zeroplayertarget';\n\t\t\t\t\t\t\t\treturn [0,0,0,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你即将造成伤害，你可以防止此伤害，改为令目标回复等量的体力"},"mianzhen":{"name":"眠针","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.hasSkill('mianzhen2');\n\t\t\t\t},filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseToRespond({name:'shan'});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool) target.addSkill('mianzhen2');\n\t\t\t\t},ai: {order: \"2.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn Math.min(-0.1,-1-target.countCards('h')+Math.sqrt(target.hp)/2);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌并令一名其他角色打出一张闪，否则该角色不能使用或打出卡牌直到其受到伤害或下一回合结束"},"aqianghua":{"name":"强化","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>=1;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},filterCard: \"true\",selectCard: \"-1\",discard: \"false\",prepare: \"give\",content: function (){\n\t\t\t\t\ttarget.gain(cards);\n\t\t\t\t\tif(!get.is.altered('aqianghua')) target.changeHujia();\n\t\t\t\t\ttarget.addSkill('aqianghua2');\n\t\t\t\t},ai: {threaten: \"1.5\",order: \"2.1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0;\n\t\t\t\t\t\t\tif(get.attitude(player,target)<3) return 0;\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')) return 0;\n\t\t\t\t\t\t\tif(target.hasSkill('aqianghua2')) return 0.1;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以将你的全部手牌（至少一张）交给一名其他角色，该角色获得一点护甲且下一次造成的伤害+1"},"juji":{"name":"狙击","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tif(get.suit(ui.selected.cards[i])==suit) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},complexCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length>1) return 0;\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},selectCard: [1,4],content: function (){\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tsuits.push(get.suit(cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tvar success=false;\n\t\t\t\t\tfor(var i=0;i<suits.length;i++){\n\t\t\t\t\t\tif(target.countCards('h',{suit:suits[i]})){\n\t\t\t\t\t\t\tsuccess=true;break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!success){\n\t\t\t\t\t\tplayer.popup('失败');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.popup('成功');\n\t\t\t\t\t\tplayer.addSkill('juji2');\n\t\t\t\t\t\tplayer.storage.juji2=target;\n\t\t\t\t\t\tplayer.markSkillCharacter('juji2',target,'狙击','与'+get.translation(target)+'的距离视为1且'+get.translation(target)+'不能闪避你的杀，直到回合结束');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return 0;\n\t\t\t\t\t\t\tif(target.countCards('h')<=1&&get.distance(player,target,'attack')<=1) return 0;\n\t\t\t\t\t\t\tvar min=[];\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=player&&player.canUse('sha',players[i],false)){\n\t\t\t\t\t\t\t\t\tvar eff=get.effect(players[i],{name:'sha'},player,player);\n\t\t\t\t\t\t\t\t\tif(eff>num){\n\t\t\t\t\t\t\t\t\t\tmin.length=0;\n\t\t\t\t\t\t\t\t\t\tmin.push(players[i]);\n\t\t\t\t\t\t\t\t\t\tnum=eff;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<min.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,min[i])>0) return 0;\n\t\t\t\t\t\t\t\tif(min[i].countCards('h')<=1&&get.distance(player,min[i],'attack')<=1) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(min.contains(target)) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置任意张花色不同的牌并指定一名有手牌的其他角色，若该角色的手牌中含有与你弃置的牌花色相同的牌，则本回合内你与其距离为1且该角色不能闪避你的杀"},"duwen":{"name":"毒吻","script":"{trigger: {source: \"damageBegin\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<=0;\n\t\t\t\t},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')==event.player.countCards('h')&&event.notLink();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"锁定技，当你造成伤害时，若你的手牌数与受伤害角色相等，此伤害+1"},"dulei":{"name":"诡雷","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('dulei2');\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},discard: \"false\",prepare: function (cards,player){\n\t\t\t\t\tplayer.$give(1,player,false);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.dulei=cards[0];\n\t\t\t\t\tplayer.addSkill('dulei2');\n\t\t\t\t\tplayer.syncStorage('dulei');\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段，若你武将牌上没有牌，你可以将一张牌背面朝上置于你的武将牌上，当一名角色使用与该牌花色相同的牌指定你为目标时，你展示并移去此牌，然后该角色失去一点体力并随机弃置一张牌"},"shanguang":{"name":"闪光","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {suit: \"diamond\",},position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'diamond'})>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&get.distance(player,target,'attack')<=1;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(card.name=='sha'&&_status.event.player.countCards('h','sha')<3) return 0;\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.addTempSkill('shanguang2');\n\t\t\t\t},ai: {order: \"7.9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&nh>=3&&\n\t\t\t\t\t\t\tplayer.canUse('sha',target)&&player.countCards('h','sha')&&\n\t\t\t\t\t\t\tget.effect(target,{name:'sha'},player,player)>0){\n\t\t\t\t\t\t\t\treturn -nh-5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -nh;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张方片牌令攻击范围内的一名其他角色本回合内不能使用或打出卡牌"},"tiandan":{"name":"填弹","script":"{trigger: {player: \"phaseDrawBegin\",},filter: function (event,player){\n\t\t\t\t\treturn Math.min(5,player.hp)>player.countCards('h')&&!player.skipList.contains('phaseUse')&&!player.skipList.contains('phaseDiscard');\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tif(Math.min(5,player.hp)-nh>=2) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=Math.min(5,player.hp)-player.countCards('h');\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\twhile(num--){\n\t\t\t\t\t\tcards.push(game.createCard('sha'));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards,'gain2');\n\t\t\t\t\tplayer.skip('phaseUse');\n\t\t\t\t\tplayer.skip('phaseDiscard');\n\t\t\t\t},}","info":"摸牌阶段开始时，你可以跳过出牌和弃牌阶段，然后获得若干张杀直到你的手牌数等于你的体值（最多为5）"},"shenqiang":{"name":"神枪","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&_status.currentPhase==player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.getStat().card.sha--;\n\t\t\t\t},}","info":"锁定技，每当你在出牌阶段使用杀造成伤害，本阶段内出杀次数上限+1"},"liudan":{"name":"榴弹","script":"{trigger: {player: \"useCard\",},check: function (event,player){\n\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\tif(event.targets.contains(current)==false&&current!=player&&\n\t\t\t\t\t\tlib.filter.targetEnabled(event.card,player,current)){\n\t\t\t\t\t\t\treturn get.effect(current,event.card,player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t})>=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn (event.targets.contains(current)==false&&current!=player&&\n\t\t\t\t\t\tlib.filter.targetEnabled(event.card,player,current));\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn (trigger.targets.contains(current)==false&&current!=player&&\n\t\t\t\t\t\tlib.filter.targetEnabled(trigger.card,player,current));\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tvar list2=[];\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(Math.random()<0.5){\n\t\t\t\t\t\t\t\tlist2.push(list[i]);\n\t\t\t\t\t\t\t\ttrigger.targets.push(list[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list2.length){\n\t\t\t\t\t\t\tgame.log(list2,'被追加为额外目标');\n\t\t\t\t\t\t\tplayer.line(list2,'green');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你使用一张杀，你可以令所有不是此杀目标的其他角色有50%概率成为此杀的额外目标"},"shoujia":{"name":"兽夹","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},discard: \"false\",prepare: \"give2\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.hasSkill('shoujia2');\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.storage.shoujia=cards[0];\n\t\t\t\t\ttarget.storage.shoujia2=player;\n\t\t\t\t\ttarget.addSkill('shoujia2');\n\t\t\t\t\ttarget.syncStorage('shoujia');\n\t\t\t\t},ai: {order: \"1\",expose: \"0.2\",threaten: \"1.4\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以将一张牌背面朝上置于一名其他角色的武将牌上，当该角色使用一张与此牌花色相同的牌指定其他角色为目标时，移去此牌，该角色将武将牌翻至背面；当你受到伤害时，移去此牌"},"shihuo":{"name":"嗜火","script":"{trigger: {global: \"damageEnd\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.nature=='fire';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"锁定技，每当一名角色受到火焰伤害，你摸一张牌"},"paotai":{"name":"炮台","script":"{enable: \"phaseUse\",intro: {content: function (storage){\n\t\t\t\t\t\tvar num;\n\t\t\t\t\t\tswitch(storage){\n\t\t\t\t\t\t\tcase 1:num=30;break;\n\t\t\t\t\t\t\tcase 2:num=60;break;\n\t\t\t\t\t\t\tcase 3:num=100;break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn '结束阶段，有'+num+'%机率对一名随机敌人造成一点火焰伤害';\n\t\t\t\t\t},},init: function (player){\n\t\t\t\t\tplayer.storage.paotai=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0&&player.storage.paotai<3;\n\t\t\t\t},filterCard: {name: \"sha\",},content: function (){\n\t\t\t\t\tplayer.storage.paotai++;\n\t\t\t\t\tplayer.markSkill('paotai');\n\t\t\t\t},ai: {order: \"5\",threaten: \"1.5\",result: {player: \"1\",},},group: [\"paotai2\",\"paotai3\"],}","info":"出牌阶段，你可以弃置一张杀布置或升级一个炮台（最高3级）；结束阶段，炮台有一定机率对一名随机敌人造成一点火焰伤害；每当你受到一点伤害，炮台降低一级"},"maoding":{"name":"铆钉","script":"{trigger: {player: \"damageEnd\",source: \"damageEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(get.is.altered('maoding')&&event.source!=player) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=get.typeCard('hslingjian');\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()),'gain2');\n\t\t\t\t},group: \"maoding2\",ai: {threaten: \"1.5\",maixie_defend: \"true\",},}","info":"每当你造成或受到一次伤害，你可以获得一个零件；出牌阶段，你可以弃置两张零件牌令一名没有护甲的角色获得一点护甲"},"bshaowei":{"name":"哨卫","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.bshaowei=false;\n\t\t\t\t},trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('zhencha2')) return false;\n\t\t\t\t\treturn !player.storage.bshaowei;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(!player.hasShan()) return true;\n\t\t\t\t\tif(!player.hasSha()) return false;\n\t\t\t\t\treturn Math.random()<0.5;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.bshaowei=true;\n\t\t\t\t\tplayer.storage.zhencha=false;\n\t\t\t\t\tif(player.marks.zhencha){\n\t\t\t\t\t\tplayer.marks.zhencha.firstChild.innerHTML='哨';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addTempSkill('zhencha2');\n\t\t\t\t},subSkill: {sha: {mod: {targetInRange: function (card,player,target,now){\n\t\t\t\t\t\t\t\tif(card.name=='sha'&&player.storage.bshaowei) return true;\n\t\t\t\t\t\t\t},cardUsable: function (card,player,num){\n\t\t\t\t\t\t\t\tif(card.name=='sha'&&player.storage.bshaowei) return Infinity;\n\t\t\t\t\t\t\t},},trigger: {target: \"shaBegin\",player: \"shaBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.bshaowei;\n\t\t\t\t\t\t},check: function (){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t\t\t},ai: {unequip: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\t\t\tif(!player.storage.bshaowei) return false;\n\t\t\t\t\t\t\t\tif(arg&&arg.name=='sha') return true;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t},},sub: \"true\",},},group: \"bshaowei_sha\",ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.storage.bshaowei) return 1.7;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},},}","info":"结束阶段，你可以切换至哨卫模式。当处于此模式时，你的杀无视距离和防具、无数量限制且不可闪避；你不能闪避杀"},"zhencha":{"name":"侦查","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.zhencha=true;\n\t\t\t\t},mark: \"true\",intro: {content: function (storage,player){\n\t\t\t\t\t\tif(storage){\n\t\t\t\t\t\t\treturn '每当你使用一张杀，你摸一张牌或回复一点体力';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(player.hasSkill('bshaowei')&&player.storage.bshaowei){\n\t\t\t\t\t\t\treturn '你的杀无视距离和防具、无数量限制且不可闪避；你不能闪避杀';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '无额外技能';\n\t\t\t\t\t\t}\n\t\t\t\t\t},},trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('zhencha2')) return false;\n\t\t\t\t\treturn !player.storage.zhencha;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.bshaowei=false;\n\t\t\t\t\tplayer.storage.zhencha=true;\n\t\t\t\t\tif(player.marks.zhencha){\n\t\t\t\t\t\tplayer.marks.zhencha.firstChild.innerHTML='侦';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addTempSkill('zhencha2');\n\t\t\t\t},subSkill: {sha: {trigger: {player: \"shaBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.zhencha&&event.card&&event.card.name=='sha';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.chooseDrawRecover(get.prompt('zhencha')).logSkill='zhencha';\n\t\t\t\t\t\t},sub: \"true\",},},group: \"zhencha_sha\",}","info":"结束阶段，你可以切换至侦查模式。当处于此模式时，每当你使用一张杀，你摸一张牌或回复一点体力"},"bfengshi":{"name":"风矢","script":"{trigger: {player: \"shaBegin\",},forced: \"true\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('bfengshi4')) return false;\n\t\t\t\t\tvar num=0.2;\n\t\t\t\t\tif(get.is.altered('bfengshi')) num=0.15;\n\t\t\t\t\treturn Math.random()<num*player.countUsed();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t},mod: {attackFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-from.countUsed();\n\t\t\t\t\t},},group: [\"bfengshi2\",\"bfengshi3\"],}","info":"锁定技，在一合内每当你使用一张牌，你的攻击范围+1；你的首张杀增加20%的概率强制命中；你的首张杀造成伤害后增加20%的概率令伤害+1"},"yinbo":{"name":"音波","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {suit: \"spade\",},position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'spade'})>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar targets=player.getEnemies(function(target){\n\t\t\t\t\t\treturn target.countCards('he')>0;\n\t\t\t\t\t});\n\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\tevent.targets=targets.randomGets(3);\n\t\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\tplayer.line(event.targets,'green');\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar target=event.targets.shift();\n\t\t\t\t\t\tvar he=target.getCards('he');\n\t\t\t\t\t\tif(he.length){\n\t\t\t\t\t\t\ttarget.addExpose(0.1);\n\t\t\t\t\t\t\ttarget.discard(he.randomGet());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",expose: \"0.3\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张黑桃牌，然后随机弃置三名敌人各一张牌"},"zhongdun":{"name":"重盾","script":"{unique: \"true\",init2: function (player){\n\t\t\t\t\tif(!player.storage.zhongdun){\n\t\t\t\t\t\tplayer.changeHujia(get.is.altered('zhongdun')?6:8);\n\t\t\t\t\t\tplayer.storage.zhongdun=true;\n\t\t\t\t\t}\n\t\t\t\t},enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.hujia>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.hujia;\n\t\t\t\t},filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp==1&&get.attitude(player,current)>2;\n\t\t\t\t\t})){\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia(-1);\n\t\t\t\t\ttarget.changeHujia();\n\t\t\t\t},ai: {order: \"5\",expose: \"0.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn 1/Math.max(1,target.hp);\n\t\t\t\t\t\t},},},}","info":"游戏开始时，你获得8点护甲；出牌阶段限一次，你可以弃置一张牌并将一点护甲分给一名没有护甲的其他角色"},"mengji":{"name":"猛击","script":"{trigger: {source: \"damageBegin\",},forced: \"true\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.zhongdun&&!player.hujia&&event.card&&event.card.name=='sha'&&event.notLink();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},}","info":"锁定技，若你已发动重盾，当你没有护甲时，你的杀造成的伤害+1"},"liangou":{"name":"链钩","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.suit(card)!='heart'?1:-1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.addTempSkill('liangou2');\n\t\t\t\t\t\ttarget.storage.liangou2=player;\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",expose: \"0.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,target)<0&&player.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn get.tag(card,'damage')?true:false;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌，指定一名其他角色并进行一次判定，若结果不为红桃，该角色与你距离为1且受到的首次伤害+1直到回合结束"},"xiyang":{"name":"吸氧","script":"{trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn !player.isTurnedOver()&&player.isDamaged();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hp<=1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover(2);\n\t\t\t\t},}","info":"结束阶段，若你武将牌正面朝上，你可以翻面并回复两点体力"},"feitiao":{"name":"飞跳","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt('feitiao'),\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att>=0) return 0;\n\t\t\t\t\t\t\tif(!target.countCards('he')) return -0.01;\n\t\t\t\t\t\t\tvar dist=get.distance(player,target);\n\t\t\t\t\t\t\tif(dist>2){\n\t\t\t\t\t\t\t\tatt-=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(dist==2){\n\t\t\t\t\t\t\t\tatt--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('feitiao',target);\n\t\t\t\t\t\tplayer.storage.feitiao2=target;\n\t\t\t\t\t\tplayer.addTempSkill('feitiao2');\n\t\t\t\t\t\ttarget.randomDiscard();\n\t\t\t\t\t}\n\n\t\t\t\t},}","info":"出牌阶段开始时，你可以弃置一张牌并指定一名角色，你与该角色的距离视为1直到回合结束，然后该角色随机弃置一张牌"},"dianji":{"name":"电击","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterCard: \"true\",usable: \"1\",viewAs: {name: \"jingleishan\",nature: \"thunder\",},check: function (card){\n\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t},ai: {order: \"8\",expose: \"0.2\",threaten: \"1.2\",wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','sha')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"9\",useful: [5,1],value: \"5\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nothunder')) return 0;\n\t\t\t\t\t\t\tif(target.hasUnknown(2)) return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(lib.config.mode=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondSha: \"1\",damage: \"1\",natureDamage: \"1\",thunderDamage: \"1\",multitarget: \"1\",multineg: \"1\",},},mod: {playerEnabled: function (card,player,target){\n\t\t\t\t\t\tif(_status.event.skill=='dianji'&&get.distance(player,target)>2) return false;\n\t\t\t\t\t},},}","info":"出牌阶段限一次，你可以将一张手牌当作惊雷闪对距离2以内的角色使用"},"pingzhang":{"name":"屏障","script":"{trigger: {global: \"damageBegin\",},intro: {content: function (storage,player){\n\t\t\t\t\t\tif(player.hasSkill('pingzhang2')){\n\t\t\t\t\t\t\tif(player.hasSkill('pingzhang3')){\n\t\t\t\t\t\t\t\treturn '已对自已和其他角色发动屏障';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn '已对自已发动屏障';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '已对其他角色发动屏障';\n\t\t\t\t\t\t}\n\t\t\t\t\t},markcount: function (storage,player){\n\t\t\t\t\t\tif(player.hasSkill('pingzhang2')&&player.hasSkill('pingzhang3')){\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},},filter: function (event,player){\n\t\t\t\t\tif(event.num<=0) return false;\n\t\t\t\t\tvar position=get.is.altered('pingzhang')?'h':'he';\n\t\t\t\t\tif(event.player==player){\n\t\t\t\t\t\tif(player.hasSkill('pingzhang2')) return false;\n\t\t\t\t\t\treturn player.countCards(position,{suit:'heart'});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.hasSkill('pingzhang3')) return false;\n\t\t\t\t\t\treturn player.countCards(position,{suit:'spade'});\n\t\t\t\t\t}\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar position=get.is.altered('pingzhang')?'h':'he';\n\t\t\t\t\tvar suit=(player==trigger.player)?'heart':'spade';\n\t\t\t\t\tvar next=player.chooseToDiscard(position,{suit:suit},get.prompt('pingzhang',trigger.player));\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(get.damageEffect(trigger.player,trigger.source,player)<0){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill=['pingzhang',trigger.player];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\t\tplayer.addSkill('pingzhang2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.addSkill('pingzhang3');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.markSkill('pingzhang');\n\t\t\t\t\t}\n\t\t\t\t},group: [\"pingzhang_count\"],subSkill: {count: {trigger: {player: \"phaseBegin\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.pingzhang=0;\n\t\t\t\t\t\t\tif(player.hasSkill('pingzhang2')){\n\t\t\t\t\t\t\t\tplayer.storage.pingzhang++;\n\t\t\t\t\t\t\t\tplayer.removeSkill('pingzhang2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hasSkill('pingzhang3')){\n\t\t\t\t\t\t\t\tplayer.storage.pingzhang++;\n\t\t\t\t\t\t\t\tplayer.removeSkill('pingzhang3');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.unmarkSkill('pingzhang');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},ai: {expose: \"0.2\",threaten: \"1.5\",},}","info":"每轮各限一次，当你受到伤害时，你可以弃置一张红桃牌令伤害-1；当一名其他角色受到伤害时，你可以弃置一张黑桃牌令伤害-1"},"owliyong":{"name":"力涌","script":"{trigger: {player: \"phaseDrawBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.pingzhang>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num+=player.storage.pingzhang;\n\t\t\t\t},}","info":"锁定技，你摸牌阶段摸牌数+X，X为你上一轮发动屏障的次数"},"qinru":{"name":"侵入","script":"{trigger: {player: \"useCardToBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.target!=player&&event.target&&!event.target.hasSkill('fengyin');\n\t\t\t\t},logTarget: \"target\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},intro: {content: \"players\",mark: function (dialog,storage,player){\n\t\t\t\t\t\tvar one=[],two=[],three=[];\n\t\t\t\t\t\tfor(var i=0;i<storage.length;i++){\n\t\t\t\t\t\t\tswitch(player.storage.qinru_turn[i]){\n\t\t\t\t\t\t\t\tcase 1:three.push(storage[i]);break;\n\t\t\t\t\t\t\t\tcase 2:two.push(storage[i]);break;\n\t\t\t\t\t\t\t\tdefault:one.push(storage[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(one.length){\n\t\t\t\t\t\t\tdialog.addText('一回合前');\n\t\t\t\t\t\t\tdialog.addSmall(one);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(two.length){\n\t\t\t\t\t\t\tdialog.addText('两回合前');\n\t\t\t\t\t\t\tdialog.addSmall(two);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(three.length){\n\t\t\t\t\t\t\tdialog.addText('三回合前');\n\t\t\t\t\t\t\tdialog.addSmall(three);\n\t\t\t\t\t\t}\n\t\t\t\t\t},},init: function (player){\n\t\t\t\t\tplayer.storage.qinru=[];\n\t\t\t\t\tplayer.storage.qinru_turn=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.target.judge(function(card){\n\t\t\t\t\t\treturn get.suit(card)=='heart'?0:-1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.suit!='heart'){\n\t\t\t\t\t\tvar target=trigger.target;\n\t\t\t\t\t\tvar index=player.storage.qinru.indexOf(target);\n\t\t\t\t\t\tvar num=_status.currentPhase==player?4:3;\n\t\t\t\t\t\tif(index===-1){\n\t\t\t\t\t\t\tplayer.storage.qinru.push(target);\n\t\t\t\t\t\t\tplayer.storage.qinru_turn.push(num);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.storage.qinru_turn[index]=num;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.addTempSkill('fengyin',{player:'phaseAfter'});\n\t\t\t\t\t\tplayer.markSkill('qinru');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.3\",},subSkill: {die: {trigger: {global: \"dieAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tvar index=player.storage.qinru.indexOf(trigger.player);\n\t\t\t\t\t\t\tif(index!=-1){\n\t\t\t\t\t\t\t\tplayer.storage.qinru.splice(index,1);\n\t\t\t\t\t\t\t\tplayer.storage.qinru_turn.splice(index,1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!player.storage.qinru.length){\n\t\t\t\t\t\t\t\tplayer.unmarkSkill('qinru');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},count: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tfor(var i=0;i<player.storage.qinru_turn.length;i++){\n\t\t\t\t\t\t\t\tif(player.storage.qinru_turn[i]>1){\n\t\t\t\t\t\t\t\t\tplayer.storage.qinru_turn[i]--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tplayer.storage.qinru.splice(i,1);\n\t\t\t\t\t\t\t\t\tplayer.storage.qinru_turn.splice(i,1);\n\t\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!player.storage.qinru.length){\n\t\t\t\t\t\t\t\tplayer.unmarkSkill('qinru');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},group: [\"qinru_count\",\"qinru_die\"],}","info":"每当你使用杀指定目标时，你可以令其进行一次判定，若结果不为红桃，该角色的非锁定技失效直到其下一回合结束"},"yinshen":{"name":"隐身","script":"{trigger: {player: \"loseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h',{type:'basic'})) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h'&&get.type(event.cards[i])=='basic') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.tempHide();\n\t\t\t\t},}","info":"锁定技，每当你失去最后一张基本牌，你获得潜行直到下一回合开始"},"maichong":{"name":"脉冲","script":"{trigger: {player: \"useCard\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasSkill('qinru')||!player.storage.qinru||!player.storage.qinru.length) return false;\n\t\t\t\t\tif(get.type(event.card)=='trick'&&event.cards[0]&&event.cards[0]==event.card){\n\t\t\t\t\t\tfor(var i=0;i<player.storage.qinru.length;i++){\n\t\t\t\t\t\t\tif(player.storage.qinru[i].isIn()&&player.storage.qinru[i].countCards('he')){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},autodelay: \"true\",logTarget: function (event,player){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<player.storage.qinru.length;i++){\n\t\t\t\t\t\tif(player.storage.qinru[i].isIn()&&player.storage.qinru[i].countCards('he')){\n\t\t\t\t\t\t\tlist.push(player.storage.qinru[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn list;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.list=player.storage.qinru.slice(0).sortBySeat();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\tvar target=event.list.shift();\n\t\t\t\t\t\tif(target.isIn()){\n\t\t\t\t\t\t\ttarget.randomDiscard('he',false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",noautowuxie: \"true\",},}","info":"锁定技，每当你使用一张普通锦囊牌，你令最近三回合内被你侵入过的角色各随机弃置一张牌"},"qianggu":{"name":"强固","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",selectCard: \"2\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia(2);\n\t\t\t\t\tplayer.addTempSkill('qianggu2',{player:'phaseBegin'});\n\t\t\t\t},ai: {result: {player: \"1\",},order: \"2.5\",},}","info":"出牌阶段限一次，你可以弃置两张牌并获得两点护甲，若如此做，直到你的下个回合开始，其他角色对你使用杀时需要弃置一张基本牌，否则杀对你无效"},"woliu":{"name":"涡流","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",unique: \"true\",forceunique: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('woliu'),lib.filter.notMe,[1,2]).ai=function(target){\n\t\t\t\t\t\tif(get.attitude(player,target)<0){\n\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('woliu',result.targets);\n\t\t\t\t\t\tvar list=[player].concat(result.targets);\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tlist[i].storage.woliu2=list.slice(0);\n\t\t\t\t\t\t\tlist[i].addSkill('woliu2');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},group: \"woliu_clear\",subSkill: {clear: {trigger: {player: [\"dieBegin\",\"phaseBegin\"],},forced: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\t\t\tgame.players[i].removeSkill('woliu2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"结束阶段，你可以选择至多两名角色，当你或目标中的任意一名角色成为杀的目标时，其余角色也将被追加为目标，直到你死亡或下一回合开始"}},"card":{},"hero":{"ow_liekong":{"name":"猎空","attr":["female","shu",3,["shanxian","shanhui"]]},"ow_sishen":{"name":"死神","attr":["male","shu",4,["xiandan","yihun","shouge"]]},"ow_tianshi":{"name":"天使","attr":["female","qun",3,["shouhu","ziyu","feiying"]]},"ow_falaozhiying":{"name":"法老之鹰","attr":["female","shu",3,["feidan","huoyu","feiying"]]},"ow_zhixuzhiguang":{"name":"秩序之光","attr":["female","qun",3,["guangshu"]]},"ow_luxiao":{"name":"卢西奥","attr":["male","wu",3,["yuedong","kuoyin","huhuan"]]},"ow_shibing":{"name":"士兵76","attr":["male","shu",4,["tuji","mujing","lichang"]]},"ow_yuanshi":{"name":"源氏","attr":["male","qun",3,["feiren","lianpo","zhanlong"]]},"ow_chanyata":{"name":"禅雅塔","attr":["male","qun",3,["xie","luan","sheng"]]},"ow_dva":{"name":"DVA","attr":["female","shu",2,["jijia","tuijin","zihui","chongzhuang"]]},"ow_mei":{"name":"小美","attr":["female","wei",3,["bingqiang","jidong","baoxue"]]},"ow_ana":{"name":"安娜","attr":["female","wei",3,["zhiyuan","mianzhen","aqianghua"]]},"ow_heibaihe":{"name":"黑百合","attr":["female","qun",3,["juji","duwen","dulei"]]},"ow_maikelei":{"name":"麦克雷","attr":["male","shu",4,["shanguang","tiandan","shenqiang"]]},"ow_kuangshu":{"name":"狂鼠","attr":["male","shu",3,["liudan","shoujia","shihuo"]]},"ow_tuobiang":{"name":"托比昂","attr":["male","shu",3,["paotai","maoding"]]},"ow_baolei":{"name":"堡垒","attr":["male","qun",4,["bshaowei","zhencha"]]},"ow_banzang":{"name":"半藏","attr":["male","qun",4,["bfengshi","yinbo"]]},"ow_laiyinhate":{"name":"莱因哈特","attr":["male","qun",4,["zhongdun","mengji"]]},"ow_luba":{"name":"路霸","attr":["male","shu",4,["liangou","xiyang"]]},"ow_wensidun":{"name":"温斯顿","attr":["male","shu",4,["feitiao","dianji"]]},"ow_zhaliya":{"name":"查莉娅","attr":["female","wei",4,["pingzhang","owliyong"]]},"ow_heiying":{"name":"黑影","attr":["female","wei",3,["qinru","yinshen","maichong"]]},"ow_orisa":{"name":"奥丽莎","attr":["female","wu",4,["qianggu","woliu"]]}}},"extra":{"name":"神将","skill":{"kagari_zongsi":{"name":"纵丝","script":"{enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar controls=[];\n\t\t\t\t\tif(ui.cardPile.hasChildNodes()) controls.push('选择牌堆中的一张牌');\n\t\t\t\t\tif(ui.discardPile.hasChildNodes()) controls.push('选择弃牌堆中的一张牌');\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('hej')>0;\n\t\t\t\t\t})) controls.push('选择一名角色区域内的一张牌');\n\t\t\t\t\tif(!controls.length){event.finish();return;}\n\t\t\t\t\tevent.controls=controls;\n\t\t\t\t\tvar next=player.chooseControl();\n\t\t\t\t\tnext.set('choiceList',controls)\n\t\t\t\t\tnext.set('prompt','请选择要移动的卡牌的来源');\n\t\t\t\t\tnext.ai=function(){return 0};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tresult.control=event.controls[result.index];\n\t\t\t\t\tvar list=['弃牌堆','牌堆','角色'];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(result.control.indexOf(list[i])!=-1){event.index=i;break;}\n\t\t\t\t\t}\n\t\t\t\t\tif(event.index==2){\n\t\t\t\t\t\tplayer.chooseTarget('请选择要移动的卡牌的来源',true,function(card,kagari,target){\n\t\t\t\t\t\t\treturn target.countCards('hej')>0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar source=ui[event.index==0?'discardPile':'cardPile'].childNodes;\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<source.length;i++) list.push(source[i]);\n\t\t\t\t\t\tplayer.chooseButton(['请选择要移动的卡牌',list],true).ai=get.buttonValue;\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.index==2){\n\t\t\t\t\t\tplayer.line(result.targets[0]);\n\t\t\t\t\t\tevent.target1=result.targets[0];\n\t\t\t\t\t\tplayer.choosePlayerCard(result.targets[0],true,'hej').set('visible',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.index==2) event.card=result.cards[0];\n\t\t\t\t\tvar controls=[\n\t\t\t\t\t\t'将这张牌移动到牌堆的顶部或者底部',\n\t\t\t\t\t\t'将这张牌移动到弃牌堆的顶部或者底部',\n\t\t\t\t\t\t'将这张牌移动到一名角色对应的区域里',\n\t\t\t\t\t];\n\t\t\t\t\tevent.controls=controls;\n\t\t\t\t\tvar next=player.chooseControl();\n\t\t\t\t\tnext.set('prompt','要对'+get.translation(event.card)+'做什么呢？');\n\t\t\t\t\tnext.set('choiceList',controls);\n\t\t\t\t\tnext.ai=function(){return 2};\n\t\t\t\t\t'step 4'\n\t\t\t\t\tresult.control=event.controls[result.index];\n\t\t\t\t\tvar list=['弃牌堆','牌堆','角色'];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(result.control.indexOf(list[i])!=-1){event.index2=i;break;}\n\t\t\t\t\t}\n\t\t\t\t\tif(event.index2==2){\n\t\t\t\t\t\tplayer.chooseTarget('要将'+get.translation(card)+'移动到哪一名角色的对应区域呢',true).ai=function(target){\n\t\t\t\t\t\t\treturn target==_status.event.player?1:0;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseControl('顶部','底部').set('prompt','把'+get.translation(card)+'移动到'+(event.index2==0?'弃':'')+'牌堆的...');\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.index2!=2){\n\t\t\t\t\t\tif(event.target1) event.target1.lose(card,ui.special);\n\t\t\t\t\t\telse card.goto(ui.special);\n\t\t\t\t\t\tevent.way=result.control;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.target2=result.targets[0];\n\t\t\t\t\t\tvar list=['手牌区'];\n\t\t\t\t\t\tif(lib.card[card.name].type=='equip'&&event.target2.isEmpty(lib.card[card.name].subtype)) list.push('装备区');\n\t\t\t\t\t\tif(lib.card[card.name].type=='delay'&&!event.target2.storage._disableJudge&&!event.target2.hasJudge(card.name)) list.push('判定区');\n\t\t\t\t\t\tif(list.length==1) event._result={control:list[0]};\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.chooseControl(list).set('prompt','把'+get.translation(card)+'移动到'+get.translation(event.target2)+'的...').ai=function(){return 0};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(event.index2!=2){\n\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\tvar node=ui[event.index==0?'discardPile':'cardPile'];\n\t\t\t\t\t\tif(event.way=='底部') node.appendChild(card);\n\t\t\t\t\t\telse node.insertBefore(card,node.firstChild);\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(result.control=='手牌区'){\n\t\t\t\t\t\t\tvar next=event.target2.gain(card);\n\t\t\t\t\t\t\tif(event.target1){\n\t\t\t\t\t\t\t\tnext.source=event.target1;\n\t\t\t\t\t\t\t\tnext.animate='giveAuto';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse next.animate='draw';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(result.control=='装备区'){\n\t\t\t\t\t\t\tif(event.target1) event.target1.$give(card,event.target2);\n\t\t\t\t\t\t\tevent.target2.equip(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(event.target1) event.target1.$give(card,event.target2);\n\t\t\t\t\t\t\tevent.target2.addJudge(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 7'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},ai: {order: \"10\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以选择一张不在游戏外的牌，然后将其置于牌堆/弃牌堆的顶部/底部或一名角色的对应区域内。"},"shiki_omusubi":{"name":"御结","script":"{audio: \"2\",trigger: {global: \"roundStart\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('shiki_omusubi'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player.isHealthy()) return 0;\n\t\t\t\t\t\t\tif(player.hp<3&&player.getDamagedHp()<2) return 0;\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tif(lib.character[target.name]) list.addArray(lib.character[target.name][3]);\n\t\t\t\t\t\t\tif(lib.character[target.name1]) list.addArray(lib.character[target.name1][3]);\n\t\t\t\t\t\t\tif(lib.character[target.name2]) list.addArray(lib.character[target.name2][3]);\n\t\t\t\t\t\t\tlist=list.filter(function(i){\n\t\t\t\t\t\t\t\treturn !player.hasSkill(i);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(!list.length) return 0;\n\t\t\t\t\t\treturn 1+Math.random();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('shiki_omusubi',target);\n\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tif(lib.character[target.name]) list.addArray(lib.character[target.name][3]);\n\t\t\t\t\t\tif(lib.character[target.name1]) list.addArray(lib.character[target.name1][3]);\n\t\t\t\t\t\tif(lib.character[target.name2]) list.addArray(lib.character[target.name2][3]);\n\t\t\t\t\t\tplayer.addSkill(list);\n\t\t\t\t\t\tgame.broadcastAll(function(list){\n\t\t\t\t\t\t\tlib.character.key_shiki[3].addArray(list);\n\t\t\t\t\t\t\tgame.expandSkills(list);\n\t\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\t\tvar info=lib.skill[i];\n\t\t\t\t\t\t\t\tif(!info) continue;\n\t\t\t\t\t\t\t\tif(!info.audioname2) info.audioname2={};\n\t\t\t\t\t\t\t\tinfo.audioname2.key_shiki='shiki_omusubi';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},list);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"一轮游戏开始时，你可以减1点体力上限，然后将一名其他角色武将牌上的技能加入到你的武将牌上。"},"hina_shenxian":{"name":"神现","script":"{hiddenSkill: \"true\",trigger: {player: \"showCharacterAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.toShow.contains('key_hina');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.equip(game.createCard('hina_shenji','diamond',13));\n\t\t\t\t},}","info":"隐匿技，锁定技，当你明置此武将牌时，你将一张【神机】置入装备区。"},"hina_mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算于其他角色的距离时始终-1。"},"hina_tieji":{"name":"铁骑","script":"{shaRelated: \"true\",trigger: {player: \"useCardToPlayered\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge(function(){return 0});\n\t\t\t\t\tif(!trigger.target.hasSkill('fengyin')){\n\t\t\t\t\t\ttrigger.target.addTempSkill('fengyin');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar suit=result.suit;\n\t\t\t\t\tif(result.suit=='spade'){\n\t\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\t\tvar map=trigger.customArgs;\n\t\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\t\tif(!map[id].extraDamage) map[id].extraDamage=0;\n\t\t\t\t\t\tmap[id].extraDamage++;\n\t\t\t\t\t}\n\t\t\t\t\tvar target=trigger.target;\n\t\t\t\t\tvar num=target.countCards('h','shan');\n\t\t\t\t\ttarget.chooseToDiscard('请弃置一张'+get.translation(suit)+'牌，否则不能使用闪抵消此杀','he',function(card){\n\t\t\t\t\t\treturn get.suit(card)==_status.event.suit;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar num=_status.event.num;\n\t\t\t\t\t\tif(num==0) return 0;\n\t\t\t\t\t\tif(card.name=='shan') return num>1?2:0;\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t}).set('num',num).set('suit',suit);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttrigger.directHit.add(trigger.target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {ignoreSkill: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!arg||arg.isLink||!arg.card||arg.card.name!='sha') return false;\n\t\t\t\t\t\tif(!arg.target||get.attitude(player,arg.target)>=0) return false;\n\t\t\t\t\t\tif(!arg.skill||!lib.skill[arg.skill]||lib.skill[arg.skill].charlotte||get.is.locked(arg.skill)||!arg.target.getSkills(true,false).contains(arg.skill)) return false;\n\t\t\t\t\t},},}","info":"当你使用【杀】指定目标后，你可进行判定。你令目标角色的所有非锁定技失效直到回合结束。除非其弃置一张与判定结果花色相同的牌，则其不能响应此【杀】。若判定结果为♠，则此【杀】对其的伤害+1。"},"meihun":{"name":"魅魂","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",target: \"useCardToTargeted\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.name!='phaseJieshu'&&event.card.name!='sha') return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('meihun'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>0) return 0;\n\t\t\t\t\t\treturn 0.1-att/target.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('meihun',target);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.chooseControl(lib.suit).set('prompt','请选择一种花色').set('ai',function(){\n\t\t\t\t\t\t\treturn lib.suit.randomGet();\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar suit=result.control;\n\t\t\t\t\tplayer.chat(get.translation(suit+2));\n\t\t\t\t\tgame.log(player,'选择了','#y'+get.translation(suit+2))\n\t\t\t\t\tif(target.countCards('h',{suit:suit})){\n\t\t\t\t\t\ttarget.chooseCard('h','交给'+get.translation(player)+'一张'+get.translation(suit)+'花色的手牌',true,function(card,player){\n\t\t\t\t\t\t\treturn get.suit(card,player)==_status.event.suit;\n\t\t\t\t\t\t}).set('suit',suit);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.discardPlayerCard(target,true,'h','visible');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length) player.gain(result.cards,target,'give');\n\t\t\t\t},}","info":"结束阶段或当你成为【杀】的目标后，你可以令一名其他角色交给你一张你声明的花色的手牌，若其没有则你观看其手牌然后弃置其中一张。"},"huoxin":{"name":"惑心","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(game.countPlayer()<3) return false;\n\t\t\t\t\tfor(var i of lib.suit){\n\t\t\t\t\t\tif(player.countCards('h',{suit:i})>1) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},complexCard: \"true\",position: \"h\",filterCard: function (card,player){\n\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\t\treturn player.countCards('h',function(card2){\n\t\t\t\t\t\t\treturn card!=card2&&get.suit(card2,player)==suit;\n\t\t\t\t\t\t})>0;\n\t\t\t\t\t}\n\t\t\t\t\treturn get.suit(card,player)==get.suit(ui.selected.cards[0],player);\n\t\t\t\t},selectCard: \"2\",selectTarget: \"2\",filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},multitarget: \"true\",multiline: \"true\",delay: \"false\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},targetprompt: [\"拼点发起人\",\"拼点目标\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar target=targets[0];\n\t\t\t\t\ttargets.sortBySeat();\n\t\t\t\t\tif(target!=targets[0]) cards.reverse();\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\ttargets[i].gain(cards[i],player,'visible');\n\t\t\t\t\t\tplayer.$give(cards[i],targets[i]);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(targets[0].canCompare(targets[1])){\n\t\t\t\t\t\ttargets[0].chooseToCompare(targets[1]);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.winner!==targets[0]) targets[0].addMark('huoxin',1);\n\t\t\t\t\tif(result.winner!==targets[1]) targets[1].addMark('huoxin',1);\n\t\t\t\t},marktext: \"魅\",intro: {name: \"魅惑\",name2: \"魅惑\",content: \"mark\",},group: \"huoxin_control\",ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasMark('huoxin')) return -2;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以展示两张花色相同的手牌并分别交给两名其他角色，然后令这两名角色拼点，没赢的角色获得1个“魅惑”标记。拥有2个或更多“魅惑”的角色回合即将开始时，该角色移去其所有“魅惑”，此回合改为由你操控。"},"new_wuhun":{"name":"武魂","script":"{audio: \"wuhun21\",group: [\"new_wuhun_mark\",\"new_wuhun_die\",\"wuhun22\",\"wuhun23\"],trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.source!=undefined;\n\t\t\t\t},content: function (){\n\t\t\t\ttrigger.source.addMark('new_wuhun_mark',trigger.num);\n\t\t\t\t},subSkill: {die: {skillAnimation: \"true\",animationColor: \"soil\",trigger: {player: \"die\",},forced: \"true\",forceDie: \"true\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.hasMark('new_wuhun_mark');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\t\t\tvar current=game.players[i];\n\t\t\t\t\t\t\t\tif(current!=player&&current.countMark('new_wuhun_mark')>num){\n\t\t\t\t\t\t\t\t\tnum=current.countMark('new_wuhun_mark');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.chooseTarget(true,'请选择【武魂】的目标',function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player&&target.countMark('new_wuhun_mark')==_status.event.num;\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}).set('forceDie',true).set('num',num);\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\t\t\tplayer.logSkill(Math.random()<0.5?'wuhun22':'wuhun23',target);\n\t\t\t\t\t\t\t\tplayer.line(target,{color:[255, 255, 0]});\n\t\t\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"step 2\"\n\t\t\t\t\t\t\ttarget.judge(function(card){\n\t\t\t\t\t\t\t\tif(['tao','taoyuan'].contains(card.name)) return 10;\n\t\t\t\t\t\t\t\treturn -10;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\"step 3\"\n\t\t\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\t\t\tlib.element.player.die.apply(target,[]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},mark: {marktext: \"魇\",intro: {name: \"梦魇\",content: \"mark\",},sub: \"true\",},},ai: {threaten: \"0.01\",notemp: \"true\",},}","info":"锁定技，当你受到伤害后，伤害来源获得X个“梦魇”标记（X为伤害点数）。锁定技，当你死亡时，你选择一名“梦魇”标记数量最多的其他角色。该角色进行判定：若判定结果不为【桃】或【桃园结义】，则该角色死亡。"},"wushen":{"name":"武神","script":"{mod: {cardname: function (card,player,name){\n\t\t\t\t\t\tif(get.suit(card)=='heart') return 'sha';\n\t\t\t\t\t},cardnature: function (card,player){\n\t\t\t\t\t\tif(get.suit(card)=='heart') return false;\n\t\t\t\t\t},targetInRange: function (card){\n\t\t\t\t\t\tif(get.suit(card)=='heart') return true;\n\t\t\t\t\t},cardUsable: function (card){\n\t\t\t\t\t\tif(card.name=='sha'&&get.suit(card)=='heart') return Infinity;\n\t\t\t\t\t},},audio: \"2\",trigger: {player: \"useCard\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&get.suit(event.card)=='heart';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.directHit.addArray(game.players);\n\t\t\t\t\tif(trigger.addCount!==false){\n \t\t\t\t\ttrigger.addCount=false;\n \t\t\t\t\tif(player.stat[player.stat.length-1].card.sha>0){\n \t\t\t\t\t\tplayer.stat[player.stat.length-1].card.sha--;\n \t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'respondSha')&&current<0) return 0.6\n\t\t\t\t\t\t},},directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\treturn arg.card.name=='sha'&&get.suit(arg.card)=='heart';\n\t\t\t\t\t},},}","info":"锁定技，你的红桃手牌均视为【杀】；锁定技，你使用红桃【杀】无距离和次数限制且不可被响应。"},"xinjuejing":{"name":"绝境","script":"{mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn 2+num;\n\t\t\t\t\t},},audio: \"2\",trigger: {player: [\"dying\",\"dyingAfter\"],},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"锁定技，你的手牌上限+2；当你进入或脱离濒死状态时，你摸一张牌。"},"relonghun":{"name":"龙魂","script":"{audio: \"2\",enable: [\"chooseToUse\",\"chooseToRespond\"],prompt: \"将♦牌当做杀，♥牌当做桃，♣牌当做闪，♠牌当做无懈可击使用或打出\",viewAs: function (cards,player){\n\t\t\t\t\tvar name=false;\n\t\t\t\t\tvar nature=null;\n\t\t\t\t\t//根据选择的卡牌的花色 判断要转化出的卡牌是闪还是火杀还是无懈还是桃\n\t\t\t\t\tswitch(get.suit(cards[0],player)){\n\t\t\t\t\t\tcase 'club':name='shan';break;\n\t\t\t\t\t\tcase 'diamond':name='sha';nature='fire';break;\n\t\t\t\t\t\tcase 'spade':name='wuxie';break;\n\t\t\t\t\t\tcase 'heart':name='tao';break;\n\t\t\t\t\t}\n\t\t\t\t\t//返回判断结果\n\t\t\t\t\tif(name) return {name:name,nature:nature};\n\t\t\t\t\treturn null;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length) return 0;\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(_status.event.type=='phase'){\n\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\tvar name2;\n\t\t\t\t\t\tvar list=['sha','tao'];\n\t\t\t\t\t\tvar map={sha:'diamond',tao:'heart'}\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar name=list[i];\n\t\t \t\t\t\tif(player.countCards('he',function(card){\n\t\t \t\t\t\t\treturn (name!='sha'||get.value(card)<5)&&get.suit(card,player)==map[name];\n\t\t \t\t\t\t})>0&&player.getUseValue({name:name,nature:name=='sha'?'fire':null})>0){\n\t\t \t\t\t\t\tvar temp=get.order({name:name,nature:name=='sha'?'fire':null});\n\t\t \t\t\t\t\tif(temp>max){\n\t\t \t\t\t\t\t\tmax=temp;\n\t\t \t\t\t\t\t\tname2=map[name];\n\t\t \t\t\t\t\t}\n\t\t \t\t\t\t}\n\t\t \t\t\t}\n\t\t \t\t\tif(name2==get.suit(card,player)) return (name2=='diamond'?(5-get.value(card)):20-get.value(card));\n\t\t \t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn 1;\n\t\t\t\t},selectCard: [1,2],complexCard: \"true\",position: \"he\",filterCard: function (card,player,event){\n\t\t\t\t\t//如果已经选了一张牌 那么第二张牌和第一张花色相同即可\n\t\t\t\t\tif(ui.selected.cards.length) return get.suit(card,player)==get.suit(ui.selected.cards[0],player);\n\t\t\t\t\tevent=event||_status.event;\n\t\t\t\t\t//获取当前时机的卡牌选择限制\n\t\t\t\t\tvar filter=event._backup.filterCard;\n\t\t\t\t\t//获取卡牌花色\n\t\t\t\t\tvar name=get.suit(card,player);\n\t\t\t\t\t//如果这张牌是梅花并且当前时机能够使用/打出闪 那么这张牌可以选择\n\t\t\t\t\tif(name=='club'&&filter({name:'shan',cards:[card]},player,event)) return true;\n\t\t\t\t\t//如果这张牌是方片并且当前时机能够使用/打出火杀 那么这张牌可以选择\n\t\t\t\t\tif(name=='diamond'&&filter({name:'sha',cards:[card],nature:'fire'},player,event)) return true;\n\t\t\t\t\t//如果这张牌是黑桃并且当前时机能够使用/打出无懈 那么这张牌可以选择\n\t\t\t\t\tif(name=='spade'&&filter({name:'wuxie',cards:[card]},player,event)) return true;\n\t\t\t\t\t//如果这张牌是红桃并且当前时机能够使用/打出桃 那么这张牌可以选择\n\t\t\t\t\tif(name=='heart'&&filter({name:'tao',cards:[card]},player,event)) return true;\n\t\t\t\t\t//上述条件都不满足 那么就不能选择这张牌\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\t//获取当前时机的卡牌选择限制\n\t\t\t\t\tvar filter=event.filterCard;\n\t\t\t\t\t//如果当前时机能够使用/打出火杀并且角色有方片 那么可以发动技能\n\t\t\t\t\tif(filter({name:'sha',nature:'fire'},player,event)&&player.countCards('he',{suit:'diamond'})) return true;\n\t\t\t\t\t//如果当前时机能够使用/打出闪并且角色有梅花 那么可以发动技能\n\t\t\t\t\tif(filter({name:'shan'},player,event)&&player.countCards('he',{suit:'club'})) return true;\n\t\t\t\t\t//如果当前时机能够使用/打出桃并且角色有红桃 那么可以发动技能\n\t\t\t\t\tif(filter({name:'tao'},player,event)&&player.countCards('he',{suit:'heart'})) return true;\n\t\t\t\t\t//如果当前时机能够使用/打出无懈可击并且角色有黑桃 那么可以发动技能\n\t\t\t\t\tif(filter({name:'wuxie'},player,event)&&player.countCards('he',{suit:'spade'})) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tvar name;\n\t\t\t\t\t\tswitch(tag){\n\t\t\t\t\t\t\tcase 'respondSha':name='diamond';break;\n\t\t\t\t\t\t\tcase 'respondShan':name='club';break;\n\t\t\t\t\t\t\tcase 'save':name='heart';break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.countCards('he',{suit:name})) return false;\n\t\t\t\t\t},order: function (item,player){\n\t\t\t\t\t\tif(player&&_status.event.type=='phase'){\n\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\tvar list=['sha','tao'];\n\t\t\t\t\t\t\tvar map={sha:'diamond',tao:'heart'}\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t \t\t\t\tif(player.countCards('he',function(card){\n\t\t \t\t\t\t\t\treturn (name!='sha'||get.value(card)<5)&&get.suit(card,player)==map[name];\n\t\t \t\t\t\t\t})>0&&player.getUseValue({name:name,nature:name=='sha'?'fire':null})>0){\n\t\t\t \t\t\t\t\tvar temp=get.order({name:name,nature:name=='sha'?'fire':null});\n\t\t\t \t\t\t\t\tif(temp>max) max=temp;\n\t\t\t \t\t\t\t}\n\t\t\t \t\t\t}\n\t\t\t \t\t\tmax/=1.1;\n\t\t\t \t\t\treturn max;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t},},hiddenCard: function (player,name){\n\t\t\t\t\tif(name=='wuxie'&&_status.connectMode&&player.countCards('h')>0) return true;\n\t\t\t\t\tif(name=='wuxie') return player.countCards('he',{suit:'spade'})>0;\n\t\t\t\t\tif(name=='tao') return player.countCards('he',{suit:'heart'})>0;\n\t\t\t\t},group: [\"relonghun_num\",\"relonghun_discard\"],subSkill: {num: {trigger: {player: \"useCard\",},forced: \"true\",popup: \"false\",filter: function (event){\n\t\t\t\t\t\t\tvar evt=event;\n\t\t\t\t\t\t\treturn ['sha','tao'].contains(evt.card.name)&&evt.skill=='relonghun'&&evt.cards&&evt.cards.length==2;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.baseDamage++;\n\t\t\t\t\t\t},sub: \"true\",},discard: {trigger: {player: [\"useCardAfter\",\"respondAfter\"],},forced: \"true\",popup: \"false\",logTarget: function (){\n\t\t\t\t\t\t\treturn _status.currentPhase;\n\t\t\t\t\t\t},autodelay: function (event){\n\t\t\t\t\t\t\treturn event.name=='respond'?0.5:false;\n\t\t\t\t\t\t},filter: function (evt,player){\n\t\t\t\t\t\t\treturn ['shan','wuxie'].contains(evt.card.name)&&evt.skill=='relonghun'&&\n\t\t\t\t\t\t\t\tevt.cards&&evt.cards.length==2&&_status.currentPhase&&_status.currentPhase!=player&&_status.currentPhase.countDiscardableCards(player,'he');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.line(_status.currentPhase,'green');\n\t\t\t\t\t\t\tplayer.discardPlayerCard(_status.currentPhase,'he',true);\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"你可以将同花色的一至两张牌按下列规则使用或打出：红桃当【桃】，方块当火【杀】，梅花当【闪】，黑桃当普【无懈可击】。若你以此法使用了两张红色牌，则此牌回复值或伤害值+1。若你以此法使用了两张黑色牌，则你弃置当前回合角色一张牌。"},"qixing":{"name":"七星","script":"{audio: \"2\",unique: \"true\",trigger: {global: \"gameDrawAfter\",player: \"phaseZhunbeiBegin\",},forced: \"true\",check: function (event,player){\n\t\t\t\t\treturn player.hp<=1;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.qixing;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.storage.qixing=game.cardsGotoSpecial(get.cards(7)).cards;\n\t\t\t\t\tplayer.markSkill('qixing');\n\t\t\t\t\tgame.addVideo('storage',player,['qixing',get.cardsInfo(player.storage.qixing),'cards']);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseCard('选择任意张手牌与“星”交换',[1,Math.min(player.countCards('h'),player.storage.qixing.length)]).set('promptx',[player.storage.qixing]).ai=function(card){\n\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\tif(val<0) return 10;\n\t\t\t\t\t\tif(player.skipList.contains('phaseUse')){\n\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -val;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('qixing');\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.storage.qixing=player.storage.qixing.concat(result.cards);\n\t\t\t\t\t\tplayer.syncStorage('qixing');\n\t\t\t\t\t\tevent.num=result.cards.length;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tplayer.chooseCardButton(player.storage.qixing,'选择'+event.num+'张牌作为手牌',event.num,true).ai=function(button){\n\t\t\t\t\t\tvar val=get.value(button.link);\n\t\t\t\t\t\tif(val<0) return -10;\n\t\t\t\t\t\tif(player.skipList.contains('phaseUse')){\n\t\t\t\t\t\t\treturn -val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t}\n\t\t\t\t\tif(player==game.me&&!event.isMine()){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tplayer.gain(result.links,'fromStorage');\n\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\tplayer.storage.qixing.remove(result.links[i]);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.syncStorage('qixing');\n\t\t\t\t\tif(player==game.me&&_status.auto){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t}\n\t\t\t\t},mark: \"true\",intro: {onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},mark: function (dialog,content,player){\n\t\t\t\t\t\tif(content&&content.length){\n\t\t\t\t\t\t\tif(player==game.me||player.isUnderControl()){\n\t\t\t\t\t\t\t\tdialog.addAuto(content);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn '共有'+get.cnNumber(content.length)+'张星';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},content: function (content,player){\n\t\t\t\t\t\tif(content&&content.length){\n\t\t\t\t\t\t\tif(player==game.me||player.isUnderControl()){\n\t\t\t\t\t\t\t\treturn get.translation(content);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn '共有'+get.cnNumber(content.length)+'张星';\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: [\"qixing2\"],}","info":"游戏开始时，你将牌堆顶的七张牌置于你的武将牌上，称之为“星”。然后/摸牌阶段结束后，你可用任意数量的手牌等量交换这些“星”。"},"kuangfeng":{"name":"狂风","script":"{unique: \"true\",audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.qixing&&player.storage.qixing.length;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget('选择一名角色获得狂风标记').ai=function(target){\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar length=result.targets.length;\n\t\t\t\t\t\tfor(var i=0;i<length;i++){\n\t\t\t\t\t\t\tresult.targets[i].addSkill('kuangfeng2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('kuangfeng',result.targets,'fire');\n\t\t\t\t\t\tplayer.chooseCardButton('弃置'+get.cnNumber(length)+'枚星',length,player.storage.qixing,true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\tplayer.storage.qixing.remove(result.links[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.qixing.length==0){\n\t\t\t\t\t\tplayer.unmarkSkill('qixing');\n\t\t\t\t\t}\n\t\t\t\t\tgame.addVideo('storage',player,['qixing',get.cardsInfo(player.storage.qixing),'cards']);\n\t\t\t\t\tgame.cardsDiscard(result.links);\n\t\t\t\t\tgame.log(player,'将',result.links,'置入了弃牌堆')\n\t\t\t\t},}","info":"结束阶段，你可以弃置1张“星”并指定一名角色：直到你的下回合开始，该角色受到火焰伤害时，此伤害+1。"},"dawu":{"name":"大雾","script":"{unique: \"true\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.qixing&&player.storage.qixing.length;\n\t\t\t\t},audio: \"2\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget('选择角色获得大雾标记',\n\t\t\t\t\t[1,Math.min(game.countPlayer(),player.storage.qixing.length)]).ai=function(target){\n\t\t\t\t\t\tif(target.isMin()) return 0;\n\t\t\t\t\t\tif(target.hasSkill('biantian2')) return 0;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>=4){\n\t\t\t\t\t\t\tif(target.hp==1&&target.maxHp>2) return att;\n\t\t\t\t\t\t\tif(target.hp==2&&target.maxHp>3&&target.countCards('he')==0) return att*0.7;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar length=result.targets.length;\n\t\t\t\t\t\tfor(var i=0;i<length;i++){\n\t\t\t\t\t\t\tresult.targets[i].addSkill('dawu2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('dawu',result.targets,'thunder');\n\t\t\t\t\t\tplayer.chooseCardButton('弃置'+get.cnNumber(length)+'枚星',length,player.storage.qixing,true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\tplayer.storage.qixing.remove(result.links[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.qixing.length==0){\n\t\t\t\t\t\tplayer.unmarkSkill('qixing');\n\t\t\t\t\t}\n\t\t\t\t\tgame.addVideo('storage',player,['qixing',get.cardsInfo(player.storage.qixing),'cards']);\n\t\t\t\t\tgame.cardsDiscard(result.links);\n\t\t\t\t},group: \"dawu3\",}","info":"结束阶段，你可以弃置X张“星”并指定等量的角色：直到你的下回合开始，当这些角色受到非雷电伤害时，防止此伤害。"},"shelie":{"name":"涉猎","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\tevent.cards=get.cards(5);\n\t\t\t\t\tgame.cardsGotoOrdering(event.cards);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tgame.broadcastAll(function(player,id,cards){\n\t\t\t\t\t\tvar str;\n\t\t\t\t\t\tif(player==game.me&&!_status.auto){\n\t\t\t\t\t\t\tstr='涉猎：获取花色各不相同的牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr='涉猎';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar dialog=ui.create.dialog(str,cards);\n\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t},player,event.videoId,event.cards);\n\t\t\t\t\tevent.time=get.utc();\n\t\t\t\t\tgame.addVideo('showCards',player,['涉猎',get.cardsInfo(event.cards)]);\n\t\t\t\t\tgame.addVideo('delay',null,2);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar next=player.chooseButton([0,5],true);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tif(get.suit(ui.selected.buttons[i].link)==get.suit(button.link)) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.links){\n\t\t\t\t\t\tevent.cards2=result.links;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\tvar time=1000-(get.utc()-event.time);\n\t\t\t\t\tif(time>0){\n\t\t\t\t\t\tgame.delay(0,time);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tvar cards2=event.cards2;\n\t\t\t\t\tplayer.gain(cards2,'log','gain2');\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"摸牌阶段，你可以改为从牌堆顶亮出五张牌，然后选择获得不同花色的牌各一张。"},"gongxin":{"name":"攻心","script":"{audio: \"2\",audioname: [\"re_lvmeng\",\"gexuan\"],enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar cards=target.getCards('h');\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send(function(cards,id){\n\t\t\t\t\t\t\tui.create.dialog('攻心',cards).videoId=id;\n\t\t\t\t\t\t},cards,event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog=ui.create.dialog('攻心',cards);\n\t\t\t\t\tevent.dialog.videoId=event.videoId;\n\t\t\t\t\tif(!event.isMine()){\n\t\t\t\t\t\tevent.dialog.style.display='none';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton().set('filterButton',function(button){\n\t\t\t\t\t\treturn get.suit(button.link)=='heart';\n\t\t\t\t\t}).set('dialog',event.videoId);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\tvar func=function(card,id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\tif(dialog.buttons[i].link==card){\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('selectedx');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('unselectable');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send(func,event.card,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.isMine()){\n\t\t\t\t\t\t\tfunc(event.card,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseControl('gongxin_discard','gongxin_top');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tif(result.control=='gongxin_top'){\n\t\t\t\t\t\tplayer.showCards(card,'置于牌堆顶');\n\t\t\t\t\t\ttarget.lose(card,ui.cardPile,'insert','visible');\n\t\t\t\t\t\tgame.log(player,'将',event.card,'置于牌堆顶');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.discard(card);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -target.countCards('h');\n\t\t\t\t\t\t},},order: \"10\",expose: \"0.4\",},}","info":"出牌阶段限一次，你可以观看一名其他角色的手牌，并可以展示其中一张红桃牌，然后将其弃置或置于牌堆顶。"},"yeyan":{"name":"业炎","script":"{unique: \"true\",forceDie: \"true\",enable: \"phaseUse\",audio: \"3\",animationColor: \"metal\",skillAnimation: \"legend\",filterTarget: function (card,player,target){\n\t\t\t\t\tvar length=ui.selected.cards.length;\n\t\t\t\t\treturn (length==0||length==4);\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tif(get.suit(ui.selected.cards[i])==suit) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},complexCard: \"true\",limited: \"true\",selectCard: [0,4],line: \"fire\",check: function (){return -1},selectTarget: function (){\n\t\t\t\t\tif(ui.selected.cards.length==4) return [1,2];\n\t\t\t\t\tif(ui.selected.cards.length==0) return [1,3];\n\t\t\t\t\tgame.uncheck('target');\n\t\t\t\t\treturn [1,3];\n\t\t\t\t},multitarget: \"true\",multiline: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('yeyan');\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\ttargets.sortBySeat();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(cards.length==4) event.goto(2);\n\t\t\t\t\telse {\n\t\t\t\t\t\tif(event.num<targets.length){\n\t\t\t\t\t\ttargets[event.num].damage('fire',1,'nocard');\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.num==targets.length) event.finish();\n\t\t\t\t\telse event.redo();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.loseHp(3);\n\t\t\t\t\tif(targets.length==1) event.goto(4);\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget('请选择受到2点伤害的角色',true,function(card,player,target){\n\t\t\t\t\t\t\treturn _status.event.targets.contains(target)\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}).set('forceDie',true).set('targets',targets);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.num<targets.length){\n\t\t\t\t\t\tvar dnum=1;\n\t\t\t\t\t\tif(result.bool&&result.targets&&targets[event.num]==result.targets[0]) dnum=2;\n\t\t\t\t\t\ttargets[event.num].damage('fire',dnum,'nocard');\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.num==targets.length) event.finish();\n\t\t\t\t\telse event.redo();\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tplayer.chooseControl(\"2点\",\"3点\").set('prompt','请选择伤害点数').set('ai',function(){\n\t\t\t\t\t\treturn \"3点\";\n\t\t\t\t\t}).set('forceDie',true);\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\ttargets[0].damage('fire',result.control==\"2点\"?2:3,'nocard'); \n\t\t\t\t},ai: {order: \"1\",fireAttack: \"true\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nofire')) return 0;\n\t\t\t\t\t\t\tif(lib.config.mode=='versus') return -1;\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以对一至三名角色造成至多共3点火焰伤害（你可以任意分配每名目标角色受到的伤害点数），若你将对一名角色分配2点或更多的火焰伤害，你须先弃置四张不同花色的手牌再失去3点体力。"},"qinyin":{"name":"琴音","script":"{audio: \"2\",trigger: {player: \"phaseDiscardEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.type=='discard'&&evt.getParent('phaseDiscard')==event) cards.addArray(evt.cards2);\n\t\t\t\t\t});\n\t\t\t\t\treturn cards.length>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.forceDie=true;\n\t\t\t\t\tif(typeof event.count!='number'){\n\t\t\t\t\t\t// event.count=trigger.cards.length-1;\n\t\t\t\t\t\tevent.count=1;\n\t\t\t\t\t}\n\t\t\t\t\tvar recover=0,lose=0,players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i].hp<players[i].maxHp){\n\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\tif(players[i].hp<2){\n\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\trecover+=0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\trecover++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\tif(players[i].hp<2){\n\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\trecover-=0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\trecover--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar prompt=get.prompt('qinyin')+'（剩余'+get.cnNumber(event.count)+'次）';\n\t\t\t\t\tplayer.chooseControl('失去体力','回复体力','cancel2',\n\t\t\t\t\tui.create.dialog(get.prompt('qinyin'),'hidden')).ai=function(){\n\t\t\t\t\t\tif(lose>recover&&lose>0) return 0;\n\t\t\t\t\t\tif(lose<recover&&recover>0) return 1;\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='cancel2'){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.logSkill('qinyin');\n\t\t\t\t\t\tevent.bool=(result.control=='回复体力');\n\t\t\t\t\t\tevent.num=0;\n\t\t\t\t\t\tevent.players=game.filterPlayer();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.num<event.players.length){\n\t\t\t\t\t\tvar target=event.players[event.num];\n\t\t\t\t\t\tif(event.bool){\n\t\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttarget.loseHp();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.count>1){\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",threaten: \"2\",},}","info":"弃牌阶段结束时，若你于此阶段内弃置过两张或更多的牌，则你可以选择一项：1. 令所有角色各回复1点体力；2. 令所有角色各失去1点体力。"},"renjie":{"name":"忍戒","script":"{audio: \"renjie2\",trigger: {player: \"damageEnd\",},forced: \"true\",unique: \"true\",group: \"renjie2\",notemp: \"true\",filter: function (event){\n\t\t\t\t\treturn event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addMark('renjie',trigger.num);\n\t\t\t\t},intro: {name2: \"忍\",content: \"mark\",},ai: {maixie: \"true\",maixie_hp: \"true\",combo: \"sbaiyin\",},}","info":"锁定技，当你受到1点伤害后，你获得一枚“忍”标记；锁定技，当你于弃牌阶段内弃置牌后，你获得等同于失去的牌数量的“忍”标记。"},"sbaiyin":{"name":"拜印","script":"{skillAnimation: \"epic\",animationColor: \"thunder\",juexingji: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",unique: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('renjie')>=4;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('jilue');\n\t\t\t\t\tplayer.awakenSkill('sbaiyin');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若你的“忍”标记数不小于4，你减1点体力上限，然后获得〖极略〗"},"lianpo":{"name":"连破","script":"{audio: \"2\",trigger: {global: \"phaseAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getStat('kill')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t},}","info":"一名角色的回合结束时，若你本回合内杀死过角色，则你可以进行一个额外的回合。"},"new_guixin":{"name":"归心","script":"{audio: \"guixin\",trigger: {player: \"damageEnd\",},check: function (event,player){\n\t\t\t\t\tif(player.isTurnedOver()||event.num>1) return true;\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\tif(current.countCards('he')&&current!=player&&get.attitude(player,current)<=0){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(current.countCards('j')&&current!=player&&get.attitude(player,current)>0){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn num>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar targets=game.filterPlayer();\n\t\t\t\t\ttargets.remove(player);\n\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tplayer.line(targets,'green');\n\t\t\t\t\tplayer.chooseControl('手牌区','装备区','判定区').set('ai',function(){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.countCards('j')&&current!=player&&get.attitude(player,current)>0;\n\t\t\t\t\t\t})) return 2;\n\t\t\t\t\t\treturn Math.floor(Math.random()*3);\n\t\t\t\t\t}).set('prompt','请选择优先获得的区域');\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tevent.range={\n\t\t\t\t\t\t手牌区:['h','e','j'],\n\t\t\t\t\t\t装备区:['e','h','j'],\n\t\t\t\t\t\t判定区:['j','h','e'],\n\t\t\t\t\t}[result.control||'手牌区'];\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(num<event.targets.length){\n\t\t\t\t\t\tvar target=event.targets[num];\n\t\t\t\t\t\tvar range=event.range;\n\t\t\t\t\t\tfor(var i=0;i<range.length;i++){\n\t\t\t\t\t\t\tvar cards=target.getCards(range[i]);\n\t\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\t\tvar card=cards.randomGet();\n\t\t\t\t\t\t\t\tplayer.gain(card,target,'giveAuto','bySelf');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(num<event.targets.length) event.goto(3);\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tif(event.count){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('new_guixin')).ai=function(){\n\t\t\t\t\t\t\treturn lib.skill.new_guixin.check({num:event.count},player);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 7\"\n\t\t\t\t\tif(event.count&&result.bool){\n\t\t\t\t\t\tplayer.logSkill('new_guixin');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 2.5;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(target.hp==1) return 0.8;\n\t\t\t\t\t\t\t\tif(target.isTurnedOver()) return [0,3];\n\t\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\tif(current.countCards('he')&&current!=player&&get.attitude(player,current)<=0){\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(current.countCards('j')&&current!=player&&get.attitude(player,current)>0){\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(num>2) return [0,1];\n\t\t\t\t\t\t\t\tif(num==2) return [0.5,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到1点伤害后，你可以按照你选择的区域优先度随机获得每名其他角色区域里的一张牌，然后你翻面。"},"feiying":{"name":"飞影","script":"{mod: {globalTo: function (from,to,distance){\n\t\t\t\t\t\treturn distance+1;\n\t\t\t\t\t},},}","info":"锁定技，其他角色计算与你的距离时+1。"},"baonu":{"name":"狂暴","script":"{audio: \"2\",marktext: \"暴\",unique: \"true\",trigger: {source: \"damageSource\",player: [\"damageEnd\",\"enterGame\"],global: \"gameDrawAfter\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.name!='damage'||event.num>0; \n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addMark('baonu',trigger.name=='damage'?trigger.num:2);\n\t\t\t\t},intro: {name: \"暴怒\",content: \"mark\",},ai: {combo: \"ol_shenfen\",maixie: \"true\",maixie_hp: \"true\",},}","info":"锁定技，游戏开始时，你获得两枚“暴怒”标记；锁定技，当你造成/受到1点伤害后，你获得1枚“暴怒”标记。"},"wumou":{"name":"无谋","script":"{audio: \"2\",trigger: {player: \"useCard\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn get.type(event.card)=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.hasMark('baonu')){\n\t\t\t\t\t\tplayer.chooseControlList([\n\t\t\t\t\t\t\t'移去一枚【暴怒】标记',\n\t\t\t\t\t\t\t'失去一点体力'\n\t\t\t\t\t\t],true).set('ai',function(event,player){\n\t\t\t\t\t\t\tif(player.storage.baonu>6) return 0;\n\t\t\t\t\t\t\tif(player.hp+player.num('h','tao')>3) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.removeMark('baonu',1);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {player: function (card,player){\n\t\t\t\t\t\t\tif (get.type(card)=='trick'&&get.value(card)<6){\n\t\t\t\t\t\t\t\treturn [0,-2];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当你使用普通锦囊牌时，你选择一项：1.弃置1枚“暴怒”标记；2.失去1点体力。"},"ol_wuqian":{"name":"无前","script":"{audio: \"2\",enable: \"phaseUse\",derivation: \"wushuang\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('baonu')>=2;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.hasSkill('ol_wuqian_targeted');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.removeMark('baonu',2);\n\t\t\t\t\tplayer.addTempSkill('wushuang');\n\t\t\t\t\tplayer.storage.ol_wuqian_target=target;\n\t\t\t\t\tplayer.addTempSkill('ol_wuqian_target');\n\t\t\t\t\ttarget.addTempSkill('ol_wuqian_targeted');\n\t\t\t\t},subSkill: {equip: {ai: {unequip: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\t\t\tif(arg&&arg.target&&arg.target.hasSkill('ol_wuqian_targeted')) return true;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t},},sub: \"true\",},targeted: {ai: {unequip2: \"true\",},sub: \"true\",},target: {mark: \"character\",onremove: \"true\",intro: {content: \"获得无双且$防具失效直到回合结束\",},sub: \"true\",},},}","info":"出牌阶段，你可以弃置2枚“暴怒”标记并选择一名本回合内未选择过的其他角色，你获得技能〖无双〗并令其防具无效直到回合结束。"},"ol_shenfen":{"name":"神愤","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('baonu')>=6;\n\t\t\t\t},usable: \"1\",skillAnimation: \"true\",animationColor: \"metal\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.delay=false;\n\t\t\t\t\tplayer.removeMark('baonu',6);\n\t\t\t\t\tevent.targets=game.filterPlayer();\n\t\t\t\t\tevent.targets.remove(player);\n\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\tplayer.line(event.targets,'green');\n\t\t\t\t\tevent.targets2=event.targets.slice(0);\n\t\t\t\t\tevent.targets3=event.targets.slice(0);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets2.length){\n\t\t\t\t\t\tevent.targets2.shift().damage('nocard');\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.current=event.targets.shift()\n\t\t\t\t\t\tif(event.current.countCards('e')) event.delay=true;\n\t\t\t\t\t\tevent.current.discard(event.current.getCards('e')).delay=false;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.delay) game.delay(0.5);\n\t\t\t\t\tevent.delay=false;\n\t\t\t\t\tif(event.targets.length) event.goto(2);\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(event.targets3.length){\n\t\t\t\t\t\tvar target=event.targets3.shift();\n\t\t\t\t\t\ttarget.chooseToDiscard(4,'h',true).delay=false;\n\t\t\t\t\t\tif(target.countCards('h')) event.delay=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tif(event.delay) game.delay(0.5);\n\t\t\t\t\tevent.delay=false;\n\t\t\t\t\tif(event.targets3.length) event.goto(4);\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t},ai: {combo: \"baonu\",order: \"10\",result: {player: function (player){\n\t\t\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(current!=player){\n\t\t\t\t\t\t\t\t\treturn get.sgn(get.damageEffect(current,player,player));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置6枚“暴怒”标记并选择所有其他角色，对这些角色各造成1点伤害。然后这些角色先各弃置其装备区里的牌，再各弃置四张手牌。最后你将你的武将牌翻面。"},"nzry_longnu":{"name":"龙怒","script":"{mark: \"true\",locked: \"true\",marktext: \"龙\",intro: {content: function (storage,player,skill){\n\t\t\t\t\t\tif(player.storage.nzry_longnu==true) return '锁定技，出牌阶段开始时，你减1点体力上限并摸一张牌，然后本回合你的锦囊牌均视为雷杀且无使用次数限制';\n\t\t\t\t\t\treturn '锁定技，出牌阶段开始时，你流失一点体力并摸一张牌，然后本回合你的红色手牌均视为火杀且无距离限制';\n\t\t\t\t\t},},audio: \"2\",trigger: {player: \"phaseUseBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\tif(player.storage.nzry_longnu==true){\n\t\t\t\t\t\tplayer.storage.nzry_longnu=false;\n\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.addTempSkill('nzry_longnu_2',{player:'phaseAfter'});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tplayer.storage.nzry_longnu=true;\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.addTempSkill('nzry_longnu_1',{player:'phaseAfter'});\n\t\t\t\t\t};\n\t\t\t\t},subSkill: {1: {mod: {cardname: function (card,player){\n\t\t\t\t\t\t\t\tif(get.color(card)=='red') return 'sha';\n\t\t\t\t\t\t\t},cardnature: function (card,player){\n\t\t\t\t\t\t\t\tif(get.color(card)=='red') return 'fire';\n\t\t\t\t\t\t\t},targetInRange: function (card){\n\t\t\t\t\t\t\t\tif(get.color(card)=='red') return true;\n\t\t\t\t\t\t\t},},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondSha')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},respondSha: \"true\",},sub: \"true\",},2: {prompt: \"本回合你的锦囊牌均视为雷杀且无使用次数限制\",mod: {cardname: function (card,player){\n\t\t\t\t\t\t\t\tif(['trick','delay'].contains(lib.card[card.name].type)) return 'sha';\n\t\t\t\t\t\t\t},cardnature: function (card,player){\n\t\t\t\t\t\t\t\tif(['trick','delay'].contains(lib.card[card.name].type)) return 'thunder';\n\t\t\t\t\t\t\t},cardUsable: function (card,player){\n\t\t\t\t\t\t\t\tif(card.name=='sha'&&card.nature=='thunder') return Infinity;\n\t\t\t\t\t\t\t},},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondSha')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},respondSha: \"true\",},sub: \"true\",},},ai: {fireAttack: \"true\",halfneg: \"true\",threaten: \"1.05\",},}","info":"转换技，锁定技，阴：出牌阶段开始时，你失去1点体力并摸一张牌，然后本回合内你的红色手牌均视为火【杀】且无距离限制。阳：出牌阶段开始时，你减1点体力上限并摸一张牌，然后本回合你的锦囊牌均视为雷【杀】且无使用次数限制。"},"nzry_jieying":{"name":"结营","script":"{audio: \"2\",locked: \"true\",global: \"g_nzry_jieying\",ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='tiesuo') return 'zeroplayertarget';\n\t\t\t\t\t\t},},},group: [\"nzry_jieying_1\",\"nzry_jieying_2\"],subSkill: {1: {audio: \"2\",trigger: {player: [\"linkBefore\",\"enterGame\"],global: \"gameDrawAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.isLinked()==(event.name=='link');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(trigger.name!='link') player.link(true);\n\t\t\t\t\t\t\telse trigger.cancel();\n\t\t\t\t\t\t},sub: \"true\",},2: {audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&!current.isLinked();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tplayer.chooseTarget(true,'请选择【结营】的目标',function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player&&!target.isLinked();\n\t\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\t\treturn 1+Math.random();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.line(result.targets);\n\t\t\t\t\t\t\t\tplayer.logSkill('nzry_jieying');\n\t\t\t\t\t\t\t\tresult.targets[0].link(true);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，游戏开始时或当你的武将牌重置时，你横置；所有已横置的角色手牌上限+2；结束阶段，你横置一名其他角色。"},"nzry_junlve":{"name":"军略","script":"{audio: \"2\",intro: {content: \"当前有#个标记\",},trigger: {player: \"damageAfter\",source: \"damageSource\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.addMark('nzry_junlve',trigger.num);\n\t\t\t\t},}","info":"锁定技，当你受到或造成伤害后，你获得X个“军略”标记(X为伤害点数)"},"nzry_cuike":{"name":"摧克","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.countMark('nzry_junlve')%2==1){\n\t\t\t\t\t\tplayer.chooseTarget('是否发动【摧克】，对一名角色造成一点伤害？').ai=function(target){\n\t\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget('是否发动【摧克】，横置一名角色并弃置其区域内的一张牌？').ai=function(target){\n\t\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('nzry_cuike',result.targets);\n\t\t\t\t\t\tif(player.countMark('nzry_junlve')%2==1){\n\t\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tresult.targets[0].link(true);\n\t\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],1,'hej',true);\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.countMark('nzry_junlve')>7){\n\t\t\t\t\t\tplayer.chooseBool().set('ai',function(){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}).set('prompt','是否弃置所有“军略”标记并对所有其他角色造成一点伤害？');\n\t\t\t\t\t}else{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t};\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar players=game.players.slice(0).sortBySeat();\n\t\t\t\t\t\tplayer.line(players);\n\t\t\t\t\t\tplayer.removeMark('nzry_junlve',player.countMark('nzry_junlve'));\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(players[i]!=player) players[i].damage();\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t},}","info":"出牌阶段开始时，若“军略”标记的数量为奇数，你可以对一名角色造成一点伤害；若“军略”标记的数量为偶数，你可以横置一名角色并弃置其区域内的一张牌。然后，若“军略”标记的数量超过7个，你可以移去全部“军略”标记并对所有其他角色造成一点伤害"},"nzry_dinghuo":{"name":"绽火","script":"{audio: \"2\",limited: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.nzry_dinghuo=false;\n\t\t\t\t},intro: {content: \"limited\",},unique: \"true\",mark: \"true\",skillAnimation: \"true\",animationColor: \"metal\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.nzry_dinghuo&&player.countMark('nzry_junlve')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar num=game.countPlayer(function(current){return get.attitude(player,current)<0&&current.isLinked()});\n\t\t\t\t\treturn player.storage.nzry_junlve>=num&&num==game.countPlayer(function(current){return get.attitude(player,current)<0});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.isLinked();\n\t\t\t\t},selectTarget: function (){\n\t\t\t\t\treturn [1,_status.event.player.countMark('nzry_junlve')];\n\t\t\t\t},multiline: \"true\",multitarget: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('nzry_dinghuo');\n\t\t\t\t\tplayer.storage.nzry_dinghuo=true;\n\t\t\t\t\t'step 1'\n\t\t\t\t\t\tplayer.removeMark('nzry_junlve',player.countMark('nzry_junlve'));\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\ttargets[i].discard(targets[i].getCards('e'));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseTarget(true,'对一名目标角色造成1点火焰伤害',function(card,player,target){\n\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t}).set('targets',targets).ai=function(){return 1};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets[0].damage('fire','nocard');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",fireAttack: \"true\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nofire')) return 0;\n\t\t\t\t\t\t\tif(lib.config.mode=='versus') return -1;\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player)-target.countCards('e');\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以移去全部“军略”标记，令至多等量的已横置角色弃置所有装备区内的牌。然后，你对其中一名角色造成1点火焰伤害。"},"drlt_duorui":{"name":"夺锐","script":"{audio: \"2\",init: function (player,skill){\n\t\t\t\t\tif(!player.storage.drlt_duorui) player.storage.drlt_duorui=[];\n\t\t\t\t},trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\tif(player.storage.drlt_duorui.length) return false;\n\t\t\t\t\treturn player!=event.player&&event.player.isAlive()&&_status.currentPhase==player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.countDisabled()<5&&player.isDisabled(5)) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},bannedList: [\"bifa\",\"buqu\",\"gzbuqu\",\"songci\",\"funan\",\"xinfu_guhuo\",\"reguhuo\",\"huashen\",\"rehuashen\",\"old_guhuo\",\"shouxi\",\"xinpojun\",\"taoluan\",\"xintaoluan\",\"yinbing\",\"xinfu_yingshi\",\"zhenwei\",\"zhengnan\",\"xinzhengnan\",\"zhoufu\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar listm=[];\n\t\t\t\t\tvar listv=[];\n\t\t\t\t\tif(trigger.player.name1!=undefined) listm=lib.character[trigger.player.name1][3];\n\t\t\t\t\telse listm=lib.character[trigger.player.name][3];\n\t\t\t\t\tif(trigger.player.name2!=undefined) listv=lib.character[trigger.player.name2][3];\n\t\t\t\t\tlistm=listm.concat(listv);\n\t\t\t\t\tvar func=function(skill){\n\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\tif(!info||info.charlotte||info.hiddenSkill||info.zhuSkill||info.juexingji||info.limited||(info.unique&&!info.gainable)||lib.skill.drlt_duorui.bannedList.contains(skill)) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t};\n\t\t\t\t\tfor(var i=0;i<listm.length;i++){\n\t\t\t\t\t\tif(func(listm[i])) list.add(listm[i]);\n\t\t\t\t\t}\n\t\t\t\t\tevent.skills=list;\n\t\t\t\t\tif(player.countDisabled()<5){\n\t\t\t\t\t\tplayer.chooseToDisable().ai=function(event,player,list){\n\t\t\t\t\t\t\tif(list.contains('equip5')) return 'equip5';\n\t\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.skills.length>0){\n\t\t\t\t\t\tplayer.chooseControl(event.skills).set('prompt','请选择要获得的技能').set('ai',function(){return event.skills.randomGet()});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.addTempSkill(result.control,{player:'dieAfter'});\n\t\t\t\t\tplayer.popup(result.control,'thunder');\n\t\t\t\t\tplayer.storage.drlt_duorui=[result.control];\n\t\t\t\t\tplayer.storage.drlt_duorui_player=trigger.player;\n\t\t\t\t\ttrigger.player.storage.drlt_duorui=[result.control];\n\t\t\t\t\ttrigger.player.addTempSkill('drlt_duorui1',{player:'phaseAfter'});\n\t\t\t\t\tgame.log(player,'获得了技能','#g【'+get.translation(result.control)+'】')\n\t\t\t\t},group: [\"duorui_clear\"],}","info":"当你于出牌阶段内对一名其他角色造成伤害后，你可以废除你装备区内的一个装备栏（若已全部废除则可以跳过此步骤），然后获得该角色的一个技能直到其的下回合结束或其死亡(觉醒技，限定技，主公技，隐匿技等特殊技能除外)。若如此做，该角色该技能失效且你不能再发动〖夺锐〗直到你失去以此法获得的技能。"},"drlt_zhiti":{"name":"止啼","script":"{audio: \"2\",locked: \"true\",group: [\"drlt_zhiti_1\",\"drlt_zhiti_2\",\"drlt_zhiti_3\",\"drlt_zhiti_4\",\"drlt_zhiti_5\"],global: \"g_drlt_zhiti\",subSkill: {1: {audio: \"drlt_zhiti\",trigger: {global: \"juedouAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.targets&&event.targets.contains(player)&&event.turn!=player&&player.storage.disableEquip!=undefined&&player.storage.disableEquip.length>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.chooseToEnable();\n\t\t\t\t\t\t},sub: \"true\",},2: {audio: \"drlt_zhiti\",trigger: {player: \"juedouAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.turn!=player&&player.storage.disableEquip!=undefined&&player.storage.disableEquip.length>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.chooseToEnable();\n\t\t\t\t\t\t},sub: \"true\",},3: {audio: \"drlt_zhiti\",trigger: {player: \"chooseToCompareAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.result.bool==true&&player.storage.disableEquip!=undefined&&player.storage.disableEquip.length>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseToEnable();\n\t\t\t\t\t\t},sub: \"true\",},4: {audio: \"drlt_zhiti\",trigger: {global: \"chooseToCompareAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn (event.targets!=undefined&&event.targets.contains(player)||event.target==player)&&event.result.bool==false&&player.storage.disableEquip!=undefined&&player.storage.disableEquip.length>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.chooseToEnable();\n\t\t\t\t\t\t},sub: \"true\",},5: {audio: \"drlt_zhiti\",trigger: {player: [\"damageEnd\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.disableEquip!=undefined&&player.storage.disableEquip.length>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.chooseToEnable();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，你攻击范围内已受伤的其他角色手牌上限-1；当你拼点或【决斗】胜利，或受到伤害后，你恢复一个装备栏"},"drlt_poxi":{"name":"魄袭","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t\t//return target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.list1=[];\n\t\t\t\t\tevent.list2=[];\n\t\t\t\t\tif(player.countCards('h')>0){\n\t\t\t\t\t\tvar chooseButton=player.chooseButton(4,['你的手牌',player.getCards('h'),get.translation(target.name)+'的手牌',target.getCards('h')]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar chooseButton=player.chooseButton(4,[get.translation(target.name)+'的手牌',target.getCards('h')]);\n\t\t\t\t\t}\n\t\t\t\t\tchooseButton.set('target',target);\n\t\t\t\t\tchooseButton.set('ai',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar target=_status.event.target;\n\t\t\t\t\t\tvar ps=[];\n\t\t\t\t\t\tvar ts=[];\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tvar card=ui.selected.buttons[i].link;\n\t\t\t\t\t\t\tif(target.getCards('h').contains(card)) ts.push(card);\n\t\t\t\t\t\t\telse ps.push(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar owner=get.owner(card);\n\t\t\t\t\t\tvar val=get.value(card)||1;\n\t\t\t\t\t\tif(owner==target){\n\t\t\t\t\t\t\tif(ts.length>1) return 0;\n\t\t\t\t\t\t\tif(ts.length==0||player.hp>3) return val;\n\t\t\t\t\t\t\treturn 2*val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 7-val;\n\t\t\t\t\t});\n\t\t\t\t\tchooseButton.set('filterButton',function(button){\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tif(get.suit(button.link)==get.suit(ui.selected.buttons[i].link)) return false;\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar list=result.links;\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(get.owner(list[i])==player){\n\t\t\t\t\t\t\t\tevent.list1.push(list[i]);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tevent.list2.push(list[i]);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif(event.list1.length&&event.list2.length){\n\t\t\t\t\t\t\ttarget.discard(event.list2).delay=false;\n\t\t\t\t\t\t\tplayer.discard(event.list1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.list2.length){\n\t\t\t\t\t\t\ttarget.discard(event.list2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.discard(event.list1);\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.list1.length+event.list2.length==4){\n\t\t\t\t\t\tif(event.list1.length==0) player.loseMaxHp();\n\t\t\t\t\t\tif(event.list1.length==1){\n\t\t\t\t\t\t\tvar evt=_status.event;\n\t\t\t\t\t\t\tfor(var i=0;i<10;i++){\n\t\t\t\t\t\t\t\tif(evt&&evt.getParent)evt=evt.getParent();\n\t\t\t\t\t\t\t\tif(evt.name=='phaseUse'){\n\t\t\t\t\t\t\t\tevt.skipped=true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tplayer.addTempSkill('drlt_poxi1',{player:'phaseAfter'});\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif(event.list1.length==3) player.recover();\n\t\t\t\t\t\tif(event.list1.length==4) player.draw(4);\n\t\t\t\t\t};\n\t\t\t\t},ai: {order: \"13\",result: {target: function (target,player){\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以观看一名其他角色的手牌，然后你可以弃置你与其手牌中的四张花色不同的牌。若如此做，根据此次弃置你的牌的数量执行以下效果：零张，扣减一点体力上限；一张，你结束出牌阶段且本回合手牌上限-1；三张，你回复一点体力；四张，你摸四张牌"},"drlt_jieying":{"name":"劫营","script":"{audio: \"2\",locked: \"false\",global: \"drlt_jieying_mark\",group: [\"drlt_jieying_1\",\"drlt_jieying_2\",\"drlt_jieying_3\"],subSkill: {1: {audio: \"drlt_jieying\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.hasMark('drlt_jieying_mark');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.addMark('drlt_jieying_mark',1);\n\t\t\t\t\t\t},sub: \"true\",},2: {audio: \"drlt_jieying\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.hasMark('drlt_jieying_mark');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt('drlt_jieying'),\"将“营”交给一名角色；其摸牌阶段多摸一张牌，出牌阶段使用【杀】的次数上限+1且手牌上限+1。该角色回合结束后，其移去“营”标记，然后你获得其所有手牌。\",function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0)\n\t\t\t\t\t\t\t\treturn 0.1;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)<1&&(target.isTurnedOver()||target.countCards('h')<1))\n\t\t\t\t\t\t\t\treturn 0.2;\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)<1&&target.countCards('h')>0&&target.countCards('j',{name:'lebu'})>0)\n\t\t\t\t\t\t\t\treturn target.countCards('h')*0.8+target.getHandcardLimit()*0.7+2;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)<1&&target.countCards('h')>0)\n\t\t\t\t\t\t\t\treturn target.countCards('h')*0.8+target.getHandcardLimit()*0.7;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tplayer.line(target);\n\t\t\t\t\t\t\t\tplayer.logSkill('drlt_jieying',target);\n\t\t\t\t\t\t\t\tvar mark=player.countMark('drlt_jieying_mark');\n\t\t\t\t\t\t\t\tplayer.removeMark('drlt_jieying_mark',mark);\n\t\t\t\t\t\t\t\ttarget.addMark('drlt_jieying_mark',mark);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},sub: \"true\",},3: {audio: \"drlt_jieying\",trigger: {global: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player!=event.player&&event.player.hasMark('drlt_jieying_mark')&&event.player.isAlive();\n\t\t\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\t\tif(trigger.player.countCards('h')>0){\n\t\t\t\t\t\t\t\ttrigger.player.give(trigger.player.getCards('h'),player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttrigger.player.removeMark('drlt_jieying_mark',trigger.player.countMark('drlt_jieying_mark'));\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"回合开始时，若场上没有拥有“营”标记的角色，你获得1个“营”标记；结束阶段，你可以将你的一个“营”标记交给一名角色；有“营”标记的角色摸牌阶段多摸一张牌，出牌阶段使用【杀】的次数上限+1，手牌上限+1。有“营”的其他角色回合结束时，其移去“营”标记，然后你获得其所有手牌。"},"olduorui":{"name":"夺锐","script":"{audio: \"drlt_duorui\",trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\tif(!player.isPhaseUsing()||event.player.isDead()) return false;\n\t\t\t\t\tfor(var i in event.player.disabledSkills){\n\t\t\t\t\t\tif(event.player.disabledSkills[i].contains('olduorui2')) return false;\n\t\t\t\t\t}\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar listm=[];\n\t\t\t\t\tvar listv=[];\n\t\t\t\t\tif(event.player.name1!=undefined) listm=lib.character[event.player.name1][3];\n\t\t\t\t\telse listm=lib.character[event.player.name][3];\n\t\t\t\t\tif(event.player.name2!=undefined) listv=lib.character[event.player.name2][3];\n\t\t\t\t\tlistm=listm.concat(listv);\n\t\t\t\t\tvar func=function(skill){\n\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\tif(!info||info.charlotte) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t};\n\t\t\t\t\tfor(var i=0;i<listm.length;i++){\n\t\t\t\t\t\tif(func(listm[i])) list.add(listm[i]);\n\t\t\t\t\t}\n\t\t\t\t\treturn list.length>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)>=0) return false;\n\t\t\t\t\tif(event.getParent('phaseUse').skipped) return true;\n\t\t\t\t\tvar nd=player.needsToDiscard();\n\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\treturn player.getUseValue(card,null,true)>0&&(nd?true:get.tag(card,'damage')>0);\n\t\t\t\t\t})==0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar listm=[];\n\t\t\t\t\tvar listv=[];\n\t\t\t\t\tif(trigger.player.name1!=undefined) listm=lib.character[trigger.player.name1][3];\n\t\t\t\t\telse listm=lib.character[trigger.player.name][3];\n\t\t\t\t\tif(trigger.player.name2!=undefined) listv=lib.character[trigger.player.name2][3];\n\t\t\t\t\tlistm=listm.concat(listv);\n\t\t\t\t\tvar func=function(skill){\n\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\tif(!info||info.charlotte) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t};\n\t\t\t\t\tfor(var i=0;i<listm.length;i++){\n\t\t\t\t\t\tif(func(listm[i])) list.add(listm[i]);\n\t\t\t\t\t}\n\t\t\t\t\tevent.skills=list;\n\t\t\t\t\tplayer.chooseControl(list).set('prompt','选择'+get.translation(trigger.player)+'武将牌上的一个技能并令其失效');\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttrigger.player.disableSkill('olduorui2',result.control);\n\t\t\t\t\ttrigger.player.addTempSkill('olduorui2',{player:'phaseAfter'});\n\t\t\t\t\tgame.log(player,'选择了',trigger.player,'的技能','#g【'+get.translation(result.control)+'】');\n\t\t\t\t\tevent.getParent('phaseUse').skipped=true;\n\t\t\t\t},}","info":"当你于出牌阶段内对一名角色造成伤害后，你可以选择该角色武将牌上的一个技能。若如此做，你结束出牌阶段，且你令此技能于其下个回合结束之前无效。"},"olzhiti":{"name":"止啼","script":"{audio: \"drlt_zhiti\",global: \"olzhiti2\",mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t\t})) return num+1;\n\t\t\t\t\t},},trigger: {player: [\"phaseDrawBegin2\",\"phaseEnd\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tvar num=event.name=='phase'?5:3;\n\t\t\t\t\tif(num==3?event.numFixed:!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countDisabled()<5;\n\t\t\t\t\t})) return false;\n\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t})>=num;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(trigger.name=='phaseDraw'){\n\t\t\t\t\t\tplayer.logSkill('olzhiti');\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget(get.prompt('olzhiti'),'废除一名角色的一个随机装备栏',function(card,player,target){\n\t\t\t\t\t\t\treturn target.countDisabled()<5;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)*(target.countCards('e')+1)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('olzhiti',target);\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=1;i<6;i++){\n\t\t\t\t\t\t\tif(!target.isDisabled(i)) list.add((i==3||i==4)?6:i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar num=list.randomGet();\n\t\t\t\t\t\tif(num!=6) target.disableEquip(num);\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttarget.disableEquip(3);\n\t\t\t\t\t\t\ttarget.disableEquip(4);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，你攻击范围内已受伤角色的手牌上限-1。若场上已受伤的角色数：不小于1，你的手牌上限+1；不小于3，你于摸牌阶段开始时令额定摸牌数+1；不小于5，回合结束时，你废除一名角色的一个随机装备栏。"},"chuyuan":{"name":"储元","script":"{audio: \"2\",trigger: {global: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.isAlive()&&player.getStorage('chuyuan').length<player.maxHp;\n\t\t\t\t},logTarget: \"player\",locked: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!trigger.player.countCards('h')) event.finish();\n\t\t\t\t\telse trigger.player.chooseCard('h',true,'选择一张牌置于'+get.translation(player)+'的武将牌上作为「储」');\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttrigger.player.lose(result.cards,ui.special,'visible','toStorage');\n\t\t\t\t\ttrigger.player.$give(result.cards,player,false);\n\t\t\t\t\tgame.log(trigger.player,'选择了',result.cards);\n\t\t\t\t\tplayer.markAuto('chuyuan',result.cards);\n\t\t\t\t},intro: {content: \"cards\",onunmark: \"throw\",},}","info":"一名角色受到伤害后，若你武将牌上「储」的数量小于体力上限，你可以令其摸一张牌。然后其将一张手牌置于你的武将牌上，称为「储」。"},"dengji":{"name":"登极","script":"{audio: \"2\",derivation: [\"tianxing\",\"new_rejianxiong\",\"rerende\",\"rezhiheng\",\"olluanji\",\"caopi_xingdong\"],trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",unique: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\treturn player.getStorage('chuyuan').length>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\t\tplayer.addSkill('tianxing');\n\t\t\t\t\tplayer.addSkill('new_rejianxiong');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.gain(player.storage.chuyuan,'gain2','fromStorage');\n\t\t\t\t\tplayer.unmarkAuto('chuyuan',player.storage.chuyuan);\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你武将牌上的「储」数不小于3，则你减1点体力上限并获得所有「储」，然后获得技能〖天行〗和〖奸雄〗"},"shenfu":{"name":"神赋","script":"{audio: \"2\",trigger: {player: \"phaseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.logged=false;\n\t\t\t\t\tevent.targets=[];\n\t\t\t\t\tevent.goto(player.countCards('h')%2==1?1:4);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('shenfu'),'对一名其他角色造成1点雷属性伤害',lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player,'thunder')*(target.hp==1?2:1);\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tif(!event.logged){\n\t\t\t\t\t\t\tevent.logged=true;\n\t\t\t\t\t\t\tplayer.logSkill('shenfu',target,'thunder');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.line(target,'thunder');\n\t\t\t\t\t\ttarget.damage('thunder');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(target.isDead()) event.goto(1);\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('shenfu'),'令一名角色摸一张牌或弃置其一张手牌',function(card,player,target){\n\t\t\t\t\t\treturn !_status.event.getParent().targets.contains(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tvar delta=target.hp-target.countCards('h');\n\t\t\t\t\t\tif(Math.abs(delta)==1&&get.sgn(delta)==get.sgn(att)) return 3*Math.abs(att);\n\t\t\t\t\t\tif(att>0||target.countCards('h')>0) return Math.abs(att);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tif(!event.logged){\n\t\t\t\t\t\t\tevent.logged=true;\n\t\t\t\t\t\t\tplayer.logSkill('shenfu',target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.line(target,'green');\n\t\t\t\t\t\ttargets.push(target);\n\t\t\t\t\t\tif(!target.countCards('h')) event._result={bool:false};\n\t\t\t\t\t\telse player.discardPlayerCard(target,'h','弃置'+get.translation(target)+'一张手牌，或点【取消】令其摸一张牌。');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(!result.bool) target.draw();\n\t\t\t\t\t'step 7'\n\t\t\t\t\tif(target.hp==target.countCards('h')) event.goto(4);\n\t\t\t\t},ai: {expose: \"0.25\",},}","info":"回合结束时，若你的手牌数为：奇数，你可对一名其他角色造成1点伤害。若其死亡，你可重复此流程。偶数，你可选择一名本回合内未选择过的角色，你令其摸一张牌或弃置其一张手牌。若其手牌数等于体力值，你可重复此流程。"},"qixian":{"name":"七弦","script":"{mod: {maxHandcardBase: function (player,num){\n\t\t\t\t\t\treturn 7;\n\t\t\t\t\t},},}","info":"锁定技，你的手牌上限视为7。"},"boss_juejing":{"name":"绝境","script":"{trigger: {player: \"phaseDrawBefore\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {noh: \"true\",nogain: \"true\",},group: \"boss_juejing2\",}","info":"锁定技，摸牌阶段开始前，你跳过此阶段。当你获得牌/失去手牌后，若你的手牌数大于4/小于4，则你将手牌摸至4张/弃置至4张。"},"xinlonghun":{"name":"龙魂","script":"{audio: \"longhun\",enable: [\"chooseToUse\",\"chooseToRespond\"],prompt: \"将♦牌当做杀，♥牌当做桃，♣牌当做闪，♠牌当做无懈可击使用或打出\",viewAs: function (cards,player){\n\t\t\t\t\tvar name=false;\n\t\t\t\t\tvar nature=null;\n\t\t\t\t\tswitch(get.suit(cards[0],player)){\n\t\t\t\t\t\tcase 'club':name='shan';break;\n\t\t\t\t\t\tcase 'diamond':name='sha';nature='fire';break;\n\t\t\t\t\t\tcase 'spade':name='wuxie';break;\n\t\t\t\t\t\tcase 'heart':name='tao';break;\n\t\t\t\t\t}\n\t\t\t\t\tif(name) return {name:name,nature:nature};\n\t\t\t\t\treturn null;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(_status.event.type=='phase'){\n\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\tvar name2;\n\t\t\t\t\t\tvar list=['sha','tao'];\n\t\t\t\t\t\tvar map={sha:'diamond',tao:'heart'}\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar name=list[i];\n\t\t \t\t\t\tif(player.countCards('h',function(card){\n\t\t \t\t\t\t\treturn (name!='sha'||get.value(card)<5)&&get.suit(card,player)==map[name];\n\t\t \t\t\t\t})>0&&player.getUseValue({name:name,nature:name=='sha'?'fire':null})>0){\n\t\t \t\t\t\t\tvar temp=get.order({name:name,nature:name=='sha'?'fire':null});\n\t\t \t\t\t\t\tif(temp>max){\n\t\t \t\t\t\t\t\tmax=temp;\n\t\t \t\t\t\t\t\tname2=map[name];\n\t\t \t\t\t\t\t}\n\t\t \t\t\t\t}\n\t\t \t\t\t}\n\t\t \t\t\tif(name2==get.suit(card,player)) return (name2=='diamond'?(5-get.value(card)):20-get.value(card));\n\t\t \t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn 1;\n\t\t\t\t},position: \"h\",filterCard: function (card,player,event){\n\t\t\t\t\tevent=event||_status.event;\n\t\t\t\t\tvar filter=event._backup.filterCard;\n\t\t\t\t\tvar name=get.suit(card,player);\n\t\t\t\t\tif(name=='club'&&filter({name:'shan',cards:[card]},player,event)) return true;\n\t\t\t\t\tif(name=='diamond'&&filter({name:'sha',cards:[card],nature:'fire'},player,event)) return true;\n\t\t\t\t\tif(name=='spade'&&filter({name:'wuxie',cards:[card]},player,event)) return true;\n\t\t\t\t\tif(name=='heart'&&filter({name:'tao',cards:[card]},player,event)) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar filter=event.filterCard;\n\t\t\t\t\tif(filter({name:'sha',nature:'fire'},player,event)&&player.countCards('h',{suit:'diamond'})) return true;\n\t\t\t\t\tif(filter({name:'shan'},player,event)&&player.countCards('h',{suit:'club'})) return true;\n\t\t\t\t\tif(filter({name:'tao'},player,event)&&player.countCards('h',{suit:'heart'})) return true;\n\t\t\t\t\tif(filter({name:'wuxie'},player,event)&&player.countCards('h',{suit:'spade'})) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tvar name;\n\t\t\t\t\t\tswitch(tag){\n\t\t\t\t\t\t\tcase 'respondSha':name='diamond';break;\n\t\t\t\t\t\t\tcase 'respondShan':name='club';break;\n\t\t\t\t\t\t\tcase 'save':name='heart';break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.countCards('h',{suit:name})) return false;\n\t\t\t\t\t},order: function (item,player){\n\t\t\t\t\t\tif(player&&_status.event.type=='phase'){\n\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\tvar list=['sha','tao'];\n\t\t\t\t\t\t\tvar map={sha:'diamond',tao:'heart'}\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t \t\t\t\tif(player.countCards('h',function(card){\n\t\t \t\t\t\t\t\treturn (name!='sha'||get.value(card)<5)&&get.suit(card,player)==map[name];\n\t\t \t\t\t\t\t})>0&&player.getUseValue({name:name,nature:name=='sha'?'fire':null})>0){\n\t\t\t \t\t\t\t\tvar temp=get.order({name:name,nature:name=='sha'?'fire':null});\n\t\t\t \t\t\t\t\tif(temp>max) max=temp;\n\t\t\t \t\t\t\t}\n\t\t\t \t\t\t}\n\t\t\t \t\t\tmax/=1.1;\n\t\t\t \t\t\treturn max;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t},},hiddenCard: function (player,name){\n\t\t\t\t\tif(name=='wuxie'&&_status.connectMode&&player.countCards('h')>0) return true;\n\t\t\t\t\tif(name=='wuxie') return player.countCards('h',{suit:'spade'})>0;\n\t\t\t\t\tif(name=='tao') return player.countCards('h',{suit:'heart'})>0;\n\t\t\t\t},}","info":"你可以将你的手牌按下列规则使用或打出：红桃当【桃】，方块当火【杀】，梅花当【闪】，黑桃当普【无懈可击】。"},"zhanjiang":{"name":"斩将","script":"{trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player&&players[i].getEquip('qinggang')){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player){\n\t\t\t\t\t\t\tvar e=players[i].getEquip('qinggang');\n\t\t\t\t\t\t\tif(e){\n\t\t\t\t\t\t\t\tplayer.line(players[i],'green');\n\t\t\t\t\t\t\t\tplayers[i].give(e,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段开始时，如果其他角色的装备区内有【青釭剑】，你可以获得之"},"minikuangfeng":{"name":"狂风","script":"{audio: \"kuangfeng\",trigger: {player: \"phaseUseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getStorage('qixing').length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget([1,Math.min(game.players.length,player.getStorage('qixing').length)],get.prompt2('minikuangfeng')).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar eff=get.damageEffect(target,player,player);\n\t\t\t\t\t\tif(target.hp==1||!ui.selected.targets.length) return eff;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\tplayer.chooseButton(['请选择要移去的“星”',player.getStorage('qixing')],true,result.targets.length).set('ai',function(button){\n\t\t\t\t\t\t\treturn -get.value(button.link);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar cards=result.links;\n\t\t\t\t\tplayer.logSkill('minikuangfeng',targets);\n\t\t\t\t\tplayer.$throw(cards,2000);\n\t\t\t\t\tplayer.unmarkAuto('qixing',cards);\n\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\tfor(var i of targets) i.damage();\n\t\t\t\t},}","info":"出牌阶段结束时，你可选择任意名角色并将等量的“星”置入弃牌堆，然后对这些角色各造成1点伤害。"},"minidawu":{"name":"大雾","script":"{audio: \"dawu\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getStorage('qixing').length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseButton([get.prompt('minidawu'),player.getStorage('qixing')]).set('ai',function(button){\n\t\t\t\t\t\treturn 1/Math.max(0.01,get.value(button.link));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=result.links;\n\t\t\t\t\t\tplayer.logSkill('minidawu');\n\t\t\t\t\t\tplayer.$throw(cards,2000);\n\t\t\t\t\t\tplayer.unmarkAuto('qixing',cards);\n\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\tplayer.addTempSkill('minidawu2',{player:'phaseBegin'});\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以将一张“星”置入弃牌堆。当你于下回合开始前受到伤害时，此伤害-1。"},"miniwuqian":{"name":"无前","script":"{audio: \"wuqian\",trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\treturn (event.card.name=='sha'||event.card.name=='juedou')&&player==_status.currentPhase&&\n\t\t\t\t\tplayer.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn (evt.card.name=='sha'||evt.card.name=='juedou');\n\t\t\t\t\t}).indexOf(event.getParent())==0;\n\t\t\t\t},forced: \"true\",logTarget: \"target\",content: function (){\n\t\t\t\t\ttrigger.target.addTempSkill('qinggang2');\n\t\t\t\t\ttrigger.target.storage.qinggang2.add(trigger.card);\n\t\t\t\t\tif(trigger.card.name=='sha'){\n\t\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\t\tvar map=trigger.getParent().customArgs;\n\t\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\t\tif(typeof map[id].shanRequired=='number'){\n\t\t\t\t\t\t\tmap[id].shanRequired++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tmap[id].shanRequired=2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\t\tvar idt=trigger.target.playerid;\n\t\t\t\t\t\tvar map=trigger.getParent().customArgs;\n\t\t\t\t\t\tif(!map[idt]) map[idt]={};\n\t\t\t\t\t\tif(!map[idt].shaReq) map[idt].shaReq={};\n\t\t\t\t\t\tif(!map[idt].shaReq[id]) map[idt].shaReq[id]=1;\n\t\t\t\t\t\tmap[idt].shaReq[id]++;\n\t\t\t\t\t}\n\t\t\t\t},ai: {unequip_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg&&arg.name=='sha'&&!player.countUsed('sha')) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技，当你于回合内使用【杀】或【决斗】指定目标后，若此牌是你本回合内使用的第一张【杀】或【决斗】，则你令其每次响应此牌需要使用的【闪】或打出的【杀】的数量+1，且令其防具无效直到此牌对其结束。"},"minishenfen":{"name":"神愤","script":"{audio: \"ol_shenfen\",enable: \"phaseUse\",skillAnimation: \"true\",animationColor: \"metal\",limited: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('minishenfen');\n\t\t\t\t\tplayer.loseHp(3);\n\t\t\t\t\tevent.delay=false;\n\t\t\t\t\tevent.targets=game.filterPlayer();\n\t\t\t\t\tevent.targets.remove(player);\n\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\tplayer.line(event.targets,'green');\n\t\t\t\t\tevent.targets2=event.targets.slice(0);\n\t\t\t\t\tevent.targets3=event.targets.slice(0);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets2.length){\n\t\t\t\t\t\tevent.targets2.shift().damage('nocard');\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.current=event.targets.shift()\n\t\t\t\t\t\tif(event.current.countCards('e')) event.delay=true;\n\t\t\t\t\t\tevent.current.discard(event.current.getCards('e')).delay=false;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.delay) game.delay(0.5);\n\t\t\t\t\tevent.delay=false;\n\t\t\t\t\tif(event.targets.length) event.goto(2);\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(event.targets3.length){\n\t\t\t\t\t\tvar target=event.targets3.shift();\n\t\t\t\t\t\ttarget.chooseToDiscard(4,'h',true).delay=false;\n\t\t\t\t\t\tif(target.countCards('h')) event.delay=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tif(event.delay) game.delay(0.5);\n\t\t\t\t\tevent.delay=false;\n\t\t\t\t\tif(event.targets3.length) event.goto(4);\n\t\t\t\t},ai: {order: \"10\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<5||player.hasUnknown()) return 0;\n\t\t\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(current!=player){\n\t\t\t\t\t\t\t\t\treturn get.sgn(get.damageEffect(current,player,player));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以失去3点体力，对所有其他角色各造成1点伤害。这些角色弃置装备区内的所有牌，然后弃置四张手牌。"},"minigongxin":{"name":"攻心","script":"{audio: \"gongxin\",audioname: [\"re_lvmeng\",\"gexuan\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(event.player==event.target||event.targets.length!=1) return false;\n\t\t\t\t\treturn (player==event.player?event.target:event.player).countCards('h')>0;\n\t\t\t\t},logTarget: function (event,player){\n\t\t\t\t\treturn player==event.player?event.target:event.player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,player==event.player?event.target:event.player)<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar target=(player==trigger.player?trigger.target:trigger.player);\n\t\t\t\t\tevent.target=target;\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar cards=target.getCards('h');\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send(function(cards,id){\n\t\t\t\t\t\t\tui.create.dialog('攻心',cards).videoId=id;\n\t\t\t\t\t\t},cards,event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog=ui.create.dialog('攻心',cards);\n\t\t\t\t\tevent.dialog.videoId=event.videoId;\n\t\t\t\t\tif(!event.isMine()){\n\t\t\t\t\t\tevent.dialog.style.display='none';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton().set('filterButton',function(button){\n\t\t\t\t\t\treturn get.color(button.link)=='red';\n\t\t\t\t\t}).set('dialog',event.videoId).set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\tvar func=function(card,id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\tif(dialog.buttons[i].link==card){\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('selectedx');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('unselectable');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send(func,event.card,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.isMine()){\n\t\t\t\t\t\t\tfunc(event.card,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseControl('获得此牌','gongxin_top');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tif(result.control=='gongxin_top'){\n\t\t\t\t\t\tplayer.showCards(card,'置于牌堆顶');\n\t\t\t\t\t\ttarget.lose(card,ui.cardPile,'insert','visible');\n\t\t\t\t\t\tgame.log(player,'将',event.card,'置于牌堆顶');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gain(card,target,'give');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.7\",expose: \"0.4\",},}","info":"每回合限一次，当你使用牌指定其他角色为唯一目标后，或成为其他角色使用牌的唯一目标后，你可观看对方的手牌。然后你可以展示其中的一张红色牌并选择一项：①获得此牌。②将此牌置于牌堆顶。"}},"card":{},"hero":{"key_kagari":{"name":"篝","attr":["female","shen",3,["kagari_zongsi"],["key"]]},"key_shiki":{"name":"神山识","attr":["female","shen","3/5",["shiki_omusubi"],["key"]]},"key_hina":{"name":"佐藤雏","attr":["female","shen",3,["hina_shenxian","hina_mashu","hina_tieji"],["key","hiddenSkill"]]},"shen_diaochan":{"name":"神貂蝉","attr":["female","shen",3,["meihun","huoxin"],["qun"]]},"shen_guanyu":{"name":"神关羽","attr":["male","shen",5,["new_wuhun","wushen"],["shu"]]},"shen_zhaoyun":{"name":"神赵云","attr":["male","shen",2,["xinjuejing","relonghun"],["shu"]]},"shen_zhugeliang":{"name":"神诸葛亮","attr":["male","shen",3,["qixing","kuangfeng","dawu"],["shu"]]},"shen_lvmeng":{"name":"神吕蒙","attr":["male","shen",3,["shelie","gongxin"],["wu"]]},"shen_zhouyu":{"name":"神周瑜","attr":["male","shen",4,["yeyan","qinyin"],["wu"]]},"shen_simayi":{"name":"神司马懿","attr":["male","shen",4,["renjie","sbaiyin","lianpo"],["wei"]]},"shen_caocao":{"name":"神曹操","attr":["male","shen",3,["new_guixin","feiying"],["wei"]]},"shen_lvbu":{"name":"神吕布","attr":["male","shen",5,["baonu","wumou","ol_wuqian","ol_shenfen"],["qun"]]},"shen_liubei":{"name":"神刘备","attr":["male","shen",6,["nzry_longnu","nzry_jieying"],["shu"]]},"shen_luxun":{"name":"神陆逊","attr":["male","shen",4,["nzry_junlve","nzry_cuike","nzry_dinghuo"],["wu"]]},"shen_zhangliao":{"name":"神张辽","attr":["male","shen",4,["drlt_duorui","drlt_zhiti"],["wei"]]},"shen_ganning":{"name":"神甘宁","attr":["male","shen","3/6",["drlt_poxi","drlt_jieying"],["wu"]]},"ol_zhangliao":{"name":"OL神张辽","attr":["male","shen",4,["olduorui","olzhiti"],["wei"]]},"shen_caopi":{"name":"神曹丕","attr":["male","shen",5,["chuyuan","dengji"],["wei"]]},"shen_zhenji":{"name":"神甄姬","attr":["female","shen",4,["shenfu","qixian"],["wei"]]},"boss_zhaoyun":{"name":"高达一号","attr":["male","shen",1,["boss_juejing","xinlonghun","zhanjiang"],["shu"]]},"mini_zhugeliang":{"name":"SP神诸葛亮","attr":["male","shen",3,["qixing","minikuangfeng","minidawu"],["shu"]]},"mini_lvbu":{"name":"SP神吕布","attr":["male","shen",6,["miniwuqian","minishenfen"]]},"mini_lvmeng":{"name":"SP神吕蒙","attr":["male","shen",3,["shelie","minigongxin"]]}}},"gwent":{"name":"昆特牌","skill":{"gwjinli":{"name":"金醴","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.hasSkill('gwjinli_jiu');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.addSkill('gwjinli_jiu');\n\t\t\t\t},subSkill: {jiu: {init: function (player){\n\t\t\t\t\t\t\tplayer.storage.gwjinli_jiu=2;\n\t\t\t\t\t\t},onremove: \"true\",mark: \"image\",intro: {content: \"结束阶段，随机获得一个正面效果；&个回合后将先祖麦酒收入手牌\",},trigger: {player: \"phaseEnd\",},forced: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.getBuff();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.storage.gwjinli_jiu--;\n\t\t\t\t\t\t\tif(player.storage.gwjinli_jiu<=0){\n\t\t\t\t\t\t\t\tplayer.removeSkill('gwjinli_jiu');\n\t\t\t\t\t\t\t\tplayer.gain(game.createCard('gw_xianzumaijiu'),'gain2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.updateMark('gwjinli_jiu',true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: \"1.5\",order: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn 1/(1+target.hp)/Math.sqrt(1+target.countCards('h'));\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张手牌，并将一张先祖麦酒置于一名角色的武将牌上"},"huihun":{"name":"回魂","script":"{trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\tif(!player.storage.huihun) return false;\n\t\t\t\t\tfor(var i=0;i<player.storage.huihun.length;i++){\n\t\t\t\t\t\tif(get.position(player.storage.huihun[i])=='d') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<player.storage.huihun.length;i++){\n\t\t\t\t\t\tif(get.position(player.storage.huihun[i])=='d'){\n\t\t\t\t\t\t\tlist.push(player.storage.huihun[i]);\n\t\t\t\t\t\t\tif(list.length>=2) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(list,'gain2','log');\n\t\t\t\t},ai: {threaten: \"1.8\",},group: [\"huihun_count\",\"huihun_count2\"],subSkill: {count: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn _status.currentPhase==player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(!player.storage.huihun){\n\t\t\t\t\t\t\t\tplayer.storage.huihun=[];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.color(trigger.cards[i])=='red'){\n\t\t\t\t\t\t\t\t\tplayer.storage.huihun.add(trigger.cards[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},count2: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.huihun;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"结束阶段，你可以从弃牌堆中获得本回合使用的前两张红色牌"},"gwbaquan":{"name":"霸权","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar hs=target.getCards('h');\n\t\t\t\t\tplayer.gain(hs,target);\n\t\t\t\t\ttarget.$giveAuto(hs,player);\n\t\t\t\t\tevent.hs=hs;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar damage=(target.hp>=player.hp&&get.damageEffect(target,player,player)>0);\n\t\t\t\t\tvar hs=event.hs;\n\t\t\t\t\tif(damage&&target.hp>1){\n\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\tif(get.value(hs[i],player,'raw')>=8){\n\t\t\t\t\t\t\t\tdamage=false;break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCard(hs.length,true,'选择还给'+get.translation(target)+'的牌').ai=function(card){\n\t\t\t\t\t\tif(damage){\n\t\t\t\t\t\t\treturn hs.contains(card)?1:0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -get.value(card,player,'raw');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!event.isMine()) game.delay();\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.gain(result.cards,player);\n\t\t\t\t\tplayer.$giveAuto(result.cards,target);\n\t\t\t\t\tevent.hs2=result.cards;\n\t\t\t\t\tif(player.hp>target.hp){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tfor(var i=0;i<event.hs2.length;i++){\n\t\t\t\t\t\tif(!event.hs.contains(event.hs2[i])) return;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.line(target);\n\t\t\t\t\ttarget.damage();\n\t\t\t\t},ai: {order: \"11\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -Math.sqrt(target.countCards('h'));\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以获得一名其他角色的所有牌，然后还给其等量的牌，若你归还的牌均为你获得的牌且该角色体力值不小于你，你对其造成一点伤害"},"gwjiquan":{"name":"集权","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he');\n\t\t\t\t},selectTarget: [1,null],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.gainPlayerCard(target,'he',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.useCard({name:'sha'},player);\n\t\t\t\t},ai: {threaten: \"1.4\",order: \"7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.getEquip('tengjia')||player.getEquip('bagua')) return -1;\n\t\t\t\t\t\t\tif(get.effect(player,{name:'sha'},target,player)>=0) return -1;\n\t\t\t\t\t\t\tif(!player.hasShan()){\n\t\t\t\t\t\t\t\tif(ui.selected.targets.length) return 0;\n\t\t\t\t\t\t\t\tif(player.hp>=4) return -1;\n\t\t\t\t\t\t\t\tif(player.hp>=3&&target.hp==1) return -1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=player.countCards('h','shan');\n\t\t\t\t\t\t\tif(num<1){\n\t\t\t\t\t\t\t\tnum=1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(ui.selected.targets.length>=num){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以从任意名角色处各获得一张牌，每拿一张牌，被拿牌的角色视为对你使用一张杀"},"shewu":{"name":"蛇舞","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: \"true\",selectCard: [1,3],check: function (card){\n\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t\t}\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(player.isDamaged()){\n\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\tif(get.value(hs[i])<6){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num>=3){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\tif(cards.length>=2){\n\t\t\t\t\t\tplayer.addTempSkill('shewu_dist');\n\t\t\t\t\t}\n\t\t\t\t\tif(cards.length==3){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"4\",result: {player: \"1\",},threaten: \"1.6\",},subSkill: {dist: {mod: {targetInRange: function (){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"出牌阶段限一次，你可以弃置1至3张牌然后摸3张牌；若你弃置了至少2张牌，你本回合使用卡牌无视距离；若你弃置了3张牌，你回复一点体力"},"nuhou":{"name":"怒吼","script":"{trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt2('nuhou'),'he').set('ai',function(card){\n\t\t\t\t\t\treturn 8-get.useful(card);\n\t\t\t\t\t}).set('logSkill','nuhou');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar targets=player.getEnemies();\n\t\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\t\tvar target=targets.randomGet();\n\t\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t\t\ttarget.randomDiscard();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",maixie: \"true\",maixie_hp: \"true\",maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tvar nh=target.countCards('he');\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)||nh==0) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()||nh<=1) return;\n\t\t\t\t\t\t\t\tif(target.hp>=2) return [1,get.tag(card,'damage')*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，你可以弃置一张牌，然后对一名随机敌人造成一点伤害并随机弃置其一张牌"},"kuanglie":{"name":"狂猎","script":"{trigger: {player: \"useCardToBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.target&&event.target!=player&&event.target.countCards('he')&&get.color(event.card)=='black';\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.kuanglie=0;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.target.randomDiscard();\n\t\t\t\t\tplayer.storage.kuanglie++;\n\t\t\t\t\tif(player.storage.kuanglie%2==0){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，每当你使用黑色牌指定其他角色为目标后，目标随机弃置一张牌；每当你以此法累计弃置2张牌后，你摸一张牌"},"gwxiaoshou":{"name":"枭首","script":"{enable: \"phaseUse\",usable: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.isMaxHp();\n\t\t\t\t},check: function (card){return 7-get.value(card);},position: \"he\",filterCard: \"true\",content: function (){\n\t\t\t\t\ttarget.damage();\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},order: \"7\",},}","info":"出牌阶段限两次，你可以弃置一张牌对场上体力值最高（或之一）的一名角色造成一点伤害"},"gwtianbian":{"name":"天变","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num1=0,num2=0;\n\t\t\t\t\tvar choice;\n\t\t\t\t\tif(player.hasUnknown(2)){\n\t\t\t\t\t\tif(game.dead.length==0){\n\t\t\t\t\t\t\tchoice='选项二';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tchoice='cancel2';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\t\tvar att=get.attitude(player,current);\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tnum1++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(att<0){\n\t\t\t\t\t\t\t\tnum2++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tchoice=(num1>num2)?'选项一':'选项二';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl('选项一','选项二','cancel2',function(){\n\t\t\t\t\t\treturn choice;\n\t\t\t\t\t}).set('prompt',get.prompt('gwtianbian')).set('choiceList',['随机使用一张对全场有正面效果的牌','随机使用一张对全场有负面效果的牌']);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('gwtianbian');\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i in lib.card){\n\t\t\t\t\t\t\tif(lib.inpile.contains(i)&&\n\t\t\t\t\t\t\tlib.card[i].selectTarget==-1&&\n\t\t\t\t\t\t\tlib.card[i].type!='equip'&&\n\t\t\t\t\t\t\tlib.card[i].ai&&lib.card[i].ai.tag&&\n\t\t\t\t\t\t\tlib.card[i].ai.tag.multitarget){\n\t\t\t\t\t\t\t\tif(lib.card[i].ai.tag.multineg){\n\t\t\t\t\t\t\t\t\tif(result.control=='选项二'){\n\t\t\t\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(result.control=='选项一'){\n\t\t\t\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar name=null;\n\t\t\t\t\t\twhile(list.length){\n\t\t\t\t\t\t\tname=list.randomRemove();\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.canUse(name,current)\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tname=null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(name){\n\t\t\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.canUse(name,current);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\ttargets.sortBySeat();\n\t\t\t\t\t\t\tplayer.useCard({name:name},targets);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以选择一项：随机使用一张对全场有正面效果的牌；或随机使用一张对全场有负面效果的牌"},"bolang":{"name":"搏浪","script":"{trigger: {player: \"phaseBegin\",},frequent: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.bolang=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<ui.cardPile.childElementCount;i++){\n\t\t\t\t\t\tcards.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCardButton('搏浪：将至多3张牌移至弃牌堆',[1,3],cards.slice(0,6)).ai=function(button){\n\t\t\t\t\t\tif(button.link==cards[0]||button.link==cards[1]){\n\t\t\t\t\t\t\treturn get.value(button.link)-5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(button.link==cards[4]||button.link==cards[5]){\n\t\t\t\t\t\t\treturn get.value(button.link)/5;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tfor(var i=0;i<player.storage.bolang.length;i++){\n\t\t\t\t\t\t\tif(!player.storage.bolang[i].vanishtag.contains('bolang')){\n\t\t\t\t\t\t\t\tplayer.storage.bolang.splice(i--,1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.bolang.addArray(result.links);\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tresult.links[i].vanishtag.add('bolang');\n\t\t\t\t\t\t\tresult.links[i].discard();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},group: \"bolang_gain\",subSkill: {gain: {trigger: {source: \"damageEnd\",},direct: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\t\t\tfor(var i=0;i<player.storage.bolang.length;i++){\n\t\t\t\t\t\t\t\tif(player.storage.bolang[i].vanishtag.contains('bolang')){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tfor(var i=0;i<player.storage.bolang.length;i++){\n\t\t\t\t\t\t\t\tif(player.storage.bolang[i].vanishtag.contains('bolang')){\n\t\t\t\t\t\t\t\t\tlist.push(player.storage.bolang[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.chooseCardButton(true,list,get.prompt('bolang'));\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('bolang');\n\t\t\t\t\t\t\t\tplayer.gain(result.links,'gain2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"准备阶段，你可以观看牌堆顶的6张牌，然后将其中至多3张移入弃牌堆；每当你造成一次伤害，你可以从弃牌堆中获得一张以此法移入弃牌堆的牌（每回合限发动一次）"},"gwxuezhan":{"name":"血战","script":"{trigger: {player: \"phaseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.isMinHandcard();\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.gain(game.createCard('gw_shizizhaohuan'),'gain2');\n\t\t\t\t},}","info":"准备阶段，若你的手牌数为全场最少或之一，你可以获得一张十字召唤"},"zhengjun":{"name":"整军","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.zhengjun=[];\n\t\t\t\t\tplayer.storage.zhengjun_one=[];\n\t\t\t\t},trigger: {player: \"zhengjun\",},forced: \"true\",intro: {content: \"已经使用或打出过至少两张同名牌的牌有：$\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.markSkill('zhengjun');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},group: [\"zhengjun_one\",\"zhengjun_draw\"],subSkill: {one: {trigger: {player: [\"useCard\",\"respondAfter\"],},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tif(player.storage.zhengjun_one.contains(trigger.card.name)){\n\t\t\t\t\t\t\t\tif(!player.storage.zhengjun.contains(trigger.card.name)){\n\t\t\t\t\t\t\t\t\tplayer.storage.zhengjun.add(trigger.card.name);\n\t\t\t\t\t\t\t\t\tevent.trigger('zhengjun');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.storage.zhengjun_one.add(trigger.card.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},draw: {trigger: {player: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.zhengjun.length>=1;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tif(player.storage.zhengjun.length==1){\n\t\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.cards=get.cards(player.storage.zhengjun.length);\n\t\t\t\t\t\t\tplayer.chooseCardButton('整军：获得其中一张牌',true,event.cards).set('ai',function(button){\n\t\t\t\t\t\t\t\treturn get.useful(button.link);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\t\t\tplayer.gain(card,'draw');\n\t\t\t\t\t\t\t\tevent.cards.remove(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\twhile(event.cards.length){\n\t\t\t\t\t\t\t\tui.cardPile.insertBefore(event.cards.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，每当你使用或打出一张卡牌，若这是你在本局游戏中使用或打出的第二张与之同名的牌，你增加一点体力和体力上限；结束阶段，你可以观看牌堆顶的X张牌并获得其中一张，X为你以此法增加的体力上限数"},"jielue":{"name":"劫掠","script":"{trigger: {player: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\tvar list=player.getFriends();\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tvar hs=list[i].getCards('h');\n\t\t\t\t\t\tfor(var j=0;j<hs.length;j++){\n\t\t\t\t\t\t\tif(player.hasUseTarget(hs[j])){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=player.getFriends();\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tvar hs=list[i].getCards('h');\n\t\t\t\t\t\tvar usables=[];\n\t\t\t\t\t\tfor(var j=0;j<hs.length;j++){\n\t\t\t\t\t\t\tif(player.hasUseTarget(hs[j])){\n\t\t\t\t\t\t\t\tusables.push(hs[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(usables.length){\n\t\t\t\t\t\t\tcards.push(usables);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar touse=[];\n\t\t\t\t\tvar owners=[];\n\t\t\t\t\tfor(var i=0;i<2;i++){\n\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\tvar card=cards.randomRemove().randomRemove();\n\t\t\t\t\t\t\tvar owner=get.owner(card);\n\t\t\t\t\t\t\towner.lose(card,ui.special);\n\t\t\t\t\t\t\towner.$give(card,player);\n\t\t\t\t\t\t\tplayer.line(owner,'green');\n\t\t\t\t\t\t\ttouse.push(card);\n\t\t\t\t\t\t\towners.push(owner);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.touse=touse;\n\t\t\t\t\tevent.owners=owners;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.delayx(1.5);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.touse.length){\n\t\t\t\t\t\tplayer.chooseUseTarget(true,event.touse.shift(),null,false);\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.asyncDraw(event.owners);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"锁定技，出牌阶段开始时，你从两个随机队友处各获得一张可使用的牌并依次使用之，然后被拿牌的队友摸一张牌"},"lanquan":{"name":"远略","script":"{enable: \"phaseUse\",usable: \"1\",onChooseToUse: function (event){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tvar num=6;\n\t\t\t\t\tif(ui.cardPile.childNodes.length<num){\n\t\t\t\t\t\tvar discardcards=get.cards(num);\n\t\t\t\t\t\tfor(var i=0;i<discardcards.length;i++){\n\t\t\t\t\t\t\tdiscardcards[i].discard();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<num;i++){\n\t\t\t\t\t\tcards.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t}\n\t\t\t\t\tevent.set('lanquancards',cards);\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\treturn ui.create.dialog('选择一张牌使用',event.lanquancards);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(evt&&evt.filterCard){\n\t\t\t\t\t\t\tvar type=get.type(button.link,'trick');\n\t\t\t\t\t\t\treturn evt.filterCard(button.link,player,evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tviewAs:links[0],\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '选择'+get.translation(links)+'的目标';\n\t\t\t\t\t},},ai: {order: \"12\",result: {player: \"1\",},threaten: \"1.5\",},}","info":"出牌阶段限一次，你可以观看牌堆顶的6张牌，并选择一张使用"},"hunmo":{"name":"魂墨","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn lib.skill.hunmo.filterTarget(null,player,current);\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\tif(target.hasSkill('hunmo2')) return false;\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tvar nh2=target.countCards('h');\n\t\t\t\t\tif(nh<2) return nh2<2;\n\t\t\t\t\treturn nh2>=2&&target.countDiscardableCards(player,'h');\n\t\t\t\t},prompt: function (event){\n\t\t\t\t\tvar nh=event.player.countCards('h');\n\t\t\t\t\tif(nh<2) return '选择一名手牌数小于2的其他角色，观看牌堆顶的两张牌，你获得一张并交给其另一张';\n\t\t\t\t\treturn '选择一名手牌数大于2的其他角色，你弃置一张手牌，然后观看并弃置其一张手牌';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.addTempSkill('hunmo2');\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tif(nh<2){\n\t\t\t\t\t\tevent.cards=get.cards(2);\n\t\t\t\t\t\tplayer.chooseCardButton(event.cards,'获得一张牌并交给'+get.translation(target)+'另一张牌',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseToDiscard('h',true).delay=false;\n\t\t\t\t\t\tevent.discard=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.discard){\n\t\t\t\t\t\tplayer.discardPlayerCard(target,'h',true,'visible');\n\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(result.links&&result.links.length){\n\t\t\t\t\t\t\tplayer.gain(result.links,false);\n\t\t\t\t\t\t\tevent.cards.remove(result.links[0]);\n\t\t\t\t\t\t\ttarget.gain(event.cards,false);\n\t\t\t\t\t\t\tplayer.$drawAuto(result.links);\n\t\t\t\t\t\t\ttarget.$drawAuto(event.cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h')<2) return 11;\n\t\t\t\t\t\treturn 6;\n\t\t\t\t\t},threaten: \"1.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h')<2) return 1;\n\t\t\t\t\t\t\tif(player.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn get.value(card)<=5\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},subSkill: {draw: {trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn player.getStat('skill').hunmo>=3;\n\t\t\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt('魂墨：造成一点伤害')).ai=function(target){\n\t\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('hunmo_draw',result.targets);\n\t\t\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段，若你手牌数少于2，你可以选择一名手牌数小于2的其他角色，观看牌堆顶的两张牌，你获得一张并交给其另一张；若你手牌数不少2，你可以选择一名手牌数不少于2的其他角色，你弃置一张手牌，然后观看并弃置其一张手牌。每回合对同一名角色最多发动一次"},"fayin":{"name":"法印","script":"{trigger: {player: \"shaBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar target=trigger.target;\n\t\t\t\t\tvar bool=get.attitude(player,target)<0;\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt('fayin',target));\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(bool) return 7-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill=['fayin',target];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=trigger.target;\n\t\t\t\t\t\tvar num=5;\n\t\t\t\t\t\tif(target.isMad()){\n\t\t\t\t\t\t\tnum=4;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch(Math.floor(Math.random()*num)){\n\t\t\t\t\t\t\tcase 0:target.randomDiscard(2);break;\n\t\t\t\t\t\t\tcase 1:target.damage('fire');break;\n\t\t\t\t\t\t\tcase 2:player.changeHujia();break;\n\t\t\t\t\t\t\tcase 3:target.turnOver();target.draw();break;\n\t\t\t\t\t\t\tcase 4:target.goMad({player:'phaseBegin'});break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你使用一张杀，你可以弃置一张牌并获得一个随机法印效果：1. 目标随机弃置两张牌；2. 目标进入混乱状态直到下一回合开始；3. 对目标造成一点火属性伤害；4. 获得一点护甲；5. 令目标翻面并摸一张牌"},"xuezhou":{"name":"血咒","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",unique: \"true\",forceunique: \"true\",intro: {content: function (storage,player){\n\t\t\t\t\t\tvar name=get.translation(player);\n\t\t\t\t\t\tif(storage==1){\n\t\t\t\t\t\t\treturn '每当一名角色（'+name+'除外）受到一次伤害，该角色失去一点体力，'+name+'回复一点体力';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(storage==2){\n\t\t\t\t\t\t\treturn '每当一名角色（'+name+'除外）造成一次伤害，该角色失去一点体力，'+name+'（若不是受伤害角色）回复一点体力';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '未发动';\n\t\t\t\t\t\t}\n\t\t\t\t\t},},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseControl('选项一','选项二','cancel2',function(){\n\t\t\t\t\t\tif(Math.random()<0.65) return 0;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\tnext.prompt=get.prompt('xuezhou');\n\t\t\t\t\tnext.choiceList=[\n\t\t\t\t\t\t'每当一名其他角色在一个回合中首次受到伤害，该角色失去一点体力，你回复一点体力',\n\t\t\t\t\t\t'每当一名其他角色在一个回合中首次造成伤害，该角色失去一点体力，你（若不是受伤害角色）回复一点体力'\n\t\t\t\t\t];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2'){\n\t\t\t\t\t\tplayer.unmarkSkill('xuezhou');\n\t\t\t\t\t\tdelete _status.xuezhou;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.logSkill('xuezhou');\n\t\t\t\t\t\tplayer.storage.xuezhou=result.index+1;\n\t\t\t\t\t\tplayer.syncStorage('xuezhou');\n\t\t\t\t\t\tplayer.markSkill('xuezhou');\n\t\t\t\t\t\t_status.xuezhou=player;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"2.5\",},global: \"xuezhou_hp\",}","info":"准备阶段，你可以选择一项效果直到下一回合开始：1. 每当一名其他角色在一个回合中首次受到伤害，该角色失去一点体力，你回复一点体力；2. 每当一名其他角色在一个回合中首次造成伤害，该角色失去一点体力，你（若不是受伤害角色）回复一点体力"},"huandie":{"name":"幻蝶","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('huandie'),[0,game.countPlayer()],function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets.sortBySeat();\n\t\t\t\t\t\tresult.targets.unshift(player);\n\t\t\t\t\t\tplayer.logSkill('huandie',result.targets);\n\t\t\t\t\t\tgame.asyncDrawAuto(result.targets,function(current){\n\t\t\t\t\t\t\treturn current==player?1:2;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.addTempSkill('huandie_discard');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},subSkill: {discard: {trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.countCards('h')>current.hp;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},logTarget: function (){\n\t\t\t\t\t\t\treturn game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.countCards('h')>current.hp;\n\t\t\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.countCards('h')>current.hp;\n\t\t\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\t\t\tevent.list=list;\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\t\t\tevent.list.shift().chooseToDiscard('h',true,2);\n\t\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"准备阶段，你可以摸一张牌，并令任意名其他角色摸两张牌，若如此做，此回合结束时，所有手牌数大于体力值的角色需弃置两张手牌"},"fengjian":{"name":"风剑","script":"{trigger: {player: \"useCard\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar type=get.type(event.card,'trick');\n\t\t\t\t\treturn type=='trick'&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('sha',current,false)&&!event.targets.contains(current);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('fengjian'),function(card,player,target){\n\t\t\t\t\t\treturn player.canUse('sha',target,false)&&!trigger.targets.contains(target);\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha',nature:'thunder'},player,player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('fengjian');\n\t\t\t\t\t\tif(!event.isMine()){\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.useCard({name:'sha',nature:'thunder'},result.targets,false);\n\t\t\t\t\t\tplayer.tempHide();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.5\",noautowuxie: \"true\",},}","info":"每当你使用一张锦囊牌，你可以视为对一名不是此牌目标的角色使用一张雷杀，若如此做，你获得潜行直到下一回合开始"},"gwzhanjiang":{"name":"斩将","script":"{trigger: {global: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('gwzhanjiang2')&&event.player!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar bool=(get.effect(trigger.player,{name:'sha'},player,player)>0&&\n\t\t\t\t\t\tMath.abs(get.attitude(player,trigger.player))>1&&\n\t\t\t\t\t\tgame.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(current,player)>0&&current.hasSha();\n\t\t\t\t\t}));\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('gwzhanjiang',trigger.player),'he');\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(bool) return 7-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill=['gwzhanjiang',trigger.player];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('gwzhanjiang2',{player:'phaseBegin'});\n\t\t\t\t\t\tevent.targets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=trigger.player;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tevent.targets.sortBySeat(trigger.player);\n\t\t\t\t\t\tevent.num=0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.current=event.targets.shift();\n\t\t\t\t\t\tif(event.current.hasSha()){\n\t\t\t\t\t\t\tevent.current.chooseToUse({name:'sha'},'是否对'+get.translation(trigger.player)+'使用一张杀？',trigger.player,-1).oncard=function(card,player){\n\t\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\tif(event.num>=2){\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(2);\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.4\",},}","info":"每轮限一次，在一名角色的准备阶段，你可以弃置一张牌，然后所有角色可以对该角色使用一张杀，出杀的角色在响应时摸一张牌，当有至少两名角色响应后终止结算"},"gwshenyu":{"name":"神愈","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t})){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<ui.discardPile.childElementCount;i++){\n\t\t\t\t\t\tvar card=ui.discardPile.childNodes[i];\n\t\t\t\t\t\tif(card.vanishtag.contains('_gwshenyu')) continue;\n\t\t\t\t\t\tif(get.type(card)=='spell'&&get.subtype(card)!='spell_gold'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<ui.discardPile.childElementCount;i++){\n\t\t\t\t\t\tvar card=ui.discardPile.childNodes[i];\n\t\t\t\t\t\tif(card.vanishtag.contains('_gwshenyu')) continue;\n\t\t\t\t\t\tif(get.type(card)=='spell'&&get.subtype(card)!='spell_gold'){\n\t\t\t\t\t\t\tlist.push(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.list=list;\n\t\t\t\t\tplayer.chooseTarget(get.prompt('gwshenyu'),function(card,player,target){\n\t\t\t\t\t\treturn list.length||target.isDamaged();\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=0) return 0;\n\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\tif(player==target){\n\t\t\t\t\t\t\tnum+=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num*att;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('gwshenyu',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(!event.list.length){\n\t\t\t\t\t\t\tevent.target.recover();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.target.isHealthy()){\n\t\t\t\t\t\t\tevent.directbool=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.target.chooseControl(function(event,player){\n\t\t\t\t\t\t\t\tif(player.hp>=3&&!player.needsToDiscard()) return 1;\n\t\t\t\t\t\t\t\tif(player.hp==2&&player.hasShan()&&player.countCards('h')<=1) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}).set('choiceList',[\n\t\t\t\t\t\t\t\t'回复一点体力','从弃牌堆中获得一张非金法术'\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!event.directbool&&result.index==0){\n\t\t\t\t\t\tevent.target.recover();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar list=event.list;\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tevent.target.chooseCardButton('选择一张法术牌',list,true).ai=function(button){\n\t\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.links[0].vanishtag.add('_gwshenyu');\n\t\t\t\t\t\tevent.target.gain(result.links,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"2\",expose: \"0.2\",},}","info":"准备阶段，你可以令一名角色选择一项：回复一点体力，或从弃牌堆中获得一张非金法术牌（直到洗牌入牌堆前该牌不能再以此法获得）"},"yunhuo":{"name":"陨火","script":"{trigger: {player: \"phaseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn game.roundNumber%4==0&&event.skill!='yunhuo';\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\tevent.list=player.getEnemies().sortBySeat();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\tvar target=event.list.shift();\n\t\t\t\t\t\tplayer.line(target,'fire');\n\t\t\t\t\t\tif(target.countCards('h')){\n\t\t\t\t\t\t\ttarget.randomDiscard('h',false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttarget.damage('fire');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},}","info":"锁定技，准备阶段，若游戏轮数为4的倍数，你令所有敌方角色随机弃置一张手牌（若没有手牌改为受到一点火焰伤害），然后在此回合结束后获得一个额外回合"},"gwfengchi":{"name":"风驰","script":"{trigger: {player: \"phaseUseBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=get.gainableSkills(function(info){\n\t\t\t\t\t\tif(typeof info.enable=='string') return info.enable=='phaseUse';\n\t\t\t\t\t\tif(Array.isArray(info.enable)) return info.enable.contains('phaseUse');\n\t\t\t\t\t},player);\n\t\t\t\t\tlist.remove(player.getSkills());\n\t\t\t\t\tlist=list.randomGets(3);\n\t\t\t\t\tevent.skillai=function(){\n\t\t\t\t\t\treturn get.max(list,get.skillRank,'item');\n\t\t\t\t\t};\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('forcebutton');\n\t\t\t\t\t\tdialog.add('风驰：选择获得一项技能');\n\t\t\t\t\t\tvar clickItem=function(){\n\t\t\t\t\t\t\t_status.event._result=this.link;\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(lib.translate[list[i]+'_info']){\n\t\t\t\t\t\t\t\tvar translation=get.translation(list[i]);\n\t\t\t\t\t\t\t\tif(translation[0]=='新'&&translation.length==3){\n\t\t\t\t\t\t\t\t\ttranslation=translation.slice(1,3);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttranslation=translation.slice(0,2);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar item=dialog.add('<div class=\"popup pointerdiv\" style=\"width:80%;display:inline-block\"><div class=\"skill\">【'+\n\t\t\t\t\t\t\t\ttranslation+'】</div><div>'+lib.translate[list[i]+'_info']+'</div></div>');\n\t\t\t\t\t\t\t\titem.firstChild.addEventListener('click',clickItem);\n\t\t\t\t\t\t\t\titem.firstChild.link=list[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\t_status.imchoosing=true;\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\tvar link=result;\n\t\t\t\t\tplayer.addTempSkill(link,'phaseUseAfter');\n\t\t\t\t\tplayer.popup(link);\n\t\t\t\t\tplayer.flashAvatar('gwfengchi',link);\n\t\t\t\t\tgame.log(player,'获得了技能','【'+get.translation(link)+'】');\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"锁定技，出牌阶段开始时，你随机观看3个可以在出牌阶段使用的技能，并获得其中一个技能直到此阶段结束"},"junchi":{"name":"骏驰","script":"{trigger: {global: \"shaAfter\",},direct: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.target!=player&&event.target.isIn()&&player.hasCard(function(card){\n\t\t\t\t\t\treturn player.canUse(card,event.target,false)&&!get.info(card).multitarget;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar next=player.chooseToUse(get.prompt('junchi'),trigger.target,-1).set('targetRequired',true);\n\t\t\t\t\tnext.prompt2='对'+get.translation(trigger.target)+'使用一张牌，并摸一张牌';\n\t\t\t\t\tnext.filterCard=function(card){\n\t\t\t\t\t\treturn player.canUse(card,trigger.target,false)&&!get.info(card).multitarget;\n\t\t\t\t\t};\n\t\t\t\t\tnext.oncard=function(){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill='junchi';\n\t\t\t\t},subSkill: {gold: {trigger: {global: \"useCardAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.player!=player&get.subtype(event.card)=='spell_gold';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"每当一名其他角色使用一张杀，若目标不是你，你可以对杀的目标使用一张牌，并摸一张牌，每回合限一次"},"lingji":{"name":"灵计","script":"{enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseToDiscard('he',2,true).ai=function(card){\n\t\t\t\t\t\tvar val=-get.value(card);\n\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\tif(get.suit(card)==get.suit(ui.selected.cards[0])) val++;\n\t\t\t\t\t\t\tif(get.number(card)==get.number(ui.selected.cards[0])) val+=3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.cards.length==2){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tif(get.suit(result.cards[0])==get.suit(result.cards[1])){\n\t\t\t\t\t\t\tvar list1=get.typeCard('spell_bronze');\n\t\t\t\t\t\t\tif(list1.length){\n\t\t\t\t\t\t\t\tlist.push(game.createCard(list1.randomGet()));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.number(result.cards[0])==get.number(result.cards[1])){\n\t\t\t\t\t\t\tvar list2=get.typeCard('spell_silver');\n\t\t\t\t\t\t\tif(list2.length){\n\t\t\t\t\t\t\t\tlist.push(game.createCard(list2.randomGet()));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tplayer.gain(list,'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以摸两张牌并弃置两张牌，若弃置的牌花色相同，你获得一张随机铜卡并展示；若弃置的牌点数相同，你获得一张随机银卡并展示"},"gwjinyan":{"name":"金焰","script":"{trigger: {player: [\"damageBefore\"],},forced: \"true\",mark: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.roundNumber%3!=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},group: [\"gwjinyan_gain\"],subSkill: {gain: {trigger: {player: \"phaseBegin\",},frequent: \"true\",filter: function (){\n\t\t\t\t\t\t\treturn game.roundNumber%3==0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar list=get.typeCard('spell_gold');\n\t\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()),'gain2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: function (){\n\t\t\t\t\t\tif(game.roundNumber%3==0) return 1.6;\n\t\t\t\t\t\treturn 0.8;\n\t\t\t\t\t},nofire: \"true\",nothunder: \"true\",nodamage: \"true\",skillTagFilter: function (){\n\t\t\t\t\t\tif(game.roundNumber%3==0) return false;\n\t\t\t\t\t},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(game.roundNumber%3!=0&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，准备阶段，若游戏轮数为3的倍数，你获得一张随机金卡；当游戏轮数不是3的倍数时，你防止所有伤害"},"shuijian":{"name":"水箭","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar targets=player.getEnemies();\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tnum+=get.sgn(get.effect(targets[i],{name:'wanjian'},player,player));\n\t\t\t\t\t}\n\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt('shuijian')).set('ai',function(card){\n\t\t\t\t\t\tif(num>=3) return 10-get.value(card);\n\t\t\t\t\t\tif(num>=2) return 9-get.value(card);\n\t\t\t\t\t\tif(num>=1) return 7-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).logSkill='shuijian';\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\n\t\t\t\t\t\t\tevent.targets[i].addExpose(0.1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.useCard({name:'wanjian'},event.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.6\",},}","info":"准备阶段，你可以弃置一张手牌视为对所有敌方角色使用一张万箭齐发"},"gwjushi":{"name":"巨噬","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('gwjushi2');\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&get.distance(player,target)<=1&&target.countCards('he');\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar hs=target.getCards('he');\n\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\tvar card=hs.randomGet();\n\t\t\t\t\t\ttarget.$give(card,player);\n\t\t\t\t\t\tplayer.storage.gwjushi2=card;\n\t\t\t\t\t\tplayer.storage.gwjushi3=target;\n\t\t\t\t\t\tplayer.storage.gwjushi4=get.position(card);\n\t\t\t\t\t\ttarget.lose(card,ui.special);\n\t\t\t\t\t\tplayer.addSkill('gwjushi2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以将一名距离1以内的其他角色的一张随机牌置于你的武将牌上；当你受到伤害后，令“巨噬”牌回到原来的位置；准备阶段，你获得武将牌上的“巨噬”牌"},"hupeng":{"name":"呼朋","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},filterTarget: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\tplayer.chooseVCardButton('选择令'+get.translation(target)+'获得的牌',['gw_dudayuanshuai1','gw_dudayuanshuai2'],true).ai=function(button){\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\treturn button.link[2]=='gw_dudayuanshuai1'?1:-1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn button.link[2]=='gw_dudayuanshuai2'?1:-1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.gain(game.createCard(result.links[0][2]),'gain2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",order: \"6\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\tif(!nh) return 3;\n\t\t\t\t\t\t\t\tif(!target.needsToDiscard(1)){\n\t\t\t\t\t\t\t\t\tif(nh==1) return 2.5;\n\t\t\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(!target.needsToDiscard()) return 1;\n\t\t\t\t\t\t\t\treturn 0.1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(!nh) return -0.05;\n\t\t\t\t\t\t\t\tif(target.hp==1) return -1;\n\t\t\t\t\t\t\t\tif(target.hp==2) return -2.5;\n\t\t\t\t\t\t\t\tif(target.hp==3) return -2;\n\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},global: [\"hupeng2\",\"hupeng3\",\"hupeng4\"],}","info":"出牌阶段限一次，你可以弃置一张牌并将一张杜达元帅置入一名角色的手牌"},"gwjieyin":{"name":"结印","script":"{group: \"gwjieyin_reset\",init: function (player){\n\t\t\t\t\tplayer.storage.gwjieyin=[];\n\t\t\t\t},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.gwjieyin.length<3;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\treturn ui.create.dialog('结印',[[['','','gw_wenyi'],['','','gw_yanziyaoshui'],['','','gw_kunenfayin']],'vcard'],'hidden');\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tif(player.storage.gwjieyin.contains(button.link[2])){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(button.link[2]=='gw_yanziyaoshui'){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)>1&&current.isMinHandcard();\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if((game.roundNumber-player.storage.gwjieyin_round)%2==0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(button.link[2]=='gw_wenyi'){\n\t\t\t\t\t\t\tif(game.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(current.isMinHp()){\n\t\t\t\t\t\t\t\t\tif(!current.countCards('h')){\n\t\t\t\t\t\t\t\t\t\treturn -2*get.sgn(get.attitude(player,current));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\treturn -get.sgn(get.attitude(player,current));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})>0){\n\t\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tviewAs:{name:links[0][2]},\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tonuse:function(result,player){\n\t\t\t\t\t\t\t\tplayer.logSkill('gwjieyin');\n\t\t\t\t\t\t\t\tplayer.storage.gwjieyin.add(result.card.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '选择'+get.translation(links[0][2])+'的目标';\n\t\t\t\t\t},},subSkill: {reset: {trigger: {player: \"phaseBegin\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tif(typeof player.storage.gwjieyin_round=='number'){\n\t\t\t\t\t\t\t\tvar num=game.roundNumber-player.storage.gwjieyin_round;\n\t\t\t\t\t\t\t\tif(num&&num%2==0){\n\t\t\t\t\t\t\t\t\tplayer.storage.gwjieyin.length=0;\n\t\t\t\t\t\t\t\t\tplayer.storage.gwjieyin_round=game.roundNumber;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.storage.gwjieyin_round=game.roundNumber;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},ai: {order: \"6\",result: {player: \"1\",},},}","info":"出牌阶段，你可以视为使用瘟疫、燕子药水或昆恩法印（不能重复使用同一法术），技能两轮重置一次"},"huanshu":{"name":"幻术","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&!player.hasSkill('huangshu2');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard(get.prompt2('huanshu')).ai=function(card){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.$give(result.cards,player);\n\t\t\t\t\t\tplayer.logSkill('huanshu');\n\t\t\t\t\t\tplayer.storage.huanshu2=result.cards[0];\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special);\n\t\t\t\t\t\tplayer.addSkill('huanshu2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",},}","info":"结束阶段，你可以将一张手牌背面朝上置于你的武将牌上；当一名敌方角色使用一张与之颜色相同的锦囊牌时，你展示并移去此牌，取消锦囊的效果，然后摸两张牌；准备阶段，你移去武将牌上的“幻术”牌"},"gwqinwu":{"name":"琴舞","script":"{trigger: {player: \"useCard\",},usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card)=='basic';\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('gwqinwu')).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=0) return 0;\n\t\t\t\t\t\tif(att<3) return att;\n\t\t\t\t\t\tatt=10-get.distance(player,target,'absolute')/game.players.length;\n\t\t\t\t\t\tif(target.hasSkill('gwqinwu')){\n\t\t\t\t\t\t\tatt/=1.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(target.hasJudge('lebu')||target.skipList.contains('phaseUse')){\n\t\t\t\t\t\t\tatt/=2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('gwqinwu',target);\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\tif(!target.hasSkill('gwqinwu')){\n\t\t\t\t\t\t\ttarget.addTempSkill('gwqinwu',{player:'phaseAfter'});\n\t\t\t\t\t\t\ttarget.addTempSkill('gwqinwu2',{player:'phaseAfter'});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"出牌阶段限一次，每当你使用一张基本牌，你可以令一名角色摸一张牌并获得技能【琴舞】直到其下一回合结束"},"gwfusheng":{"name":"复生","script":"{enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn event.type=='dying'&&event.dying&&!event.dying.isTurnedOver();\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target==_status.event.dying;\n\t\t\t\t},selectTarget: \"-1\",content: function (){\n\t\t\t\t\ttarget.turnOver();\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\tif(player!=target){\n\t\t\t\t\t\tgame.asyncDraw([player,target]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"0.1\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(!_status.event.dying||_status.event.dying.isTurnedOver()) return false;\n\t\t\t\t\t},save: \"true\",result: {target: \"3\",},threaten: \"1.6\",},}","info":"当一名未翻面的角色进入濒死状态时，你可以令其翻面并回复一点体力，然后你与其各摸一张牌"},"gwchenshui":{"name":"沉睡","script":"{trigger: {player: \"damageBefore\",source: \"damageBefore\",},forced: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.gwchenshui=0;\n\t\t\t\t},mark: \"true\",intro: {content: function (storage){\n\t\t\t\t\t\tif(!storage){\n\t\t\t\t\t\t\treturn '未发动过沉睡效果';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '累计发动过'+storage+'次沉睡效果';\n\t\t\t\t\t\t}\n\t\t\t\t\t},},logTarget: function (event,player){\n\t\t\t\t\tif(player==event.source) return event.player;\n\t\t\t\t\treturn event.source;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.storage.gwchenshui++;\n\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\tif(trigger.source!=trigger.player&&trigger.source.isIn()&&trigger.player.isIn()){\n\t\t\t\t\t\tvar cards=trigger.player.getCards('he');\n\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\ttrigger.player.give(cards.randomGet(),trigger.source);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},onremove: \"true\",group: \"gwchenshui_juexing\",subSkill: {juexing: {trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.gwchenshui>=3;\n\t\t\t\t\t\t},skillAnimation: \"true\",animationStr: \"觉醒\",forced: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.removeSkill('gwchenshui');\n\t\t\t\t\t\t\tplayer.setAvatar('gw_laomaotou','gw_laomaotou2');\n\t\t\t\t\t\t\tevent.list=player.getEnemies().sortBySeat();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\t\t\tvar target=event.list.shift();\n\t\t\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tplayer.addSkill('gwliedi');\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: \"0.6\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\t\tif(!target.countCards('he')) return 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，你防止即将造成或受到的伤害，改为令伤害来随机源获得对方一张牌；结束阶段，若你自上次沉睡起累计发动了至少3次沉睡效果，你解除沉睡状态，对所有敌方角色造成一点伤害，然后切换至觉醒状态"},"julian":{"name":"巨敛","script":"{trigger: {player: \"phaseUseBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.isMaxHandcard();\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\tif(game.players[i]!=player){\n\t\t\t\t\t\t\tnum=Math.max(num,game.players[i].countCards('h'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar dh=num-player.countCards('h');\n\t\t\t\t\tif(dh>0){\n\t\t\t\t\t\tplayer.draw(dh);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以摸若干张牌直到你的手牌数为全场最多或之一"},"gwfengshi":{"name":"风蚀","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControlList(get.prompt('gwfengshi'),['为自己施加一个随机负面效果，并对两名随机敌人施加一个随机负面效果','为自己施加两个随机正面效果，并对一名随机敌人施加一个随机正面效果'],function(){\n\t\t\t\t\t\tif(player.getEnemies().length<2) return 1;\n\t\t\t\t\t\tif(player.hp<=1) return 1;\n\t\t\t\t\t\tif(player.hp==2&&Math.random()<0.5) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index!=2){\n\t\t\t\t\t\tplayer.logSkill('gwfengshi');\n\t\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\t\tevent.debuff=[player].addArray(player.getEnemies().randomGets(2));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.buff=[player,player,player.getEnemies().randomGet()];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.debuff&&event.debuff.length){\n\t\t\t\t\t\tplayer.line(event.debuff.shift().getDebuff(false).addExpose(0.1),'green');\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.buff&&event.buff.length){\n\t\t\t\t\t\tplayer.line(event.buff.shift().getBuff(false).addExpose(0.1),'green');\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"结束阶段，你可以选择一项：1. 为自己施加一个随机负面效果，并对两名随机敌人施加一个随机负面效果；2. 为自己施加两个随机正面效果，并对一名随机敌人施加一个随机正面效果"},"yangfan":{"name":"扬帆","script":"{trigger: {player: \"useCard\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card)!='equip'&&player.countCards('h',{color:get.color(event.card)})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=player.getCards('h',{suit:get.suit(trigger.card)});\n\t\t\t\t\tif(!cards.length){\n\t\t\t\t\t\tcards=player.getCards('h',{color:get.color(trigger.card)});\n\t\t\t\t\t}\n\t\t\t\t\tif(!cards.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.chosen=cards.randomGet();\n\t\t\t\t\tgame.delay(0.5)\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card=event.chosen;\n\t\t\t\t\tplayer.lose(card,ui.discardPile);\n\t\t\t\t\tplayer.$throw(card,1000);\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\tgame.log(player,'重铸了',card);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.draw().log=false;\n\t\t\t\t},ai: {pretao: \"true\",},}","info":"锁定技，每当你使用一张非装备牌，你随机重铸一张与其花色相同的手牌；若没有花色相同的手牌，改为随机重铸一张与其颜色相同的手牌"},"shuangxi":{"name":"霜袭","script":"{enable: \"phaseUse\",round: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player.getStat('damage')){\n\t\t\t\t\t\treturn player.canUse('gw_baishuang',target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn player.canUse('gw_ciguhanshuang',target);\n\t\t\t\t\t}\n\t\t\t\t},selectTarget: function (){\n\t\t\t\t\tif(_status.event.player.getStat('damage')){\n\t\t\t\t\t\treturn [1,3];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t},delay: \"0\",multitarget: \"true\",multiline: \"true\",prompt: function (){\n\t\t\t\t\tif(_status.event.player.getStat('damage')){\n\t\t\t\t\t\treturn '视为使用一张【白霜】';\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn '视为使用一张【刺骨寒霜】';\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player.getStat('damage')){\n\t\t\t\t\t\tplayer.useCard({name:'gw_baishuang'},targets);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.useCard({name:'gw_ciguhanshuang'},targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.getStat('damage')){\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'gw_baishuang'},player,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'gw_ciguhanshuang'},player,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},group: [\"shuangxi_roundcount\"],}","info":"每两轮限一次，出牌阶段，你可以视为使用一张【刺骨寒霜】；若你在本回合造成过伤害，改为使用【白霜】"},"gwyewu":{"name":"叶舞","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\tvar targets=player.getEnemies();\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tif(targets[i].countCards('he')) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},filterCard: \"true\",position: \"h\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},global: \"g_gw_yewu\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.targets=player.getEnemies();\n\t\t\t\t\tevent.color=get.color(cards[0]);\n\t\t\t\t\tevent.nh=0;\n\t\t\t\t\tevent.ne=0;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.repeat=false;\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn event.targets.contains(current)&&current.countCards('he');\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tvar target=list.randomGet();\n\t\t\t\t\t\tvar card=target.randomDiscard()[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tif(get.position(card)=='e'){\n\t\t\t\t\t\t\tevent.ne++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.nh++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(card&&get.color(card)==event.color){\n\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar togain=[];\n\t\t\t\t\tfor(var i=0;i<event.nh;i++){\n\t\t\t\t\t\ttogain.push(game.createCard('gw_wuyao'));\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<event.ne;i++){\n\t\t\t\t\t\ttogain.push(game.createCard('gw_lang'));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(togain,'gain2');\n\t\t\t\t},ai: {order: \"8\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张手牌，并弃置一名随机敌人的一张随机牌；若目标弃置的牌与你弃置的牌颜色相同，则重复发动；每以此法弃置一张敌方角色的手牌，你获得一张【雾妖】；每以此法弃置一张敌方角色的手牌，你获得一张【狼】"},"gwfutian":{"name":"覆天","script":"{trigger: {player: \"damageBefore\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {nofire: \"true\",nothunder: \"true\",nodamage: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')) return [0,0];\n\t\t\t\t\t\t},},},init: function (player){\n\t\t\t\t\tplayer.storage.gwfutian=0;\n\t\t\t\t},intro: {content: \"弃置的牌总点数：#\",},unique: \"true\",onremove: \"true\",group: \"gwfutian_discard\",subSkill: {discard: {trigger: {player: \"phaseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.countCards('h');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseTarget('覆天：弃置一名角色的一张手牌',function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('noh')) return 0;\n\t\t\t\t\t\t\t\treturn -get.attitude(player,target)/Math.sqrt(target.countCards('h'));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tplayer.discardPlayerCard(target,'h',true);\n\t\t\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length){\n\t\t\t\t\t\t\t\tplayer.storage.gwfutian+=get.number(result.cards[0]);\n\t\t\t\t\t\t\t\tplayer.markSkill('gwfutian',true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 3'\n\t\t\t\t\t\t\tif(player.storage.gwfutian>=24){\n\t\t\t\t\t\t\t\tplayer.$skill('覆天','legend','metal');\n\t\t\t\t\t\t\t\tplayer.removeSkill('gwfutian');\n\t\t\t\t\t\t\t\tplayer.addSkill('gwzhongmo');\n\t\t\t\t\t\t\t\tplayer.setAvatar('gw_kanbi','gw_hanmuduoer');\n\t\t\t\t\t\t\t\tplayer.maxHp+=4;\n\t\t\t\t\t\t\t\tplayer.hp=player.maxHp;\n\t\t\t\t\t\t\t\tplayer.update();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，你防止一切伤害；准备阶段，你须弃置一名其他角色的一张手牌；若你以此法累计弃置弃置的总点数达到了24，你变身为汉姆多尔"},"gwgouhun":{"name":"勾魂","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",discard: \"false\",prepare: \"give\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.gain(cards,player);\n\t\t\t\t\tevent.card=cards[0];\n\t\t\t\t\tevent.suit=get.suit(cards[0]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar hs=target.getCards('h');\n\t\t\t\t\tvar num1=0;\n\t\t\t\t\tvar num2=0;\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tif(get.suit(hs[i])==event.suit){\n\t\t\t\t\t\t\tnum1++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tnum2++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.num1=num1;\n\t\t\t\t\tevent.num2=num2;\n\t\t\t\t\tvar list=[\n\t\t\t\t\t\t'将手牌中的'+get.translation(event.suit)+'牌交给'+get.translation(player),\n\t\t\t\t\t\t'弃置手牌中的非'+get.translation(event.suit)+'牌',\n\t\t\t\t\t\t'进入混乱状态直到下一回合结束'\n\t\t\t\t\t];\n\t\t\t\t\tif(num1&&num2){\n\t\t\t\t\t\ttarget.chooseControlList(list,true,function(){\n\t\t\t\t\t\t\tif(num1>2&&num2>3){\n\t\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num1>num2/2){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(num1<num2/2){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.rand(2);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(num1){\n\t\t\t\t\t\tlist.splice(1,1);\n\t\t\t\t\t\ttarget.chooseControlList(list,true,function(){\n\t\t\t\t\t\t\tif(num1>2) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(num2){\n\t\t\t\t\t\tlist.splice(0,1);\n\t\t\t\t\t\ttarget.chooseControlList(list,true,function(){\n\t\t\t\t\t\t\tif(num2>3) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.goMad({player:'phaseAfter'});\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar index=result.index;\n\t\t\t\t\tvar cards1=target.getCards('h',function(card){\n\t\t\t\t\t\treturn get.suit(card)==event.suit;\n\t\t\t\t\t});\n\t\t\t\t\tvar cards2=target.getCards('h',function(card){\n\t\t\t\t\t\treturn get.suit(card)!=event.suit;\n\t\t\t\t\t});\n\t\t\t\t\tif(typeof index=='number'){\n\t\t\t\t\t\tif(event.num1&&event.num2){\n\t\t\t\t\t\t\tif(index==0){\n\t\t\t\t\t\t\t\ttarget.give(cards1,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(index==1){\n\t\t\t\t\t\t\t\ttarget.discard(cards2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttarget.goMad({player:'phaseAfter'});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(index==1){\n\t\t\t\t\t\t\t\ttarget.goMad({player:'phaseAfter'});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(event.num1){\n\t\t\t\t\t\t\t\ttarget.give(cards1,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttarget.discard(cards2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -Math.sqrt(target.countCards('h'));\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以交给一名有手牌的其他角色一张手牌，然后令其选择一项：1. 将手牌中与此牌花色相同的牌（至少一张）交给你；2. 弃置手牌中与此牌花色不同的牌（至少一张）；3. 进入混乱状态直到下一回合结束"},"gwweitu":{"name":"卫土","script":"{trigger: {player: \"discardAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hujia<3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t\t// var num=Math.min(trigger.cards.length,3-player.hujia);\n\t\t\t\t\t// if(num>0){\n\t\t\t\t\t// \tplayer.changeHujia();\n\t\t\t\t\t// }\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.gwweitu=0;\n\t\t\t\t},intro: {content: \"护甲自上次计算起已抵挡#点伤害\",},group: \"gwweitu_gain\",subSkill: {gain: {trigger: {player: \"damageZero\",},filter: function (event){\n\t\t\t\t\t\t\treturn event.hujia;\n\t\t\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.gwweitu++;\n\t\t\t\t\t\t\tif(player.storage.gwweitu>=3){\n\t\t\t\t\t\t\t\tplayer.storage.gwweitu-=3;\n\t\t\t\t\t\t\t\tplayer.unmarkSkill('gwweitu');\n\t\t\t\t\t\t\t\tvar list=get.typeCard('spell_silver');\n\t\t\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()),'draw');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.markSkill('gwweitu',true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: \"0.7\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'discard')&&target.hujia<3&&\n\t\t\t\t\t\t\t\ttarget.countCards('he')&&current<0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},player: function (card,player){\n\t\t\t\t\t\t\tif(player.hujia>=3) return;\n\t\t\t\t\t\t\tif(_status.event.name!='chooseToUse'||_status.event.player!=player) return;\n\t\t\t\t\t\t\tif(get.type(card)=='basic') return;\n\t\t\t\t\t\t\tif(get.tag(card,'gain')) return;\n\t\t\t\t\t\t\tif(get.value(card,player,'raw')>=7) return;\n\t\t\t\t\t\t\tif(player.needsToDiscard()>1) return;\n\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你弃置牌，若你的护甲数小于3，你获得一点护甲；每当你的护甲为你累计抵消3次伤害，你获得一张随机银卡法术"},"gwjingshi":{"name":"血契","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h');\n\t\t\t\t\t})\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t\tvar num=targets.length;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\ttargets[i]=[targets[i],targets[i].countCards('h',{color:'black'})];\n\t\t\t\t\t}\n\t\t\t\t\ttargets.sort(function(a,b){\n\t\t\t\t\t\treturn b[1]-a[1];\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i=1;i<targets.length;i++){\n\t\t\t\t\t\tif(targets[i][1]<targets[0][1]){\n\t\t\t\t\t\t\ttargets.splice(i);break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\ttargets[i]=targets[i][0];\n\t\t\t\t\t}\n\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\tvar rand=Math.random();\n\t\t\t\t\tvar choice=targets.randomGet();\n\t\t\t\t\tplayer.chooseTarget('猜测手牌中黑色牌最多的角色',true,function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(rand<0.6||player==game.me){\n\t\t\t\t\t\t\treturn target.isMaxHandcard()?1:0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(rand<0.8){\n\t\t\t\t\t\t\treturn target==choice?1:0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.targets.contains(result.targets[0])){\n\t\t\t\t\t\tplayer.popup('成功');\n\t\t\t\t\t\tgame.log(player,'发动','【血契】','成功');\n\t\t\t\t\t\tvar dialog=ui.create.dialog('hidden');\n\t\t\t\t\t\tdialog.add('获得任意一名角色的一张手牌');\n\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.countCards('h');\n\t\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tdialog.addText(get.translation(list[i]));\n\t\t\t\t\t\t\tdialog.add(list[i].getCards('h'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseButton(dialog,true).set('ai',function(button){\n\t\t\t\t\t\t\tif(get.attitude(player,get.owner(button.link))>0) return -1;\n\t\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.popup('失败');\n\t\t\t\t\t\tgame.log(player,'发动','【血契】','失败');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.links&&result.links.length){\n\t\t\t\t\t\tvar owner=get.owner(result.links[0]);\n\t\t\t\t\t\tif(owner){\n\t\t\t\t\t\t\towner.give(result.links,player);\n\t\t\t\t\t\t\tplayer.line(owner);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.gain(result.links,'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",result: {player: \"10\",},},}","info":"出牌阶段限一次，你可以猜测手牌中黑色牌最多的角色是谁，若猜对，你可以观看所有其他角色的手牌并获得任意一张"},"gwjingtian":{"name":"经天","script":"{clickable: function (player){\n\t\t\t\t\tplayer.addTempSkill('gwjingtian2');\n\t\t\t\t\tplayer.directgain(get.cards());\n\t\t\t\t\tplayer.$draw();\n\t\t\t\t\tplayer.storage.gwjingtian--;\n\t\t\t\t\tplayer.updateMark('gwjingtian',true);\n\t\t\t\t\tplayer.logSkill('gwjingtian');\n\t\t\t\t\tif(_status.imchoosing){\n\t\t\t\t\t\tdelete _status.event._cardChoice;\n\t\t\t\t\t\tdelete _status.event._targetChoice;\n\t\t\t\t\t\tgame.check();\n\t\t\t\t\t}\n\t\t\t\t},clickableFilter: function (player){\n\t\t\t\t\treturn player.storage.gwjingtian>0&&!player.hasSkill('gwjingtian2');\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.gwjingtian=0;\n\t\t\t\t},trigger: {player: \"phaseDrawBefore\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.storage.gwjingtian+=3;\n\t\t\t\t\tplayer.updateMark('gwjingtian',true);\n\t\t\t\t},group: \"gwjingtian_ai\",mark: \"true\",intro: {mark: function (dialog,content,player){\n\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\tif(_status.gameStarted&&player.storage.gwjingtian>0&&!player.hasSkill('gwjingtian2')){\n\t\t\t\t\t\t\t\tdialog.add(ui.create.div('.menubutton.pointerdiv','点击发动',function(){\n\t\t\t\t\t\t\t\t\tif(!this.disabled){\n\t\t\t\t\t\t\t\t\t\tthis.disabled=true;\n\t\t\t\t\t\t\t\t\t\tthis.classList.add('disabled');\n\t\t\t\t\t\t\t\t\t\tthis.style.opacity=0.5;\n\t\t\t\t\t\t\t\t\t\tlib.skill.gwjingtian.clickable(player);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tvar num=Math.min(9,ui.cardPile.childElementCount);\n\t\t\t\t\t\t\tfor(var i=0;i<num;i++){\n\t\t\t\t\t\t\t\tlist.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdialog.addSmall(list);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdialog.addText('剩余'+content+'次');\n\t\t\t\t\t\t}\n\t\t\t\t\t},content: function (content,player){\n\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tvar num=Math.min(9,ui.cardPile.childElementCount);\n\t\t\t\t\t\t\tfor(var i=0;i<num;i++){\n\t\t\t\t\t\t\t\tlist.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.translation(list);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '剩余'+content+'次';\n\t\t\t\t\t\t}\n\t\t\t\t\t},},subSkill: {ai: {trigger: {global: \"drawAfter\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn (_status.auto||!player.isUnderControl(true))&&player.storage.gwjingtian>0&&!player.hasSkill('gwjingtian2');\n\t\t\t\t\t\t},popup: \"false\",check: function (event,player){\n\t\t\t\t\t\t\tvar value=0,card=ui.cardPile.firstChild;\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tvalue=get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(value>=6) return true;\n\t\t\t\t\t\t\tif(value>=5&&get.type(card)!='equip'&&player.storage.gwjingtian>=3) return true;\n\t\t\t\t\t\t\tif(player.storage.gwjingtian>3&&value>3) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tlib.skill.gwjingtian.clickable(player);\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，牌堆顶的9张牌对你始终可见；你始终跳过摸牌阶段，改为获得3枚“经天”标记；每名角色的回合限一次，你可以在任意时间点移去一枚“经天”标记，然后获得牌堆顶的一张牌"},"gwminxiang":{"name":"冥想","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tvar names=[];\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tif(['basic','trick'].contains(get.type(hs[i]))&&!get.info(hs[i]).multitarget){\n\t\t\t\t\t\t\tnames.add(hs[i].name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<names.length;i++){\n\t\t\t\t\t\tif(game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&lib.filter.targetEnabled3({name:names[i]},player,current);\n\t\t\t\t\t\t})>1){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(['shunshou','huogong','shandianjian','jiu','tianxianjiu'].contains(card.name)) return 0;\n\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\treturn get.value(card)+2;\n\t\t\t\t\t}\n\t\t\t\t\treturn get.value(card);\n\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\tif(!['basic','trick'].contains(get.type(card))) return false;\n\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&lib.filter.targetEnabled3({name:card.name},player,current);\n\t\t\t\t\t})>1;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target||!ui.selected.cards.length) return false;\n\t\t\t\t\treturn lib.filter.targetEnabled3({name:ui.selected.cards[0].name},player,target);\n\t\t\t\t},targetprompt: [\"先出牌\",\"后出牌\"],selectTarget: \"2\",multitarget: \"true\",delay: \"0\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttargets[0].useCard({name:cards[0].name},targets[1],'noai');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(targets[0].isIn()&&targets[1].isIn()){\n\t\t\t\t\t\ttargets[1].useCard({name:cards[0].name},targets[0],'noai');\n\t\t\t\t\t}\n\t\t\t\t},multiline: \"true\",ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!ui.selected.cards.length) return 0;\n\t\t\t\t\t\t\treturn get.effect(target,{name:ui.selected.cards[0].name},target,target);\n\t\t\t\t\t\t},},expose: \"0.4\",threaten: \"1.6\",},}","info":"出牌阶段限一次，你可以弃置一张基本牌或普通锦囊牌并摸一张牌，然后选择其他两名角色，令目标分别视为对对方使用一张你弃置的牌的同名牌"},"gwlangshi":{"name":"狼噬","script":"{trigger: {source: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.parent.name=='gwlangshi') return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=event.player&&current!=player&&current.hp>=event.player.hp;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('gwlangshi'),function(card,player,target){\n\t\t\t\t\t\treturn target!=trigger.player&&target!=player&&target.hp>=trigger.player.hp;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('gwlangshi',result.targets);\n\t\t\t\t\t\tresult.targets[0].damage(player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"每当你造成一次伤害，你可以对一名体力值不小于受伤害角色的其他角色造一点伤害"},"gwliaotian":{"name":"燎天","script":"{enable: \"phaseUse\",delay: \"0\",usable: \"2\",filter: function (event,player){\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tif(hs.length<2) return false;\n\t\t\t\t\tvar color=get.color(hs[0]);\n\t\t\t\t\tfor(var i=1;i<hs.length;i++){\n\t\t\t\t\t\tif(get.color(hs[i])!=color) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tevent.num=hs.length;\n\t\t\t\t\tplayer.lose(hs,ui.discardPile);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw(event.num,'nodelay');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar targets=player.getEnemies();\n\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},targets.randomGet(),false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {player: \"1\",},},}","info":"出牌阶段限2次，若你有至少两张手牌且颜色均相同，你可以重铸你的全部手牌，并视为对一名随机敌方角色使用一张不计入出杀次数的杀"},"gwhuanbi":{"name":"幻笔","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseVCardButton(get.typeCard('gwmaoxian').randomGets(3),true,'选择一张冒险牌');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=game.createCard(result.links[0][2]);\n\t\t\t\t\t\tplayer.gain(event.card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tevent.target=list.randomGet();\n\t\t\t\t\t\tevent.target.chooseCard('h','是否交给'+get.translation(event.player)+'一张手牌并获得冒险牌？').set('ai',function(card){\n\t\t\t\t\t\t\tif(get.attitude(event.target,player)>0){\n\t\t\t\t\t\t\t\treturn 11-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}).set('promptx',[event.card]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target.line(player,'green');\n\t\t\t\t\t\tevent.target.give(result.cards,player);\n\t\t\t\t\t\tevent.target.gain(game.createCard(event.card),'gain2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张牌，并创造一张冒险牌，然后随机选择一名有手牌的角色，被选中的角色可以交给你一张手牌并获得一张该牌的复制"},"gwhuanshuang":{"name":"幻霜","script":"{trigger: {player: [\"phaseBegin\",\"phaseEnd\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('gwhuanshuang_disable');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i in lib.card){\n\t\t\t\t\t\tif(lib.card[i].subtype=='spell_bronze') list.push(i);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(!player.hasUseTarget(list[i])){\n\t\t\t\t\t\t\tlist.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar rand=get.rand();\n\t\t\t\t\tvar aozu=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('gw_aozuzhilei',current)&&current.hp<=3&&get.effect(current,{name:'gw_aozuzhilei'},player,player)>0;\n\t\t\t\t\t});\n\t\t\t\t\tvar aozu2=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('gw_aozuzhilei',current)&&current.hp<=2&&get.effect(current,{name:'gw_aozuzhilei'},player,player)>0;\n\t\t\t\t\t});\n\t\t\t\t\tvar aozu3=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('gw_aozuzhilei',current)&&get.effect(current,{name:'gw_aozuzhilei'},player,player)>0;\n\t\t\t\t\t});\n\t\t\t\t\tvar baoxue=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('gw_baoxueyaoshui',current)&&get.attitude(player,current)<0&&[2,3].contains(current.countCards('h'))&&!current.hasSkillTag('noh');\n\t\t\t\t\t});\n\t\t\t\t\tvar baoxue2=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('gw_baoxueyaoshui',current)&&get.attitude(player,current)<0&&[2].contains(current.countCards('h'))&&!current.hasSkillTag('noh');\n\t\t\t\t\t});\n\t\t\t\t\tvar baoxue3=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('gw_baoxueyaoshui',current)&&get.attitude(player,current)<0&&current.countCards('h')>=2&&!current.hasSkillTag('noh');\n\t\t\t\t\t});\n\t\t\t\t\tvar nongwu=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(player,current)<0&&(get.attitude(player,current.getNext())<0||get.attitude(player,current.getPrevious())<0);\n\t\t\t\t\t});\n\t\t\t\t\tvar nongwu2=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(player,current)<0&&get.attitude(player,current.getNext())<0&&get.attitude(player,current.getPrevious())<0;\n\t\t\t\t\t});\n\t\t\t\t\tvar yanzi=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(player,current)>0&&current.isMinHandcard();\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseVCardButton(get.prompt('gwhuanshuang'),list.randomGets(3),'notype').ai=function(button){\n\t\t\t\t\t\tvar name=button.link[2];\n\t\t\t\t\t\tswitch(name){\n\t\t\t\t\t\t\tcase 'gw_ciguhanshuang':\n\t\t\t\t\t\t\t\tif(nongwu2) return 3;\n\t\t\t\t\t\t\t\tif(nongwu) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\tcase 'gw_baoxueyaoshui':\n\t\t\t\t\t\t\t\tif(baoxue2) return 2;\n\t\t\t\t\t\t\t\tif(baoxue) return 1.5;\n\t\t\t\t\t\t\t\tif(baoxue3) return 0.5;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\tcase 'gw_aozuzhilei':\n\t\t\t\t\t\t\t\tif(aozu2) return 2.5;\n\t\t\t\t\t\t\t\tif(aozu) return 1.2;\n\t\t\t\t\t\t\t\tif(aozu3) return 0.2;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\tcase 'gw_yanziyaoshui':\n\t\t\t\t\t\t\t\tif(yanzi) return 2;\n\t\t\t\t\t\t\t\treturn 0.6;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse(name,current)&&get.effect(current,{name:name},player,player)>0;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('gwhuanshuang');\n\t\t\t\t\t\tevent.cardname=result.links[0][2];\n\t\t\t\t\t\tplayer.chooseUseTarget(true,event.cardname);\n\t\t\t\t\t\tplayer.addTempSkill('gwhuanshuang_disable');\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.cardname&&player.hasUseTarget(event.cardname)){\n\t\t\t\t\t\tplayer.chooseUseTarget(true,event.cardname);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.6\",},subSkill: {disable: {sub: \"true\",},},}","info":"准备或结束阶段，你可以发现一张铜卡法术并使用之，此牌结算两次"},"yinzhang":{"name":"银杖","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=get.typeCard('spell_silver').randomGets(3);\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar dialog=ui.create.dialog('选择一张加入你的手牌',[list,'vcard'],'hidden');\n\t\t\t\t\tplayer.chooseButton(dialog,true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.gain(game.createCard(result.links[0][2]),'draw');\n\t\t\t\t},ai: {order: \"8\",threaten: \"1.3\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张牌，然后发现一张银卡法术"},"sqlongwu":{"name":"龙舞","script":"{group: \"sqlongyin\",trigger: {player: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar max=1;\n\t\t\t\t\tvar map={};\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tvar name=hs[i].name;\n\t\t\t\t\t\tif(!map[name]){\n\t\t\t\t\t\t\tmap[name]=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tmap[name]++;\n\t\t\t\t\t\t\tif(map[name]>max){\n\t\t\t\t\t\t\t\tmax=map[name];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw(max);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseToUse();\n\t\t\t\t},}","info":"结束阶段，你可以摸X张牌，然后可以使用一张牌，X为手牌中同名牌数最多的牌的数量。准备阶段开始时，你随机切换至一种形态"}},"card":{},"hero":{"gw_huoge":{"name":"霍格","attr":["male","qun",3,["gwjinli"]]},"gw_aisinie":{"name":"埃丝涅","attr":["female","wu",3,["huihun"]]},"gw_enxier":{"name":"恩希尔","attr":["male","wei",4,["gwbaquan"]]},"gw_kaerweite":{"name":"卡尔维特","attr":["male","shu",4,["gwjiquan"]]},"gw_falanxisika":{"name":"法兰茜斯卡","attr":["female","wu",3,["shewu"]]},"gw_haluo":{"name":"哈洛","attr":["male","qun",4,["nuhou"]]},"gw_airuiting":{"name":"艾瑞汀","attr":["male","wei",4,["kuanglie"]]},"gw_laduoweide":{"name":"拉多维德","attr":["male","wei",4,["gwxiaoshou"]]},"gw_dagong":{"name":"达贡","attr":["male","qun",4,["gwtianbian"]]},"gw_bulanwang":{"name":"布兰王","attr":["male","qun",4,["bolang"]]},"gw_kuite":{"name":"奎特","attr":["male","qun",4,["gwxuezhan"]]},"gw_fuertaisite":{"name":"弗尔泰斯特","attr":["male","wei",3,["zhengjun"]]},"gw_hengsaite":{"name":"亨赛特","attr":["male","wei",3,["jielue"]]},"gw_fulisi":{"name":"符里斯","attr":["male","qun",3,["lanquan"]]},"gw_gaier":{"name":"盖尔","attr":["male","shu",3,["hunmo"]]},"gw_jieluote":{"name":"杰洛特","attr":["male","qun",6,["fayin"]]},"gw_yenaifa":{"name":"叶奈法","attr":["female","qun",3,["xuezhou"]]},"gw_telisi":{"name":"特莉斯","attr":["female","wei",3,["huandie"]]},"gw_xili":{"name":"希里","attr":["female","wu",3,["fengjian"]]},"gw_luoqi":{"name":"罗契","attr":["male","wei",4,["gwzhanjiang"]]},"gw_aigeleisi":{"name":"艾格蕾斯","attr":["female","wu",3,["gwshenyu"]]},"gw_aokeweisite":{"name":"奥克维斯特","attr":["male","qun",4,["yunhuo"]]},"gw_kaxier":{"name":"卡西尔","attr":["male","shu",4,["gwfengchi"]]},"gw_luobo":{"name":"萝卜","attr":["male","qun",3,["junchi"]]},"gw_mieren":{"name":"尔米恩","attr":["male","shu",3,["lingji"]]},"gw_sanhanya":{"name":"三寒鸦","attr":["male","shu",3,["gwjinyan"]]},"gw_shanhu":{"name":"珊瑚","attr":["female","qun",3,["shuijian"]]},"gw_zhangyujushou":{"name":"章鱼巨兽","attr":["male","wu",4,["gwjushi"]]},"gw_zhuoertan":{"name":"卓尔坦","attr":["male","wu",3,["hupeng"]]},"gw_meizi":{"name":"梅兹","attr":["female","wei",3,["gwjieyin"]]},"gw_aimin":{"name":"艾敏","attr":["female","wu",3,["huanshu"]]},"gw_puxila":{"name":"普希拉","attr":["female","qun",3,["gwqinwu"]]},"gw_xigedelifa":{"name":"希格德莉法","attr":["female","qun",3,["gwfusheng"]]},"gw_laomaotou":{"name":"毛矛头","attr":["male","qun",4,["gwchenshui"]]},"gw_qigaiwang":{"name":"乞丐王","attr":["male","qun",4,["julian"]]},"gw_bierna":{"name":"碧尔娜","attr":["female","qun",3,["gwfengshi"]]},"gw_haizhiyezhu":{"name":"海之野猪","attr":["male","qun",4,["yangfan"]]},"gw_nitelila":{"name":"尼斯里拉","attr":["male","wei",4,["shuangxi"]]},"gw_linjing":{"name":"林精","attr":["male","wu",4,["gwyewu"]]},"gw_kanbi":{"name":"坎毕","attr":["male","qun",1,["gwfutian"]]},"gw_nvyemo":{"name":"女夜魔","attr":["female","shu",3,["gwgouhun"]]},"gw_kairuisi":{"name":"凯瑞斯","attr":["female","qun",3,["gwweitu"]]},"gw_oudimu":{"name":"欧迪姆","attr":["male","shu",3,["gwjingshi"]]},"gw_shasixiwusi":{"name":"沙斯西乌斯","attr":["male","qun",4,["gwjingtian"]]},"gw_yioufeisisp":{"name":"伊欧菲斯","attr":["male","wu",3,["gwminxiang"]]},"gw_lanbote":{"name":"兰伯特","attr":["male","qun",4,["gwlangshi"]]},"gw_fenghuang":{"name":"凤凰","attr":["male","shu",4,["gwliaotian"]]},"gw_diandian":{"name":"店店","attr":["male","wu",3,["gwhuanbi"]]},"gw_yisilinni":{"name":"伊斯琳妮","attr":["female","wu",3,["gwhuanshuang"]]},"gw_feilafanruide":{"name":"菲拉凡德苪","attr":["male","wei",3,["yinzhang"]]},"gw_saqiya":{"name":"萨琪亚","attr":["female","shu",4,["sqlongwu"]]}}},"xianjian":{"name":"仙剑奇侠传","skill":{"tianjian":{"name":"天剑","script":"{enable: \"phaseUse\",viewAs: {name: \"wanjian\",},filterCard: {name: \"sha\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0;\n\t\t\t\t},usable: \"1\",group: \"tianjian_discard\",subSkill: {discard: {trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event){\n\t\t\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\t\t\tif(get.is.altered('tianjian')) return false;\n\t\t\t\t\t\t\treturn event.parent.skill=='tianjian'&&event.player.countCards('he');\n\t\t\t\t\t\t},popup: \"false\",content: function (){\n\t\t\t\t\t\t\ttrigger.player.discard(trigger.player.getCards('he').randomGet());\n\t\t\t\t\t\t},sub: \"true\",},},ai: {wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"9\",useful: \"1\",value: \"5\",},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"出牌阶段限一次，你可以将一张杀当作万箭齐发使用，受到伤害的角色随机弃置一张牌"},"yufeng":{"name":"御风","script":"{trigger: {player: \"loseEnd\",},forced: \"true\",usable: \"2\",filter: function (event,player){\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h') return player.countCards('h')<2;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2-player.countCards('h'));\n\t\t\t\t},ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\tif(tag=='noh'&&(nh>2||nh==0)){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，当你失去手牌后，若手牌数少于2，你将手牌数补至2（每回合最多发动两次）"},"huimeng":{"name":"回梦","script":"{trigger: {player: \"recoverAfter\",},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {threaten: \"0.8\",},}","info":"每当你回复一点体力，可以摸两张牌"},"tianshe":{"name":"天蛇","script":"{group: [\"tianshe2\"],trigger: {player: \"damageBefore\",},filter: function (event){\n\t\t\t\t\tif(event.nature) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {nofire: \"true\",nothunder: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='tiesuo') return 0;\n\t\t\t\t\t\t\tif(get.tag(card,'fireDamage')) return 0;\n\t\t\t\t\t\t\tif(get.tag(card,'thunderDamage')) return 0;\n\t\t\t\t\t\t},},},}","info":"锁定技，你防止即将受到的属性伤害，每当你造成一次属性伤害，你回复一点体力"},"guiyuan":{"name":"归元","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {name: \"sha\",},filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {order: \"5\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张杀，然后回复一点体力并摸一张牌"},"qijian":{"name":"气剑","script":"{trigger: {player: \"phaseDiscardEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.cards&&event.cards.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget([1,trigger.cards.length],get.prompt('qijian'),function(card,player,target){\n\t\t\t\t\t\treturn player.canUse({name:'sha'},target,false);\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('qijian');\n\t\t\t\t\t\tplayer.useCard({name:'sha'},result.targets);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"弃牌阶段结束时，你可以指定至多X名目标视为使用一张杀，X为你于此阶段弃置的卡牌数"},"lingdi":{"name":"灵笛","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tvar num=1+(player.getStat().skill.lingdi||0);\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&Math.max(1,get.distance(player,current))==num;\n\t\t\t\t\t})){\n\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\tvar suits=player.storage.lingdi||[];\n\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\tif(!suits.contains(get.suit(hs[i]))){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&Math.max(1,get.distance(player,target))==1+(player.getStat().skill.lingdi||0);\n\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\treturn !(player.storage.lingdi||[]).contains(get.suit(card));\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tgame.asyncDraw([player,target]);\n\t\t\t\t\tif(!player.storage.lingdi){\n\t\t\t\t\t\tplayer.storage.lingdi=[];\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.lingdi.add(get.suit(cards[0]));\n\t\t\t\t},ai: {threaten: \"1.2\",order: \"7\",result: {target: \"1\",},},group: \"lingdi_clear\",subSkill: {clear: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.lingdi;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"出牌阶段，你可以弃置一张本回合与此法弃置的牌花色均不同的手牌，然后选择一名与你距离为X的角色与其各摸一张牌，X为本回合发动灵笛的次数（含此次）"},"anwugu":{"name":"巫蛊","script":"{trigger: {source: \"damageEnd\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.player!=player&&event.player.isIn()&&!event.player.hasSkill('anwugu2');\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.addSkill('anwugu2');\n\t\t\t\t},}","info":"每当你对其他角色造成一次伤害，你可以令目标获得三枚蛊标记；拥有蛊标记的角色手牌上限-1，每回合最多使用X张牌（X为蛊标记数），每个结束阶段失去一枚蛊标记"},"husha":{"name":"虎煞","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.husha==1){\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse('sha',current,false);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn player.storage.husha>0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('sha',current,false);\n\t\t\t\t\t})){\n\t\t\t\t\t\tlist.push('移去1枚虎煞标记，视为使用一张杀');\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.husha>1){\n\t\t\t\t\t\tlist.push('移去2枚虎煞标记，视为使用一张南蛮入侵');\n\t\t\t\t\t\tif(player.storage.husha>2){\n\t\t\t\t\t\t\tlist.push('移去3枚虎煞标记，视为对除你之外的角色使用一张元素毁灭');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl('cancel2',function(){\n\t\t\t\t\t\tif(player.storage.husha>2){\n\t\t\t\t\t\t\tvar num1=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(current!=player&&player.canUse('yuansuhuimie',current)){\n\t\t\t\t\t\t\t\t\treturn get.sgn(get.effect(current,{name:'yuansuhuimie'},player,player));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar num2=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(current!=player&&player.canUse('yuansuhuimie',current)){\n\t\t\t\t\t\t\t\t\treturn get.effect(current,{name:'yuansuhuimie'},player,player);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(num1>0&&num2>0) return '选项三';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.storage.husha>1){\n\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(current!=player&&player.canUse('nanman',current)){\n\t\t\t\t\t\t\t\t\treturn get.sgn(get.effect(current,{name:'nanman'},player,player));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(num>0) return '选项二';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse('sha',current,false)&&get.effect(current,{name:'sha'},player,player)>0;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn '选项一';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 'cancel2';\n\t\t\t\t\t}).set('prompt',get.prompt('husha')).set('choiceList',list);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('husha');\n\t\t\t\t\t\tif(result.control=='选项一'){\n\t\t\t\t\t\t\tevent.sha=true;\n\t\t\t\t\t\t\tplayer.storage.husha--;\n\t\t\t\t\t\t\tplayer.chooseTarget('选择出杀的目标',true,function(card,player,target){\n\t\t\t\t\t\t\t\treturn player.canUse('sha',target,false);\n\t\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(result.control=='选项二'){\n\t\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.canUse('nanman',current);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tplayer.storage.husha-=2;\n\t\t\t\t\t\t\tlist.sortBySeat();\n\t\t\t\t\t\t\tplayer.useCard({name:'nanman'},list);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.canUse('yuansuhuimie',current);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tplayer.storage.husha-=3;\n\t\t\t\t\t\t\tlist.remove(player);\n\t\t\t\t\t\t\tlist.sortBySeat();\n\t\t\t\t\t\t\tplayer.useCard({name:'yuansuhuimie'},list);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.storage.husha){\n\t\t\t\t\t\t\tplayer.unmarkSkill('husha');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.syncStorage('husha');\n\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.sha&&result.targets&&result.targets.length){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},result.targets[0]);\n\t\t\t\t\t}\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.husha=0;\n\t\t\t\t},intro: {content: \"mark\",},group: \"husha_count\",subSkill: {count: {trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(player.storage.husha<3){\n\t\t\t\t\t\t\t\tvar evt=event.getParent('phaseUse');\n\t\t\t\t\t\t\t\treturn evt&&evt.player==player;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.husha+=trigger.num;\n\t\t\t\t\t\t\tif(player.storage.husha>3){\n\t\t\t\t\t\t\t\tplayer.storage.husha=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.markSkill('husha');\n\t\t\t\t\t\t\tplayer.syncStorage('husha');\n\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"每当你于出牌阶段造成一点伤害，你获得一枚虎煞标记（标记数不超过3）；结束阶段，你可以选择一项：1. 移去一枚虎煞标记，视为对任意角色使用一张杀；2. 移去两枚虎煞标记，视为使用一张南蛮入侵；3. 移去三枚虎煞标记，视为对除你之外的角色使用一张元素毁灭"},"sheying":{"name":"蛇影","script":"{trigger: {source: \"damageAfter\",},filter: function (event,player){\n\t\t\t\t\treturn get.itemtype(event.cards)=='cards'&&get.position(event.cards[0])=='d';\n\t\t\t\t},usable: \"1\",prompt2: function (event){\n\t\t\t\t\treturn '进行一次判定，若结果为黑色，你获得'+get.translation(event.cards);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.color(card)=='black'?1:-1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.color=='black'){\n\t\t\t\t\t\tplayer.gain(trigger.cards);\n\t\t\t\t\t\tplayer.$gain2(trigger.cards);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每回合限一次，当你使用卡牌造成一次伤害后，你可以进行一次判定，若结果为黑色，你收回此牌"},"dujiang":{"name":"毒降","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: {color: \"black\",},check: function (card){\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=player.getEnemies();\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tvar target=list.randomGet();\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.gain(game.createCard('du'),'gain2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},threaten: \"1.5\",},}","info":"出牌阶段限一次，你可以弃置一张黑色牌令一名随机敌人获得一张毒"},"huahu":{"name":"化狐","script":"{enable: \"phaseUse\",unique: \"true\",mark: \"true\",skillAnimation: \"true\",animationColor: \"metal\",init: function (player){\n\t\t\t\t\tplayer.storage.huahu=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.huahu) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},selectTarget: [1,null],contentBefore: function (){\n\t\t\t\t\tplayer.awakenSkill('huahu');\n\t\t\t\t\tplayer.storage.huahu=true;\n\t\t\t\t\tplayer.loseMaxHp(true);\n\t\t\t\t\tplayer.clearSkills();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\ttarget.changeHujia();\n\t\t\t\t\ttarget.draw(false);\n\t\t\t\t\ttarget.$draw();\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>2&&\n\t\t\t\t\t\t\t\t\tget.recoverEffect(players[i],player,player)>0){\n\t\t\t\t\t\t\t\t\tif(players[i].hp==1){\n\t\t\t\t\t\t\t\t\t\tif(player.hp<player.maxHp){\n\t\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(players[i].hp<=2){\n\t\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num>=3) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},intro: {content: \"limited\",},}","info":"限定技，你可以失去所有技能和一点体力上限，然后令任意名其他角色回复一点体力、获得一点护甲并摸一张牌"},"qixia":{"name":"绮霞","script":"{trigger: {player: [\"useCardAfter\",\"respondAfter\"],},silent: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.qixia=[];\n\t\t\t\t},intro: {content: function (storage){\n\t\t\t\t\t\tif(!storage.length){\n\t\t\t\t\t\t\treturn '未使用或打出过有花色的牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar str='已使用过'+get.translation(storage[0]+'2');\n\t\t\t\t\t\t\tfor(var i=1;i<storage.length;i++){\n\t\t\t\t\t\t\t\tstr+='、'+get.translation(storage[i]+'2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr+='牌';\n\t\t\t\t\t\t\treturn str;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},content: function (){\n\t\t\t\t\tvar suit=get.suit(trigger.card);\n\t\t\t\t\tif(suit){\n\t\t\t\t\t\tplayer.storage.qixia.add(suit);\n\t\t\t\t\t\tplayer.syncStorage('qixia');\n\t\t\t\t\t\tplayer.markSkill('qixia');\n\t\t\t\t\t}\n\t\t\t\t},group: \"qixia_phase\",subSkill: {phase: {trigger: {global: \"phaseAfter\",},priority: \"-50\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.qixia.length>=4;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\t\t\tplayer.storage.qixia.length=0;\n\t\t\t\t\t\t\tplayer.syncStorage('qixia');\n\t\t\t\t\t\t\tplayer.unmarkSkill('qixia');\n\t\t\t\t\t\t},sub: \"true\",},},forced: \"true\",popup: \"false\",}","info":"锁定技，当你累计使用或打出了4种不同花色的牌后，你于本回合结束后获得一个额外回合"},"jianzhen":{"name":"剑阵","script":"{trigger: {player: \"shaAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.target.isIn()&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.canUse('sha',event.target,false)&&current!=player;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.canUse('sha',trigger.target,false)&&current!=player;\n\t\t\t\t\t});\n\t\t\t\t\tevent.targets.sortBySeat(trigger.player);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.current=event.targets.shift();\n\t\t\t\t\t\tif(event.current.hasSha()){\n\t\t\t\t\t\t\tevent.current.chooseToUse({name:'sha'},'是否对'+get.translation(trigger.target)+'使用一张杀？',trigger.target,-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif (!result.bool){\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.4\",},}","info":"锁定技，当你使用杀对目标结算完毕后，其他角色可以对该目标使用一张杀，当有人选择出杀后终止此结算"},"binxin":{"name":"冰心","script":"{trigger: {global: \"phaseEnd\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.player.hp==1;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.changeHujia();\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"在一名角色的结束阶段，若其体力值为1，你可以令其获得一点护甲"},"sajin":{"name":"洒金","script":"{enable: \"phaseUse\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hp<target.maxHp;\n\t\t\t\t},selectTarget: [1,null],filterCard: \"true\",usable: \"1\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('h')>player.hp){\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 4-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar color=get.color(cards[0]);\n\t\t\t\t\ttarget.judge(function(card){\n\t\t\t\t\t\treturn get.color(card)==color?1:0;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"3\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.recoverEffect(target);\n\t\t\t\t\t\t},},threaten: \"1.5\",},}","info":"出牌阶段限一次，你可以弃置一张手牌并指定任意名角色进行判定，若判定颜色与你弃置的牌相同，该角色回复一点体力"},"jtjubao":{"name":"聚宝","script":"{trigger: {global: \"discardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('jtjubao2')) return false;\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(_status.currentPhase==player) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards[i])!='basic'&&get.position(event.cards[i])=='d'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tif(get.type(trigger.cards[i])!='basic'&&get.position(trigger.cards[i])=='d'){\n\t\t\t\t\t\t\tcards.push(trigger.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tvar card=cards.randomGet();\n\t\t\t\t\t\tplayer.gain(card,'log');\n\t\t\t\t\t\tplayer.$gain2(card);\n\t\t\t\t\t\tplayer.addTempSkill('jtjubao2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"当其他角色于你的回合外首次弃置非基本牌时，你可以获得其中的随机一张"},"xshuangren":{"name":"双刃","script":"{trigger: {player: [\"loseEnd\"],},filter: function (event,player){\n\t\t\t\t\tif(!player.equiping) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='e'&&get.subtype(event.cards[i])=='equip1') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar card;\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tif(trigger.cards[i].original=='e'&&get.subtype(trigger.cards[i])=='equip1'){\n\t\t\t\t\t\t\tcard=trigger.cards[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tif(player.storage.xshuangren){\n\t\t\t\t\t\t\tplayer.unmark(player.storage.xshuangren,'xshuangren');\n\t\t\t\t\t\t\tplayer.discard(player.storage.xshuangren);\n\t\t\t\t\t\t\tgame.addVideo('unmarkId',player,[get.cardInfo(player.storage.xshuangren),'xshuangren']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\tcard.clone.moveDelete(player);\n\t\t\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([card.clone]));\n\t\t\t\t\t\t\tplayer.mark(card,'xshuangren');\n\t\t\t\t\t\t\tgame.addVideo('markId',player,[get.cardInfo(card),'xshuangren']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tui.special.appendChild(card);\n\t\t\t\t\t\tplayer.storage.xshuangren=card;\n\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\tif(info.skills){\n\t\t\t\t\t\t\tplayer.addAdditionalSkill('xshuangren',info.skills);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.removeAdditionalSkill('xshuangren');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.subtype(card)=='equip1') return [1,3];\n\t\t\t\t\t\t},},},intro: {content: \"card\",},group: \"xshuangren2\",}","info":"当你的武器牌被替换时，你可以将其置于你的武将牌上，并获得此装备的武器效果（不含距离）"},"shenmu":{"name":"神木","script":"{trigger: {global: \"dying\",},priority: \"6\",filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=0&&player.countCards('h',{color:'red'});\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<=0) return false;\n\t\t\t\t\tvar cards=player.getCards('h',{color:'red'});\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(cards[i].name=='tao') return false;\n\t\t\t\t\t\tif(get.value(cards[i])>7&&cards.length>2) return false;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar cards=player.getCards('h',{color:'red'});\n\t\t\t\t\tevent.num=cards.length;\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\ttrigger.player.recover();\n\t\t\t\t\ttrigger.player.draw(event.num);\n\t\t\t\t},ai: {threaten: \"1.6\",expose: \"0.2\",},}","info":"任意一名角色濒死时，你可以展示你的手牌并弃置其中的所有红色牌（至少一张），若如此做，该角色回复一点体力，然后摸X张牌，X为你弃置的手牌数"},"duci":{"name":"毒刺","script":"{trigger: {player: \"loseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='e') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('duci'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&get.distance(player,target)<=1;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('duci',result.targets);\n\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.5\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'){\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(player!=players[i]&&get.distance(player,players[i])<=1&&\n\t\t\t\t\t\t\t\t\t\tget.damageEffect(players[i],player,player)>0){\n\t\t\t\t\t\t\t\t\t\treturn [1,3];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你失去一次装备牌，可以对距离1以内的一名其他角色造成一点伤害"},"fenxing":{"name":"分形","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",unique: \"true\",forceunique: \"true\",filter: function (){\n\t\t\t\t\treturn Math.random()<0.5;\n\t\t\t\t},derivation: [\"diesha\",\"guijiang\"],content: function (){\n\t\t\t\t\tif(player.storage.fenxing){\n\t\t\t\t\t\tplayer.storage.fenxing=false;\n\t\t\t\t\t\tplayer.removeSkill('guijiang');\n\t\t\t\t\t\tplayer.removeSkill('diesha');\n\t\t\t\t\t\tplayer.addSkill('diewu');\n\t\t\t\t\t\tplayer.addSkill('lingyu');\n\t\t\t\t\t\tplayer.setAvatar('pal_longkui','pal_longkui');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.fenxing=true;\n\t\t\t\t\t\tplayer.removeSkill('diewu');\n\t\t\t\t\t\tplayer.removeSkill('lingyu');\n\t\t\t\t\t\tplayer.addSkill('guijiang');\n\t\t\t\t\t\tplayer.addSkill('diesha');\n\t\t\t\t\t\tplayer.setAvatar('pal_longkui','pal_longkuigui');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，准备阶段，你有50%概率变身为另一形态"},"diewu":{"name":"蝶舞","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0;\n\t\t\t\t},filterCard: {name: \"sha\",},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},prepare: \"give\",discard: \"false\",content: function (){\n\t\t\t\t\ttarget.gain(cards,player);\n\t\t\t\t\tif(!player.hasSkill('diewu2')){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.addTempSkill('diewu2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"2\",expose: \"0.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!player.hasSkill('diewu2')) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以将一张【杀】交给一名角色，若你于此阶段内首次如此做，你摸一张牌"},"lingyu":{"name":"灵愈","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('灵愈：令一名其他角色回复一点体力',function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.hp<target.maxHp;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.recoverEffect(target,player,player);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('lingyu',result.targets[0]);\n\t\t\t\t\t\tresult.targets[0].recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",expose: \"0.2\",},}","info":"结束阶段，你可以令一名其他角色回复一点体力"},"shuiyun":{"name":"水蕴","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.shuiyun=[];\n\t\t\t\t\tplayer.storage.shuiyun_count=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.shuiyun.length>=3) return false;\n\t\t\t\t\tif(player.storage.shuiyun.length>=2&&get.is.altered('shuiyun')) return false;\n\t\t\t\t\tvar types=[];\n\t\t\t\t\tfor(var i=0;i<player.storage.shuiyun.length;i++){\n\t\t\t\t\t\ttypes.add(get.type(player.storage.shuiyun[i],'trick'));\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(!types.contains(get.type(cards[i],'trick'))){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar types=[];\n\t\t\t\t\tvar num=player.countCards('h');\n\t\t\t\t\tfor(var i=0;i<player.storage.shuiyun.length;i++){\n\t\t\t\t\t\ttypes.add(get.type(player.storage.shuiyun[i],'trick'));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCard(get.prompt2('shuiyun'),function(card){\n\t\t\t\t\t\treturn !types.contains(get.type(card,'trick'));\n\t\t\t\t\t}).ai=function(card){\n\t\t\t\t\t\treturn 11-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.$throw(result.cards);\n\t\t\t\t\t\tvar clone=result.cards[0].clone;\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\tclone.moveDelete(player);\n\t\t\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([clone]));\n\t\t\t\t\t\t},500);\n\t\t\t\t\t\tplayer.logSkill('shuiyun');\n\t\t\t\t\t\tplayer.storage.shuiyun.push(result.cards[0]);\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special);\n\t\t\t\t\t\tplayer.markSkill('shuiyun');\n\t\t\t\t\t\tgame.addVideo('storage',player,['shuiyun',get.cardsInfo(player.storage.shuiyun),'cards']);\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tfor(var i=0;i<storage.length;i++){\n\t\t\t\t\t\t\t\tstorage[i].discard();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.$throw(storage);\n\t\t\t\t\t\t\tdelete player.storage.shuiyun;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},ai: {effect: {player: function (card,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(get.is.altered('shuiyun')) return;\n\t\t\t\t\t\t\tif(card.name=='wuzhong'||card.name=='yiyi'||\n\t\t\t\t\t\t\t\tcard.name=='yuanjiao'||card.name=='shunshou') return;\n\t\t\t\t\t\t\tif(!player.needsToDiscard()){\n\t\t\t\t\t\t\t\tvar types=[];\n\t\t\t\t\t\t\t\tfor(var i=0;i<player.storage.shuiyun.length;i++){\n\t\t\t\t\t\t\t\t\ttypes.add(get.type(player.storage.shuiyun[i],'trick'));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(!types.contains(get.type(card,'trick'))){\n\t\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"2.2\",},group: [\"shuiyun5\"],}","info":"结束阶段，你可以将一张与武将牌上的牌类别均不相同的手牌置于武将牌上称为“蕴”；任意一名角色处于濒死状态时，你可以弃置一张“蕴”令其回复1点体力"},"wangyou":{"name":"忘忧","script":"{trigger: {global: \"phaseEnd\",},unique: \"true\",gainable: \"true\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\tif(player==event.player) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hasSkill('wangyou3');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar targets=[];\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i].hasSkill('wangyou3')){\n\t\t\t\t\t\t\tvar att=get.attitude(player,players[i]);\n\t\t\t\t\t\t\tif(att>0) num++;\n\t\t\t\t\t\t\telse if(att<0) num--;\n\t\t\t\t\t\t\ttargets.push(players[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('wangyou',targets),'he');\n\t\t\t\t\tnext.logSkill=['wangyou',event.targets];\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(num<=0) return 0;\n\t\t\t\t\t\tswitch(num){\n\t\t\t\t\t\t\tcase 1:return 5-get.value(card);\n\t\t\t\t\t\t\tcase 2:return 7-get.value(card);\n\t\t\t\t\t\t\tdefault:return 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\tgame.asyncDraw(event.targets);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",threaten: \"1.2\",},group: \"wangyou2\",}","info":"其他角色的结束阶段，你可以弃置一张牌，令此回合内受过伤害的所有角色各摸一张牌"},"changnian":{"name":"长念","script":"{forbid: [\"boss\"],trigger: {player: \"dieBegin\",},direct: \"true\",unique: \"true\",derivation: \"changnian2\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('changnian'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=player.getCards('hej');\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t// if(player.storage.shuiyun&&player.storage.shuiyun.length){\n\t\t\t\t\t\t// \ttarget.gainMaxHp();\n\t\t\t\t\t\t// \ttarget.recover(player.storage.shuiyun.length);\n\t\t\t\t\t\t// \tcards=cards.concat(player.storage.shuiyun);\n\t\t\t\t\t\t// \tplayer.storage.shuiyun.length=0;\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tplayer.$give(cards,target);\n\t\t\t\t\t\ttarget.gain(cards);\n\t\t\t\t\t\ttarget.addSkill('changnian2');\n\t\t\t\t\t\tplayer.logSkill('changnian',target);\n\t\t\t\t\t\ttarget.marks.changnian=target.markCharacter(player,{\n\t\t\t\t\t\t\tname:'长念',\n\t\t\t\t\t\t\tcontent:'<div class=\"skill\">【追思】</div><div>锁定技，结束阶段，你摸一张牌</div>'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tgame.addVideo('markCharacter',target,{\n\t\t\t\t\t\t\tname:'长念',\n\t\t\t\t\t\t\tcontent:'<div class=\"skill\">【追思】</div><div>锁定技，结束阶段，你摸一张牌</div>',\n\t\t\t\t\t\t\tid:'changnian',\n\t\t\t\t\t\t\ttarget:player.dataset.position\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",},}","info":"你死亡时，可以将所有牌交给一名其他角色，令其获得技能【追思】"},"luanjian":{"name":"乱剑","script":"{enable: \"phaseUse\",filterCard: {name: \"sha\",},selectCard: \"2\",check: function (card){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(lib.filter.targetEnabled({name:'sha'},player,players[i])&&\n\t\t\t\t\t\tget.effect(players[i],{name:'sha'},player)>0){\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\tif(num>1) return 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},viewAs: {name: \"sha\",},selectTarget: [1,null],filterTarget: function (card,player,target){\n\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,target);\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t},effect: {player: function (card,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(card.name=='sha'&&player.countCards('h','sha')<2&&!player.needsToDiscard()){\n\t\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(lib.filter.targetEnabled({name:'sha'},player,players[i])&&\n\t\t\t\t\t\t\t\t\tget.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t\t\tif(num>1) return 'zeroplayertarget';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},group: \"luanjian2\",}","info":"出牌阶段，你可以将两张杀当杀使用，此杀无视距离，可以指定任意名目标且有50%的机率伤害+1"},"ctianfu":{"name":"天符","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','shan')>0;\n\t\t\t\t},usable: \"1\",filterCard: {name: \"shan\",},discard: \"false\",prepare: \"give\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.hasSkill('ctianfu2');\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(_status.event.player.hp>=3) return 8-get.value(card);\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.storage.ctianfu2=cards[0];\n\t\t\t\t\ttarget.storage.ctianfu3=player;\n\t\t\t\t\tgame.addVideo('storage',target,['ctianfu2',get.cardInfo(cards[0]),'card']);\n\t\t\t\t\ttarget.addSkill('ctianfu2');\n\t\t\t\t},ai: {order: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att>=0) return 0;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,target,'thunder');\n\t\t\t\t\t\t},},expose: \"0.2\",},}","info":"出牌阶段，你可以将一张闪置于一名其他角色的武将牌上，该角色在下一次造成伤害时受到来自你的一点雷属性伤害并随机弃置一张牌，然后移去此牌"},"zhaoyao":{"name":"招摇","script":"{trigger: {global: \"phaseDrawBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.countCards('h')>0&&player.countCards('h')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.isUnseen()) return false;\n\t\t\t\t\tif(get.attitude(player,event.player)>=0) return false;\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tif(hs.length<event.player.countCards('h')) return false;\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tvar val=get.value(hs[0]);\n\t\t\t\t\t\tif(hs[i].number>=10&&val<=6) return true;\n\t\t\t\t\t\tif(hs[i].number>=8&&val<=3) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(trigger.player);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.chooseCard('将两张牌置于牌堆顶（先选择的在上）',2,'he',true);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special);\n\t\t\t\t\t\tevent.cards=result.cards;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tvar nodes=[];\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tvar cardx=ui.create.card();\n\t\t\t\t\t\tcardx.classList.add('infohidden');\n\t\t\t\t\t\tcardx.classList.add('infoflip');\n\t\t\t\t\t\tnodes.push(cardx);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.$throw(nodes,700,'nobroadcast');\n\t\t\t\t\tgame.log(player,'将'+get.cnNumber(event.cards.length)+'张牌置于牌堆顶');\n\t\t\t\t\t'step 5'\n\t\t\t\t\tfor(var i=event.cards.length-1;i>=0;i--){\n\t\t\t\t\t\tui.cardPile.insertBefore(event.cards[i],ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t},ai: {mingzhi: \"false\",expose: \"0.2\",},}","info":"其他角色的摸牌阶段开始时，你可以与其拼点，若你赢，你摸两张牌，然后将两张牌置于牌堆顶"},"sheling":{"name":"摄灵","script":"{trigger: {global: [\"useCardAfter\",\"respondAfter\",\"discardAfter\"],},filter: function (event,player){\n\t\t\t\t\tif(player!=_status.currentPhase||player==event.player) return false;\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.position(event.cards[i])=='d') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},frequent: \"check\",check: function (event){\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.position(event.cards[i])=='d'&&event.cards[i].name=='du') return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},usable: \"3\",content: function (){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tif(get.position(trigger.cards[i])=='d'){\n\t\t\t\t\t\t\tcards.push(trigger.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards,'gain2');\n\t\t\t\t},}","info":"其他角色于你的回合内因使用、打出或弃置而失去牌时，你可以获得之（每回合最多发动三次）"},"zhangmu":{"name":"障目","script":"{trigger: {player: [\"chooseToRespondBegin\",\"chooseToUseBegin\"],},filter: function (event,player){\n\t\t\t\t\tif(event.responded) return false;\n\t\t\t\t\tif(!event.filterCard({name:'shan'},player,event)) return false;\n\t\t\t\t\treturn player.countCards('h','shan')>0;\n\t\t\t\t},direct: \"true\",usable: \"1\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar goon=(get.damageEffect(player,trigger.player,player)<=0);\n\t\t\t\t\tplayer.chooseCard(get.prompt('zhangmu'),{name:'shan'}).ai=function(){\n\t\t\t\t\t\treturn goon?1:0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('zhangmu');\n\t\t\t\t\t\tplayer.showCards(result.cards);\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.responded=true;\n\t\t\t\t\t\ttrigger.result={bool:true,card:{name:'shan'}}\n\t\t\t\t\t\tplayer.addSkill('zhangmu_ai');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.counttrigger.zhangmu--;\n\t\t\t\t\t}\n\t\t\t\t},ai: {respondShan: \"true\",effect: {target: function (card,player,target,effect){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&effect<0){\n\t\t\t\t\t\t\t\tif(target.hasSkill('zhangmu_ai')) return 0;\n\t\t\t\t\t\t\t\tif(target.countCards('h')>=2) return 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每回合限一次，当你需要使用或打出一张闪时，你可以展示一张闪，视为使用或打出了此闪"},"huxi":{"name":"虎袭","script":"{enable: \"chooseToUse\",viewAs: {name: \"sha\",},precontent: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t},filterCard: function (){return false},selectCard: \"-1\",prompt: \"失去一点体力并获得一点护甲，视为使用一张杀\",ai: {order: function (){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.hp<=2) return 0;\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t},skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg!='use') return false;\n\t\t\t\t\t},respondSha: \"true\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"你可以失去一点体力并获得一点护甲，视为使用一张杀"},"longxiang":{"name":"龙翔","script":"{trigger: {player: \"shaBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.target.countCards('h')>player.countCards('h');\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\tvar hs=trigger.target.getCards('h');\n\t\t\t\t\ttrigger.target.discard(hs.randomGets(hs.length-player.countCards('h')));\n\t\t\t\t},}","info":"当你使用杀指定目标后，你可以弃置目标若干张手牌直到其手牌数与你相同"},"duxinshu":{"name":"读心","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.countCards('h')){\n\t\t\t\t\t\tplayer.chooseCardButton('读心',target.getCards('h')).ai=function(button){\n\t\t\t\t\t\t\treturn get.value(button.link)-5;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.viewHandcards(target);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=result.links[[0]];\n\t\t\t\t\t\tplayer.chooseCard('h',true,'用一张手牌替换'+get.translation(event.card)).ai=function(card){\n\t\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(event.card,target);\n\t\t\t\t\t\ttarget.gain(result.cards,player);\n\t\t\t\t\t\tplayer.$giveAuto(result.cards,target);\n\t\t\t\t\t\ttarget.$giveAuto(event.card,player);\n\t\t\t\t\t\tgame.log(player,'与',target,'交换了一张手牌');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -target.countCards('h');\n\t\t\t\t\t\t},},order: \"10\",expose: \"0.2\",},}","info":"出牌阶段限一次，你可以观看一名其他角色的手牌，然后可以用一张手牌替换其中的一张"},"feixu":{"name":"飞絮","script":"{trigger: {global: [\"useCard\",\"respond\"],},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='shan';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t},ai: {mingzhi: \"false\",threaten: \"2\",expose: \"0.2\",},}","info":"每当一名角色使用或打出一张闪，你可以令其摸一张牌"},"feizhua":{"name":"飞爪","script":"{trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(event.targets.length!=1) return false;\n\t\t\t\t\tvar target=event.targets[0];\n\t\t\t\t\tvar players=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(target,current,'pure')==1;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(player!=players[i]&&target!=players[i]&&player.canUse('sha',players[i],false)){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},prompt: function (event,player){\n\t\t\t\t\tvar targets=[];\n\t\t\t\t\tvar target=event.targets[0];\n\t\t\t\t\tvar players=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(target,current,'pure')==1;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(player!=players[i]&&target!=players[i]&&player.canUse('sha',players[i],false)){\n\t\t\t\t\t\t\ttargets.push(players[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn get.prompt('feizhua',targets);\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar target=event.targets[0];\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar players=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(target,current,'pure')==1;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(player!=players[i]&&target!=players[i]&&player.canUse('sha',players[i],false)){\n\t\t\t\t\t\t\tnum+=get.effect(players[i],{name:'sha'},player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar target=trigger.targets[0];\n\t\t\t\t\tvar players=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(target,current,'pure')==1;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(player!=players[i]&&target!=players[i]&&player.canUse('sha',players[i],false)){\n\t\t\t\t\t\t\ttrigger.targets.push(players[i]);\n\t\t\t\t\t\t\tplayer.line(players[i],'green');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用一张杀时，你可以将与目标相邻的角色追加为额外目标"},"leiyu":{"name":"雷狱","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('h',{color:'black'})) return false;\n\t\t\t\t\tif(player.storage.leiyu){\n\t\t\t\t\t\tfor(var i=0;i<player.storage.leiyu.length;i++){\n\t\t\t\t\t\t\tif(player.storage.leiyu[i].isAlive()) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tfor(var i=0;i<player.storage.leiyu.length;i++){\n\t\t\t\t\t\tif(player.storage.leiyu[i].isDead()){\n\t\t\t\t\t\t\tplayer.storage.leiyu.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar num2=0;\n\t\t\t\t\tfor(var i=0;i<player.storage.leiyu.length;i++){\n\t\t\t\t\t\tif(!player.storage.leiyu[i].isIn()) continue;\n\t\t\t\t\t\tvar eff=get.effect(player.storage.leiyu[i],{name:'jingleishan',nature:'thunder'},player,player);\n\t\t\t\t\t\tnum+=eff;\n\t\t\t\t\t\tif(eff>0){\n\t\t\t\t\t\t\tnum2++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(eff<0){\n\t\t\t\t\t\t\tnum2--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('leiyu',player.storage.leiyu),{color:'black'});\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(num>0&&num2>=2){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill=['leiyu',player.storage.leiyu];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.leiyu.sort(lib.sort.seat);\n\t\t\t\t\t\tplayer.useCard({name:'jingleishan',nature:'thunder'},player.storage.leiyu).animate=false;\n\t\t\t\t\t}\n\t\t\t\t},group: [\"leiyu2\",\"leiyu4\"],ai: {threaten: \"1.3\",},}","info":"结束阶段，你可以弃置一张黑色手牌，视为对本回合内所有成为过你的卡牌目标的角色使用一张惊雷闪"},"lingxue":{"name":"灵血","script":"{trigger: {player: \"recoverEnd\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t},}","info":"锁定技，每当你回复一点体力，你获得一点护甲"},"feng":{"name":"风","script":"{unique: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.feng=0;\n\t\t\t\t},mark: \"true\",intro: {content: \"已累计摸#次牌\",},trigger: {player: \"drawBegin\",},forced: \"true\",popup: \"false\",priority: \"5\",content: function (){\n\t\t\t\t\tif(player.storage.feng<2){\n\t\t\t\t\t\tplayer.storage.feng++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\tplayer.storage.feng=0;\n\t\t\t\t\t\tplayer.logSkill('feng');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t},}","info":"锁定技，当你累计摸2次牌后，你下一次摸牌时摸牌数+1"},"ya":{"name":"雅","script":"{unique: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.ya=0;\n\t\t\t\t},mark: \"true\",intro: {content: \"已累计受到#次伤害\",},trigger: {player: \"damageBegin\",},filter: function (event,player){\n\t\t\t\t\tif(player.storage.ya==2) return event.num>0;\n\t\t\t\t\treturn true;\n\t\t\t\t},forced: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\tif(player.storage.ya<2){\n\t\t\t\t\t\tplayer.storage.ya++;\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.num>0){\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\tplayer.storage.ya=0;\n\t\t\t\t\t\tplayer.logSkill('ya');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t},}","info":"锁定技，当你累计受到2次伤害后，你下一次受到的伤害-1"},"song":{"name":"颂","script":"{unique: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.song=0;\n\t\t\t\t},mark: \"true\",intro: {content: \"已累计造成#次伤害\",},trigger: {source: \"damageBegin\",},forced: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\tif(player.storage.song<2){\n\t\t\t\t\t\tplayer.storage.song++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\tplayer.storage.song=0;\n\t\t\t\t\t\tplayer.logSkill('song');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t},}","info":"锁定技，当你累计造成2次伤害后，你下一次造成的伤害+1"},"longxi":{"name":"龙息","script":"{trigger: {player: [\"chooseToRespondBegin\",\"chooseToUseBegin\"],},forced: \"true\",popup: \"false\",max: \"2\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase!=player;\n\t\t\t\t},priority: \"101\",content: function (){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tvar max=Math.min(ui.cardPile.childNodes.length,lib.skill.longxi.max);\n\t\t\t\t\tfor(var i=0;i<max;i++){\n\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\tif(trigger.filterCard(card,player,trigger)){\n\t\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tplayer.gain(cards,'draw');\n\t\t\t\t\t\tplayer.logSkill('longxi');\n\t\t\t\t\t\tgame.log(player,'获得了'+get.cnNumber(cards.length)+'张牌');\n\t\t\t\t\t}\n\t\t\t\t},ai: {respondSha: \"true\",respondShan: \"true\",effect: {target: function (card,player,target,effect){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')) return 0.7;\n\t\t\t\t\t\t\tif(get.tag(card,'respondSha')) return 0.7;\n\t\t\t\t\t\t},},},hiddenCard: function (player,name){\n\t\t\t\t\tif(_status.currentPhase==player) return false;\n\t\t\t\t\tvar max=Math.min(ui.cardPile.childNodes.length,lib.skill.longxi.max);\n\t\t\t\t\tfor(var i=0;i<max;i++){\n\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\tif(card.name==name) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},}","info":"锁定技，在回合外每当你需要使用或打出一张卡牌时，若牌堆顶的前两张中有可使用或打出的牌，你立即获得之"},"zhuyue":{"name":"逐月","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(get.is.altered('zhuyue')){\n\t\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.color(card)=='black'&&get.type(card)!='basic';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn player.countCards('h',{type:'basic'})<player.countCards('he');\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.zhuyue=[];\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\tif(get.is.altered('zhuyue')){\n\t\t\t\t\t\treturn get.type(card)!='basic'&&get.color(card)=='black';\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t}\n\t\t\t\t},selectTarget: [1,2],filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t},usable: \"1\",locked: \"false\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},multitarget: \"true\",multiline: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\tvar target=targets[0];\n\t\t\t\t\tvar cs=target.getCards('he');\n\t\t\t\t\tif(cs.length){\n\t\t\t\t\t\ttarget.discard(cs.randomGet());\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.zhuyue.add(target);\n\t\t\t\t\tif(targets.length<2){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar target=targets[1];\n\t\t\t\t\tvar cs=target.getCards('he');\n\t\t\t\t\tif(cs.length){\n\t\t\t\t\t\ttarget.discard(cs.randomGet());\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.zhuyue.add(target);\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!target.countCards('he')) return -0.2;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},order: \"10\",threaten: \"1.2\",exoise: \"0.2\",},mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(card.name=='sha'&&player.storage.zhuyue&&player.storage.zhuyue.contains(target)){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},selectTarget: function (card,player,range){\n\t\t\t\t\t\tif(card.name=='sha'&&player.storage.zhuyue&&player.storage.zhuyue.length){\n\t\t\t\t\t\t\trange[1]=-1;\n\t\t\t\t\t\t\trange[0]=-1;\n\t\t\t\t\t\t}\n\t\t\t\t\t},playerEnabled: function (card,player,target){\n\t\t\t\t\t\tif(card.name=='sha'&&player.storage.zhuyue&&player.storage.zhuyue.length&&!player.storage.zhuyue.contains(target)){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},intro: {content: \"players\",},group: \"zhuyue2\",}","info":"出牌阶段限一次，你可以弃置一张非基本牌并指定至多两个目标各随机弃置一张牌，若如此做，你本回使用的杀须指定选中角色为目标"},"guanri":{"name":"贯日","script":"{unique: \"true\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.guanri&&player.countCards('h',{color:'red'})>=2;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},selectCard: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.hp>=player.hp;\n\t\t\t\t},intro: {content: \"limited\",},line: \"fire\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.storage.guanri=true;\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.damage(2,'fire');\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(target.isAlive()){\n\t\t\t\t\t\ttarget.discard(target.getCards('e'));\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,player,target,'fire');\n\t\t\t\t\t\t\tif(player.hp>2) return eff;\n\t\t\t\t\t\t\tif(player.hp==2&&target.hp==2) return eff;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},expose: \"0.5\",},}","info":"限制技，你可以弃置两张红色手牌并流失一点体力，然后对一名体力值不少于你的其他角色造成两点火焰伤害并弃置其所有装备牌"},"tannang":{"name":"探囊","script":"{enable: \"chooseToUse\",usable: \"1\",locked: \"false\",filterCard: function (card){\n\t\t\t\t\treturn get.suit(card)=='club';\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{suit:'club'});\n\t\t\t\t},viewAs: {name: \"shunshou\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('h',{suit:'club'})) return false;\n\t\t\t\t},prompt: \"将一张装备牌当顺手牵羊使用\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('h',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\tif(player.countCards('h')<player.hp){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 2-get.equipValue(card);\n\t\t\t\t},mod: {targetInRange: function (card,player,target,now){\n\t\t\t\t\t\tif(card.name=='shunshou') return true;\n\t\t\t\t\t},},ai: {order: \"9.5\",threaten: \"1.5\",wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,player)>0&&get.attitude(viewer,target)>0){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"7.5\",useful: \"4\",value: \"9\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0) return (target.countCards('he',function(card){\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\n\t\t\t\t\t\t\t})>0)?-1.5:1.5;\n\t\t\t\t\t\t\tvar js=target.getCards('j');\n\t\t\t\t\t\t\tif(js.length){\n\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\n\t\t\t\t\t\t\t\t//if(jj.name=='shunshou') return 3;\n\t\t\t\t\t\t\t\tif(js.length==1&&get.effect(target,jj,target,player)>=0){\n\t\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&!target.countCards('he',function(card){\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.attitude(player,target)>1){\n\t\t\t\t\t\t\t\tvar js=target.getCards('j');\n\t\t\t\t\t\t\t\tif(js.length){\n\t\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\n\t\t\t\t\t\t\t\t\t//if(jj.name=='shunshou') return 1;\n\t\t\t\t\t\t\t\t\tif(js.length==1&&get.effect(target,jj,target,player)>=0){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},tag: {loseCard: \"1\",gain: \"1\",},},}","info":"出牌阶段限一次，你可以将一张梅花手牌当顺手牵羊使用；你的顺手牵羊无距离限制"},"tuoqiao":{"name":"烟瘴","script":"{enable: \"chooseToUse\",filterCard: {color: \"black\",},position: \"he\",viewAs: {name: \"shihuifen\",},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},ai: {shihuifen: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t\t},order: \"1\",value: [5,1],useful: [5,1],tag: {respond: \"1\",respondShan: \"1\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.countCards('h')>=3||target.needsToDiscard()) return -1.5;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"你可以将一张黑色牌当作石灰粉使用"},"tianxian":{"name":"天弦","script":"{mod: {targetInRange: function (card,player,target,now){\n\t\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\t},selectTarget: function (card,player,range){\n\t\t\t\t\t\tif(card.name=='sha'&&range[1]!=-1) range[1]=Infinity;\n\t\t\t\t\t},},priority: \"5.5\",trigger: {player: \"useCardToBefore\",},filter: function (event){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttrigger.target.judge(function(card){\n\t\t\t\t\t\treturn get.color(card)=='black'?1:0;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，你的杀无视距离且可指定任意多个目标，目标须进行一次判定，若结果为黑色则取消之"},"runxin":{"name":"润心","script":"{trigger: {player: [\"useCard\",\"respondEnd\"],},direct: \"true\",filter: function (event){\n\t\t\t\t\tif(get.suit(event.card)=='heart'){\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar noneed=(trigger.card.name=='tao'&&trigger.targets[0]==player&&player.hp==player.maxHp-1);\n\t\t\t\t\tplayer.chooseTarget(get.prompt('runxin'),function(card,player,target){\n\t\t\t\t\t\treturn target.hp<target.maxHp\n\t\t\t\t\t}).set('autodelay',true).ai=function(target){\n\t\t\t\t\t\tvar num=get.attitude(player,target);\n\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\tif(noneed&&player==target){\n\t\t\t\t\t\t\t\tnum=0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target.hp==1){\n\t\t\t\t\t\t\t\tnum+=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target.hp==2){\n\t\t\t\t\t\t\t\tnum+=1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('runxin',result.targets);\n\t\t\t\t\t\tresult.targets[0].recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",threaten: \"1.5\",},}","info":"每当你使用或打出一张红桃牌，你可以令一名角色回复一点体力"},"zhimeng":{"name":"织梦","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",locked: \"true\",unique: \"true\",gainable: \"true\",group: \"zhimeng3\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('zhimeng'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar num=get.attitude(player,target);\n\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\tif(player==target){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tnum+=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==2){\n\t\t\t\t\t\t\t\tnum+=1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tif(get.is.altered('zhimeng')){\n\t\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar card=get.cards()[0];\n\t\t\t\t\t\t\ttarget.$draw(card);\n\t\t\t\t\t\t\ttarget.storage.zhimeng2=card;\n\t\t\t\t\t\t\tgame.addVideo('storage',target,['zhimeng2',get.cardInfo(card),'card']);\n\t\t\t\t\t\t\ttarget.addSkill('zhimeng2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('zhimeng',target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"结束阶段，你可以选择一名其他角色将牌堆顶的一张牌置于该角色的武将牌上，直到你的下个准备阶段将其收入手牌。当一名角色武将牌上有织梦牌时，每当其成为与此牌类型相同的卡牌的目标，可以摸一张牌"},"xuanning":{"name":"玄凝","script":"{group: [\"xuanning1\",\"xuanning2\"],intro: {content: \"mark\",},ai: {threaten: \"0.9\",},}","info":"出牌阶段，你可以弃置一基本牌，获得至多3个玄凝标记。当你受到伤害时，你失去一枚玄凝标记，伤害来源随机弃置一张牌"},"poyun":{"name":"破云","script":"{trigger: {source: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn player.storage.xuanning>0&&event.player.countCards('he')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.discardPlayerCard(trigger.player,'he',get.prompt('poyun',trigger.player),[1,get.is.altered('poyun')?1:2]).logSkill=['poyun',trigger.player];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.xuanning--;\n\t\t\t\t\t\tif(!player.storage.xuanning){\n\t\t\t\t\t\t\tplayer.unmarkSkill('xuanning');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.syncStorage('xuanning');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",},}","info":"每当你造成一次伤害，你可以弃置一枚玄凝标记，然后弃置对方两张牌"},"qianfang":{"name":"千方","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.xuanning&&player.countCards('he')+player.storage.xuanning>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\t// trigger.cancel();\n\t\t\t\t\tvar ainum=0;\n\t\t\t\t\tvar num=3-player.storage.xuanning;\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tevent.targets=[];\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player&&!players[i].isOut()&&\n\t\t\t\t\t\t\tlib.filter.targetEnabled({name:'wanjian'},player,players[i])){\n\t\t\t\t\t\t\tainum+=get.effect(players[i],{name:'wanjian'});\n\t\t\t\t\t\t\tevent.targets.push(players[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tvar next=player.chooseToDiscard(num,get.prompt2('qianfang'),'he');\n\t\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\t\tif(ainum>=0){\n\t\t\t\t\t\t\t\tswitch(num){\n\t\t\t\t\t\t\t\t\tcase 1:return 8-get.value(card);\n\t\t\t\t\t\t\t\t\tcase 2:return 6-get.value(card);\n\t\t\t\t\t\t\t\t\tcase 3:return 4-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnext.logSkill='qianfang';\n\t\t\t\t\t\tevent.logged=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('qianfang')).ai=function(){\n\t\t\t\t\t\t\treturn ainum>=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.xuanning=0;\n\t\t\t\t\t\tplayer.unmarkSkill('xuanning');\n\t\t\t\t\t\tif(!event.logged){\n\t\t\t\t\t\t\tplayer.logSkill('qianfang');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.useCard({name:'wanjian'},'qianfang',event.targets);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",threaten: \"1.5\",},group: \"qianfang_draw\",subSkill: {draw: {trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\t\t\tif(!event.player.isEnemiesOf(player)) return false;\n\t\t\t\t\t\t\treturn event.parent.skill=='qianfang';\n\t\t\t\t\t\t},popup: \"false\",content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"准备阶段，若你有玄凝标记，你可以弃置3-X张牌和所有玄凝标记，视为使用了一张【万箭齐发】，每当一名敌方角色因此牌受到伤害，你摸一张牌。X为你的玄凝标记数"},"xuanyan":{"name":"玄炎","script":"{group: [\"xuanyan2\",\"xuanyan3\"],}","info":"锁定技，你的火属性伤害+1；你造成火属性伤害后流失1点体力"},"ningbin":{"name":"凝冰","script":"{trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.nature=='thunder';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'thunderDamage')){\n\t\t\t\t\t\t\t\tif(target.hp<=1||!target.hasSkill('xfenxin')) return [0,0];\n\t\t\t\t\t\t\t\treturn [0,1.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你受到1次雷属性伤害，你回复1点体力"},"xfenxin":{"name":"焚心","script":"{trigger: {player: \"changeHp\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.num!=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(get.is.altered('xfenxin')){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(Math.abs(trigger.num));\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(get.tag(card,'thunderDamage')) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')||get.tag(card,'recover')){\n\t\t\t\t\t\t\t\treturn [1,0.2];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},group: \"xfenxin2\",}","info":"锁定技，每当你的体力值发生改变，你摸等量的牌；每当你杀死一名角色，你增加一点体力上限并回复一点体力"},"xunying":{"name":"迅影","script":"{trigger: {player: \"shaAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.canUse('sha',event.target)&&player.hasSha()&&event.target.isIn();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(player.hasSkill('jiu')){\n\t\t\t\t\t\tplayer.removeSkill('jiu');\n\t\t\t\t\t\tevent.jiu=true;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseToUse(get.prompt('xunying'),{name:'sha'},trigger.target,-1).logSkill='xunying';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool);\n\t\t\t\t\telse if(event.jiu){\n\t\t\t\t\t\tplayer.addSkill('jiu');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你使用杀对一名目标结算完毕后，你可以继续对目标使用杀"},"liefeng":{"name":"冽风","script":"{trigger: {player: \"useCard\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase==player&&[2,3,4].contains(player.countUsed());\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar skill;\n\t\t\t\t\tswitch(player.countUsed()){\n\t\t\t\t\t\tcase 2:skill='yanzhan';break;\n\t\t\t\t\t\tcase 3:skill='tianjian';break;\n\t\t\t\t\t\tcase 4:skill='yufeng';break;\n\t\t\t\t\t}\n\t\t\t\t\tif(skill&&!player.hasSkill(skill)){\n\t\t\t\t\t\tplayer.addTempSkill(skill);\n\t\t\t\t\t\tplayer.popup(skill);\n\t\t\t\t\t\tgame.log(player,'获得了','【'+get.translation(skill)+'】');\n\t\t\t\t\t\tif(skill=='yufeng'){\n\t\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\t\tif(nh<2){\n\t\t\t\t\t\t\t\tplayer.draw(2-nh);\n\t\t\t\t\t\t\t\tplayer.addSkill('counttrigger');\n\t\t\t\t\t\t\t\tif(!player.storage.counttrigger){\n\t\t\t\t\t\t\t\t\tplayer.storage.counttrigger={};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplayer.storage.counttrigger.yufeng=1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {player: function (card,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(get.type(card)=='basic') return;\n\t\t\t\t\t\t\tif(get.tag(card,'gain')) return;\n\t\t\t\t\t\t\tif(get.value(card,player,'raw')>=7) return;\n\t\t\t\t\t\t\tif(player.hp<=2) return;\n\t\t\t\t\t\t\tif(player.needsToDiscard()) return;\n\t\t\t\t\t\t\tif(player.countUsed()>=2) return;\n\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t},},},}","info":"锁定技，当你在回合内使用第二张牌时，你本回合获得【炎斩】；当你在回合内使用第三张牌时，你本回合获得【天剑】；当你在回合内使用第四张牌时，你本回合获得【御风】"},"txianqu":{"name":"仙音","script":"{trigger: {source: \"damageBefore\",},logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('txianqu2')) return false;\n\t\t\t\t\tvar evt=event.getParent('phaseUse');\n\t\t\t\t\tif(evt&&evt.player==player) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar target=event.player;\n\t\t\t\t\tif(get.attitude(player,target)>=0||get.damageEffect(target,player,player)<=0) return true;\n\t\t\t\t\tif(target.hp>player.hp&&player.isDamaged()) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.addTempSkill('txianqu2');\n\t\t\t\t},ai: {jueqing: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!arg) return false;\n\t\t\t\t\t\tif(player.hasSkill('txianqu2')) return false;\n\t\t\t\t\t\tif(get.attitude(player,arg)>0) return false;\n\t\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\t\tif(evt&&evt.player==player) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\tif(player.hp==player.maxHp||get.recoverEffect(player,player,player)<=0) return 'zeroplayertarget';\n\t\t\t\t\t\t\t\treturn [0,0,0,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，当你即将造成伤害时，你可以防止之，然后摸两张牌并回复一点体力"},"qiongguang":{"name":"穹光","script":"{trigger: {player: \"phaseDiscardEnd\",},filter: function (event,player){\n\t\t\t\t\treturn event.cards&&event.cards.length>1\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.targets=player.getEnemies().sortBySeat();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tplayer.line(event.targets.shift().getDebuff(false).addExpose(0.1),'green');\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {threaten: \"2\",expose: \"0.2\",effect: {player: function (card,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(_status.event.name!='chooseToUse'||_status.event.player!=player) return;\n\t\t\t\t\t\t\tvar num=player.needsToDiscard();\n\t\t\t\t\t\t\tif(num>2||num==1) return;\n\t\t\t\t\t\t\tif(get.type(card)=='basic'&&num!=2) return;\n\t\t\t\t\t\t\tif(get.tag(card,'gain')) return;\n\t\t\t\t\t\t\tif(get.value(card,player,'raw')>=7) return;\n\t\t\t\t\t\t\tif(player.hp<=2) return;\n\t\t\t\t\t\t\tif(!player.hasSkill('jilue')||player.storage.renjie==0){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"弃牌阶段结束时，若你弃置了至少两张牌，你可以对所有敌方角色施加一个随机的负面效果"},"yuexing":{"name":"越行","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.yuexing2=target;\n\t\t\t\t\tplayer.addTempSkill('yuexing2');\n\t\t\t\t\ttarget.storage.yuexing2=player;\n\t\t\t\t\ttarget.addTempSkill('yuexing2');\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.hasSkill('minsha')) return 6.5;\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hasSkill('minsha')&&player.countCards('he')>=3&&\n\t\t\t\t\t\t\t\ttarget.hp>1&&get.damageEffect(target,player,player,'thunder')>0){\n\t\t\t\t\t\t\t\tvar num1=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\tif(get.distance(target,current)<=1&&current!=player&&current!=target){\n\t\t\t\t\t\t\t\t\t\treturn -get.sgn(get.attitude(player,current));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvar num2=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\tif(get.distance(player,current)<=1&&current!=player&&current!=target){\n\t\t\t\t\t\t\t\t\t\treturn -get.sgn(get.attitude(player,current));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif(num2>=num1) return 0;\n\t\t\t\t\t\t\t\treturn 2*(num2-num1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -_status.event.getRand();\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以指定一名角色，本阶段内将你与该角色到其他角色的距离基数互换"},"minsha":{"name":"冥煞","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",selectCard: \"2\",position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>=2;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.hp>1;\n\t\t\t\t},line: \"thunder\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.damage('thunder');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(target,current)<=1&&current!=target&&current!=player;\n\t\t\t\t\t}).sortBySeat(target);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.targets.shift().randomDiscard(false);\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"6\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,player,'thunder')>0){\n\t\t\t\t\t\t\t\tif(target==player.storage.yuexing2){\n\t\t\t\t\t\t\t\t\treturn 10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar num=1+game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\tif(get.distance(target,current)<=1&&current!=player&&current!=target){\n\t\t\t\t\t\t\t\t\t\treturn -get.sgn(get.attitude(player,current));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.hp<player.hp){\n\t\t\t\t\t\t\t\t\tnum+=0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(player.needsToDiscard()) num+=0.1;\n\t\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置两张牌，对一名体力值大于1的其他角色造成一点雷属性伤害，然后距离目标1以内的所有其他角色随机弃置一张牌"},"lingquan":{"name":"灵泉","script":"{trigger: {player: \"phaseEnd\",},forced: \"true\",skillAnimation: \"true\",animationColor: \"water\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.roundNumber>=3&&player.countUsed()>player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('lingquan');\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\tplayer.addSkill('shuiyun');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.createTrigger('phaseEnd','shuiyun',player,trigger);\n\t\t\t\t},}","info":"觉醒技，结束阶段，若游戏轮数不小于3且你本回合使用的牌数大于你的体力值，你摸三张牌，然后获得技能【水蕴】"},"shenwu":{"name":"神舞","script":"{trigger: {global: \"phaseEnd\",},forced: \"true\",skillAnimation: \"true\",animationColor: \"water\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.shuiyun_count>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('shenwu');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.addSkill('huimeng');\n\t\t\t\t},}","info":"觉醒技，在一名角色的结束阶段，若你本局至少发动过3次【水蕴】，你增加一点体力和体力上限并获得两点护甲，然后获得技能【回梦】"},"xuanmo":{"name":"玄墨","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: function (card){\n\t\t\t\t\tvar type=get.type(card,'trick');\n\t\t\t\t\treturn type=='basic'||type=='equip'||type=='trick';\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},discard: \"false\",prepare: \"throw\",content: function (){\n\t\t\t\t\tgame.log(player,'将',cards,'置于牌堆顶');\n\t\t\t\t\tui.cardPile.insertBefore(cards[0],ui.cardPile.firstChild);\n\t\t\t\t\tvar list=get.inpile(get.type(cards[0],'trick'),'trick').randomGets(2);\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tlist[i]=game.createCard(list[i]);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(list,'draw');\n\t\t\t\t},ai: {threaten: \"1.5\",order: \"5\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以将一张手牌置于牌堆顶并随机获得两张与之类别相同的牌"},"danqing":{"name":"丹青","script":"{trigger: {player: \"phaseEnd\",},init: function (player){\n\t\t\t\t\tplayer.storage.danqing=[];\n\t\t\t\t},mark: \"true\",direct: \"true\",intro: {content: function (storage){\n\t\t\t\t\t\tif(!storage.length){\n\t\t\t\t\t\t\treturn '未使用或打出过有花色的牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar str='已使用过'+get.translation(storage[0]+'2');\n\t\t\t\t\t\t\tfor(var i=1;i<storage.length;i++){\n\t\t\t\t\t\t\t\tstr+='、'+get.translation(storage[i]+'2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr+='牌';\n\t\t\t\t\t\t\treturn str;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},filter: function (event,player){\n\t\t\t\t\treturn player.storage.danqing.length==4;\n\t\t\t\t},ai: {threaten: \"1.2\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.danqing.length=0;\n\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\tplayer.chooseTarget(get.prompt('danqing'),[1,get.is.altered('danqing')?2:4]).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('danqing',result.targets);\n\t\t\t\t\t\tfor(var i=0;i<result.targets.length;i++){\n\t\t\t\t\t\t\tresult.targets[i].getBuff(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},group: \"danqing_count\",}","info":"结束阶段，若你累计使用了4张花色不同的牌，你可以选择至多4名角色随机获得一个正面效果"},"feixia":{"name":"飞霞","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {color: \"red\",},position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'red'})>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar targets=player.getEnemies();\n\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\tvar target=targets.randomGet();\n\t\t\t\t\t\ttarget.addExpose(0.2);\n\t\t\t\t\t\tplayer.useCard({name:'sha'},target,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"2.9\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张红色牌视为对一名随机敌人使用一张不计入出杀次数的杀"},"lueying":{"name":"掠影","script":"{trigger: {player: \"shaBegin\",},filter: function (event,player){\n\t\t\t\t\tif(event.target.countCards('he')>0){\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current!=event.target&&current.countCards('he');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"target\",usable: \"1\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar card=trigger.target.getCards('he').randomGet();\n\t\t\t\t\tplayer.gain(card,trigger.target);\n\t\t\t\t\tif(get.position(card)=='e'){\n\t\t\t\t\t\ttrigger.target.$give(card,player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.target.$giveAuto(card,player);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current!=trigger.target&&current.countCards('he');\n\t\t\t\t\t})){\n\t\t\t\t\t\ttrigger.target.chooseTarget(function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player&&target!=_status.event.parent.player&&target.countCards('he')>0;\n\t\t\t\t\t\t},'选择一名角色并令'+get.translation(player)+'弃置其一张牌').ai=function(target){\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.target.line(result.targets[0],'green');\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],true,'he');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",expose: \"0.2\",},}","info":"每当你使用一张杀，你可以随机获得目标的一张牌，然后目标可以指定一名其他角色，你弃置该角色一张牌（每回合限发动一次，没有弃牌目标时无法发动）"},"zongyu":{"name":"纵雨","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {color: \"black\",},filter: function (event,player){\n\t\t\t\t\treturn lib.card.feibiao&&player.countCards('he',{color:'black'});\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=player.getEnemies();\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.useCard({name:'feibiao'},list.randomGets(2));\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",order: \"6\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张黑色手牌，视为使用一张飞镖，随机指定两名敌方角色为目标"},"fanling":{"name":"返灵","script":"{trigger: {global: \"loseHpAfter\",},forced: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"锁定技，每当一名角色失去体力，你回复一点体力，每回合只能发动一次"},"yanzhan":{"name":"炎斩","script":"{enable: \"phaseUse\",viewAs: {name: \"sha\",nature: \"fire\",},usable: \"1\",position: \"he\",viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t},filterCard: {color: \"red\",},check: function (card){\n\t\t\t\t\tif(get.suit(card)=='heart') return 7-get.value(card);\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},onuse: function (result){\n\t\t\t\t\tif(result.targets){\n\t\t\t\t\t\tfor(var i=0;i<result.targets.length;i++){\n\t\t\t\t\t\t\tresult.targets[i].addTempSkill('yanzhan3');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},group: \"yanzhan2\",ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.15;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以将一张红色牌当作火杀使用，此杀只能用与之花色相同的闪响应；若此杀造成了伤害，你本回合可以额外使用一张杀"},"fenshi":{"name":"焚世","script":"{unique: \"true\",skillAnimation: \"true\",animationColor: \"fire\",trigger: {player: \"dyingAfter\",},forced: \"true\",mark: \"true\",derivation: \"longhuo\",intro: {content: \"limited\",},content: function (){\n\t\t\t\t\tplayer.awakenSkill('fenshi');\n\t\t\t\t\tplayer.changeHujia(2);\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.addSkill('longhuo');\n\t\t\t\t},}","info":"觉醒技，当你解除濒死状态时，你获得两点护甲，摸两张牌，然后获得技能龙火"},"ywuhun":{"name":"雾魂","script":"{trigger: {player: \"phaseBefore\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.parent.name!='ywuhun';\n\t\t\t\t},intro: {content: \"回合结束后，场上及牌堆中的牌将恢复到回合前的状态\",},video: function (player,data){\n\t\t\t\t\tfor(var i in data){\n\t\t\t\t\t\tvar current=game.playerMap[i];\n\t\t\t\t\t\tcurrent.node.handcards1.innerHTML='';\n\t\t\t\t\t\tcurrent.node.handcards2.innerHTML='';\n\t\t\t\t\t\tcurrent.node.equips.innerHTML='';\n\t\t\t\t\t\tcurrent.node.judges.innerHTML='';\n\t\t\t\t\t\tcurrent.directgain(get.infoCards(data[i].h));\n\t\t\t\t\t\tvar es=get.infoCards(data[i].e);\n\t\t\t\t\t\tfor(var j=0;j<es.length;j++){\n\t\t\t\t\t\t\tcurrent.$equip(es[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar js=get.infoCards(data[i].j);\n\t\t\t\t\t\tfor(var j=0;j<js.length;j++){\n\t\t\t\t\t\t\tcurrent.node.judges.appendChild(js[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar handcards1,handcards2,judges,equips,viewAs,i,j;\n\t\t\t\t\tevent.data=[];\n\t\t\t\t\tevent.cardPile=[];\n\n\t\t\t\t\tfor(i=0;i<game.players.length;i++){\n\t\t\t\t\t\tviewAs=[];\n\t\t\t\t\t\thandcards1=[];\n\t\t\t\t\t\thandcards2=[];\n\t\t\t\t\t\tjudges=[];\n\t\t\t\t\t\tequips=[];\n\n\t\t\t\t\t\tfor(j=0;j<game.players[i].node.handcards1.childNodes.length;j++)\n\t\t\t\t\t\t\thandcards1.push(game.players[i].node.handcards1.childNodes[j]);\n\n\t\t\t\t\t\tfor(j=0;j<game.players[i].node.handcards2.childNodes.length;j++)\n\t\t\t\t\t\t\thandcards2.push(game.players[i].node.handcards2.childNodes[j]);\n\n\t\t\t\t\t\tfor(j=0;j<game.players[i].node.judges.childNodes.length;j++){\n\t\t\t\t\t\t\tviewAs.push(game.players[i].node.judges.childNodes[j].viewAs);\n\t\t\t\t\t\t\tjudges.push(game.players[i].node.judges.childNodes[j]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor(j=0;j<game.players[i].node.equips.childNodes.length;j++)\n\t\t\t\t\t\t\tequips.push(game.players[i].node.equips.childNodes[j]);\n\n\t\t\t\t\t\tevent.data.push({\n\t\t\t\t\t\t\tplayer:game.players[i],\n\t\t\t\t\t\t\thandcards1:handcards1,\n\t\t\t\t\t\t\thandcards2:handcards2,\n\t\t\t\t\t\t\tjudges:judges,\n\t\t\t\t\t\t\tequips:equips,\n\t\t\t\t\t\t\tviewAs:viewAs,\n\t\t\t\t\t\t\tvalue:handcards1.length+handcards2.length+equips.length-judges.length\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<ui.cardPile.childElementCount;i++){\n\t\t\t\t\t\tevent.cardPile.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.markSkill('ywuhun');\n\t\t\t\t\tplayer.addSkill('ywuhun_end');\n\t\t\t\t\tplayer.phase('ywuhun');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.removeSkill('ywuhun_end');\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.animate.window(1);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tplayer.unmarkSkill('ywuhun');\n\t\t\t\t\tvar storage=event.data;\n\t\t\t\t\tfor(var i=0;i<storage.length;i++){\n\t\t\t\t\t\tvar current=storage[i].player;\n\t\t\t\t\t\tif(current.isAlive()){\n\t\t\t\t\t\t\tcurrent.removeEquipTrigger();\n\t\t\t\t\t\t\tvar cards=current.getCards('hej');\n\t\t\t\t\t\t\tfor(var j=0;j<cards.length;j++){\n\t\t\t\t\t\t\t\tcards[j].discard();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tvar storage=event.data;\n\t\t\t\t\tvar current;\n\t\t\t\t\tvar i,j;\n\t\t\t\t\tfor(i=0;i<storage.length;i++){\n\t\t\t\t\t\tcurrent=storage[i].player;\n\t\t\t\t\t\tif(current.isAlive()){\n\t\t\t\t\t\t\tfor(j=0;j<storage[i].handcards1.length;j++){\n\t\t\t\t\t\t\t\tif(storage[i].handcards1[j].parentNode==ui.discardPile||\n\t\t\t\t\t\t\t\t\tstorage[i].handcards1[j].parentNode==ui.cardPile){\n\t\t\t\t\t\t\t\t\tcurrent.node.handcards1.appendChild(storage[i].handcards1[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tcurrent.node.handcards1.appendChild(game.createCard(storage[i].handcards1[j]));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(j=0;j<storage[i].handcards2.length;j++){\n\t\t\t\t\t\t\t\tif(storage[i].handcards2[j].parentNode==ui.discardPile||\n\t\t\t\t\t\t\t\t\tstorage[i].handcards2[j].parentNode==ui.cardPile){\n\t\t\t\t\t\t\t\t\tcurrent.node.handcards2.appendChild(storage[i].handcards2[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tcurrent.node.handcards2.appendChild(game.createCard(storage[i].handcards2[j]));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(j=0;j<storage[i].equips.length;j++){\n\t\t\t\t\t\t\t\tif(storage[i].equips[j].parentNode==ui.discardPile||\n\t\t\t\t\t\t\t\t\tstorage[i].equips[j].parentNode==ui.cardPile){\n\t\t\t\t\t\t\t\t\tstorage[i].equips[j].style.transform='';\n\t\t\t\t\t\t\t\t\tcurrent.$equip(storage[i].equips[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tcurrent.$equip(game.createCard(storage[i].equips[j]));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(j=0;j<storage[i].judges.length;j++){\n\t\t\t\t\t\t\t\tif(storage[i].judges[j].parentNode==ui.discardPile||\n\t\t\t\t\t\t\t\t\tstorage[i].judges[j].parentNode==ui.cardPile){\n\t\t\t\t\t\t\t\t\tstorage[i].judges[j].style.transform='';\n\t\t\t\t\t\t\t\t\tstorage[i].judges[j].viewAs=storage[i].viewAs[j];\n\t\t\t\t\t\t\t\t\tif(storage[i].judges[j].viewAs&&storage[i].judges[j].viewAs!=storage[i].judges[j].name&&storage[i].judges[j].classList.contains('fullskin')){\n\t\t\t\t\t\t\t\t\t\tstorage[i].judges[j].classList.add('fakejudge');\n\t\t\t\t\t\t\t\t\t\tstorage[i].judges[j].node.background.innerHTML=lib.translate[storage[i].judges[j].viewAs+'_bg']||get.translation(storage[i].judges[j].viewAs)[0]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcurrent.node.judges.appendChild(storage[i].judges[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrent.update();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar data={};\n\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\tdata[game.players[i].dataset.position]={\n\t\t\t\t\t\t\th:get.cardsInfo(game.players[i].getCards('h')),\n\t\t\t\t\t\t\te:get.cardsInfo(game.players[i].getCards('e')),\n\t\t\t\t\t\t\tj:get.cardsInfo(game.players[i].getCards('j'))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.addVideo('skill',event.player,['ywuhun',data]);\n\t\t\t\t\tgame.animate.window(2);\n\t\t\t\t\twhile(ui.cardPile.childElementCount){\n\t\t\t\t\t\tui.cardPile.firstChild.discard();\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<event.cardPile.length;i++){\n\t\t\t\t\t\tif(event.cardPile[i].parentNode==ui.discardPile){\n\t\t\t\t\t\t\tui.cardPile.appendChild(event.cardPile[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tui.cardPile.appendChild(game.createCard(event.cardPile[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tui.updatehl();\n\t\t\t\t},subSkill: {end: {trigger: {source: \"damageEnd\",},priority: \"9\",silent: \"true\",content: function (){\n\t\t\t\t\t\t\tvar evt=_status.event.getParent('ywuhun');\n\t\t\t\t\t\t\tif(evt){\n\t\t\t\t\t\t\t\t_status.event=evt;\n\t\t\t\t\t\t\t\tgame.resetSkills();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},ai: {jueqing: \"true\",},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"锁定技，回合开始前，你获得一个额外的回合，并在此回合结束后复原场上及牌堆中的所有牌；当你在此回合中造成伤害后，终止所有结算并结束此回合"},"yingfeng":{"name":"影锋","script":"{trigger: {player: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(event.parent.name=='yingfeng') return false;\n\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn enemies.contains(current)&&!event.targets.contains(current)&&player.canUse('sha',current,false);\n\t\t\t\t\t});\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\tenemies.remove(trigger.targets);\n\t\t\t\t\tif(enemies.length){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},enemies.randomGet().addExpose(0.2));\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，每当你使用一张杀结算完毕后，你随机对一名不是此杀目标的敌方角色使用一张杀"},"tianwu":{"name":"天舞","script":"{trigger: {player: \"useCardToBegin\",},filter: function (event,player){\n\t\t\t\t\tif(get.is.altered('tianwu')&&player.hasSkill('tianwu2')) return false;\n\t\t\t\t\treturn event.targets&&event.targets.length==1&&player.getEnemies().contains(event.target);\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\ttrigger.target.getDebuff();\n\t\t\t\t\tplayer.addTempSkill('tianwu2');\n\t\t\t\t},}","info":"每当你使用卡牌指定一名敌方角色为惟一目标，你可以对其施加一个随机的负面效果"},"liguang":{"name":"离光","script":"{trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\tif(!player.canMoveCard()) return false;\n\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('ej');\n\t\t\t\t\t})){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt('liguang'),'弃置一张手牌并移动场上的一张牌',lib.filter.cardDiscardable).set('ai',function(card){\n\t\t\t\t\t\tif(!_status.event.check) return 0;\n\t\t\t\t\t\treturn 7-get.useful(card);\n\t\t\t\t\t}).set('check',player.canMoveCard(true)).set('logSkill','liguang');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.moveCard(true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.3\",},}","info":"结束阶段，你可以弃置一张手牌并将场上的一张牌移动到另一个合理的位置"},"shiying":{"name":"逝影","script":"{trigger: {global: \"dieBefore\",},skillAnimation: \"epic\",animationColor: \"water\",unique: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.shiying=false;\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>=3;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.shiying&&event.player!=player;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.awakenSkill('shiying');\n\t\t\t\t\tplayer.storage.shiying=true;\n\n\t\t\t\t\tplayer.maxHp=3;\n\t\t\t\t\tplayer.hp=3;\n\t\t\t\t\ttrigger.player.maxHp=3;\n\t\t\t\t\ttrigger.player.hp=3;\n\n\t\t\t\t\tplayer.clearSkills();\n\t\t\t\t\ttrigger.player.clearSkills();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar hs=player.getCards('hej');\n\t\t\t\t\tplayer.$throw(hs);\n\t\t\t\t\tplayer.lose(player.getCards('hej'))._triggered=null;\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar hs=trigger.player.getCards('hej');\n\t\t\t\t\ttrigger.player.$throw(hs);\n\t\t\t\t\ttrigger.player.lose(trigger.player.getCards('hej'))._triggered=null;\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.asyncDraw([player,trigger.player],3);\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"限定技，在一名其他角色死亡前，你可以防止其死亡，然后你与该角色失去全部技能、将体力和体力上限变为3、移去所有牌并摸3张牌"},"linghuo":{"name":"灵火","script":"{round: \"2\",trigger: {global: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.getStat('damage')&&event.player!=player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.damageEffect(event.player,player,player,'fire')>0;\n\t\t\t\t},logTarget: \"player\",line: \"fire\",ai: {expose: \"0.2\",threaten: \"1.3\",},content: function (){\n\t\t\t\t\ttrigger.player.damage('fire');\n\t\t\t\t},group: [\"linghuo_roundcount\"],}","info":"每两轮限一次，在一名其他角色的结束阶段，若其本回合内造成过伤害，你可以对其造成一点火属性伤害"},"guijin":{"name":"归烬","script":"{round: \"3\",enable: \"phaseUse\",delay: \"0\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cards=get.cards(4);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tvar more=false,remain=false,nomore=false;\n\t\t\t\t\t\tif(event.cards.length>=3){\n\t\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\t\tvar value=get.value(event.cards[i],player,'raw');\n\t\t\t\t\t\t\t\tif(value>=8){\n\t\t\t\t\t\t\t\t\tmore=true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(event.cards.length>=4&&value<6){\n\t\t\t\t\t\t\t\t\tif(remain===false){\n\t\t\t\t\t\t\t\t\t\tremain=value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tremain=Math.min(remain,value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(remain===false){\n\t\t\t\t\t\t\tremain=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!more&&!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn get.attitude(player,current)<0&&!current.skipList.contains('phaseDraw');\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\t\tnum+=Math.max(0,get.value(event.cards[i],player,'raw'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num>=12){\n\t\t\t\t\t\t\t\tmore=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnomore=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseCardButton('归烬',event.cards,[1,event.cards.length]).ai=function(button){\n\t\t\t\t\t\t\tif(nomore) return 0;\n\t\t\t\t\t\t\tif(more){\n\t\t\t\t\t\t\t\treturn get.value(button.link,player,'raw')-remain;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(ui.selected.buttons.length) return 0;\n\t\t\t\t\t\t\t\treturn 8-get.value(button.link,player,'raw');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.togive=result.links.slice(0);\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(result.links)+'交给一名角色',true).ai=function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target)/Math.sqrt(target.countCards('h')+1);\n\t\t\t\t\t\t\tif(result.links.length>1){\n\t\t\t\t\t\t\t\tif(target==player&&target.needsToDiscard(result.links.length)>1){\n\t\t\t\t\t\t\t\t\treturn att/5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(target.skipList.contains('phaseDraw')) return att/5;\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.targets.length){\n\t\t\t\t\t\tresult.targets[0].gain(event.togive,'draw');\n\t\t\t\t\t\tresult.targets[0].skip('phaseDraw');\n\t\t\t\t\t\tresult.targets[0].addTempSkill('guijin2',{player:'phaseBegin'});\n\t\t\t\t\t\tgame.log(result.targets[0],'获得了'+get.cnNumber(event.togive.length)+'张','#g“归烬”牌');\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\twhile(event.cards.length){\n\t\t\t\t\t\tui.cardPile.insertBefore(event.cards.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(game.roundNumber==1&&player.hasUnknown()) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},group: [\"guijin_roundcount\"],}","info":"每三轮限一次，出牌阶段，你可以观看牌堆顶的4张牌，然后可以将其中任意张牌分配给任意角色，被分到牌的角色跳过下一摸牌阶段，然后将剩余牌以原顺序放回牌堆顶"},"chengxin":{"name":"澄心","script":"{round: \"4\",enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn event.type=='dying';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target==_status.event.dying;\n\t\t\t\t},selectTarget: \"-1\",content: function (){\n\t\t\t\t\ttarget.recover(1-target.hp);\n\t\t\t\t\ttarget.addTempSkill('chengxin2',{player:'phaseAfter'});\n\t\t\t\t},ai: {order: \"6\",threaten: \"1.4\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(4-(game.roundNumber-player.storage.chengxin_roundcount)>0) return false;\n\t\t\t\t\t\tif(!_status.event.dying) return false;\n\t\t\t\t\t},save: \"true\",result: {target: \"3\",},},group: [\"chengxin_roundcount\"],}","info":"每四轮限一次，当一名角色进入濒死状态时，你可以令其将体力值回复至1，然后该角色防止一切伤害直到下一回合结束"},"xtanxi":{"name":"探息","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",check: function (card){\n\t\t\t\t\tvar enemies=_status.event.player.getEnemies();\n\t\t\t\t\tvar num1=0,num2=0;\n\t\t\t\t\tfor(var i=0;i<enemies.length;i++){\n\t\t\t\t\t\tif(enemies[i].countCards('h','sha')) num1++;\n\t\t\t\t\t\tif(enemies[i].countCards('h','shan')) num2++;\n\t\t\t\t\t\tif(enemies[i].countCards('h')>=3) {num1+=0.5;num2+=0.5;}\n\t\t\t\t\t}\n\t\t\t\t\tvar rand=_status.event.getRand();\n\t\t\t\t\tif(num1>=1&&num2>=1){\n\t\t\t\t\t\tif(card.name=='shan') return rand+=0.4;\n\t\t\t\t\t\tif(card.name=='sha') return rand;\n\t\t\t\t\t}\n\t\t\t\t\telse if(num1>=1){\n\t\t\t\t\t\tif(card.name=='sha') return rand;\n\t\t\t\t\t}\n\t\t\t\t\telse if(num2>=1){\n\t\t\t\t\t\tif(card.name=='shan') return rand;\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addExpose(0.1);\n\t\t\t\t\tvar targets=player.getEnemies();\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tif(!targets[i].countCards('h',cards[0].name)){\n\t\t\t\t\t\t\ttargets.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\tvar target=targets.randomGet();\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.addExpose(0.1);\n\t\t\t\t\t\tplayer.gainPlayerCard(target,'h','visible');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"4\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张手牌，然后随机选择一名手牌中有与之同名的牌的敌方角色，观看其手牌并获得任意一张"},"xiaoyue":{"name":"啸月","script":"{trigger: {global: \"roundStart\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha');\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar card=player.getCards('h','sha').randomGet();\n\t\t\t\t\tvar target=player.getEnemies().randomGet();\n\t\t\t\t\tif(card&&target){\n\t\t\t\t\t\ttarget.addExpose(0.1);\n\t\t\t\t\t\tplayer.useCard(card,target,false);\n\t\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.itemtype(card)=='card'&&\n\t\t\t\t\t\t\t\t!player.needsToDiscard()&&target.hp>1&&player.countCards('h','sha')==1){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，每轮开始时，若你手牌中有杀，你将手牌中的一张随机杀对一名随机敌方角色使用，然后获得一点护甲"},"fenglue":{"name":"风掠","script":"{trigger: {player: \"phaseUseBefore\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\tif(current!=player){\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(get.info(hs[i]).multitarget) continue;\n\t\t\t\t\t\t\t\tif(lib.filter.targetEnabled2(hs[i],player,current)){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tplayer.chooseTarget(get.prompt('fenglue'),function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\tif(get.info(hs[i]).multitarget) continue;\n\t\t\t\t\t\t\tif(lib.filter.targetEnabled2(hs[i],player,target)){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar num=0,eff=0,damaged=false;\n\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\tif(get.info(hs[i]).multitarget) continue;\n\t\t\t\t\t\t\tvar hef;\n\t\t\t\t\t\t\tif(get.tag(hs[i],'damage')&&damaged){\n\t\t\t\t\t\t\t\thef=-1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\thef=get.effect(target,hs[i],player,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(lib.filter.targetEnabled2(hs[i],player,target)&&hef>0){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\thef/=1.5;\n\t\t\t\t\t\t\t\t\tif(get.tag(hs[i],'damage')){\n\t\t\t\t\t\t\t\t\t\tdamaged=true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\teff+=hef;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.needsToDiscard(-num)){\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tplayer.chooseCard([1,Infinity],'按顺序选择对'+get.translation(result.targets)+'使用的牌',function(card){\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(card,player,event.target);\n\t\t\t\t\t\t}).ai=function(card){\n\t\t\t\t\t\t\tif(get.effect(event.target,card,player,player)>0){\n\t\t\t\t\t\t\t\tif(get.attitude(player,event.target)>0&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(get.tag(ui.selected.cards[i],'damage')){\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn get.order(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('fenglue',event.target);\n\t\t\t\t\t\tplayer.addSkill('fenglue_draw');\n\t\t\t\t\t\tplayer.storage.fenglue_draw_num=0;\n\t\t\t\t\t\tplayer.storage.fenglue_draw=event.target;\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tevent.cards=result.cards.slice(0);\n\t\t\t\t\t\tplayer.lose(event.cards,ui.special);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tif(event.target.isIn()){\n\t\t\t\t\t\t\tplayer.useCard(event.cards.shift(),event.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.cards.shift().discard();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(player.storage.fenglue_draw_num){\n\t\t\t\t\t\tplayer.draw(player.storage.fenglue_draw_num);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.removeSkill('fenglue_draw');\n\t\t\t\t\tdelete player.storage.fenglue_draw;\n\t\t\t\t\tdelete player.storage.fenglue_draw_num;\n\t\t\t\t},subSkill: {draw: {trigger: {global: \"damageEnd\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.player==player.storage.fenglue_draw;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.fenglue_draw_num++;\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: \"1.3\",},}","info":"你可以放弃出牌阶段，改为指定一名其他角色并选择任意张手牌，依次对该角色使用，若如此做，此阶段内该角色每受到一点伤害，你在结算后摸一张牌"},"tanhua":{"name":"昙华","script":"{trigger: {player: \"recoverBefore\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp>0&&event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.draw(2*trigger.num);\n\t\t\t\t},group: \"tanhua_remove\",subSkill: {remove: {trigger: {player: \"dying\",},priority: \"10\",forced: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t\tplayer.removeSkill('tanhua');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，你回复体力的效果改为摸两张牌；当你进入濒死状态时，你回复一点体力并失去此技能"},"yujia":{"name":"御甲","script":"{trigger: {player: \"useCardAfter\",},frequent: \"true\",filter: function (event){\n\t\t\t\t\treturn get.type(event.card)=='equip'&&lib.inpile.contains(event.card.name);\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.yujia=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!player.storage.yujia){\n\t\t\t\t\t\tplayer.storage.yujia=[];\n\t\t\t\t\t}\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i in lib.card){\n\t\t\t\t\t\tif(lib.card[i].type=='jiguan'){\n\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tif(player.storage.yujia>1){\n\t\t\t\t\t\t\tlist=list.randomGets(player.storage.yujia);\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tlist[i]=['机关','',list[i]];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.chooseButton(true,['御甲：选择一张机关牌获得之',[list,'vcard']]).ai=function(button){\n\t\t\t\t\t\t\t\tif(player.hasSkill('jiguanyaoshu_skill')&&button.link[2]=='jiguanyaoshu') return 0;\n\t\t\t\t\t\t\t\treturn get.value({name:button.link[2]});\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar name=list.randomGet();\n\t\t\t\t\t\t\tplayer.gain(game.createCard(name),'draw');\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.links&&result.links.length){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tlist.push(game.createCard(result.links[i][2]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.gain(list,'draw');\n\t\t\t\t\t}\n\t\t\t\t},group: \"yujia_count\",subSkill: {count: {trigger: {player: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn get.type(event.card)=='jiguan';\n\t\t\t\t\t\t},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.yujia++;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},ai: {reverseEquip: \"true\",threaten: \"1.5\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip') return [1,3];\n\t\t\t\t\t\t},},},}","info":"每当你使用一张未强化的装备牌，你可以随机观看X张机关牌，并选择一张获得之，X为你本局使用过的机关牌数且至少为1"},"xiepan":{"name":"械磐","script":"{trigger: {player: \"loseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h',{type:'basic'})) return false;\n\t\t\t\t\tif(!player.countCards('h')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h'&&get.type(event.cards[i])=='basic') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard('h',get.prompt('xiepan')).set('prompt2','弃置一张手牌并获一件随机装备').set('logSkill','xiepan').ai=function(card){\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(game.createCard(get.inpile('equip').randomGet()),'draw');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你失去最后一张基本牌，你可以弃置一张手牌，然后获得一张随机装备牌"},"yanshi":{"name":"偃师","script":"{trigger: {player: \"phaseAfter\",},forced: \"true\",skillAnimation: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.yanshi=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.storage.yanshi==4;\n\t\t\t\t},intro: {content: \"累计#个回合使用过机关牌\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('yanshi');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<=5;i++){\n\t\t\t\t\t\tif(!player.getEquip(i)){\n\t\t\t\t\t\t\tvar name=get.inpile('equip'+i).randomGet();\n\t\t\t\t\t\t\tif(name){\n\t\t\t\t\t\t\t\tvar card=game.createCard(name);\n\t\t\t\t\t\t\t\tlist.push(card);\n\t\t\t\t\t\t\t\tplayer.equip(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.$draw(list);\n\t\t\t\t\t}\n\t\t\t\t},group: \"yanshi_count\",subSkill: {count: {trigger: {player: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn get.type(event.card)=='jiguan'&&!player.hasSkill('yanshi2');\n\t\t\t\t\t\t},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.yanshi++;\n\t\t\t\t\t\t\tif(player.hasSkill('yanshi')){\n\t\t\t\t\t\t\t\tplayer.markSkill('yanshi');\n\t\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.addTempSkill('yanshi2');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"觉醒技，结束阶段，若你累计有4个回合使用过机关牌，你增加一点体力和体力上限，然后用随机装备填满你的装备区"}},"card":{},"hero":{"pal_lixiaoyao":{"name":"李逍遥","attr":["male","qun",4,["tianjian","yufeng"]]},"pal_zhaoliner":{"name":"赵灵儿","attr":["female","wei",3,["huimeng","tianshe"]]},"pal_linyueru":{"name":"林月如","attr":["female","wei",3,["guiyuan","qijian"]]},"pal_anu":{"name":"阿奴","attr":["female","wu",3,["lingdi","anwugu"]]},"pal_wangxiaohu":{"name":"王小虎","attr":["male","qun",4,["husha"]]},"pal_sumei":{"name":"苏媚","attr":["female","shu",3,["sheying","dujiang","huahu"]]},"pal_shenqishuang":{"name":"沈欺霜","attr":["female","wei",3,["qixia","jianzhen","binxin"]]},"pal_jingtian":{"name":"景天","attr":["male","wu",3,["sajin","jtjubao"]]},"pal_xuejian":{"name":"雪见","attr":["female","shu",3,["xshuangren","shenmu","duci"]]},"pal_longkui":{"name":"龙葵","attr":["female","qun",3,["fenxing","diewu","lingyu"]]},"pal_zixuan":{"name":"紫萱","attr":["female","wei",3,["shuiyun","wangyou","changnian"]]},"pal_changqing":{"name":"长卿","attr":["male","wei",4,["luanjian","ctianfu"]]},"pal_nangonghuang":{"name":"南宫煌","attr":["male","wei",3,["zhaoyao","sheling","zhangmu"]]},"pal_wenhui":{"name":"温慧","attr":["female","shu",4,["huxi","longxiang"]]},"pal_wangpengxu":{"name":"王蓬絮","attr":["female","shu",3,["duxinshu","feixu"]]},"pal_xingxuan":{"name":"星璇","attr":["male","wei",3,["feizhua","leiyu","lingxue"]]},"pal_leiyuange":{"name":"雷元戈","attr":["male","shu",4,["feng","ya","song"]]},"pal_yuntianhe":{"name":"云天河","attr":["male","wu",4,["longxi","zhuyue","guanri"]]},"pal_hanlingsha":{"name":"韩菱纱","attr":["female","shu",3,["tannang","tuoqiao"]]},"pal_liumengli":{"name":"柳梦璃","attr":["female","wei",3,["tianxian","runxin","zhimeng"]]},"pal_murongziying":{"name":"慕容紫英","attr":["male","wei",4,["xuanning","poyun","qianfang"]]},"pal_xuanxiao":{"name":"玄霄","attr":["male","wei",4,["xuanyan","ningbin","xfenxin"]]},"pal_jiangyunfan":{"name":"姜云凡","attr":["male","wei",4,["xunying","liefeng"]]},"pal_tangyurou":{"name":"唐雨柔","attr":["female","shu",3,["txianqu","qiongguang"]]},"pal_longyou":{"name":"龙幽","attr":["male","wei",4,["yuexing","minsha"]]},"pal_xiaoman":{"name":"小蛮","attr":["female","shu",3,["anwugu","lingquan","shenwu"]]},"pal_xiahoujinxuan":{"name":"夏侯瑾轩","attr":["male","shu",3,["xuanmo","danqing"]]},"pal_muchanglan":{"name":"暮菖兰","attr":["female","wu",3,["feixia","lueying"]]},"pal_xia":{"name":"瑕","attr":["female","shu",3,["zongyu","fanling"]]},"pal_jiangcheng":{"name":"姜承","attr":["male","qun",4,["yanzhan","fenshi"]]},"pal_yuejinzhao":{"name":"越今朝","attr":["male","wei",4,["ywuhun","yingfeng"]]},"pal_yueqi":{"name":"越祈","attr":["female","wei",3,["tianwu","liguang","shiying"]]},"pal_mingxiu":{"name":"明绣","attr":["female","shu",3,["linghuo","guijin","chengxin"]]},"pal_xianqing":{"name":"闲卿","attr":["male","qun",4,["xtanxi","xiaoyue"]]},"pal_luozhaoyan":{"name":"洛昭言","attr":["female","shu",4,["fenglue","tanhua"]]},"pal_jushifang":{"name":"居十方","attr":["male","shu",3,["yujia","xiepan","yanshi"]]}}},"shenhua":{"name":"神话再临","skill":{"buqu":{"name":"不屈","script":"{audio: \"2\",audioname: [\"key_yuri\"],trigger: {player: \"chooseToUseBefore\",},forced: \"true\",filter: function (event,player){return event.type=='dying'&&player.isDying()&&event.dying==player},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.card=get.cards()[0];\n\t\t\t\t\tif(player.storage.buqu==undefined) player.storage.buqu=[];\n\t\t\t\t\tplayer.storage.buqu.push(event.card);\n\t\t\t\t\tplayer.syncStorage('buqu');\n\t\t\t\t\t//event.trigger(\"addCardToStorage\");\n\t\t\t\t\tgame.cardsGotoSpecial(event.card);\n\t\t\t\t\tplayer.showCards(player.storage.buqu,'不屈')\n\t\t\t\t\tplayer.markSkill('buqu');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tfor(var i=0;i<player.storage.buqu.length-1;i++){\n\t\t\t\t\t\tif(get.number(event.card)&&get.number(event.card)==get.number(player.storage.buqu[i])){\n\t\t\t\t\t\t\tplayer.storage.buqu.remove(event.card);\n\t\t\t\t\t\t\tplayer.syncStorage('buqu');\n\t\t\t\t\t\t\tplayer.markSkill('buqu');\n\t\t\t\t\t\t\tgame.cardsDiscard(event.card);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\ttrigger.result={bool:true};\n\t\t\t\t\tif(player.hp<=0){\n\t\t\t\t\t\tplayer.recover(1-player.hp);\n\t\t\t\t\t}\n\t\t\t\t},mod: {maxHandcardBase: function (player,num){\n\t\t\t\t\t\tif(get.mode()!='guozhan'&&player.storage.buqu&&player.storage.buqu.length) return player.storage.buqu.length;\n\t\t\t\t\t},},ai: {save: \"true\",mingzhi: \"true\",skillTagFilter: function (player,tag,target){\n\t\t\t\t\t\tif(player!=target) return false;\n\t\t\t\t\t},},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tdelete player.storage.buqu;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，当你处于濒死状态时，你亮出牌堆顶的一张牌并置于你的武将牌上，称之为“创”。若此牌的点数与你武将牌上已有的“创”点数均不同，则你回复至1体力。若点数相同，则将此牌置入弃牌堆。只要你的武将牌上有“创”，你的手牌上限便与“创”的数量相等。"},"new_fenji":{"name":"奋激","script":"{audio: \"fenji\",trigger: {global: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\tif(event.player.countCards('h')==0&&event.player.isAlive()) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t},}","info":"一名角色的结束阶段开始时，若其没有手牌，你可以令其摸两张牌，然后你失去1点体力。"},"moon_jushou":{"name":"据守","script":"{audio: \"jushou\",trigger: {player: \"phaseJieshuBegin\",},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='guiyoujie') return [0,1];\n\t\t\t\t\t\t},},},}","info":"结束阶段，你可以摸一张牌，并将武将牌翻面。"},"jiewei":{"name":"解围","script":"{trigger: {player: \"turnOverEnd\",},frequent: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.chooseToUse(function(card){\n\t\t\t\t\t\tif(!lib.filter.cardEnabled(card,_status.event.player,_status.event)){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar type=get.type(card,'trick');\n\t\t\t\t\t\treturn type=='trick'||type=='equip';\n\t\t\t\t\t},'是否使用一张锦囊牌或装备牌？');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar type=get.type(result.card||result.cards[0]);\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\tif(type=='equip'){\n\t\t\t\t\t\t\t\treturn current.countCards('e');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn current.countCards('j');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tvar next=player.chooseTarget('是否弃置场上的一张'+get.translation(type)+'牌？',function(card,player,target){\n\t\t\t\t\t\t\t\tif(_status.event.type=='equip'){\n\t\t\t\t\t\t\t\t\treturn target.countCards('e')>0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn target.countCards('j')>0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.set('ai',function(target){\n\t\t\t\t\t\t\t\tif(type=='equip'){\n\t\t\t\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.set('type',type);\n\t\t\t\t\t\t\tevent.type=type;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.type&&result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tif(event.type=='equip'){\n\t\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],'e',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],'j',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你的武将牌翻面后，你可以摸一张牌。然后你可以使用一张锦囊牌或装备牌，并可以在此牌结算后弃置场上一张同类型的牌"},"gzduanliang":{"name":"断粮","script":"{audio: \"duanliang1\",audioname: [\"re_xuhuang\"],group: [\"duanliang1\",\"duanliang2\"],ai: {threaten: \"1.2\",},}","info":"你可以将一张黑色基本牌或黑色装备牌当【兵粮寸断】使用；你可以对距离为2的角色使用【兵粮寸断】"},"mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-1。"},"jianchu":{"name":"鞬出","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"re_pangde\"],trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.target.countDiscardableCards(player,'he')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discardPlayerCard(trigger.target,get.prompt('jianchu',trigger.target)).set('ai',function(button){\n\t\t\t\t\t\tif(!_status.event.att) return 0;\n\t\t\t\t\t\tif(get.position(button.link)=='e'){\n\t\t\t\t\t\t\tif(get.subtype(button.link)=='equip2')\treturn 2*get.value(button.link);\n\t\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}).set('logSkill',['jianchu',trigger.target]).set('att',get.attitude(player,trigger.target)<=0);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.links&&result.links.length){\n\t\t\t\t\t\tif(get.type(result.links[0],null,result.links[0].original=='h'?player:false)=='equip'){\n\t\t\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(trigger.cards){\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.position(trigger.cards[i],true)=='o') list.push(trigger.cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(list.length) trigger.target.gain(list,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {unequip_ai: \"true\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(tag=='directHit_ai') return arg.card.name=='sha'&&arg.target.countCards('e',function(card){\n\t\t\t\t\t\t\treturn get.value(card)>1;\n\t\t\t\t\t\t})>0;\n\t\t\t\t\t\tif(arg&&arg.name=='sha'&&arg.target.getEquip(2)) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"当你使用【杀】指定一名角色为目标后，你可以弃置其一张牌，若以此法弃置的牌为装备牌，此【杀】不可被【闪】响应，若不为装备牌，该角色获得此【杀】"},"xinshensu":{"name":"神速","script":"{audio: \"shensu1\",audioname: [\"xiahouba\",\"re_xiahouyuan\",\"ol_xiahouyuan\"],group: [\"shensu1\",\"shensu2\",\"shensu4\"],}","info":"你可以选择一至三项：1. 跳过判定阶段和摸牌阶段；2. 跳过出牌阶段并弃置一张装备牌；3. 跳过弃牌阶段并将你的武将牌翻面。你每选择一项，视为你对一名其他角色使用一张没有距离限制的【杀】"},"liegong":{"name":"烈弓","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"re_huangzhong\"],trigger: {player: \"useCardToPlayered\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\n\t\t\t\t},logTarget: \"target\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tvar length=event.target.countCards('h');\n\t\t\t\t\treturn (length>=player.hp||length<=player.getAttackRange());\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.getParent().directHit.push(trigger.target);\n\t\t\t\t},locked: \"false\",mod: {attackFrom: function (from,to,distance){\n\t\t\t\t\t\tif(get.zhu(from,'shouyue')) return distance-1;\n\t\t\t\t\t},},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(get.attitude(player,arg.target)>0||arg.card.name!='sha') return false;\n\t\t\t\t\t\tvar length=arg.target.countCards('h');\n\t\t\t\t\treturn (length>=player.hp||length<=player.getAttackRange());\n\t\t\t\t\t},},}","info":"当你使用【杀】时，若目标的手牌数大于等于你的体力值，或小于等于你的攻击范围，你可令此【杀】不能被闪避。"},"xinkuanggu":{"name":"狂骨","script":"{trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\treturn get.distance(player,event.player)<=1&&event.num>0;\n\t\t\t\t},direct: \"true\",audio: \"kuanggu\",audioname: [\"re_weiyan\",\"ol_weiyan\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseDrawRecover(get.prompt(event.name)).set('logSkill',event.name).set('prompt2','摸一张牌或回复1点体力');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你对距离1以内的一名角色造成1点伤害后，你可以回复1点体力或摸一张牌。"},"qimou":{"name":"奇谋","script":"{unique: \"true\",limited: \"true\",audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.qimou;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.qimou=false;\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},skillAnimation: \"true\",animationColor: \"orange\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar shas=player.getCards('h','sha');\n\t\t\t\t\tvar num;\n\t\t\t\t\tif(player.hp>=4&&shas.length>=3){\n\t\t\t\t\t\tnum=3;\n\t\t\t\t\t}\n\t\t\t\t\telse if(player.hp>=3&&shas.length>=2){\n\t\t\t\t\t\tnum=2;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnum=1\n\t\t\t\t\t}\n\t\t\t\t\tvar map={};\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<=player.hp;i++){\n\t\t\t\t\t\tvar cn=get.cnNumber(i,true);\n\t\t\t\t\t\tmap[cn]=i;\n\t\t\t\t\t\tlist.push(cn);\n\t\t\t\t\t}\n\t\t\t\t\tevent.map=map;\n\t\t\t\t\tplayer.awakenSkill('qimou');\n\t\t\t\t\tplayer.storage.qimou=true;\n\t\t\t\t\tplayer.chooseControl(list,function(){\n\t\t\t\t\t\treturn get.cnNumber(_status.event.goon,true);\n\t\t\t\t\t}).set('prompt','失去任意点体力').set('goon',num);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=event.map[result.control]||1;\n\t\t\t\t\tplayer.storage.qimou2=num;\n\t\t\t\t\tplayer.loseHp(num);\n\t\t\t\t\tplayer.addTempSkill('qimou2');\n\t\t\t\t},ai: {order: \"2\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp==1) return 0;\n\t\t\t\t\t\t\tvar shas=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(!shas.length) return 0;\n\t\t\t\t\t\t\tvar card=shas[0];\n\t\t\t\t\t\t\tif(!lib.filter.cardEnabled(card,player)) return 0;\n\t\t\t\t\t\t\tif(lib.filter.cardUsable(card,player)) return 0;\n\t\t\t\t\t\t\tvar mindist;\n\t\t\t\t\t\t\tif(player.hp>=4&&shas.length>=3){\n\t\t\t\t\t\t\t\tmindist=4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(player.hp>=3&&shas.length>=2){\n\t\t\t\t\t\t\t\tmindist=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tmindist=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn (current.hp<=mindist-1&&\n\t\t\t\t\t\t\t\t\tget.distance(player,current,'attack')<=mindist&&\n\t\t\t\t\t\t\t\t\tplayer.canUse(card,current,false)&&\n\t\t\t\t\t\t\t\t\tget.effect(current,card,player,player)>0);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以失去任意点体力，然后直到回合结束，你计算与其他角色的距离时-X，且你可以多使用X张【杀】（X为你失去的体力值）"},"retianxiang":{"name":"天香","script":"{audio: \"tianxiang\",audioname: [\"daxiaoqiao\",\"re_xiaoqiao\",\"ol_xiaoqiao\"],trigger: {player: \"damageBegin4\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\treturn _status.connectMode||get.suit(card,player)=='heart';\n\t\t\t\t\t})>0&&event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.suit(card)=='heart'&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\tvar da=0;\n\t\t\t\t\t\t\tif(_status.event.player.hp==1){\n\t\t\t\t\t\t\t\tda=10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,trigger.source,target);\n\t\t\t\t\t\t\tif(att==0) return 0.1+da;\n\t\t\t\t\t\t\tif(eff>=0&&att>0){\n\t\t\t\t\t\t\t\treturn att+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(att>0&&target.hp>1){\n\t\t\t\t\t\t\t\tif(target.maxHp-target.hp>=3) return att*1.1+da;\n\t\t\t\t\t\t\t\tif(target.maxHp-target.hp>=2) return att*0.9+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -att+da;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('retianxiang'),\n\t\t\t\t\t\tprompt2:lib.translate.retianxiang_info\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.chooseControlList(true,function(event,player){\n\t\t\t\t\t\t\tvar target=_status.event.target;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(target.hasSkillTag('maihp')) att=-att;\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\t['令'+get.translation(target)+'受到伤害来源对其造成的1点伤害，然后摸X张牌（X为其已损失体力值且至多为5）',\n\t\t\t\t\t\t\t'令'+get.translation(target)+'失去1点体力，然后获得'+get.translation(result.cards)]).set('target',target);\n\t\t\t\t\t\tplayer.logSkill(event.name,target);\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(typeof result.index=='number'){\n\t\t\t\t\t\tevent.index=result.index;\n\t\t\t\t\t\tif(result.index){\n\t\t\t\t\t\t\tevent.related=event.target.loseHp();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.related=event.target.damage(trigger.source||'nosource','nocard');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.related.cancelled||target.isDead()) return;\n\t\t\t\t\tif(event.index&&card.isInPile()) target.gain(card,'gain2');\n\t\t\t\t\telse if(target.getDamagedHp()) target.draw(Math.min(5,target.getDamagedHp()));\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.countCards('he')>1) return 0.7;\n\t\t\t\t\t\t},},},}","info":"当你受到伤害时，你可以弃置一张红桃手牌，防止此次伤害并选择一名其他角色，然后你选择一项：1.令其受到伤害来源对其造成的1点伤害，然后摸X张牌（X为其已损失体力值且至多为5）；2.令其失去1点体力，然后获得你弃置的牌。"},"xinhongyan":{"name":"红颜","script":"{audio: \"2\",mod: {suit: function (card,suit){\n\t\t\t\t\t\tif(suit=='spade') return 'heart';\n\t\t\t\t\t},},trigger: {global: \"judge\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.fixedResult&&event.fixedResult.suit) return event.fixedResult.suit=='heart';\n\t\t\t\t\treturn get.suit(event.player.judging[0],event.player)=='heart';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar str='红颜：'+get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，请将其改为一种花色';\n\t\t\t\t\tplayer.chooseControl('spade','heart','diamond','club').set('prompt',str).set('ai',function(){\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar res1=trigger.judge(judging);\n\t\t\t\t\t\tvar list=lib.suit.slice(0);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0) return 0;\n\t\t\t\t\t\tvar getj=function(suit){\n\t\t\t\t\t\t\treturn trigger.judge({\n\t\t\t\t\t\t\t\tname:get.name(judging),\n\t\t\t\t\t\t\t\tnature:get.nature(judging),\n\t\t\t\t\t\t\t\tsuit:suit,\n\t\t\t\t\t\t\t\tnumber:get.number(judging),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\t\treturn (getj(b)-getj(a))*get.sgn(attitude);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn list[0];\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.addExpose(0.25);\n\t\t\t\t\t\tplayer.popup(result.control);\n\t\t\t\t\t\tgame.log(player,'将判定结果改为了','#y'+get.translation(result.control+2));\n\t\t\t\t\t\tif(!trigger.fixedResult) trigger.fixedResult={};\n\t\t\t\t\t\ttrigger.fixedResult.suit=result.control;\n\t\t\t\t\t\ttrigger.fixedResult.color=get.color({suit:result.control});\n\t\t\t\t\t}\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"0.4\",},expose: \"0.5\",},}","info":"锁定技，你的♠牌和♠判定牌的花色视为♥。一名角色的判定结果生效前，若判定结果为♥，则你将其改为一种花色。"},"releiji":{"name":"雷击","script":"{audio: \"2\",audioname: [\"boss_qinglong\"],trigger: {player: [\"useCard\",\"respond\"],},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='shan';\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\";\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('releiji'),function(card,player,target){\n\t\t\t\t\t return target!=player;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tif(target.hasSkill('hongyan')) return 0;\n\t\t\t\t\t\treturn get.damageEffect(target,_status.event.player,_status.event.player,'thunder');\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('releiji',result.targets,'thunder');\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tevent.target.judge(function(card){\n\t\t\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\t\t\tif(suit=='spade') return -4;\n\t\t\t\t\t\t\tif(suit=='club') return -2;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.suit=='club'){\n\t\t\t\t\t\tevent.target.damage('thunder');\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.suit=='spade'){\n\t\t\t\t\t\tevent.target.damage(2,'thunder');\n\t\t\t\t\t}\n\t\t\t\t},ai: {useShan: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\tvar hastarget=game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn get.attitude(target,current)<0;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvar be=target.countCards('e',{color:'black'});\n\t\t\t\t\t\t\t\tif(target.countCards('h','shan')&&be){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkill('guidao')) return 0;\n\t\t\t\t\t\t\t\t\treturn [0,hastarget?target.countCards('he')/2:0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h','shan')&&target.countCards('h')>2){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkill('guidao')) return 0;\n\t\t\t\t\t\t\t\t\treturn [0,hastarget?target.countCards('h')/4:0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h')>3||(be&&target.countCards('h')>=2)){\n\t\t\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h')==0){\n\t\t\t\t\t\t\t\t\treturn [1.5,0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h')==1&&!be){\n\t\t\t\t\t\t\t\t\treturn [1.2,0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(!target.hasSkill('guidao')) return [1,0.05];\n\t\t\t\t\t\t\t\treturn [1,Math.min(0.5,(target.countCards('h')+be)/4)];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你使用或打出一张【闪】时，你可令一名其他角色进行一次判定：若结果为梅花，其受到一点雷电伤害，然后你回复一点体力；若结果为黑桃，其受到两点雷电伤害。"},"guidao":{"name":"鬼道","script":"{audio: \"2\",audioname: [\"sp_zhangjiao\"],trigger: {global: \"judge\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，'+get.prompt('guidao'),'he',function(card){\n\t\t\t\t\t\tif(get.color(card)!='black') return false;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0||result==0) return 0;\n\t\t\t\t\t\tif(attitude>0){\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.respond(result.cards,'highlight','guidao','noOrdering');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.$gain2(trigger.player.judging[0]);\n\t\t\t\t\t\tplayer.gain(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.orderingCards.addArray(result.cards);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"1\",},},}","info":"一名角色的判定牌生效前，你可以打出一张黑色牌替换之。"},"huangtian":{"name":"黄天","script":"{unique: \"true\",audio: \"huangtian2\",audioname: [\"zhangjiao\",\"re_zhangjiao\"],global: \"huangtian2\",zhuSkill: \"true\",}","info":"主公技，其他群势力角色的出牌阶段限一次，其可以交给你一张【闪】或【闪电】。"},"xinfu_guhuo":{"name":"蛊惑","script":"{derivation: [\"chanyuan\"],group: [\"guhuo_guess\",\"guhuo_respond\",\"guhuo_wuxie\"],enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('guhuo_phase'))return false;\n\t\t\t\t\tif(!player.countCards('h')) return false;\n\t\t\t\t\tvar list=['sha','shan','tao','jiu','taoyuan','wugu','juedou','huogong','jiedao','tiesuo','guohe','shunshou','wuzhong','wanjian','nanman'];\n\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\tlist=list.concat(['xietianzi','shuiyanqijunx','lulitongxin','lianjunshengyan','chiling','diaohulishan','yuanjiao','huoshaolianying']);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(event.filterCard({name:list[i]},player)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(name=='wuxie') continue;\n\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('蛊惑',[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(evt&&evt.filterCard){\n\t\t\t\t\t\t\treturn evt.filterCard({name:button.link[2]},player,evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tselectCard:1,\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3]},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将一张手牌做当'+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {save: \"true\",respondShan: \"true\",fireAttack: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.hasSkill('guhuo_phase')) return false;\n\t\t\t\t\t},threaten: \"1.2\",},}","info":"每名角色的回合限一次，你可以扣置一张手牌当做一张基本牌或普通锦囊牌使用或打出。其他角色依次选择是否质疑。一旦有其他角色质疑则翻开此牌：若为假则此牌作废，若为真，则质疑角色获得技能〖缠怨〗。"},"huoji":{"name":"火计","script":"{audio: \"2\",enable: \"phaseUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},viewAs: {name: \"huogong\",nature: \"fire\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('h',{color:'red'})) return false;\n\t\t\t\t},prompt: \"将一张红色牌当火攻使用\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('h')>player.hp){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 3-get.value(card)\n\t\t\t\t},ai: {fireAttack: \"true\",basic: {order: \"4\",value: [3,1],useful: \"1\",},wuxie: function (target,card,player,current,state){\n\t\t\t\t\t\tif(get.attitude(current,player)>=0&&state>0) return false;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\t\tif(nh<=player.hp&&nh<=4&&_status.event.name=='chooseToUse'){\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'huogong'},player,_status.event)){\n\t\t\t\t\t\t\t\t\treturn -10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(_status.event.skill){\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\n\t\t\t\t\t\t\t\t\tif(viewAs=='huogong') return -10;\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='huogong') return -10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkill('huogong2')||target.countCards('h')==0) return 0;\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\n\t\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'huogong'},player,_status.event)){\n\t\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(_status.event.skill){\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\n\t\t\t\t\t\t\t\t\tif(viewAs=='huogong') return -1.5;\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='huogong') return -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {damage: \"1\",fireDamage: \"1\",natureDamage: \"1\",norepeat: \"1\",},},}","info":"出牌阶段，你可以将你的任意一张红色手牌当作【火攻】使用。"},"bazhen":{"name":"八阵","script":"{audio: \"2\",audioname: [\"re_sp_zhugeliang\",\"ol_sp_zhugeliang\",\"ol_pangtong\"],group: \"bazhen_bagua\",locked: \"true\",}","info":"锁定技，若你的防具栏内没有牌且没有被废除，则你视为装备着【八卦阵】。"},"kanpo":{"name":"看破","script":"{audio: \"2\",enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('h',{color:'black'})>0;\n\t\t\t\t},viewAs: {name: \"wuxie\",},prompt: \"将一张黑色手牌当无懈可击使用\",check: function (card){\n\t\t\t\t\tvar tri=_status.event.getTrigger();\n\t\t\t\t\tif(tri&&tri.card&&tri.card.name=='chiling') return -1;\n\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t},threaten: \"1.2\",ai: {basic: {useful: [6,4],value: [6,4],},result: {player: \"1\",},expose: \"0.2\",},}","info":"你可以将你的任意一张黑色手牌当做【无懈可击】使用。"},"lianhuan":{"name":"连环","script":"{audio: \"lianhuan1\",group: [\"lianhuan1\",\"lianhuan2\"],}","info":"出牌阶段，你可以将一张梅花手牌当做【铁索连环】使用或重铸。"},"oldniepan":{"name":"涅槃","script":"{audio: \"niepan\",unique: \"true\",enable: \"chooseToUse\",mark: \"true\",skillAnimation: \"true\",animationStr: \"涅盘\",limited: \"true\",animationColor: \"orange\",init: function (player){\n\t\t\t\t\tplayer.storage.oldniepan=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.oldniepan) return false;\n\t\t\t\t\tif(event.type=='dying'){\n\t\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('oldniepan');\n\t\t\t\t\tplayer.storage.oldniepan=true;\n\t\t\t\t\tplayer.discard(player.getCards('hej'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.link(false);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.turnOver(false);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(player.hp<3){\n\t\t\t\t\t\tplayer.recover(3-player.hp);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",skillTagFilter: function (player,arg,target){\n\t\t\t\t\t\tif(player!=target||player.storage.oldniepan) return false;\n\t\t\t\t\t},save: \"true\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<=0) return 10;\n\t\t\t\t\t\t\tif(player.hp<=2&&player.countCards('he')<=1) return 10;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.storage.oldniepan) return 0.6;\n\t\t\t\t\t},},intro: {content: \"limited\",},}","info":"限定技，当你处于濒死状态时，你可以弃置你区域内的所有牌并复原你的武将牌，然后摸三张牌并将体力回复至3点。"},"quhu":{"name":"驱虎","script":"{audio: \"2\",audioname: [\"re_xunyu\"],enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')==0) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp>player.hp&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hp>player.hp&&player.canCompare(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(game.hasPlayer(function(player){\n\t\t\t\t\t\t\treturn player!=target&&target.inRange(player);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\t\t\tvar source=_status.event.source;\n\t\t\t\t\t\t\t\treturn target!=source&&source.inRange(target);\n\t\t\t\t\t\t\t},true).set('ai',function(target){\n\t\t\t\t\t\t\t\treturn get.damageEffect(target,_status.event.source,player);\n\t\t\t\t\t\t\t}).set('source',target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.damage(target);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\ttarget.line(result.targets[0],'green');\n\t\t\t\t\t\tresult.targets[0].damage(target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"0.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tvar oc=(target.countCards('h')==1);\n\t\t\t\t\t\t\tif(att>0&&oc) return 0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=target&&players[i]!=player&&\n\t\t\t\t\t\t\t\t\ttarget.inRange(players[i])){\n\t\t\t\t\t\t\t\t\tif(get.damageEffect(players[i],target,player)>0){\n\t\t\t\t\t\t\t\t\t\treturn att>0?att/2:att-(oc?5:0);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},player: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('jueqing',false,target)) return -10;\n\t\t\t\t\t\t\tvar mn=1;\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tmn=Math.max(mn,hs[i].number);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mn<=11&&player.hp<2) return -20;\n\t\t\t\t\t\t\tvar max=player.maxHp-hs.length;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>2){\n\t\t\t\t\t\t\t\t\tmax=Math.max(Math.min(5,players[i].hp)-players[i].countCards('h'),max);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tswitch(max){\n\t\t\t\t\t\t\t\tcase 0:return mn==13?0:-20;\n\t\t\t\t\t\t\t\tcase 1:return mn>=12?0:-15;\n\t\t\t\t\t\t\t\tcase 2:return 0;\n\t\t\t\t\t\t\t\tcase 3:return 1;\n\t\t\t\t\t\t\t\tdefault:return max;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},expose: \"0.2\",},}","info":"出牌阶段限一次，你可以与一名体力值大于你的角色拼点，若你赢，则该角色对其攻击范围内另一名由你指定的角色造成1点伤害。若你没赢，该角色对你造成一点伤害。"},"jieming":{"name":"节命","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('jieming'),function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')<Math.min(target.maxHp,5);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>2){\n\t\t\t\t\t\t\treturn Math.min(5,target.maxHp)-target.countCards('h');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att/3;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('jieming',result.targets);\n\t\t\t\t\t\tfor(var i=0;i<result.targets.length;i++){\n\t\t\t\t\t\t\tresult.targets[i].drawTo(Math.min(5,result.targets[i].maxHp));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.count) event.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.hp>1){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(get.attitude(target,players[i])>0){\n\t\t\t\t\t\t\t\t\t\tmax=Math.max(Math.min(5,players[i].hp)-players[i].countCards('h'),max);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tswitch(max){\n\t\t\t\t\t\t\t\t\tcase 0:return 2;\n\t\t\t\t\t\t\t\t\tcase 1:return 1.5;\n\t\t\t\t\t\t\t\t\tcase 2:return [1,2];\n\t\t\t\t\t\t\t\t\tdefault:return [0,max];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif((card.name=='tao'||card.name=='caoyao')&&\n\t\t\t\t\t\t\t\ttarget.hp>1&&target.countCards('h')<=target.hp) return [0,0];\n\t\t\t\t\t\t},},},}","info":"当你受到1点伤害后，你可令一名角色将手牌摸至X张（X为其体力上限且至多为5）。"},"qiangxix":{"name":"强袭","script":"{inherit: \"reqiangxi\",audioname: [\"boss_lvbu3\"],audio: \"qiangxi\",usable: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(target.hasSkill('reqiangxi_off')) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},subSkill: {off: {sub: \"true\",},},enable: \"phaseUse\",filterCard: function (card){\n\t\t\t\t\treturn get.subtype(card)=='equip1';\n\t\t\t\t},selectCard: function (){\n\t\t\t\t\treturn [0,1];\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(cards.length==0){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.addTempSkill('reqiangxi_off');\n\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t},position: \"he\",ai: {order: \"8.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\t\t\tif(player.hp<2) return 0;\n\t\t\t\t\t\t\t\tif(target.hp>=player.hp) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},},threaten: \"1.5\",}","info":"出牌阶段限两次，你可以失去一点体力或弃置一张武器牌，然后一名本阶段内未成为过〖强袭〗的目标的其他角色造成一点伤害。"},"tianyi":{"name":"天义","script":"{audio: \"2\",audioname: [\"re_taishici\"],enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('tianyi2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addTempSkill('tianyi3');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (name,player){\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tif(player.countCards('h','sha')==0){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(cards[i].name!='sha'&&cards[i].number>11&&get.value(cards[i])<7){\n\t\t\t\t\t\t\t\treturn 9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.order({name:'sha'})-1;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('h','sha')>0) return 0.6;\n\t\t\t\t\t\t\tvar num=player.countCards('h');\n\t\t\t\t\t\t\tif(num>player.hp) return 0;\n\t\t\t\t\t\t\tif(num==1) return -2;\n\t\t\t\t\t\t\tif(num==2) return -1;\n\t\t\t\t\t\t\treturn -0.7;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\tif(num==1) return -1;\n\t\t\t\t\t\t\tif(num==2) return -0.7;\n\t\t\t\t\t\t\treturn -0.5\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"出牌阶段限一次，你可以和一名其他角色拼点。若你赢，你获得以下技能效果直到回合结束：你使用【杀】没有距离限制；可额外使用一张【杀】；使用【杀】时可额外指定一个目标。若你没赢，你不能使用【杀】直到回合结束。"},"shuangxiong":{"name":"双雄","script":"{audio: \"true\",audioname: [\"re_yanwen\"],trigger: {player: \"phaseDrawBegin1\",},check: function (event,player){\n\t\t\t\t\tif(player.countCards('h')>player.hp) return true;\n\t\t\t\t\tif(player.countCards('h')>3) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge(ui.special);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.gain(result.card);\n\t\t\t\t\tplayer.$gain2(result.card);\n\t\t\t\t\tplayer.addTempSkill('shuangxiong2');\n\t\t\t\t\tplayer.storage.shuangxiong=get.color(result.card);\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t},}","info":"摸牌阶段，你可以改为进行一次判定：你获得此判定牌，且于此回合的出牌阶段，你可以将任意一张与此判定牌不同颜色的手牌当做【决斗】使用。"},"luanji":{"name":"乱击","script":"{audio: \"2\",enable: \"phaseUse\",viewAs: {name: \"wanjian\",},filterCard: function (card,player){\n\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\treturn get.suit(card)==get.suit(ui.selected.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(card!=cards[i]){\n\t\t\t\t\t\t\tif(get.suit(card)==get.suit(cards[i])) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},selectCard: \"2\",complexCard: \"true\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('wanjian',current);\n\t\t\t\t\t});\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tvar eff=get.sgn(get.effect(targets[i],{name:'wanjian'},player,player));\n\t\t\t\t\t\tif(targets[i].hp==1){\n\t\t\t\t\t\t\teff*=1.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnum+=eff;\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.needsToDiscard(-1)){\n\t\t\t\t\t\tif(targets.length>=7){\n\t\t\t\t\t\t\tif(num<2) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(targets.length>=5){\n\t\t\t\t\t\t\tif(num<1.5) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},ai: {basic: {order: \"8.5\",useful: \"1\",value: \"5\",},wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"出牌阶段，你可以将任意两张相同花色的手牌当做【万箭齐发】使用。"},"xueyi":{"name":"血裔","script":"{trigger: {player: \"phaseDiscardBefore\",},audio: \"2\",audioname: [\"re_yuanshao\"],forced: \"true\",firstDo: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hasZhuSkill('xueyi')&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='qun';\n\t\t\t\t\t})&&player.countCards('h')>player.hp;\n\t\t\t\t},content: function (){},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.hasZhuSkill('xueyi')){\n\t\t\t\t\t\t\treturn num+game.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(player!=current&&current.group=='qun') return 2;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t},},zhuSkill: \"true\",}","info":"主公技，锁定技，场上每有一名其他群雄角色存活，你的手牌上限便+2。"},"huoshou":{"name":"祸首","script":"{audio: \"huoshou1\",audioname: [\"re_menghuo\"],locked: \"true\",group: [\"huoshou1\",\"huoshou2\"],ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='nanman') return 0;\n\t\t\t\t\t\t},},},}","info":"锁定技，【南蛮入侵】对你无效；你视为所有【南蛮入侵】的伤害来源。"},"zaiqixx":{"name":"再起","script":"{audio: \"zaiqi\",inherit: \"zaiqi\",trigger: {player: \"phaseDrawBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed&&player.hp<player.maxHp;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.getDamagedHp()<2){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telse if(player.getDamagedHp()==2){\n\t\t\t\t\t\treturn player.countCards('h')>=2;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\tevent.cards=get.cards(player.getDamagedHp()+(event.name=='zaiqi'?0:1));\n\t\t\t\t\tgame.cardsGotoOrdering(event.cards);\n\t\t\t\t\tplayer.showCards(event.cards);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.suit(event.cards[i])=='heart'){\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\tevent.cards.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tplayer.recover(num);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tplayer.gain(event.cards);\n\t\t\t\t\t\tplayer.$gain2(event.cards);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 2;\n\t\t\t\t\t\tif(target.hp==2) return 1.5;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},},}","info":"摸牌阶段，若你已受伤，则你可以改为展示牌堆顶的X张牌（X为你已损失的体力值+1），并回复X点体力（X为其中♥牌的数目）。然后你将这些♥牌置入弃牌堆，并获得其余的牌。"},"juxiang":{"name":"巨象","script":"{locked: \"true\",audio: \"juxiang1\",audioname: [\"re_zhurong\"],group: [\"juxiang1\",\"juxiang2\"],ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='nanman') return [0,1];\n\t\t\t\t\t\t},},},}","info":"锁定技，【南蛮入侵】对你无效。其他角色使用的【南蛮入侵】结算后进入弃牌堆时，你获得之。"},"lieren":{"name":"烈刃","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"boss_lvbu3\"],trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn (event.card&&event.card.name=='sha'&&event.getParent().name=='sha'&&\n\t\t\t\t\t\tevent.player.isAlive()&&\n\t\t\t\t\t\tplayer.canCompare(event.player));\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0&&player.countCards('h')>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool&&trigger.player.countGainableCards(player,'he')){\n\t\t\t\t\t\tplayer.gainPlayerCard(trigger.player,true,'he');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用【杀】造成伤害后，可与受到该伤害的角色进行拼点；若你赢，你获得对方的一张牌。"},"xingshang":{"name":"行殇","script":"{audio: \"2\",trigger: {global: \"die\",},filter: function (event){\n\t\t\t\t\treturn event.player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.togain=trigger.player.getCards('he');\n\t\t\t\t\tplayer.gain(event.togain,trigger.player,'giveAuto');\n\t\t\t\t},}","info":"当有角色死亡后，你可以获得该角色的所有牌。"},"fangzhu":{"name":"放逐","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('fangzhu'),'令一名其他角色将武将牌翻面并摸'+get.cnNumber(player.getDamagedHp())+'张牌',function(card,player,target){\n\t\t\t\t\t\treturn player!=target\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tif(target.hasSkillTag('noturn')) return 0;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)==0) return 0;\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)>0){\n\t\t\t\t\t\t\tif(target.classList.contains('turnedover')) return 1000-target.countCards('h');\n\t\t\t\t\t\t\tif(player.getDamagedHp()<3) return -1;\n\t\t\t\t\t\t\treturn 100-target.countCards('h');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(target.classList.contains('turnedover')) return -1;\n\t\t\t\t\t\t\tif(player.getDamagedHp()>=3) return -1;\n\t\t\t\t\t\t\treturn 1+target.countCards('h');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('fangzhu',result.targets);\n\t\t\t\t\t\tresult.targets[0].draw(player.getDamagedHp());\n\t\t\t\t\t\tresult.targets[0].turnOver();\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(target.hp<=1) return;\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar hastarget=false;\n\t\t\t\t\t\t\t\tvar turnfriend=false;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(get.attitude(target,players[i])<0&&!players[i].isTurnedOver()){\n\t\t\t\t\t\t\t\t\t\thastarget=true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(get.attitude(target,players[i])>0&&players[i].isTurnedOver()){\n\t\t\t\t\t\t\t\t\t\thastarget=true;\n\t\t\t\t\t\t\t\t\t\tturnfriend=true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0&&!hastarget) return;\n\t\t\t\t\t\t\t\tif(turnfriend||target.hp==target.maxHp) return [0.5,1];\n\t\t\t\t\t\t\t\tif(target.hp>1) return [1,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可令一名其他角色摸X张牌（X为你已损失的体力值），然后该角色将武将牌翻面。"},"songwei":{"name":"颂威","script":"{unique: \"true\",group: \"songwei2\",audioname: [\"re_caopi\"],audio: \"songwei2\",zhuSkill: \"true\",}","info":"主公技，其他魏势力的角色的判定牌结果为黑色且生效后，其可以令你摸一张牌。"},"haoshi":{"name":"好施","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin2\",},threaten: \"1.4\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.countCards('h')<=1) return true;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.isMinHandcard()&&get.attitude(player,current)>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num+=2;\n\t\t\t\t\tplayer.addSkill('haoshi2');\n\t\t\t\t},ai: {threaten: \"2\",ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\t\tif(player.countCards('h')!=2) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"摸牌阶段，你可以额外摸两张牌。若此时你的手牌数多于五张，你须将一半(向下取整)的手牌交给场上除你外手牌数最少的一名角色。"},"dimeng":{"name":"缔盟","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: function (){\n\t\t\t\t\tif(ui.selected.targets.length==2) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},selectCard: [0,null],selectTarget: \"2\",complexCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(ui.selected.targets.length==0) return true;\n\t\t\t\t\treturn (Math.abs(ui.selected.targets[0].countCards('h')-target.countCards('h'))==\n\t\t\t\t\t\tui.selected.cards.length);\n\t\t\t\t},multitarget: \"true\",multiline: \"true\",complexSelect: \"true\",content: function (){\n\t\t\t\t\ttargets[0].swapHandcards(targets[1]);\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar list=[],player=_status.event.player;\n\t\t\t\t\tvar num=player.countCards('he');\n\t\t\t\t\tvar count;\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player&&get.attitude(player,players[i])>3) list.push(players[i]);\n\t\t\t\t\t}\n\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\treturn a.countCards('h')-b.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length==0) return -1;\n\t\t\t\t\tvar from=list[0];\n\t\t\t\t\tlist.length=0;\n\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player&&get.attitude(player,players[i])<1) list.push(players[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length==0) return -1;\n\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\treturn b.countCards('h')-a.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t\tif(from.countCards('h')>=list[0].countCards('h')) return -1;\n\t\t\t\t\tfor(var i=0;i<list.length&&from.countCards('h')<list[i].countCards('h');i++){\n\t\t\t\t\t\tif(list[i].countCards('h')-from.countCards('h')<=num){\n\t\t\t\t\t\t\tcount=list[i].countCards('h')-from.countCards('h');break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(count<2&&from.countCards('h')>=2) return -1;\n\t\t\t\t\tif(ui.selected.cards.length<count) return 11-get.value(card);\n\t\t\t\t\treturn -1;\n\t\t\t\t},ai: {order: \"6\",threaten: \"3\",expose: \"0.9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tvar num=player.countCards('he');\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(players[i]!=player&&get.attitude(player,players[i])>3) list.push(players[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\t\t\t\treturn a.countCards('h')-b.countCards('h');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(target==list[0]) return get.attitude(player,target);\n\t\t\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tvar from=ui.selected.targets[0];\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(players[i]!=player&&get.attitude(player,players[i])<1) list.push(players[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\t\t\t\treturn b.countCards('h')-a.countCards('h');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(from.countCards('h')>=list[0].countCards('h')) return -get.attitude(player,target);\n\t\t\t\t\t\t\t\tfor(var i=0;i<list.length&&from.countCards('h')<list[i].countCards('h');i++){\n\t\t\t\t\t\t\t\t\tif(list[i].countCards('h')-from.countCards('h')<=num){\n\t\t\t\t\t\t\t\t\t\tvar count=list[i].countCards('h')-from.countCards('h');\n\t\t\t\t\t\t\t\t\t\tif(count<2&&from.countCards('h')>=2) return -get.attitude(player,target);\n\t\t\t\t\t\t\t\t\t\tif(target==list[i]) return get.attitude(player,target);\n\t\t\t\t\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择其他两名角色，你弃置等同于这两名角色手牌数量之差的牌，然后交换他们的手牌。"},"gzyinghun":{"name":"英魂","script":"{audio: \"yinghun\",audioname: [\"re_sunjian\",\"sunce\",\"re_sunben\",\"re_sunce\",\"ol_sunjian\"],trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.getDamagedHp()>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('gzyinghun'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.getDamagedHp()==1&&target.countCards('he')==0){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)>0){\n\t\t\t\t\t\t\treturn 10+get.attitude(_status.event.player,target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.getDamagedHp()==1){\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.num=player.getDamagedHp();\n\t\t\t\t\t\tplayer.logSkill(event.name,result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(event.num==1){\n\t\t\t\t\t\t\tevent.directcontrol=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar str1='摸'+get.cnNumber(event.num,true)+'弃一';\n\t\t\t\t\t\t\tvar str2='摸一弃'+get.cnNumber(event.num,true);\n\t\t\t\t\t\t\tplayer.chooseControl(str1,str2,function(event,player){\n\t\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t\t}).set('choice',get.attitude(player,event.target)>0?str1:str2);\n\t\t\t\t\t\t\tevent.str=str1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.directcontrol||result.control==event.str){\n\t\t\t\t\t\tevent.target.draw(event.num);\n\t\t\t\t\t\tevent.target.chooseToDiscard(true,'he');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.target.draw();\n\t\t\t\t\t\tevent.target.chooseToDiscard(event.num,true,'he');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==target.maxHp) return 0.5;\n\t\t\t\t\t\tif(target.hp==1) return 2;\n\t\t\t\t\t\tif(target.hp==2) return 1.5;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},maixie: \"true\",},}","info":"准备阶段开始时，若你已受伤，你可令一名其他角色执行一项：摸X张牌，然后弃置一张牌；或摸一张牌，然后弃置X张牌（X为你已损失的体力值）"},"jiuchi":{"name":"酒池","script":"{audio: \"2\",audioname: [\"re_dongzhuo\"],enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.suit(card)=='spade';\n\t\t\t\t},viewAs: {name: \"jiu\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('h',{suit:'spade'})) return false;\n\t\t\t\t},prompt: \"将一张黑桃手牌当酒使用\",check: function (card){\n\t\t\t\t\tif(_status.event.type=='dying') return 1/Math.max(0.1,get.value(card));\n\t\t\t\t\treturn 4-get.value(card);\n\t\t\t\t},ai: {threaten: \"1.5\",basic: {useful: function (card,i){\n\t\t\t\t\t\t\tif(_status.event.player.hp>1){\n\t\t\t\t\t\t\t\tif(i==0) return 4;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==0) return 7.3;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t},value: function (card,player,i){\n\t\t\t\t\t\t\tif(player.hp>1){\n\t\t\t\t\t\t\t\tif(i==0) return 5;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==0) return 7.3;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t},},order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.2;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target&&target.isDying()) return 2;\n\t\t\t\t\t\t\tif(target&&!target.isPhaseUsing()) return 0;\n\t\t\t\t\t\t\tif(lib.config.mode=='stone'&&!player.isMin()){\n\t\t\t\t\t\t\t\tif(player.getActCount()+1>=player.actcount) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar shas=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('h','zhuge'))){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshas.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.order(b)-get.order(a);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tvar card;\n\t\t\t\t\t\t\tif(shas.length){\n\t\t\t\t\t\t\t\tfor(var i=0;i<shas.length;i++){\n\t\t\t\t\t\t\t\t\tif(lib.filter.filterCard(shas[i],target)){\n\t\t\t\t\t\t\t\t\t\tcard=shas[i];break;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(player.hasSha()&&player.needsToDiscard()){\n\t\t\t\t\t\t\t\tif(player.countCards('h','hufu')!=1){\n\t\t\t\t\t\t\t\t\tcard={name:'sha'};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn (get.attitude(target,current)<0&&\n\t\t\t\t\t\t\t\t\t\ttarget.canUse(card,current,true,true)&&\n\t\t\t\t\t\t\t\t\t\t!current.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t\t})&&\n\t\t\t\t\t\t\t\t\t\tget.effect(current,card,target)>0);\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},tag: {save: \"1\",},},}","info":"你可以将一张♠手牌当作【酒】使用。"},"roulin":{"name":"肉林","script":"{audio: \"2\",audioname: [\"re_dongzhuo\",\"ol_dongzhuo\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(player==event.player){\n\t\t\t\t\t\treturn event.target.sex=='female';\n\t\t\t\t\t}\n\t\t\t\t\treturn event.player.sex=='female';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player==event.player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar id=(player==trigger.player?trigger.target:player).playerid;\n\t\t\t\t\tvar map=trigger.getParent().customArgs;\n\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\tif(typeof map[id].shanRequired=='number'){\n\t\t\t\t\t\tmap[id].shanRequired++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tmap[id].shanRequired=2;\n\t\t\t\t\t}\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg.card.name!='sha'||arg.target.sex!='female'||arg.target.countCards('h','shan')>1) return false;\n\t\t\t\t\t},},}","info":"锁定技。你对女性角色、女性角色对你使用【杀】时，都需连续使用两张【闪】才能抵消。"},"benghuai":{"name":"崩坏","script":"{audio: \"2\",audioname: [\"zhugedan\",\"re_dongzhuo\",\"ol_dongzhuo\"],trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.isMinHp()&&!player.hasSkill('rejiuchi_air')&&!player.hasSkill('oljiuchi_air');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseControl('baonue_hp','baonue_maxHp',function(event,player){\n\t\t\t\t\t\tif(player.hp==player.maxHp) return 'baonue_hp';\n\t\t\t\t\t\tif(player.hp<player.maxHp-1||player.hp<=2) return 'baonue_maxHp';\n\t\t\t\t\t\treturn 'baonue_hp';\n\t\t\t\t\t}).set('prompt','崩坏：失去1点体力或减1点体力上限');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='baonue_hp'){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.loseMaxHp(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.5\",neg: \"true\",},}","info":"结束阶段，若你的体力不是全场最少的(或之一)，你须减1点体力或体力上限。"},"baonue":{"name":"暴虐","script":"{unique: \"true\",group: \"baonue2\",audioname: [\"re_dongzhuo\"],audio: \"baonue2\",zhuSkill: \"true\",}","info":"主公技，其他群雄角色造成伤害后，可进行一次判定，若为♠，你回复1点体力。"},"luanwu":{"name":"乱武","script":"{audio: \"2\",unique: \"true\",enable: \"phaseUse\",limited: \"true\",skillAnimation: \"epic\",animationColor: \"thunder\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},selectTarget: \"-1\",multitarget: \"true\",multiline: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('luanwu');\n\t\t\t\t\tevent.current=player.next;\n\t\t\t\t\tevent.currented=[];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.currented.push(event.current);\n\t\t\t\t\tevent.current.animate('target');\n\t\t\t\t\tevent.current.chooseToUse('乱武：使用一张杀或流失一点体力',{name:'sha'},function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\tif(!player.canUse('sha',target)) return false;\n\t\t\t\t\t\tif(get.distance(player,target)<=1) return true;\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&get.distance(player,current)<get.distance(player,target);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool==false) event.current.loseHp();\n\t\t\t\t\tevent.current=event.current.next;\n\t\t\t\t\tif(event.current!=player&&!event.currented.contains(event.current)){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(lib.config.mode=='identity'&&game.zhu.isZhu&&player.identity=='fan'){\n\t\t\t\t\t\t\t\tif(game.zhu.hp==1&&game.zhu.countCards('h')<=2) return 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,players[i]);\n\t\t\t\t\t\t\t\tif(att>0) att=1;\n\t\t\t\t\t\t\t\tif(att<0) att=-1;\n\t\t\t\t\t\t\t\tif(players[i]!=player&&players[i].hp<=3){\n\t\t\t\t\t\t\t\t\tif(players[i].countCards('h')==0) num+=att/players[i].hp;\n\t\t\t\t\t\t\t\t\telse if(players[i].countCards('h')==1) num+=att/2/players[i].hp;\n\t\t\t\t\t\t\t\t\telse if(players[i].countCards('h')==2) num+=att/4/players[i].hp;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(players[i].hp==1) num+=att*1.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hp==1){\n\t\t\t\t\t\t\t\treturn -num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hp==2){\n\t\t\t\t\t\t\t\treturn -game.players.length/4-num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -game.players.length/3-num;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可令除你外的所有角色依次对与其距离最近的另一名角色使用一张【杀】，否则失去1点体力。"},"wansha":{"name":"完杀","script":"{locked: \"true\",audio: \"2\",audioname: [\"boss_lvbu3\",\"shen_simayi\"],global: \"wansha2\",trigger: {global: \"dying\",},priority: \"15\",forced: \"true\",filter: function (event,player,name){\n\t\t\t\t\treturn _status.currentPhase==player&&event.player!=player;\n\t\t\t\t},content: function (){},}","info":"锁定技，你的回合内，除你以外，不处于濒死状态的角色不能使用【桃】。"},"weimu":{"name":"帷幕","script":"{trigger: {global: \"useCard1\",},audio: \"2\",forced: \"true\",firstDo: \"true\",filter: function (event,player,card){\n\t\t\t\t\tif(get.color(event.card)!='black') return false;\n\t\t\t\t\treturn event.card.name=='nanman'&&player!=event.player||event.card.name=='wanjian'&&player!=event.player||event.card.name=='taoyuan'&&player.hp<player.maxHp||event.card.name=='wugu';\n\t\t\t\t},content: function (){},mod: {targetEnabled: function (card){\n\t\t\t\t\t\tif((get.type(card)=='trick'||get.type(card)=='delay')&&\n\t\t\t\t\t\t\tget.color(card)=='black') return false;\n\t\t\t\t\t},},}","info":"锁定技，你不能成为黑色锦囊牌的目标。"},"tiaoxin":{"name":"挑衅","script":"{audio: \"2\",audioname: [\"sp_jiangwei\",\"xiahouba\",\"re_jiangwei\",\"gz_jiangwei\"],enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.inRange(player)&&target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.chooseToUse(function(card,player,event){\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t},'挑衅：对'+get.translation(player)+'使用一张杀，或令其弃置你的一张牌').set('targetRequired',true).set('complexSelect',true).set('filterTarget',function(card,player,target){\n\t\t\t\t\t\tif(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;\n\t\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\n\t\t\t\t\t}).set('sourcex',player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool==false&&target.countCards('he')>0){\n\t\t\t\t\t\tplayer.discardPlayerCard(target,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"4\",expose: \"0.2\",result: {target: \"-1\",player: function (player,target){\n\t\t\t\t\t\t\tif(target.countCards('h')==0) return 0;\n\t\t\t\t\t\t\tif(target.countCards('h')==1) return -0.1;\n\t\t\t\t\t\t\tif(player.hp<=2) return -2;\n\t\t\t\t\t\t\tif(player.countCards('h','shan')==0) return -1;\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},threaten: \"1.1\",},}","info":"出牌阶段限一次，你可以指定一名攻击范围内包含你的角色，该角色需对你使用一张【杀】，否则你弃置其一张牌。"},"zhiji":{"name":"志继","script":"{skillAnimation: \"true\",animationColor: \"fire\",audio: \"2\",audioname: [\"re_jiangwei\"],unique: \"true\",juexingji: \"true\",derivation: \"reguanxing\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.zhiji) return false;\n\t\t\t\t\treturn player.countCards('h')==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('zhiji');\n\t\t\t\t\tplayer.chooseDrawRecover(2,true);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.storage.zhiji=true;\n\t\t\t\t\tif(player.hp>player.maxHp) player.hp=player.maxHp;\n\t\t\t\t\tplayer.update();\n\t\t\t\t\tplayer.addSkill('reguanxing');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你没有手牌，你须回复1点体力或摸两张牌，然后减1点体力上限，并获得技能〖观星〗。"},"xiangle":{"name":"享乐","script":"{audio: \"2\",audioname: [\"re_liushan\",\"ol_liushan\"],trigger: {target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar eff=get.effect(player,trigger.card,trigger.player,trigger.player);\n\t\t\t\t\ttrigger.player.chooseToDiscard('享乐：弃置一张基本牌，否则杀对'+get.translation(player)+'无效',function(card){\n\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.eff>0){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('eff',eff);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.attitude(player,target)<0){\n\t\t\t\t\t\t\t\tif(_status.event.name=='xiangle') return;\n\t\t\t\t\t\t\t\tvar bs=player.getCards('h',{type:'basic'});\n\t\t\t\t\t\t\t\tif(bs.length<2) return 0;\n\t\t\t\t\t\t\t\tif(player.hasSkill('jiu')||player.hasSkill('tianxianjiu')) return;\n\t\t\t\t\t\t\t\tif(bs.length<=3&&player.countCards('h','sha')<=1){\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<bs.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(bs[i].name!='sha'&&get.value(bs[i])<7){\n\t\t\t\t\t\t\t\t\t\t\treturn [1,0,1,-0.5];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn [1,0,1,-0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当其他角色使用【杀】指定你为目标时，其需弃置一张基本牌，否则此【杀】对你无效。"},"fangquan":{"name":"放权","script":"{audio: \"2\",trigger: {player: \"phaseUseBefore\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&!player.hasSkill('fangquan3');\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar fang=player.countMark('fangquan2')==0&&player.hp>=2&&player.countCards('h')<=player.hp+1;\n\t\t\t\t\tplayer.chooseBool(get.prompt2('fangquan')).set('ai',function(){\n\t\t\t\t\t\tif(!_status.event.fang) return false;\n\t\t\t\t\t\treturn game.hasPlayer(function(target){\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')||target==player) return false;\n\t\t\t\t\t\t\tif(get.attitude(player,target)>4){\n\t\t\t\t\t\t\t\treturn (get.threaten(target)/Math.sqrt(target.hp+1)/Math.sqrt(target.countCards('h')+1)>0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}).set('fang',fang);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('fangquan');\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tplayer.addTempSkill('fangquan2');\n\t\t\t\t\t\tplayer.addMark('fangquan2',1,false);\n\t\t\t\t\t\t//player.storage.fangquan=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t},}","info":"你可跳过你的出牌阶段，若如此做，回合结束时，你可以弃置一张手牌并令一名其他角色进行一个额外的回合。"},"ruoyu":{"name":"若愚","script":"{skillAnimation: \"true\",animationColor: \"fire\",audio: \"2\",audioname: [\"re_liushan\"],unique: \"true\",juexingji: \"true\",zhuSkill: \"true\",keepSkill: \"true\",derivation: \"jijiang\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('ruoyu'))return false;\n\t\t\t\t\tif(player.storage.ruoyu) return false;\n\t\t\t\t\treturn player.isMinHp();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.ruoyu=true;\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tif(player.hasSkill('ruoyu')){\n\t\t\t\t\t\tplayer.addSkill('jijiang');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addAdditionalSkill('ruoyu','jijiang');\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.isZhu){\n\t\t\t\t\t\tplayer.storage.zhuSkill_ruoyu=['jijiang'];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.trigger('zhuUpdate');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.awakenSkill('ruoyu');\n\t\t\t\t},}","info":"主公技，觉醒技，准备阶段，若你的体力是全场最少的(或之一)，你须增加1点体力上限并回复1点体力，然后获得技能〖激将〗。"},"qiaobian":{"name":"巧变","script":"{audio: \"2\",group: [\"qiaobian1\",\"qiaobian2\",\"qiaobian3\",\"qiaobian4\"],ai: {threaten: \"3\",},}","info":"你可以弃置一张手牌并跳过自己的一个阶段(准备阶段和结束阶段除外)；若你以此法跳过了摸牌阶段，则你可以获得至多两名其他角色的各一张手牌；若你以此法跳过了出牌阶段，则你可以移动场上的一张牌。"},"tuntian":{"name":"屯田","script":"{audio: \"2\",audioname: [\"gz_dengai\"],trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase) return false;\n\t\t\t\t\tif(event.name=='gain'&&event.player==player) return false;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.cards2&&evt.cards2.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.judge(function(card){\n\t\t\t\t\t\tif(get.suit(card)=='heart') return -1;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\tif(get.mode()!='guozhan'){\n\t\t\t\t\t\tnext.callback=lib.skill.tuntian.callback;\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool||get.position(result.card)!='d'){\n\t\t\t\t\t\t//game.cardsDiscard(card);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.card=result.card;\n\t\t\t\t\tevent.node=result.node;\n\t\t\t\t\tplayer.chooseBool('是否将'+get.translation(event.card)+'作为【田】置于武将牌上？').ai=function(){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!result.bool&&!event.directbool){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t};\n\t\t\t\t\tplayer.storage.tuntian.push(event.card);\n\t\t\t\t\tgame.cardsGotoSpecial(card);\n\t\t\t\t\tevent.node.moveDelete(player);\n\t\t\t\t\tgame.broadcast(function(cardid,player){\n\t\t\t\t\t\tvar node=lib.cardOL[cardid];\n\t\t\t\t\t\tif(node){\n\t\t\t\t\t\t\tnode.moveDelete(player);\n\t\t\t\t\t\t}\n\t\t\t\t\t},event.node.cardid,player);\n\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([event.node]));\n\t\t\t\t\tplayer.markSkill('tuntian');\n\t\t\t\t\tgame.addVideo('storage',player,['tuntian',get.cardsInfo(player.storage.tuntian),'cards']);\n\t\t\t\t},callback: function (){\n\t\t\t\t\tif(!event.judgeResult.bool){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.tuntian.push(event.card);\n\t\t\t\t\tgame.cardsGotoSpecial(card);\n\t\t\t\t\tevent.node=event.judgeResult.node;\n\t\t\t\t\tevent.node.moveDelete(player);\n\t\t\t\t\tgame.broadcast(function(cardid,player){\n\t\t\t\t\t\tvar node=lib.cardOL[cardid];\n\t\t\t\t\t\tif(node){\n\t\t\t\t\t\t\tnode.moveDelete(player);\n\t\t\t\t\t\t}\n\t\t\t\t\t},event.node.cardid,player);\n\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([event.node]));\n\t\t\t\t\tplayer.markSkill('tuntian');\n\t\t\t\t\tgame.addVideo('storage',player,['tuntian',get.cardsInfo(player.storage.tuntian),'cards']);\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.tuntian) player.storage.tuntian=[];\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t\tplayer.storage.tuntian.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"tuntian_dist\",locked: \"false\",subSkill: {dist: {locked: \"false\",mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\t\t\tif(from.storage.tuntian){\n\t\t\t\t\t\t\t\t\tvar num=distance-from.storage.tuntian.length;\n\t\t\t\t\t\t\t\t\tif(_status.event.skill=='jixi_backup'||_status.event.skill=='gzjixi_backup') num++;\n\t\t\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(!target.hasFriend()&&!player.hasUnknown()) return;\n\t\t\t\t\t\t\tif(_status.currentPhase==target) return;\n\t\t\t\t\t\t\tif(card.name!='shuiyanqijunx'&&get.tag(card,'loseCard')&&target.countCards('he')){\n\t\t\t\t\t\t\t\tif(target.hasSkill('ziliang')) return 0.7;\n\t\t\t\t\t\t\t\treturn [0.5,Math.max(2,target.countCards('h'))];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.isUnderControl(true,player)){\n\t\t\t\t\t\t\t\tif((get.tag(card,'respondSha')&&target.countCards('h','sha'))||\n\t\t\t\t\t\t\t\t\t(get.tag(card,'respondShan')&&target.countCards('h','shan'))){\n\t\t\t\t\t\t\t\t\tif(target.hasSkill('ziliang')) return 0.7;\n\t\t\t\t\t\t\t\t\treturn [0.5,1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.tag(card,'respondSha')||get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0&&card.name=='juedou') return;\n\t\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.hasSkillTag('maixie')) return;\n\t\t\t\t\t\t\t\tif(target.countCards('h')==0) return 2;\n\t\t\t\t\t\t\t\tif(target.hasSkill('ziliang')) return 0.7;\n\t\t\t\t\t\t\t\tif(get.mode()=='guozhan') return 0.5;\n\t\t\t\t\t\t\t\treturn [0.5,Math.max(target.countCards('h')/4,target.countCards('h','sha')+target.countCards('h','shan'))];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(target.countCards('h')==0) return 2;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},nodiscard: \"true\",nolose: \"true\",},}","info":"当你于回合外失去牌时，你可以进行一次判定。若判定结果不为♥，则你将此牌置于你的武将牌上，称之为【田】。锁定技，你计算与其他角色的距离时-X（X为你武将牌上【田】的数目）"},"zaoxian":{"name":"凿险","script":"{skillAnimation: \"true\",animationColor: \"thunder\",audio: \"2\",audioname: [\"re_dengai\"],unique: \"true\",juexingji: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.tuntian) return player.storage.tuntian.length>=3&&!player.storage.zaoxian;\n\t\t\t\t},derivation: \"jixi\",content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('jixi');\n\t\t\t\t\tplayer.storage.zaoxian=true;\n\t\t\t\t\tplayer.awakenSkill('zaoxian');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你武将牌上【田】的数量达到3张或更多，则你减1点体力上限，并获得技能〖急袭〗"},"jiang":{"name":"激昂","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"sp_lvmeng\",\"re_sunben\",\"re_sunce\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\tif(!(event.card.name=='juedou'||(event.card.name=='sha'&&get.color(event.card)=='red'))) return false;\n\t\t\t\t\treturn player==event.target||event.getParent().triggeredTargets3.length==1;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,0.6];\n\t\t\t\t\t\t},player: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,1];\n\t\t\t\t\t\t},},},}","info":"每当你使用（指定目标后）或被使用（成为目标后）一张【决斗】或红色的【杀】时，你可以摸一张牌。"},"hunzi":{"name":"魂姿","script":"{skillAnimation: \"true\",animationColor: \"wood\",audio: \"2\",juexingji: \"true\",derivation: [\"reyingzi\",\"gzyinghun\"],unique: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.hp<=1&&!player.storage.hunzi;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('reyingzi');\n\t\t\t\t\tplayer.addSkill('gzyinghun');\n\t\t\t\t\tgame.log(player,'获得了技能','#g【英姿】和【英魂】')\n\t\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\t\tplayer.storage[event.name]=true;\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 2;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},maixie: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')==1&&target.hp==2&&!target.isTurnedOver()&&\n\t\t\t\t\t\t\t_status.currentPhase!=target&&get.distance(_status.currentPhase,target,'absolute')<=3) return [0.5,1];\n\t\t\t\t\t\t},},},}","info":"觉醒技，准备阶段，若你的体力值为1，你减1点体力上限，并获得技能〖英姿〗和〖英魂〗。"},"zhiba":{"name":"制霸","script":"{unique: \"true\",global: \"zhiba2\",audioname: [\"re_sunben\"],audio: \"zhiba2\",zhuSkill: \"true\",}","info":"主公技，其他吴势力角色的出牌阶段限一次，其可与你进行一次拼点。若该角色没赢，你可以获得双方拼点的牌；你的觉醒技发动后，你可以拒绝此拼点。"},"zhijian":{"name":"直谏","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:'equip'})>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.isMin()) return false;\n\t\t\t\t\tvar type=get.subtype(card);\n\t\t\t\t\treturn player!=target&&target.isEmpty(type);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.equip(cards[0]);\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},discard: \"false\",prepare: function (cards,player,targets){\n\t\t\t\t\tplayer.$give(cards,targets[0],false);\n\t\t\t\t},ai: {basic: {order: \"10\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\tif(card) return get.effect(target,card,target,target);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"出牌阶段，你可以将手牌中的一张装备牌置于一名其他角色装备区里（不得替换原装备），然后摸一张牌。"},"guzheng":{"name":"固政","script":"{audio: \"2\",audioname: [\"re_zhangzhang\"],trigger: {global: \"phaseDiscardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.player!=player&&event.player.isIn()){\n\t\t\t\t\t\treturn event.player.getHistory('lose',function(evt){\n\t\t\t\t\t\t\treturn evt.type=='discard'&&evt.getParent('phaseDiscard')==event&&evt.hs.filterInD('d').length>0;\n\t\t\t\t\t\t}).length>0;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},checkx: function (event,player,cards,cards2){\n\t\t\t\t\tif(cards.length>2||get.attitude(player,event.player)>0) return true;\n\t\t\t\t\tfor(var i=0;i<cards2.length;i++){\n\t\t\t\t\t\tif(get.value(cards2[i],event.player,'raw')<0) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tvar cards2=[];\n\t\t\t\t\tgame.getGlobalHistory('cardMove',function(evt){\n\t\t\t\t\t\tif(evt.name=='cardsDiscard'&&evt.getParent('phaseDiscard')==trigger) cards.addArray(evt.cards.filterInD('d'));\n\t\t\t\t\t});\n\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\tcurrent.getHistory('lose',function(evt){\n\t\t\t\t\t\t\tif(evt.type!='discard'||evt.getParent('phaseDiscard')!=trigger) return;\n\t\t\t\t\t\t\tcards.addArray(evt.cards.filterInD('d'));\n\t\t\t\t\t\t\tif(current==trigger.player) cards2.addArray(evt.hs.filterInD('d'));\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar check=lib.skill.guzheng.checkx(trigger,player,cards,cards2);\n\t\t\t\t\tplayer.chooseCardButton(cards,'固政：选择令'+get.translation(trigger.player)+'收回的牌').set('ai',function(button){\n\t\t\t\t\t\tif(_status.event.check){\n\t\t\t\t\t\t\treturn 20-get.value(button.link,_status.event.getTrigger().player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('check',check).set('cards',cards2).set('filterButton',function(button){\n\t\t\t\t\t\treturn _status.event.cards.contains(button.link);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t\tplayer.logSkill('guzheng',trigger.player);\n\t\t\t\t\t\ttrigger.player.gain(result.links[0]);\n\t\t\t\t\t\ttrigger.player.$gain2(result.links[0]);\n\t\t\t\t\t\tgame.log(trigger.player,'收回了',result.links[0]);\n\t\t\t\t\t\tevent.cards.remove(result.links[0]);\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.gain(event.cards);\n\t\t\t\t\t\t\tplayer.$gain2(event.cards);\n\t\t\t\t\t\t\tgame.log(player,'收回了',event.cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",expose: \"0.2\",},}","info":"其他角色的弃牌阶段结束时，你可以令其获得本阶段内进入弃牌堆的牌中的一张，然后你获得其余的牌。"},"beige":{"name":"悲歌","script":"{audio: \"2\",audioname: [\"re_caiwenji\"],trigger: {global: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn (event.card&&event.card.name=='sha'&&event.source&&\n\t\t\t\t\t\tevent.player.classList.contains('dead')==false&&player.countCards('he'));\n\t\t\t\t},direct: \"true\",checkx: function (event,player){\n\t\t\t\t\tvar att1=get.attitude(player,event.player);\n\t\t\t\t\tvar att2=get.attitude(player,event.source);\n\t\t\t\t\treturn att1>0&&att2<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt2('beige',trigger.player));\n\t\t\t\t\tvar check=lib.skill.beige.checkx(trigger,player);\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.goon) return 8-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('logSkill','beige');\n\t\t\t\t\tnext.set('goon',check);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.judge();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tswitch(result.suit){\n\t\t\t\t\t\tcase 'heart':trigger.player.recover();break;\n\t\t\t\t\t\tcase 'diamond':trigger.player.draw(2);break;\n\t\t\t\t\t\tcase 'club':trigger.source.chooseToDiscard('he',2,true);break;\n\t\t\t\t\t\tcase 'spade':trigger.source.turnOver();break;\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"当有角色受到【杀】造成的伤害后，你可以弃一张牌，并令其进行一次判定，若判定结果为：♥该角色回复1点体力；♦︎该角色摸两张牌；♣伤害来源弃两张牌；♠伤害来源将其武将牌翻面"},"duanchang":{"name":"断肠","script":"{audio: \"2\",audioname: [\"re_caiwenji\"],forbid: [\"boss\"],trigger: {player: \"die\",},forced: \"true\",forceDie: \"true\",skillAnimation: \"true\",animationColor: \"gray\",filter: function (event){\n\t\t\t\t\treturn event.source&&event.source.isIn();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.source.clearSkills();\n\t\t\t\t},logTarget: \"source\",ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 0.2;\n\t\t\t\t\t\treturn 1.5;\n\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(target.hp<=1&&get.tag(card,'damage')) return [1,0,0,-2];\n\t\t\t\t\t\t},},},}","info":"锁定技，杀死你的角色失去当前的所有技能。"},"huashen":{"name":"化身","script":"{audio: \"huashen2\",unique: \"true\",forbid: [\"guozhan\"],init: function (player){\n\t\t\t\t\tplayer.storage.huashen={\n\t\t\t\t\t\tlist:[],\n\t\t\t\t\t\tshown:[],\n\t\t\t\t\t\towned:{},\n\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t}\n\t\t\t\t},get: function (player,num){\n\t\t\t\t\tif(typeof num!='number') num=1;\n\t\t\t\t\tvar list=[];\n\t\t\t\t\twhile(num--){\n\t\t\t\t\t\tvar name=player.storage.huashen.list.randomRemove();\n\t\t\t\t\t\tvar skills=lib.character[name][3].slice(0);\n\t\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\t\tvar info=lib.skill[skills[i]];\n\t\t\t\t\t\t\tif(info.limited||info.juexingji||info.charlotte||info.zhuSkill||info.hiddenSkill){\n\t\t\t\t\t\t\t\tskills.splice(i--,1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.huashen.owned[name]=skills;\n\t\t\t\t\t\t// player.popup(name);\n\t\t\t\t\t\tgame.log(player,'获得了一个化身');\n\t\t\t\t\t\tlist.push(name);\n\t\t\t\t\t}\n\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar cardname='huashen_card_'+list[i];\n\t\t\t\t\t\t\tlib.card[cardname]={\n\t\t\t\t\t\t\t\tfullimage:true,\n\t\t\t\t\t\t\t\timage:'character:'+list[i]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlib.translate[cardname]=lib.translate[list[i]];\n\t\t\t\t\t\t\tcards.push(game.createCard(cardname,'',''));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.$draw(cards);\n\t\t\t\t\t}\n\t\t\t\t},group: [\"huashen1\",\"huashen2\"],intro: {content: function (storage,player){\n\t\t\t\t\t\tvar str='';\n\t\t\t\t\t\tvar slist=storage.owned;\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i in slist){\n\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tstr+=get.translation(list[0]);\n\t\t\t\t\t\t\tfor(var i=1;i<list.length;i++){\n\t\t\t\t\t\t\t\tstr+='、'+get.translation(list[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar skill=player.additionalSkills.huashen[0];\n\t\t\t\t\t\tif(skill){\n\t\t\t\t\t\t\tstr+='<p>当前技能：'+get.translation(skill);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},mark: function (dialog,content,player){\n\t\t\t\t\t\tvar slist=content.owned;\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i in slist){\n\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tdialog.addSmall([list,'character']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.isUnderControl(true)){\n\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\tif(!content.shown.contains(dialog.buttons[i].link)){\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].node.group.remove();\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].node.hp.remove();\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].node.intro.remove();\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].node.name.innerHTML='未<br>知';\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].node.name.dataset.nature='';\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].style.background='';\n\t\t\t\t\t\t\t\t\tdialog.buttons[i]._nointro=true;\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('menubg');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.additionalSkills.huashen){\n\t\t\t\t\t\t\tvar skill=player.additionalSkills.huashen[0];\n\t\t\t\t\t\t\tif(skill){\n\t\t\t\t\t\t\t\tdialog.add('<div><div class=\"skill\">【'+get.translation(skill)+\n\t\t\t\t\t\t\t\t'】</div><div>'+lib.translate[skill+'_info']+'</div></div>');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},setup: function (player,gain){\n\t\t\t\t\tfor(var i in lib.character){\n\t\t\t\t\t\tif(lib.filter.characterDisabled2(i)||lib.filter.characterDisabled(i)) continue;\n\t\t\t\t\t\tvar add=false;\n\t\t\t\t\t\tfor(var j=0;j<lib.character[i][3].length;j++){\n\t\t\t\t\t\t\tvar info=lib.skill[lib.character[i][3][j]];\n\t\t\t\t\t\t\tif(!info){\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!info.limited&&!info.juexingji&&!info.charlotte&&!info.zhuSkill&&!info.hiddenSkill){\n\t\t\t\t\t\t\t\tadd=true;break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(add){\n\t\t\t\t\t\t\tplayer.storage.huashen.list.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\tplayer.storage.huashen.list.remove([game.players[i].name]);\n\t\t\t\t\t\tplayer.storage.huashen.list.remove([game.players[i].name1]);\n\t\t\t\t\t\tplayer.storage.huashen.list.remove([game.players[i].name2]);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.huasheninited=true;\n\t\t\t\t\tif(gain){\n\t\t\t\t\t\tplayer.markSkill('huashen');\n\t\t\t\t\t\tlib.skill.huashen.get(player,2);\n\t\t\t\t\t\t_status.event.trigger('huashenStart');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"所有人都展示武将牌后，你随机获得两张未加入游戏的武将牌，选一张置于你面前并声明该武将的一项技能，你拥有该技能且同时将性别和势力属性变成与该武将相同直到该化身被替换。在你的每个准备阶段和结束后，你可以替换化身牌，你须为新的化身重新声明一项技能（你不可声明限定技、觉醒技、隐匿技、主公技等特殊技能）。"},"xinsheng":{"name":"新生","script":"{audio: \"2\",unique: \"true\",forbid: [\"guozhan\"],trigger: {player: \"damageEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.huashen&&player.storage.huashen.list&&\n\t\t\t\t\t\tplayer.storage.huashen.list.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tfor(var i=0;i<trigger.num;i++){\n\t\t\t\t\t\tlib.skill.huashen.get(player);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.markSkill('huashen');\n\t\t\t\t},ai: {maixie_hp: \"true\",},}","info":"每当你受到1点伤害后，你可获得一张新的化身牌。"},"qizhi":{"name":"奇制","script":"{audio: \"2\",trigger: {player: \"useCardToPlayered\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!event.targets) return false;\n\t\t\t\t\tif(!event.isFirstTarget) return false;\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tvar type=get.type(event.card,'trick');\n\t\t\t\t\tif(type!='basic'&&type!='trick') return false;\n\t\t\t\t\tif(event.noai) return false;\n\t\t\t\t\treturn game.hasPlayer(function(target){\n\t\t\t\t\t\treturn !event.targets.contains(target)&&target.countCards('he')>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('qizhi'),'弃置一名角色的一张牌，然后其摸一张牌',function(card,player,target){\n\t\t\t\t\t\treturn !_status.event.targets.contains(target)&&target.countCards('he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(target==player) return 2;\n\t\t\t\t\t\tif(get.attitude(player,target)<=0){\n\t\t\t\t\t\t\treturn 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t}).set('targets',trigger.targets);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.getHistory('custom').push({qizhi:true});\n\t\t\t\t\t\tplayer.logSkill('qizhi',result.targets);\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],true,'he');\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.target.draw();\n\t\t\t\t},}","info":"当你于回合内使用基本牌或锦囊牌指定目标后，你可以弃置不是此牌目标的一名角色的一张牌。若如此做，其摸一张牌。"},"jinqu":{"name":"进趋","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},check: function (event,player){\n\t\t\t\t\treturn player.getHistory('custom',function(evt){\n\t\t\t\t\t\treturn evt.qizhi==true;\n\t\t\t\t\t}).length>=player.countCards('h');\n\t\t\t\t},prompt: function (event,player){\n\t\t\t\t\tvar num=player.getHistory('custom',function(evt){\n\t\t\t\t\t\treturn evt.qizhi==true;\n\t\t\t\t\t}).length;\n\t\t\t\t\treturn '进趋：是否摸两张牌并将手牌弃置至'+get.cnNumber(num)+'张？';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar dh=player.countCards('h')-player.getHistory('custom',function(evt){\n\t\t\t\t\t\treturn evt.qizhi==true;\n\t\t\t\t\t}).length;\n\t\t\t\t\tif(dh>0){\n\t\t\t\t\t\tplayer.chooseToDiscard(dh,true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {combo: \"qizhi\",},}","info":"结束阶段开始时，你可以摸两张牌，若如此做，你将手牌弃置至X张。（X为你于此回合发动过〖奇制〗的次数）"},"nzry_juzhan":{"name":"拒战","script":"{audio: \"nzry_juzhan_1\",mark: \"true\",locked: \"false\",zhuanhuanji: \"true\",marktext: \"拒\",intro: {content: function (storage,player,skill){\n\t\t\t\t\t\tif(player.storage.nzry_juzhan1==true) return '当你使用【杀】指定一名角色为目标后，你可以获得其一张牌，然后你本回合内不能再对其使用牌';\n\t\t\t\t\t\treturn '当你成为其他角色【杀】的目标后，你可以与其各摸一张牌，然后其本回合内不能再对你使用牌';\n\t\t\t\t\t},},mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\tif(player.storage.nzry_juzhan==true) return false;\n\t\t\t\t\t},},group: [\"nzry_juzhan_1\",\"nzry_juzhan_2\"],subSkill: {1: {audio: \"2\",trigger: {target: \"useCardToTargeted\",},prompt2: \"当你成为其他角色【杀】的目标后，你可以与其各摸一张牌，然后其本回合内不能再对你使用牌。\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.name=='sha'&&(player.storage.nzry_juzhan1==false||player.storage.nzry_juzhan1==undefined);\n\t\t\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\t\tgame.asyncDraw([player,trigger.player]);\n\t\t\t\t\t\t\ttrigger.player.addTempSkill('nzry_juzhany');\n\t\t\t\t\t\t\tplayer.storage.nzry_juzhan1=true;\n\t\t\t\t\t\t\tplayer.addTempSkill('nzry_juzhanx');\n\t\t\t\t\t\t},sub: \"true\",},2: {audio: \"2\",trigger: {player: \"useCardToPlayered\",},prompt2: \"当你使用【杀】指定一名角色为目标后，你可以获得其一张牌，然后你本回合内不能再对其使用牌\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.name=='sha'&&event.player.countGainableCards(player,'he')>0&&player.storage.nzry_juzhan1==true;\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\treturn event.player.countCards('he')>0&&event.targets&&event.targets.length==1;\n\t\t\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t\t\tplayer.gainPlayerCard(trigger.targets[0],'he',true);\n\t\t\t\t\t\t\tplayer.storage.nzry_juzhan1=false;\n\t\t\t\t\t\t\ttrigger.target.addTempSkill('nzry_juzhanx');\n\t\t\t\t\t\t\tplayer.addTempSkill('nzry_juzhany');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"转换技，阴：当你成为其他角色【杀】的目标后，你可以与其各摸一张牌，然后其本回合内不能再对你使用牌。阳：当你使用【杀】指定一名角色为目标后，你可以获得其一张牌，然后你本回合内不能再对其使用牌。"},"nzry_feijun":{"name":"飞军","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.nzry_feijun=[];\n\t\t\t\t},marktext: \"飞\",intro: {content: function (storage){\n\t\t\t\t\t\tif(!storage.length) return '尚未发动';\n\t\t\t\t\t\tvar str=get.translation(storage);\n\t\t\t\t\t\treturn '已对'+str+'发动过〖飞军〗';\n\t\t\t\t\t},},mark: \"true\",enable: \"phaseUse\",usable: \"1\",position: \"he\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn game.countPlayer(function(current){return current.countCards('h')>=player.countCards('h')})>0||game.countPlayer(function(current){return current.countCards('e')>player.countCards('e')})>0;\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(game.countPlayer(function(current){return current.countCards('h')>player.countCards('h')})>0) list.push('令一名手牌数大于你的角色交给你一张牌');\n\t\t\t\t\tif(game.countPlayer(function(current){return current.countCards('e')>player.countCards('e')})>0) list.push('令一名装备区里牌数大于你的角色弃置一张装备牌');\n\t\t\t\t\tif(list.length==0) event.finish();\n\t\t\t\t\telse if(list.length<2){\n\t\t\t\t\t\tif(game.countPlayer(function(current){return current.countCards('h')>player.countCards('h')})>0) event._result={index:0};\n\t\t\t\t\t\telse event._result={index:1};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\tplayer.chooseControl().set('ai',function(){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.countCards('h')>player.countCards('h')&&get.attitude(player,current)<0\n\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}).set('choiceList',list);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tevent.control='令一名手牌数大于你的角色交给你一张牌';\n\t\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\t\treturn target.countCards('h')>player.countCards('h')&&target!=player;\n\t\t\t\t\t\t},'请选择【飞军】的目标').ai=function(target){\n\t\t\t\t\t\t\treturn -get.attitude(player,target)\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tevent.control='令一名装备区里牌数大于你的角色弃置一张装备牌';\n\t\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\t\treturn target.countCards('e')>player.countCards('e')&&target!=player;\n\t\t\t\t\t\t},'请选择【飞军】的目标').ai=function(target){\n\t\t\t\t\t\t\treturn -get.attitude(player,target)\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(!player.storage.nzry_feijun.contains(event.target)){\n\t\t\t\t\t\t\tif(player.hasSkill('nzry_binglve')){\n\t\t\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\t\t\tplayer.logSkill('nzry_binglve');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.storage.nzry_feijun.push(event.target);\n\t\t\t\t\t\t\tplayer.syncStorage('nzry_feijun');\n\t\t\t\t\t\t};\n\t\t\t\t\t\tplayer.line(event.target);\n\t\t\t\t\t\tif(event.control=='令一名手牌数大于你的角色交给你一张牌'){\n\t\t\t\t\t\t\tevent.target.chooseCard(1,'he',true).set('ai',function(card){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tevent.target.chooseToDiscard(1,'e',true);\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t};\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,event.target,'giveAuto');\n\t\t\t\t\t};\n\t\t\t\t},ai: {order: \"11\",result: {player: function (player){\n\t\t\t\t\t\t\tif(game.countPlayer(function(current){return (current.countCards('h')>player.countCards('h')||current.countCards('e')>player.countCards('e'))&&get.attitude(player,current)<0&&!player.storage.nzry_feijun.contains(current)})>0||game.countPlayer(function(current){return current.countCards('h')>player.countCards('h')&&get.attitude(player,current)<0})>0||(player.countCards('h')>=2&&game.countPlayer(function(current){return current.countCards('e')>player.countCards('e')&&get.attitude(player,current)<0})>0)) return 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌，然后选择一项：令一名手牌数大于你的角色交给你一张牌；或令一名装备区里牌数大于你的角色弃置一张装备牌"},"nzry_binglve":{"name":"兵略","script":"{audio: \"2\",}","info":"锁定技，当你发动“飞军”时，若目标与你之前指定的目标均不相同，则你摸两张牌"},"nzry_huaiju":{"name":"怀橘","script":"{marktext: \"橘\",intro: {name: \"怀橘\",name2: \"橘\",content: \"当前有#个“橘”\",},audio: \"2\",trigger: {global: \"gameDrawAfter\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.addMark('nzry_huaiju',3);\n\t\t\t\t\tplayer.addSkill('nzry_huaiju_ai');\n\t\t\t\t},group: [\"tachibana_effect\"],}","info":"锁定技，游戏开始时，你获得3个“橘”标记。（有“橘”的角色受到伤害时，防止此伤害，然后移去一个“橘”；有“橘”的角色摸牌阶段额外摸一张牌）"},"nzry_yili":{"name":"遗礼","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('nzry_yili'),\"移去一个【橘】或失去1点体力，然后令一名其他角色获得一个【橘】\",function(card,player,target){\n\t\t\t\t\t\treturn target!=player\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.storage.nzry_huaiju>2||player.hp>2) return get.attitude(player,target);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(player.hasMark('nzry_huaiju')){\n\t\t\t\t\t\t\tplayer.chooseControl().set('choiceList',['流失一点体力','移去一个“橘”']).set('ai',function(){\n\t\t\t\t\t\t\t\tif(player.hp>2) return 0;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event._result={index:0};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.logSkill('nzry_yili',target);\n\t\t\t\t\tif(result.index==1){\n\t\t\t\t\t\tplayer.removeMark('nzry_huaiju',1);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t};\n\t\t\t\t\ttarget.addMark('nzry_huaiju',1);\n\t\t\t\t\ttarget.addSkill('nzry_huaiju_ai');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以失去一点体力或移去一个“橘”，然后令一名其他角色获得一个“橘”"},"nzry_zhenglun":{"name":"整论","script":"{audio: \"2\",trigger: {player: \"phaseDrawBefore\",},filter: function (event,player){\n\t\t\t\t\treturn !player.hasMark('nzry_huaiju');\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>=2||player.skipList.contains('phaseUse');\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.addMark('nzry_huaiju',1);\n\t\t\t\t},}","info":"若你没有“橘”，你可以跳过摸牌阶段然后获得一个“橘”"},"nzry_kuizhu":{"name":"溃诛","script":"{audio: \"2\",trigger: {player: \"phaseDiscardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.type=='discard'&&evt.getParent('phaseDiscard')==event) cards.addArray(evt.cards2);\n\t\t\t\t\t});\n\t\t\t\t\treturn cards.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.type=='discard'&&evt.getParent('phaseDiscard')==trigger) cards.addArray(evt.cards2);\n\t\t\t\t\t});\n\t\t\t\t\tevent.num=cards.length;\n\t\t\t\t\tevent.str1='令至多'+event.num+'名角色摸一张牌';\n\t\t\t\t\tevent.str2='对任意名体力值之和为'+event.num+'的角色造成一点伤害';\n\t\t\t\t\tplayer.chooseControl('cancel2').set('ai',function(){\n\t\t\t\t\t\tif(game.countPlayer(function(current){return get.attitude(player,current)<0&&current.hp==event.num})>0&&event.num<=3) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('choiceList',[event.str1,event.str2]).set('prompt','是否发动【溃诛】？');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2') event.finish();\n\t\t\t\t\tevent.control=[event.str1,event.str2][result.index];\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar str='请选择〖溃诛〗的目标';\n\t\t\t\t\tif(event.bool==false) str='<br>所选目标体力之和不足'+event.num+'，请重选';\n\t\t\t\t\tif(event.control==event.str2){\n\t\t\t\t\t\tplayer.chooseTarget(str,function(card,player,target){\n\t\t\t\t\t\t\tvar targets=ui.selected.targets;\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\t\t\tnum+=targets[i].hp;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn num+target.hp<=_status.event.num;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tif(ui.selected.targets[0]!=undefined) return -1;\n\t\t\t\t\t\t\treturn get.attitude(player,target)<0;\n\t\t\t\t\t\t}).set('promptbar','none').set('num',event.num).set('selectTarget',function(){\n\t\t\t\t\t\t\tvar targets=ui.selected.targets;\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\t\t\tnum+=targets[i].hp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num==_status.event.num) return ui.selected.targets.length;\n\t\t\t\t\t\t\treturn ui.selected.targets.length+1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget('请选择〖溃诛〗的目标',[1,event.num]).ai=function(target){\n\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar targets=result.targets.sortBySeat();\n\t\t\t\t\t\tif(event.control==event.str1){\n\t\t\t\t\t\t\t//player.line(targets);\n\t\t\t\t\t\t\tplayer.logSkill('nzry_kuizhu',targets);\n\t\t\t\t\t\t\tgame.asyncDraw(targets);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\t\t\tnum+=targets[i].hp;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif(num<event.num){\n\t\t\t\t\t\t\t\tevent.bool=false;\n\t\t\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t//player.line(targets);\n\t\t\t\t\t\t\t\tplayer.logSkill('nzry_kuizhu',targets);\n\t\t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\t\t\t\ttargets[i].damage();\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tif(targets.length>=2) player.loseHp();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t},}","info":"弃牌阶段结束后，你可以选择一项：令至多X名角色各摸一张牌，或对任意名体力值之和为X的角色造成一点伤害，若不少于2名角色，你须受到一点伤害。（X为你此阶段弃置的牌数）"},"nzry_zhizheng":{"name":"掣政","script":"{audio: \"2\",mod: {playerEnabled: function (card,player,target){\n\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\tif(target!=player&&(!info||!info.singleCard||!ui.selected.targets.length)&&player.isPhaseUsing()&&!target.inRange(player)) return false;\n\t\t\t\t\t},},trigger: {player: \"phaseUseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn (player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.getParent('phaseUse')==event;\n\t\t\t\t\t}).length<game.countPlayer(function(current){return current!=player&&!current.inRange(player)}))&&game.hasPlayer(function(target){\n\t\t\t\t\t\treturn target!=player&&!target.inRange(player)&&target.countDiscardableCards(player,'he');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(\"请选择〖掣政〗的目标\",\"弃置一名攻击范围内不包含你的角色的一张牌\",true,function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!target.inRange(player)&&target.countDiscardableCards(player,'he');\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets);\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],'he',1,true);\n\t\t\t\t\t};\n\t\t\t\t},}","info":"锁定技，你的出牌阶段内，攻击范围内不包含你的其他角色不能成为你使用牌的目标。出牌阶段结束时，若你本阶段内使用的牌数小于这些角色的数量，则你弃置其中一名角色的一张牌。"},"nzry_lijun":{"name":"立军","script":"{unique: \"true\",global: \"nzry_lijun1\",audio: \"nzry_lijun1\",zhuSkill: \"true\",}","info":"主公技，其他吴势力角色于回合内使用的【杀】结算后，可以将此【杀】对应的实体牌交给你，然后你可以令其摸一张牌。"},"nzry_chenglve":{"name":"成略","script":"{mark: \"true\",locked: \"false\",zhuanhuanji: \"true\",marktext: \"成\",intro: {content: function (storage,player,skill){\n\t\t\t\t\t\tvar str=player.storage.nzry_chenglve?'出牌阶段限一次，你可以摸两张牌，然后弃置一张手牌。若如此做，直到本回合结束，你使用与弃置牌花色相同的牌无距离和次数限制':'出牌阶段限一次，你可以摸一张牌，然后弃置两张手牌。若如此做，直到本回合结束，你使用与弃置牌花色相同的牌无距离和次数限制';\n\t\t\t\t\t\tif(player.storage.nzry_chenglve1){\n\t\t\t\t\t\t\tstr+='<br><li>当前花色：';\n\t\t\t\t\t\t\tstr+=get.translation(player.storage.nzry_chenglve1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},},enable: \"phaseUse\",usable: \"1\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.storage.nzry_chenglve==true){\n\t\t\t\t\t\tplayer.storage.nzry_chenglve=false;\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\tplayer.chooseToDiscard('h',true);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tplayer.storage.nzry_chenglve=true;\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.chooseToDiscard('h',2,true);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.nzry_chenglve1=[];\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tplayer.storage.nzry_chenglve1.add(get.suit(result.cards[i],player));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.markSkill('nzry_chenglve');\n\t\t\t\t\t\tplayer.addTempSkill('nzry_chenglve1');\n\t\t\t\t\t};\n\t\t\t\t},ai: {order: \"2.7\",result: {player: function (player){\n\t\t\t\t\t\t\tif((player.storage.nzry_chenglve==undefined||player.storage.nzry_chenglve==false)&&player.countCards('h')<3) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"转换技，出牌阶段限一次，阴：你可以摸一张牌，然后弃置两张手牌。阳：你可以摸两张牌，然后弃置一张手牌。若如此做，直到本回合结束，你使用与弃置牌花色相同的牌无距离和次数限制。"},"nzry_shicai":{"name":"恃才","script":"{audio: \"nzry_shicai_2\",ai: {reverseOrder: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\treturn get.type(evt.card)=='equip';\n\t\t\t\t\t\t}).length>0) return false;\n\t\t\t\t\t},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player==target&&get.type(card)=='equip'&&!player.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\t\treturn get.type(evt.card)=='equip'\n\t\t\t\t\t\t\t}).length==0) return [1,3];\n\t\t\t\t\t\t},},threaten: \"2.4\",},subSkill: {2: {audio: \"2\",sub: \"true\",},},trigger: {player: [\"useCardAfter\"],target: \"useCardToTargeted\",},filter: function (event,player,name){\n\t\t\t\t\tif(name=='useCardToTargeted'&&('equip'!=get.type(event.card)||event.player!=player)) return false;\n\t\t\t\t\tif(name=='useCardAfter'&&['equip','delay'].contains(get.type(event.card))) return false;\n\t\t\t\t\tif(event.cards.filterInD().length<=0) return false;\n\t\t\t\t\tvar history=player.getHistory('useCard');\n\t\t\t\t\tvar evt=name=='useCardAfter'?event:event.getParent();\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tif(history[i]!=evt&&get.type(history[i].card)==get.type(event.card)) return false;\n\t\t\t\t\t\telse if(history[i]==evt) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.type(event.card)=='equip'){\n\t\t\t\t\t\tif(get.subtype(event.card)=='equip6') return true;\n\t\t\t\t\t\tif(get.equipResult(player,event.target,event.card.name)<=0) return true;\n\t\t\t\t\t\tvar eff1=player.getUseValue(event.card);\n\t\t\t\t\t\tvar subtype=get.subtype(event.card);\n\t\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.subtype(card)==subtype&&player.getUseValue(card)>=eff1;\n\t\t\t\t\t\t})>0;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.cards=trigger.cards.filterInD();\n\t\t\t\t\tif(event.cards.length>1){\n\t\t\t\t\t\tplayer.chooseButton(true,event.cards.length,['按顺序将卡牌置于牌堆顶（先选择的在上）',event.cards]).set('ai',function(button){\n\t\t\t\t\t\t\tvar value=get.value(button.link);\n\t\t\t\t\t\t\tif(_status.event.reverse) return value;\n\t\t\t\t\t\t\treturn -value;\n\t\t\t\t\t\t}).set('reverse',((_status.currentPhase&&_status.currentPhase.next)?get.attitude(player,_status.currentPhase.next)>0:false))\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool&&result.links&&result.links.length) cards=result.links.slice(0);\n\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\tvar card=cards.pop();\n\t\t\t\t\t\tif(get.position(card,true)=='o'){\n\t\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t\t\tgame.log(player,'将',card,'置于牌堆顶');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"当你使用牌时，若此牌与你本回合使用的牌类型均不同（包括装备牌），则你可以将此牌置于牌堆顶，然后摸一张牌。"},"nzry_cunmu":{"name":"寸目","script":"{audio: \"2\",trigger: {player: \"drawBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.bottom=true;\n\t\t\t\t},}","info":"锁定技，当你摸牌时，改为从牌堆底摸牌。"},"nzry_mingren":{"name":"明任","script":"{audio: \"nzry_mingren_1\",marktext: \"任\",intro: {content: \"cards\",onunmark: \"throw\",},group: [\"nzry_mingren_1\",\"nzry_mingren_2\"],subSkill: {1: {audio: \"2\",trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",locked: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !player.getStorage('nzry_mingren').length;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(!player.countCards('h')) event.finish();\n\t\t\t\t\t\t\telse player.chooseCard('h','将一张手牌置于武将牌上，称为“任”',true).set('ai',function(card){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.markAuto('nzry_mingren',result.cards);\n\t\t\t\t\t\t\t\tgame.log(player,'将',result.cards[0],'置于其武将牌上');\n\t\t\t\t\t\t\t\tplayer.lose(result.cards[0],ui.special,'toStorage');\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},sub: \"true\",},2: {audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn player.countCards('h')>0&&player.getStorage('nzry_mingren').length>0;\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseCard('h','是否用一张手牌替换“任”（'+get.translation(player.getStorage('nzry_mingren')[0])+'）？').set('ai',function(card){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tvar color=get.color(card);\n\t\t\t\t\t\t\t\tif(color==get.color(player.getStorage('nzry_mingren')[0])) return false;\n\t\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\t\tplayer.countCards('h',function(cardx){\n\t\t\t\t\t\t\t\t\tif(cardx!=card||get.color(cardx)!=color) return false;\n\t\t\t\t\t\t\t\t\tif(list.contains(cardx.name)) return false;\n\t\t\t\t\t\t\t\t\tlist.push(cardx.name);\n\t\t\t\t\t\t\t\t\tswitch(cardx.name){\n\t\t\t\t\t\t\t\t\t\tcase 'wuxie':num+=(game.countPlayer()/2.2);break;\n\t\t\t\t\t\t\t\t\t\tcase 'caochuan':num+=1.1;break;\n\t\t\t\t\t\t\t\t\t\tcase 'shan':num+=1;break;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn num*(30-get.value(card));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('nzry_mingren');\n\t\t\t\t\t\t\t\tgame.log(player,'将',result.cards[0],'置于其武将牌上');\n\t\t\t\t\t\t\t\tplayer.lose(result.cards[0],ui.special,'toStorage');\n\t\t\t\t\t\t\t\tvar card=player.getStorage('nzry_mingren')[0];\n\t\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\t\tplayer.gain(card,'gain2','fromStorage');\n\t\t\t\t\t\t\t\t\tplayer.storage.nzry_mingren.remove(card);\n\t\t\t\t\t\t\t\t\tplayer.storage.nzry_mingren.push(result.cards[0]);\n\t\t\t\t\t\t\t\t\tplayer.syncStorage('nzry_mingren');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},sub: \"true\",},},ai: {combo: \"nzry_zhenliang\",},}","info":"游戏开始时，你摸两张牌，然后将一张手牌置于你的武将牌上，称为“任”。结束阶段，你可以用一张手牌替换“任”。"},"nzry_zhenliang":{"name":"贞良","script":"{audio: \"nzry_zhenliang_1\",mark: \"true\",locked: \"false\",zhuanhuanji: \"true\",intro: {content: function (storage,player,skill){\n\t\t\t\t\t\tif(player.storage.nzry_zhenliang==true) return '当你于回合外使用或打出的牌结算完成后，若此牌与“任”颜色相同，则你可以令一名角色摸一张牌。';\n\t\t\t\t\t\treturn '出牌阶段限一次，你可以弃置一张与“任”颜色相同的牌并对攻击范围内的一名角色造成1点伤害。';\n\t\t\t\t\t},},group: [\"nzry_zhenliang_1\",\"nzry_zhenliang_2\"],subSkill: {1: {prompt: \"弃置一张与“任”颜色相同的牌，并对攻击范围内的一名角色造成1点伤害。\",audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\t\t\tif(player.storage.nzry_zhenliang==true) return false;\n\t\t\t\t\t\t\tvar storage=player.getStorage('nzry_mingren');\n\t\t\t\t\t\t\tif(!storage.length) return false;\n\t\t\t\t\t\t\tvar color=get.color(storage[0]);\n\t\t\t\t\t\t\tif(player.countCards('he',function(card){\n\t\t\t\t\t\t\t\treturn get.color(card)==color;\n\t\t\t\t\t\t\t})==0) return false;\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.inRange(current);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},position: \"he\",filterCard: function (card,player){\n\t\t\t\t\t\t\treturn get.color(card)==get.color(player.getStorage('nzry_mingren')[0]);\n\t\t\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\t\t\treturn player.inRange(target);\n\t\t\t\t\t\t},check: function (card){\n\t\t\t\t\t\t\treturn 6.5-get.value(card);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.nzry_zhenliang=true;\n\t\t\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t\t\t},ai: {order: \"5\",result: {player: function (player,target){\n\t\t\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t\t\t},},},sub: \"true\",},2: {audio: \"2\",trigger: {player: [\"useCardAfter\",\"respondAfter\"],},filter: function (event,player){\n\t\t\t\t\t\t\tif(_status.currentPhase==player||player.storage.nzry_zhenliang!=true) return false;\n\t\t\t\t\t\t\tvar card=player.getStorage('nzry_mingren')[0];\n\t\t\t\t\t\t\treturn card&&get.color(event.card)==get.color(card);\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt('nzry_zhenliang'),'令一名角色摸一张牌').ai=function(target){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0.1;\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\t\treturn att*(Math.max(5-target.countCards('h'),2)+3);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.storage.nzry_zhenliang=false;\n\t\t\t\t\t\t\t\tplayer.logSkill('nzry_zhenliang',result.targets);\n\t\t\t\t\t\t\t\tresult.targets[0].draw();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {combo: \"nzry_mingren\",},}","info":"转换技，阴：出牌阶段限一次，你可以弃置一张与“任”颜色相同的牌并对攻击范围内的一名角色造成1点伤害。阳：当你于回合外使用或打出的牌结算完成后，若此牌与“任”颜色相同，则你可以令一名角色摸一张牌。"},"nzry_jianxiang":{"name":"荐降","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('nzry_jianxiang'),'令场上手牌数最少的一名角色摸一张牌',function(card,player,target){\n\t\t\t\t\t\treturn target.isMinHandcard();\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(player,target)\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('nzry_jianxiang',result.targets);\n\t\t\t\t\t\tresult.targets[0].draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你成为其他角色使用牌的目标时，你可令手牌数最少的一名角色摸一张牌。"},"nzry_shenshi":{"name":"审时","script":"{mark: \"true\",audio: \"nzry_shenshi_1\",locked: \"false\",zhuanhuanji: \"true\",marktext: \"审\",intro: {content: function (storage,player,skill){\n\t\t\t\t\t\tif(player.storage.nzry_shenshi==true) return '其他角色对你造成伤害后，你可以观看该角色的手牌，然后交给其一张牌，当前角色回合结束时，若此牌仍在该角色的区域内，你将手牌摸至四张';\n\t\t\t\t\t\treturn '出牌阶段限一次，你可以将一张牌交给一名手牌数最多的角色，然后对其造成一点伤害，若该角色因此死亡，则你可以令一名角色将手牌摸至四张';\n\t\t\t\t\t},},group: [\"nzry_shenshi_1\",\"nzry_shenshi_2\"],subSkill: {1: {audio: \"2\",prompt: \"出牌阶段限一次，你可以将一张牌交给一名手牌数最多的角色，然后对其造成一点伤害，若该角色因此死亡，则你可以令一名角色将手牌摸至四张\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.countCards('h')>0&&player.storage.nzry_shenshi!=true;\n\t\t\t\t\t\t},discard: \"false\",line: \"true\",lose: \"false\",delay: \"false\",position: \"he\",filterCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\t\t\treturn target!=player&&!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.countCards('h')>target.countCards('h');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},check: function (card){\n\t\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.storage.nzry_shenshi=true;\n\t\t\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(!target.isAlive()){\n\t\t\t\t\t\t\t\tplayer.chooseTarget('请选择一名角色并令其将手牌摸至四张',function(card,player,target){\n\t\t\t\t\t\t\t\t\treturn target.countCards('h')<4;\n\t\t\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\t\t\treturn get.attitude(player,target)\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.line(result.targets);\n\t\t\t\t\t\t\t\tresult.targets[0].draw(4-result.targets[0].countCards('h'))\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t\t},},},sub: \"true\",},2: {audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn player.countCards('he')>0&&event.source&&event.source!=player&&player.storage.nzry_shenshi==true;\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\treturn event.source&&event.source.countCards('h')<=2&&player.countCards('h')<4;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tplayer.storage.nzry_shenshi=false;\n\t\t\t\t\t\t\tplayer.viewHandcards(trigger.source);\n\t\t\t\t\t\t\tplayer.chooseCard('he',true).set('ai',function(card){\n\t\t\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\ttrigger.source.gain(result.cards,player,'give');\n\t\t\t\t\t\t\t\ttrigger.source.storage.nzry_shenshi1=result.cards[0];\n\t\t\t\t\t\t\t\ttrigger.source.storage.nzry_shenshi2=player;\n\t\t\t\t\t\t\t\ttrigger.source.addSkill('nzry_shenshi1');\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"转换技，阴：出牌阶段限一次，你可以将一张牌交给一名手牌数最多的角色，然后对其造成一点伤害，若该角色因此死亡，则你可以令一名角色将手牌摸至四张。阳：其他角色对你造成伤害后，你可以观看该角色的手牌，然后交给其一张牌，当前角色回合结束时，若此牌仍在该角色的区域内，你将手牌摸至四张。"},"zhengrong":{"name":"征荣","script":"{trigger: {player: \"useCardToPlayered\",},direct: \"true\",audio: \"drlt_zhenrong\",filter: function (event,player){\n\t\t\t\t\tif(!event.isFirstTarget) return false;\n\t\t\t\t\tif(!['basic','trick'].contains(get.type(event.card))) return false;\n\t\t\t\t\tif(get.tag(event.card,'damage')) return game.hasPlayer(function(current){\n\t\t\t\t\t\treturn event.targets.contains(current)&&current.countCards('h')>=player.countCards('h')&&current.countCards('he')>0;\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('zhengrong'),'将一名手牌数不小于你的目标角色的一张牌置于你的武将牌上，成为「荣」',function(card,player,target){\n\t\t\t\t\t\treturn _status.event.targets.contains(target)&&target.countCards('h')>=player.countCards('h')&&target.countCards('he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn (1-get.attitude(_status.event.player,target))/target.countCards('he');\n\t\t\t\t\t}).set('targets',trigger.targets);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhengrong',target);\n\t\t\t\t\t\tplayer.choosePlayerCard(target,'he',true).ai=get.buttonValue;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\tgame.log(player,'选择了',card);\n\t\t\t\t\t\ttarget.$give(card,player,false);\n\t\t\t\t\t\ttarget.lose(card,ui.special,'toStorage');\n\t\t\t\t\t\tif(!player.storage.zhengrong) player.storage.zhengrong=[];\n\t\t\t\t\t\tplayer.storage.zhengrong.push(card);\n\t\t\t\t\t\tplayer.markSkill('zhengrong');\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},marktext: \"荣\",intro: {content: \"cards\",onunmark: \"throw\",},}","info":"当你使用带有「伤害」标签的基本牌或锦囊牌指定目标后，你可以将一名手牌数不小于你的目标角色的一张牌置于你的武将牌上，称为「荣」。"},"hongju":{"name":"鸿举","script":"{trigger: {player: \"phaseZhunbeiBegin\",},audio: \"drlt_hongju\",forced: \"true\",unique: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",derivation: \"qingce\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.zhengrong&&player.storage.zhengrong.length>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('hongju');\n\t\t\t\t\tif(player.countCards('h')==0) event.goto(2);\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar dialog=['请选择要交换的手牌和「荣」，或点「取消」','<div class=\"text center\">「征荣」牌</div>',player.storage.zhengrong,'<div class=\"text center\">手牌区</div>',player.getCards('h')];\n\t\t\t\t\t\tvar next=player.chooseButton(dialog);\n\t\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\t\tvar ss=_status.event.player.storage.zhengrong;\n\t\t\t\t\t\t\tvar hs=_status.event.player.getCards('h');\n\t\t\t\t\t\t\tvar sn=0;\n\t\t\t\t\t\t\tvar hn=0;\n\t\t\t\t\t\t\tvar ub=ui.selected.buttons;\n\t\t\t\t\t\t\tfor(var i=0;i<ub.length;i++){\n\t\t\t\t\t\t\t\tif(ss.contains(ub[i].link)) sn++;\n\t\t\t\t\t\t\t\telse hn++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn !(sn>=hs.length&&ss.contains(button.link)||hn>=ss.length&&hs.contains(button.link));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('selectButton',function(){\n\t\t\t\t\t\t\tif(ui.selected.buttons.length==0) return 2;\n\t\t\t\t\t\t\tvar ss=_status.event.player.storage.zhengrong;\n\t\t\t\t\t\t\tvar hs=_status.event.player.getCards('h');\n\t\t\t\t\t\t\tvar sn=0;\n\t\t\t\t\t\t\tvar hn=0;\n\t\t\t\t\t\t\tvar ub=ui.selected.buttons;\n\t\t\t\t\t\t\tfor(var i=0;i<ub.length;i++){\n\t\t\t\t\t\t\t\tif(ss.contains(ub[i].link)) sn++;\n\t\t\t\t\t\t\t\telse hn++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(sn!=hn) return 2*Math.max(sn,hn);\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(sn==ss.length||hn==hs.length||sn==hs.length||hn==ss.length) return ub.length;\n\t\t\t\t\t\t\t\treturn [ub.length,ub.length+1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('ai',function(){return -1});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar gains=[];\n\t\t\t\t\t\tvar pushs=[];\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tvar card=result.links[i];\n\t\t\t\t\t\t\tif(player.storage.zhengrong.contains(card)) gains.push(card);\n\t\t\t\t\t\t\telse pushs.push(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.lose(pushs,ui.special,'toStorage');\n\t\t\t\t\t\tgame.log(player,'将',pushs,'放在了武将牌上');\n\t\t\t\t\t\tplayer.gain(gains,'gain2','log','fromStorage');\n\t\t\t\t\t\tplayer.storage.zhengrong.addArray(pushs);\n\t\t\t\t\t\tplayer.storage.zhengrong.removeArray(gains);\n\t\t\t\t\t\tplayer.markSkill('zhengrong');\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.addSkill('qingce');\n\t\t\t\t\tgame.log(player,'获得了技能','#g【清侧】');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你武将牌上「荣」的数量不小于3，则你触发此技能。你可以用任意数量的手牌交换等量的「荣」。你减1点体力上限并获得技能〖清侧〗。"},"drlt_zhenggu":{"name":"镇骨","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('drlt_zhenggu'),function(card,player,target){\n\t\t\t\t\t\t//if(target.storage.drlt_zhenggu_mark&&target.storage.drlt_zhenggu_mark.contains(player)) return false;\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t//if(target.storage.drlt_zhenggu_mark&&target.storage.drlt_zhenggu_mark.contains(player)) return 0;\n\t\t\t\t\t\tvar num=(Math.min(5,player.countCards('h'))-target.countCards('h'));\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\treturn num*att;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('drlt_zhenggu',target);\n\t\t\t\t\t\tplayer.addSkill(\"drlt_zhenggu2\");\n\t\t\t\t\t\ttarget.addSkill(\"drlt_zhenggu_mark\");\n\t\t\t\t\t\ttarget.storage.drlt_zhenggu_mark.push(player);\n\t\t\t\t\t\ttarget.markSkill(\"drlt_zhenggu_mark\");\n\t\t\t\t\t\tlib.skill.drlt_zhenggu.sync(player,target);\n\t\t\t\t\t}\n\t\t\t\t},sync: function (player,target){\n\t\t\t\t\tvar num=player.countCards('h');\n\t\t\t\t\tvar num2=target.countCards('h');\n\t\t\t\t\tif(num<num2){\n\t\t\t\t\t\ttarget.chooseToDiscard(num2-num,true,'h');\n\t\t\t\t\t}\n\t\t\t\t\telse target.drawTo(Math.min(5,num));\n\t\t\t\t},}","info":"结束阶段，你可以选择一名其他角色，你的回合结束后和该角色的下个回合结束时，其将手牌摸至或弃至X张。（X为你的手牌数且至多为5）"},"xinfu_zuilun":{"name":"罪论","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},check: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tif(player.getHistory('lose',function(evt){\n\t\t\t\t\t\treturn evt.type=='discard';\n\t\t\t\t\t}).length) num++;\n\t\t\t\t\tif(!player.isMinHandcard()) num++;\n\t\t\t\t\tif(!player.getStat('damage')) num++;\n\t\t\t\t\tif(num==3) return player.hp>=2;\n\t\t\t\t\treturn true;\n\t\t\t\t},prompt: function (event,player){\n\t\t\t\t\tvar num=3;\n\t\t\t\t\tif(player.getHistory('lose',function(evt){\n\t\t\t\t\t\treturn evt.type=='discard';\n\t\t\t\t\t}).length) num--;\n\t\t\t\t\tif(!player.isMinHandcard()) num--;\n\t\t\t\t\tif(!player.getStat('damage')) num--;\n\t\t\t\t\treturn get.prompt('xinfu_zuilun')+'（可获得'+get.cnNumber(num)+'张牌）'\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tevent.cards=get.cards(3);\n\t\t\t\t\tif(player.getHistory('lose',function(evt){\n\t\t\t\t\t\treturn evt.type=='discard';\n\t\t\t\t\t}).length) event.num++;\n\t\t\t\t\tif(!player.isMinHandcard()) event.num++;\n\t\t\t\t\tif(!player.getStat('damage')) event.num++;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.num==0){\n\t\t\t\t\t\tplayer.gain(event.cards,'draw');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar prompt;\n\t\t\t\t\t\tif(event.num==3) prompt=\"罪论：请按顺序将卡牌置于牌堆顶（先选择的在上）\";\n\t\t\t\t\t\telse prompt=\"罪论：请按顺序将\"+get.cnNumber(event.num)+\"张卡牌置于牌堆顶（先选择的在上），然后获得其余的牌。\";\n\t\t\t\t\t\tplayer.chooseCardButton(event.num,true,event.cards,prompt).set('ai',function(button){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar next=player.getNext();\n\t\t\t\t\t\t\tvar att=get.attitude(player,next);\n\t\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\t\tvar judge=next.getCards('j')[ui.selected.buttons.length];\n\t\t\t\t\t\t\tif(judge){\n\t\t\t\t\t\t\t\treturn get.judge(judge)(card)*att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn next.getUseValue(card)*att;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar list=result.links.slice(0);\n\t\t\t\t\t\tvar num=list.length-1;\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(list[num-i]);\n\t\t\t\t\t\t\tui.cardPile.insertBefore(list[num-i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tplayer.gain(event.cards,'draw');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget('请选择一名角色，与其一同失去1点体力',true,function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tplayer.line(result.targets[0],'fire');\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\tresult.targets[0].loseHp();\n\t\t\t\t},}","info":"结束阶段，你可以观看牌堆顶三张牌，你每满足以下一项便保留一张，然后以任意顺序放回其余的牌：1.你于此回合内造成过伤害；2.你于此回合内未弃置过牌；3.手牌数为全场最少。若均不满足，你与一名其他角色失去一点体力。"},"xinfu_fuyin":{"name":"父荫","script":"{trigger: {target: \"useCardToTargeted\",},forced: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\tif(event.player.countCards('h')<player.countCards('h')) return false;\n\t\t\t\t\tif(event.card.name!='sha'&&event.card.name!='juedou') return false;\n\t\t\t\t\treturn !game.hasPlayer2(function(current){\n\t\t\t\t\t\treturn current.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\treturn evt!=event.getParent()&&evt.card&&['sha','juedou'].contains(evt.card.name)&&evt.targets.contains(player);\n\t\t\t\t\t\t}).length>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t},}","info":"锁定技，你每回合第一次成为【杀】或【决斗】的目标后，若你的手牌数小于等于该角色，此牌对你无效。"},"drlt_qianjie":{"name":"谦节","script":"{group: [\"drlt_qianjie_1\",\"drlt_qianjie_2\",\"drlt_qianjie_3\"],locked: \"true\",ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='tiesuo') return 'zeroplayertarget';\n\t\t\t\t\t\t},},},subSkill: {1: {audio: \"2\",trigger: {player: \"linkBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !player.isLinked();\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t},sub: \"true\",},2: {mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\t\t\tif(get.type(card)=='delay') return false;\n\t\t\t\t\t\t\t},},sub: \"true\",},3: {ai: {noCompareTarget: \"true\",},sub: \"true\",},},}","info":"锁定技，当你横置时，取消之。你不能成为延时类锦囊的目标。你不能成为其他角色拼点的目标。"},"drlt_jueyan":{"name":"决堰","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.disableEquip!=undefined&&player.storage.disableEquip.length<5;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDisable(true).set('ai',function(event,player,list){\n\t\t\t\t\t\tif(list.contains('equip2')) return 'equip2';\n\t\t\t\t\t\tif(list.contains('equip1')&&(player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.name(card,player)=='sha'&&player.hasUseTarget(card);\n\t\t\t\t\t\t})-player.getCardUsable('sha'))>1) return 'equip1';\n\t\t\t\t\t\tif(list.contains('equip5')&&player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.type2(card,player)=='trick'&&player.hasUseTarget(card);\n\t\t\t\t\t\t})>1) return 'equip5';\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='equip1'){\n\t\t\t\t\t\tplayer.addTempSkill('drlt_jueyan1',{player:'phaseAfter'});\n\t\t\t\t\t};\n\t\t\t\t\tif(result.control=='equip2'){\n\t\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t\tplayer.addTempSkill('drlt_jueyan3',{player:'phaseAfter'});\n\t\t\t\t\t};\n\t\t\t\t\tif(result.control=='equip6'){\n\t\t\t\t\t\tplayer.addTempSkill('drlt_jueyan2',{player:'phaseAfter'});\n\t\t\t\t\t};\n\t\t\t\t\tif(result.control=='equip5'){\n\t\t\t\t\t\tplayer.addTempSkill('rejizhi',{player:'phaseAfter'});\n\t\t\t\t\t};\n\t\t\t\t},ai: {order: \"13\",result: {player: function (player){\n\t\t\t\t\t\t\tif(!player.isDisabled('equip2')) return 1;\n\t\t\t\t\t\t\tif(!player.isDisabled('equip1')&&(player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn get.name(card,player)=='sha'&&player.hasUseTarget(card);\n\t\t\t\t\t\t\t})-player.getCardUsable('sha'))>1) return 1;\n\t\t\t\t\t\t\tif(!player.isDisabled('equip5')&&player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn get.type2(card,player)=='trick'&&player.hasUseTarget(card);\n\t\t\t\t\t\t\t})>1) return 1;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以废除一个装备栏，然后执行对应一项：武器栏，本回合内你可以多使用三张【杀】；防具栏，摸三张牌，本回合手牌上限+3；2个坐骑栏，本回合你使用的牌无距离限制；宝物栏，本回合获得技能集智"},"drlt_poshi":{"name":"破势","script":"{audio: \"2\",skillAnimation: \"true\",animationColor: \"wood\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",unique: \"true\",juexingji: \"true\",derivation: [\"drlt_huairou\"],init: function (player){\n\t\t\t\t\tplayer.storage.drlt_poshi=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.drlt_poshi&&((player.storage.disableEquip!=undefined&&player.storage.disableEquip.length==5)||player.hp==1);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.storage.drlt_poshi=true;\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar num=player.maxHp-player.countCards('h');\n\t\t\t\t\tif(num>0) player.draw(num);\n\t\t\t\t\tplayer.removeSkill('drlt_jueyan');\n\t\t\t\t\tplayer.addSkill('drlt_huairou');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若你的装备栏均已被废除或体力值为1，则你减一点体力上限，将手牌摸至体力上限，失去技能“决堰”并获得技能“怀柔”"},"drlt_yongsi":{"name":"庸肆","script":"{audio: \"2\",group: [\"drlt_yongsi_1\",\"drlt_yongsi_2\"],subSkill: {1: {audio: \"drlt_yongsi\",trigger: {player: \"phaseDrawBegin2\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.num=game.countGroup();\n\t\t\t\t\t\t},sub: \"true\",},2: {audio: \"drlt_yongsi\",trigger: {player: \"phaseUseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tplayer.getHistory('sourceDamage',function(evt){\n\t\t\t\t\t\t\t\tif(evt.getParent('phaseUse')==event) num+=evt.num;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn !num||num>1;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar numx=0;\n\t\t\t\t\t\t\tplayer.getHistory('sourceDamage',function(evt){\n\t\t\t\t\t\t\t\tif(evt.getParent('phaseUse')==trigger) numx+=evt.num;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(!numx){\n\t\t\t\t\t\t\t\tvar num=player.hp-player.countCards('h');\n\t\t\t\t\t\t\t\tif(num>0) player.draw(num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.addTempSkill('drlt_yongsi1',{player:'phaseDiscardAfter'});\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，摸牌阶段，你改为摸X张牌（X为存活势力数）；出牌阶段结束时，若你本回合：1.没有造成伤害，将手牌摸至当前体力值；2.造成的伤害超过1点，本回合手牌上限改为已损失体力值"},"drlt_weidi":{"name":"伪帝","script":"{audio: \"2\",forceaudio: \"true\",unique: \"true\",zhuSkill: \"true\",trigger: {player: \"phaseDiscardBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('drlt_weidi')) return false;\n\t\t\t\t\treturn player.needsToDiscard()>0&&game.countPlayer(function(current){return current!=player&&current.group=='qun'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=player.needsToDiscard();\n\t\t\t\t\tevent.logged=false;\n\t\t\t\t\tevent.gived=[];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!game.hasPlayer(function(target){\n\t\t\t\t\t\treturn target!=player&&target.group=='qun'&&!event.gived.contains(target);\n\t\t\t\t\t})) event.finish();\n\t\t\t\t\telse player.chooseCardTarget({\n\t\t\t\t\t\tprompt:'是否将一张手牌给予其他群雄角色？',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player&&target.group=='qun'&&!_status.event.gived.contains(target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tposition:'h',\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar value=get.value(card,player,'raw');\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.sgn(value)==get.sgn(get.attitude(player,current))\n\t\t\t\t\t\t\t})) return 1;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(get.value(ui.selected.cards[0],player,'raw')<0) return -get.attitude(player,target);\n\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgived:event.gived,\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.logged){\n\t\t\t\t\t\t\tplayer.logSkill('drlt_weidi');\n\t\t\t\t\t\t\tevent.logged=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.line(result.targets[0]);\n\t\t\t\t\t\tresult.targets[0].gain(result.cards[0],player,'giveAuto');\n\t\t\t\t\t\tevent.gived.add(result.targets[0]);\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t\tif(event.count) event.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"主公技，弃牌阶段开始时，若你的手牌数大于手牌上限，则你可以将至多X张手牌分别交给等量的其他群雄角色（X为你的手牌数与手牌上限之差）。"},"drlt_xiongluan":{"name":"雄乱","script":"{audio: \"2\",unique: \"true\",enable: \"phaseUse\",mark: \"true\",skillAnimation: \"true\",animationColor: \"gray\",limited: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.drlt_xiongluan=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.drlt_xiongluan) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('drlt_xiongluan');\n\t\t\t\t\tplayer.storage.drlt_xiongluan=true;\n\t\t\t\t\tplayer.disableEquip('equip1');\n\t\t\t\t\tplayer.disableEquip('equip2');\n\t\t\t\t\tplayer.disableEquip('equip3');\n\t\t\t\t\tplayer.disableEquip('equip4');\n\t\t\t\t\tplayer.disableEquip('equip5');\n\t\t\t\t\tplayer.disableJudge();\n\t\t\t\t\tplayer.addTempSkill('drlt_xiongluan1');\n\t\t\t\t\tplayer.storage.drlt_xiongluan1=target;\n\t\t\t\t\ttarget.addSkill('drlt_xiongluan2');\n\t\t\t\t\ttarget.markSkillCharacter('drlt_xiongluan1',player,'雄乱','无法使用或打出任何手牌');\n\t\t\t\t},ai: {order: \"13\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.getEquip('bagua')||target.getEquip('rewrite_bagua')) return 0;\n\t\t\t\t\t\t\tvar hs=player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn ['sha','juedou'].contains(card.name)&&get.effect(target,card,player,player)!=0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar ts=target.hp;\n\t\t\t\t\t\t\tif(hs>=ts&&ts>1) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},intro: {content: \"limited\",},}","info":"限定技，出牌阶段，你可以废除你的判定区和装备区，然后指定一名其他角色。直到回合结束，你对其使用牌无距离和次数限制，其不能使用和打出手牌"},"drlt_congjian":{"name":"从谏","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card)=='trick'&&event.targets.length>1&&player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tselectCard:1,\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&_status.event.targets.contains(target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\t\t\tif(_status.event.player.storage.drlt_xiongluan&&get.type(card)==\"equip\") return 15;\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0.1;\n\t\t\t\t\t\t\t\treturn 1-att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att-3;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt2('drlt_congjian'),\n\t\t\t\t\t\ttargets:trigger.targets,\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.line(event.target);\n\t\t\t\t\t\tplayer.logSkill('drlt_congjian');\n\t\t\t\t\t\tevent.target.gain(result.cards[0],player,'give');\n\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\tif(get.type(result.cards[0])=='equip') num=2;\n\t\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\t};\n\t\t\t\t},}","info":"当你成为锦囊牌的目标时，若此牌的目标数大于1，则你可以交给其中一名其他目标角色一张牌，然后摸一张牌，若你给出的是装备牌，改为摸两张牌"},"drlt_wanglie":{"name":"往烈","script":"{mod: {targetInRange: function (card,player,target,now){\n\t\t\t\t\t\tif(game.online){\n\t\t\t\t\t\t\tif(!player.countUsed()) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\t\t\tif(evt&&evt.name=='phaseUse'&&player.getHistory('useCard',function(evt2){\n\t\t\t\t\t\t\t\treturn evt2.getParent('phaseUse')==evt\n\t\t\t\t\t\t\t}).length==0) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},audio: \"2\",trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\treturn player.isPhaseUsing()&&(event.card.name=='sha'||get.type(event.card)=='trick');\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(['wuzhong','kaihua','dongzhuxianji'].contains(event.card.name)) return false;\n\t\t\t\t\tplayer._wanglie_temp=true;\n\t\t\t\t\tvar eff=0;\n\t\t\t\t\tfor(var i of event.targets){\n\t\t\t\t\t\teff+=get.effect(i,event.card,player,player);\n\t\t\t\t\t}\n\t\t\t\t\tdelete player._wanglie_temp;\n\t\t\t\t\tif(eff<0) return true;\n\t\t\t\t\tif(!player.countCards('h',function(card){\n\t\t\t\t\t\treturn player.hasValueTarget(card,null,true);\n\t\t\t\t\t})) return true;\n\t\t\t\t\tif(get.tag(event.card,'damage')&&!player.needsToDiscard()&&!player.countCards('h',function(card){\n\t\t\t\t\t\treturn get.tag(card,'damage')&&player.hasValueTarget(card,null,true);\n\t\t\t\t\t})) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.nowuxie=true;\n\t\t\t\t\ttrigger.directHit.addArray(game.players);\n\t\t\t\t\tplayer.addTempSkill('drlt_wanglie2');\n\t\t\t\t},ai: {pretao: \"true\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(tag=='pretao') return true;\n\t\t\t\t\t\tif(player._wanglie_temp) return false;\n\t\t\t\t\t\tplayer._wanglie_temp=true;\n\t\t\t\t\t\tvar bool=function(){\n\t\t\t\t\t\t\tif(['wuzhong','kaihua','dongzhuxianji'].contains(arg.card.name)) return false;\n\t\t\t\t\t\t\tif(get.attitude(player,arg.target)>0||!player.isPhaseUsing()) return false;\n\t\t\t\t\t\t\tvar cards=player.getCards('h',function(card){\n\t\t\t\t\t\t\t\treturn card!=arg.card&&(!arg.card.cards||!arg.card.cards.contains(card));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar sha=player.getCardUsable('sha');\n\t\t\t\t\t\t\tif(arg.card.name=='sha') sha--;\n\t\t\t\t\t\t\tcards=cards.filter(function(card){\n\t\t\t\t\t\t\t\tif(card.name=='sha'&&sha<=0) return false;\n\t\t\t\t\t\t\t\treturn player.hasValueTarget(card,null,true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(!cards.length) return true;\n\t\t\t\t\t\t\tif(!get.tag(arg.card,'damage')) return false;\n\t\t\t\t\t\t\tif(!player.needsToDiscard()&&!cards.filter(function(card){\n\t\t\t\t\t\t\t\treturn get.tag(card,'damage');\n\t\t\t\t\t\t\t}).length) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}();\n\t\t\t\t\t\tdelete player._wanglie_temp;\n\t\t\t\t\t\treturn bool;\n\t\t\t\t\t},},}","info":"出牌阶段，你使用的第一张牌无距离限制；当你于回合内使用牌时，你可以令此牌不能被响应，若如此做，本回合内你不能再使用牌"},"liangyin":{"name":"良姻","script":"{audio: \"2\",group: [\"liangyin_1\",\"liangyin_2\"],subSkill: {1: {trigger: {global: [\"loseAfter\",\"addCardToStorage\"],},filter: function (event,player){\n\t\t\t\t\t\t\tif(event.name=='lose') return event.toStorage==true;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tplayer.chooseTarget('是否发动【良姻】令手牌数大于你的一名角色摸一张牌？',function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player&&target.countCards('h')>player.countCards('h');\n\t\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('liangyin',result.targets);\n\t\t\t\t\t\t\t\tresult.targets[0].draw();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},2: {trigger: {global: \"gainAfter\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.fromStorage==true;\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tplayer.chooseTarget('是否发动【良姻】令手牌数小于你的一名角色弃置一张牌？',function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player&&target.countCards('h')<player.countCards('h')&&target.countCards('he')>0;\n\t\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('liangyin',result.targets);\n\t\t\t\t\t\t\t\tresult.targets[0].chooseToDiscard('he',1,true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"当有牌移至游戏外时，你可以令手牌数大于你的一名角色摸一张牌；当有牌从游戏外加入任意角色的手牌时，你可以令手牌数小于你的一名角色弃置一张牌"},"kongsheng":{"name":"箜声","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard(get.prompt2('kongsheng'),'he',[1,player.countCards('he')]).set('ai',function(card){\n\t\t\t\t\t\tif(get.position(card)=='e') return 1-get.value(card);\n\t\t\t\t\t\tif(card.name=='shan'||card.name=='du'||!player.hasValueTarget(card)) return 1;\n\t\t\t\t\t\treturn 4-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('kongsheng');\n\t\t\t\t\t\tif(player.storage.kongsheng2==undefined) player.storage.kongsheng2=[];\n\t\t\t\t\t\tplayer.storage.kongsheng2.addArray(result.cards);\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tgame.log(player,'将',result.cards,'置于其武将牌上');\n\t\t\t\t\t\tplayer.addSkill('kongsheng2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段，你可以将任意张牌置于你的武将牌上；结束阶段，你使用武将牌上的装备牌，并获得武将牌上的其他牌"}},"card":{},"hero":{"old_zhoutai":{"name":"周泰","attr":["male","wu",4,["buqu","new_fenji"],[]]},"old_caoren":{"name":"曹仁","attr":["male","wei",4,["moon_jushou","jiewei"],[]]},"xuhuang":{"name":"徐晃","attr":["male","wei",4,["gzduanliang"],[]]},"re_pangde":{"name":"庞德","attr":["male","qun",4,["mashu","jianchu"],[]]},"re_xiahouyuan":{"name":"夏侯渊","attr":["male","wei",4,["xinshensu"],[]]},"huangzhong":{"name":"黄忠","attr":["male","shu",4,["liegong"],[]]},"re_weiyan":{"name":"魏延","attr":["male","shu",4,["xinkuanggu","qimou"],[]]},"re_xiaoqiao":{"name":"小乔","attr":["female","wu",3,["retianxiang","xinhongyan"],[]]},"sp_zhangjiao":{"name":"张角","attr":["male","qun",3,["releiji","guidao","huangtian"],["zhu"]]},"re_yuji":{"name":"于吉","attr":["male","qun",3,["xinfu_guhuo"],["forbidai"]]},"sp_zhugeliang":{"name":"卧龙","attr":["male","shu",3,["huoji","bazhen","kanpo"],[]]},"pangtong":{"name":"庞统","attr":["male","shu",3,["lianhuan","oldniepan"],[]]},"xunyu":{"name":"荀彧","attr":["male","wei",3,["quhu","jieming"],[]]},"dianwei":{"name":"典韦","attr":["male","wei",4,["qiangxix"],[]]},"taishici":{"name":"太史慈","attr":["male","wu",4,["tianyi"],[]]},"yanwen":{"name":"颜良文丑","attr":["male","qun",4,["shuangxiong"],[]]},"re_yuanshao":{"name":"袁绍","attr":["male","qun",4,["luanji","xueyi"],["zhu"]]},"menghuo":{"name":"孟获","attr":["male","shu",4,["huoshou","zaiqixx"],[]]},"zhurong":{"name":"祝融","attr":["female","shu",4,["juxiang","lieren"],[]]},"caopi":{"name":"曹丕","attr":["male","wei",3,["xingshang","fangzhu","songwei"],["zhu"]]},"re_lusu":{"name":"鲁肃","attr":["male","wu",3,["haoshi","dimeng"],[]]},"sunjian":{"name":"孙坚","attr":["male","wu",4,["gzyinghun"],[]]},"dongzhuo":{"name":"董卓","attr":["male","qun",8,["jiuchi","roulin","benghuai","baonue"],["zhu"]]},"jiaxu":{"name":"贾诩","attr":["male","qun",3,["luanwu","wansha","weimu"],[]]},"jiangwei":{"name":"姜维","attr":["male","shu",4,["tiaoxin","zhiji"],[]]},"liushan":{"name":"刘禅","attr":["male","shu",3,["xiangle","fangquan","ruoyu"],["zhu"]]},"zhanghe":{"name":"张郃","attr":["male","wei",4,["qiaobian"],[]]},"dengai":{"name":"邓艾","attr":["male","wei",4,["tuntian","zaoxian"],[]]},"sunce":{"name":"孙策","attr":["male","wu",4,["jiang","hunzi","zhiba"],["zhu"]]},"zhangzhang":{"name":"张昭张紘","attr":["male","wu",3,["zhijian","guzheng"],[]]},"caiwenji":{"name":"蔡文姬","attr":["female","qun",3,["beige","duanchang"],[]]},"zuoci":{"name":"左慈","attr":["male","qun",3,["huashen","xinsheng"],[]]},"wangji":{"name":"王基","attr":["male","wei",3,["qizhi","jinqu"],[]]},"yanyan":{"name":"严颜","attr":["male","shu",4,["nzry_juzhan"],[]]},"wangping":{"name":"王平","attr":["male","shu",4,["nzry_feijun","nzry_binglve"],[]]},"luji":{"name":"陆绩","attr":["male","wu",3,["nzry_huaiju","nzry_yili","nzry_zhenglun"],[]]},"sunliang":{"name":"孙亮","attr":["male","wu",3,["nzry_kuizhu","nzry_zhizheng","nzry_lijun"],["zhu"]]},"xuyou":{"name":"许攸","attr":["male","qun",3,["nzry_chenglve","nzry_shicai","nzry_cunmu"],[]]},"yl_luzhi":{"name":"卢植","attr":["male","qun",3,["nzry_mingren","nzry_zhenliang"],["die_audio"]]},"kuailiangkuaiyue":{"name":"蒯良蒯越","attr":["male","wei",3,["nzry_jianxiang","nzry_shenshi"],[]]},"guanqiujian":{"name":"毌丘俭","attr":["male","wei",4,["zhengrong","hongju"],[]]},"haozhao":{"name":"郝昭","attr":["male","wei",4,["drlt_zhenggu"],[]]},"zhugezhan":{"name":"诸葛瞻","attr":["male","shu",3,["xinfu_zuilun","xinfu_fuyin"],[]]},"lukang":{"name":"陆抗","attr":["male","wu",4,["drlt_qianjie","drlt_jueyan","drlt_poshi"],[]]},"yl_yuanshu":{"name":"袁术","attr":["male","qun",4,["drlt_yongsi","drlt_weidi"],["zhu"]]},"zhangxiu":{"name":"张绣","attr":["male","qun",4,["drlt_xiongluan","drlt_congjian"],[]]},"chendao":{"name":"陈到","attr":["male","shu",4,["drlt_wanglie"],[]]},"zhoufei":{"name":"周妃","attr":["female","wu",3,["liangyin","kongsheng"],[]]}}},"mobile":{"name":"移动版","skill":{"retuntian":{"name":"屯田","script":"{audio: \"2\",trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase) return false;\n\t\t\t\t\tif(event.name=='gain'&&event.player==player) return false;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.cards2&&evt.cards2.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}).callback=lib.skill.retuntian.callback;\n\t\t\t\t},callback: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\t\tif(event.judgeResult.suit=='heart'){\n\t\t\t\t\t\t\tplayer.gain(card,'gain2');\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(get.mode()=='guozhan'){\n\t\t\t\t\t\t\tplayer.chooseBool('是否将'+get.translation(card)+'作为【田】置于武将牌上？').set('frequentSkill','retuntian').ai=function(){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.directbool=true;\n\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\tif(!result.bool&&!event.directbool){\n\t\t\t\t\t\t\t//game.cardsDiscard(card);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tevent.node=event.judgeResult.node;\n\t\t\t\t\t\t//event.trigger(\"addCardToStorage\");\n\t\t\t\t\t\t//event.card.fix();\n\t\t\t\t\t\tplayer.storage.tuntian.push(event.card);\n\t\t\t\t\t\t//event.card.goto(ui.special);\n\t\t\t\t\t\tgame.cardsGotoSpecial(card);\n\t\t\t\t\t\tevent.node.moveDelete(player);\n\t\t\t\t\t\tgame.broadcast(function(cardid,player){\n\t\t\t\t\t\t\tvar node=lib.cardOL[cardid];\n\t\t\t\t\t\t\tif(node){\n\t\t\t\t\t\t\t\tnode.moveDelete(player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},event.node.cardid,player);\n\t\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([event.node]));\n\t\t\t\t\t\tplayer.markSkill('tuntian');\n\t\t\t\t\t\tgame.addVideo('storage',player,['tuntian',get.cardsInfo(player.storage.tuntian),'cards']);\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.tuntian) player.storage.tuntian=[];\n\t\t\t\t},group: \"tuntian_dist\",locked: \"false\",ai: {effect: {target: function (){\n\t\t\t\t\t\t\treturn lib.skill.tuntian.ai.effect.target.apply(this,arguments);\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(target.countCards('h')==0) return 2;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},nodiscard: \"true\",nolose: \"true\",},}","info":"当你于回合外失去牌时，你可以进行一次判定。若判定结果为♥，你获得此判定牌。否则你将此牌置于你的武将牌上，称之为【田】。锁定技，你计算与其他角色的距离时-X（X为你武将牌上【田】的数目）"},"zaoxian":{"name":"凿险","script":"{skillAnimation: \"true\",animationColor: \"thunder\",audio: \"2\",audioname: [\"re_dengai\"],unique: \"true\",juexingji: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.tuntian) return player.storage.tuntian.length>=3&&!player.storage.zaoxian;\n\t\t\t\t},derivation: \"jixi\",content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('jixi');\n\t\t\t\t\tplayer.storage.zaoxian=true;\n\t\t\t\t\tplayer.awakenSkill('zaoxian');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你武将牌上【田】的数量达到3张或更多，则你减1点体力上限，并获得技能〖急袭〗"},"xinzhuikong":{"name":"惴恐","script":"{audio: \"2\",trigger: {global: \"phaseZhunbeiBegin\",},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<-2){\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tif(cards.length>player.hp) return true;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tvar useful=get.useful(cards[i]);\n\t\t\t\t\t\t\tif(useful<5) return true;\n\t\t\t\t\t\t\tif(cards[i].number>7&&useful<7) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('xinzhuikong2')&&player.hp<=event.player.hp&&player.canCompare(event.player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.addTempSkill('xinzhuikong2','roundStart');\n\t\t\t\t\tplayer.chooseToCompare(trigger.player).set('small',(player.hp>1&&get.effect(player,{name:'sha'},trigger.player,player)>0&&Math.random()<0.9));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.addTempSkill('zishou2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.target&&get.position(result.target)=='d') player.gain(result.target,'gain2','log');\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar card={name:'sha',isCard:true};\n\t\t\t\t\tif(trigger.player.canUse(card,player,false)) trigger.player.useCard(card,player,false);\n\t\t\t\t},}","info":"每轮限一次，其他角色的回合开始时，若其体力值不小于你，你可与其拼点。若你赢，其本回合无法使用牌指定除其以外的角色为目标；若你没赢，你获得其拼点的牌，然后其视为对你使用一张【杀】。"},"xinqiuyuan":{"name":"求援","script":"{audio: \"2\",trigger: {target: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xinqiuyuan'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!_status.event.targets.contains(target)&&_status.event.playerx.canUse('sha',target,false);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,trigger.player,player)+0.1;\n\t\t\t\t\t}).set('targets',trigger.targets).set('playerx',trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('xinqiuyuan',target);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\ttarget.chooseCard(function(card,player){\n\t\t\t\t\t\t\tvar name=get.name(card,player);\n\t\t\t\t\t\t\treturn name!='sha'&&get.type(name)=='basic';\n\t\t\t\t\t\t},'h','交给'+get.translation(player)+\n\t\t\t\t\t\t'一张不为【杀】的基本牌，或成为此杀的额外目标').set('ai',function(card){\n\t\t\t\t\t\t\treturn get.attitude(target,_status.event.sourcex)>=0?1:-1;\n\t\t\t\t\t\t}).set('sourcex',player);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,event.target,'give');\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.getParent().targets.push(event.target);\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.push(event.target);\n\t\t\t\t\t\tgame.log(event.target,'成为了',trigger.card,'的额外目标');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name!='sha') return;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0){\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar target2=players[i];\n\t\t\t\t\t\t\t\t\tif(player!=target2&&target!=target2&&player.canUse(card,target2,false)&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,target)>0&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,player)<0){\n\t\t\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return 0.3;\n\t\t\t\t\t\t\t\t\t\treturn 0.6;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar target2=players[i];\n\t\t\t\t\t\t\t\t\tif(player!=target2&&target!=target2&&player.canUse(card,target2,false)&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,player)>0){\n\t\t\t\t\t\t\t\t\t\tif(player.canUse(card,target2)) return;\n\t\t\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return [0,1];\n\t\t\t\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标时，你可以令另一名其他角色交给你一张除【杀】以外的基本牌，否则其也成为此【杀】的目标。"},"xinduodao":{"name":"夺刀","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},logTarget: \"source\",filter: function (event,player){\n\t\t\t\t\tvar source=event.source;\n\t\t\t\t\tif(!source) return false;\n\t\t\t\t\tvar card=source.getEquip(1);\n\t\t\t\t\treturn card&&get.itemtype(card)=='card'&&lib.filter.canBeGained(card,player,source);\n\t\t\t\t},prompt2: function (event){\n\t\t\t\t\treturn '获得其装备区中的'+get.translation(event.source.getEquip(1));\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn (get.attitude(player,event.source)+0.1)*get.value(event.source.getEquip(1),event.source);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(trigger.source.getEquip(1),trigger.source,'give','bySelf');\n\t\t\t\t},}","info":"当你受到伤害后，你可以获得伤害来源装备区里的武器牌。"},"xinanjian":{"name":"暗箭","script":"{audio: \"2\",trigger: {player: \"useCardToPlayered\",},forced: \"true\",logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&!player.inRangeOf(event.target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar card=get.translation(trigger.card);\n\t\t\t\t\tvar target=get.translation(trigger.target);\n\t\t\t\t\tplayer.chooseControl().set('prompt','暗箭：请选择一项').set('choiceList',[\n\t\t\t\t\t\t'令'+target+'不能响应'+card,\n\t\t\t\t\t\t'令'+card+'对'+target+'的伤害值基数+1',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\tvar target=_status.event.getTrigger().target;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar num=target.mayHaveShan()?0:1;\n\t\t\t\t\t\tif(get.attitude(player,target)>0) num=1-num;\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tgame.log(player,'令',trigger.card,'不能被',trigger.target,'响应');\n\t\t\t\t\t\ttrigger.directHit.push(trigger.target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.log(player,'令',trigger.card,'对',trigger.target,'的伤害+1');\n\t\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\t\tvar map=trigger.customArgs;\n\t\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\t\tif(!map[id].extraDamage) map[id].extraDamage=0;\n\t\t\t\t\t\tmap[id].extraDamage++;\n\t\t\t\t\t}\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!arg||!arg.card||!arg.target||arg.card.name!='sha'||arg.target.inRange(player)||get.attitude(player,arg.target)>0) return false;\n\t\t\t\t\t},},}","info":"锁定技，当你使用【杀】指定目标后，若你不在目标角色攻击范围内，你选择一项：1. 令其无法响应此【杀】；2. 其受到此【杀】造成的伤害+1。"},"mobilejingce":{"name":"精策","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tgame.getGlobalHistory('cardMove',function(evt){\n\t\t\t\t\t\tif(evt.name!='cardsDiscard') return;\n\t\t\t\t\t\tvar evtx=evt.getParent();\n\t\t\t\t\t\tif(evtx.name!='orderingDiscard') return false;\n\t\t\t\t\t\tvar evt2=(evtx.relatedEvent||evtx.getParent());\n\t\t\t\t\t\tif(evt2&&(evt2.name=='useCard'||evt2.name=='respond')) num+=evt.cards.length;\n\t\t\t\t\t});\n\t\t\t\t\treturn num>=player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},group: \"mobilejingce_count\",intro: {content: function (num,player){\n\t\t\t\t\t\tif(num==0) return '一张都没有？就这？';\n\t\t\t\t\t\tif(num<player.hp) return '才'+get.cnNumber(num)+'张？就这？';\n\t\t\t\t\t\treturn '卧槽，牛逼啊，居然'+get.cnNumber(num)+'张了！';\n\t\t\t\t\t},},}","info":"结束阶段，若此回合因使用或打出而置入弃牌堆的牌的数量不小于你的体力值，则你可以摸两张牌。"},"juliao":{"name":"据辽","script":"{mod: {globalTo: function (from,to,distance){\n\t\t\t\t\t\treturn distance+game.countGroup()-1;\n\t\t\t\t\t},},}","info":"锁定技，其他角色计算与你的距离始终+X（X为场上势力数-1）。"},"taomie":{"name":"讨灭","script":"{audio: \"3\",group: [\"taomie1\",\"taomie2\",\"taomie3\"],trigger: {source: \"damageBegin1\",},forced: \"true\",locked: \"false\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player.hasMark('taomie');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.logSkill(Math.random()<0.5?'taomie2':'taomie3',trigger.player);\n\t\t\t\t\tvar target=get.translation(trigger.player);\n\t\t\t\t\tplayer.chooseControl().set('prompt','讨灭：请选择一项').set('choiceList',[\n\t\t\t\t\t\t'令即将对'+target+'造成的伤害+1',\n\t\t\t\t\t\t'获得'+target+'的一张牌，并可将其交给另一名其他角色',\n\t\t\t\t\t\t'依次执行以上所有选项，并移去'+target+'的“讨灭”标记',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\tvar evt=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar target=evt.player;\n\t\t\t\t\t\tvar bool1=!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\tcard:evt.card,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar bool2=get.effect(target,{name:'shunshou'},player,player)>0;\n\t\t\t\t\t\tif(bool1&&bool2&&target.hp<=evt.num+1) return 2;\n\t\t\t\t\t\tif(bool1) return 0;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==2){\n\t\t\t\t\t\ttrigger.taomie_player=trigger.player;\n\t\t\t\t\t\ttrigger.player.addTempSkill('taomie4');\n\t\t\t\t\t}\n\t\t\t\t\tif(result.index!=1){\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t}\n\t\t\t\t\tif(result.index!=0&&trigger.player.countGainableCards(player,'hej')>0){\n\t\t\t\t\t\tplayer.gainPlayerCard(trigger.player,'hej',true);\n\t\t\t\t\t}\n\t\t\t\t else event.finish();\n\t\t\t\t 'step 2'\n\t\t\t\t var card=result.cards[0];\n\t\t\t\t if(card&&player.getCards('h').contains(card)&&game.hasPlayer(function(current){\n\t\t\t\t \treturn current!=player&&current!=trigger.player;\n\t\t\t\t })){\n\t\t\t\t \tevent.card=card;\n\t\t\t\t \tplayer.chooseTarget('是否将'+get.translation(card)+'交给一名其他角色？',function(card,player,target){\n\t\t\t\t \t\treturn target!=player&&target!=_status.event.getTrigger().player;\n\t\t\t\t \t}).set('ai',function(target){\n\t\t\t\t  \tvar player=_status.event.player;\n\t\t\t\t  \tvar card=_status.event.getParent().card;\n\t\t\t\t  \tif(target.hasSkillTag('nogain')||!player.needsToDiscard()||(get.tag(card,'damage')&&player.hasValueTarget(card,null,false)&&get.effect(_status.event.getTrigger().player,card,null,false)>0)) return 0;\n\t\t\t\t  \treturn get.attitude(player,target)/(1+target.countCards('h'));\n\t\t\t\t \t});\n\t\t\t\t }\n\t\t\t\t else event.finish();\n\t\t\t\t 'step 3'\n\t\t\t\t if(result.bool){\n\t\t\t\t \tvar target=result.targets[0];\n\t\t\t\t \tplayer.line(target);\n\t\t\t\t \ttarget.gain(card,player,'giveAuto');\n\t\t\t\t }\n\t\t\t\t},intro: {content: \"mark\",},ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(target&&get.tag(card,'damage')&&target.hasMark('taomie')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\treturn 0.7;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 1.2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后或当你造成伤害后，你可以令伤害来源或受伤角色获得“讨灭”标记（如场上已有标记则转换给该角色）；当你对有“讨灭”标记的角色造成伤害时，选择一项：1. 此伤害+1；2. 你获得其区域内的一张牌并可将之交给另一名角色；3. 依次执行前两项并于伤害结算后弃置其“讨灭”标记。"},"new_repaoxiao":{"name":"咆哮","script":"{audio: \"paoxiao\",firstDo: \"true\",audioname2: {old_guanzhang: \"old_fuhun\",xin_zhangfei: \"paoxiao_re_zhangfei\",},audioname: [\"re_zhangfei\",\"guanzhang\",\"xiahouba\"],trigger: {player: \"useCard1\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn (!event.audioed||!player.hasSkill('new_repaoxiao2'))&&event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.audioed=true;\n\t\t\t\t\tplayer.addTempSkill('new_repaoxiao2');\n\t\t\t\t},mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha') return Infinity;\n\t\t\t\t\t},},ai: {unequip: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!get.zhu(player,'shouyue')) return false;\n\t\t\t\t\t\tif(arg&&arg.name=='sha') return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技，出牌阶段，你使用【杀】没有数量限制。若你于此出牌阶段内使用过【杀】，则你本回合内使用【杀】没有距离限制。"},"liyong":{"name":"厉勇","script":"{audio: \"retishen\",trigger: {player: \"shaMiss\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isPhaseUsing();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.getParent().liyong=true;\n\t\t\t\t\tplayer.addTempSkill('liyong2','phaseUseEnd');\n\t\t\t\t},}","info":"锁定技，若你于出牌阶段使用的【杀】被【闪】抵消，本阶段你下一张【杀】不可被响应且伤害+1，指定的目标本回合非锁定技失效，当此【杀】造成伤害后，若目标角色未死亡，你失去1点体力。"},"xinniluan":{"name":"逆乱","script":"{trigger: {global: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&event.player.isAlive()&&event.player.getHistory('useCard',function(evt){\n\t\t\t\t\t\tif(evt.targets&&evt.targets.length){\n\t\t\t\t\t\t\tvar targets=evt.targets.slice(0);\n\t\t\t\t\t\t\twhile(targets.contains(event.player)) targets.remove(event.player);\n\t\t\t\t\t\t\treturn targets.length>0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}).length>0&&(_status.connectMode||player.hasSha());\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToUse({\n\t\t\t\t\t\tlogSkill:'xinniluan',\n\t\t\t\t\t\tpreTarget:trigger.player,\n\t\t\t\t\t\tprompt:'是否发动【逆乱】，对'+get.translation(trigger.player)+'使用一张【杀】？',\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.name(card)=='sha'&&lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target==_status.event.preTarget&&lib.filter.targetEnabled.apply(this,arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\taddCount:false,\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&player.getHistory('sourceDamage',function(evt){\n\t\t\t\t\t\treturn evt.getParent(4)==event;\n\t\t\t\t\t}).length&&trigger.player.countDiscardableCards(player,'he')>0) player.discardPlayerCard(trigger.player,true,'he').boolline=true;\n\t\t\t\t},}","info":"其他角色的结束阶段，若其本回合对除其以外的角色使用过牌，则你可以对其使用一张【杀】。若以此法使用的【杀】造成伤害，则你弃置其一张牌。"},"xiaoxi_hansui":{"name":"骁袭","script":"{audio: \"2\",enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: function (card,player){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},position: \"he\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t},prompt: \"将一张黑色牌当杀使用或打出\",check: function (card){return 4.5-get.value(card)},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t\t},respondSha: \"true\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"你可以将一张黑色牌当做【杀】使用或打出。"},"daoji":{"name":"盗戟","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t})&&game.hasPlayer(function(target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('e')>0;\n\t\t\t\t\t});\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t},position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('e')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&get.attitude(player,current)<0&&get.damageEffect(current,player,player)>0&&current.getEquip(1);\n\t\t\t\t\t})) return 8-get.value(card);\n\t\t\t\t\treturn 5-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.gainPlayerCard(target,'e',true).set('ai',function(button){\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.subtype(card)=='equip1'&&get.damageEffect(_status.event.target,player,player)>0) return 6+get.value(card);\n\t\t\t\t\t\treturn get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result||!result.bool||!result.cards||!result.cards.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\tevent.card=card;\n\t\t\t\t\tif(player.getCards('h').contains(card)&&get.type(card)=='equip') player.chooseUseTarget(card,true).nopopup=true;\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(get.subtype(card,false)=='equip1') target.damage();\n\t\t\t\t},ai: {order: \"6\",result: {target: function (player,current){\n\t\t\t\t\t\t\tif(get.damageEffect(current,player,player)>0&&current.getEquip(1)) return -1.5;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张非基本牌并选择一名装备区里有牌的其他角色，你获得其装备区中的一张牌并使用之。若你以此法获得的牌是武器牌，则你使用此牌后对其造成1点伤害。"},"rexuanfeng":{"name":"旋风","script":"{audio: \"xuanfeng\",audioname: [\"boss_lvbu3\",\"re_heqi\",\"re_lingtong\"],trigger: {player: [\"loseAfter\",\"phaseDiscardEnd\"],global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('he')>0;\n\t\t\t\t\t})) return false;\n\t\t\t\t\tif(event.name=='phaseDiscard'){\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\t\tif(evt&&evt.getParent('phaseDiscard')==event&&evt.hs) cards.addArray(evt.hs);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn cards.length>1;\n\t\t\t\t\t}\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.es&&evt.es.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=['弃置至多两名其他角色的合计两张牌'];\n\t\t\t\t\tif(lib.skill.rexuanfeng.canMoveCard(player)) list.push('将一名其他角色装备区内的一张牌移动到另一名角色的装备区内');\n\t\t\t\t\tplayer.chooseControl('cancel2').set('choiceList',list).set('prompt',get.prompt('rexuanfeng')).set('ai',function(){\n\t\t\t\t\t\tif(lib.skill.rexuanfeng.canMoveCard(player,true)) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('rexuanfeng');\n\t\t\t\t\t\tif(result.index==1) event.goto(5);\n\t\t\t\t\t\telse event.count=2;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.chooseTarget('弃置一名其他角色的一张牌',function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\treturn target.countDiscardableCards(player,'he');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],'he',true);\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(event.count) event.goto(2);\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 5'\n\t\t\t\t\tvar next=player.chooseTarget(2,function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\t\tvar from=ui.selected.targets[0];\n\t\t\t\t\t\t\tif(target.isMin()) return false;\n\t\t\t\t\t\t\tvar es=from.getCards('e');\n\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\tif(target.isEmpty(get.subtype(es[i]))) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn target.countCards('e')>0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tvar sgnatt=get.sgn(att);\n\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tif(target.countCards('e',function(card){\n\t\t\t\t\t\t\t\t\treturn get.value(card,target)<0&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn current!=player&&current!=target&&get.attitude(player,current)<0&&current.isEmpty(get.subtype(card))&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})>0) return 9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(att<0){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\tif(current!=target&&current!=player&&get.attitude(player,current)>0){\n\t\t\t\t\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\t\t\t\tif(get.value(es[i],target)>0&&current.isEmpty(get.subtype(es[i]))&&get.effect(current,es[i],player,player)>0) return true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar es=ui.selected.targets[0].getCards('e');\n\t\t\t\t\t\tvar i;\n\t\t\t\t\t\tvar att2=get.sgn(get.attitude(player,ui.selected.targets[0]));\n\t\t\t\t\t\tfor(i=0;i<es.length;i++){\n\t\t\t\t\t\t\tif(sgnatt!=0&&att2!=0&&sgnatt!=att2&&\n\t\t\t\t\t\t\t\tget.sgn(get.value(es[i],ui.selected.targets[0]))==-att2&&\n\t\t\t\t\t\t\t\tget.sgn(get.value(es[i],target))==sgnatt&&\n\t\t\t\t\t\t\t\ttarget.isEmpty(get.subtype(es[i]))){\n\t\t\t\t\t\t\t\treturn Math.abs(att);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(i==es.length){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -att*get.attitude(player,ui.selected.targets[0]);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('multitarget',true);\n\t\t\t\t\tnext.set('targetprompt',['被移走','移动目标']);\n\t\t\t\t\tnext.set('prompt',event.prompt||'移动场上的一张装备牌');\n\t\t\t\t\tnext.set('forced',true);\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line2(result.targets,'green');\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 7'\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t'step 8'\n\t\t\t\t\tif(targets.length==2){\n\t\t\t\t\t\tplayer.choosePlayerCard('e',true,function(button){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar targets0=_status.event.targets0;\n\t\t\t\t\t\t\tvar targets1=_status.event.targets1;\n\t\t\t\t\t\t\tif(get.attitude(player,targets0)>get.attitude(player,targets1)){\n\t\t\t\t\t\t\t\tif(get.value(button.link,targets0)<0) return get.effect(targets1,button.link,player,player);\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.value(button.link,targets0)*get.effect(targets1,button.link,player,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},targets[0]).set('targets0',targets[0]).set('targets1',targets[1]).set('filterButton',function(button){\n\t\t\t\t\t\t\tvar targets1=_status.event.targets1;\n\t\t\t\t\t\t\treturn targets1.isEmpty(get.subtype(button.link));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 9'\n\t\t\t\t\tif(result.bool&&result.links.length){\n\t\t\t\t\t\tvar link=result.links[0];\n\t\t\t\t\t\tevent.targets[1].equip(link);\n\t\t\t\t\t\tevent.targets[0].$give(link,event.targets[1])\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tevent.result={bool:true};\n\t\t\t\t\t}\n\t\t\t\t},canMoveCard: function (player,withatt){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\tif(player==current) return false;\n\t\t\t\t\t\tvar att=get.sgn(get.attitude(player,current));\n\t\t\t\t\t\tif(!withatt||att!=0){\n\t\t\t\t\t\t\tvar es=current.getCards('e');\n\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current2){\n\t\t\t\t\t\t\t\t\tif(player==current2) return false;\n\t\t\t\t\t\t\t\t\tif(withatt){\n\t\t\t\t\t\t\t\t\t\tif(get.sgn(get.value(es[i],current))!=-att) return false;\n\t\t\t\t\t\t\t\t\t\tvar att2=get.sgn(get.attitude(player,current2));\n\t\t\t\t\t\t\t\t\t\tif(att==att2||att2!=get.sgn(get.value(es[i],current2))) return false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn current!=current2&&!current2.isMin()&&current2.isEmpty(get.subtype(es[i]));\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},reverseEquip: \"true\",noe: \"true\",},}","info":"当你失去装备区内的牌时，或于弃牌阶段弃置了两张或更多的手牌后，你可以依次弃置一至两名其他角色的共计两张牌，或将一名其他角色装备区内的一张牌移动到另一名其他角色的装备区内。"},"zishou":{"name":"自守","script":"{audio: \"2\",audioname: [\"re_liubiao\"],trigger: {player: \"phaseDrawBegin2\",},check: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<=(player.hasSkill('zongshi')?player.maxHp:(player.hp-2))||player.skipList.contains('phaseUse');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num+=game.countGroup();\n\t\t\t\t\tplayer.addTempSkill('zishou2');\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"摸牌阶段，你可以额外摸X张牌（X为场上现存势力数）。若如此做，你于本回合出牌阶段内使用的牌不能指定其他角色为目标。"},"rezongshi":{"name":"宗室","script":"{audio: \"2\",mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+game.countGroup();\n\t\t\t\t\t},},trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('rezongshi_paoxiao');\n\t\t\t\t},}","info":"锁定技，你的手牌上限+X（X为势力数）。准备阶段，若你的手牌数大于体力值，则你本回合内使用【杀】无次数限制。"},"baiyi":{"name":"败移","script":"{}","info":"此模式下不可用"},"jinglve":{"name":"景略","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('jinglve2')) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h')>0;\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!player.storage.jinglve4) player.storage.jinglve4=[];\n\t\t\t\t\tplayer.storage.jinglve4.add(target);\n\t\t\t\t\tplayer.chooseButton(['选择一张牌作为「死士」',target.getCards('h')],true).set('ai',function(button){\n\t\t\t\t\t\tvar target=_status.event.getParent().target;\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar val=target.getUseValue(card);\n\t\t\t\t\t\tif(val>0) return val;\n\t\t\t\t\t\treturn get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.jinglve2=target;\n\t\t\t\t\t\tplayer.storage.jinglve3=result.links[0];\n\t\t\t\t\t\tplayer.addSkill('jinglve2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"12\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以观看一名其他角色的手牌，将其中一张牌标记为「死士」。当其使用对应的实体牌中包含「死士」的牌时，你取消此牌的所有目标。当「死士」牌不因使用而进入弃牌堆，或其回合结束后，若「死士」牌仍在其区域内，则你获得此牌。"},"shanli":{"name":"擅立","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},juexingji: \"true\",forced: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.baiyi&&player.getStorage('jinglve4').length>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('shanli');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.chooseTarget(true,'选择【擅立】的目标').set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target==game.me||target.isUnderControl()&&target.isOnline()) return 2*att;\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\tevent.target=target;\n\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\tgame.log(player,'拥立',target);\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(!_status.characterlist){\n\t\t\t\t\t\tif(_status.connectMode) var list=get.charactersOL();\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tfor(var i in lib.character){\n\t\t\t\t\t\t\t\tif(lib.filter.characterDisabled2(i)||lib.filter.characterDisabled(i)) continue;\n\t\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\t\tlist.remove(current.name);\n\t\t\t\t\t\t\tlist.remove(current.name1);\n\t\t\t\t\t\t\tlist.remove(current.name2);\n\t\t\t\t\t\t\tif(current.storage.rehuashen&&current.storage.rehuashen.character) list.removeArray(current.storage.rehuashen.character)\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_status.characterlist=list;\n\t\t\t\t\t}\n\t\t\t\t\t_status.characterlist.randomSort();\n\t\t\t\t\tvar chara=[];\n\t\t\t\t\tvar skills=[];\n\t\t\t\t\tfor(var i of _status.characterlist){\n\t\t\t\t\t\tif(i=='key_yuri') continue;\n\t\t\t\t\t\tvar character=lib.character[i];\n\t\t\t\t\t\tif(character&&character[3]){\n\t\t\t\t\t\t\tfor(var j of character[3]){\n\t\t\t\t\t\t\t\tif(skills.contains(j)||j=='yuri_wangxi'||target.hasSkill('j')) continue;\n\t\t\t\t\t\t\t\tvar info=get.info(j);\n\t\t\t\t\t\t\t\tif(info&&info.zhuSkill){\n\t\t\t\t\t\t\t\t\tskills.add(j);\n\t\t\t\t\t\t\t\t\tchara.add(i);\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(skills.length>=3) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(!skills.length){event.finish();return}\n\t\t\t\t\tevent.chara=chara;\n\t\t\t\t\tevent.skills=skills;\n\t\t\t\t\tplayer.chooseControl(skills).set('dialog',['选择令'+get.translation(target)+'获得一个技能',[chara,'character']]);\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.addSkillLog(result.control);\n\t\t\t\t\ttarget.storage.zhuSkill_shanli=[result.control];\n\t\t\t\t\ttarget.setAvatarQueue(target.name1||target.name,[event.chara[event.skills.indexOf(result.control)]]);\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你已发动过〖败移〗且对至少两名角色发动过〖景略〗，则你减1点体力上限并选择一名角色。系统随机选择三个不为〖忘隙(仲村由理)〗的主公技，然后你选择其中一个技能，令其获得之。其将交互表情中的【拖鞋】和【酒杯】替换为【枷锁】和【玉玺】。"},"hongyi":{"name":"弘仪","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>=Math.min(2,game.dead.length);\n\t\t\t\t},selectCard: function (){\n\t\t\t\t\treturn Math.min(2,game.dead.length);\n\t\t\t\t},filterCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},check: function (card){\n\t\t\t\t\tvar num=Math.min(2,game.dead.length);\n\t\t\t\t\tif(!num) return 1;\n\t\t\t\t\tif(num==1) return 7-get.value(card);\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\tplayer.addTempSkill('hongyi2',{player:'phaseBeginStart'});\n\t\t\t\t\tplayer.storage.hongyi2.add(target);\n\t\t\t\t\tplayer.markSkill('hongyi2');\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')) return -0.5;\n\t\t\t\t\t\t\treturn -1-target.countCards('h');\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置X张牌并选择一名其他角色（X为场上已阵亡的角色数且至多为2）。你的下回合开始前，该角色造成伤害时进行判定，若结果为：黑色，此伤害-1。红色，受到伤害的角色摸一张牌。"},"quanfeng":{"name":"劝封","script":"{audio: \"2\",trigger: {global: \"die\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.getStockSkills('仲村由理','天下第一').filter(function(skill){\n\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\treturn info&&!info.juexingji&&!info.hiddenSkill&&!info.zhuSkill&&!info.charlotte&&!info.limited;\n\t\t\t\t\t}).length>0;\n\t\t\t\t},logTarget: \"player\",skillAnimation: \"true\",limited: \"true\",forced: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('quanfeng');\n\t\t\t\t\tvar list=trigger.player.getStockSkills('仲村由理','天下第一').filter(function(skill){\n\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\treturn info&&!info.juexingji&&!info.hiddenSkill&&!info.zhuSkill&&!info.charlotte&&!info.limited;\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length==1) event._result={control:list[0]};\n\t\t\t\t\telse player.chooseControl(list).set('prompt','选择获得'+get.translation(trigger.player)+'的一个技能').set('forceDie',true).set('ai',function(){\n\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.addSkillLog(result.control);\n\t\t\t\t\tgame.broadcastAll(function(skill){\n\t\t\t\t\t\tvar list=[skill];game.expandSkills(list);\n\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\tvar info=lib.skill[i];\n\t\t\t\t\t\t\tif(!info) continue;\n\t\t\t\t\t\t\tif(!info.audioname2) info.audioname2={};\n\t\t\t\t\t\t\tinfo.audioname2.yanghuiyu='quanfeng';\n\t\t\t\t\t\t}\n\t\t\t\t\t},result.control);\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"锁定技，限定技，一名角色死亡时，你选择获得其的一个技能（主公技，限定技，觉醒技，隐匿技，带有Charlotte标签的技能除外），然后加1点体力上限并回复1点体力。"},"mobiledanshou":{"name":"胆守","script":"{trigger: {global: \"phaseJieshuBegin\",},audio: \"2\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==event.player) return false;\n\t\t\t\t\tvar num=event.player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.targets.contains(player);\n\t\t\t\t\t}).length;\n\t\t\t\t\treturn num==0||event.player.isAlive()&&num<=player.countCards('he');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=trigger.player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.targets.contains(player);\n\t\t\t\t\t}).length;\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\tif(num==0){\n\t\t\t\t\t\tif(player.hasSkill('mobiledanshou')) event._result={bool:true};\n\t\t\t\t\t\telse player.chooseBool('是否发动【胆守】摸一张牌？',lib.translate.mobiledanshou_info);\n\t\t\t\t\t}\n\t\t\t\t\telse event.goto(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('mobiledanshou');\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.chooseToDiscard(num,get.prompt('mobiledanshou',trigger.player),'弃置'+get.translation(num)+'张牌并对其造成1点伤害','he').set('ai',function(card){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\tvar num=_status.event.getParent().num;\n\t\t\t\t\t\tif(num==1) return 8-get.value(card);\n\t\t\t\t\t\tif(num==2) return 6.5-get.value(card);\n\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t}).set('goon',get.damageEffect(trigger.player,player,player)>0).logSkill=['mobiledanshou',trigger.player];\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addExpose(0.2);\n\t\t\t\t\t\ttrigger.player.damage();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"一名其他角色的结束阶段开始时，若X：为0，你摸一张牌；不等于0，你可弃置X张牌并对其造成1点伤害（X为其本回合内使用的目标包含你的牌的数量）"},"xinyicong":{"name":"义从","script":"{mod: {globalFrom: function (from,to,current){\n\t\t\t\t\t\treturn current-Math.max(0,from.hp-1);\n\t\t\t\t\t},globalTo: function (from,to,current){\n\t\t\t\t\t\treturn current+Math.max(0,to.getDamagedHp()-1);\n\t\t\t\t\t},},ai: {threaten: \"0.8\",},}","info":"锁定技，你计算与其他角色的距离时-X，其他角色计算与你的距离时+Y。（X为你的体力值-1，Y为你的已损失体力值-1）"},"qiaomeng":{"name":"趫猛","script":"{audio: \"2\",trigger: {source: \"damageSource\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.cards&&\n\t\t\t\t\tget.color(event.cards)=='black'&&event.player.countDiscardableCards(player,'hej');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.discardPlayerCard(get.prompt('qiaomeng',trigger.player),'e',trigger.player).set('logSkill',['qiaomeng',trigger.player]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tif(get.position(card)=='d'){\n\t\t\t\t\t\t\tif(get.subtype(card)=='equip3'||get.subtype(card)=='equip4'){\n\t\t\t\t\t\t\t\tplayer.gain(card,player,'gain2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用黑色【杀】对一名角色造成伤害后，你可以弃置该角色装备区里的一张牌，若此牌是坐骑牌，你于此牌置入弃牌堆时获得之。"},"beizhu":{"name":"备诛","script":"{audio: \"3\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addTempSkill('beizhu_draw');\n\t\t\t\t\tplayer.viewHandcards(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=target.getCards('h','sha');\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\t\tevent.goto(5);\n\t\t\t\t\t}\n\t\t\t\t\telse player.discardPlayerCard('he',target,true);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.chooseBool('是否令'+get.translation(target)+'获得一张【杀】？').set('ai',function(){\n\t\t\t\t\t\tvar evt=status.event.getParent();\n\t\t\t\t\t\treturn get.attitude(evt.player,evt.target)>0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\t\treturn card.name=='sha';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card) target.gain(card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t'step 5'\n\t\t\t\t\tvar hs=target.getCards('h');\n\t\t\t\t\tcards=cards.filter(function(card){\n\t\t\t\t\t\treturn hs.contains(card)&&get.name(card,target)=='sha'&&target.canUse({\n\t\t\t\t\t\t\tname:'sha',\n\t\t\t\t\t\t\tisCard:true,\n\t\t\t\t\t\t\tcards:[card],\n\t\t\t\t\t\t},player,false);\n\t\t\t\t\t});\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tvar card=cards.randomRemove(1)[0];\n\t\t\t\t\t\ttarget.useCard(player,false,card).card.beizhu=true;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段限一次，你可以观看一名其他角色的手牌。若其中：没有【杀】，你弃置其一张牌，然后你可令其获得牌堆中的一张【杀】；有【杀】，其依次对你使用这些【杀】，当你因此受到1点伤害后，你摸一张牌。"},"xinqiaoshui":{"name":"巧说","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool) player.addTempSkill('qiaoshui3','phaseUseEnd');\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addTempSkill('qiaoshui2','phaseUseEnd');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (item,player){\n\t\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn player.hasValueTarget(card);\n\t\t\t\t\t\t})) return 10;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn player.hasValueTarget(card);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tif(player.hasSkill('qiaoshui3')) return 0;\n\t\t\t\t\t\t\t\tvar nd=!player.needsToDiscard();\n\t\t\t\t\t\t\t\tif(player.hasCard(function(card){\n\t\t\t\t\t\t\t\t\tif(get.position(card)!=\"h\") return false;\n\t\t\t\t\t\t\t\t\tvar val=get.value(card)\n\t\t\t\t\t\t\t\t\tif(nd&&val<0) return true;\n\t\t\t\t\t\t\t\t\tif(val<=5){\n\t\t\t\t\t\t\t\t\t\treturn card.number>=12;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(val<=6){\n\t\t\t\t\t\t\t\t\t\treturn card.number>=13;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t})) return -1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以和一名其他角色拼点。若你赢，则你本阶段内使用的下一张基本牌或普通锦囊牌可以增加减少一个目标。若你没赢，你本阶段内不能使用锦囊牌。"},"xinjyzongshi":{"name":"纵适","script":"{audio: \"2\",trigger: {player: [\"chooseToCompareAfter\",\"compareMultipleAfter\"],target: [\"chooseToCompareAfter\",\"compareMultipleAfter\"],},filter: function (event,player){\n\t\t\t\t\treturn !event.preserve;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar str='<div class=\"text center\">牌堆顶';\n\t\t\t\t\tvar cards=get.cards();\n\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\tif(trigger.num1>trigger.num2&&get.position(trigger.card2,true)=='o'){\n\t\t\t\t\t\t\tstr+='/拼点牌';\n\t\t\t\t\t\t\tcards.push(trigger.card2)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(trigger.num1<trigger.num2&&get.position(trigger.card1,true)=='o'){\n\t\t\t\t\t\t\tstr+='/拼点牌';\n\t\t\t\t\t\t\tcards.push(trigger.card1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(trigger.num1<trigger.num2&&get.position(trigger.card1,true)=='o'){\n\t\t\t\t\t\t\tstr+='/拼点牌';\n\t\t\t\t\t\t\tcards.push(trigger.card1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(trigger.num1>trigger.num2&&get.position(trigger.card2,true)=='o'){\n\t\t\t\t\t\t\tstr+='/拼点牌';\n\t\t\t\t\t\t\tcards.push(trigger.card2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tstr+='</div>';\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tplayer.chooseButton(['纵适：选择要获得的牌',str,cards],true).set('ai',get.buttonValue);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar draw=result.links[0]==cards[0];\n\t\t\t\t\t\tplayer.gain(result.links,draw?'draw':'gain2').log=false;\n\t\t\t\t\t\tgame.log(player,'获得了',draw?'牌堆顶的一张牌':result.links);\n\t\t\t\t\t\tif(!draw){\n\t\t\t\t\t\t\tcards[0].fix();\n\t\t\t\t\t\t\tui.cardPile.insertBefore(cards[0],ui.cardPile.firstChild);\n\t\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你拼点后，你可以观看牌堆顶的一张牌，然后选择一项：获得此牌，或获得两张拼点牌中点数较小的一张。"},"rejiangchi":{"name":"将驰","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=['弃牌','摸牌','取消'];\n\t\t\t\t\tif(!player.countCards('he')) list.remove('弃牌');\n\t\t\t\t\tplayer.chooseControl(list,function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(list.contains('弃牌')){\n\t\t\t\t\t\t\tif(player.countCards('h')>3&&player.countCards('h','sha')>1){\n\t\t\t\t\t\t\t\treturn '弃牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.countCards('h','sha')>2){\n\t\t\t\t\t\t\t\treturn '弃牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.countCards('h','sha')){\n\t\t\t\t\t\t\treturn '摸牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 'cancel2';\n\t\t\t\t\t}).set('prompt',get.prompt2('rejiangchi'));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='弃牌'){\n\t\t\t\t\t\tplayer.chooseToDiscard(true,'he');\n\t\t\t\t\t\tplayer.addTempSkill('jiangchi2','phaseUseEnd');\n\t\t\t\t\t\tplayer.logSkill('rejiangchi');\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.control=='摸牌'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.addTempSkill('rejiangchi3','phaseUseEnd');\n\t\t\t\t\t\tplayer.logSkill('rejiangchi');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以选择一项：1、摸一张牌，若如此做，你本阶段内不能使用【杀】。 2、弃置一张牌，若如此做，此阶段你使用【杀】无距离限制且你可以额外使用一张【杀】。"},"redangxian":{"name":"当先","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",audio: \"dangxian\",audioname: [\"guansuo\",\"xin_liaohua\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar card=get.discardPile(function(card){\n\t\t\t\t\t\treturn card.name=='sha';\n\t\t\t\t\t});\n\t\t\t\t\tif(card) player.gain(card,'gain2');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tvar next=player.phaseUse();\n\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\ttrigger.next.push(next);\n\t\t\t\t},}","info":"锁定技，回合开始时，你从弃牌堆中获得一张【杀】并进行一个额外的出牌阶段。"},"refuli":{"name":"伏枥","script":"{skillAnimation: \"true\",animationColor: \"soil\",audio: \"2\",unique: \"true\",limited: \"true\",enable: \"chooseToUse\",mark: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.type!='dying') return false;\n\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('refuli');\n\t\t\t\t\tevent.num=game.countGroup();\n\t\t\t\t\tif(event.num>player.hp) player.recover(event.num-player.hp);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(player.isMaxHp(true)) player.turnOver();\n\t\t\t\t},ai: {save: \"true\",skillTagFilter: function (player,arg,target){\n\t\t\t\t\t\treturn player==target;\n\t\t\t\t\t},result: {player: \"10\",},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.storage.refuli) return 0.9;\n\t\t\t\t\t},},intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，当你处于濒死状态时，你可以将体力值回复至X点（X为势力数）。然后若你的体力值为全场唯一最多，你翻面。"},"xuewei":{"name":"血卫","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xuewei'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player==get.zhu(player)&&player.hp<=2) return 0;\n\t\t\t\t\t\treturn get.attitude(player,target)-4;\n\t\t\t\t\t}).animate=false;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('xuewei');\n\t\t\t\t\t\tplayer.addTempSkill('xuewei2',{player:'phaseBegin'});\n\t\t\t\t\t\tplayer.storage.xuewei2=target;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.05\",},}","info":"准备阶段，你可以选择一名其他角色（仅自己可见）。若如此做，直到你的下回合开始前，当其第一次受到伤害时，你防止此伤害，改为由你受到等量的伤害并对伤害来源造成等量同属性的伤害。"},"liechi":{"name":"烈斥","script":"{trigger: {player: \"dying\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.getParent().name=='damage'&&event.source&&event.source.countCards('he');\n\t\t\t\t},audio: \"2\",content: function (){\n\t\t\t\t\ttrigger.source.chooseToDiscard('he',true);\n\t\t\t\t},}","info":"锁定技，当你进入濒死状态时，伤害来源弃置一张牌。"},"rejiuchi":{"name":"酒池","script":"{group: [\"jiuchi\"],audioname: [\"re_dongzhuo\"],trigger: {source: \"damage\",},forced: \"true\",popup: \"false\",locked: \"false\",audio: \"jiuchi\",filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.getParent(2).jiu==true&&!player.hasSkill('rejiuchi_air');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.logSkill('jiuchi');\n\t\t\t\t\tplayer.addTempSkill('rejiuchi_air');\n\t\t\t\t},subSkill: {air: {sub: \"true\",},},}","info":"你可以将一张黑桃手牌当做【酒】使用。锁定技，当你于回合内使用带有【酒】效果的【杀】造成伤害时，你令你的【崩坏】失效直到回合结束。"},"roulin":{"name":"肉林","script":"{audio: \"2\",audioname: [\"re_dongzhuo\",\"ol_dongzhuo\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(player==event.player){\n\t\t\t\t\t\treturn event.target.sex=='female';\n\t\t\t\t\t}\n\t\t\t\t\treturn event.player.sex=='female';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player==event.player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar id=(player==trigger.player?trigger.target:player).playerid;\n\t\t\t\t\tvar map=trigger.getParent().customArgs;\n\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\tif(typeof map[id].shanRequired=='number'){\n\t\t\t\t\t\tmap[id].shanRequired++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tmap[id].shanRequired=2;\n\t\t\t\t\t}\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg.card.name!='sha'||arg.target.sex!='female'||arg.target.countCards('h','shan')>1) return false;\n\t\t\t\t\t},},}","info":"锁定技。你对女性角色、女性角色对你使用【杀】时，都需连续使用两张【闪】才能抵消。"},"benghuai":{"name":"崩坏","script":"{audio: \"2\",audioname: [\"zhugedan\",\"re_dongzhuo\",\"ol_dongzhuo\"],trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.isMinHp()&&!player.hasSkill('rejiuchi_air')&&!player.hasSkill('oljiuchi_air');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseControl('baonue_hp','baonue_maxHp',function(event,player){\n\t\t\t\t\t\tif(player.hp==player.maxHp) return 'baonue_hp';\n\t\t\t\t\t\tif(player.hp<player.maxHp-1||player.hp<=2) return 'baonue_maxHp';\n\t\t\t\t\t\treturn 'baonue_hp';\n\t\t\t\t\t}).set('prompt','崩坏：失去1点体力或减1点体力上限');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='baonue_hp'){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.loseMaxHp(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.5\",neg: \"true\",},}","info":"结束阶段，若你的体力不是全场最少的(或之一)，你须减1点体力或体力上限。"},"baonue":{"name":"暴虐","script":"{unique: \"true\",group: \"baonue2\",audioname: [\"re_dongzhuo\"],audio: \"baonue2\",zhuSkill: \"true\",}","info":"主公技，其他群雄角色造成伤害后，可进行一次判定，若为♠，你回复1点体力。"},"repojun":{"name":"破军","script":"{shaRelated: \"true\",audio: \"2\",trigger: {player: \"useCardToPlayered\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.target.hp>0&&event.target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.choosePlayerCard(trigger.target,'he',[1,Math.min(trigger.target.hp,trigger.target.countCards('he'))],get.prompt('repojun',trigger.target));\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\tvar val=get.value(button.link);\n\t\t\t\t\t\tif(button.link==_status.event.target.getEquip(2)) return 2*(val+3);\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('goon',get.attitude(player,trigger.target)<=0);\n\t\t\t\t\tnext.set('forceAuto',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=trigger.target;\n\t\t\t\t\t\tplayer.logSkill('repojun',trigger.target);\n\t\t\t\t\t\ttarget.addSkill('repojun2');\n\t\t\t\t\t\ttarget.storage.repojun2.addArray(result.cards);\n\t\t\t\t\t\ttarget.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tgame.log(target,'失去了'+get.cnNumber(result.cards.length)+'张牌');\n\t\t\t\t\t\ttarget.markSkill('repojun2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {unequip_ai: \"true\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(get.attitude(player,arg.target)>0) return false;\n\t\t\t\t\t\tif(tag=='directHit_ai') return arg.target.hp>=Math.max(1,arg.target.countCards('h')-1);\n\t\t\t\t\t\tif(arg&&arg.name=='sha'&&arg.target.getEquip(2)) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},group: \"repojun3\",}","info":"当你使用【杀】指定目标后，你可以将其的至多X张牌置于其武将牌上（X为其体力值），然后其于当前回合结束时获得这些牌。当你因执行【杀】的效果而对一名角色造成伤害时，若该角色的手牌数和装备区内的牌数均不大于你，则此伤害+1。"},"zhengjian":{"name":"诤荐","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},locked: \"true\",direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('请选择【诤荐】的目标',lib.translate.zhengjian_info).set('ai',function(target){\n\t\t\t\t\t\tif(target.hasSkill('zhengjian_mark')) return 0;\n\t\t\t\t\t\tif(player==target) return 0.5;\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target)*(1+target.countCards('h'));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhengjian',target);\n\t\t\t\t\t\ttarget.addSkill('zhengjian_mark');\n\t\t\t\t\t}\n\t\t\t\t},group: \"zhengjian_draw\",ai: {notemp: \"true\",},}","info":"锁定技，结束阶段，你令一名角色获得一枚“诤”。回合开始时，你令有“诤”的角色移去“诤”并摸X张牌（X为其最后一次获得“诤”后使用和打出的牌数，且至多不能超过其体力上限或5）。"},"gaoyuan":{"name":"告援","script":"{audio: \"2\",trigger: {target: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(player.countCards('he')==0) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=event.player&&current!=player&&\n\t\t\t\t\t\tcurrent.hasSkill('zhengjian_mark')&&lib.filter.targetEnabled(event.card,event.player,current);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\tvar trigger=_status.event;\n\t\t\t\t\t\t\tif(target!=player&&target!=trigger.source){\n\t\t\t\t\t\t\t\tif(target.hasSkill('zhengjian_mark')&&lib.filter.targetEnabled(trigger.card,trigger.source,target)) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tif(_status.event.player.countCards('h','shan')){\n\t\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.attitude(_status.event.player,target)<5){\n\t\t\t\t\t\t\t\treturn 6-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==1&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\t\treturn 10-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==2&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\t\treturn 8-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('gaoyuan'),\n\t\t\t\t\t\tprompt2:'弃置一张牌，将此【杀】转移给一名有“诤”的角色',\n\t\t\t\t\t\tsource:trigger.player,\n\t\t\t\t\t\tcard:trigger.card,\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill(event.name,target);\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tvar evt=trigger.getParent();\n\t\t\t\t\t\tevt.triggeredTargets2.remove(player);\n\t\t\t\t\t\tevt.targets.remove(player);\n\t\t\t\t\t\tevt.targets.push(target);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你成为【杀】的目标时，你可弃置一张牌将此【杀】转移给一名有“诤”且不是此【杀】使用者的其他角色。"},"weifeng":{"name":"威风","script":"{audio: \"2\",trigger: {player: \"useCardAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!event.targets||!event.targets.filter(function(target){\n\t\t\t\t\t\treturn target!=player&&!target.storage.weifeng2;\n\t\t\t\t\t}).length) return false;\n\t\t\t\t\tvar evt=event.getParent('phaseUse');\n\t\t\t\t\tif(!evt||evt.player!=player) return false;\n\t\t\t\t\tif(!get.tag(event.card,'damage')) return false;\n\t\t\t\t\tif(!['basic','trick'].contains(get.type(event.card))) return false;\n\t\t\t\t\treturn player.getHistory('useCard',function(ev){\n\t\t\t\t\t\treturn ev.getParent('phaseUse')==evt&&get.tag(ev.card,'damage')&&['basic','trick'].contains(get.type(ev.card));\n\t\t\t\t\t}).indexOf(event)==0&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&!current.storage.weifeng2&&event.targets.contains(current);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(true,'威风：请选择一个目标，令其获得一个【惧('+get.translation(trigger.card.name)+')】标记',function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&!target.storage.weifeng2&&_status.event.getTrigger().targets.contains(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\ttarget.storage.weifeng2=trigger.card.name;\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tgame.log(target,'获得了一个','#g【惧('+get.translation(trigger.card.name)+')】','标记')\n\t\t\t\t\t\ttarget.markSkill('weifeng2');\n\t\t\t\t\t\tplayer.addSkill('weifeng3');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，当你于出牌阶段内使用第一张伤害性基本牌或普通锦囊牌后，你令此牌的一名没有“惧”的其他目标角色获得一枚名称为此牌牌名的“惧”。有“惧”的角色受到伤害时，其移去“惧”，然后若造成伤害的牌名称和“惧”：相同，此伤害+1；不同，你获得该角色的一张牌。准备阶段开始时或你死亡时，你移去场上的所有“惧”。"},"xinzhilve":{"name":"知略","script":"{enable: \"phaseUse\",audio: \"zhilve\",usable: \"1\",chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[\n\t\t\t\t\t\t\t'移动场上的一张牌',\n\t\t\t\t\t\t\t'摸一张牌并视为使用一张【杀】',\n\t\t\t\t\t\t];\n\t\t\t\t\t\tvar choiceList=ui.create.dialog('知略：失去1点体力并...','forcebutton','hidden');\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar str='<div class=\"popup text\" style=\"width:calc(100% - 10px);display:inline-block\">';\n\t\t\t\t\t\t\tvar bool=lib.skill.xinzhilve.chooseButton.filter({link:i},player);\n\t\t\t\t\t\t\tif(!bool) str+='<div style=\"opacity:0.5\">';\n\t\t\t\t\t\t\tstr+=list[i];\n\t\t\t\t\t\t\tif(!bool) str+='</div>';\n\t\t\t\t\t\t\tstr+='</div>';\n\t\t\t\t\t\t\tvar next=choiceList.add(str);\n\t\t\t\t\t\t\tnext.firstChild.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tnext.firstChild.link=i;\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\tnext[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchoiceList.buttons.add(next.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn choiceList;\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tif(button.link==0) return player.canMoveCard();\n\t\t\t\t\t\treturn player.hasUseTarget({name:'sha',isCard:true},false);\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\treturn button.link;\n\t\t\t\t\t},backup: function (links){\n\t\t\t\t\t\treturn lib.skill['xinzhilve_'+['move','use'][links[0]]];\n\t\t\t\t\t},prompt: function (){return '请选择【杀】的目标'},},ai: {order: function (item,player){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp>2&&player.hasValueTarget({name:'sha'})) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以失去1点体力并选择一项：1.移动场上的一张牌；2.视为使用一张无距离限制且不计入次数限制的【杀】并摸一张牌。然后你本回合的手牌上限+1。"},"xinxhzhiyan":{"name":"治严","script":"{audio: \"xhzhiyan\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn (!player.hasSkill('xinxhzhiyan_true')&&player.countCards('h')>player.hp)||(!player.hasSkill('xinxhzhiyan_false')&&player.countCards('h')<player.maxHp)\n\t\t\t\t},filterCard: \"true\",selectCard: function (){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(player.hasSkill('xinxhzhiyan_true')) return 0;\n\t\t\t\t\tvar num=Math.max(0,player.countCards('h')-player.hp);\n\t\t\t\t\tif(ui.selected.cards.length||player.hasSkill('xinxhzhiyan_false')||player.countCards('h')>=player.maxHp) return [num,num];\n\t\t\t\t\treturn [0,num]\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},selectTarget: function (){\n\t\t\t\t\tif(ui.selected.cards.length) return [1,1];\n\t\t\t\t\treturn [0,0];\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar checkx=function(card){\n\t\t\t\t\t\tif(player.getUseValue(card,null,true)<=0&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&get.value(card,current)>0&&get.attitude(player,current)>0;\n\t\t\t\t\t\t})) return 2;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\treturn checkx(card)>0;\n\t\t\t\t\t})<(player.countCards('h')-player.hp)) return 0;\n\t\t\t\t\treturn checkx(card);\n\t\t\t\t},delay: \"false\",discard: \"false\",lose: \"false\",content: function (){\n\t\t\t\t\tvar bool=(cards&&cards.length>0);\n\t\t\t\t\tplayer.addTempSkill('xinxhzhiyan_'+bool,'phaseUseEnd');\n\t\t\t\t\tif(!bool){\n\t\t\t\t\t\tplayer.draw(player.maxHp-player.countCards('h'));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (obj,player){\n\t\t\t\t\t\tif(player.countCards('h')>player.hp) return 10;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},result: {player: function (player,target){\n\t\t\t\t\t\t\tif(!ui.selected.cards.length&&player.countCards('h')<player.maxHp) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},target: \"1\",},},}","info":"出牌阶段每项各限一次，若你的手牌数：大于体力值，则你可以将X张手牌交给一名其他角色（X为你的手牌数与体力值之差）；小于体力上限，则你可以摸X张牌且本阶段内不能再对其他角色使用牌。（X为你的手牌数与体力上限之差）"},"gnjinfan":{"name":"锦帆","script":"{trigger: {player: \"phaseDiscardBegin\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tplayer.getStorage('gnjinfan').filter(function(card){\n\t\t\t\t\t\tlist.add(get.suit(card));\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length>=lib.suit.length) return false;\n\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\treturn _status.connectMode||!list.contains(get.suit(card));\n\t\t\t\t\t})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('h',get.prompt('gnjinfan'),'将任意张手牌当做“铃”置于武将牌上',[1,function(){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tvar list2=[];\n\t\t\t\t\t\tplayer.getStorage('gnjinfan').filter(function(card){\n\t\t\t\t\t\t\tlist.add(get.suit(card));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.getCards('h',function(card){\n\t\t\t\t\t\t\tlist2.add(get.suit(card));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlist2.removeArray(list);\n\t\t\t\t\t\treturn list2.length;\n\t\t\t\t\t}()],function(card,player){\n\t\t\t\t\t\tvar list=player.getStorage('gnjinfan').concat(ui.selected.cards);\n\t\t\t\t\t\treturn list.filter(function(cardx){\n\t\t\t\t\t\t\treturn get.suit(card)==get.suit(cardx);\n\t\t\t\t\t\t}).length==0;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.hasUseTarget(card)&&!player.hasValueTarget(card)) return 0;\n\t\t\t\t\t\tif(['sha','shan','wuxie','caochuan'].contains(card.name)) return 2+Math.random();\n\t\t\t\t\t\treturn 1+Math.random();\n\t\t\t\t\t}).set('complexCard',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('gnjinfan');\n\t\t\t\t\t\tplayer.markAuto('gnjinfan',result.cards);\n\t\t\t\t\t\tplayer.lose(result.cards,'toStorage',ui.special,'visible');\n\t\t\t\t\t\tgame.log(player,'将',result.cards,'放到了武将牌上');\n\t\t\t\t\t}\n\t\t\t\t},group: [\"gnjinfan3\",\"gnjinfan4\",\"gnjinfan6\",\"gnjinfan7\",\"gnjinfan8\"],marktext: \"铃\",intro: {content: \"cards\",},}","info":"弃牌阶段开始时，你可将任意张手牌置于武将牌上，称为“铃”（每种花色的“铃”限一张）。当你需要使用或打出一张手牌时，你可以使用或打出一张“铃”。你的回合外，当有“铃”移动到处理区后，你从牌堆中获得与“铃”花色相同的一张牌。回合开始时，你获得所有“铃”。"},"gnsheque":{"name":"射却","script":"{audio: \"2\",trigger: {global: \"phaseZhunbeiBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player.isAlive()&&event.player.countCards('e')>0&&\n\t\t\t\t\tlib.filter.targetEnabled({name:'sha'},player,event.player)&&(player.hasSha()||_status.connectMode&&player.countCards('h')>0);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.chooseToUse(function(card,player,event){\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t},'射却：是否对'+get.translation(trigger.player)+'使用一张杀？').set('logSkill','gnsheque').set('complexSelect',true).set('filterTarget',function(card,player,target){\n\t\t\t\t\t\tif(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this,arguments);\n\t\t\t\t\t}).set('sourcex',trigger.player).set('oncard',function(card){\n\t\t\t\t\t\tcard.gnsheque_tag=true;\n\t\t\t\t\t});\n\t\t\t\t},ai: {unequip: \"true\",unequip_ai: \"true\",skillTagFilter: function (player,tag,arg){\n \t\t\t\t\tif(tag=='unequip_ai'){\n \t\t\t\t\t\tif(_status.event.getParent().name!='gnsheque') return false;\n \t\t\t\t\t}\n \t\t\t\t\telse if(!arg||!arg.card||!arg.card.gnsheque_tag) return false;\n \t\t\t\t},},}","info":"一名其他角色的准备阶段开始时，若其装备区内有牌，则你可以对其使用一张【杀】（无距离关系的限制且无视防具）。"},"gzyinghun":{"name":"英魂","script":"{audio: \"yinghun\",audioname: [\"re_sunjian\",\"sunce\",\"re_sunben\",\"re_sunce\",\"ol_sunjian\"],trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.getDamagedHp()>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('gzyinghun'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.getDamagedHp()==1&&target.countCards('he')==0){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)>0){\n\t\t\t\t\t\t\treturn 10+get.attitude(_status.event.player,target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.getDamagedHp()==1){\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.num=player.getDamagedHp();\n\t\t\t\t\t\tplayer.logSkill(event.name,result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(event.num==1){\n\t\t\t\t\t\t\tevent.directcontrol=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar str1='摸'+get.cnNumber(event.num,true)+'弃一';\n\t\t\t\t\t\t\tvar str2='摸一弃'+get.cnNumber(event.num,true);\n\t\t\t\t\t\t\tplayer.chooseControl(str1,str2,function(event,player){\n\t\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t\t}).set('choice',get.attitude(player,event.target)>0?str1:str2);\n\t\t\t\t\t\t\tevent.str=str1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.directcontrol||result.control==event.str){\n\t\t\t\t\t\tevent.target.draw(event.num);\n\t\t\t\t\t\tevent.target.chooseToDiscard(true,'he');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.target.draw();\n\t\t\t\t\t\tevent.target.chooseToDiscard(event.num,true,'he');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==target.maxHp) return 0.5;\n\t\t\t\t\t\tif(target.hp==1) return 2;\n\t\t\t\t\t\tif(target.hp==2) return 1.5;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},maixie: \"true\",},}","info":"准备阶段开始时，若你已受伤，你可令一名其他角色执行一项：摸X张牌，然后弃置一张牌；或摸一张牌，然后弃置X张牌（X为你已损失的体力值）"},"repolu":{"name":"破虏","script":"{audio: \"1\",trigger: {source: \"dieAfter\",player: \"die\",},forceDie: \"true\",filter: function (event,player,name){\n\t\t\t\t\treturn name=='die'||player.isAlive();\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!player.storage.repolu) player.storage.repolu=0;\n\t\t\t\t\tevent.num=player.storage.repolu+1;\n\t\t\t\t\tplayer.chooseTarget([1,Infinity],get.prompt('repolu'),'令任意名角色摸'+get.cnNumber(event.num)+'张牌').set('forceDie',true).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.repolu++;\n\t\t\t\t\t\tresult.targets.sortBySeat();\n\t\t\t\t\t\tplayer.logSkill('repolu',result.targets);\n\t\t\t\t\t\tgame.asyncDraw(result.targets,num);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"当你杀死一名角色/死亡时，你可以令任意名角色摸X+1张牌。（X为你此前发动过【破虏】的次数）"},"zhengjing":{"name":"整经","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('zhengjing3');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\t//game.trySkillAudio('zhengjing_guanju',player);\n\t\t\t\t\tif(_status.connectMode) event.time=lib.configOL.choose_timeout;\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tvar names=[];\n\t\t\t\t\twhile(true){\n\t\t\t\t\t\tvar card=get.cardPile(function(carde){\n\t\t\t\t\t\t\treturn carde.name!='du'&&!names.contains(carde.name);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\t\tnames.push(card.name);\n\t\t\t\t\t\t\tif(cards.length==3&&!get.isLuckyStar(player)&&Math.random()<0.33) break;\n\t\t\t\t\t\t\tif(cards.length==4&&!get.isLuckyStar(player)&&Math.random()<0.5) break;\n\t\t\t\t\t\t\tif(cards.length==5) break;\n\t\t\t\t\t\t\tif(cards.length>=6) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse break;\n\t\t\t\t\t};\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tif(!cards.length){event.finish();return;};\n\t\t\t\t\tnames.push('du');\n\t\t\t\t\tvar names2=names.slice(0);\n\t\t\t\t\tfor(var i=0;i<4;i++){\n\t\t\t\t\t\tnames=names.concat(names2);\n\t\t\t\t\t}\n\t\t\t\t\tnames.randomSort();\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.swapPlayerAuto(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\tnames.remove('du');\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\t\tlinks:names.slice(0),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t},5000);\n\t\t\t\t\t};\n\t\t\t\t\tvar createDialog=function(player,id){\n\t\t\t\t\t\tif(_status.connectMode) lib.configOL.choose_timeout='30';\n\t\t\t\t\t\tif(player==game.me) return;\n\t\t\t\t\t\tvar str=get.translation(player)+'正在整理经书...<br>';\n\t\t\t\t\t\tui.create.dialog(str).videoId=id;\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(list){\n\t\t\t\t\t\tvar roundmenu=false;\n\t\t\t\t\t\tif(ui.roundmenu&&ui.roundmenu.display!='none'){\n\t\t\t\t\t\t\troundmenu=true;\n\t\t\t\t\t\t\tui.roundmenu.style.display='none';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tevent.settleed=false;\n\t\t\t\t\t\tevent.finishedx=[];\n\t\t\t\t\t\tevent.map={};\n\t\t\t\t\t\tevent.zhengjing=list;\n\t\t\t\t\t\tevent.zhengjing_nodes=[];\n\t\t\t\t\t\tevent.map=[];\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('forcebutton','hidden');\n\t\t\t\t\t\tevent.dialog.textPrompt=event.dialog.add('<div class=\"text center\">及时点击卡牌，但不要点到毒了！</div>');\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\t\tlinks:event.finishedx.slice(0),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\tif(roundmenu) ui.roundmenu.style.display='';\n\t\t\t\t\t\t};\n\t\t\t\t\t\tevent.dialog.classList.add('fixed');\n\t\t\t\t\t\tevent.dialog.classList.add('scroll1');\n\t\t\t\t\t\tevent.dialog.classList.add('scroll2');\n\t\t\t\t\t\tevent.dialog.classList.add('fullwidth');\n\t\t\t\t\t\tevent.dialog.classList.add('fullheight');\n\t\t\t\t\t\tevent.dialog.classList.add('noupdate');\n\t\t\t\t\t\tevent.dialog.open();\n\t\t\t\t\t\tevent.settle=function(du){\n\t\t\t\t\t\t\tif(event.settleed) return;\n\t\t\t\t\t\t\tevent.settleed=true;\n\t\t\t\t\t\t\tif(du){\n\t\t\t\t\t\t\t\tif(lib.config.background_speak) game.playAudio('skill','zhengjing_boom');\n\t\t\t\t\t\t\t\tevent.dialog.textPrompt.innerHTML='<div class=\"text center\">叫你别点毒你非得点 这下翻车了吧</div>';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif(lib.config.background_speak) game.playAudio('skill','zhengjing_finish');\n\t\t\t\t\t\t\t\tevent.dialog.textPrompt.innerHTML='<div class=\"text center\">整理经典结束！共整理出'+get.cnNumber(event.finishedx.length)+'份经典</div>';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twhile(event.zhengjing_nodes.length){\n\t\t\t\t\t\t\t\tevent.zhengjing_nodes.shift().delete();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t event.switchToAuto();\n\t\t\t\t\t\t\t},1000);\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar click=function(){\n\t\t\t\t\t\t\tvar name=this.name;\n\t\t\t\t\t\t\tif(name=='du'){\n\t\t\t\t\t\t\t\tevent.zhengjing.length=0;\n\t\t\t\t\t\t\t\tevent.settle(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(lib.config.background_speak) game.playAudio('skill','zhengjing_click');\n\t\t\t\t\t\t\t\tif(!event.map[name]) event.map[name]=0;\n\t\t\t\t\t\t\t\tevent.map[name]++;\n\t\t\t\t\t\t\t\tif(event.map[name]>1) event.finishedx.add(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.zhengjing_nodes.remove(this);\n\t\t\t\t\t\t\tthis.style.transition='all 0.5s';\n\t\t\t\t\t\t\tthis.style.transform='scale(1.2)';\n\t\t\t\t\t\t\tthis.delete();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar addNode=function(){\n\t\t\t\t\t\t\tif(event.zhengjing.length){\n\t\t\t\t\t\t\t\tvar card=ui.create.card(ui.special,'noclick',true);\n\t\t\t\t\t\t\t\tcard.init(['','',event.zhengjing.shift()]);\n\t\t\t\t\t\t\t\tcard.addEventListener(lib.config.touchscreen?'touchend':'click',click);\n\t\t\t\t\t\t\t\tevent.zhengjing_nodes.push(card);\n\t\t\t\t\t\t\t\tcard.style.position='absolute';\n\t\t\t\t\t\t\t\tvar rand1=Math.round(Math.random()*100);\n\t\t\t\t\t\t\t\tvar rand2=Math.round(Math.random()*100);\n\t\t\t\t\t\t\t\tvar rand3=Math.round(Math.random()*40)-20;\n\t\t\t\t\t\t\t\tcard.style.left='calc('+rand1+'% - '+rand1+'px)';\n\t\t\t\t\t\t\t\tcard.style.top='calc('+rand2+'% - '+rand2+'px)';\n\t\t\t\t\t\t\t\tcard.style.transform='scale(0.8) rotate('+rand3+'deg)';\n\t\t\t\t\t\t\t\tcard.style.opacity=0;\n\t\t\t\t\t\t\t\tevent.dialog.appendChild(card);\n\t\t\t\t\t\t\t\tui.refresh(card);\n\t\t\t\t\t\t\t\tcard.style.opacity=1;\n\t\t\t\t\t\t\t\tcard.style.transform='scale(1) rotate('+rand3+'deg)';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(event.zhengjing_nodes.length>(event.zhengjing.length>0?2:0)) event.zhengjing_nodes.shift().delete();\n\t\t\t\t\t\t\tif(event.zhengjing.length||event.zhengjing_nodes.length) setTimeout(function(){\n\t\t\t\t\t\t\t\taddNode();\n\t\t\t\t\t\t\t},800);\n\t\t\t\t\t\t\telse event.settle();\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t\taddNode();\n\t\t\t\t\t};\n\t\t\t\t\t//event.switchToAuto=switchToAuto;\n\t\t\t\t\tgame.broadcastAll(createDialog,player,event.videoId);\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton(names);\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,names);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tswitchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tgame.broadcastAll(function(id,time){\n\t\t\t\t\t\tif(_status.connectMode) lib.configOL.choose_timeout=time;\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t},event.videoId,event.time);\n\t\t\t\t\tvar result=event.result||result;\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t//if(cards.length==1) break;\n\t\t\t\t\t\tif(!result.links.contains(cards[i].name)) cards.splice(i--,1);\n\t\t\t\t\t}\n\t\t\t\t\tif(cards.length) player.showCards(cards,get.translation(player)+'整理出了以下经典');\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.log(player,'并没有整理出经典');\n\t\t\t\t\t\tplayer.popup('杯具');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.chooseTarget(true,'将整理出的经典置于一名角色的武将牌上').set('ai',function(target){\n\t\t\t\t\t\tif(target.hasSkill('xinfu_pdgyingshi')) return 0;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar cards=_status.event.getParent().cards;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(cards.length==1) return -att;\n\t\t\t\t\t\tif(player==target) att/=2;\n\t\t\t\t\t\tif(target.hasSkill('pingkou')) att*=1.4;\n\t\t\t\t\t\tatt*=(1+target.countCards('j')/2);\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'thunder');\n\t\t\t\t\t\ttarget.addSkill('zhengjing2');\n\t\t\t\t\t\ttarget.markAuto('zhengjing2',cards);\n\t\t\t\t\t\tgame.cardsGotoSpecial(cards);\n\t\t\t\t\t\tgame.log(player,'将',cards,'置于了',target,'的武将牌上');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},ai: {order: \"10\",result: {player: \"1\",},threaten: \"3.2\",},}","info":"出牌阶段，你可以整理卡牌。然后，你将整理出的卡牌置于一名角色的武将牌上。该角色的准备阶段获得这些牌，且跳过此回合的判定和摸牌阶段。"},"jimeng":{"name":"急盟","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countGainableCards(player,'he')>0;\n\t\t\t\t\t})\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('jimeng'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countGainableCards(player,'he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.hp>1&&get.attitude(player,target)<2) return 0;\n\t\t\t\t\t\treturn get.effect(target,{name:'shunshou'},player,player);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('jimeng',target);\n\t\t\t\t\t\tplayer.gainPlayerCard(target,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar hs=player.getCards('he');\n\t\t\t\t\tif(player.hp>0&&hs.length){\n\t\t\t\t\t\tif(hs.length<=player.hp) event._result={bool:true,cards:hs};\n\t\t\t\t\t\telse player.chooseCard(player.hp,true,'交给'+get.translation(target)+get.cnNumber(player.hp)+'张牌','he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\ttarget.gain(result.cards,player,'giveAuto');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以获得一名其他角色的一张牌，然后交给该角色X张牌（X为你当前体力值）。"},"shuaiyan":{"name":"率言","script":"{audio: \"2\",trigger: {player: \"phaseDiscardBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>1;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('he')&&lib.skill.shuaiyan.check2(current,player);\n\t\t\t\t\t});\n\t\t\t\t},check2: function (target,player){\n\t\t\t\t\tif(get.itemtype(player)!='player') player=_status.event.player;\n\t\t\t\t\treturn -get.attitude(player,target)/target.countCards('he');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showHandcards(get.translation(player)+'发动了【率言】');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar filter=function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t\t};\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn filter('我约等于白板',player,current);\n\t\t\t\t\t})){\n\t\t\t\t\t\tplayer.chooseTarget(true,filter,'选择一名其他角色，令其交给你一张牌').set('ai',lib.skill.shuaiyan.check2);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\tevent.target=target;\n\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\ttarget.chooseCard('he',true,'交给'+get.translation(player)+'一张牌');\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.gain(result.cards,target,'giveAuto')\n\t\t\t\t},}","info":"弃牌阶段开始时，若你的手牌数大于1，则你可以展示所有手牌，然后你令一名其他角色交给你一张牌。"},"relihuo":{"name":"疠火","script":"{audio: \"2\",group: [\"relihuo_baigei\",\"relihuo_damage\"],trigger: {player: \"useCard1\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.card.nature='fire';\n\t\t\t\t\ttrigger.relihuo=true;\n\t\t\t\t},}","info":"当你使用普【杀】时，你可以将此杀改为火属性。若如此做，当你因执行此【杀】的效果而对横置角色造成伤害时，此伤害+1；当你使用的火【杀】结算完成后，你失去X点体力（X为你因此【杀】造成的伤害总点数的一半且向下取整）"},"chunlao":{"name":"醇醪","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",audioname: [\"xin_chengpu\"],filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&(_status.connectMode||player.countCards('h','sha')>0)&&!player.storage.chunlao.length;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.chunlao) player.storage.chunlao=[];\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard([1,Math.max(1,player.countCards('h','sha'))],get.prompt('chunlao'),{name:'sha'}).set('ai',function(){\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('chunlao');\n\t\t\t\t\t\tplayer.storage.chunlao=player.storage.chunlao.concat(result.cards);\n\t\t\t\t\t\tplayer.syncStorage('chunlao');\n\t\t\t\t\t\tplayer.markSkill('chunlao');\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.$give(result.cards,player,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(card.name=='sha'&&!player.needsToDiscard()&&\n\t\t\t\t\t\t\t\t!player.storage.chunlao.length&&target.hp>1){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"1.4\",},group: \"chunlao2\",}","info":"结束阶段开始时，若你没有“醇”，你可以将至少一张【杀】置于你的武将牌上，称为“醇”。当一名角色处于濒死状态时，你可以移去一张“醇”，视为该角色使用一张【酒】"},"duoduan":{"name":"度断","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&player.countCards('he')>0&&!player.hasSkill('duoduan_im');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('he',get.prompt2('duoduan')).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.goon) return 8-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('goon',function(){\n\t\t\t\t\t\tif(get.attitude(trigger.player,player)>0) return true;\n\t\t\t\t\t\tif(!trigger.player.countCards('he')) return true;\n\t\t\t\t\t\tif(!player.hasShan()) return true;\n\t\t\t\t\t\treturn event.getRand()<0.5;\n\t\t\t\t\t}());\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('duoduan_im');\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tplayer.logSkill('duoduan',trigger.player);\n\t\t\t\t\t\tplayer.lose(card,ui.discardPile,'visible');\n\t\t\t\t\t\tplayer.$throw(card,1000);\n\t\t\t\t\t\tgame.log(player,'将',card,'置入弃牌堆');\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar sha=get.translation(trigger.card);\n\t\t\t\t\tif(!trigger.player.countCards('he',function(card){\n\t\t\t\t\t\treturn lib.filter.cardDiscardable(card,trigger.player,'duoduan');\n\t\t\t\t\t})) event.finish();\n\t\t\t\t\telse player.chooseControl().set('choiceList',[\n\t\t\t\t\t\t'令其摸两张牌，然后令'+sha+'对你无效',\n\t\t\t\t\t\t'令其弃置一张牌，然后你不可响应'+sha,\n\t\t\t\t\t]).set('prompt','度断：令'+get.translation(trigger.player)+'执行一项').set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar source=_status.event.getTrigger().player;\n\t\t\t\t\t\tif(get.attitude(player,source)>0) return 0;\n\t\t\t\t\t\tif(!player.hasShan()&&player.hp>=2) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.index==0) event.goto(5);\n\t\t\t\t\telse trigger.player.chooseToDiscard('弃置一张牌令'+get.translation(player)+'不能闪避此【杀】','he',true);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.directHit.add(player);\n\t\t\t\t\t}\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t'step 5'\n\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t\ttrigger.excluded.add(player);\n\t\t\t\t},}","info":"每回合限一次，当你成为【杀】的目标后，你可以重铸一张牌。若如此做，你选择一项：①令使用者摸两张牌，且此【杀】无效。②令使用弃置一张牌，且你不能响应此【杀】。"},"gongsun":{"name":"共损","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt2('gongsun'),\n\t\t\t\t\t\tselectCard:2,\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tfilterTarget:lib.filter.notMe,\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tvar friend=0,enemy=0,player=_status.event.player;\n\t\t\t\t\t\t\tvar num=game.countPlayer(function(target){\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\t\tif(att<0) enemy++;\n\t\t\t\t\t\t\t\tif(target!=player&&att>0) friend++;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(num>(friend+enemy+2)) return 0;\n\t\t\t\t\t\t\tif(friend<enemy) return 0;\n\t\t\t\t\t\t\tif(card.name=='sha') return 10-enemy;\n\t\t\t\t\t\t\treturn 10-enemy-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)*(1+target.countCards('h'));\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('gongsun',target);\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tplayer.addTempSkill('gongsun_shadow',{player:['phaseBegin','die']});\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseButton(['请选择一个牌名',[list,'vcard'],true]).set('ai',function(button){\n\t\t\t\t\t\t\treturn button.link[2]=='sha'?1:0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.storage.gongsun_shadow.push([target,result.links[0][2]]);\n\t\t\t\t\tplayer.popup(result.links[0][2],'soil');\n\t\t\t\t\tgame.log(player,'选择了',''+get.translation(result.links[0][2]));\n\t\t\t\t\tplayer.markSkill('gongsun_shadow');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以弃置两张牌并指定一名其他角色。你选择一个基本牌或普通锦囊牌的牌名。直到你的下回合开始或你死亡，你与其不能使用或打出或弃置此名称的牌。"},"chengzhao":{"name":"承诏","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getHistory('gain',function(evt){\n\t\t\t\t\t\tnum+=evt.cards.length;\n\t\t\t\t\t});\n\t\t\t\t\tif(num<2) return false;\n\t\t\t\t\treturn player.countCards('h')>0&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player!=current&&player.canCompare(current);\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('chengzhao'),function(card,player,target){\n\t\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)/target.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('chengzhao',target);\n\t\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card={name:'sha',isCard:true};\n\t\t\t\t\t\tif(player.canUse(card,target,false)) player.useCard(card,target,false).card.chengzhao=true;\n\t\t\t\t\t}\n\t\t\t\t},ai: {unequip: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!arg||!arg.card||arg.card.chengzhao!=true) return false;\n\t\t\t\t\t},},}","info":"一名角色的结束阶段，若你于本回合内获得了两张以上的牌，则你可以与一名其他角色拼点。若你赢，你视为对其使用一张无视防具的【杀】。"},"xinlianhuan":{"name":"连环","script":"{audio: \"2\",audioname: [\"ol_pangtong\"],group: [\"lianhuan3\",\"lianhuan5\",\"lianhuan4\"],}","info":" 你可以将一张♣手牌当【铁索连环】使用或重铸。你使用【铁索连环】选择目标的上限数+1。"},"niepan":{"name":"涅槃","script":"{audio: \"2\",audioname: [\"re_pangtong\"],unique: \"true\",enable: \"chooseToUse\",mark: \"true\",limited: \"true\",skillAnimation: \"true\",animationStr: \"涅盘\",animationColor: \"fire\",init: function (player){\n\t\t\t\t\tplayer.storage.niepan=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.niepan) return false;\n\t\t\t\t\tif(event.type=='dying'){\n\t\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.parent.name=='phaseUse'){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('niepan');\n\t\t\t\t\tplayer.storage.niepan=true;\n\t\t\t\t\tplayer.discard(player.getCards('hej'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.link(false);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.turnOver(false);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(player.hp<3){\n\t\t\t\t\t\tplayer.recover(3-player.hp);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"0.5\",skillTagFilter: function (player,tag,target){\n\t\t\t\t\t\tif(player!=target||player.storage.niepan) return false;\n\t\t\t\t\t},save: \"true\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<=0) return 10;\n\t\t\t\t\t\t\tif(player.hp<=1&&player.countCards('he')<=1) return 10;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.storage.niepan) return 0.6;\n\t\t\t\t\t},},intro: {content: \"limited\",},}","info":"限定技，出牌阶段或当你处于濒死状态时，你可以弃置你区域内的所有牌并复原你的武将牌，然后摸三张牌并将体力回复至3点。"},"rezhengrong":{"name":"征荣","script":"{trigger: {player: \"useCardAfter\",},direct: \"true\",audio: \"drlt_zhenrong\",filter: function (event,player){\n\t\t\t\t\tif(!event.targets) return false;\n\t\t\t\t\tif(!event.isPhaseUsing(player)) return false;\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\n\t\t\t\t\t\tif(event.targets[i]!=player){bool=true;break}\n\t\t\t\t\t}\n\t\t\t\t\tif(!bool) return false;\n\t\t\t\t\treturn player.getAllHistory('useCard',function(evt){\n\t\t\t\t\t\tif(!evt.isPhaseUsing(player)) return false;\n\t\t\t\t\t\tfor(var i=0;i<evt.targets.length;i++){\n\t\t\t\t\t\t\tif(evt.targets[i]!=player) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}).indexOf(event)%2==1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('rezhengrong'),'将一名其他角色的随机一张牌置于你的武将牌上，成为「荣」',function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn (1-get.attitude(_status.event.player,target))/target.countCards('he');\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('rezhengrong',target);\n\t\t\t\t\t\tvar card=target.getCards('he').randomGet();\n\t\t\t\t\t\tgame.log(player,'选择了',card);\n\t\t\t\t\t\ttarget.$give(card,player,false);\n\t\t\t\t\t\ttarget.lose(card,ui.special,'toStorage');\n\t\t\t\t\t\tif(!player.storage.rezhengrong) player.storage.rezhengrong=[];\n\t\t\t\t\t\tplayer.storage.rezhengrong.push(card);\n\t\t\t\t\t\tplayer.markSkill('rezhengrong');\n\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t}\n\t\t\t\t},marktext: \"荣\",intro: {content: \"cards\",onunmark: \"throw\",},}","info":"当你于出牌阶段使用的指定了其他角色为目标的牌结算完成后，若此牌是你本局游戏内于出牌阶段使用的指定了其他角色为目标的第偶数张牌，则你可以将一名其他角色角色的随机一张牌置于你的武将牌上，称为「荣」。"},"rehongju":{"name":"鸿举","script":"{trigger: {player: \"phaseZhunbeiBegin\",},audio: \"drlt_hongju\",forced: \"true\",unique: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",derivation: \"reqingce\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.rezhengrong&&player.storage.rezhengrong.length>=3&&game.dead.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('rehongju');\n\t\t\t\t\tplayer.draw(player.storage.rezhengrong.length);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.countCards('h')==0) event.goto(3);\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar dialog=['请选择要交换的手牌和「荣」，或点「取消」','<div class=\"text center\">「征荣」牌</div>',player.storage.rezhengrong,'<div class=\"text center\">手牌区</div>',player.getCards('h')];\n\t\t\t\t\t\tvar next=player.chooseButton(dialog);\n\t\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\t\tvar ss=_status.event.player.storage.rezhengrong;\n\t\t\t\t\t\t\tvar hs=_status.event.player.getCards('h');\n\t\t\t\t\t\t\tvar sn=0;\n\t\t\t\t\t\t\tvar hn=0;\n\t\t\t\t\t\t\tvar ub=ui.selected.buttons;\n\t\t\t\t\t\t\tfor(var i=0;i<ub.length;i++){\n\t\t\t\t\t\t\t\tif(ss.contains(ub[i].link)) sn++;\n\t\t\t\t\t\t\t\telse hn++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn !(sn>=hs.length&&ss.contains(button.link)||hn>=ss.length&&hs.contains(button.link));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('selectButton',function(){\n\t\t\t\t\t\t\tif(ui.selected.buttons.length==0) return 2;\n\t\t\t\t\t\t\tvar ss=_status.event.player.storage.rezhengrong;\n\t\t\t\t\t\t\tvar hs=_status.event.player.getCards('h');\n\t\t\t\t\t\t\tvar sn=0;\n\t\t\t\t\t\t\tvar hn=0;\n\t\t\t\t\t\t\tvar ub=ui.selected.buttons;\n\t\t\t\t\t\t\tfor(var i=0;i<ub.length;i++){\n\t\t\t\t\t\t\t\tif(ss.contains(ub[i].link)) sn++;\n\t\t\t\t\t\t\t\telse hn++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(sn!=hn) return 2*Math.max(sn,hn);\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(sn==ss.length||hn==hs.length||sn==hs.length||hn==ss.length) return ub.length;\n\t\t\t\t\t\t\t\treturn [ub.length,ub.length+1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('ai',function(){return -1});\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar gains=[];\n\t\t\t\t\t\tvar pushs=[];\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tvar card=result.links[i];\n\t\t\t\t\t\t\tif(player.storage.rezhengrong.contains(card)) gains.push(card);\n\t\t\t\t\t\t\telse pushs.push(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.lose(pushs,ui.special,'toStorage');\n\t\t\t\t\t\tgame.log(player,'将',pushs,'放在了武将牌上');\n\t\t\t\t\t\tplayer.gain(gains,'gain2','log','fromStorage');\n\t\t\t\t\t\tplayer.storage.rezhengrong.addArray(pushs);\n\t\t\t\t\t\tplayer.storage.rezhengrong.removeArray(gains);\n\t\t\t\t\t\tplayer.markSkill('rezhengrong');\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.addSkill('reqingce');\n\t\t\t\t\tgame.log(player,'获得了技能','#g【清侧】');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你武将牌上「荣」的数量不小于3且有角色死亡，则你摸等同于「荣」数量的牌。然后可以用任意数量的手牌交换等量的「荣」。你减1点体力上限并获得技能〖清侧〗。"},"zhouxuan":{"name":"周旋","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},filterCard: \"true\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addSkill('zhouxuan2');\n\t\t\t\t\ttarget.addTempSkill('zhouxuan_ai',{player:'phaseUseAfter'});\n\t\t\t\t\tplayer.storage.zhouxuan2={};\n\t\t\t\t\tplayer.storage.zhouxuan2.player=target;\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar basic=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\tvar type=get.type(name,'trick');\n\t\t\t\t\t\tif(type=='basic'){\n\t\t\t\t\t\t\tlist.push(name);\n\t\t\t\t\t\t\tbasic.push(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse list.add(type);\n\t\t\t\t\t}\n\t\t\t\t\tevent.basic=basic;\n\t\t\t\t\tplayer.chooseControl(list).set('prompt','请选择一种基本牌的名称或非基本牌的类别').set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar target=player.storage.zhouxuan2.player;\n\t\t\t\t\t\tvar cards=target.getCards('h',function(card){\n\t\t\t\t\t\t\treturn target.hasUseTarget(card);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar map={};\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tvar type=get.type(cards[i],'trick');\n\t\t\t\t\t\t\tmap[type=='basic'?get.name(cards[i]):type]=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(map.equip) return 'equip';\n\t\t\t\t\t\tif(map.trick) return 'trick';\n\t\t\t\t\t\tif(map.sha) return 'sha';\n\t\t\t\t\t\tif(map.tao) return 'tao';\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.storage.zhouxuan2.card=result.control;\n\t\t\t\t\tif(event.basic.contains(result.control)) player.storage.zhouxuan2.isbasic=true;\n\t\t\t\t\tplayer.markSkill('zhouxuan2');\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0) return Math.max(1,target.hp)*target.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn target.getUseValue(card)>0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌并指定一名角色，然后选择一个基本牌的名称或非基本牌的类型。其使用或打出下一张牌时，若此牌的名称或类型和你选择的相同，则你观看牌堆顶的三张牌，然后将这些牌分配给任意角色。"},"fengji":{"name":"丰积","script":"{audio: \"2\",trigger: {player: \"phaseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn typeof player.storage.fengji=='number'&&player.countCards('h')>=player.storage.fengji;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.addTempSkill('fengji3');\n\t\t\t\t},group: \"fengji2\",intro: {content: \"上回合结束时的手牌数：#\",},}","info":"锁定技，回合结束时，你记录你的手牌数。回合开始时，若你的手牌数不小于你记录的手牌数，则你摸两张牌且本回合手牌上限为体力上限。"},"reqizhou":{"name":"绮胄","script":"{trigger: {player: [\"equipEnd\",\"loseEnd\"],},forced: \"true\",popup: \"false\",derivation: [\"reyingzi\",\"qixi\",\"rexuanfeng\"],filter: function (event,player){\n\t\t\t\t\tif(player.equiping) return false;\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\tsuits.add(get.suit(es[i]));\n\t\t\t\t\t}\n\t\t\t\t\tif(suits.length>3) suits.length=3;\n\t\t\t\t\tif(player.additionalSkills.reqizhou){\n\t\t\t\t\t\treturn player.additionalSkills.reqizhou.length!=suits.length;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn suits.length>0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tlib.skill.reqizhou.init(player,'reqizhou');\n\t\t\t\t},init: function (player,skill){\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\tsuits.add(get.suit(es[i]));\n\t\t\t\t\t}\n\t\t\t\t\tif(suits.length>3) suits.length=3;\n\t\t\t\t\tplayer.removeAdditionalSkill(skill);\n\t\t\t\t\tswitch(suits.length){\n\t\t\t\t\t\tcase 1:player.addAdditionalSkill(skill,['reyingzi']);break;\n\t\t\t\t\t\tcase 2:player.addAdditionalSkill(skill,['reyingzi','qixi']);break;\n\t\t\t\t\t\tcase 3:player.addAdditionalSkill(skill,['reyingzi','qixi','rexuanfeng']);break;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"锁定技，你根据装备区里牌的花色数获得以下技能：1种或以上：〖英姿〗；2种或以上：〖奇袭〗；3种或以上：〖旋风〗。"},"reshanxi":{"name":"闪袭","script":"{audio: \"shanxi\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp>0&&player.countCards('h',function(card){\n\t\t\t\t\t\tif(_status.connectMode) return true;\n\t\t\t\t\t\treturn get.color(card)=='red'&&get.type(card)=='basic';\n\t\t\t\t\t})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\treturn get.color(card)=='red'&&get.type(card)=='basic'&&lib.filter.cardDiscardable.apply(this,arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('reshanxi'),\n\t\t\t\t\t\tprompt2:'弃置一张红色基本牌并选择一名其他角色，将其的至多X张牌置于其武将牌上直到回合结束。（X为你的体力值）',\n\t\t\t\t\t\tai1:function(){return -1},\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('reshanxi',event.target);\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar max=Math.min(player.hp,target.countCards('he'));\n\t\t\t\t\tif(max>0){\n\t\t\t\t\t\tplayer.choosePlayerCard('he',target,true,[1,max]).set('forceAuto',true).set('prompt','将'+get.translation(target)+'的至多'+get.cnNumber(max)+'张牌置于其武将牌上');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\ttarget.addSkill('reshanxi2');\n\t\t\t\t\ttarget.storage.reshanxi2.addArray(result.cards);\n\t\t\t\t\ttarget.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\tgame.log(target,'失去了'+get.cnNumber(result.cards.length)+'张牌');\n\t\t\t\t\ttarget.markSkill('reshanxi2');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以弃置一张红色基本牌并选择一名有牌的其他角色，将其的至多X张牌置于其的武将牌上（X为你的体力值）。回合结束时，该角色获得这些牌。"},"zhaohan":{"name":"昭汉","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.phaseNumber<8;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.phaseNumber<3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player.phaseNumber<5){\n\t\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse player.loseMaxHp();\n\t\t\t\t},}","info":"锁定技，你的第1-4个准备阶段开始时，你加1点体力上限并回复1点体力，你的第5-7个准备阶段开始时，你减1点体力上限。"},"rangjie":{"name":"让节","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tvar choiceList=['获得一张指定类型的牌'];\n\t\t\t\t\tif(player.canMoveCard()) choiceList.push('移动场上的一张牌');\n\t\t\t\t\tplayer.chooseControl('cancel2').set('choiceList',choiceList).set('prompt',get.prompt('rangjie')).set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.canMoveCard(true)) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control=='cancel2') event.finish();\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.logSkill('rangjie');\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\t\tplayer.chooseControl('basic','trick','equip').set('prompt','选择获得一种类型的牌').set('ai',function(){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(player.hp<=3&&!player.countCards('h',{name:['shan','tao']})) return 'basic';\n\t\t\t\t\t\t\t\tif(player.countCards('he',{type:'equip'})<2) return 'equip';\n\t\t\t\t\t\t\t\treturn 'trick';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.moveCard(true);\n\t\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\treturn get.type(card,'trick')==result.control;\n\t\t\t\t\t});\n\t\t\t\t\tif(card) player.gain(card,'gain2','log');\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(event.count>0) event.goto(1);\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\tif(player.needsToDiscard()){\n\t\t\t\t\t\t\t\t\t\tnum=0.7;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tnum=0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,num*2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,num*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,num*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到1点伤害后，你可以选择一项并摸一张牌：获得牌堆里你选择的类型的一张牌，或移动场上的一张牌。"},"yizheng":{"name":"义争","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp<=player.hp&&player.canCompare(current);\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,current){\n\t\t\t\t\treturn current.hp<=player.hp&&player.canCompare(current);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.skip('phaseDraw');\n\t\t\t\t\t\ttarget.addTempSkill('yizheng2',{player:'phaseDrawSkipped'});\n\t\t\t\t\t}\n\t\t\t\t\telse player.loseMaxHp();\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.skipList.contains('phaseDraw')||target.hasSkill('pingkou')) return 0;\n\t\t\t\t\t\t\tvar hs=player.getCards('h').sort(function(a,b){\n\t\t\t\t\t\t\t\treturn b.number-a.number;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar ts=target.getCards('h').sort(function(a,b){\n\t\t\t\t\t\t\t\treturn b.number-a.number;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(!hs.length||!ts.length) return 0;\n\t\t\t\t\t\t\tif(hs[0].number>ts[0].number) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以和一名体力值不大于你的其他角色拼点。若你赢，其跳过下个摸牌阶段。若你没赢，你减1点体力上限。"},"bazhen":{"name":"八阵","script":"{audio: \"2\",audioname: [\"re_sp_zhugeliang\",\"ol_sp_zhugeliang\",\"ol_pangtong\"],group: \"bazhen_bagua\",locked: \"true\",}","info":"锁定技，若你的防具栏内没有牌且没有被废除，则你视为装备着【八卦阵】。"},"rehuoji":{"name":"火计","script":"{position: \"he\",audio: \"2\",audioname: [\"ol_sp_zhugeliang\",\"ol_pangtong\"],enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},viewAs: {name: \"huogong\",nature: \"fire\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t},prompt: \"将一张红色牌当火攻使用\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('h')>player.hp){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 4-get.value(card)\n\t\t\t\t},ai: {fireAttack: \"true\",basic: {order: \"4\",value: [3,1],useful: \"1\",},wuxie: function (target,card,player,current,state){\n\t\t\t\t\t\tif(get.attitude(current,player)>=0&&state>0) return false;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\t\tif(nh<=player.hp&&nh<=4&&_status.event.name=='chooseToUse'){\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'huogong'},player,_status.event)){\n\t\t\t\t\t\t\t\t\treturn -10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(_status.event.skill){\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\n\t\t\t\t\t\t\t\t\tif(viewAs=='huogong') return -10;\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='huogong') return -10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkill('huogong2')||target.countCards('h')==0) return 0;\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\n\t\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'huogong'},player,_status.event)){\n\t\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(_status.event.skill){\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\n\t\t\t\t\t\t\t\t\tif(viewAs=='huogong') return -1.5;\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='huogong') return -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {damage: \"1\",fireDamage: \"1\",natureDamage: \"1\",norepeat: \"1\",},},}","info":"出牌阶段，你可一张红色牌当作【火攻】使用。"},"rekanpo":{"name":"看破","script":"{audio: \"2\",audioname: [\"ol_sp_zhugeliang\",\"ol_pangtong\"],position: \"he\",enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},viewAs: {name: \"wuxie\",},prompt: \"将一张黑色牌当无懈可击使用\",check: function (card){return 8-get.value(card)},ai: {basic: {useful: [6,4],value: [6,4],},result: {player: \"1\",},expose: \"0.2\",},}","info":"你可以将一张黑色牌当作【无懈可击】使用。"},"reganglie":{"name":"刚烈","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn (event.source!=undefined&&event.num>0);\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn (get.attitude(player,event.source)<=0);\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.num=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tif(get.color(card)=='red') return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.color=='black'){\n\t\t\t\t\t\tif(trigger.source.countCards('he')){\n\t\t\t\t\t\t\tplayer.discardPlayerCard(trigger.source,'he',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.source.isIn()){\n\t\t\t\t\t\ttrigger.source.damage();\n\t\t\t\t\t}\n\t\t\t\t\tevent.num--;\n\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('reganglie'));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('reganglie',trigger.source);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",expose: \"0.4\",},}","info":"每当你受到1点伤害后，可进行一次判定，若结果为红色，你对伤害来源造成1点伤害，若结果为黑色，你弃置其一张牌。"},"xinqingjian":{"name":"清俭","script":"{audio: \"qingjian\",trigger: {player: \"gainEnd\",},direct: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn event.getParent('phaseDraw').player!=player&&player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard(get.prompt2('xinqingjian'),'he',[1,player.countCards('he')]).ai=function(){return -1};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xinqingjian');\n\t\t\t\t\t\tplayer.addSkill('xinqingjian2');\n\t\t\t\t\t\tplayer.storage.xinqingjian2.addArray(result.cards);\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(player.lose(result.cards,ui.special,'toStorage').cards.length)+'张牌置于其武将牌上');\n\t\t\t\t\t\tplayer.markSkill('xinqingjian2');\n\t\t\t\t\t}\n\t\t\t\t\telse player.storage.counttrigger.xinqingjian--;\n\t\t\t\t},}","info":"每回合限一次。当你不因摸牌阶段的额定摸牌而获得牌时，你可以将任意张牌扣置于武将牌上。回合结束时，你将这些牌交给一名其他角色。若这些牌的数量大于1，你摸一张牌。"},"rezhiyi":{"name":"执义","script":"{audio: \"zhiyi\",trigger: {global: \"phaseJieshuBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('useCard',function(card){\n\t\t\t\t\t\treturn get.type(card.card)=='basic';\n\t\t\t\t\t}).length>0||player.getHistory('respond',function(card){\n\t\t\t\t\t\treturn get.type(card.card)=='basic';\n\t\t\t\t\t}).length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tplayer.getHistory('useCard',function(evt){\n\t\t\t\t\t\tif(get.type(evt.card)!='basic') return;\n\t\t\t\t\t\tvar name=evt.card.name;\n\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\tvar nature=evt.card.nature;\n\t\t\t\t\t\t\tswitch(nature){\n\t\t\t\t\t\t\t\tcase 'fire':name='huosha';break;\n\t\t\t\t\t\t\t\tcase 'thunder':name='leisha';break;\n\t\t\t\t\t\t\t\tcase 'kami':name='kamisha';break;\n\t\t\t\t\t\t\t\tcase 'ice':name='icesha';break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.add(name);\n\t\t\t\t\t});\n\t\t\t\t\tplayer.getHistory('respond',function(evt){\n\t\t\t\t\t\tif(get.type(evt.card)!='basic') return;\n\t\t\t\t\t\tvar name=evt.card.name;\n\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\tvar nature=evt.card.nature;\n\t\t\t\t\t\t\tswitch(nature){\n\t\t\t\t\t\t\t\tcase 'fire':name='huosha';break;\n\t\t\t\t\t\t\t\tcase 'thunder':name='leisha';break;\n\t\t\t\t\t\t\t\tcase 'kami':name='kamisha';break;\n\t\t\t\t\t\t\t\tcase 'ice':name='icesha';break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.add(name);\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseButton(['执义：选择要使用的牌，或点取消摸一张牌',[list.map(function(name){\n\t\t\t\t\t\treturn ['基本','',name];\n\t\t\t\t\t}),'vcard']],function(button){\n\t\t\t\t\t\treturn _status.event.player.getUseValue({name:button.link[2],nature:button.link[3]});\n\t\t\t\t\t},function(button){\n\t\t\t\t\t\treturn _status.event.player.hasUseTarget({name:button.link[2],nature:button.link[3]});\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool) player.draw();\n\t\t\t\t\telse player.chooseUseTarget({name:result.links[0][2],isCard:true,nature:result.links[0][3]});\n\t\t\t\t},}","info":"锁定技，一名角色的结束阶段开始时，若你本回合内使用或打出过基本牌，则你选择一项：1.摸一张牌。2.视为使用一张本回合内使用或打出过的基本牌。"},"zhongzuo":{"name":"忠佐","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('damage').length>0||player.getHistory('sourceDamage').length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('zhongzuo'),'令一名角色摸两张牌。若其已受伤，则你摸一张牌。').set('ai',function(target){\n\t\t\t\t\t\tif(target.hasSkillTag('nogain')&&target!=_status.currentPhase) return target.isDamaged()?0:1;\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.isDamaged()) att=att*1.2;\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhongzuo',target);\n\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t\tif(target.isDamaged()) player.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"一名角色的结束阶段开始时，若你于此回合内造成或受到过伤害，则你可以令一名角色摸两张牌。若该角色已受伤，则你摸一张牌。"},"wanlan":{"name":"挽澜","script":"{audio: \"2\",trigger: {global: \"dying\",},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<4) return false;\n\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,event.player,'unchanged','cardSavable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\tvar savable=get.info(card).savable;\n\t\t\t\t\t\tif(typeof savable=='function') savable=savable(card,player,event.player);\n\t\t\t\t\t\treturn savable;\n\t\t\t\t\t})>=1-event.player.hp) return false;\n\t\t\t\t\tif(event.player==player||event.player==get.zhu(player)) return true;\n\t\t\t\t\tif(_status.currentPhase&&get.damageEffect(_status.currentPhase,player,player)<0) return false;\n\t\t\t\t\treturn !player.hasUnknown();\n\t\t\t\t},limited: \"true\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=0;\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"thunder\",logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('wanlan');\n\t\t\t\t\tvar hs=player.getCards('h')\n\t\t\t\t\tif(hs.length) player.discard(hs);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=1-trigger.player.hp;\n\t\t\t\t\tif(num) trigger.player.recover(num);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(_status.currentPhase&&_status.currentPhase.isAlive()){\n\t\t\t\t\t\tvar next=_status.currentPhase.damage();\n\t\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\t\ttrigger.after.push(next);\n\t\t\t\t\t}\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，当一名角色进入濒死状态时，你可以弃置所有手牌并令其回复体力至1点，然后对当前回合角色造成1点伤害。"},"new_qingxian":{"name":"清弦","script":"{group: [\"qingxian_draw\"],enable: \"phaseUse\",audio: \"qingxian\",usable: \"1\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},complexCard: \"true\",complexSelect: \"true\",selectTarget: function (){\n\t\t\t\t\treturn ui.selected.cards.length;\n\t\t\t\t},filterCard: \"true\",selectCard: function (){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\treturn [1,player.hp];\n\t\t\t\t},check: function (cardx){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar number=game.countPlayer(function(target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\tvar pe=player.countCards('e',function(card){\n\t\t\t\t\t\treturn card!=cardx&&ui.selected.cards.contains(card)==false;\n\t\t\t\t\t});\n\t\t\t\t\t\tvar te=target.countCards('e');\n\t\t\t\t\t\tif(pe>te&&target.isDamaged()&&get.attitude(player,target)>2) return true;\n\t\t\t\t\t\telse if(pe==te&&get.attitude(player,target)>2) return true;\n\t\t\t\t\t\telse if(pe<te&&get.attitude(player,target)<0) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\tif(ui.selected.cards.length<number) return 7-get.value(cardx);\n\t\t\t\t\telse return 0;\n\t\t\t\t},targetprompt: function (target){\n\t\t\t\t\tvar pe=_status.event.player.countCards('e',function(card){\n\t\t\t\t\t\treturn ui.selected.cards.contains(card)==false;\n\t\t\t\t\t});\n\t\t\t\t\tvar te=target.countCards('e');\n\t\t\t\t\tif(pe>te) return \"回复体力\";\n\t\t\t\t\telse if(pe==te) return \"摸一张牌\";\n\t\t\t\t\telse if(pe<te) return \"失去体力\";\n\t\t\t\t},line: \"thunder\",content: function (){\n\t\t\t\t\tvar pe=player.countCards('e');\n\t\t\t\t\tvar te=target.countCards('e');\n\t\t\t\t\tif(pe>te) target.recover();\n\t\t\t\t\telse if(pe==te) target.draw();\n\t\t\t\t\telse if(pe<te) target.loseHp();\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar pe=player.countCards('e',function(card){\n\t\t\t\t\t\t\t\treturn ui.selected.cards.contains(card)==false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar te=target.countCards('e');\n\t\t\t\t\t\t\tif(pe>te&&target.isDamaged()) return 2;\n\t\t\t\t\t\t\telse if(pe==te) return 1;\n\t\t\t\t\t\t\telse if(pe<te) return -2.5;\n\t\t\t\t\t\t\telse return 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置至多X张牌并选择等量的其他角色。这些角色中，装备区内牌数少于你的回复1点体力，等于你的摸一张牌，多于你的失去1点体力。若你以此法指定的角色数等于X，则你摸一张牌。（X为你的体力值）"},"new_juexiang":{"name":"绝响","script":"{audio: \"qingxian_jilie\",trigger: {player: \"die\",},forced: \"true\",forceDie: \"true\",skillAnimation: \"true\",animationColor: \"water\",derivation: [\"new_canyun\"],content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\ttrigger.source.discard(trigger.source.getCards('e'));\n\t\t\t\t\t\ttrigger.source.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseTarget('【绝响】：是否令一名其他角色获得技能〖残韵〗？',function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.countCards('ej',{suit:'club'})) att=att*2;\n\t\t\t\t\t\treturn 10+att;\n\t\t\t\t\t}).set('forceDie',true);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.line(target,'thunder');\n\t\t\t\t\t\ttarget.addSkill('new_canyun');\n\t\t\t\t\t\ttarget.discardPlayerCard('是否弃置自己区域内的一张梅花牌，获得技能〖绝响〗？',target,'hej').set('ai',function(card){\n\t\t\t\t\t\t\tif(get.position(card)=='j') return 100+get.value(card);\n\t\t\t\t\t\t\treturn 100-get.value(card);\n\t\t\t\t\t\t}).set('visible',true).set('filterButton',function(card){\n\t\t\t\t\t\t\treturn get.suit(card.link)=='club';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool) target.addSkill('new_juexiang');\n\t\t\t\t},}","info":"锁定技，当你死亡后，杀死你的角色弃置装备区内的所有牌并失去1点体力。然后，你可以令一名其他角色获得技能〖残韵〗。若该角色区域内有梅花牌，则其可以弃置其中的一张，然后其获得技能〖绝响〗。"},"anxu":{"name":"安恤","script":"{enable: \"phaseUse\",usable: \"1\",multitarget: \"true\",audio: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\treturn num<ui.selected.targets[0].countCards('h');\n\t\t\t\t\t}\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(num>players[i].countCards('h')) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},selectTarget: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar gainner,giver;\n\t\t\t\t\tif(targets[0].countCards('h')<targets[1].countCards('h')){\n\t\t\t\t\t\tgainner=targets[0];\n\t\t\t\t\t\tgiver=targets[1];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgainner=targets[1];\n\t\t\t\t\t\tgiver=targets[0];\n\t\t\t\t\t}\n\t\t\t\t\tgiver.chooseCard('选择一张手牌交给'+get.translation(gainner),true);\n\t\t\t\t\tevent.gainner=gainner;\n\t\t\t\t\tevent.giver=giver;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\tevent.gainner.gain(card,event.giver,'giveAuto');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.gainner.countCards('h')==event.giver.countCards('h')){\n\t\t\t\t\t\tplayer.chooseDrawRecover(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10.5\",threaten: \"1.6\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\t\tif(att>0) return -1;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar num2=players[i].countCards('h');\n\t\t\t\t\t\t\t\t\tvar att2=get.attitude(player,players[i]);\n\t\t\t\t\t\t\t\t\tif(att2>=0&&num2<num) return -1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},player: \"0.1\",},},}","info":"出牌阶段限一次，你可以选择两名手牌数不同的其他角色，令其中手牌多的角色将一张手牌交给手牌少的角色，然后若这两名角色手牌数相等，你摸一张牌或回复1点体力"},"zhuiyi":{"name":"追忆","script":"{audio: \"2\",audioname: [\"re_bulianshi\"],trigger: {player: \"die\",},direct: \"true\",skillAnimation: \"true\",animationColor: \"wood\",forceDie: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('zhuiyi'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&_status.event.sourcex!=target;\n\t\t\t\t\t}).set('forceDie',true).set('ai',function(target){\n\t\t\t\t\t\tvar num=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}).set('sourcex',trigger.source);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhuiyi',target);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\ttarget.draw(3);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.5\",},}","info":"当你死亡时，你可以令一名其他角色（杀死你的角色除外）摸三张牌，然后其回复1点体力。"},"kuangcai":{"name":"狂才","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn !event.player.isMad();\n\t\t\t\t},content: function (){\n\t\t\t\t\tgame.broadcastAll(function(player){\n\t\t\t\t\t\tplayer.forceCountChoose={phaseUse:5};\n\t\t\t\t\t},player)\n\t\t\t\t\tplayer.addSkill('kuangcai_use');\n\t\t\t\t\tplayer.addSkill('kuangcai_cancel');\n\t\t\t\t\t//ui.auto.hide();\n\t\t\t\t},subSkill: {use: {mod: {cardUsable: function (card){\n\t\t\t\t\t\t\t\tif(get.info(card)&&get.info(card).forceUsable) return;\n\t\t\t\t\t\t\t\treturn Infinity;\n\t\t\t\t\t\t\t},targetInRange: function (){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t},aiOrder: function (player,card,num){\n\t\t\t\t\t\t\t\tvar name=get.name(card);\n\t\t\t\t\t\t\t\tif(name=='tao') return num+7+Math.pow(player.getDamagedHp(),2);\n\t\t\t\t\t\t\t\tif(name=='sha') return num+6;\n\t\t\t\t\t\t\t\tif(get.subtype(card)=='equip2') return num+get.value(card)/3;\n\t\t\t\t\t\t\t},},trigger: {player: \"useCard\",},forced: \"true\",charlotte: \"true\",silent: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.forceCountChoose||!player.forceCountChoose.phaseUse){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tif(player.forceCountChoose.phaseUse==1){\n\t\t\t\t\t\t\t\tvar evt=event.getParent('phaseUse');\n\t\t\t\t\t\t\t\tif(evt) evt.skipped=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse game.broadcastAll(function(player){\n\t\t\t\t\t\t\t\tplayer.forceCountChoose.phaseUse--;\n\t\t\t\t\t\t\t},player);\n\t\t\t\t\t\t},sub: \"true\",},cancel: {trigger: {player: \"phaseUseEnd\",},priority: \"50\",silent: \"true\",charlotte: \"true\",content: function (){\n\t\t\t\t\t\t\tgame.broadcastAll(function(player){\n\t\t\t\t\t\t\t\tdelete player.forceCountChoose;\n\t\t\t\t\t\t\t},player);\n\t\t\t\t\t\t\t//ui.auto.show();\n\t\t\t\t\t\t\tplayer.removeSkill('kuangcai_use');\n\t\t\t\t\t\t\tplayer.removeSkill('kuangcai_cancel');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},ai: {threaten: \"4.5\",},}","info":"出牌阶段开始时，你可以令你此阶段内的主动出牌时间变为5秒。若如此做，你于此阶段内使用牌没距离和次数限制，且每当你于此阶段内使用牌时，你摸一张牌且主动出牌时间-1秒。若主动出牌时间减至0，则你结束出牌阶段。"},"shejian":{"name":"舌剑","script":"{audio: \"2\",trigger: {player: \"phaseDiscardEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.type=='discard'&&evt.getParent('phaseDiscard')==event) cards.addArray(evt.cards2);\n\t\t\t\t\t});\n\t\t\t\t\tif(cards){\n\t\t\t\t\t\tif(cards.length<2) return false;\n\t\t\t\t\t\tvar suits=[];\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tvar suit=get.suit(cards[i]);\n\t\t\t\t\t\t\tif(suits.contains(suit)){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tsuits.push(suit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('shejian'),'弃置一名其他角色的一张牌',function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\treturn target.countDiscardableCards(player,'he')>0;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('shejian',result.targets);\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"弃牌阶段结束时，若你于此阶段弃置的所有牌花色均不相同，则你可以弃置一名其他角色的一张牌。"},"zhaohuo":{"name":"招祸","script":"{audio: \"2\",trigger: {global: \"dying\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&player.maxHp>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=player.maxHp-1;\n\t\t\t\t\tplayer.loseMaxHp(event.num,true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw(event.num);\n\t\t\t\t},}","info":"锁定技，当其他角色进入濒死状态时，你将体力上限调整为1点。若你的体力上限因此减少，则你摸X张牌。（X为你以此法减少的体力上限）"},"yixiang":{"name":"义襄","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.player.hp<=player.hp) return false;\n\t\t\t\t\t//if(event.targets.length>1) return false;\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tvar names=['sha','shan','tao','jiu','du'];\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tnames.remove(hs[i].name);\n\t\t\t\t\t}\n\t\t\t\t\tif(!names.length) return false;\n\t\t\t\t\tfor(var i=0;i<ui.cardPile.childElementCount;i++){\n\t\t\t\t\t\tif(names.contains(ui.cardPile.childNodes[i].name)){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},usable: \"1\",content: function (){\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar names=['sha','shan','tao','jiu','du'];\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tnames.remove(hs[i].name);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<ui.cardPile.childElementCount;i++){\n\t\t\t\t\t\tif(names.contains(ui.cardPile.childNodes[i].name)){\n\t\t\t\t\t\t\tlist.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.gain(list.randomGet(),'draw');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每名角色的回合限一次，当你成为一名角色使用牌的目标后，若该角色的体力值大于你的体力值，你可以随机获得牌堆里的一张你没有的基本牌。"},"yirang":{"name":"揖让","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('he',function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t})){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.maxHp>player.maxHp;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('yirang'),function(card,player,target){\n\t\t\t\t\t\treturn target.maxHp>player.maxHp;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn (get.attitude(_status.event.player,target)-2)*target.maxHp;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=player.getCards('he',function(card){\n\t\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar types=[];\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\ttypes.add(get.type(cards[i],'trick'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('yirang',target);\n\t\t\t\t\t\ttarget.gain(cards,player,'give');\n\t\t\t\t\t\tplayer.gainMaxHp(target.maxHp-player.maxHp,true);\n\t\t\t\t\t\tplayer.recover(types.length);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以将所有非基本牌交给一名体力上限大于你的其他角色，然后调整体力上限至与该角色相同并回复X点体力（X为你以此法交给其的牌的类别数）。"},"fenyin":{"name":"奋音","script":"{locked: \"false\",mod: {aiOrder: function (player,card,num){\n\t\t\t\t\t\tif(typeof card=='object'&&player==_status.currentPhase){\n\t\t\t\t\t\t\tvar evt=player.getLastUsed();\n\t\t\t\t\t\t\tif(evt&&evt.card&&get.color(evt.card)!='none'&&get.color(card)!='none'&&get.color(evt.card)!=get.color(card)){\n\t\t\t\t\t\t\t\treturn num+10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},audio: \"2\",trigger: {player: \"useCard\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tvar evt=player.getLastUsed(1);\n\t\t\t\t\tif(!evt) return false;\n\t\t\t\t\tvar color1=get.color(evt.card);\n\t\t\t\t\tvar color2=get.color(event.card);\n\t\t\t\t\treturn color1&&color2&&color1!='none'&&color2!='none'&&color1!=color2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {threaten: \"3\",},}","info":"你的回合内，当你使用牌时，若此牌与你于此回合内使用的上一张牌的颜色不同，则你可以摸一张牌。"},"dujin":{"name":"独进","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin2\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num+=1+Math.floor(player.countCards('e')/2);\n\t\t\t\t},}","info":"摸牌阶段，你可以多摸X+1张牌。（X为你装备区里牌数的一半且向下取整）"},"yingjian":{"name":"影箭","script":"{trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",audio: \"qingyi\",content: function (){\n\t\t\t\t\tplayer.chooseUseTarget('###是否发动【影箭】？###视为使用一张没有距离限制的【杀】',{name:'sha'},false,'nodistance').logSkill='yingjian';\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\treturn 1.6;\n\t\t\t\t\t},},}","info":"准备阶段开始时，你可以视为使用一张无距离限制的【杀】。"},"shixin":{"name":"释衅","script":"{audio: \"2\",trigger: {player: \"damageBegin4\",},filter: function (event){\n\t\t\t\t\treturn event.nature=='fire';\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {nofire: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'fireDamage')) return 'zerotarget';\n\t\t\t\t\t\t},},},}","info":"锁定技，当你受到火属性伤害时，你防止此伤害。"},"tunchu":{"name":"屯储","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin2\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.numFixed||player.storage.tunchu&&player.storage.tunchu.length) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num+=2;\n\t\t\t\t\tplayer.addTempSkill('tunchu_choose','phaseDrawAfter');\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.tunchu) player.storage.tunchu=[];\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"tunchu_disable\",subSkill: {choose: {trigger: {player: \"phaseDrawEnd\",},forced: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.removeSkill('tunchu_choose');\n\t\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\t\tif(nh){\n\t\t\t\t\t\t\t\tplayer.chooseCard('h',[1,nh],'将任意张手牌置于你的武将牌上').set('ai',function(card){\n\t\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\t\tvar count=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn get.attitude(player,current)>2&&current.hp-current.countCards('h')>1;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif(ui.selected.cards.length>=count) return -get.value(card);\n\t\t\t\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\t\t\tplayer.storage.tunchu.addArray(result.cards);\n\t\t\t\t\t\t\t\tplayer.markSkill('tunchu');\n\t\t\t\t\t\t\t\tplayer.syncStorage('tunchu');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},disable: {mod: {cardEnabled: function (card,player){\n\t\t\t\t\t\t\t\tif(player.storage.tunchu&&player.storage.tunchu.length&&card.name=='sha'){\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},cardUsable: function (card,player){\n\t\t\t\t\t\t\t\tif(player.storage.tunchu&&player.storage.tunchu.length&&card.name=='sha'){\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"摸牌阶段，若你没有「粮」，你可以多摸两张牌。若如此做，摸牌阶段结束时，你可以将任意张手牌置于你的武将上，称为「粮」，只要你的武将牌上有「粮」，你便不能使用【杀】"},"shuliang":{"name":"输粮","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.tunchu&&player.storage.tunchu.length>0&&event.player.countCards('h')<event.player.hp&&event.player.isAlive();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar goon=(get.attitude(player,trigger.player)>0);\n\t\t\t\t\tplayer.chooseCardButton(get.prompt('shuliang',trigger.player),player.storage.tunchu).set('ai',function(){\n\t\t\t\t\t\tif(_status.event.goon) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('goon',goon);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('shuliang',trigger.player);\n\t\t\t\t\t\tplayer.storage.tunchu.remove(result.links[0]);\n\t\t\t\t\t\tplayer.$throw(result.links);\n\t\t\t\t\t\tgame.cardsDiscard(result.links);\n\t\t\t\t\t\tplayer.syncStorage('tunchu');\n\t\t\t\t\t\tif(player.storage.tunchu.length==0){\n\t\t\t\t\t\t\tplayer.unmarkSkill('tunchu');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"一名角色的结束阶段开始时，若其手牌数少于体力值，你可以移去一张「粮」，然后该角色摸两张牌"},"xinzhanyi":{"name":"战意","script":"{audio: \"zhanyi\",enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(player.hp<3) return 0;\n\t\t\t\t\tvar type=get.type(card,'trick');\n\t\t\t\t\tif(type=='trick'){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\telse if(type=='equip'){\n\t\t\t\t\t\tif(player.hasSha()&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn (player.canUse('sha',current)&&\n\t\t\t\t\t\t\t\tget.attitude(player,current)<0&&\n\t\t\t\t\t\t\t\tget.effect(current,{name:'sha'},player,player)>0)\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\tswitch(get.type(cards[0],'trick',cards[0].original=='h'?player:false)){\n\t\t\t\t\t\tcase 'basic':player.addTempSkill('xinzhanyi_basic');break;\n\t\t\t\t\t\tcase 'equip':player.addTempSkill('xinzhanyi_equip');break;\n\t\t\t\t\t\tcase 'trick':player.addTempSkill('xinzhanyi_trick');player.draw(3);break;\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9.1\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张牌并失去1点体力，然后根据你弃置的牌获得以下效果直到回合结束：基本牌，你可以将一张基本牌当作杀、酒或桃使用，且你本回合第一次以此法使用的牌的回复值/伤害值+1；锦囊牌，摸三张牌且你使用的牌不能被【无懈可击】响应；装备牌，你使用【杀】指定目标角色后，其弃置两张牌，然后你获得其中的一张。"},"polu":{"name":"破橹","script":"{audio: \"2\",trigger: {player: [\"phaseZhunbeiBegin\",\"damageEnd\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.getEquip('ly_piliche');\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.name=='phaseZhunbei'){\n\t\t\t\t\t\tplayer.useCard(game.createCard('ly_piliche','diamond',1),player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(trigger.num);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，回合开始时，若你的装备区里没有【霹雳车】，你使用之；当你受到1点伤害后，若你的装备区里没有【霹雳车】，你摸一张牌。"},"choulve":{"name":"筹略","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('he');\n\t\t\t\t\t})\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar str='令一名其他角色交给你一张牌';\n\t\t\t\t\tvar history=player.getAllHistory('damage',function(evt){\n\t\t\t\t\t\treturn evt.card&&evt.card.name&&lib.card[evt.card.name];\n\t\t\t\t\t})\n\t\t\t\t\tif(history.length) event.cardname=history[history.length-1].card.name;\n\t\t\t\t\tif(event.cardname){\n\t\t\t\t\t\tstr+='若其如此做，视为你使用【'+get.translation(event.cardname)+'】';\n\t\t\t\t\t}\n\t\t\t\t\tvar goon=true;\n\t\t\t\t\tif(event.cardname){\n\t\t\t\t\t\tgoon=game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse(event.cardname,current)&&get.effect(current,{name:event.cardname},player,player)>0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseTarget(get.prompt('choulve'),str,function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('he');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(player,target)>=0&&get.attitude(target,player)>=0){\n\t\t\t\t\t\t\treturn Math.sqrt(target.countCards('he'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('goon',goon);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('choulve',target);\n\t\t\t\t\t\ttarget.chooseCard('he','是否交给'+get.translation(player)+'一张牌？',\n\t\t\t\t\t\t\tevent.cardname?('若如此做，视为'+get.translation(player)+\n\t\t\t\t\t\t\t'使用【'+get.translation(event.cardname)+'】'):null).set('ai',function(card){\n\t\t\t\t\t\t\tif(_status.event.goon) return 7-get.value(card);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}).set('goon',get.attitude(target,player)>1);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target.give(result.cards,player);\n\t\t\t\t\t\tif(event.cardname){\n\t\t\t\t\t\t\tplayer.chooseUseTarget(event.cardname,true,false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以令一名其他角色交给你一张牌，若其如此做，视为你使用上一张对你过造成伤害且不为延时锦囊牌的牌。"},"yizan_use":{"name":"翊赞","script":"{intro: {content: \"已发动过#次\",},enable: [\"chooseToUse\",\"chooseToRespond\"],hiddenCard: function (player,name){\n\t\t\t\t\tif(!['sha','shan','tao','jiu'].contains(name)) return false;\n\t\t\t\t\tif(!player.storage.yizan&&player.countCards('he')<2) return false;\n\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t},'h');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(!player.storage.yizan&&player.countCards('he')<2) return false;\n\t\t\t\t\tif(event.filterCard({name:'sha'},player,event)||\n\t\t\t\t\t\tevent.filterCard({name:'shan'},player,event)||\n\t\t\t\t\t\tevent.filterCard({name:'jiu'},player,event)||\n\t\t\t\t\t\tevent.filterCard({name:'tao'},player,event)){\n\t\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t\t},'h');\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tif(event.filterCard({name:'sha'},player,event)){\n\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.filterCard({name:'shan'},player,event)){\n\t\t\t\t\t\t\tlist.push(['基本','','shan']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.filterCard({name:'tao'},player,event)){\n\t\t\t\t\t\t\tlist.push(['基本','','tao']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.filterCard({name:'jiu'},player,event)){\n\t\t\t\t\t\t\tlist.push(['基本','','jiu']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('翊赞',[list,'vcard'],'hidden');\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar card={name:button.link[2],nature:button.link[3]};\n\t\t\t\t\t\tif(_status.event.getParent().type!='phase'||game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tswitch(button.link[2]){\n\t\t\t\t\t\t\t\tcase 'tao':case 'shan':return 5;\n\t\t\t\t\t\t\t\tcase 'jiu':{\n\t\t\t\t\t\t\t\t\tif(player.storage.yizan&&player.countCards('h',{type:'basic'})>2) return 3;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tcase 'sha':\n\t\t\t\t\t\t\t\t\tif(button.link[3]=='fire') return 2.95;\n\t\t\t\t\t\t\t\t\telse if(button.link[3]=='thunder'||button.link[3]=='ice') return 2.92;\n\t\t\t\t\t\t\t\t\telse return 2.9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\taudio:'yizan_respond_shan',\n\t\t\t\t\t\t\tfilterCard:function(card,player,target){\n\t\t\t\t\t\t\t\tif(player.storage.yizan) return get.type(card)=='basic';\n\t\t\t\t\t\t\t\telse if(ui.selected.cards.length){\n\t\t\t\t\t\t\t\t\tif(get.type(ui.selected.cards[0])=='basic') return true;\n\t\t\t\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcomplexCard:true,\n\t\t\t\t\t\t\tselectCard:function(){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(player.storage.yizan) return 1;\n\t\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcheck:function(card,player,target){\n\t\t\t\t\t\t\t\tif(!ui.selected.cards.length&&get.type(card)=='basic') return 6;\n\t\t\t\t\t\t\t\telse return 6-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3]},\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tprecontent:function(){\n\t\t\t\t\t\t\t\tplayer.addMark('yizan_use',1,false);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\tvar str=!player.storage.yizan?'两张牌(其中至少应有一张基本牌)':'一张基本牌';\n\t\t\t\t\t\treturn '将'+str+'当做'+get.translation(links[0][3]||'')+get.translation(links[0][2])+'使用或打出';\n\t\t\t\t\t},},ai: {order: function (){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tif(event.filterCard({name:'jiu'},player,event)&&get.effect(player,{name:'jiu'})>0&&player.storage.yizan&&player.countCards('h',{type:'basic'})>2){\n\t\t\t\t\t\t\treturn 3.3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.1;\n\t\t\t\t\t},skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(tag=='fireAttack') return true;\n\t\t\t\t\t\tif(!player.storage.yizan&&player.countCards('he')<2) return false;\n\t\t\t\t\t\tif(!player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t\t},'he')){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},result: {player: \"1\",},respondSha: \"true\",respondShan: \"true\",fireAttack: \"true\",},}","info":"你可以将两张牌（其中至少一张为基本牌）当做任意基本牌使用或打出。"},"xinfu_longyuan":{"name":"龙渊","script":"{audio: \"2\",forced: \"true\",unique: \"true\",juexingji: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},skillAnimation: \"true\",animationColor: \"orange\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('yizan_use')>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('xinfu_longyuan');\n\t\t\t\t\tplayer.storage.yizan=true;\n\t\t\t\t},derivation: \"yizan_rewrite\",}","info":"觉醒技，准备阶段，若你本局游戏内发动过〖翊赞〗的次数大于等于3，则你修改〖翊赞〗。"},"xinfu_jingxie1":{"name":"精械","script":"{group: [\"xinfu_jingxie2\"],position: \"he\",audio: \"xinfu_jingxie\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tvar he=player.getCards('he');\n\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\tif([\"bagua\",\"baiyin\",\"lanyinjia\",\"renwang\",\"tengjia\",\"zhuge\"].contains(he[i].name)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn [\"bagua\",\"baiyin\",\"lanyinjia\",\"renwang\",\"tengjia\",\"zhuge\"].contains(card.name);\n\t\t\t\t},discard: \"false\",check: function (){\n\t\t\t\t\treturn 1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar card=cards[0];\n\t\t\t\t\tplayer.gain(game.createCard('rewrite_'+card.name,get.suit(card),card.number),'gain2');\n\t\t\t\t},ai: {basic: {order: \"10\",},result: {player: \"1\",},},}","info":"出牌阶段，你可以展示一张未强化过的【诸葛连弩】或标准包/军争包/SP包中的防具牌，然后对其进行强化。当你处于濒死状态时，你可以重铸一张防具牌，然后将体力回复至1点。"},"qiaosi":{"name":"巧思","script":"{audio: \"xinfu_qiaosi\",derivation: \"qiaosi_map\",enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.swapPlayerAuto(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\t\tlinks:['qiaosi_c1','qiaosi_c6'].concat(['qiaosi_c2','qiaosi_c3','qiaosi_c4','qiaosi_c5'].randomGets(1)),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t},5000);\n\t\t\t\t\t};\n\t\t\t\t\tvar createDialog=function(player,id){\n\t\t\t\t\t\tif(player==game.me) return;\n\t\t\t\t\t\tvar str=get.translation(player)+'正在表演...<br>';\n\t\t\t\t\t\tfor(var i=1;i<7;i++){\n\t\t\t\t\t\t\tstr+=get.translation('qiaosi_c'+i);\n\t\t\t\t\t\t\tif(i%3!=0) str+='　　';\n\t\t\t\t\t\t\tif(i==3) str+='<br>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tui.create.dialog(str,'forcebutton').videoId=id;\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(player){\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tplayer=player||event.player;\n\t\t\t\t\t\tevent.status={\n\t\t\t\t\t\t\tqiaosi_c1:0,\n\t\t\t\t\t\t\tqiaosi_c2:0,\n\t\t\t\t\t\t\tqiaosi_c3:0,\n\t\t\t\t\t\t\tqiaosi_c4:0,\n\t\t\t\t\t\t\tqiaosi_c5:0,\n\t\t\t\t\t\t\tqiaosi_c6:0,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.map={\n\t\t\t\t\t\t\tqiaosi_c1:[40,60],\n\t\t\t\t\t\t\tqiaosi_c2:[80,120],\n\t\t\t\t\t\t\tqiaosi_c3:[90,110],\n\t\t\t\t\t\t\tqiaosi_c4:[90,110],\n\t\t\t\t\t\t\tqiaosi_c5:[80,120],\n\t\t\t\t\t\t\tqiaosi_c6:[40,60],\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finishedx=[];\n\t\t\t\t\t\tevent.str='请开始你的表演<br><img src=\"'+lib.assetURL+'image/card/qiaosi_card1.png\" width=\"60\" height=\"60\">qiaosi_c1% <img src=\"'+lib.assetURL+'image/card/qiaosi_card2.png\" width=\"60\" height=\"60\">qiaosi_c2% <img src=\"'+lib.assetURL+'image/card/qiaosi_card3.png\" width=\"60\" height=\"60\">qiaosi_c3%<br><img src=\"'+lib.assetURL+'image/card/qiaosi_card4.png\" width=\"60\" height=\"60\">qiaosi_c4%<img src=\"'+lib.assetURL+'image/card/qiaosi_card5.png\" width=\"60\" height=\"60\">qiaosi_c5% <img src=\"'+lib.assetURL+'image/card/qiaosi_card6.png\" width=\"60\" height=\"60\">qiaosi_c6%';\n\t\t\t\t\t\tevent.dialog=ui.create.dialog(event.str,'forcebutton','hidden');\n\t\t\t\t\t\tevent.dialog.addText('<li>点击下方的按钮，可以增加按钮对应的角色的「表演完成度」。对于不同的角色，点击时增加的完成度不同，最终获得的牌也不同。一次表演最多只能完成3名角色的进度。',false);\n\t\t\t\t\t\tevent.dialog.open();\n\t\t\t\t\t\tfor(var i in event.status){\n\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML=event.dialog.content.childNodes[0].innerHTML.replace(i,event.status[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('pointerdiv');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\t\tlinks:event.finishedx.slice(0),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevent.control=ui.create.control('qiaosi_c1','qiaosi_c2','qiaosi_c3','qiaosi_c4','qiaosi_c5','qiaosi_c6',function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(event.finishedx.contains(link)) return;\n\t\t\t\t\t\t\tevent.status[link]+=get.rand.apply(get,event.map[link]);\n\t\t\t\t\t\t\tif(event.status[link]>=100){\n\t\t\t\t\t\t\t\tevent.status[link]=100;\n\t\t\t\t\t\t\t\tvar str=event.str.slice(0);\n\t\t\t\t\t\t\t\tfor(var i in event.status){\n\t\t\t\t\t\t\t\t\tstr=str.replace(i,event.status[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML=str;\n\t\t\t\t\t\t\t\tevent.finishedx.push(link);\n\t\t\t\t\t\t\t\tif(event.finishedx.length>=3){\n\t\t\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\t\t\t\tlinks:event.finishedx.slice(0),\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tvar str=event.str.slice(0);\n\t\t\t\t\t\t\t\tfor(var i in event.status){\n\t\t\t\t\t\t\t\t\tstr=str.replace(i,event.status[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML=str;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('selectable');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t};\n\t\t\t\t\t//event.switchToAuto=switchToAuto;\n\t\t\t\t\tgame.broadcastAll(createDialog,player,event.videoId);\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,event.player);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tswitchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tvar map=event.result||result;\n\t\t\t\t\t//game.print(map);\n\t\t\t\t\tif(!map||!map.bool||!map.links){\n\t\t\t\t\t\tgame.log(player,'表演失败');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar list=map.links;\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tgame.log(player,'表演失败');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tvar list2=[];\n\t\t\t\t\tif(list.contains('qiaosi_c1')){\n\t\t\t\t\t\tlist2.push('trick');\n\t\t\t\t\t\tlist2.push('trick');\n\t\t\t\t\t}\n\t\t\t\t\tif(list.contains('qiaosi_c2')){\n\t\t\t\t\t\tif(list.contains('qiaosi_c1')) list2.push(['sha','jiu']);\n\t\t\t\t\t\telse list2.push(Math.random()<0.66?'equip':['sha','jiu']);\n\t\t\t\t\t}\n\t\t\t\t\tif(list.contains('qiaosi_c3')){\n\t\t\t\t\t\tlist2.push([Math.random()<0.66?'sha':'jiu'])\n\t\t\t\t\t}\n\t\t\t\t\tif(list.contains('qiaosi_c4')){\n\t\t\t\t\t\tlist2.push([Math.random()<0.66?'shan':'tao'])\n\t\t\t\t\t}\n\t\t\t\t\tif(list.contains('qiaosi_c5')){\n\t\t\t\t\t\tif(list.contains('qiaosi_c6')) list2.push(['shan','tao']);\n\t\t\t\t\t\telse list2.push(Math.random()<0.66?'trick':['shan','tao']);\n\t\t\t\t\t}\n\t\t\t\t\tif(list.contains('qiaosi_c6')){\n\t\t\t\t\t\tlist2.push('equip');\n\t\t\t\t\t\tlist2.push('equip');\n\t\t\t\t\t}\n\t\t\t\t\twhile(list2.length){\n\t\t\t\t\t\tvar filter=list2.shift();\n\t\t\t\t\t\tvar card=get.cardPile(function(x){\n\t\t\t\t\t\t\tif(cards.contains(x)) return false;\n\t\t\t\t\t\t\tif(typeof filter=='string'&&get.type(x,'trick')==filter) return true;\n\t\t\t\t\t\t\tif(typeof filter=='object'&&filter.contains(x.name)) return true;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card) cards.push(card);\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar card=get.cardPile(function(x){\n\t\t\t\t\t\t\t\treturn !cards.contains(x);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card) cards.push(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\t\tevent.num=cards.length;\n\t\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.gain(event.cards,'gain2');\n\t\t\t\t\tplayer.chooseControl().set('choiceList',[\n\t\t\t\t\t\t'将'+get.cnNumber(event.num)+'张牌交给一名其他角色',\n\t\t\t\t\t\t'弃置'+get.cnNumber(event.num)+'张牌',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&get.attitude(player,current)>2;\n\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tselectCard:event.num,\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) att/=10;\n\t\t\t\t\t\t\t\tif(target.hasJudge('lebu')) att/=5;\n\t\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprompt:'选择'+get.cnNumber(event.num)+'张牌，交给一名其他角色。',\n\t\t\t\t\t\t\tforced:true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseToDiscard(event.num,true,'he');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.give(result.cards,target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",result: {player: \"1\",},threaten: \"3.2\",},}","info":"出牌阶段限一次，你可以表演「大键角色图」并根据表演结果获得相应的牌。然后，你选择一项：1.弃置X张牌。2.将X张牌交给一名其他角色。（X为你以此法获得的牌数）"},"xinfu_daigong":{"name":"怠攻","script":"{usable: \"1\",audio: \"2\",trigger: {player: \"damageBegin4\",},filter: function (event,player){\n\t\t\t\t\treturn event.source!=undefined&&player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tsuits.add(get.suit(cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.source.chooseCard('he','交给'+get.translation(player)+'一张满足条件的牌，否则防止此伤害。',function(card){\n\t\t\t\t\t\treturn !_status.event.suits.contains(get.suit(card));\n\t\t\t\t\t}).set('suits',suits).ai=function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar target=_status.event.getParent('xinfu_daigong').player;\n\t\t\t\t\t\tif(get.damageEffect(target,player,player)>0) return 6.5-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.source.give(result.cards,player,true);\n\t\t\t\t\t}\n\t\t\t\t\telse trigger.cancel();\n\t\t\t\t},}","info":"每回合限一次。当你受到伤害时，你可以展示所有手牌，然后令伤害来源选择一项：交给你一张与你所有手牌花色均不相同的一张牌，或防止此伤害。"},"xinfu_zhaoxin":{"name":"昭心","script":"{group: [\"zhaoxin_give\"],intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},enable: \"phaseUse\",usable: \"1\",audio: \"2\",init: function (player,skill){\n\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.storage.xinfu_zhaoxin.length<3&&player.countCards('h')>0;\n\t\t\t\t},visible: \"true\",filterCard: \"true\",selectCard: function (){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\treturn [1,3-player.storage.xinfu_zhaoxin.length];\n\t\t\t\t},discard: \"false\",toStorage: \"true\",delay: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\t//player.lose(cards,ui.special,'toStorage')\n\t\t\t\t\tplayer.$give(cards,player,false);\n\t\t\t\t\tplayer.storage.xinfu_zhaoxin=player.storage.xinfu_zhaoxin.concat(cards);\n\t\t\t\t\tplayer.markSkill('xinfu_zhaoxin');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw(cards.length);\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以将任意张手牌置于武将牌上并摸等量的牌，称之为「望」（你至多拥有三张「望」）。你或你攻击范围内的一名其他角色的摸牌阶段结束后，其可以获得一张由你选择的「望」，然后你可以对其造成1点伤害。"},"xinfu_qianchong":{"name":"谦冲","script":"{audio: \"3\",mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(player.storage.xinfu_qianchong.contains(get.type(card,'trick'))){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(player.storage.xinfu_qianchong.contains(get.type(card,'trick'))) return Infinity;\n\t\t\t\t\t},},group: [\"xinfu_qianchong_clear\",\"qc_weimu\",\"qc_mingzhe\"],subSkill: {clear: {sub: \"true\",forced: \"true\",silent: \"true\",popup: \"false\",trigger: {player: \"phaseAfter\",},content: function (){\n\t\t\t\t\t\t\tplayer.storage.xinfu_qianchong=[];\n\t\t\t\t\t\t},},},init: function (event,player){\n\t\t\t\t\tevent.storage[player]=[];\n\t\t\t\t},trigger: {player: \"phaseUseBegin\",},locked: \"false\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\tif(!es.length) return true;\n\t\t\t\t\tvar col=get.color(es[0]);\n\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\tif(get.color(es[i])!=col) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=['basic','trick','equip','cancel2'];\n\t\t\t\t\tfor(var i=0;i<player.storage.xinfu_qianchong.length;i++){\n\t\t\t\t\t\tlist.remove(player.storage.xinfu_qianchong[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length>1){\n\t\t\t\t\tplayer.chooseControl(list).set('ai',function(){\n\t\t\t\t\t\t\treturn list[0];\n\t\t\t\t\t\t}\n\t\t\t).set('prompt',get.prompt('xinfu_qianchong')).set('prompt2',get.translation('xinfu_qianchong_info'));\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control&&result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('xinfu_qianchong');\n\t\t\t\t\t\tplayer.storage.xinfu_qianchong.add(result.control);\n\t\t\t\t\t\tvar str=get.translation(result.control)+'牌';\n\t\t\t\t\t\tgame.log(player,'声明了','#y'+str);\n\t\t\t\t\t\tplayer.popup(str,'thunder');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，若你的装备区内有牌且：均为红色，则你视为拥有技能〖明哲〗。均为黑色，则你视为拥有技能〖帷幕〗。若均不满足，则出牌阶段开始时，你可以选择一种类别的牌，然后你本回合内使用该类别的牌时没有次数和距离限制。"},"xinfu_shangjian":{"name":"尚俭","script":"{trigger: {global: \"phaseJieshuBegin\",},audio: \"2\",filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.cards2) num+=evt.cards2.length;\n\t\t\t\t\t});\n\t\t\t\t\treturn num>0&&num<=player.hp\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.cards2) num+=evt.cards2.length;\n\t\t\t\t\t});\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"一名角色的结束阶段开始时，若你于此回合内失去了X张或更少的牌，则你可以摸等量的牌。（X为你的体力值）"},"xinfu_pingcai":{"name":"评才","script":"{wolong_card: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar ingame=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn ['sp_zhugeliang','re_sp_zhugeliang','ol_sp_zhugeliang'].contains(current.name)||['sp_zhugeliang','re_sp_zhugeliang','ol_sp_zhugeliang'].contains(current.name2);\n\t\t\t\t\t})?true:false;\n\t\t\t\t\tvar prompt='请选择';\n\t\t\t\t\tprompt+=ingame?'至多两名':'一名';\n\t\t\t\t\tprompt+='角色，对其造成1点火焰伤害';\n\t\t\t\t\tvar range=ingame?[1,2]:[1,1]\n\t\t\t\t\tplayer.chooseTarget(prompt,range).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player,'fire');\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.targets.length){\n\t\t\t\t\t\tplayer.line(result.targets,'fire');\n\t\t\t\t\t\tresult.targets.sortBySeat();\n\t\t\t\t\t\tfor(var i=0;i<result.targets.length;i++){\n\t\t\t\t\t\t\tresult.targets[i].damage('fire');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},fengchu_card: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar ingame=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn ['re_pangtong','pangtong','ol_pangtong'].contains(current.name)||['re_pangtong','pangtong','ol_pangtong'].contains(current.name2);\n\t\t\t\t\t})?true:false;\n\t\t\t\t\tvar prompt='请选择';\n\t\t\t\t\tprompt+=ingame?'至多四名':'至多三名';\n\t\t\t\t\tprompt+='要横置的角色';\n\t\t\t\t\tvar range=ingame?[1,4]:[1,3]\n\t\t\t\t\tplayer.chooseTarget(prompt,range).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,{name:'tiesuo'},player,player)\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.targets.length){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tresult.targets.sortBySeat();\n\t\t\t\t\t\tfor(var i=0;i<result.targets.length;i++){\n\t\t\t\t\t\t\tresult.targets[i].link();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},xuanjian_card: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.ingame=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn ['re_xushu','xin_xushu','xushu'].contains(current.name)||['re_xushu','xin_xushu','xushu'].contains(current.name2);\n\t\t\t\t\t})?true:false;\n\t\t\t\t\tvar prompt='请选择一名角色，令其回复一点体力并摸一张牌';\n\t\t\t\t\tprompt+=event.ingame?'，然后你摸一张牌。':'。';\n\t\t\t\t\tplayer.chooseTarget(prompt).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.attitude(player,target)*(target.isDamaged()?2:1);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.targets.length){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'thunder');\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\tif(event.ingame) player.draw();\n\t\t\t\t\t}\n\t\t\t\t},shuijing_card: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.ingame=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.name=='simahui'||current.name2=='simahui';\n\t\t\t\t\t})?true:false;\n\t\t\t\t\tvar prompt='将一名角色装备区中的';\n\t\t\t\t\tprompt+=event.ingame?'一张牌':'防具牌';\n\t\t\t\t\tprompt+='移动到另一名角色的装备区中';\n\t\t\t\t\tvar next=player.chooseTarget(2,function(card,player,target){\n\t\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\t\tif(!_status.event.ingame){\n\t\t\t\t\t\t\t\treturn target.isEmpty(2)?true:false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar from=ui.selected.targets[0];\n\t\t\t\t\t\t\tif(target.isMin()) return false;\n\t\t\t\t\t\t\tvar es=from.getCards('e');\n\t\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\t\tif(['equip3','equip4'].contains(get.subtype(es[i]))&&target.getEquip('liulongcanjia')) continue;\n\t\t\t\t\t\t\t\t\tif(es[i].name=='liulongcanjia'&&target.countCards('e',{subtype:['equip3','equip4']})>1) continue;\n\t\t\t\t\t\t\t\t\tif(target.isEmpty(get.subtype(es[i]))) return true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(!event.ingame){\n\t\t\t\t\t\t\t\t\tif(target.getEquip(2)) return true;\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn target.countCards('e')>0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('ingame',event.ingame)\n\t\t\t\t\t\tnext.set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,current)>0){\n\t\t\t\t\t\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\t\t\t\t\tif(['equip3','equip4'].contains(get.subtype(es[i]))&&current.getEquip('liulongcanjia')) continue;\n\t\t\t\t\t\t\t\t\t\t\t\telse if(es[i].name=='liulongcanjia'&&target.countCards('e',{subtype:['equip3','equip4']})>1) continue;\n\t\t\t\t\t\t\t\t\t\t\t\telse if(current.isEmpty(get.subtype(es[i]))) return true;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}))\treturn -att;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tvar es=ui.selected.targets[0].getCards('e');\n\t\t\t\t\t\t\t\tvar i;\n\t\t\t\t\t\t\t\tfor(i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\t\tif(['equip3','equip4'].contains(get.subtype(es[i]))&&target.getEquip('liulongcanjia')) continue;\n\t\t\t\t\t\t\t\t\tif(es[i].name=='liulongcanjia'&&target.countCards('e',{subtype:['equip3','equip4']})>1) continue;\n\t\t\t\t\t\t\t\t\tif(target.isEmpty(get.subtype(es[i]))) break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(i==es.length) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -att*get.attitude(player,ui.selected.targets[0]);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('multitarget',true);\n\t\t\t\t\t\tnext.set('targetprompt',['被移走','移动目标']);\n\t\t\t\t\t\tnext.set('prompt',prompt);\n\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tplayer.line2(result.targets,'green');\n\t\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t'step 3'\n\t\t\t\t\t\tif(targets.length==2){\n\t\t\t\t\t\t\tif(!event.ingame){\n\t\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\t\t\tlinks:[targets[0].getEquip(2)],\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.choosePlayerCard('e',true,function(button){\n\t\t\t\t\t\t\t\treturn get.equipValue(button.link);\n\t\t\t\t\t\t\t},targets[0]).set('targets0',targets[0]).set('targets1',targets[1]).set('filterButton',function(button){\n\t\t\t\t\t\t\t\tvar targets1=_status.event.targets1;\n\t\t\t\t\t\t\t\t\tif(['equip3','equip4'].contains(get.subtype(button.link))&&targets1.getEquip('liulongcanjia')) return false;\n\t\t\t\t\t\t\t\t\tif(button.link.name=='liulongcanjia'&&targets1.countCards('e',{subtype:['equip3','equip4']})>1) return false;\n\t\t\t\t\t\t\t\t\treturn !targets1.countCards('e',{subtype:get.subtype(button.link)});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t\t'step 4'\n\t\t\t\t\t\tif(result.bool&&result.links.length){\n\t\t\t\t\t\t\tvar link=result.links[0];\n\t\t\t\t\t\t\tif(get.position(link)=='e')\tevent.targets[1].equip(link);\n\t\t\t\t\t\t\telse if(link.viewAs) event.targets[1].addJudge({name:link.viewAs},[link]);\n\t\t\t\t\t\t\telse event.targets[1].addJudge(link);\n\t\t\t\t\t\t\tevent.targets[0].$give(link,event.targets[1],false)\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t}\n\t\t\t\t},audio: \"true\",enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=[\"wolong\",\"fengchu\",\"xuanjian\",\"shuijing\"];\n\t\t\t\t\tvar list2=[];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tlist2.push(game.createCard(list[i]+'_card','',''))\n\t\t\t\t\t}\n\t\t\t\t\t//list2.randomSort();\n\t\t\t\t\tevent.time=get.utc();\n\t\t\t\t\tplayer.chooseButton(['请选择要擦拭的宝物',list2],true).set('ai',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(button.link.name=='xuanjian_card'){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isDamaged()&&current.hp<3&&get.attitude(player,current)>1;\n\t\t\t\t\t\t\t})) return 1+Math.random();\n\t\t\t\t\t\t\telse return 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(button.link.name=='wolong_card'){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.damageEffect(current,player,player,'fire')>0;\n\t\t\t\t\t\t\t})) return 1.2+Math.random();\n\t\t\t\t\t\t\telse return 0.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse return 0.6;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar delay=8400-(get.utc()-event.time);\n\t\t\t\t\tif(delay>0){\n \t\t\t\t\tevent.delay2=true;\n \t\t\t\t\tevent.dialog=ui.create.dialog(get.translation(player)+'正在擦拭宝物...'+(_status.connectMode?'':'<br>（点击屏幕可跳过等待）'));\n \t\t\t\t\tevent.videoId=lib.status.videoId++;\n \t\t\t\t\tgame.broadcast('createDialog',event.videoId,get.translation(player)+'正在擦拭宝物...');\n \t\t\t\t\tgame.pause();\n \t\t\t\t\tevent.pingcai_delayed=true;\n \t\t\t\t\tsetTimeout(function(){\n \t\t\t\t\t\tif(event.pingcai_delayed==true){\n \t\t\t\t\t\t\tdelete event.pingcai_delayed;\n \t\t\t\t\t\t\tgame.resume();\n \t\t\t\t\t\t}\n \t\t\t\t\t},delay);\n \t\t\t\t\tif(!_status.connectMode){\n \t\t\t\t\t\tevent.forceMine=true;\n \t\t\t\t\t\tevent.custom.replace.window=function(){\n \t\t\t\t\t\t\tif(event.pingcai_delayed==true){\n \t\t\t\t\t\t\t\tdelete event.forceMine;\n \t\t\t\t\t\t\t\tdelete event.pingcai_delayed;\n \t\t\t\t\t\t\t\tgame.resume();\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.delay2){\n \t\t\t\t\tdelete event.custom.replace.window;\n \t\t\t\t\tevent.dialog.close();\n \t\t\t\t\tgame.addVideo('cardDialog',null,event.videoId);\n \t\t\t\t\tgame.broadcast('closeDialog',event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.logSkill('pcaudio_'+event.card.name);\n\t\t\t\t\tplayer.$throw(event.card);\n\t\t\t\t\tevent.insert(lib.skill.xinfu_pingcai[event.card.name],{\n\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t});\n\t\t\t\t},ai: {order: \"7\",fireAttack: \"true\",threaten: \"1.7\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以挑选一个宝物并擦拭掉其上面的灰尘。然后，你可以根据宝物类型执行对应的效果。"},"xinfu_pdgyingshi":{"name":"隐世","script":"{mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\tif(get.type(card)=='delay'){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},trigger: {player: [\"phaseZhunbeiBefore\",\"phaseJieshuBefore\"],},forced: \"true\",audio: \"2\",group: \"xinfu_pdgyingshi2\",priority: \"15\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tgame.log(player,'跳过了',event.triggername=='phaseZhunbeiBefore'?'准备阶段':'结束阶段');\n\t\t\t\t},}","info":"锁定技，你始终跳过准备阶段，判定阶段，结束阶段。你不能被选择为延时锦囊牌的目标。"},"xinyongsi":{"name":"庸肆","script":"{group: [\"xinyongsi1\",\"xinyongsi2\"],}","info":"锁定技，摸牌阶段，你令额定摸牌数改为X（X为势力数）；弃牌阶段开始时，你选择一项：1.弃置一张牌；2.失去1点体力。"},"yjixi":{"name":"觊玺","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.yjixi=0;\n\t\t\t\t},derivation: \"rewangzun\",trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.yjixi>=3;\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"gray\",unique: \"true\",juexingji: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('yjixi');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar str='摸两张牌';\n\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\tvar choice='选项一';\n\t\t\t\t\tif(mode=='identity'||(mode=='versus'&&_status.mode=='four')){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tvar zhu=get.zhu(player);\n\t\t\t\t\t\tif(zhu&&zhu!=player&&zhu.skills){\n\t\t\t\t\t\t\tfor(var i=0;i<zhu.skills.length;i++){\n\t\t\t\t\t\t\t\tif(lib.skill[zhu.skills[i]]&&lib.skill[zhu.skills[i]].zhuSkill){\n\t\t\t\t\t\t\t\t\tlist.push(zhu.skills[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tstr+='并获得技能'+get.translation(list);\n\t\t\t\t\t\t\tevent.list=list;\n\t\t\t\t\t\t\tchoice='选项二';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl(function(event,player){\n\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t}).set('choiceList',['获得技能〖妄尊〗',str]).set('choice',choice);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control=='选项一'){\n\t\t\t\t\t\tplayer.addSkill('rewangzun');\n\t\t\t\t\t\tplayer.popup('rewangzun');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\tif(event.list){\n\t\t\t\t\t\t\tplayer.addSkill(event.list);\n\t\t\t\t\t\t\tplayer.popup(event.list[0]);\n\t\t\t\t\t\t\tplayer.storage.zhuSkill_yjixi=event.list;\n\t\t\t\t\t\t\tgame.broadcastAll(function(list){\n\t\t\t\t\t\t\t\tgame.expandSkills(list);\n\t\t\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\t\t\tvar info=lib.skill[i];\n\t\t\t\t\t\t\t\t\tif(!info) continue;\n\t\t\t\t\t\t\t\t\tif(!info.audioname2) info.audioname2={};\n\t\t\t\t\t\t\t\t\tinfo.audioname2.old_yuanshu='weidi';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},event.list);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},group: [\"yjixi_count1\",\"yjixi_count2\"],subSkill: {count1: {trigger: {player: \"phaseZhunbeiBegin\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.yjixi++;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},count2: {trigger: {player: \"loseHpAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.yjixi=0;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"觉醒技，结束阶段，若你连续三回合没有因〖庸肆〗而失去过体力，则你增加1点体力上限并回复1点体力，然后选择一项：获得技能〖妄尊〗；摸两张牌并获得当前主公的主公技。"},"shouye":{"name":"守邺","script":"{audio: \"2\",group: \"shouye_after\",trigger: {target: \"useCardToTarget\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.targets.length==1;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(event.player==game.me||event.player.isOnline()) return get.attitude(player,event.player)<0;\n\t\t\t\t\treturn get.effect(player,event.card,event.player,player)<0;\n\t\t\t\t},usable: \"1\",logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\tplayer.chooseToDuiben(trigger.player);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.targets.remove(player);\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.remove(player);\n\t\t\t\t\t\ttrigger.getParent().shouyeer=player;\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {after: {sub: \"true\",trigger: {global: \"useCardAfter\",},forced: \"true\",silent: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event.shouyeer!=player) return false;\n\t\t\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\t\t\tif(event.cards[i].isInPile()) return true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\t\t\tif(trigger.cards[i].isInPile()){\n\t\t\t\t\t\t\t\t\tlist.push(trigger.cards[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.gain(list,'gain2','log');\n\t\t\t\t\t\t},},},}","info":"每回合限一次。当其他角色使用牌指定你为唯一目标时，你可以与其进行【对策】。若你赢，则你取消此牌的目标，且你于此牌结算完成后获得其对应的所有实体牌。"},"liezhi":{"name":"烈直","script":"{audio: \"2\",group: \"liezhi_damage\",trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('liezhi_disable');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('liezhi'),'弃置至多两名其他角色区域内的各一张牌',[1,2],function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countDiscardableCards(player,'hej')>0;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,{name:'guohe'},player,player);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets.sortBySeat();\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tplayer.logSkill('liezhi',result.targets);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.current=targets.shift();\n\t\t\t\t\tplayer.discardPlayerCard(event.current,'hej',true)\n\t\t\t\t\tif(targets.length) event.redo();\n\t\t\t\t},subSkill: {disable: {sub: \"true\",trigger: {player: \"phaseAfter\",},forced: \"true\",silent: \"true\",popup: \"false\",charlotte: \"true\",content: function (){player.removeSkill('liezhi_disable')},},damage: {trigger: {player: \"damage\",},forced: \"true\",silent: \"true\",popup: \"false\",content: function (){player.addSkill('liezhi_disable')},sub: \"true\",},},}","info":"准备阶段，你可以依次弃置至多两名其他角色区域内的各一张牌。若你受到过伤害，则〖烈直〗于你的下个回合无效。"},"relianji":{"name":"连计","script":"{audio: \"wylianji\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.players.length>1;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},targetprompt: [\"打人\",\"被打\"],selectTarget: \"2\",multitarget: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\tif(targets[0].isDisabled(1)) event.goto(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar target=targets[0];\n\t\t\t\t\tvar equip1=get.cardPile2(function(card){\n\t\t\t\t\t\treturn get.subtype(card)=='equip1';\n\t\t\t\t\t});\n\t\t\t\t\tif(!equip1){\n\t\t\t\t\t\tplayer.popup('连计失败');\n\t\t\t\t\t\tgame.log('牌堆中无装备');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(equip1.name=='qinggang'&&!lib.inpile.contains('qibaodao')){\n\t\t\t\t\t\tequip1.remove();\n\t\t\t\t\t\tequip1=game.createCard('qibaodao',equip1.suit,equip1.number);\n\t\t\t\t\t}\n\t\t\t\t\ttarget.$draw(equip1);\n\t\t\t\t\ttarget.chooseUseTarget(equip1,'noanimate','nopopup',true);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tvar list=['nanman','wanjian','huogong','juedou','sha'];\n\t\t\t\t\tvar list2=game.players.slice(0);\n\t\t\t\t\tlist2.remove(player);\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(!targets[0].canUse(list[i],targets[1],false)) list.splice(i--,1);\n\t\t\t\t\t}\n\t\t\t\t\tif(!list.length) return;\n\t\t\t\t\tvar name=list.randomGet();\n\t\t\t\t\tif(name=='nanman'||name=='wanjian'){\n\t\t\t\t\t\tfor(var i=0;i<list2.length;i++){\n\t\t\t\t\t\t\tif(!targets[0].canUse(name,list2[i],false)) list2.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse list2=targets[1];\n\t\t\t\t\ttargets[0].useCard({name:name,isCard:true},list2,'noai');\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},expose: \"0.4\",threaten: \"3\",},group: \"relianji_count\",subSkill: {count: {sub: \"true\",forced: \"true\",popup: \"false\",silent: \"true\",trigger: {global: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\tvar evt=event.getParent(3);\n\t\t\t\t\t\t\treturn evt&&evt.name=='relianji'&&evt.player==player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(!player.storage.relianji) player.storage.relianji=0;\n\t\t\t\t\t\t\tplayer.storage.relianji++;\n\t\t\t\t\t\t\tif(player.storage.relianji>2){\n\t\t\t\t\t\t\t\tevent.trigger('remoucheng_awaken');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择两名其他角色。第一名角色随机使用牌堆中的一张武器牌，然后这名角色视为对另一名角色随机使用一张下列的牌名的牌：【决斗】、【火攻】、【南蛮入侵】、【万箭齐发】或普【杀】。然后若此牌造成伤害，你获得X枚“连计”标记（X为此次扣减的体力值点数）。"},"remoucheng":{"name":"谋逞","script":"{derivation: \"jingong\",trigger: {player: \"remoucheng_awaken\",},forced: \"true\",audio: \"moucheng\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\tplayer.awakenSkill('remoucheng');\n\t\t\t\t\tplayer.removeSkill('relianji');\n\t\t\t\t\tplayer.addSkill('jingong');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},}","info":"觉醒技，当一名角色造成伤害后，若你拥有的“连计”标记数大于2，你加1点体力上限，回复1点体力，失去“连计”，获得“矜功”。"},"meiyong":{"name":"姝勇","script":"{inherit: \"xinfu_wuniang\",audio: \"xinfu_wuniang\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('meiyong'),'获得一名其他角色的一张牌，然后其摸一张牌。',function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\treturn target.countGainableCards(player,'he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn 10-get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('meiyong',target);\n\t\t\t\t\t\tplayer.gainPlayerCard(target,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.draw();\n\t\t\t\t},trigger: {player: [\"useCard\",\"respond\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},}","info":"当你使用或打出【杀】时，你可以获得一名其他角色的一张牌，然后其摸一张牌。"},"rexushen":{"name":"许身","script":"{derivation: [\"new_rewusheng\",\"redangxian\"],audio: \"xinfu_xushen\",limited: \"true\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.sex=='male';\n\t\t\t\t\t})\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"fire\",content: function (){\n\t\t\t\t\tplayer.addSkill('rexushen2');\n\t\t\t\t\tplayer.awakenSkill('rexushen');\n\t\t\t\t\tplayer.loseHp(game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.sex=='male';\n\t\t\t\t\t}));\n\t\t\t\t},ai: {order: \"10\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp!=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.sex=='male';\n\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)>4&&current.countCards('h','tao')\n\t\t\t\t\t\t\t})?1:0;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以失去X点体力（X为场上男性角色的数量）。若你以此法进入了濒死状态，则当你因一名角色而脱离此濒死状态后，你可以令其获得技能〖武圣〗和〖当先〗。"},"rezhennan":{"name":"镇南","script":"{audio: \"xinfu_zhennan\",trigger: {target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.targets&&event.targets.length&&event.targets.length>event.player.hp;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('rezhennan',trigger.player),'弃置一张牌并对其造成1点伤害','he');\n\t\t\t\t\tnext.set('logSkill',['rezhennan',trigger.player]);\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar target=_status.event.getTrigger().player;\n\t\t\t\t\t\tif(get.damageEffect(target,player,player)>0) return 7-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool) trigger.player.damage();\n\t\t\t\t},}","info":"当你成为其他角色使用的牌的目标后，若此牌的目标数大于该角色的体力值，则你可以弃置一张牌并对其造成1点伤害。"},"renshi":{"name":"仁释","script":"{audio: \"2\",trigger: {player: \"damageBegin4\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged()&&event.card&&event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tvar cards=trigger.cards.filterInD();\n\t\t\t\t\tif(cards.length) player.gain(cards,'gain2','log');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t},ai: {filterDamage: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg&&arg.card&&arg.card.name=='sha') return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技，当你受到【杀】的伤害时，若你已受伤，则你防止此伤害并获得此【杀】对应的所有实体牌，然后减1点体力上限。"},"wuyuan":{"name":"武缘","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0;\n\t\t\t\t},filterCard: {name: \"sha\",},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(get.color(card)=='red'&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.isDamaged()&&get.attitude(player,current)>2;\n\t\t\t\t\t})) return 2;\n\t\t\t\t\tif(get.nature(card)) return 1.5;\n\t\t\t\t\treturn 1;\n\t\t\t\t},discard: \"false\",delay: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=1;\n\t\t\t\t\tif(get.nature(cards[0])) num++;\n\t\t\t\t\ttarget.draw(num);\n\t\t\t\t\tif(get.color(cards[0])=='red') target.recover();\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.isDamaged()) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\t\t\tif(get.nature(ui.selected.cards[0])) num++;\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) num=0;\n\t\t\t\t\t\t\t\tif(get.color(ui.selected.cards[0])=='red') return num+2\n\t\t\t\t\t\t\t\telse return num+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可将一张【杀】交给一名其他角色，然后你回复1点体力，其摸一张牌。若此【杀】为：红色【杀】，其回复1点体力；属性【杀】，其改为摸两张牌。"},"huaizi":{"name":"怀子","script":"{mod: {maxHandcardBase: function (player,num){\n\t\t\t\t\t\treturn player.maxHp;\n\t\t\t\t\t},},forced: \"true\",firstDo: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged()&&player.countCards('h')>player.hp;\n\t\t\t\t},content: function (){},}","info":"锁定技，你的手牌上限为你的体力上限。"},"reqianxin":{"name":"遣信","script":"{audio: \"xinfu_qianxin\",enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",selectCard: function (){\n\t\t\t\t\treturn [1,Math.min(2,game.players.length-1)];\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"0\",content: function (){\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=player;\n\t\t\t\t\t}).randomGets(cards.length);\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tvar target=targets[i];\n\t\t\t\t\t\ttarget.addSkill('reqianxin2');\n\t\t\t\t\t\ttarget.storage.reqianxin2.push([cards[i],player]);\n\t\t\t\t\t\tplayer.$give(1,target);\n\t\t\t\t\t\ttarget.gain(cards[i],player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可将至多两张手牌随机交给等量的其他角色，称为「信」。这些角色的准备阶段开始时，若其手牌中有「信」，则其选择一项：令你摸两张牌，本回合手牌上限-2。"},"rezhenxing":{"name":"镇行","script":"{audio: \"xinfu_zhenxing\",trigger: {player: [\"damageEnd\",\"phaseJieshuBegin\"],},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cards=get.cards(3);\n\t\t\t\t\tplayer.chooseButton(['【镇行】：请选择要获得的牌',event.cards]).set('filterButton',function(button){\n\t\t\t\t\t\tvar cards=_status.event.cards;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(button.link!=cards[i]&&get.suit(cards[i])==get.suit(button.link)) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t}).set('cards',event.cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tfor(var i=event.cards.length-1;i>=0;i--){\n\t\t\t\t\t\tif(result.bool&&result.links.contains(event.cards[i])){\n\t\t\t\t\t\t\tplayer.gain(event.cards[i],'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.cards[i].fix();\n\t\t\t\t\t\t\tui.cardPile.insertBefore(event.cards[i],ui.cardPile.childNodes[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},}","info":"结束阶段开始时或当你受到伤害后，你可以观看牌堆顶的三张牌，然后你获得其中与其余牌花色均不相同的一张牌。"},"rebiaozhao":{"name":"表召","script":"{audio: \"biaozhao\",intro: {content: \"cards\",},trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0&&!player.storage.rebiaozhao;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('he',get.prompt2('rebiaozhao')).ai=function(card){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addSkill('rebiaozhao2');\n\t\t\t\t\t\tplayer.addSkill('rebiaozhao3');\n\t\t\t\t\t\tplayer.logSkill('rebiaozhao');\n\t\t\t\t\t\tplayer.$give(result.cards,player,false);\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage','visible');\n\t\t\t\t\t\tplayer.storage.rebiaozhao=result.cards;\n\t\t\t\t\t\tplayer.markSkill('rebiaozhao');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以将一张牌置于武将牌上，称为「表」。当有一张与「表」点数相同的牌进入弃牌堆时，你将「表」置入弃牌堆并失去1点体力。准备阶段，若你的武将牌上有「表」，则你移去「表」并选择一名角色，该角色回复1点体力并摸三张牌。"},"yechou":{"name":"业仇","script":"{audio: \"2\",trigger: {player: \"die\",},direct: \"true\",forceDie: \"true\",skillAnimation: \"true\",animationColor: \"wood\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('yechou'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&target.getDamagedHp()>1\n\t\t\t\t\t}).set('forceDie',true).set('ai',function(target){\n\t\t\t\t\t\tvar num=get.attitude(_status.event.player,target);\n\t\t\t\t\t\treturn -num;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('yechou',target);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.addTempSkill('yechou2',{player:'phaseZhunbeiBegin'});\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.5\",},}","info":"当你死亡时，你可以选择一名已损失体力值大于1的角色。直到其下个回合开始前，每个回合结束时，该角色失去1点体力。"},"refuhai":{"name":"浮海","script":"{audio: \"xinfu_fuhai\",enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.current=player.next;\n\t\t\t\t\tevent.upper=[];\n\t\t\t\t\tevent.lower=[];\n\t\t\t\t\tevent.acted=[];\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tevent.stopped=false;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.acted.push(event.current);\n\t\t\t\t\tevent.current.chooseControl('潮起','潮落').set('prompt','潮鸣起乎？潮鸣落乎？').ai=function(){\n\t\t\t\t\t\treturn Math.random()<0.5?0:1;\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!event.chosen) event.chosen=result.control;\n\t\t\t\t\tif(event.chosen!=result.control) event.stopped=true;\n\t\t\t\t\tif(!event.stopped) event.num++;\n\t\t\t\t\tif(result.control=='潮起'){\n\t\t\t\t\t\tevent.upper.push(event.current)\n\t\t\t\t\t}\n\t\t\t\t\telse event.lower.push(event.current);\n\t\t\t\t\tevent.current=event.current.next;\n\t\t\t\t\tif(event.current!=player&&!event.acted.contains(event.current)) event.goto(1);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tfor(var i=0;i<event.acted.length;i++){\n\t\t\t\t\t\tvar bool=event.upper.contains(event.acted[i]);\n\t\t\t\t\t\tgame.log(event.acted[i],'选择了',bool?'#g潮起':'#y潮落');\n\t\t\t\t\t\tevent.acted[i].popup(bool?'潮起':'潮落',bool?'wood':'orange');\n\t\t\t\t\t}\n\t\t\t\t\tgame.delay(1);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(num>1) player.draw(num);\n\t\t\t\t},ai: {order: \"10\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可令其他角色同时在「潮起」和「潮落」中选择一项，并依次展示这些角色的选项。若从你下家开始选择了相同选项的角色数目大于1，则你摸X张牌（X为连续相同结果的数量）。"},"reluanji":{"name":"乱击","script":"{audio: \"2\",enable: \"phaseUse\",viewAs: {name: \"wanjian\",},filterCard: function (card,player){\n\t\t\t\t\tif(!player.storage.reluanji) return true;\n\t\t\t\t\treturn !player.storage.reluanji.contains(get.suit(card));\n\t\t\t\t},selectCard: \"2\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('wanjian',current);\n\t\t\t\t\t});\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tvar eff=get.sgn(get.effect(targets[i],{name:'wanjian'},player,player));\n\t\t\t\t\t\tif(targets[i].hp==1){\n\t\t\t\t\t\t\teff*=1.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnum+=eff;\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.needsToDiscard(-1)){\n\t\t\t\t\t\tif(targets.length>=7){\n\t\t\t\t\t\t\tif(num<2) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(targets.length>=5){\n\t\t\t\t\t\t\tif(num<1.5) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},ai: {basic: {order: \"8.9\",useful: \"1\",value: \"5\",},wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},group: [\"reluanji_count\",\"reluanji_reset\",\"reluanji_respond\",\"reluanji_damage\",\"reluanji_draw\"],subSkill: {reset: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.reluanji;\n\t\t\t\t\t\t\tdelete player.storage.reluanji2;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},count: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event){\n\t\t\t\t\t\t\treturn event.skill=='reluanji';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.reluanji2=trigger.card;\n\t\t\t\t\t\t\tif(!player.storage.reluanji){\n\t\t\t\t\t\t\t\tplayer.storage.reluanji=[];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\t\t\tplayer.storage.reluanji.add(get.suit(trigger.cards[i]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},respond: {trigger: {global: \"respond\",},silent: \"true\",filter: function (event){\n\t\t\t\t\t\t\treturn event.getParent(2).skill=='reluanji';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},damage: {trigger: {source: \"damage\",},forced: \"true\",silent: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.reluanji2&&event.card==player.storage.reluanji2;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tdelete player.storage.reluanji2;\n\t\t\t\t\t\t},sub: \"true\",},draw: {trigger: {player: \"useCardAfter\",},forced: \"true\",silent: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.reluanji2&&event.card==player.storage.reluanji2;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw(trigger.targets.length);\n\t\t\t\t\t\t\tdelete player.storage.reluanji2;\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"你可以将两张与你本回合以此法转化的花色均不相同的手牌当【万箭齐发】使用，然后当一名角色因响应此牌而打出【闪】时，该角色摸一张牌。若你以此法使用的【万箭齐发】未造成伤害，则你可以在此牌结算完成后摸X张牌。(X为此牌的目标数)"},"xueyi":{"name":"血裔","script":"{trigger: {player: \"phaseDiscardBefore\",},audio: \"2\",audioname: [\"re_yuanshao\"],forced: \"true\",firstDo: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hasZhuSkill('xueyi')&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='qun';\n\t\t\t\t\t})&&player.countCards('h')>player.hp;\n\t\t\t\t},content: function (){},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.hasZhuSkill('xueyi')){\n\t\t\t\t\t\t\treturn num+game.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(player!=current&&current.group=='qun') return 2;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t},},zhuSkill: \"true\",}","info":"主公技，锁定技，场上每有一名其他群雄角色存活，你的手牌上限便+2。"},"xiangle":{"name":"享乐","script":"{audio: \"2\",audioname: [\"re_liushan\",\"ol_liushan\"],trigger: {target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar eff=get.effect(player,trigger.card,trigger.player,trigger.player);\n\t\t\t\t\ttrigger.player.chooseToDiscard('享乐：弃置一张基本牌，否则杀对'+get.translation(player)+'无效',function(card){\n\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.eff>0){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('eff',eff);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.attitude(player,target)<0){\n\t\t\t\t\t\t\t\tif(_status.event.name=='xiangle') return;\n\t\t\t\t\t\t\t\tvar bs=player.getCards('h',{type:'basic'});\n\t\t\t\t\t\t\t\tif(bs.length<2) return 0;\n\t\t\t\t\t\t\t\tif(player.hasSkill('jiu')||player.hasSkill('tianxianjiu')) return;\n\t\t\t\t\t\t\t\tif(bs.length<=3&&player.countCards('h','sha')<=1){\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<bs.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(bs[i].name!='sha'&&get.value(bs[i])<7){\n\t\t\t\t\t\t\t\t\t\t\treturn [1,0,1,-0.5];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn [1,0,1,-0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当其他角色使用【杀】指定你为目标时，其需弃置一张基本牌，否则此【杀】对你无效。"},"refangquan":{"name":"放权","script":"{audio: \"2\",trigger: {player: \"phaseUseBefore\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&!player.hasSkill('fangquan3');\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar fang=player.countMark('fangquan2')==0&&player.hp>=2&&player.countCards('h')<=player.hp+1;\n\t\t\t\t\tplayer.chooseBool(get.prompt2('refangquan')).set('ai',function(){\n\t\t\t\t\t\tif(!_status.event.fang) return false;\n\t\t\t\t\t\treturn game.hasPlayer(function(target){\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')||target==player) return false;\n\t\t\t\t\t\t\tif(get.attitude(player,target)>4){\n\t\t\t\t\t\t\t\treturn (get.threaten(target)/Math.sqrt(target.hp+1)/Math.sqrt(target.countCards('h')+1)>0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}).set('fang',fang);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('refangquan');\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tplayer.addTempSkill('fangquan2','phaseAfter');\n\t\t\t\t\t\tplayer.addMark('fangquan2',1,false);\n\t\t\t\t\t\tplayer.addTempSkill('refangquan2');\n\t\t\t\t\t\t//player.storage.fangquan=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t},}","info":"你可跳过你的出牌阶段，若如此做，你本回合的手牌上限为你的体力上限，且回合结束时，你可以弃置一张手牌并令一名其他角色进行一个额外的回合。"},"ruoyu":{"name":"若愚","script":"{skillAnimation: \"true\",animationColor: \"fire\",audio: \"2\",audioname: [\"re_liushan\"],unique: \"true\",juexingji: \"true\",zhuSkill: \"true\",keepSkill: \"true\",derivation: \"jijiang\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('ruoyu'))return false;\n\t\t\t\t\tif(player.storage.ruoyu) return false;\n\t\t\t\t\treturn player.isMinHp();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.ruoyu=true;\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tif(player.hasSkill('ruoyu')){\n\t\t\t\t\t\tplayer.addSkill('jijiang');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addAdditionalSkill('ruoyu','jijiang');\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.isZhu){\n\t\t\t\t\t\tplayer.storage.zhuSkill_ruoyu=['jijiang'];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.trigger('zhuUpdate');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.awakenSkill('ruoyu');\n\t\t\t\t},}","info":"主公技，觉醒技，准备阶段，若你的体力是全场最少的(或之一)，你须增加1点体力上限并回复1点体力，然后获得技能〖激将〗。"},"jiang":{"name":"激昂","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"sp_lvmeng\",\"re_sunben\",\"re_sunce\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\tif(!(event.card.name=='juedou'||(event.card.name=='sha'&&get.color(event.card)=='red'))) return false;\n\t\t\t\t\treturn player==event.target||event.getParent().triggeredTargets3.length==1;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,0.6];\n\t\t\t\t\t\t},player: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,1];\n\t\t\t\t\t\t},},},}","info":"每当你使用（指定目标后）或被使用（成为目标后）一张【决斗】或红色的【杀】时，你可以摸一张牌。"},"rehunzi":{"name":"魂姿","script":"{inherit: \"hunzi\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<=2&&!player.storage.rehunzi;\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp<=2) return 2;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},maixie: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')==1&&target.hp==3&&!target.isTurnedOver()&&\n\t\t\t\t\t\t\t_status.currentPhase!=target&&get.distance(_status.currentPhase,target,'absolute')<=3) return [0.5,1];\n\t\t\t\t\t\t},},},skillAnimation: \"true\",animationColor: \"wood\",audio: \"2\",juexingji: \"true\",derivation: [\"reyingzi\",\"gzyinghun\"],unique: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('reyingzi');\n\t\t\t\t\tplayer.addSkill('gzyinghun');\n\t\t\t\t\tgame.log(player,'获得了技能','#g【英姿】和【英魂】')\n\t\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\t\tplayer.storage[event.name]=true;\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你的体力值不大于2，你减1点体力上限，并获得技能〖英姿〗和〖英魂〗。"},"zhiba":{"name":"制霸","script":"{unique: \"true\",global: \"zhiba2\",audioname: [\"re_sunben\"],audio: \"zhiba2\",zhuSkill: \"true\",}","info":"主公技，其他吴势力角色的出牌阶段限一次，其可与你进行一次拼点。若该角色没赢，你可以获得双方拼点的牌；你的觉醒技发动后，你可以拒绝此拼点。"}},"card":{},"hero":{"re_dengai":{"name":"手杀邓艾","attr":["male","wei",4,["retuntian","zaoxian"],[]]},"xin_fuhuanghou":{"name":"手杀伏皇后","attr":["female","qun",3,["xinzhuikong","xinqiuyuan"],[]]},"xin_panzhangmazhong":{"name":"手杀潘璋马忠","attr":["male","wu",4,["xinduodao","xinanjian"],[]]},"xin_guohuai":{"name":"手杀郭淮","attr":["male","wei",4,["mobilejingce"],[]]},"gongsunkang":{"name":"公孙康","attr":["male","qun",4,["juliao","taomie"],[]]},"xin_zhangfei":{"name":"手杀张飞","attr":["male","shu",4,["new_repaoxiao","liyong"],[]]},"xin_hansui":{"name":"手杀韩遂","attr":["male","qun",4,["xinniluan","xiaoxi_hansui"],[]]},"hucheer":{"name":"胡车儿","attr":["male","qun",4,["daoji"],[]]},"re_lingtong":{"name":"手杀凌统","attr":["male","wu",4,["rexuanfeng"],[]]},"re_liubiao":{"name":"手杀刘表","attr":["male","qun",3,["zishou","rezongshi"],[]]},"simashi":{"name":"司马师","attr":["male","wei",4,["baiyi","jinglve","shanli"],[]]},"yanghuiyu":{"name":"羊徽瑜","attr":["female","wei",3,["hongyi","quanfeng"],[]]},"xin_zhuran":{"name":"手杀朱然","attr":["male","wu",4,["mobiledanshou"],[]]},"xin_gongsunzan":{"name":"手杀公孙瓒","attr":["male","qun",4,["xinyicong","qiaomeng"],[]]},"dingyuan":{"name":"手杀丁原","attr":["male","qun",4,["beizhu"],[]]},"xin_jianyong":{"name":"手杀简雍","attr":["male","shu",3,["xinqiaoshui","xinjyzongshi"],[]]},"xin_caozhang":{"name":"手杀曹彰","attr":["male","wei",4,["rejiangchi"],[]]},"xin_liaohua":{"name":"手杀廖化","attr":["male","shu",4,["redangxian","refuli"],[]]},"furong":{"name":"傅肜","attr":["male","shu",4,["xuewei","liechi"],[]]},"re_dongzhuo":{"name":"手杀董卓","attr":["male","qun",8,["rejiuchi","roulin","benghuai","baonue"],["zhu"]]},"re_xusheng":{"name":"手杀徐盛","attr":["male","wu",4,["repojun"],[]]},"sp_sufei":{"name":"SP苏飞","attr":["male","qun",4,["zhengjian","gaoyuan"],[]]},"yj_zhangliao":{"name":"☆张辽","attr":["male","qun",4,["weifeng"],[]]},"yj_zhanghe":{"name":"☆张郃","attr":["male","qun",4,["xinzhilve"],[]]},"yj_xuhuang":{"name":"☆徐晃","attr":["male","qun",4,["xinxhzhiyan"],[]]},"yj_ganning":{"name":"☆甘宁","attr":["male","qun",4,["gnjinfan","gnsheque"],[]]},"re_sunjian":{"name":"手杀孙坚","attr":["male","wu",4,["gzyinghun","repolu"],[]]},"zhengxuan":{"name":"郑玄","attr":["male","qun",3,["zhengjing"],[]]},"dengzhi":{"name":"邓芝","attr":["male","shu",3,["jimeng","shuaiyan"],[]]},"xin_chengpu":{"name":"手杀程普","attr":["male","wu",4,["relihuo","chunlao"],[]]},"yangyi":{"name":"杨仪","attr":["male","shu",3,["duoduan","gongsun"],[]]},"dongcheng":{"name":"董承","attr":["male","qun",4,["chengzhao"],[]]},"re_pangtong":{"name":"手杀庞统","attr":["male","shu",3,["xinlianhuan","niepan"],[]]},"re_guanqiujian":{"name":"手杀毌丘俭","attr":["male","wei",4,["rezhengrong","rehongju"],[]]},"chendeng":{"name":"陈登","attr":["male","qun",3,["zhouxuan","fengji"],[]]},"re_heqi":{"name":"手杀贺齐","attr":["male","wu",4,["reqizhou","reshanxi"],[]]},"yangbiao":{"name":"杨彪","attr":["male","qun",3,["zhaohan","rangjie","yizheng"],[]]},"re_sp_zhugeliang":{"name":"手杀卧龙","attr":["male","shu",3,["bazhen","rehuoji","rekanpo"],[]]},"xin_xiahoudun":{"name":"手杀夏侯惇","attr":["male","wei",4,["reganglie","xinqingjian"],[]]},"zhangyì":{"name":"张翼","attr":["male","shu",4,["rezhiyi"],[]]},"jiakui":{"name":"贾逵","attr":["male","wei",3,["zhongzuo","wanlan"],[]]},"re_jikang":{"name":"手杀嵇康","attr":["male","wei",3,["new_qingxian","new_juexiang"],[]]},"old_bulianshi":{"name":"手杀步练师","attr":["female","wu",3,["anxu","zhuiyi"],[]]},"miheng":{"name":"祢衡","attr":["male","qun",3,["kuangcai","shejian"],[]]},"taoqian":{"name":"陶谦","attr":["male","qun",3,["zhaohuo","yixiang","yirang"],[]]},"liuzan":{"name":"手杀留赞","attr":["male","wu",4,["fenyin"],[]]},"lingcao":{"name":"凌操","attr":["male","wu",4,["dujin"],[]]},"sunru":{"name":"孙茹","attr":["female","wu",3,["yingjian","shixin"],[]]},"lifeng":{"name":"李丰","attr":["male","shu",3,["tunchu","shuliang"],[]]},"zhuling":{"name":"朱灵","attr":["male","wei",4,["xinzhanyi"],[]]},"liuye":{"name":"刘晔","attr":["male","wei",3,["polu","choulve"],[]]},"zhaotongzhaoguang":{"name":"赵统赵广","attr":["male","shu",4,["yizan_use","xinfu_longyuan"],[]]},"majun":{"name":"马钧","attr":["male","wei",3,["xinfu_jingxie1","qiaosi"],[]]},"simazhao":{"name":"司马昭","attr":["male","wei",3,["xinfu_daigong","xinfu_zhaoxin"],[]]},"wangyuanji":{"name":"王元姬","attr":["female","wei",3,["xinfu_qianchong","xinfu_shangjian"],[]]},"pangdegong":{"name":"庞德公","attr":["male","qun",3,["xinfu_pingcai","xinfu_pdgyingshi"],[]]},"old_yuanshu":{"name":"手杀袁术","attr":["male","qun",4,["xinyongsi","yjixi"],[]]},"shenpei":{"name":"审配","attr":["male","qun","2/3",["shouye","liezhi"],[]]},"re_wangyun":{"name":"手杀王允","attr":["male","qun",3,["relianji","remoucheng"],[]]},"re_baosanniang":{"name":"手杀鲍三娘","attr":["female","shu",3,["meiyong","rexushen","rezhennan"],[]]},"hujinding":{"name":"胡金定","attr":["female","shu","2/6",["renshi","wuyuan","huaizi"],[]]},"re_zhanggong":{"name":"手杀张恭","attr":["male","wei",3,["reqianxin","rezhenxing"],[]]},"re_xugong":{"name":"手杀许贡","attr":["male","wu",3,["rebiaozhao","yechou"],[]]},"re_weiwenzhugezhi":{"name":"手杀卫温诸葛直","attr":["male","wu",4,["refuhai"],[]]},"xin_yuanshao":{"name":"手杀袁绍","attr":["male","qun",4,["reluanji","xueyi"],["zhu"]]},"re_liushan":{"name":"手杀刘禅","attr":["male","shu",3,["xiangle","refangquan","ruoyu"],["zhu"]]},"re_sunben":{"name":"界孙笨","attr":["male","wu",4,["jiang","rehunzi","zhiba"],["zhu"]]}}},"refresh":{"name":"界限突破","skill":{"rehuaiyi":{"name":"怀异","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"2\",delay: \"false\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&(!player.getStat('skill').rehuaiyi||player.hasSkill('rehuaiyi2'));\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\tif(get.color(player.getCards('h'))!='none'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.addTempSkill('rehuaiyi2','phaseUseEnd');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseControl('红色','黑色').set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h',{color:'red'})==1&&\n\t\t\t\t\t\tplayer.countCards('h',{color:'black'})>1) return '红色';\n\t\t\t\t\t\treturn '黑色';\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.control=result.control;\n\t\t\t\t\tvar cards;\n\t\t\t\t\tif(event.control=='红色'){\n\t\t\t\t\t\tcards=player.getCards('h',{color:'red'});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tcards=player.getCards('h',{color:'black'});\n\t\t\t\t\t}\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\tevent.num=cards.length;\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.chooseTarget('请选择至多'+get.cnNumber(event.num)+'名有牌的其他角色，获得这些角色的各一张牌。',[1,event.num],function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)+0.5;\n\t\t\t\t\t});\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool&&result.targets){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\tevent.gained=0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(player.isAlive()&&event.targets.length){\n\t\t\t\t\t\tplayer.gainPlayerCard(event.targets.shift(),'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.gained+=result.cards.length;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.targets.length) event.goto(5);\n\t\t\t\t\t'step 7'\n\t\t\t\t\tif(event.gained>1) player.loseHp();\n\t\t\t\t},ai: {order: function (item,player){\n\t\t\t\t\t\tif(player.countCards('h',{color:'red'})==0) return 10;\n\t\t\t\t\t\tif(player.countCards('h',{color:'black'})==0) return 10;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以展示所有手牌，若这些牌的颜色：全部相同，你摸一张牌，并将此技能于本阶段内改为“限两次”，然后终止此技能的结算流程；不全部相同，则你选择一种颜色并弃置该颜色的所有手牌，然后你可以获得至多X名角色的各一张牌（X为你以此法弃置的手牌数）。若你以此法获得的牌不少于两张，则你失去1点体力。"},"residi":{"name":"司敌","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',function(card){\n\t\t\t\t\t\tif(_status.connectMode) return true;\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('he',get.prompt('residi'),'将一张非基本牌置于武将牌上作为“司”',function(card,player){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tif(get.position(card)=='e') return 5+player.hp-get.value(card);\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('residi');\n\t\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\t\tplayer.markAuto('residi',cards);\n\t\t\t\t\t\tgame.log(player,'将',cards[0],'放在了武将牌上');\n\t\t\t\t\t\tplayer.lose(cards,ui.special,'toStorage');\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"cards\",onunmark: \"true\",},group: \"residi_push\",}","info":"结束阶段，你可以将一张非基本牌置于武将牌上，称为“司”。其他角色的出牌阶段开始时，你可以移去一张“司”。若如此做，其本阶段内不能使用或打出与“司”颜色相同的牌。此阶段结束时，若其于此阶段内未使用过：【杀】，你视为对其使用一张【杀】。锦囊牌，你摸两张牌。"},"rezhuikong":{"name":"惴恐","script":"{audio: \"2\",trigger: {global: \"phaseZhunbeiBegin\",},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<-2){\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tif(cards.length>player.hp) return true;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tvar useful=get.useful(cards[i]);\n\t\t\t\t\t\t\tif(useful<5) return true;\n\t\t\t\t\t\t\tif(cards[i].number>7&&useful<7) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp&&player.canCompare(event.player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(trigger.player).set('small',(player.hp>1&&get.effect(player,{name:'sha'},trigger.player,player)>0&&Math.random()<0.9));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.addTempSkill('zishou2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.target&&get.position(result.target)=='d') player.gain(result.target,'gain2','log');\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar card={name:'sha',isCard:true};\n\t\t\t\t\tif(trigger.player.canUse(card,player,false)) trigger.player.useCard(card,player,false);\n\t\t\t\t},}","info":"其他角色的回合开始时，若你已受伤，你可与其拼点：若你赢，本回合该角色只能对自己使用牌；若你没赢，你获得其拼点的牌，然后其视为对你使用一张【杀】。"},"reqiuyuan":{"name":"求援","script":"{audio: \"2\",trigger: {target: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('reqiuyuan'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!_status.event.targets.contains(target)&&_status.event.playerx.canUse('sha',target,false);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,trigger.player,player)+0.1;\n\t\t\t\t\t}).set('targets',trigger.targets).set('playerx',trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('reqiuyuan',target);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\ttarget.chooseCard(function(card,player){\n\t\t\t\t\t\t\tvar name=get.name(card,player);\n\t\t\t\t\t\t\treturn name!='sha'&&get.type(name)=='basic';\n\t\t\t\t\t\t},'h','交给'+get.translation(player)+\n\t\t\t\t\t\t'一张不为【杀】的基本牌，或成为此杀的额外目标且不可响应此【杀】').set('ai',function(card){\n\t\t\t\t\t\t\treturn get.attitude(target,_status.event.sourcex)>=0?1:-1;\n\t\t\t\t\t\t}).set('sourcex',player);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,event.target,'give');\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.getParent().targets.push(event.target);\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.push(event.target);\n\t\t\t\t\t\ttrigger.directHit.push(event.target);\n\t\t\t\t\t\tgame.log(event.target,'成为了',trigger.card,'的额外目标');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name!='sha') return;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0){\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar target2=players[i];\n\t\t\t\t\t\t\t\t\tif(player!=target2&&target!=target2&&player.canUse(card,target2,false)&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,target)>0&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,player)<0){\n\t\t\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return 0.3;\n\t\t\t\t\t\t\t\t\t\treturn 0.6;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar target2=players[i];\n\t\t\t\t\t\t\t\t\tif(player!=target2&&target!=target2&&player.canUse(card,target2,false)&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,player)>0){\n\t\t\t\t\t\t\t\t\t\tif(player.canUse(card,target2)) return;\n\t\t\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return [0,1];\n\t\t\t\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标时，你可选择另一名其他角色。除非该角色交给你一张除【杀】以外的基本牌，否则其也成为此【杀】的目标且该角色不能响应此【杀】。"},"reenyuan":{"name":"恩怨","script":"{audio: \"2\",group: [\"reenyuan1\",\"reenyuan2\"],}","info":"当你获得一名其他角色的至少两张牌后，你可以令其摸一张牌。当你受到1点伤害后，你可令伤害来源选择一项：①失去1点体力。②交给你一张手牌。若此牌不为♥，则你摸一张牌。"},"rexuanhuo":{"name":"眩惑","script":"{audio: \"2\",trigger: {player: \"phaseDrawEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>1&&game.countPlayer()>2;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar ai2=function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(player,target)<=0) return 0;\n\t\t\t\t\t\tvar list=[null,'fire','thunder','ice','juedou'];\n\t\t\t\t\t\tif(target.hasSkill('ayato_zenshen')) list.push('kami');\n\t\t\t\t\t\tvar num=Math.max.apply(Math,list.map(function(i){\n\t\t\t\t\t\t\tif(i=='juedou') return target.getUseValue({name:'juedou',isCard:true},false);\n\t\t\t\t\t\t\tvar card={name:'sha',nature:i,isCard:true};\n\t\t\t\t\t\t\treturn target.getUseValue(card,false);\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tif(target.hasSkillTag('nogain')) num/=4;\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t};\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt2('rexuanhuo'),\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tselectCard:2,\n\t\t\t\t\t\tposition:'h',\n\t\t\t\t\t\tfilterTarget:lib.filter.notMe,\n\t\t\t\t\t\tgoon:game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&ai2(player,current)>0;\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:ai2,\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('rexuanhuo',target);\n\t\t\t\t\t\ttarget.gain(result.cards,player,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current!=target;\n\t\t\t\t\t})) player.chooseTarget(function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target!=_status.event.target;\n\t\t\t\t\t},'选择'+get.translation(target)+'使用【杀】或【决斗】的目标',true).set('target',target).set('ai',function(target){\n\t\t\t\t\t\tvar evt=_status.event;\n\t\t\t\t\t\tvar list=[null,'fire','thunder','ice','juedou'];\n\t\t\t\t\t\tif(evt.target.hasSkill('ayato_zenshen')) list.push('kami')\n\t\t\t\t\t\treturn Math.max.apply(Math,list.map(function(i){\n\t\t\t\t\t\t\tvar card={name:'sha',isCard:true};\n\t\t\t\t\t\t\tif(i=='juedou') card.name='juedou';\n\t\t\t\t\t\t\telse if(i) card.nature=i;\n\t\t\t\t\t\t\tif(!evt.target.canUse(card,target,false)) return 0;\n\t\t\t\t\t\t\treturn get.effect(target,card,evt.target,evt.player);\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar target2=result.targets[0];\n\t\t\t\t\tevent.target2=target2;\n\t\t\t\t\tplayer.line(target2);\n\t\t\t\t\tgame.log(player,'选择了',target2);\n\t\t\t\t\tvar list=[null,'fire','thunder','ice'];\n\t\t\t\t\tvar vcards=[];\n\t\t\t\t\tif(target.hasSkill('ayato_zenshen')) list.push('kami');\n\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\tif(target.canUse({name:'sha',isCard:true,nature:i},target2,false)) vcards.push(['基本','','sha',i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(target.canUse({name:'juedou',isCard:true},target2,false)) vcards.push(['基本','','juedou']);\n\t\t\t\t\tif(!vcards.length){\n\t\t\t\t\t\tif(!target.countCards('h')) event.finish();\n\t\t\t\t\t\telse event._result={index:1};\n\t\t\t\t\t}\n\t\t\t\t\telse if(!target.countCards('h')){\n\t\t\t\t\t\tevent._result={index:0};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.vcards=vcards;\n\t\t\t\t\t\ttarget.chooseControl().set('choiceList',[\n\t\t\t\t\t\t\t'视为对'+get.translation(target2)+'使用任意一种【杀】或【决斗】',\n\t\t\t\t\t\t\t'将所有手牌交给'+get.translation(player),\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tif(event.vcards.length==1) event._result={links:event.vcards,bool:true};\n\t\t\t\t\t\telse target.chooseButton(['请选择要对'+get.translation(event.target2)+'使用的牌',[event.vcards,'vcard']],true).set('ai',function(button){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.effect(_status.event.getParent().target2,{name:button.link[2],isCard:true,nature:button.link[3]},player,player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gain(target.getCards('h'),target,'giveAuto');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.bool) target.useCard({name:result.links[0][2],isCard:true,nature:result.links[0][3]},false,event.target2);\n\t\t\t\t},ai: {expose: \"0.17\",fireAttack: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\treturn player.hasFriend();\n\t\t\t\t\t},},}","info":"摸牌阶段结束时，你可以交给一名其他角色两张手牌，然后该角色选择一项：1. 视为对你选择的另一名角色使用任意一种【杀】或【决斗】，2. 交给你所有手牌。"},"decadexuanfeng":{"name":"旋风","script":"{audio: \"xuanfeng\",audioname: [\"boss_lvbu3\",\"re_heqi\",\"xin_lingtong\"],trigger: {player: [\"loseAfter\",\"phaseDiscardEnd\"],global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(_status.dying.length) return false;\n\t\t\t\t\tif(event.name=='phaseDiscard'){\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\t\tif(evt&&evt.getParent('phaseDiscard')==event&&evt.hs) cards.addArray(evt.hs);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn cards.length>1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\t\treturn evt&&evt.es&&evt.es.length>0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=2;\n\t\t\t\t\tevent.targets=[];\n\t\t\t\t\tevent.logged=false;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.chooseTarget(get.prompt('decadexuanfeng'),'弃置一名其他角色的一张牌',function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\treturn target.countDiscardableCards(player,'he');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.logged){\n\t\t\t\t\t\t\tplayer.logSkill('decadexuanfeng',result.targets);\n\t\t\t\t\t\t\tevent.logged=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.line(result.targets[0],'green');\n\t\t\t\t\t\ttargets.add(result.targets[0]);\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse if(!targets.length) event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.count) event.goto(1);\n\t\t\t\t\telse if(player==_status.currentPhase){\n\t\t\t\t\t\tplayer.chooseTarget('是否对一名目标角色造成1点伤害',function(card,player,target){\n\t\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t\t}).set('targets',targets).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets[0],'thunder');\n\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},reverseEquip: \"true\",noe: \"true\",expose: \"0.2\",},}","info":"当你于弃牌阶段弃置过至少两张牌，或当你失去装备区里的牌后，若场上没有处于濒死状态的角色，则你可以弃置至多两名其他角色的共计两张牌。若此时处于你的回合内，你可以对其中一名目标角色造成1点伤害。"},"yongjin":{"name":"勇进","script":"{audio: \"2\",audioname: [\"xin_lingtong\"],unique: \"true\",limited: \"true\",skillAnimation: \"true\",animationColor: \"wood\",enable: \"phaseUse\",filter: function (event,player,cards){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\tvar es=current.getCards('e',function(card){\n\t\t\t\t\t\t\treturn !cards||!cards.contains(card);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current2){\n\t\t\t\t\t\t\t\treturn current!=current2&&!current2.isMin()&&current2.isEmpty(get.subtype(es[i]));\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('yongjin');\n\t\t\t\t\tevent.count=3;\n\t\t\t\t\tevent.cards=[];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tif(!lib.skill.yongjin.filter(null,player,cards)){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t};\n\t\t\t\t\tvar next=player.chooseTarget(2,function(card,player,target){\n\t\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\t\tvar from=ui.selected.targets[0];\n\t\t\t\t\t\t\tif(target.isMin()) return false;\n\t\t\t\t\t\t\tvar es=from.getCards('e',function(card){\n\t\t\t\t\t\t\t\treturn !_status.event.cards.contains(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\tif(target.isEmpty(get.subtype(es[i]))) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn target.countCards('e',function(card){\n\t\t\t\t\t\t\t\treturn !_status.event.cards.contains(card);\n\t\t\t\t\t\t\t})>0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tvar sgnatt=get.sgn(att);\n\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tif(target.countCards('e',function(card){\n\t\t\t\t\t\t\t\t\treturn get.value(card,target)<0&&!_status.event.cards.contains(card)&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn current!=target&&get.attitude(player,current)<0&&current.isEmpty(get.subtype(card))\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})>0) return 9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(att<0){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\tif(current!=target&&get.attitude(player,current)>0){\n\t\t\t\t\t\t\t\t\t\tvar es=target.getCards('e',function(card){\n\t\t\t\t\t\t\t\t\t\t\treturn !_status.event.cards.contains(card);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\t\t\t\tif(get.value(es[i],target)>0&&current.isEmpty(get.subtype(es[i]))&&get.effect(current,es[i],player,current)>0) return true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar es=ui.selected.targets[0].getCards('e',function(card){\n\t\t\t\t\t\t\treturn !_status.event.cards.contains(card);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar i;\n\t\t\t\t\t\tvar att2=get.sgn(get.attitude(player,ui.selected.targets[0]));\n\t\t\t\t\t\tfor(i=0;i<es.length;i++){\n\t\t\t\t\t\t\tif(sgnatt!=0&&att2!=0&&sgnatt!=att2&&\n\t\t\t\t\t\t\t\tget.sgn(get.value(es[i],ui.selected.targets[0]))==-att2&&\n\t\t\t\t\t\t\t\tget.sgn(get.effect(target,es[i],player,target))==sgnatt&&\n\t\t\t\t\t\t\t\ttarget.isEmpty(get.subtype(es[i]))){\n\t\t\t\t\t\t\t\treturn Math.abs(att);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(i==es.length){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -att*get.attitude(player,ui.selected.targets[0]);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('multitarget',true);\n\t\t\t\t\tnext.set('cards',cards);\n\t\t\t\t\tnext.set('targetprompt',['被移走','移动目标']);\n\t\t\t\t\tnext.set('prompt','移动场上的一张装备牌');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line2(result.targets,'green');\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(targets.length==2){\n\t\t\t\t\t\tplayer.choosePlayerCard('e',true,function(button){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar targets0=_status.event.targets0;\n\t\t\t\t\t\t\tvar targets1=_status.event.targets1;\n\t\t\t\t\t\t\tif(get.attitude(player,targets0)>0&&get.attitude(player,targets1)<0){\n\t\t\t\t\t\t\t\tif(get.value(button.link,targets0)<0&&get.effect(targets1,button.link,player,targets1)>0) return 10;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.value(button.link)*get.effect(targets1,button.link,player,player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},targets[0]).set('nojudge',event.nojudge||false).set('targets0',targets[0]).set('targets1',targets[1]).set('filterButton',function(button){\n\t\t\t\t\t\t\tif(_status.event.cards.contains(button.link)) return false;\n\t\t\t\t\t\t\tvar targets1=_status.event.targets1;\n\t\t\t\t\t\t\treturn targets1.isEmpty(get.subtype(button.link));\n\t\t\t\t\t\t}).set('cards',cards);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.bool&&result.links.length){\n\t\t\t\t\t\tvar link=result.links[0];\n\t\t\t\t\t\tcards.add(link);\n\t\t\t\t\t\tevent.targets[1].equip(link);\n\t\t\t\t\t\tevent.targets[0].$give(link,event.targets[1])\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(event.count>0) event.goto(1);\n\t\t\t\t},ai: {order: \"7\",result: {player: function (player){\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar friends=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)>=4;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar vacancies={\n\t\t\t\t\t\t\t\tequip1:0,\n\t\t\t\t\t\t\t\tequip2:0,\n\t\t\t\t\t\t\t\tequip3:0,\n\t\t\t\t\t\t\t\tequip4:0,\n\t\t\t\t\t\t\t\tequip5:0\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tfor(var i=0;i<friends.length;i++){\n\t\t\t\t\t\t\t\tfor(var j=1;j<=5;j++){\n\t\t\t\t\t\t\t\t\tif(friends[i].isEmpty(j)){\n\t\t\t\t\t\t\t\t\t\tvacancies['equip'+j]++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar sources=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)<0&&current.countCards('e');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfor(var i=0;i<sources.length;i++){\n\t\t\t\t\t\t\t\tvar es=sources[i].getCards('e');\n\t\t\t\t\t\t\t\tfor(var j=0;j<es.length;j++){\n\t\t\t\t\t\t\t\t\tvar type=get.subtype(es[j]);\n\t\t\t\t\t\t\t\t\tif(vacancies[type]&&get.value(es[j])>0){\n\t\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t\t\tif(num>=3){\n\t\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tvacancies[type]--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num&&player.hp==1){\n\t\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以依次移动场上的至多三张不同的装备牌。"},"decadezishou":{"name":"自守","script":"{audio: \"2\",inherit: \"rezishou\",group: \"decadezishou_zhiheng\",ai: {threaten: \"1.8\",},audioname: [\"re_liubiao\"],trigger: {player: \"phaseDrawBegin2\",},check: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<=(player.hasSkill('zongshi')?player.maxHp:(player.hp-2))||player.skipList.contains('phaseUse')||!player.countCards('h',function(card){\n\t\t\t\t\t\treturn get.tag(card,'damage')&&player.hasUseTarget(card);\n\t\t\t\t\t});\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num+=game.countGroup();\n\t\t\t\t\tplayer.addTempSkill('rezishou2');\n\t\t\t\t},}","info":"摸牌阶段，你可以多摸X张牌,然后本回合你对其他角色造成伤害时，防止此伤害。结束阶段，若你本回合没有使用牌指定其他角色为目标，你可以弃置任意张花色不同的手牌，然后摸等量的牌。"},"decadezongshi":{"name":"宗室","script":"{audio: \"2\",mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+game.countGroup();\n\t\t\t\t\t},},trigger: {target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=_status.currentPhase&&player.countCards('h')>=player.getHandcardLimit()&&\n\t\t\t\t\t(get.type(event.card)=='delay'||get.color(event.card)=='nocolor');\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.excluded.add(player);\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(target!=_status.currentPhase&&target.countCards('h')>=target.getHandcardLimit()&&\n\t\t\t\t\t\t\t\t(get.type(card)=='delay'||get.color(card)=='nocolor')) return 'zerotarget';\n\t\t\t\t\t\t},},},}","info":"锁定技，你的手牌上限+X（X为现存势力数）。你的回合外，若你的手牌数大于等于手牌上限，则当你成为延时类锦囊牌或无颜色的牌的目标后，你令此牌对你无效。"},"qianju":{"name":"千驹","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-(from.getDamagedHp());\n\t\t\t\t\t},},}","info":"锁定技，若你已受伤，你计算与其他角色的距离时-X（X为你已损失的体力值）。"},"reqingxi":{"name":"倾袭","script":"{audio: \"2\",trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'||event.card.name=='juedou';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=Math.min(game.countPlayer(function(current){\n\t\t\t\t\t\treturn player.inRange(current);\n\t\t\t\t\t}),player.getEquip(1)?4:2);\n\t\t\t\t\tif(trigger.target.countCards('h')<num){\n\t\t\t\t\t\tevent.directfalse=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.target.chooseToDiscard(num,'弃置'+get.cnNumber(num)+'张手牌，或令'+get.translation(trigger.card)+'的伤害+1').set('ai',function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player.hp==1){\n\t\t\t\t\t\t\t\tif(get.type(card)=='basic'){\n\t\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(num>2){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!event.directfalse&&result.bool){\n\t\t\t\t\t\tvar e1=player.getEquip(1);\n\t\t\t\t\t\tif(e1){\n\t\t\t\t\t\t\tplayer.discard(e1,'notBySelf');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\t\tvar map=trigger.customArgs;\n\t\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\t\tif(!map[id].extraDamage) map[id].extraDamage=0;\n\t\t\t\t\t\tmap[id].extraDamage++;\n\t\t\t\t\t\ttrigger.target.judge(function(card){\n\t\t\t\t\t\t\tif(get.color(card)=='red') return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.color=='red') trigger.directHit.add(trigger.target);\n\t\t\t\t},}","info":"当你使用【杀】或【决斗】指定目标后，你可以令其选择一项：1、弃置X张手牌（X为你攻击范围内的角色数，且当你装备区内有武器牌/没有武器牌时至多为4/2），若如此做，其弃置你的此武器牌；2、令此牌的伤害值+1且你进行判定，若结果为红色，则其不能响应此牌。"},"reyanzhu":{"name":"宴诛","script":"{enable: \"phaseUse\",audio: \"2\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},derivation: [\"reyanzhu_rewrite\",\"rexingxue_rewrite\"],prompt: function (){\n\t\t\t\t\treturn lib.translate[(_status.event.player.storage.reyanzhu?'reyanzhu_rewrite':'reyanzhu')+'_info'];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.storage.reyanzhu||!target.countCards('e')) event._result={index:1};\n\t\t\t\t\telse target.chooseControl().set('prompt',get.translation(player)+'发动了【宴诛】，请选择一项').set('choiceList',[\n\t\t\t\t\t\t'将装备区内的所有牌交给'+get.translation(player)+'并令其修改技能',\n\t\t\t\t\t\t'弃置一张牌，并令下次受到的伤害+1直到下回合开始',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\tif(_status.event.player.countCards('e')>=3) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.gain(target.getCards('e'),'giveAuto',target);\n\t\t\t\t\t\tplayer.storage.reyanzhu=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.addTempSkill('reyanzhu2',{player:'phaseBegin'});\n\t\t\t\t\t\ttarget.addMark('reyanzhu2',1,false);\n\t\t\t\t\t\tif(!player.storage.reyanzhu&&target.countCards('he')>0) target.chooseToDiscard('he',true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"6\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.storage.reyanzhu) return -1;\n\t\t\t\t\t\t\tvar ne=target.countCards('e');\n\t\t\t\t\t\t\tif(!ne) return -2;\n\t\t\t\t\t\t\tif(ne>=2) return -ne;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以令一名其他角色选择一项：将装备区里的所有牌交给你并令你修改〖宴诛〗和〖兴学〗，或弃置一张牌并令下一次受到的伤害+1直到其下回合开始。"},"rexingxue":{"name":"兴学","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn (player.storage.reyanzhu?player.maxHp:player.hp)>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget([1,player.storage.reyanzhu?player.maxHp:player.hp],get.prompt('rexingxue'),'令所有目标角色依次摸一张牌，然后所有手牌数大于体力值的目标角色依次将一张牌置于牌堆顶').set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(target.countCards('h')==target.hp-1) att*=2;\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.targets=result.targets.sortBySeat();\n\t\t\t\t\t\tplayer.logSkill('rexingxue',event.targets);\n\t\t\t\t\t\tgame.asyncDraw(result.targets);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.target=event.targets.shift();\n\t\t\t\t\t\tif(event.target.isDead()) event.redo();\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(target.isAlive()&&target.countCards('h')&&target.countCards('h')>target.hp) target.chooseCard('he',true,'将一张牌置于牌堆顶');\n\t\t\t\t\telse event.goto(3);\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result&&result.cards){\n\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t\ttarget.lose(result.cards,ui.cardPile,'insert');\n\t\t\t\t\t\tgame.log(target,'将',(get.position(event.card)=='h'?'一张牌':event.card),'置于牌堆顶');\n\t\t\t\t\t\tgame.broadcastAll(function(player){\n\t\t\t\t\t\t\tvar cardx=ui.create.card();\n\t\t\t\t\t\t\tcardx.classList.add('infohidden');\n\t\t\t\t\t\t\tcardx.classList.add('infoflip');\n\t\t\t\t\t\t\tplayer.$throw(cardx,1000,'nobroadcast');\n\t\t\t\t\t\t},target);\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(3);\n\t\t\t\t},}","info":"结束阶段开始时，你可以令至多X名角色各摸一张牌。然后若有手牌数大于体力值的目标角色，则这些角色各将一张牌置于牌堆顶。（X为你的体力值）。"},"zhaofu":{"name":"诏缚","script":"{unique: \"true\",global: \"zhaofu2\",zhuSkill: \"true\",}","info":"主公技，锁定技，你距离为1的角色视为在其他吴势力角色的攻击范围内。"},"oltuntian":{"name":"屯田","script":"{inherit: \"tuntian\",filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase){\n\t\t\t\t\t\treturn event.name=='lose'&&event.type=='discard'&&event.cards2.filter(function(card){\n\t\t\t\t\t\t\treturn get.name(card,event.hs.contains(card)?player:false)=='sha';\n\t\t\t\t\t\t}).length>0;\n\t\t\t\t\t};\n\t\t\t\t\tif(event.name=='gain'&&event.player==player) return false;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.cards2&&evt.cards2.length>0;\n\t\t\t\t},audio: \"2\",audioname: [\"gz_dengai\"],trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.judge(function(card){\n\t\t\t\t\t\tif(get.suit(card)=='heart') return -1;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\tif(get.mode()!='guozhan'){\n\t\t\t\t\t\tnext.callback=lib.skill.tuntian.callback;\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool||get.position(result.card)!='d'){\n\t\t\t\t\t\t//game.cardsDiscard(card);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.card=result.card;\n\t\t\t\t\tevent.node=result.node;\n\t\t\t\t\tplayer.chooseBool('是否将'+get.translation(event.card)+'作为【田】置于武将牌上？').ai=function(){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!result.bool&&!event.directbool){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t};\n\t\t\t\t\tplayer.storage.tuntian.push(event.card);\n\t\t\t\t\tgame.cardsGotoSpecial(card);\n\t\t\t\t\tevent.node.moveDelete(player);\n\t\t\t\t\tgame.broadcast(function(cardid,player){\n\t\t\t\t\t\tvar node=lib.cardOL[cardid];\n\t\t\t\t\t\tif(node){\n\t\t\t\t\t\t\tnode.moveDelete(player);\n\t\t\t\t\t\t}\n\t\t\t\t\t},event.node.cardid,player);\n\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([event.node]));\n\t\t\t\t\tplayer.markSkill('tuntian');\n\t\t\t\t\tgame.addVideo('storage',player,['tuntian',get.cardsInfo(player.storage.tuntian),'cards']);\n\t\t\t\t},callback: function (){\n\t\t\t\t\tif(!event.judgeResult.bool){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.tuntian.push(event.card);\n\t\t\t\t\tgame.cardsGotoSpecial(card);\n\t\t\t\t\tevent.node=event.judgeResult.node;\n\t\t\t\t\tevent.node.moveDelete(player);\n\t\t\t\t\tgame.broadcast(function(cardid,player){\n\t\t\t\t\t\tvar node=lib.cardOL[cardid];\n\t\t\t\t\t\tif(node){\n\t\t\t\t\t\t\tnode.moveDelete(player);\n\t\t\t\t\t\t}\n\t\t\t\t\t},event.node.cardid,player);\n\t\t\t\t\tgame.addVideo('gain2',player,get.cardsInfo([event.node]));\n\t\t\t\t\tplayer.markSkill('tuntian');\n\t\t\t\t\tgame.addVideo('storage',player,['tuntian',get.cardsInfo(player.storage.tuntian),'cards']);\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.tuntian) player.storage.tuntian=[];\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t\tplayer.storage.tuntian.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"tuntian_dist\",locked: \"false\",subSkill: {dist: {locked: \"false\",mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\t\t\tif(from.storage.tuntian){\n\t\t\t\t\t\t\t\t\tvar num=distance-from.storage.tuntian.length;\n\t\t\t\t\t\t\t\t\tif(_status.event.skill=='jixi_backup'||_status.event.skill=='gzjixi_backup') num++;\n\t\t\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(!target.hasFriend()&&!player.hasUnknown()) return;\n\t\t\t\t\t\t\tif(_status.currentPhase==target) return;\n\t\t\t\t\t\t\tif(card.name!='shuiyanqijunx'&&get.tag(card,'loseCard')&&target.countCards('he')){\n\t\t\t\t\t\t\t\tif(target.hasSkill('ziliang')) return 0.7;\n\t\t\t\t\t\t\t\treturn [0.5,Math.max(2,target.countCards('h'))];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.isUnderControl(true,player)){\n\t\t\t\t\t\t\t\tif((get.tag(card,'respondSha')&&target.countCards('h','sha'))||\n\t\t\t\t\t\t\t\t\t(get.tag(card,'respondShan')&&target.countCards('h','shan'))){\n\t\t\t\t\t\t\t\t\tif(target.hasSkill('ziliang')) return 0.7;\n\t\t\t\t\t\t\t\t\treturn [0.5,1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.tag(card,'respondSha')||get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0&&card.name=='juedou') return;\n\t\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.hasSkillTag('maixie')) return;\n\t\t\t\t\t\t\t\tif(target.countCards('h')==0) return 2;\n\t\t\t\t\t\t\t\tif(target.hasSkill('ziliang')) return 0.7;\n\t\t\t\t\t\t\t\tif(get.mode()=='guozhan') return 0.5;\n\t\t\t\t\t\t\t\treturn [0.5,Math.max(target.countCards('h')/4,target.countCards('h','sha')+target.countCards('h','shan'))];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(target.countCards('h')==0) return 2;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},nodiscard: \"true\",nolose: \"true\",},}","info":"当你于回合外失去牌后，或于回合内因弃置而失去【杀】后，你可以进行判定。若判定结果不为♥，则你将此牌置于你的武将牌上，称之为【田】。锁定技，你计算与其他角色的距离时-X（X为你武将牌上【田】的数目）"},"olzaoxian":{"name":"凿险","script":"{inherit: \"zaoxian\",content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('jixi');\n\t\t\t\t\tplayer.storage.olzaoxian=true;\n\t\t\t\t\tplayer.awakenSkill('olzaoxian');\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"thunder\",audio: \"2\",audioname: [\"re_dengai\"],unique: \"true\",juexingji: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.tuntian) return player.storage.tuntian.length>=3&&!player.storage.zaoxian;\n\t\t\t\t},derivation: \"jixi\",}","info":"觉醒技，准备阶段，若你武将牌上【田】的数量达到3张或更多，则你减1点体力上限，并获得技能〖急袭〗。你于当前回合结束后进行一个额外的回合。"},"reqiaomeng":{"name":"趫猛","script":"{audio: \"qiaomeng\",trigger: {source: \"damageSource\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player.countDiscardableCards(player,'hej');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.discardPlayerCard(get.prompt('reqiaomeng',trigger.player),'hej',trigger.player).set('logSkill',['reqiaomeng',trigger.player]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tif(get.position(card)=='d'){\n\t\t\t\t\t\t\tif(get.subtype(card)=='equip3'||get.subtype(card)=='equip4'){\n\t\t\t\t\t\t\t\tplayer.gain(card,player,'gain2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用【杀】对一名角色造成伤害后，你可以弃置该角色区域内的一张牌。若此牌是坐骑牌，你于此牌置入弃牌堆时获得之。"},"reyicong":{"name":"义从","script":"{trigger: {player: [\"changeHp\"],},audio: \"2\",audioname: {gongsunzan: \"yicong\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.sgn(player.hp-2.5)!=get.sgn(player.hp-2.5-event.num);\n\t\t\t\t},content: function (){},mod: {globalFrom: function (from,to,current){\n\t\t\t\t\t\treturn current-1;\n\t\t\t\t\t},globalTo: function (from,to,current){\n\t\t\t\t\t\tif(to.hp<=2) return current+1;\n\t\t\t\t\t},},ai: {threaten: \"0.8\",},}","info":"锁定技，你计算与其他角色的距离时-1。若你的体力值不大于2，则其他角色计算与你的距离时+1。"},"rejunxing":{"name":"峻刑","script":"{enable: \"phaseUse\",audio: \"2\",usable: \"1\",filterCard: \"true\",selectCard: [1,null],filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length) return -1;\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.chooseToDiscard(cards.length,'弃置'+get.cnNumber(cards.length)+'张手牌并失去1点体力，或点取消将武将牌翻面并摸'+get.cnNumber(cards.length)+'张牌').set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.isTurnedOver()) return -1;\n\t\t\t\t\t\treturn (player.hp*player.hp)-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttarget.turnOver();\n\t\t\t\t\t\ttarget.draw(cards.length);\n\t\t\t\t\t}\n\t\t\t\t\telse target.loseHp();\n\t\t\t\t},ai: {order: \"2\",expose: \"0.3\",threaten: \"1.8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('noturn')) return 0;\n\t\t\t\t\t\t\tif(target.isTurnedOver()) return 2;\n\t\t\t\t\t\t\treturn -1/(target.countCards('h')+1);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置任意张手牌并选择一名其他角色。该角色选择一项：1.弃置X张牌并失去1点体力。2.翻面并摸X张牌。（X为你弃置的牌数）"},"yuce":{"name":"御策","script":"{audio: \"2\",audioname: [\"re_manchong\"],trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCard(get.prompt2('yuce'));\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(get.type(card)=='basic') return 1;\n\t\t\t\t\t\treturn Math.abs(get.value(card))+1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yuce');\n\t\t\t\t\t\tplayer.showCards(result.cards);\n\t\t\t\t\t\tvar type=get.type(result.cards[0],'trick');\n\t\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\t\ttrigger.source.chooseToDiscard('弃置一张不为'+get.translation(type)+'牌的牌或令'+get.translation(player)+'回复一点体力',function(card){\n\t\t\t\t\t\t\t\treturn get.type(card,'trick')!=_status.event.type;\n\t\t\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\t\t\tif(get.recoverEffect(_status.event.getParent().player,_status.event.player,_status.event.player)<0){\n\t\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}).set('type',type);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.recover=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.recover){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.bool){\n\t\t\t\t\t\t//player.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage'&&target.countCards('h'))){\n\t\t\t\t\t\t\t\treturn 0.8\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以展示一张手牌，并令伤害来源选择一项：弃置一张与此牌类型不同的手牌，或令你回复一点体力。"},"rejuece":{"name":"绝策","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.getHistory('lose').length>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('rejuece'),'对一名本回合失去过牌的其他角色造成1点伤害',function(card,player,target){\n\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t}).set('targets',game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.getHistory('lose').length>0;\n\t\t\t\t\t})).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('rejuece',target);\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以对一名本回合内失去过牌的角色造成1点伤害。"},"remieji":{"name":"灭计","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:['trick','delay'],color:'black'});\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black'&&get.type(card,'trick')=='trick';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t},discard: \"false\",delay: \"false\",loseTo: \"cardPile\",insert: \"true\",visible: \"true\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!target.countCards('he',function(card){\n\t\t\t\t\t\tif(get.type2(card)=='trick') return true;\n\t\t\t\t\t\treturn lib.filter.cardDiscardable(card,target,'remieji');\n\t\t\t\t\t})) event.finish();\n\t\t\t\t\telse target.chooseCard('he',true,function(card,player){\n\t\t\t\t\t\tif(get.type2(card)=='trick') return true;\n\t\t\t\t\t\treturn lib.filter.cardDiscardable(card,player,'remieji');\n\t\t\t\t\t}).set('prompt','选择交给'+get.translation(player)+'一张锦囊牌，或依次弃置两张非锦囊牌。');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.cards&&result.cards.length){\n\t\t\t\t\t\tif(get.type2(result.cards[0])=='trick'){\n\t\t\t\t\t\t\tplayer.gain(result.cards,target,'giveAuto');\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse target.discard(result.cards);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(target.countCards('he',function(card){\n\t\t\t\t\t\treturn get.type2(card)!='trick';\n\t\t\t\t\t})) target.chooseToDiscard('he',true,function(card){\n\t\t\t\t\t\treturn get.type2(card)!='trick';\n\t\t\t\t\t});\n\t\t\t\t},ai: {order: \"9\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以将一张黑色锦囊牌置于牌堆顶，然后令一名有牌的其他角色选择一项：交给你一张锦囊牌，或依次弃置两张非锦囊牌。"},"xinfencheng":{"name":"焚城","script":"{skillAnimation: \"epic\",animationColor: \"gray\",audio: \"2\",audioname: [\"re_liru\"],enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.xinfencheng;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},unique: \"true\",limited: \"true\",selectTarget: \"-1\",multitarget: \"true\",multiline: \"true\",mark: \"true\",line: \"fire\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.storage.xinfencheng=true;\n\t\t\t\t\tplayer.awakenSkill('xinfencheng');\n\t\t\t\t\tevent.num=1;\n\t\t\t\t\tevent.targets=targets.slice(0);\n\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar target=event.targets.shift();\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tvar res=get.damageEffect(target,player,target,'fire');\n\t\t\t\t\t\ttarget.chooseToDiscard('he','弃置至少'+get.cnNumber(event.num)+'张牌或受到2点火焰伤害',[num,Infinity]).set('ai',function(card){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>=_status.event.getParent().num) return -1;\n\t\t\t\t\t\t\tif(_status.event.player.hasSkillTag('nofire')) return -1;\n\t\t\t\t\t\t\tif(_status.event.res>=0) return 6-get.value(card);\n\t\t\t\t\t\t\tif(get.type(card)!='basic'){\n\t\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}).set('res',res);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tevent.target.damage(2,'fire');\n\t\t\t\t\t\tevent.num=1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.num=result.cards.length+1;\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(1);\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tvar num=0,eff=0,players=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player;\n\t\t\t\t\t\t\t}).sortBySeat(player);\n\t\t\t\t\t\t\tfor(var target of players){\n\t\t\t\t\t\t\t\tif(get.damageEffect(target,player,target,'fire')>=0){num=0;continue};\n\t\t\t\t\t\t\t\tvar shao=false;\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\tif(target.countCards('he',function(card){\n\t\t\t\t\t\t\t\t\tif(get.type(card)!='basic'){\n\t\t\t\t\t\t\t\t\t\treturn get.value(card)<10;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn get.value(card)<8;\n\t\t\t\t\t\t\t\t})<num) shao=true;\n\t\t\t\t\t\t\t\tif(shao){\n\t\t\t\t\t\t\t\t\teff-=4*(get.realAttitude||get.attitude)(player,target);\n\t\t\t\t\t\t\t\t\tnum=0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse eff-=num*(get.realAttitude||get.attitude)(player,target)/4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(eff<4) return 0;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},},init: function (player){\n\t\t\t\t\tplayer.storage.xinfencheng=false;\n\t\t\t\t},intro: {content: \"limited\",},}","info":"限定技。出牌阶段，你可以令所有其他角色各选择一项：弃置至少X张牌(X为该角色的上家以此法弃置牌的数量+1)；或受到你对其造成的2点火焰伤害。"},"zhiyan":{"name":"直言","script":"{audio: \"2\",audioname: [\"gexuan\",\"re_yufan\"],trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('zhiyan'),'令一名角色摸一张牌并展示之。若为装备牌，则其回复1点体力').set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhiyan',result.targets);\n\t\t\t\t\t\tevent.bool=false;\n\t\t\t\t\t\tevent.target.draw('visible');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar card=result[0];\n\t\t\t\t\tif(get.type(card)=='equip'){\n\t\t\t\t\t\tif(!event.target.isDisabled(get.subtype(card))){\n\t\t\t\t\t\t\tevent.target.chooseUseTarget(card,true,'nopopup');\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.bool=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.bool) target.recover();\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.2\",},}","info":"结束阶段，你可以令一名角色摸一张牌并展示之，若为装备牌，其使用此牌并回复一点体力。"},"rezongxuan":{"name":"纵玄","script":"{inherit: \"zongxuan\",group: \"rezongxuan_place\",audio: \"2\",trigger: {player: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\tif(get.position(event.cards2[i])=='d'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\tif(get.position(trigger.cards2[i],true)=='d'){\n\t\t\t\t\t\t\tcards.push(trigger.cards2[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCardButton(cards,[1,cards.length],'纵玄：将弃置的牌按任意顺序置于牌堆顶（先选择的在上）').set('ai',function(){\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result&&result.bool&&result.links&&result.links.length){\n\t\t\t\t\t\tvar cards=result.links.slice(0);\n\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(cards.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你的牌因弃置而进入弃牌堆后，你可以将其以任意顺序置于牌堆顶。出牌阶段限一次，你可以摸一张牌，然后将一张牌置于牌堆顶。"},"reanxu":{"name":"安恤","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.countPlayer()>2&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('he');\n\t\t\t\t\t});\n\t\t\t\t},selectTarget: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\tif(!ui.selected.targets.length) return target.countCards('he')>0;\n\t\t\t\t\treturn target!=ui.selected.targets[0]&&ui.selected.targets[0].countGainableCards(target,'he')>0;\n\t\t\t\t},multitarget: \"true\",targetprompt: [\"被拿牌\",\"得到牌\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttargets[1].gainPlayerCard(targets[0],'he',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(targets[0].getHistory('lose',function(evt){\n\t\t\t\t\t\treturn evt.getParent(3)==event&&!evt.es.length;\n\t\t\t\t\t}).length) player.draw();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(targets[0].isIn()&&targets[1].isIn()&&\n\t\t\t\t\t\ttargets[0].countCards('h')!=targets[1].countCards('h')){\n\t\t\t\t\t\tevent.target=targets[targets[0].countCards('h')>targets[1].countCards('h')?1:0];\n\t\t\t\t\t\tplayer.chooseBool('是否令'+get.translation(event.target)+'摸一张牌？').set('ai',function(){\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\t\treturn get.attitude(evt.player,evt.target)>0;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool) target.draw();\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"2\",order: \"9\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length) return 0.01;\n\t\t\t\t\t\t\treturn target.countCards('e')?0:0.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\t\t\tplayer=target;\n\t\t\t\t\t\t\t\ttarget=ui.selected.targets[0];\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>1){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn target.countCards('h')-player.countCards('h')>(target.countCards('e')?2:1)?2:1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)<=0) return (target.countCards('he',function(card){\n\t\t\t\t\t\t\t\t\treturn card.name=='tengjia'||get.value(card)>0;\n\t\t\t\t\t\t\t\t})>0)?-1.5:1.5;\n\t\t\t\t\t\t\t\treturn (target.countCards('he',function(card){\n\t\t\t\t\t\t\t\t\treturn card.name!='tengjia'&&get.value(card)<=0;\n\t\t\t\t\t\t\t\t})>0)?1.5:-1.5\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择两名其他角色，令其中一名角色获得另一名角色的一张牌。若以此法移动的牌不来自装备区，则你摸一张牌。然后你可以令二者中手牌数较少的一名角色摸一张牌。"},"zhuiyi":{"name":"追忆","script":"{audio: \"2\",audioname: [\"re_bulianshi\"],trigger: {player: \"die\",},direct: \"true\",skillAnimation: \"true\",animationColor: \"wood\",forceDie: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('zhuiyi'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&_status.event.sourcex!=target;\n\t\t\t\t\t}).set('forceDie',true).set('ai',function(target){\n\t\t\t\t\t\tvar num=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}).set('sourcex',trigger.source);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhuiyi',target);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\ttarget.draw(3);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.5\",},}","info":"当你死亡时，你可以令一名其他角色（杀死你的角色除外）摸三张牌，然后其回复1点体力。"},"reshenduan":{"name":"慎断","script":"{audio: \"2\",trigger: {player: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.type!='discard') return;\n\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\tif(get.color(event.cards2[i],player)=='black'&&['basic','equip'].contains(get.type(event.cards2[i],event.hs.contains(event.cards2[i])?event.player:false))&&\n\t\t\t\t\t\t\tget.position(event.cards2[i])=='d'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\tif(get.color(trigger.cards2[i],player)=='black'&&['basic','equip'].contains(get.type(trigger.cards2[i],trigger.hs.contains(trigger.cards2[i])?trigger.player:false))&&\n\t\t\t\t\t\t\tget.position(trigger.cards2[i])=='d'){\n\t\t\t\t\t\t\tcards.push(trigger.cards2[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!cards.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tplayer.chooseTarget(get.prompt('shenduan'),'将'+get.translation(event.cards)+(event.cards.length>1?'中的一张牌':'')+'当做【兵粮寸断】对一名其他角色使用',function(card,player,target){\n\t\t\t\t\t\t\tvar cs=_status.event.cards;\n\t\t\t\t\t\t\tfor(var i=0;i<cs.length;i++){\n\t\t\t\t\t\t\t\tif(player.canUse({name:'bingliang',cards:[cs[i]]},target,false)) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.effect(target,{name:'bingliang'},player,player);\n\t\t\t\t\t\t}).set('cards',cards);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tevent.current=result.targets[0];\n\t\t\t\t\t\tif(event.cards.length==1){\n\t\t\t\t\t\t\tevent.directCard=event.cards[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdelete event.directCard;\n\t\t\t\t\t\t\tplayer.chooseCardButton('选择一张牌当作兵断寸断使用',event.cards,true).set('filterButton',function(button){\n\t\t\t\t\t\t\t\treturn player.canUse({name:'bingliang',cards:[button.link]},_status.event.target,false);\n\t\t\t\t\t\t\t}).set('target',event.current);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar card;\n\t\t\t\t\tif(event.directCard){\n\t\t\t\t\t\tcard=event.directCard;\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.links&&result.links.length&&\n\t\t\t\t\t\tevent.cards.contains(result.links[0])){\n\t\t\t\t\t\tcard=result.links[0]\n\t\t\t\t\t}\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tevent.cards.remove(card);\n\t\t\t\t\t\tplayer.line(event.current);\n\t\t\t\t\t\tplayer.useCard({name:'bingliang'},event.current,[card],'reshenduan').animate=false;\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你的黑色基本牌或装备牌因弃置而进入弃牌堆后，你可以将其当做【兵粮寸断】使用（无距离限制）。"},"reyonglve":{"name":"勇略","script":"{audio: \"2\",trigger: {global: \"phaseJudgeBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.countCards('j')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar att=get.attitude(player,trigger.player);\n\t\t\t\t\tvar nh=trigger.player.countCards('h');\n\t\t\t\t\tvar eff=get.effect(trigger.player,{name:'sha',isCard:true},player,player);\n\t\t\t\t\tif(player.inRange(trigger.player)||!player.canUse({name:'sha',isCard:true},trigger.player,false)) eff=0;\n\t\t\t\t\tplayer.discardPlayerCard(get.prompt('yonglve',trigger.player),trigger.player,'j').set('ai',function(button){\n\t\t\t\t\t\tvar name=button.link.viewAs||button.link.name;\n\t\t\t\t\t\tvar att=_status.event.att;\n\t\t\t\t\t\tvar nh=_status.event.nh;\n\t\t\t\t\t\tvar eff=_status.event.eff;\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tif(att>0&&eff>=0) return 1;\n\t\t\t\t\t\tif(att>=0&&eff>0) return 1;\n\t\t\t\t\t\tif(att>0&&(trigger.player.hp>=3||trigger.player.getEquip('bagua')||trigger.player.countCards('h','shan'))){\n\t\t\t\t\t\t\tif(name=='lebu'&&nh>trigger.player.hp) return 1;\n\t\t\t\t\t\t\tif(name=='bingliang'&&nh<trigger.player.hp) return 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('att',att).set('nh',nh).set('eff',eff).set('logSkill',['reyonglve',trigger.player]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!player.inRange(trigger.player)&&player.canUse({name:'sha',isCard:true},trigger.player,false)){\n\t\t\t\t\t\t\tplayer.useCard({name:'sha',isCard:true},trigger.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"其他角色的判定阶段开始时，你可以弃置其判定区里的一张牌。然后若该角色在你攻击范围内，你摸一张牌。若其在你攻击范围外，视为你对其使用一张【杀】。"},"reduodao":{"name":"夺刀","script":"{trigger: {target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&(get.color(event.card)=='red'?event.player.getEquip(1):player.countCards('he')>0);\n\t\t\t\t},direct: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar prompt='弃置一张牌'\n\t\t\t\t\tif(trigger.player.getEquip(1)) prompt+=('，然后获得'+get.translation(trigger.player)+'装备区中的'+get.translation(trigger.player.getEquip(1)));\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt('reduodao',trigger.player),prompt);\n\t\t\t\t\tnext.logSkill=['reduodao',trigger.player];\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(!_status.event.getTrigger().player.getEquip(1)) return 0;\n\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.getTrigger().player)*get.value(_status.event.getTrigger().player.getEquip(1))<=0){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&trigger.player.getEquip(1)){\n\t\t\t\t\t\tif(!result.cards||!result.cards.length) player.logSkill('reduodao',trigger.player);\n\t\t\t\t\t\tplayer.gain(trigger.player.getEquip(1),trigger.player,'give','bySelf');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你成为【杀】的目标后，你可以弃置一张牌。然后你获得此【杀】使用者装备区里的武器牌。"},"reanjian":{"name":"暗箭","script":"{trigger: {player: \"useCardToPlayered\",},forced: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&!event.target.inRange(player);\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\ttrigger.getParent().reanjian_buffed=true;\n\t\t\t\t\tvar map=trigger.customArgs;\n\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\tif(!map[id].extraDamage) map[id].extraDamage=0;\n\t\t\t\t\tmap[id].extraDamage++;\n\t\t\t\t\ttrigger.target.addTempSkill('reanjian2');\n\t\t\t\t\ttrigger.target.addTempSkill('reanjian4');\n\t\t\t\t\ttrigger.target.storage.reanjian2.add(trigger.card);\n\t\t\t\t},ai: {unequip_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg&&arg.name=='sha'&&arg.target&&!arg.target.inRange(player)) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技，当你使用【杀】指定目标后，若你不在其攻击范围内，则此杀伤害+1且无视其防具。若其因执行此【杀】的效果受到伤害而进入濒死状态，则其不能使用【桃】直到此濒死事件结算结束。"},"zhenlie":{"name":"贞烈","script":"{audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.card&&(event.card.name=='sha'||get.type(event.card)=='trick');\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tif(event.getParent().excluded.contains(player)) return false;\n\t\t\t\t\tif(get.attitude(player,event.player)>0){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif(get.tag(event.card,'respondSha')){\n\t\t\t\t\t\tif(player.countCards('h',{name:'sha'})==0){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(get.tag(event.card,'respondShan')){\n\t\t\t\t\t\tif(player.countCards('h',{name:'shan'})==0){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(get.tag(event.card,'damage')){\n\t\t\t\t\t\tif(event.card.name=='shuiyanqijunx') return player.countCards('e')<2;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t//if(player.countCards('h')<2) return true;\n\t\t\t\t\t}\n\t\t\t\t\telse if((event.card.name=='shunshou'||(event.card.name=='zhujinqiyuan'&&(event.card.yingbian||get.distance(event.player,player)<0)))&&player.hp>2){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},trigger: {target: \"useCardToTargeted\",},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(trigger.player.countCards('he')){\n\t\t\t\t\t\tplayer.discardPlayerCard(trigger.player,'he',true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"当你成为其他角色使用【杀】或普通锦囊牌的目标后，你可以失去一点体力并令此牌对你无效，然后弃置对方一张牌。"},"miji":{"name":"秘计","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.num=player.getDamagedHp();\n\t\t\t\t\tplayer.draw(event.num);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar check=player.countCards('h')-event.num;\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tselectCard:event.num,\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player.maxHp-player.hp==1&&card.name=='du') return 30;\n\t\t\t\t\t\t\tvar check=_status.event.check;\n\t\t\t\t\t\t\tif(check<1) return 0;\n\t\t\t\t\t\t\tif(player.hp>1&&check<2) return 0;\n\t\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(ui.selected.cards.length==1&&ui.selected.cards[0].name=='du') return 1-att;\n\t\t\t\t\t\t\treturn att-2;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:'将'+get.cnNumber(event.num)+'张手牌交给一名其他角色',\n\t\t\t\t\t}).set('check',check);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets[0].gain(result.cards,event.player,'giveAuto');\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 3;\n\t\t\t\t\t\tif(target.hp==2) return 1.5;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'recover')&&player.hp>=player.maxHp-1) return [0,0];\n\t\t\t\t\t\t},},},}","info":"结束阶段，若你已受伤，则可以摸X张牌，然后可以将等量的牌交给一名其他角色（X为你已损失的体力值）。"},"mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-1。"},"qianxi":{"name":"潜袭","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.chooseToDiscard('he',true);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.color=get.color(result.cards[0],result.cards[0].original=='h'?player:false);\n\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&get.distance(player,target)<=1;\n\t\t\t\t\t},true).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.targets.length){\n\t\t\t\t\t\tresult.targets[0].storage.qianxi2=event.color;\n\t\t\t\t\t\tresult.targets[0].addTempSkill('qianxi2');\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tgame.addVideo('storage',result.targets[0],['qianxi2',event.color]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!arg.target.hasSkill('qianxi2')) return false;\n\t\t\t\t\t\tif(arg.card.name=='sha') return arg.target.storage.qianxi2=='red'&&(!arg.target.getEquip('bagua')||player.hasSkillTag('unequip',false,{\n\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\n\t\t\t\t\t\t\ttarget:arg.target,\n\t\t\t\t\t\t\tcard:arg.card\n\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\n\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\n\t\t\t\t\t\t\ttarget:arg.target,\n\t\t\t\t\t\t\tcard:arg.card\n\t\t\t\t\t\t}));\n\t\t\t\t\t\treturn arg.target.storage.qianxi2=='black';\n\t\t\t\t\t},},}","info":"准备阶段，你可以摸一张牌，并弃置一张牌，然后令一名距离为1的角色不能使用或打出与你弃置的牌颜色相同的手牌直到回合结束。"},"fuhun":{"name":"父魂","script":"{enable: [\"chooseToUse\",\"chooseToRespond\"],filterCard: \"true\",selectCard: \"2\",position: \"h\",audio: \"2\",derivation: [\"new_rewusheng\",\"olpaoxiao\"],viewAs: {name: \"sha\",},prompt: \"将两张手牌当杀使用或打出\",check: function (card){\n\t\t\t\t\tif(_status.event.player.hasSkill('new_rewusheng')&&get.color(card)=='red') return 0;\n\t\t\t\t\tif(_status.event.name=='chooseToRespond'){\n\t\t\t\t\t\tif(card.name=='sha') return 0;\n\t\t\t\t\t\treturn 6-get.useful(card);\n\t\t\t\t\t}\n\t\t\t\t\tif(_status.event.player.countCards('h')<4) return 6-get.useful(card);\n\t\t\t\t\treturn 7-get.useful(card);\n\t\t\t\t},ai: {respondSha: \"true\",order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkill('new_rewusheng')&&player.hasSkill('olpaoxiao')){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.countCards('h')<4){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 4;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},group: \"fuhun2\",}","info":"你可以将两张手牌当做【杀】使用或打出；出牌阶段，若你以此法使用的【杀】造成了伤害，你获得技能〖武圣〗和〖咆哮〗直到回合结束。"},"decadepojun":{"name":"破军","script":"{shaRelated: \"true\",audio: \"2\",trigger: {player: \"useCardToPlayered\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.target.hp>0&&event.target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.choosePlayerCard(trigger.target,'he',[1,Math.min(trigger.target.hp,trigger.target.countCards('he'))],get.prompt('decadepojun',trigger.target));\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\tvar val=get.value(button.link);\n\t\t\t\t\t\tif(button.link==_status.event.target.getEquip(2)) return 2*(val+3);\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('goon',get.attitude(player,trigger.target)<=0);\n\t\t\t\t\tnext.set('forceAuto',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.cards=result.cards;\n\t\t\t\t\t\tvar target=trigger.target;\n\t\t\t\t\t\tplayer.logSkill('decadepojun',trigger.target);\n\t\t\t\t\t\ttarget.addSkill('decadepojun2');\n\t\t\t\t\t\ttarget.markAuto('decadepojun2',result.cards);\n\t\t\t\t\t\ttarget.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tgame.log(target,'失去了'+get.cnNumber(result.cards.length)+'张牌');;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar discard=false,draw=false;\n\t\t\t\t\tfor(var i of cards){\n\t\t\t\t\t\tvar type=get.type2(i);\n\t\t\t\t\t\tif(type=='equip') discard=true;\n\t\t\t\t\t\tif(type=='trick') draw=true;\n\t\t\t\t\t}\n\t\t\t\t\tif(discard){\n\t\t\t\t\t\tevent.equip=true;\n\t\t\t\t\t\tplayer.chooseButton(['选择一张牌置入弃牌堆',cards.filter(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t\t})],true).set('ai',function(button){\n\t\t\t\t\t\t\treturn get.value(button.link,_status.event.getTrigger().target);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif(draw)\tevent.draw=true;\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.equip&&result.links&&result.links.length){\n\t\t\t\t\t\ttrigger.target.unmarkAuto('decadepojun2',result.links);\n\t\t\t\t\t\ttrigger.target.$throw(result.links,1000);\n\t\t\t\t\t\tgame.log(player,'将',result.links,'置入了弃牌堆');\n\t\t\t\t\t\tgame.cardsDiscard(result.links);\n\t\t\t\t\t\tif(!event.draw) game.delayx();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.draw) player.draw();\n\t\t\t\t},ai: {unequip_ai: \"true\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(get.attitude(player,arg.target)>0) return false;\n\t\t\t\t\t\tif(tag=='directHit_ai') return arg.target.hp>=Math.max(1,arg.target.countCards('h')-1);\n\t\t\t\t\t\tif(arg&&arg.name=='sha'&&arg.target.getEquip(2)) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"当你使用【杀】指定目标后，你可以将其的至多X张牌置于其武将牌上（X为其体力值）。若这些牌中：有装备牌，你将这些装备牌中的一张置于弃牌堆；有锦囊牌，你摸一张牌。其于回合结束时获得其武将牌上的这些牌。"},"tianyi":{"name":"天义","script":"{audio: \"2\",audioname: [\"re_taishici\"],enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('tianyi2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addTempSkill('tianyi3');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (name,player){\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tif(player.countCards('h','sha')==0){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(cards[i].name!='sha'&&cards[i].number>11&&get.value(cards[i])<7){\n\t\t\t\t\t\t\t\treturn 9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.order({name:'sha'})-1;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('h','sha')>0) return 0.6;\n\t\t\t\t\t\t\tvar num=player.countCards('h');\n\t\t\t\t\t\t\tif(num>player.hp) return 0;\n\t\t\t\t\t\t\tif(num==1) return -2;\n\t\t\t\t\t\t\tif(num==2) return -1;\n\t\t\t\t\t\t\treturn -0.7;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\tif(num==1) return -1;\n\t\t\t\t\t\t\tif(num==2) return -0.7;\n\t\t\t\t\t\t\treturn -0.5\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"出牌阶段限一次，你可以和一名其他角色拼点。若你赢，你获得以下技能效果直到回合结束：你使用【杀】没有距离限制；可额外使用一张【杀】；使用【杀】时可额外指定一个目标。若你没赢，你不能使用【杀】直到回合结束。"},"hanzhan":{"name":"酣战","script":"{audio: \"2\",trigger: {global: \"chooseToCompareBegin\",},filter: function (event,player){\n\t\t\t\t\tif(player==event.player) return true;\n\t\t\t\t\tif(event.targets) return event.targets.contains(player);\n\t\t\t\t\treturn player==event.target;\n\t\t\t\t},logTarget: function (event,player){\n\t\t\t\t\tif(player!=event.player) return event.player;\n\t\t\t\t\treturn event.targets||event.target;\n\t\t\t\t},prompt2: function (event,player){\n\t\t\t\t\treturn '令其改为使用随机的手牌进行拼点'\n\t\t\t\t},check: function (trigger,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar targets=player==trigger.player?(trigger.targets?trigger.targets.slice(0):[trigger.target]):[trigger.player];\n\t\t\t\t\twhile(targets.length){\n\t\t\t\t\t\tvar target=targets.shift();\n\t\t\t\t\t\tif(target.getCards('h').length>1) num-=get.attitude(player,target);\n\t\t\t\t\t}\n\t\t\t\t\treturn num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar targets=player==trigger.player?(trigger.targets?trigger.targets.slice(0):[trigger.target]):[trigger.player];\n\t\t\t\t\tif(!trigger.fixedResult) trigger.fixedResult={};\n\t\t\t\t\twhile(targets.length){\n\t\t\t\t\t\tvar target=targets.shift();\n\t\t\t\t\t\tvar hs=target.getCards('h');\n\t\t\t\t\t\tif(hs.length) trigger.fixedResult[target.playerid]=hs.randomGet();\n\t\t\t\t\t}\n\t\t\t\t},group: \"hanzhan_gain\",subfrequent: [\"gain\"],}","info":"当你发起拼点时，或成为拼点的目标时，你可以令对方选择拼点牌的方式改为随机选择一张手牌。当你拼点结束后，你可以获得双方拼点牌中点数最大的【杀】。"},"resanyao":{"name":"散谣","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",selectCard: function (){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\treturn [Math.max(1,ui.selected.targets.length),game.countPlayer(function(target){\n\t\t\t\t\t\treturn target!=player&&!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.hp>target.hp\n\t\t\t\t\t\t});\n\t\t\t\t\t})];\n\t\t\t\t},selectTarget: function (){\n\t\t\t\t\treturn ui.selected.cards.length;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.hp>target.hp\n\t\t\t\t\t});\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(game.countPlayer(function(target){\n\t\t\t\t\t\treturn target!=player&&!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.hp>target.hp\n\t\t\t\t\t\t})&&get.effect(target,'sanyao',player,player)>0;\n\t\t\t\t\t})<=ui.selected.cards.length) return 0;\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},position: \"he\",filterCard: \"true\",content: function (){\n\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tvar disbool=false;\n\t\t\t\t\t\t\tif(player.hasSkill('rezhiman')){\n\t\t\t\t\t\t\t\tif(target.countCards('j')&&get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('he',function(card){\n\t\t\t\t\t\t\t\t\treturn card.name=='tengjia'||get.value(card)>0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\tdisbool=true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar damage=get.damageEffect(target,player);\n\t\t\t\t\t\t\tif(disbool&&get.attitude(player,target)<0) return Math.min(-1,damage);\n\t\t\t\t\t\t\treturn damage;\n\t\t\t\t\t\t},},order: \"7\",},}","info":"出牌阶段限一次，你可以弃置任意张牌并指定等量除你外体力值最多(或之一)的其他角色。你对这些角色依次造成1点伤害。"},"rezhiman":{"name":"制蛮","script":"{audio: \"zhiman\",audioname: [\"guansuo\",\"re_masu\"],trigger: {source: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\treturn player!=event.player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.damageEffect(event.player,player,player)<0) return true;\n\t\t\t\t\tvar att=get.attitude(player,event.player);\n\t\t\t\t\tif(att>0&&event.player.countCards('j')) return true;\n\t\t\t\t\tif(event.num>1){\n\t\t\t\t\t\tif(att<0) return false;\n\t\t\t\t\t\tif(att>0) return true;\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=event.player.getGainableCards(player,'he');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.equipValue(cards[i])>=6) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\tif(trigger.player.countGainableCards(player,'hej')){\n\t\t\t\t\t\tplayer.gainPlayerCard(trigger.player,'hej',true);\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},}","info":"当你对一名其他角色造成伤害时，你可以防止此伤害，然后获得其区域内的一张牌。"},"rechanhui":{"name":"谮毁","script":"{audio: \"2\",trigger: {player: \"useCardToPlayer\",},filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player||player.hasSkill('rechanhui2')) return false;\n\t\t\t\t\tif(event.targets.length>1) return false;\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tif(card.name=='sha'||get.type(card)=='trick'&&get.color(card)=='black') return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('rechanhui'),function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\tvar trigger=_status.event;\n\t\t\t\t\t\treturn player.canUse(trigger.card,target,false)&&trigger.targets.contains(target)==false;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player)+0.01;\n\t\t\t\t\t}).set('targets',trigger.targets).set('card',trigger.card);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t//game.delay(0,200);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.logSkill('rechanhui',event.target);\n\t\t\t\t\tevent.target.chooseCard('交给'+get.translation(player)+'一张手牌，或成为'+\n\t\t\t\t\tget.translation(trigger.card)+'的额外目标').set('ai',function(card){\n\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,event.target,'giveAuto');\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.getParent().player=event.target;\n\t\t\t\t\t\tgame.log(event.target,'成为了',trigger.card,'的使用者');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.log(event.target,'成为了',trigger.card,'的额外目标');\n\t\t\t\t\t\ttrigger.getParent().targets.push(event.target);\n\t\t\t\t\t\tplayer.addTempSkill('rechanhui2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段，当你使用【杀】或黑色普通锦囊牌指定唯一目标时，你可令可以成为此牌目标（无距离限制）的另一名其他角色选择一项：交给你一张牌并成为此牌的使用者；或成为此牌的额外目标且你本回合内不能再次发动〖谮毁〗。"},"rejiaojin":{"name":"骄矜","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\treturn (event.card.name=='sha'||get.type(event.card)=='trick')&&event.player&&event.player.sex=='male'&&player.countCards('he',function(card){\n\t\t\t\t\t\treturn _status.connectMode||get.type(card)=='equip';\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he','骄矜：是否弃置一张装备牌令'+get.translation(trigger.card)+'对你无效？',function(card,player){\n\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.goon2){\n\t\t\t\t\t\t\treturn 3+_status.event.val-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('val',get.value(trigger.cards.filterInD()));\n\t\t\t\t\tnext.set('goon2',get.effect(player,trigger.card,trigger.player,player)<0)\n\t\t\t\t\tnext.logSkill='rejiaojin';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=trigger.cards.filterInD();\n\t\t\t\t\t\tif(cards.length) player.gain(cards,'gain2','log');\n\t\t\t\t\t\ttrigger.excluded.push(player);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你成为男性角色使用的【杀】或普通锦囊牌的目标后，你可以弃置一张装备牌，令此牌对你无效并获得此牌对应的所有实体牌。"},"requanji":{"name":"权计","script":"{audio: \"2\",trigger: {player: [\"damageEnd\",\"phaseUseEnd\"],},frequent: \"true\",locked: \"false\",notemp: \"true\",init: function (player){\n\t\t\t\t\tif(!player.storage.quanji) player.storage.quanji=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.name=='phaseUse') return player.countCards('h')>player.hp;\n\t\t\t\t\treturn event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num||1;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(player.countCards('h')){\n\t\t\t\t\t\tplayer.chooseCard('将一张手牌置于武将牌上作为“权”',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.cards&&result.cards.length){\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.storage.quanji=player.storage.quanji.concat(result.cards);\n\t\t\t\t\t\tplayer.syncStorage('quanji');\n\t\t\t\t\t\tplayer.markSkill('quanji');\n\t\t\t\t\t\tgame.log(player,'将',result.cards,'置于武将牌上作为“权”');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(event.count>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('requanji')).set('frequentSkill','requanji');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('requanji');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.storage.quanji.length;\n\t\t\t\t\t},},ai: {maixie: \"true\",maixie_hp: \"true\",threaten: \"0.8\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [0.5,get.tag(card,'damage')*2];\n\t\t\t\t\t\t\t\tif(!target.hasSkill('paiyi')&&target.hp>1) return [0.5,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [0.5,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,get.tag(card,'damage')*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段结束时，若你的手牌数大于体力值，或当你受到1点伤害后，你可以摸一张牌，然后将一张手牌置于武将牌上，称为“权”；你的手牌上限+X（X为“权”的数量）。"},"zili":{"name":"自立","script":"{skillAnimation: \"true\",animationColor: \"thunder\",audio: \"2\",audioname: [\"re_zhonghui\"],unique: \"true\",juexingji: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('paiyi')&&player.storage.quanji&&player.storage.quanji.length>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseDrawRecover(2,true,function(event,player){\n\t\t\t\t\t\tif(player.hp==1&&player.isDamaged()) return 'recover_hp';\n\t\t\t\t\t\treturn 'draw_card';\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('paiyi');\n\t\t\t\t\tplayer.awakenSkill('zili');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若“权”的数量不小于3，你减1点体力上限，然后选择一项：1、回复1点体力；2、摸两张牌。然后你获得技能“排异”。"},"regongji":{"name":"弓骑","script":"{mod: {attackFrom: function (player){\n\t\t\t\t\t\tif(player.getEquip(3)||player.getEquip(4)||player.getEquip(6)) return -Infinity\n\t\t\t\t\t},},enable: \"phaseUse\",usable: \"1\",position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',function(card){\n\t\t\t\t\t\treturn lib.skill.regongji.filterCard(card,player);\n\t\t\t\t\t})>0;\n\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\treturn get.type(card,player)!='basic';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countDiscardableCards(player,'he')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 4.5-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) player.discardPlayerCard(target,'he',true);\n\t\t\t\t},ai: {order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\n\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\n\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\n\t\t\t\t\t\t\t\t\tif(target.hp==2) return 0.01;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\n\t\t\t\t\t\t\tvar noe2=(es.length==1&&es[0].name!='tengjia'&&get.value(es[0])<=0);\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\n\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\n\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {loseCard: \"1\",discard: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张非基本牌，然后弃置一名其他角色的一张牌。锁定技，当你的装备区内有坐骑牌时，你的攻击范围无限。"},"jiefan":{"name":"解烦","script":"{skillAnimation: \"true\",animationColor: \"wood\",audio: \"2\",audioname: [\"re_handang\"],unique: \"true\",limited: \"true\",mark: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.jiefan=false;\n\t\t\t\t},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.jiefan;\n\t\t\t\t},intro: {content: \"limited\",},filterTarget: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('jiefan');\n\t\t\t\t\tplayer.storage.jiefan=true;\n\t\t\t\t\tevent.players=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=target&&current.inRange(target);\n\t\t\t\t\t});\n\t\t\t\t\tevent.players.sortBySeat(target);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.players.length){\n\t\t\t\t\t\tevent.current=event.players.shift();\n\t\t\t\t\t\tevent.current.animate('target');\n\t\t\t\t\t\tplayer.line(event.current,'green');\n\t\t\t\t\t\tif(event.current.countCards('he')&&target.isAlive()){\n\t\t\t\t\t\t\tevent.current.chooseToDiscard({subtype:'equip1'},'he','弃置一张武器牌或让'+\n\t\t\t\t\t\t\tget.translation(target)+'摸一张牌').set('ai',function(card){\n\t\t\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.target)<0) return 7-get.value(card);\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}).set('target',target);\n\t\t\t\t\t\t\tevent.tempbool=false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.tempbool=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.tempbool||result.bool==false){\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(1);\n\t\t\t\t},ai: {order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hp>2){\n\t\t\t\t\t\t\t\tif(game.phaseNumber<game.players.length*2) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=0,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=target&&players[i].inRange(target)){\n\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以选择一名角色，令攻击范围内含有该角色的所有角色依次选择一项：1.弃置一张武器牌；2.令其摸一张牌。"},"rejieyue":{"name":"节钺","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt2('rejieyue'),\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:lib.filter.notMe,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(get.name(card)=='du') return 20;\n\t\t\t\t\t\t\tif(get.position(card)=='e'&&get.value(card)<=0) return 14;\n\t\t\t\t\t\t\tif(get.position(card)=='h'&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&get.attitude(player,current)>0&&current.getUseValue(card)>player.getUseValue(card)&&current.getUseValue(card)>player.getUseValue(card);\n\t\t\t\t\t\t\t})) return 12;\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&get.attitude(player,current)>0;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tif(card.name=='wuxie') return 11;\n\t\t\t\t\t\t\t\tif(card.name=='shan'&&player.countCards('h','shan')>1) return 9\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 6/Math.max(1,get.value(card));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(card.name=='du') return -6*att;\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tif(get.position(card)=='h'&&target.getUseValue(card)>player.getUseValue(card)) return 4*att;\n\t\t\t\t\t\t\t\tif(get.value(card,target)>get.value(card,player)) return 2*att;\n\t\t\t\t\t\t\t\treturn 1.2*att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -att*Math.min(4,target.countCards('he'))/4;\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('rejieyue',target);\n\t\t\t\t\t\ttarget.gain(result.cards,player,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tif(target.countCards('h')) num++;\n\t\t\t\t\tif(target.countCards('e')) num++;\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\tvar next=target.chooseCard('he',num,'选择保留每个区域的各一张牌，然后弃置其余的牌。或点取消，令'+get.translation(player)+'摸三张牌',function(card){\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.position(ui.selected.cards[i])==get.position(card)) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('complexCard',true);\n\t\t\t\t\t\tnext.set('goon',get.attitude(target,player)>=0);\n\t\t\t\t\t\tnext.set('maxNum',num);\n\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\tif(_status.event.goon) return -1;\n\t\t\t\t\t\t\tvar num=_status.event.maxNum;\n\t\t\t\t\t\t\tif(ui.selected.cards.length>=num-1){\n\t\t\t\t\t\t\t\tvar val=get.value(player.getCards('he',function(cardx){\n\t\t\t\t\t\t\t\t\treturn cardx!=card&&!ui.selected.cards.contains(cardx);\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tif(val>=14) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.value(card);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event._result={bool:false};\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(!result.bool) player.draw(3);\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar cards=target.getCards('he');\n\t\t\t\t\t\tcards.removeArray(result.cards);\n\t\t\t\t\t\tif(cards.length) target.discard(cards);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",expose: \"0.2\",},}","info":"结束阶段开始时，你可以将一张牌交给一名其他角色。然后其选择一项：令你摸三张牌：或其保留一张手牌和装备区的牌，然后弃置其余的牌。"},"new_jiangchi":{"name":"将驰","script":"{audio: \"2\",trigger: {player: \"phaseDrawEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=['弃牌','摸牌','取消'];\n\t\t\t\t\tif(!player.countCards('he')) list.remove('弃牌');\n\t\t\t\t\tplayer.chooseControl(list,function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(list.contains('弃牌')){\n\t\t\t\t\t\t\tif(player.countCards('h')>3&&player.countCards('h','sha')>1){\n\t\t\t\t\t\t\t\treturn '弃牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.countCards('h','sha')>2){\n\t\t\t\t\t\t\t\treturn '弃牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.countCards('h','sha')){\n\t\t\t\t\t\t\treturn '摸牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 'cancel2';\n\t\t\t\t\t}).set('prompt',get.prompt2('new_jiangchi'));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='弃牌'){\n\t\t\t\t\t\tplayer.chooseToDiscard(true,'he');\n\t\t\t\t\t\tplayer.addTempSkill('jiangchi2','phaseUseEnd');\n\t\t\t\t\t\tplayer.logSkill('new_jiangchi');\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.control=='摸牌'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.addTempSkill('new_jiangchi3','phaseEnd');\n\t\t\t\t\t\tplayer.logSkill('new_jiangchi');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段结束时，你可以选择一项：1、摸一张牌，若如此做，你本回合内不能使用或打出【杀】且【杀】不计入手牌上限。 2、弃置一张牌，若如此做，出牌阶段你使用【杀】无距离限制且你可以额外使用一张【杀】，直到回合结束。"},"decadelihuo":{"name":"疠火","script":"{trigger: {player: \"useCard1\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},audio: \"lihuo\",prompt2: function (event){\n\t\t\t\t\treturn '将'+get.translation(event.card)+'改为火属性';\n\t\t\t\t},audioname: [\"re_chengpu\"],check: function (event,player){\n\t\t\t\t\treturn event.baseDamage>1&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !event.targets.contains(current)&&player.canUse(event.card,current)\n\t\t\t\t\t\t&&get.attitude(player,current)<0&&!current.hasShan()\n\t\t\t\t\t\t&&get.effect(current,{name:'sha',nature:'fire'},player,player)>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.card.nature='fire';\n\t\t\t\t},group: [\"decadelihuo2\",\"decadelihuo3\"],ai: {fireAttack: \"true\",},}","info":"当你声明使用普【杀】时，你可以将此【杀】改为火【杀】。当你使用火【杀】选择目标时，可以选择一个额外目标。你使用的火【杀】结算完成后，若此【杀】的目标数大于1且你因此【杀】造成过伤害，则你失去1点体力。"},"decadechunlao":{"name":"醇醪","script":"{audio: \"chunlao\",audioname: [\"re_chengpu\"],enable: \"chooseToUse\",viewAs: {name: \"jiu\",isCard: \"true\",},viewAsFilter: function (player){\n\t\t\t\t\treturn !player.isLinked();\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.isLinked();\n\t\t\t\t},filterCard: function (){return false},selectCard: \"-1\",precontent: function (){\n\t\t\t\t\tplayer.logSkill('decadechunlao');\n\t\t\t\t\tplayer.link();\n\t\t\t\t\tdelete event.result.skill;\n\t\t\t\t},group: \"decadechunlao2\",ai: {jiuOther: \"true\",basic: {useful: function (card,i){\n\t\t\t\t\t\t\tif(_status.event.player.hp>1){\n\t\t\t\t\t\t\t\tif(i==0) return 4;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==0) return 7.3;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t},value: function (card,player,i){\n\t\t\t\t\t\t\tif(player.hp>1){\n\t\t\t\t\t\t\t\tif(i==0) return 5;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==0) return 7.3;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t},},order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.2;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target&&target.isDying()) return 2;\n\t\t\t\t\t\t\tif(target&&!target.isPhaseUsing()) return 0;\n\t\t\t\t\t\t\tif(lib.config.mode=='stone'&&!player.isMin()){\n\t\t\t\t\t\t\t\tif(player.getActCount()+1>=player.actcount) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar shas=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('h','zhuge'))){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshas.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.order(b)-get.order(a);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tvar card;\n\t\t\t\t\t\t\tif(shas.length){\n\t\t\t\t\t\t\t\tfor(var i=0;i<shas.length;i++){\n\t\t\t\t\t\t\t\t\tif(lib.filter.filterCard(shas[i],target)){\n\t\t\t\t\t\t\t\t\t\tcard=shas[i];break;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(player.hasSha()&&player.needsToDiscard()){\n\t\t\t\t\t\t\t\tif(player.countCards('h','hufu')!=1){\n\t\t\t\t\t\t\t\t\tcard={name:'sha'};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn (get.attitude(target,current)<0&&\n\t\t\t\t\t\t\t\t\t\ttarget.canUse(card,current,true,true)&&\n\t\t\t\t\t\t\t\t\t\t!current.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t\t})&&\n\t\t\t\t\t\t\t\t\t\tget.effect(current,card,target)>0);\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},tag: {save: \"1\",},},}","info":"你可以对其他角色使用【酒（使用方法②）】。当你需要使用【酒】时，若你的武将牌未横置，则你可以将武将牌横置，然后视为使用【酒】。当你受到或造成伤害后，若伤害值大于1且你的武将牌横置，则你可以重置武将牌。"},"xinyaoming":{"name":"邀名","script":"{audio: \"2\",trigger: {player: \"damageEnd\",source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\treturn player.storage.xinyaoming.length<3;\n\t\t\t\t},direct: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.xinyaoming=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xinyaoming'),function(card,player,target){\n\t\t\t\t\t\tvar s=player.storage.xinyaoming;\n\t\t\t\t\t\tvar pe=player.countCards('h');\n\t\t\t\t\t\tvar te=target.countCards('h');\n\t\t\t\t\t\tif(s.contains('大于')&&pe>te) return false;\n\t\t\t\t\t\tif((s.contains('等于')||target.countCards('he')==0)&&pe==te) return false;\n\t\t\t\t\t\tif(s.contains('小于')&&pe<te) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn -get.sgn(target.countCards('h')-player.countCards('h'))*get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('xinyaoming',target);\n\t\t\t\t\t\tvar ph=player.countCards('h');\n\t\t\t\t\t\tvar th=target.countCards('h');\n\t\t\t\t\t\tif(ph>th){\n\t\t\t\t\t\t\tplayer.storage.xinyaoming.push('大于');\n\t\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(ph==th){\n\t\t\t\t\t\t\tplayer.storage.xinyaoming.push('等于');\n\t\t\t\t\t\t\ttarget.chooseToDiscard('he','弃置一到两张牌，然后摸等量的牌',true,[1,2]).ai=lib.skill.zhiheng.check;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.storage.xinyaoming.push('小于');\n\t\t\t\t\t\t\tplayer.discardPlayerCard(target,'h',true);\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool) target.draw(result.cards.length);\n\t\t\t\t},group: \"xinyaoming_kanon\",subSkill: {kanon: {trigger: {global: \"phaseAfter\",},silent: \"true\",sub: \"true\",content: function (){lib.skill.xinyaoming.init(player)},forced: \"true\",popup: \"false\",},},}","info":"每回合每个选项限一次，当你造成或受到伤害后，你可以选择一项：1. 弃置手牌数大于你的一名角色的一张手牌；2. 令手牌数小于你的一名角色摸一张牌；3.令手牌数等于你的角色弃置至多两张牌，然后摸等量的牌。"},"xindangxian":{"name":"当先","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",audio: \"dangxian\",audioname: [\"guansuo\",\"xin_liaohua\",\"re_liaohua\"],content: function (){\n\t\t\t\t\tvar next=player.phaseUse();\n\t\t\t\t\tnext.xindangxian=true;\n\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\ttrigger.next.push(next);\n\t\t\t\t},group: \"xindangxian_rewrite\",subSkill: {rewrite: {trigger: {player: \"phaseUseBegin\",},forced: \"true\",popup: \"false\",filter: function (kagari){\n\t\t\t\t\t\t\treturn kagari.xindangxian==true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tif(player.storage.xinfuli){\n\t\t\t\t\t\t\t\tplayer.chooseBool('是否失去1点体力并获得一张【杀】？').ai=function(){\n\t\t\t\t\t\t\t\t\treturn player.hp>2&&!player.hasSha();\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse event._result={bool:true};\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\t\treturn card.name=='sha';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card) player.gain(card,'gain2');\n\t\t\t\t\t\t\t'step 3'\n\t\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，准备阶段，你执行一个额外的出牌阶段。此阶段开始时，你失去1点体力并从牌堆/弃牌堆中获得一张【杀】（若你已发动过〖伏枥〗，则可以不发动此效果）。"},"xinfuli":{"name":"伏枥","script":"{audio: \"2\",skillAnimation: \"true\",animationColor: \"soil\",unique: \"true\",limited: \"true\",enable: \"chooseToUse\",init: function (player){\n\t\t\t\t\tplayer.storage.xinfuli=false;\n\t\t\t\t},mark: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.type!='dying') return false;\n\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\tif(player.storage.xinfuli) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('xinfuli');\n\t\t\t\t\tevent.num=game.countGroup();\n\t\t\t\t\tplayer.recover(event.num-player.hp);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar num2=num-player.countCards('h');\n\t\t\t\t\tif(num2) player.draw(num2);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(num>2) player.turnOver();\n\t\t\t\t\tplayer.storage.xinfuli=true;\n\t\t\t\t},ai: {save: \"true\",skillTagFilter: function (player,arg,target){\n\t\t\t\t\t\treturn player==target;\n\t\t\t\t\t},result: {player: \"10\",},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.storage.xinfuli) return 0.9;\n\t\t\t\t\t},},intro: {content: \"limited\",},}","info":"限定技，当你处于濒死状态时，可以将体力回复至X点并将手牌摸至X张（X为场上势力数）。若X大于2，你翻面。"},"xinjingce":{"name":"精策","script":"{trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countUsed(null,true)>=player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},audio: \"2\",}","info":"结束阶段，若你本回合使用的牌数量大于或等于你的当前体力值，你可以摸两张牌。"},"xinbenxi":{"name":"奔袭","script":"{group: [\"xinbenxi_summer\",\"xinbenxi_damage\"],audio: \"2\",trigger: {player: \"useCard2\",},forced: \"true\",mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\tif(_status.currentPhase==from){\n\t\t\t\t\t\t\treturn distance-from.storage.xinbenxi;\n\t\t\t\t\t\t}\n\t\t\t\t\t},wuxieRespondable: function (card,player,target,current){\n\t\t\t\t\t\tif(player!=current&&player.storage.xinbenxi_directHit.contains(card)){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},init: function (player){\n\t\t\t\t\tplayer.storage.xinbenxi_directHit=[];\n\t\t\t\t\tplayer.storage.xinbenxi_damage=[];\n\t\t\t\t\tplayer.storage.xinbenxi_unequip=[];\n\t\t\t\t\tplayer.storage.xinbenxi=0;\n\t\t\t\t},filter: function (trigger,player){\n\t\t\t\t\treturn _status.currentPhase==player&&trigger.targets&&trigger.targets.length==1&&(get.name(trigger.card)=='sha'||get.type(trigger.card)=='trick')&&!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(player,current)>1;\n\t\t\t\t\t});\n\t\t\t\t},filterx: function (event,player){\n\t\t\t\t\tvar info=get.info(event.card);\n\t\t\t\t\tif(info.allowMultiple==false) return false;\n\t\t\t\t\tif(event.targets&&!info.multitarget){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(event.card,player,current)&&!event.targets.contains(current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar func=function(card,id,bool){\n\t\t\t\t\t\tvar list=[\n\t\t\t\t\t\t\t'为XXX多指定一个目标',\n\t\t\t\t\t\t\t'令XXX无视防具',\n\t\t\t\t\t\t\t'令XXX不可被抵消',\n\t\t\t\t\t\t\t'当XXX造成伤害时摸一张牌',\n\t\t\t\t\t\t];\n\t\t\t\t\t\tvar choiceList=ui.create.dialog('【奔袭】：请选择一至两项','forcebutton');\n\t\t\t\t\t\tchoiceList.videoId=id;\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tlist[i]=list[i].replace(/XXX/g,card);\n\t\t\t\t\t\t\tvar str='<div class=\"popup text\" style=\"width:calc(100% - 10px);display:inline-block\">';\n\t\t\t\t\t\t\tif(i==0&&!bool) str+='<div style=\"opacity:0.5\">';\n\t\t\t\t\t\t\tstr+=list[i];\n\t\t\t\t\t\t\tif(i==0&&!bool) str+='</div>';\n\t\t\t\t\t\t\tstr+='</div>';\n\t\t\t\t\t\t\tvar next=choiceList.add(str);\n\t\t\t\t\t\t\tnext.firstChild.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tnext.firstChild.link=i;\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\tnext[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchoiceList.buttons.add(next.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn choiceList;\n\t\t\t\t\t};\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send(func,get.translation(trigger.card),event.videoId,lib.skill.xinbenxi.filterx(trigger,player));\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog=func(get.translation(trigger.card),event.videoId,lib.skill.xinbenxi.filterx(trigger,player));\n\t\t\t\t\tif(player!=game.me||_status.auto){\n\t\t\t\t\t\tevent.dialog.style.display='none';\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseButton();\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('forced',true);\n\t\t\t\t\tnext.set('selectButton',[1,2]);\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tif(button.link==0){\n\t\t\t\t\t\t\treturn _status.event.bool1;\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('bool1',lib.skill.xinbenxi.filterx(trigger,player));\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar event=_status.event.getTrigger();\n\t\t\t\t\t\tswitch(button.link){\n\t\t\t\t\t\t\tcase 0:{\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(event.card,player,current)&&!event.targets.contains(current)&&get.effect(current,event.card,player,player)>0;\n\t\t\t\t\t\t\t\t})) return 1.6+Math.random();\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 1:{\n\t\t\t\t\t\t\t\tif(event.targets.filter(function(current){\n\t\t\t\t\t\t\t\t\tvar eff1=get.effect(current,event.card,player,player);\n\t\t\t\t\t\t\t\t\tplayer._xinbenxi_ai=true;\n\t\t\t\t\t\t\t\t\tvar eff2=get.effect(current,event.card,player,player);\n\t\t\t\t\t\t\t\t\tdelete player._xinbenxi_ai;\n\t\t\t\t\t\t\t\t\treturn eff1>eff2;\n\t\t\t\t\t\t\t\t}).length) return 1.9+Math.random();\n\t\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 2:{\n\t\t\t\t\t\t\t\tvar num=1.3;\n\t\t\t\t\t\t\t\tif(event.card.name=='sha'&&event.targets.filter(function(current){\n\t\t\t\t\t\t\t\t\tif(current.mayHaveShan()&&get.attitude(player,current)<=0){\n\t\t\t\t\t\t\t\t\t\tif(current.hasSkillTag('useShan')) num=1.9;\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}).length) return num+Math.random();\n\t\t\t\t\t\t\t\treturn 0.5+Math.random();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 3:{\n\t\t\t\t\t\t\t\treturn (get.tag(event.card,'damage')||0)+Math.random();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\tvar map=[\n\t\t\t\t\t\tfunction(trigger,player,event){\n\t\t\t\t\t\t\tplayer.chooseTarget('请选择'+get.translation(trigger.card)+'的额外目标',true,function(card,player,target){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(_status.event.targets.contains(target)) return false;\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card,player,target);\n\t\t\t\t\t\t\t}).set('targets',trigger.targets).set('card',trigger.card).set('ai',function(target){\n\t\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(trigger,player,event){\n\t\t\t\t\t\t\tplayer.storage.xinbenxi_unequip.add(trigger.card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(trigger,player,event){\n\t\t\t\t\t\t\tplayer.storage.xinbenxi_directHit.add(trigger.card);\n\t\t\t\t\t\t\ttrigger.nowuxie=true;\n\t\t\t\t\t\t\ttrigger.customArgs.default.directHit2=true;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(trigger,player,event){\n\t\t\t\t\t\t\tplayer.storage.xinbenxi_damage.add(trigger.card);\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\tgame.log(player,'选择了','#g【奔袭】','的','#y选项'+get.cnNumber(result.links[i]+1,true));\n\t\t\t\t\t\tmap[result.links[i]](trigger,player,event);\n\t\t\t\t\t}\n\t\t\t\t\tif(!result.links.contains(0)) event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.targets){\n\t\t\t\t\t\tplayer.line(result.targets);\n\t\t\t\t\t\ttrigger.targets.addArray(result.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {unequip: \"true\",unequip_ai: \"true\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(tag=='unequip'){\n\t\t\t\t\t\t\tif(arg&&player.storage.xinbenxi_unequip.contains(arg.card)) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(_status.currentPhase!=player||game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn get.distance(player,current)>1;\n\t\t\t\t\t\t})) return false;\n\t\t\t\t\t\tif(tag=='directHit_ai') return arg.card.name=='sha';\n\t\t\t\t\t\tif(arg.card.name!='sha'&&arg.card.name!='chuqibuyi') return false;\n\t\t\t\t\t\tvar card=arg.target.getEquip(2);\n\t\t\t\t\t\tif(card&&card.name.indexOf('bagua')!=-1) return true;\n\t\t\t\t\t\tif(player._xinbenxi_ai) return false;\n\t\t\t\t\t},},subSkill: {damage: {sub: \"true\",trigger: {global: \"damageBegin1\",},audio: \"2\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card&&player.storage.xinbenxi_damage.contains(event.card);\n\t\t\t\t\t\t},content: function (){player.draw()},},summer: {sub: \"true\",trigger: {player: [\"phaseAfter\",\"useCardAfter\",\"useCard\"],},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player==_status.currentPhase;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(trigger.name=='phase'){\n\t\t\t\t\t\t\t\tplayer.storage.xinbenxi=0;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(event.triggername=='useCard'){\n\t\t\t\t\t\t\t\tplayer.logSkill('xinbenxi');\n\t\t\t\t\t\t\t\tplayer.storage.xinbenxi++;\n\t\t\t\t\t\t\t\tplayer.syncStorage('xinbenxi');\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.storage.xinbenxi_unequip.remove(event.card);\n\t\t\t\t\t\t\t\tplayer.storage.xinbenxi_directHit.remove(event.card);\n\t\t\t\t\t\t\t\tplayer.storage.xinbenxi_damage.remove(event.card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},forced: \"true\",popup: \"false\",},},}","info":"锁定技，当你于回合内使用牌时，你本回合计算与其他角色的距离-1。你的回合内，若你至场上所有其他角色的距离均不大于1，则当你使用【杀】或普通锦囊牌选择唯一目标后，你选择至多两项：1.为此牌多指定一个目标；2.令此牌无视防具；3.令此牌不可被抵消；4.此牌造成伤害时摸一张牌。"},"xindanshou":{"name":"胆守","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",target: \"useCardToTargeted\",},direct: \"true\",filter: function (event,player,name){\n\t\t\t\t\treturn ((name=='phaseJieshuBegin'&&event.player!=player&&player.countCards('he')>=event.player.countCards('h'))||\n\t\t\t\t\t(event.targets&&event.targets.contains(player)&&['basic','trick'].contains(get.type(event.card,'trick'))))\n\t\t\t\t\t&&!player.hasSkill('xindanshou_as');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(event.triggername=='phaseJieshuBegin'){\n\t\t\t\t\t\tvar num=trigger.player.countCards('h');\n\t\t\t\t\t\tif(num>0) player.chooseToDiscard(get.prompt('xindanshou',trigger.player),num,'弃置'+get.cnNumber(num)+'张牌并对'+get.translation(trigger.player)+'造成1点伤害','he').set('logSkill',['xindanshou',trigger.player]).set('ai',function(card){\n\t\t\t\t\t\t\tif(get.damageEffect(_status.event.getTrigger().player,_status.event.player,_status.event.player)>0) return 6-get.value(card);\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t});\n\t\t\t\t\t\telse player.chooseBool(get.prompt('xindanshou',trigger.player),'对'+get.translation(trigger.player)+'造成1点伤害').ai=function(){\n\t\t\t\t\t\t\treturn get.damageEffect(trigger.player,player,player)>0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\t\tvar history=current.getHistory('useCard');\n\t\t\t\t\t\t\tfor(var j=0;j<history.length;j++){\n\t\t\t\t\t\t\t\tif(['basic','trick'].contains(get.type(history[j].card,'trick'))&&history[j].targets&&history[j].targets.contains(player)) num++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tevent.num=num;\n\t\t\t\t\t\tplayer.chooseBool(get.prompt('xindanshou')+'（可摸'+get.cnNumber(num)+'张牌）',get.translation('xindanshou_info'));\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!result.cards||!result.cards.length){\n\t\t\t\t\t\t\tplayer.logSkill('xindanshou',trigger.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.triggername=='useCardToTargeted'){\n\t\t\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\t\t\tplayer.addTempSkill('xindanshou_as');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttrigger.player.damage('nocard');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {as: {sub: \"true\",},},}","info":"①每回合限一次，当你成为基本牌或锦囊牌的目标后，你可以摸X张牌（X为你本回合内成为过基本牌或锦囊牌的目标的次数）。②一名其他角色的结束阶段，若你本回合内没有发动过〖胆守①〗，则你可以弃置X张牌并对其造成1点伤害（X为其手牌数，无牌则不弃）。"},"reluoying":{"name":"落英","script":"{audio: \"2\",group: [\"reluoying_discard\",\"reluoying_judge\"],subfrequent: [\"judge\"],subSkill: {discard: {audio: \"reluoying\",trigger: {global: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(event.cards2[i],event.player)=='club'&&get.position(event.cards2[i],true)=='d'){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(trigger.cards2[i],trigger.player)=='club'&&get.position(trigger.cards2[i],true)=='d'){\n\t\t\t\t\t\t\t\t\tcards.push(trigger.cards2[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\t\tplayer.chooseButton(['落英：选择要获得的牌',cards],[1,cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\t\t\treturn get.value(button.link,_status.event.player,'raw');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"step 2\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t\t\t\tplayer.gain(result.links,'gain2','log');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},judge: {audio: \"reluoying\",trigger: {global: \"cardsDiscardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tvar evt=event.getParent().relatedEvent;\n\t\t\t\t\t\t\tif(!evt||evt.name!='judge') return;\n\t\t\t\t\t\t\tif(evt.player==player) return false;\n\t\t\t\t\t\t\tif(get.position(event.cards[0],true)!='d') return false;\n\t\t\t\t\t\t\treturn (get.suit(event.cards[0])=='club');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tplayer.chooseButton(['落英：选择要获得的牌',trigger.cards],[1,trigger.cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\t\treturn get.value(button.link,_status.event.player,'raw');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t\t\t\tplayer.gain(result.links,'gain2','log');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"当其他角色的梅花牌因弃置或判定而进入弃牌堆时，你可以获得之。"},"rejiushi":{"name":"酒诗","script":"{audio: \"2\",group: [\"rejiushi1\",\"rejiushi2\",\"rejiushi3\",\"rejiushi_gain\"],subfrequent: [\"gain\"],subSkill: {gain: {audio: \"rejiushi\",trigger: {player: \"turnOverAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.chengzhang==true;\n\t\t\t\t\t\t},prompt: \"是否发动【酒诗】，获得牌堆中的一张锦囊牌？\",content: function (){\n\t\t\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\t\t\treturn get.type2(card)=='trick';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card) player.gain(card,'gain2','log');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"当你需要使用【酒】时，若你的武将牌正面向上，你可以翻面，视为使用一张【酒】。当你受到伤害后，若你的武将牌背面向上，你可以翻面并获得牌堆中的一张随机锦囊。"},"chengzhang":{"name":"成章","script":"{trigger: {player: \"phaseZhunbeiBegin\",},derivation: \"rejiushi_mark\",forced: \"true\",unique: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getAllHistory('sourceDamage',function(evt){\n\t\t\t\t\t\tnum+=evt.num;\n\t\t\t\t\t});\n\t\t\t\t\tif(num>=7) return true;\n\t\t\t\t\tplayer.getAllHistory('damage',function(evt){\n\t\t\t\t\t\tnum+=evt.num;\n\t\t\t\t\t});\n\t\t\t\t\treturn num>7;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.markSkill('rejiushi_mark');\n\t\t\t\t\tplayer.awakenSkill('chengzhang');\n\t\t\t\t\tplayer.storage.chengzhang=true;\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若你造成伤害与受到伤害值之和累计7点或以上，则你回复1点体力并摸1张牌，然后改写〖酒诗〗。"},"ollianhuan":{"name":"连环","script":"{audio: \"xinlianhuan\",audioname: [\"ol_pangtong\"],group: [\"ollianhuan3\",\"ollianhuan5\",\"lianhuan4\"],}","info":" 你可以将一张♣牌当【铁索连环】使用或重铸。你使用【铁索连环】选择目标的上限数+1。"},"olniepan":{"name":"涅槃","script":"{audio: \"2\",unique: \"true\",enable: \"chooseToUse\",mark: \"true\",skillAnimation: \"true\",animationStr: \"涅盘\",limited: \"true\",animationColor: \"orange\",init: function (player){\n\t\t\t\t\tplayer.storage.olniepan=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.olniepan) return false;\n\t\t\t\t\tif(event.type=='dying'){\n\t\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('olniepan');\n\t\t\t\t\tplayer.storage.olniepan=true;\n\t\t\t\t\tplayer.discard(player.getCards('hej'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.link(false);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.turnOver(false);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(player.hp<3){\n\t\t\t\t\t\tplayer.recover(3-player.hp);\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tplayer.chooseControl('bazhen','rehuoji','rekanpo').set('prompt','选择获得一个技能').ai=function(){\n\t\t\t\t\t\treturn ['rehuoji','bazhen'].randomGet();\n\t\t\t\t\t};\n\t\t\t\t\t'step 6'\n\t\t\t\t\tplayer.addSkillLog(result.control);\n\t\t\t\t},ai: {order: \"1\",skillTagFilter: function (player,tag,target){\n\t\t\t\t\t\tif(player!=target||player.storage.olniepan) return false;\n\t\t\t\t\t},save: \"true\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<=0) return 10;\n\t\t\t\t\t\t\tif(player.hp<=2&&player.countCards('he')<=1) return 10;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.storage.olniepan) return 0.6;\n\t\t\t\t\t},},intro: {content: \"limited\",},}","info":"限定技，当你处于濒死状态时，你可以弃置你区域内的所有牌并复原你的武将牌，然后摸三张牌并将体力回复至3点。然后你选择获得以下技能中的一个：〖八阵〗/〖火计〗/〖看破〗"},"rewurong":{"name":"怃戎","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(target.countCards('h')==0||player.countCards('h')==0){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar sendback=function(){\n\t\t\t\t\t\tif(_status.event!=event){\n\t\t\t\t\t\t\treturn function(){\n\t\t\t\t\t\t\t\tevent.resultOL=_status.event.resultOL;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tif(player.isOnline()){\n\t\t\t\t\t\tplayer.wait(sendback);\n\t\t\t\t\t\tevent.ol=true;\n\t\t\t\t\t\tplayer.send(function(){\n\t\t\t\t\t\t\tgame.me.chooseCard(true).set('glow_result',true).ai=function(){\n\t\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.localPlayer=true;\n\t\t\t\t\t\tvar hasShan=!target.countCards('h','shan');\n\t\t\t\t\t\tplayer.chooseCard(true).set('glow_result',true).ai=function(card){\n\t\t\t\t\t\t\tif(hasShan&&get.name(card)=='sha') return 1;\n\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(target.isOnline()){\n\t\t\t\t\t\ttarget.wait(sendback);\n\t\t\t\t\t\tevent.ol=true;\n\t\t\t\t\t\ttarget.send(function(){\n\t\t\t\t\t\t\tvar rand=Math.random()<0.4;\n\t\t\t\t\t\t\tgame.me.chooseCard(true).set('glow_result',true).ai=function(card){\n\t\t\t\t\t\t\t\tif(rand) return card.name=='shan'?1:0;\n\t\t\t\t\t\t\t\treturn card.name=='shan'?0:1;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.localTarget=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.localPlayer){\n\t\t\t\t\t\tevent.card1=result.cards[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(event.localTarget){\n\t\t\t\t\t\tvar rand=Math.random()<0.4;\n\t\t\t\t\t\ttarget.chooseCard(true).set('glow_result',true).ai=function(card){\n\t\t\t\t\t\t\tif(rand) return card.name=='shan'?1:0;\n\t\t\t\t\t\t\treturn card.name=='shan'?0:1;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.localTarget){\n\t\t\t\t\t\tevent.card2=result.cards[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(!event.resultOL&&event.ol){\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\ttry{\n\t\t\t\t\t\tif(!event.card1) event.card1=event.resultOL[player.playerid].cards[0];\n\t\t\t\t\t\tif(!event.card2) event.card2=event.resultOL[target.playerid].cards[0];\n\t\t\t\t\t\tif(!event.card1||!event.card2){\n\t\t\t\t\t\t\tthrow('err');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch(e){\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.card2.number>=10||event.card2.number<=4){\n\t\t\t\t\t\tif(target.countCards('h')>2){\n\t\t\t\t\t\t\tevent.addToAI=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.broadcastAll(function(card1,card2){\n\t\t\t\t\t\tcard1.classList.remove('glow');\n\t\t\t\t\t\tcard2.classList.remove('glow');\n\t\t\t\t\t},event.card1,event.card2);\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tgame.broadcastAll(function(){\n\t\t\t\t\t\tui.arena.classList.add('thrownhighlight');\n\t\t\t\t\t});\n\t\t\t\t\tgame.addVideo('thrownhighlight1');\n\t\t\t\t\tplayer.$compare(event.card1,target,event.card2);\n\t\t\t\t\tgame.delay(4);\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\tgame.log(player,'展示了',event.card1);\n\t\t\t\t\tgame.log(target,'展示了',event.card2);\n\t\t\t\t\tvar name1=get.name(event.card1);\n\t\t\t\t\tvar name2=get.name(event.card2);\n\t\t\t\t\tif(name1=='sha'&&name2!='shan'){\n\t\t\t\t\t\t//player.discard(event.card1).set('animate',false);\n\t\t\t\t\t\ttarget.$gain2(event.card2);\n\t\t\t\t\t\tvar clone=event.card1.clone;\n\t\t\t\t\t\tif(clone){\n\t\t\t\t\t\t\tclone.style.transition='all 0.5s';\n\t\t\t\t\t\t\tclone.style.transform='scale(1.2)';\n\t\t\t\t\t\t\tclone.delete();\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\tvar clone=card.clone;\n\t\t\t\t\t\t\tif(clone){\n\t\t\t\t\t\t\t\tclone.style.transition='all 0.5s';\n\t\t\t\t\t\t\t\tclone.style.transform='scale(1.2)';\n\t\t\t\t\t\t\t\tclone.delete();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},event.card1);\n\t\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t\t}\n\t\t\t\t\telse if(name1!='sha'&&name2=='shan'){\n\t\t\t\t\t\t//player.discard(event.card1).set('animate',false);\n\t\t\t\t\t\ttarget.$gain2(event.card2);\n\t\t\t\t\t\tvar clone=event.card1.clone;\n\t\t\t\t\t\tif(clone){\n\t\t\t\t\t\t\tclone.style.transition='all 0.5s';\n\t\t\t\t\t\t\tclone.style.transform='scale(1.2)';\n\t\t\t\t\t\t\tclone.delete();\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\tvar clone=card.clone;\n\t\t\t\t\t\t\tif(clone){\n\t\t\t\t\t\t\t\tclone.style.transition='all 0.5s';\n\t\t\t\t\t\t\t\tclone.style.transform='scale(1.2)';\n\t\t\t\t\t\t\t\tclone.delete();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},event.card1);\n\t\t\t\t\t\tplayer.gainPlayerCard(target,true,'he');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.$gain2(event.card1);\n\t\t\t\t\t\ttarget.$gain2(event.card2);\n\t\t\t\t\t}\n\t\t\t\t\tgame.broadcastAll(function(){\n\t\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t\t});\n\t\t\t\t\tgame.addVideo('thrownhighlight2');\n\t\t\t\t},ai: {order: \"6\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以令一名其他角色与你同时展示一张手牌：若你展示的是【杀】且该角色展示的不是【闪】，则你对其造成1点伤害；若你展示的不是【杀】且该角色展示的是【闪】，则你获得其一张牌"},"shizhi":{"name":"矢志","script":"{mod: {cardname: function (card,player,name){\n\t\t\t\t\t\tif(card.name=='shan'&&player.hp==1) return 'sha';\n\t\t\t\t\t},},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\tif(player.hp!=1) return false;\n\t\t\t\t\t},respondSha: \"true\",},audio: \"2\",trigger: {player: [\"useCard1\",\"respond\"],},firstDo: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&!event.skill&&\n\t\t\t\t\tevent.cards.length==1&&event.cards[0].name=='shan';\n\t\t\t\t},content: function (){},}","info":"锁定技，当你的体力值为1时，你的【闪】均视为【杀】"},"reganlu":{"name":"甘露","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",selectTarget: \"2\",delay: \"0\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.isMin()) return false;\n\t\t\t\t\tif(ui.selected.targets.length==0) return true;\n\t\t\t\t\tif(ui.selected.targets[0].countCards('e')==0&&target.countCards('e')==0) return false;\n\t\t\t\t\treturn target==player||ui.selected.targets[0]==player||Math.abs(ui.selected.targets[0].countCards('e')-target.countCards('e'))<=player.maxHp-player.hp;\n\t\t\t\t},multitarget: \"true\",multiline: \"true\",content: function (){\n\t\t\t\t\ttargets[0].swapEquip(targets[1]);\n\t\t\t\t},ai: {order: \"10\",threaten: function (player,target){\n\t\t\t\t\t\treturn 0.8*Math.max(1+target.maxHp-target.hp);\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar list1=[];\n\t\t\t\t\t\t\tvar list2=[];\n\t\t\t\t\t\t\tvar num=player.maxHp-player.hp;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0) list1.push(players[i]);\n\t\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0) list2.push(players[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlist1.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn a.countCards('e')-b.countCards('e');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlist2.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn b.countCards('e')-a.countCards('e');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar delta;\n\t\t\t\t\t\t\tfor(var i=0;i<list1.length;i++){\n\t\t\t\t\t\t\t\tfor(var j=0;j<list2.length;j++){\n\t\t\t\t\t\t\t\t\tdelta=list2[j].countCards('e')-list1[i].countCards('e');\n\t\t\t\t\t\t\t\t\tif(delta<=0) continue;\n\t\t\t\t\t\t\t\t\tif(delta<=num||list1[i]==player||list2[j]==player){\n\t\t\t\t\t\t\t\t\t\tif(target==list1[i]||target==list2[j]){\n\t\t\t\t\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择装备区牌数之差的绝对值不大于X的两名角色或包含你在内的两名角色，然后交换这两名角色装备区内的牌。（X为你已损失的体力值）"},"buyi":{"name":"补益","script":"{trigger: {global: \"dying\",},audio: \"2\",audioname: [\"re_wuguotai\"],filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=0&&event.player.countCards('h')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar check;\n\t\t\t\t\tif(trigger.player.isUnderControl(true,player)){\n\t\t\t\t\t\tcheck=player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tcheck=(get.attitude(player,trigger.player)>0);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.choosePlayerCard(trigger.player,get.prompt('buyi',trigger.player),'h').set('ai',function(button){\n\t\t\t\t\t\tif(!_status.event.check) return 0;\n\t\t\t\t\t\tif(_status.event.target.isUnderControl(true,_status.event.player)){\n\t\t\t\t\t\t\tif(get.type(button.link)!='basic'){\n\t\t\t\t\t\t\t\treturn 10-get.value(button.link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('check',check).set('filterButton',function(button){\n\t\t\t\t\t\tif(_status.event.player==_status.event.target){\n\t\t\t\t\t\t\treturn lib.filter.cardDiscardable(button.link,_status.event.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('buyi',trigger.player);\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\tplayer.showCards([event.card],get.translation(player)+'展示的手牌');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(get.type(event.card)!='basic'){\n\t\t\t\t\t\ttrigger.player.recover();\n\t\t\t\t\t\ttrigger.player.discard(event.card);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",},}","info":"当有角色进入濒死状态时，你可以展示该角色的一张手牌：若此牌不为基本牌，则该角色弃置此牌并回复1点体力。"},"rexianzhen":{"name":"陷阵","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.player&&get.name(result.player,player)=='sha') player.addTempSkill('rexianzhen4');\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage[event.name]=target;\n\t\t\t\t\t\tplayer.addTempSkill(event.name+2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addTempSkill(event.name+3);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (name,player){\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tif(player.countCards('h','sha')==0){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(cards[i].name!='sha'&&cards[i].number>11&&get.value(cards[i])<7){\n\t\t\t\t\t\t\t\treturn 9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.order({name:'sha'})-1;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('h','sha')>0) return 0;\n\t\t\t\t\t\t\tvar num=player.countCards('h');\n\t\t\t\t\t\t\tif(num>player.hp) return 0;\n\t\t\t\t\t\t\tif(num==1) return -2;\n\t\t\t\t\t\t\tif(num==2) return -1;\n\t\t\t\t\t\t\treturn -0.7;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\tif(num==1) return -1;\n\t\t\t\t\t\t\tif(num==2) return -0.7;\n\t\t\t\t\t\t\treturn -0.5\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"出牌阶段限一次，你可以和一名其他角色拼点。若你赢，你本回合内对其使用牌没有次数和距离限制且无视其防具。若你没赢，你本回合内不能使用【杀】。若你以此法失去的拼点牌为【杀】，则你的【杀】不计入本回合的手牌上限。"},"rejinjiu":{"name":"禁酒","script":"{mod: {cardname: function (card,player){\n\t\t\t\t\t\tif(card.name=='jiu') return 'sha';\n\t\t\t\t\t},},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('h','jiu')) return false;\n\t\t\t\t\t},respondSha: \"true\",},audio: \"2\",trigger: {player: [\"useCard1\",\"respond\"],},firstDo: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&!event.skill&&\n\t\t\t\t\tevent.cards.length==1&&event.cards[0].name=='jiu';\n\t\t\t\t},content: function (){},group: \"rejinjiu2\",global: \"rejinjiu3\",}","info":"锁定技，你的【酒】均视为【杀】。其他角色不能于你的回合内使用【酒】。当你受到酒【杀】的伤害时，你令此伤害-X（X为影响过此【杀】的伤害值的【酒】的数量）"},"new_rejianxiong":{"name":"奸雄","script":"{audio: \"rejianxiong\",audioname: [\"shen_caopi\"],trigger: {player: \"damageEnd\",},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(get.itemtype(trigger.cards)=='cards'&&get.position(trigger.cards[0],true)=='o'){\n\t\t\t\t\t\tplayer.gain(trigger.cards,\"gain2\");\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw('nodelay');\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1];\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&player!=target) return [1,0.6];\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以获得对你造成伤害的牌并摸一张牌。"},"hujia":{"name":"护驾","script":"{audio: \"2\",audioname: [\"re_caocao\"],unique: \"true\",zhuSkill: \"true\",trigger: {player: [\"chooseToRespondBefore\",\"chooseToUseBefore\"],},filter: function (event,player){\n\t\t\t\t\tif(event.responded) return false;\n\t\t\t\t\tif(player.storage.hujiaing) return false;\n\t\t\t\t\tif(!player.hasZhuSkill('hujia')) return false;\n\t\t\t\t\tif(!event.filterCard({name:'shan'},player,event)) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='wei';\n\t\t\t\t\t});\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.damageEffect(player,event.player,player)>=0) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(event.current==undefined) event.current=player.next;\n\t\t\t\t\tif(event.current==player){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.current.group=='wei'){\n\t\t\t\t\t\tif((event.current==game.me&&!_status.auto)||(\n\t\t\t\t\t\t\tget.attitude(event.current,player)>2)||\n\t\t\t\t\t\t\tevent.current.isOnline()){\n\t\t\t\t\t\t\tplayer.storage.hujiaing=true;\n\t\t\t\t\t\t\tvar next=event.current.chooseToRespond('是否替'+get.translation(player)+'打出一张闪？',{name:'shan'});\n\t\t\t\t\t\t\tnext.set('ai',function(){\n\t\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\t\treturn (get.attitude(event.player,event.source)-2);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.set('skillwarn','替'+get.translation(player)+'打出一张闪');\n\t\t\t\t\t\t\tnext.autochoose=lib.filter.autoRespondShan;\n\t\t\t\t\t\t\tnext.set('source',player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.storage.hujiaing=false;\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\ttrigger.result={bool:true,card:{name:'shan',isCard:true}};\n\t\t\t\t\t\ttrigger.responded=true;\n\t\t\t\t\t\ttrigger.animate=false;\n\t\t\t\t\t\tif(typeof event.current.ai.shown=='number'&&event.current.ai.shown<0.95){\n\t\t\t\t\t\t\tevent.current.ai.shown+=0.3;\n\t\t\t\t\t\t\tif(event.current.ai.shown>0.95) event.current.ai.shown=0.95;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.current=event.current.next;\n\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t}\n\t\t\t\t},ai: {respondShan: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.storage.hujiaing) return false;\n\t\t\t\t\t\tif(!player.hasZhuSkill('hujia')) return false;\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.group=='wei';\n\t\t\t\t\t\t});\n\t\t\t\t\t},},}","info":"主公技，当你需要使用或打出一张【闪】时，你可以令其他魏势力角色选择是否打出一张【闪】。若有角色响应，则你视为使用或打出了一张【闪】。"},"refankui":{"name":"反馈","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn (event.source&&event.source.countGainableCards(player,'he')&&event.num>0&&event.source!=player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.gainPlayerCard(get.prompt('refankui',trigger.source),trigger.source,get.buttonValue,'he').set('logSkill',['refankui',trigger.source]);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&event.count>0&&trigger.source.countGainableCards(player,'he')>0) event.goto(1);\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.countCards('he')>1&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];\n\t\t\t\t\t\t\t\tif(get.attitude(target,player)<0) return [1,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到1点伤害后，你可以获得伤害来源的一张牌。"},"reguicai":{"name":"鬼才","script":"{audio: \"2\",trigger: {global: \"judge\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，'+get.prompt('reguicai'),'he',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0||result==0) return 0;\n\t\t\t\t\t\tif(attitude>0){\n\t\t\t\t\t\t\treturn result-get.value(card)/2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -result-get.value(card)/2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.respond(result.cards,'reguicai','highlight','noOrdering');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.player.judging[0].clone){\n\t\t\t\t\t\t\ttrigger.player.judging[0].clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\t\tcard.clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},trigger.player.judging[0]);\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.orderingCards.addArray(result.cards);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"1\",},},}","info":"在任意角色的判定牌生效前，你可以打出一张牌代替之"},"tiandu":{"name":"天妒","script":"{audio: \"2\",audioname: [\"re_guojia\",\"xizhicai\",\"gz_nagisa\"],trigger: {player: \"judgeEnd\",},frequent: function (event){\n\t\t\t\t\tif(event.result.card.name=='du') return false;\n\t\t\t\t\t//if(get.mode()=='guozhan') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},check: function (event){\n\t\t\t\t\tif(event.result.card.name=='du') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn get.position(event.result.card,true)=='o';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(trigger.result.card,'gain2');\n\t\t\t\t},}","info":"当你的判定牌生效后，你可以获得之。"},"new_reyiji":{"name":"遗计","script":"{audio: \"reyiji\",trigger: {player: \"damageEnd\",},frequent: \"true\",filter: function (event){\n\t\t\t\t\treturn (event.num>0)\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=1;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tevent.given=0;\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tselectCard:[1,2-event.given],\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&target!=event.temp;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>0) return -1;\n\t\t\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\t\t\treturn (_status.event.player.countCards('h')-_status.event.player.hp);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0;\n\t\t\t\t\t\t\t\treturn 1-att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att-4;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:'请选择要送人的卡牌'\n\t\t\t\t\t});\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tresult.targets[0].gain(result.cards,player,'giveAuto');\n\t\t\t\t\t\tevent.given+=result.cards.length;\n\t\t\t\t\t\tif(event.given<2){\n\t\t\t\t\t\t\tevent.temp=result.targets[0];\n\t\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.count<trigger.num){\n\t\t\t\t\t\t\tdelete event.temp;\n\t\t\t\t\t\t\tevent.count++;\n\t\t\t\t\t\t\tplayer.chooseBool(get.prompt2(event.name)).set('frequentSkill',event.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.count<trigger.num){\n\t\t\t\t\t\tdelete event.temp;\n\t\t\t\t\t\tevent.count++;\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2(event.name)).set('frequentSkill',event.name);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",result: {effect: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\tif(player.needsToDiscard()){\n\t\t\t\t\t\t\t\t\t\tnum=0.7;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tnum=0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(player.hp>=4) return [1,num*2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,num*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,num*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"0.6\",},}","info":"当你受到1点伤害后，你可以摸两张牌，然后可以将至多两张手牌交给其他角色。"},"xunxun":{"name":"恂恂","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.cards=get.cards(4);\n\t\t\t\t\tplayer.chooseCardButton(event.cards,2,'选择两张牌置于牌堆顶',true).set('ai',ai.get.buttonValue);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar choice=[];\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tchoice.push(result.links[i]);\n\t\t\t\t\t\t\tcards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile(choice.length){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(choice.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段，你可以观看牌堆顶的四张牌，然后将其中的两张牌置于牌堆顶，并将其余的牌以任意顺序置于牌堆底。"},"wangxi":{"name":"忘隙","script":"{audio: \"2\",trigger: {player: \"damageEnd\",source: \"damageSource\",},filter: function (event){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.num&&event.source&&event.player&&\n\t\t\t\t\tevent.player.isAlive()&&event.source.isAlive()&&event.source!=event.player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.isPhaseUsing()) return true;\n\t\t\t\t\tif(event.player==player) return get.attitude(player,event.source)>-3;\n\t\t\t\t\treturn get.attitude(player,event.player)>-3;\n\t\t\t\t},logTarget: function (event,player){\n\t\t\t\t\tif(event.player==player) return event.source;\n\t\t\t\t\treturn event.player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tgame.asyncDraw([trigger.player,trigger.source]);\n\t\t\t\t\tevent.count--;\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.count){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('wangxi',lib.skill.wangxi.logTarget(trigger,player)))\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('wangxi',lib.skill.wangxi.logTarget(trigger,player));\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",},}","info":"每当你对其他角色造成1点伤害后，或受到其他角色造成的1点伤害后，你可与该角色各摸一张牌。"},"new_retuxi":{"name":"突袭","script":"{audio: \"retuxi\",trigger: {player: \"phaseDrawBegin2\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.num>0&&!event.numFixed&&game.hasPlayer(function(target){\n\t\t\t\t\t\treturn target.countCards('h')>0&&player!=target;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar num=get.copy(trigger.num);\n\t\t\t\t\tif(get.mode()=='guozhan'&&num>2) num=2;\n\t\t\t\t\tplayer.chooseTarget(get.prompt('new_retuxi'),'获得至多'+get.translation(num)+'名角色的各一张手牌，然后少摸等量的牌',[1,num],function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')>0&&player!=target;\n\t\t\t\t\t},function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.hasSkill('tuntian')) return att/10;\n\t\t\t\t\t\treturn 1-att;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets.sortBySeat();\n\t\t\t\t\t\tplayer.logSkill('new_retuxi',result.targets);\n\t\t\t\t\t\tplayer.gainMultiple(result.targets);\n\t\t\t\t\t\ttrigger.num-=result.targets.length;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(trigger.num<=0) game.delay();\n\t\t\t\t},ai: {threaten: \"1.6\",expose: \"0.2\",},}","info":"摸牌阶段摸牌时，你可以少摸任意张牌，然后获得等量的角色的各一张手牌。"},"new_reluoyi":{"name":"裸衣","script":"{audio: \"reluoyi\",trigger: {player: \"phaseDrawBegin1\",},forced: \"true\",locked: \"false\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=get.cards(3);\n\t\t\t\t\tgame.cardsGotoOrdering(cards);\n\t\t\t\t\tplayer.showCards(cards,'裸衣');\n\t\t\t\t\tvar cardsx=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.type(cards[i])=='basic'||cards[i].name=='juedou'||\n\t\t\t\t\t\t\t(get.type(cards[i])=='equip'&&get.subtype(cards[i])=='equip1')){\n\t\t\t\t\t\t\tcardsx.push(cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.cards=cardsx;\n\t\t\t\t\tplayer.chooseBool(\"是否放弃摸牌\"+(cardsx.length?(\"，改为获得\"+get.translation(cardsx)):\"\")+\"？\").ai=function(){\n\t\t\t\t\t\tvar num=3;\n\t\t\t\t\t\treturn cardsx.length>=trigger.num;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(cards.length) player.gain(cards,'gain2');\n\t\t\t\t\t\t//game.cardsDiscard(cards2);\n\t\t\t\t\t\tplayer.addTempSkill('reluoyi2',{player:'phaseBefore'});\n\t\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\t}\n\t\t\t\t\t//else game.cardsDiscard(cards);\n\t\t\t\t},}","info":"摸牌阶段开始时，你展示牌堆顶的三张牌。然后，你可以放弃摸牌。若如此做，你获得其中的基本牌、武器牌和【决斗】，且直到你的下回合开始，你使用的【杀】或【决斗】造成伤害时，此伤害+1。否则，你将这些牌置入弃牌堆。"},"reganglie":{"name":"刚烈","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn (event.source!=undefined&&event.num>0);\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn (get.attitude(player,event.source)<=0);\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.num=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tif(get.color(card)=='red') return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.color=='black'){\n\t\t\t\t\t\tif(trigger.source.countCards('he')){\n\t\t\t\t\t\t\tplayer.discardPlayerCard(trigger.source,'he',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.source.isIn()){\n\t\t\t\t\t\ttrigger.source.damage();\n\t\t\t\t\t}\n\t\t\t\t\tevent.num--;\n\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('reganglie'));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('reganglie',trigger.source);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",expose: \"0.4\",},}","info":"每当你受到1点伤害后，可进行一次判定，若结果为红色，你对伤害来源造成1点伤害，若结果为黑色，你弃置其一张牌。"},"new_qingjian":{"name":"清俭","script":"{audio: \"qingjian\",trigger: {player: \"gainAfter\",},direct: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(event.parent.parent.name=='phaseDraw') return false;\n\t\t\t\t\treturn event.cards&&event.cards.length>0\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tselectCard:[1,Infinity],\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.currentPhase)<0&&_status.currentPhase.needsToDiscard()&&card.name!='du') return -1;\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.type(ui.selected.cards[i])==get.type(card)||(ui.selected.cards[i].name=='du'&&card.name!='du')) return -1;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\t\t\treturn (_status.event.player.countCards('h')-_status.event.player.hp);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.currentPhase)<0) return -1;\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0;\n\t\t\t\t\t\t\t\treturn 1-att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.countCards('h')>_status.event.player.countCards('h')) return 0;\n\t\t\t\t\t\t\treturn att-4;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt2('new_qingjian'),\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\t\tvar type=[];\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\ttype.add(get.type(cards[i],'trick',cards[i].original=='h'?player:false));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.new_qingjian++;\n\t\t\t\t\t\tplayer.logSkill('new_qingjian',target);\n\t\t\t\t\t\ttarget.gain(cards,player,'give');\n\t\t\t\t\t\t_status.currentPhase.addTempSkill('qingjian_add');\n\t\t\t\t\t\t_status.currentPhase.storage.qingjian_add=type.length;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.counttrigger.new_qingjian--;\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"当你于摸牌阶段外获得牌时，你可以展示任意张牌并交给一名其他角色。然后，当前回合角色本回合的手牌上限+X（X为你给出的牌中包含的类别数）。每回合限一次。"},"olpaoxiao":{"name":"咆哮","script":"{audio: \"paoxiao\",audioname: [\"re_zhangfei\",\"guanzhang\",\"xiahouba\"],trigger: {player: \"shaMiss\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.addTempSkill('olpaoxiao2');\n\t\t\t\t\tplayer.addMark('olpaoxiao2',1,false);\n\t\t\t\t},mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha') return Infinity;\n\t\t\t\t\t},},}","info":"①锁定技，你使用【杀】无次数限制。②锁定技，当你使用的【杀】被【闪】抵消时，你获得一枚“咆”（→）当你因【杀】造成伤害时，你弃置所有“咆”并令伤害值+X（X为“咆”数）。回合结束后，你弃置所有“咆”。"},"oltishen":{"name":"替身","script":"{audio: \"retishen\",unique: \"true\",mark: \"true\",skillAnimation: \"true\",animationColor: \"soil\",limited: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\tif(player.storage.oltishen) return false;\n\t\t\t\t\treturn player.isDamaged();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.hp<=2||player.getDamagedHp()>2) return true;\n\t\t\t\t\tif(player.getDamagedHp()<=1) return false;\n\t\t\t\t\treturn player.getDamagedHp()<game.roundNumber;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('oltishen');\n\t\t\t\t\tplayer.recover(player.maxHp-player.hp);\n\t\t\t\t\tplayer.draw(player.maxHp-player.hp);\n\t\t\t\t},intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，准备阶段，你可以将体力回复至上限，然后摸X张牌（X为你回复的体力值）。"},"ollongdan":{"name":"龙胆","script":"{audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],hiddenCard: function (player,name){\n\t\t\t\t\tif(name=='tao') return player.countCards('h','jiu')>0;\n\t\t\t\t\tif(name=='jiu') return player.countCards('h','tao')>0;\n\t\t\t\t\treturn false;\n\t\t\t\t},enable: [\"chooseToUse\",\"chooseToRespond\"],prompt: \"将杀当做闪，或将闪当做杀，或将桃当做酒，或将酒当做桃使用或打出\",viewAs: function (cards,player){\n\t\t\t\t\tvar name=false;\n\t\t\t\t\tswitch(get.name(cards[0],player)){\n\t\t\t\t\t\tcase 'sha':name='shan';break;\n\t\t\t\t\t\tcase 'shan':name='sha';break;\n\t\t\t\t\t\tcase 'tao':name='jiu';break;\n\t\t\t\t\t\tcase 'jiu':name='tao';break;\n\t\t\t\t\t}\n\t\t\t\t\tif(name) return {name:name};\n\t\t\t\t\treturn null;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(_status.event.type=='phase'){\n\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\tvar name2;\n\t\t\t\t\t\tvar list=['sha','tao','jiu'];\n\t\t\t\t\t\tvar map={sha:'shan',tao:'jiu',jiu:'tao'}\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t\t\t\t\tif(player.countCards('h',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){\n\t\t\t\t\t\t\t\tvar temp=get.order({name:name});\n\t\t\t\t\t\t\t\tif(temp>max){\n\t\t\t\t\t\t\t\t\tmax=temp;\n\t\t\t\t\t\t\t\t\tname2=map[name];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(name2==get.name(card,player)) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn 1;\n\t\t\t\t},filterCard: function (card,player,event){\n\t\t\t\t\tevent=event||_status.event;\n\t\t\t\t\tvar filter=event._backup.filterCard;\n\t\t\t\t\tvar name=get.name(card,player);\n\t\t\t\t\tif(name=='sha'&&filter({name:'shan',cards:[card]},player,event)) return true;\n\t\t\t\t\tif(name=='shan'&&filter({name:'sha',cards:[card]},player,event)) return true;\n\t\t\t\t\tif(name=='tao'&&filter({name:'jiu',cards:[card]},player,event)) return true;\n\t\t\t\t\tif(name=='jiu'&&filter({name:'tao',cards:[card]},player,event)) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar filter=event.filterCard;\n\t\t\t\t\tif(filter({name:'sha'},player,event)&&player.countCards('h','shan')) return true;\n\t\t\t\t\tif(filter({name:'shan'},player,event)&&player.countCards('h','sha')) return true;\n\t\t\t\t\tif(filter({name:'tao'},player,event)&&player.countCards('h','jiu')) return true;\n\t\t\t\t\tif(filter({name:'jiu'},player,event)&&player.countCards('h','tao')) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tvar name;\n\t\t\t\t\t\tswitch(tag){\n\t\t\t\t\t\t\tcase 'respondSha':name='shan';break;\n\t\t\t\t\t\t\tcase 'respondShan':name='sha';break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.countCards('h',name)) return false;\n\t\t\t\t\t},order: function (item,player){\n\t\t\t\t\t\tif(player&&_status.event.type=='phase'){\n\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\tvar list=['sha','tao','jiu'];\n\t\t\t\t\t\t\tvar map={sha:'shan',tao:'jiu',jiu:'tao'}\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t\t\t\t\t\tif(player.countCards('h',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){\n\t\t\t\t\t\t\t\t\tvar temp=get.order({name:name});\n\t\t\t\t\t\t\t\t\tif(temp>max) max=temp;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(max>0) max+=0.3;\n\t\t\t\t\t\t\treturn max;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 4;\n\t\t\t\t\t},},}","info":"你可以将一张【杀】当做【闪】、【闪】当做【杀】、【酒】当做【桃】、【桃】当做【酒】使用或打出。"},"olyajiao":{"name":"涯角","script":"{audio: \"reyajiao\",trigger: {player: \"loseAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=_status.currentPhase&&event.hs&&event.hs.length>0&&['useCard','respond'].contains(event.getParent().name);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.card=get.cards()[0];\n\t\t\t\t\tgame.cardsGotoOrdering(event.card);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar judgestr=get.translation(player)+'发动了【涯角】';\n\t\t\t\t\tgame.addVideo('judge1',player,[get.cardInfo(event.card),judgestr,event.videoId]);\n\t\t\t\t\tgame.broadcastAll(function(player,card,str,id,cardid){\n\t\t\t\t\t\tvar event;\n\t\t\t\t\t\tif(game.online){\n\t\t\t\t\t\t\tevent={};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent=_status.event;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(game.chess){\n\t\t\t\t\t\t\tevent.node=card.copy('thrown','center',ui.arena).animate('start');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.node=player.$throwordered(card.copy(),true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(lib.cardOL) lib.cardOL[cardid]=event.node;\n\t\t\t\t\t\tevent.node.cardid=cardid;\n\t\t\t\t\t\tevent.node.classList.add('thrownhighlight');\n\t\t\t\t\t\tui.arena.classList.add('thrownhighlight');\n\t\t\t\t\t\tevent.dialog=ui.create.dialog(str);\n\t\t\t\t\t\tevent.dialog.classList.add('center');\n\t\t\t\t\t\tevent.dialog.videoId=id;\n\t\t\t\t\t},player,event.card,judgestr,event.videoId,get.id());\n\n\t\t\t\t\tgame.log(player,'展示了',event.card);\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t\tif(get.type(event.card,'trick')==get.type(trigger.getParent().card,'trick')){\n\t\t\t\t\t\tplayer.chooseTarget('选择获得此牌的角色').set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.du){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0;\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\treturn att+Math.max(0,5-target.countCards('h'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t}).set('du',event.card.name=='du');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.disbool=true;\n\t\t\t\t\t\tplayer.chooseTarget('是否弃置攻击范围内包含你的一名角色区域内的一张牌？',function(card,player,target){\n\t\t\t\t\t\t\treturn target.inRange(player)&&target.countDiscardableCards(player,'hej')>0;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.effect(target,{name:'guohe'},player,player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.disbool){\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],'hej',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tgame.addVideo('judge2',null,event.videoId);\n\t\t\t\t\t\tgame.addVideo('deletenode',player,[get.cardInfo(event.node)]);\n\t\t\t\t\t\tevent.node.delete();\n\t\t\t\t\t\tgame.broadcast(function(id,card){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\tcard.clone.delete();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t\t\t},event.videoId,event.card);\n\t\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.targets){\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tgame.addVideo('judge2',null,event.videoId);\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tresult.targets[0].gain(event.card,'log');\n\t\t\t\t\t\tevent.node.moveDelete(result.targets[0]);\n\t\t\t\t\t\tgame.addVideo('gain2',result.targets[0],[get.cardInfo(event.node)]);\n\t\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t\t\tgame.broadcast(function(card,target,id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\tcard.clone.moveDelete(target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},event.card,result.targets[0],event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.addVideo('deletenode',player,[get.cardInfo(event.node)]);\n\t\t\t\t\t\tevent.node.delete();\n\t\t\t\t\t\tgame.broadcast(function(id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\tcard.clone.delete();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t\t\t},event.videoId,event.card);\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tgame.addVideo('judge2',null,event.videoId);\n\t\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'respond')&&target.countCards('h')>1) return [1,0.2];\n\t\t\t\t\t\t},},},}","info":"当你于回合外因使用或打出而失去手牌后，你可以展示牌堆顶的一张牌。若这两张牌的类别相同，你可以将展示的牌交给一名角色；若类别不同，你可弃置攻击范围内包含你的角色区域里的一张牌。"},"new_rewusheng":{"name":"武圣","script":"{mod: {targetInRange: function (card){\n\t\t\t\t\t\tif(get.suit(card)=='diamond'&&card.name=='sha') return true;\n\t\t\t\t\t},},audio: \"wusheng\",audioname: [\"re_guanyu\",\"guanzhang\",\"jsp_guanyu\",\"guansuo\"],enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: function (card,player){\n\t\t\t\t\tif(get.zhu(player,'shouyue')) return true;\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},position: \"he\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\tif(get.zhu(player,'shouyue')){\n\t\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t\t}\n\t\t\t\t},prompt: \"将一张红色牌当杀使用或打出\",check: function (card){return 4-get.value(card)},ai: {respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(get.zhu(player,'shouyue')){\n\t\t\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"你可以将一张红色牌当做【杀】使用或打出。你使用的方片杀没有距离限制。"},"new_yijue":{"name":"义绝","script":"{audio: \"yijue\",enable: \"phaseUse\",usable: \"1\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h');\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.chooseCard(true).ai=function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif((player.hasShan()||player.hp<3)&&get.color(card)=='black') return 0.5;\n\t\t\t\t\t\treturn Math.max(1,20-get.value(card));\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.showCards(result.cards);\n\t\t\t\t\tevent.card2=result.cards[0];\n\t\t\t\t\tif(get.color(event.card2)=='black'){\n\t\t\t\t\t\tif(!target.hasSkill('fengyin')){\n\t\t\t\t\t\t\ttarget.addTempSkill('fengyin');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.addTempSkill('new_yijue2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gain(event.card2,target,'give','bySelf');\n\t\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\t\tplayer.chooseBool('是否让目标回复一点体力？').ai=function(event,player){\n\t\t\t\t\t\t\t\treturn get.recoverEffect(target,player,player)>0;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tif(hs.length<3) return 0;\n\t\t\t\t\t\t\tif(target.countCards('h')>target.hp+1&&get.recoverEffect(target)>0){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.canUse('sha',target)&&(player.countCards('h','sha')||player.countCards('he',{color:'red'}))){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},order: \"9\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(!arg.target.hasSkillTag('new_yijue2')) return false;\n\t\t\t\t\t},},}","info":"出牌阶段限一次，你可以弃置一张牌并令一名有手牌的其他角色展示一张手牌。若此牌为黑色，则该角色不能使用或打出牌，非锁定技失效且受到来自你的红桃【杀】的伤害+1直到回合结束。若此牌为红色，则你可以获得此牌，并可以令其回复一点体力。"},"retieji":{"name":"铁骑","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"boss_lvbu3\"],trigger: {player: \"useCardToPlayered\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge(function(){return 0});\n\t\t\t\t\tif(!trigger.target.hasSkill('fengyin')){\n\t\t\t\t\t\ttrigger.target.addTempSkill('fengyin');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar suit=result.suit;\n\t\t\t\t\tvar target=trigger.target;\n\t\t\t\t\tvar num=target.countCards('h','shan');\n\t\t\t\t\ttarget.chooseToDiscard('请弃置一张'+get.translation(suit)+'牌，否则不能使用闪抵消此杀','he',function(card){\n\t\t\t\t\t\treturn get.suit(card)==_status.event.suit;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar num=_status.event.num;\n\t\t\t\t\t\tif(num==0) return 0;\n\t\t\t\t\t\tif(card.name=='shan') return num>1?2:0;\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t}).set('num',num).set('suit',suit);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {ignoreSkill: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(tag=='directHit_ai'){\n\t\t\t\t\t\t\treturn get.attitude(player,arg.target)<=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!arg||arg.isLink||!arg.card||arg.card.name!='sha') return false;\n\t\t\t\t\t\tif(!arg.target||get.attitude(player,arg.target)>=0) return false;\n\t\t\t\t\t\tif(!arg.skill||!lib.skill[arg.skill]||lib.skill[arg.skill].charlotte||get.is.locked(arg.skill)||!arg.target.getSkills(true,false).contains(arg.skill)) return false;\n\t\t\t\t\t},directHit_ai: \"true\",},}","info":"当你使用【杀】指定一名角色为目标后，你可以进行一次判定并令该角色的非锁定技失效直到回合结束，除非该角色弃置一张与判定结果花色相同的牌，否则不能使用【闪】抵消此【杀】。"},"zhuhai":{"name":"诛害","script":"{trigger: {global: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player.isAlive()&&event.player.getStat('damage')&&\n\t\t\t\t\tlib.filter.targetEnabled({name:'sha'},player,event.player)&&(player.hasSha()||_status.connectMode&&player.countCards('h')>0);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.chooseToUse(function(card,player,event){\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t},'诛害：是否对'+get.translation(trigger.player)+'使用一张杀？').set('logSkill','zhuhai').set('complexSelect',true).set('filterTarget',function(card,player,target){\n\t\t\t\t\t\tif(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this,arguments);\n\t\t\t\t\t}).set('sourcex',trigger.player);\n\t\t\t\t},}","info":"一名其他角色的结束阶段开始时，若该角色本回合造成过伤害，你可以对其使用一张【杀】。"},"qianxin":{"name":"潜心","script":"{skillAnimation: \"true\",animationColor: \"orange\",audio: \"2\",unique: \"true\",juexingji: \"true\",trigger: {source: \"damageSource\",},forced: \"true\",derivation: \"jianyan\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('qianxin');\n\t\t\t\t\tplayer.addSkill('jianyan');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t},}","info":"觉醒技，当你造成一次伤害后，若你已受伤，你须减1点体力上限，并获得技能“荐言”。"},"reyingzi":{"name":"英姿","script":"{audio: \"2\",audioname: [\"heqi\",\"sunce\",\"gexuan\",\"re_sunben\",\"re_sunce\",\"re_heqi\"],trigger: {player: \"phaseDrawBegin2\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},ai: {threaten: \"1.5\",},mod: {maxHandcardBase: function (player,num){\n\t\t\t\t\t\treturn player.maxHp;\n\t\t\t\t\t},},}","info":"锁定技，摸牌阶段摸牌时，你额外摸一张牌；你的手牌上限为你的体力上限。"},"refanjian":{"name":"反间","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"false\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.storage.refanjian=cards[0];\n\t\t\t\t\ttarget.gain(cards[0],player,'give');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.chooseControl('refanjian_card','refanjian_hp').ai=function(event,player){\n\t\t\t\t\t\tvar cards=player.getCards('he',{suit:get.suit(player.storage.refanjian)});\n\t\t\t\t\t\tif(cards.length==1) return 0;\n\t\t\t\t\t\tif(cards.length>=2){\n\t\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.tag(cards[i],'save')) return 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.hp==1) return 0;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(get.value(cards[i])>=8) return 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(cards.length>2&&player.hp>2) return 1;\n\t\t\t\t\t\tif(cards.length>3) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.control=='refanjian_card'){\n\t\t\t\t\t\ttarget.showHandcards();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.loseHp();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\ttarget.discard(target.getCards('he',{suit:get.suit(target.storage.refanjian)}))\n\t\t\t\t\tdelete target.storage.refanjian;\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -target.countCards('he')-(player.countCards('h','du')?1:0);\n\t\t\t\t\t\t},},threaten: \"2\",},}","info":"出牌阶段限一次，你可以展示一张手牌并将此牌交给一名其他角色。然后该角色选择一项：展示其手牌并弃置所有与此牌花色相同的牌，或失去一点体力。"},"keji":{"name":"克己","script":"{audio: \"2\",audioname: [\"re_lvmeng\",\"sp_lvmeng\"],trigger: {player: \"phaseDiscardBefore\",},frequent: function (event,player){\n\t\t\t\t\treturn player.needsToDiscard();\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.getHistory('skipped').contains('phaseUse')) return true;\n\t\t\t\t\tvar history=player.getHistory('useCard').concat(player.getHistory('respond'));\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tif(history[i].card.name=='sha'&&history[i].isPhaseUsing()) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},}","info":"弃牌阶段开始时，若你于本回合的出牌阶段内没有过使用或打出过【杀】，则你可以跳过此阶段。"},"qinxue":{"name":"勤学","script":"{skillAnimation: \"true\",animationColor: \"wood\",audio: \"2\",unique: \"true\",juexingji: \"true\",derivation: \"gongxin\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.qinxue) return false;\n\t\t\t\t\tif(player.countCards('h')>=player.hp+3) return true;\n\t\t\t\t\tif(player.countCards('h')>=player.hp+2&&game.players.length+game.dead.length>=7) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.qinxue=true;\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('gongxin');\n\t\t\t\t\tplayer.awakenSkill('qinxue');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若你的手牌数比体力值多3（人数不少于7时改为2）或更多，你须减一点体力上限并获得技能【攻心】"},"botu":{"name":"博图","script":"{audio: \"2\",trigger: {player: \"phaseAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar history=player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.isPhaseUsing();\n\t\t\t\t\t});\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tvar suit=get.suit(history[i].card);\n\t\t\t\t\t\tif(suit) suits.add(suit);\n\t\t\t\t\t}\n\t\t\t\t\treturn suits.length==4;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t},}","info":"回合结束时，若你本回合出牌阶段内使用的牌包含四种花色，则你可以进行一个额外回合。"},"qixi":{"name":"奇袭","script":"{audio: \"2\",audioname: [\"re_ganning\",\"re_heqi\"],enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},position: \"he\",viewAs: {name: \"guohe\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t},prompt: \"将一张黑色牌当过河拆桥使用\",check: function (card){return 4-get.value(card)},ai: {basic: {order: \"9\",useful: \"1\",value: \"5\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tvar js=target.getCards('j');\n\t\t\t\t\t\t\t\tif(js.length){\n\t\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\n\t\t\t\t\t\t\t\t\tif(jj.name=='guohe'||js.length>1||get.effect(target,jj,target,player)<0){\n\t\t\t\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.getEquip('baiyin')&&target.isDamaged()&&\n\t\t\t\t\t\t\t\t\tget.recoverEffect(target,player,player)>0){\n\t\t\t\t\t\t\t\t\tif(target.hp==1&&!target.hujia) return 1.6;\n\t\t\t\t\t\t\t\t\tif(target.hp==2) return 0.01;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\n\t\t\t\t\t\t\tvar noe2=(es.filter(function(esx){\n\t\t\t\t\t\t\t\treturn get.value(esx,target)>0;\n\t\t\t\t\t\t\t}).length==0);\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\n\t\t\t\t\t\t\tif(noh&&(noe||noe2)) return 0;\n\t\t\t\t\t\t\tif(att<=0&&!target.countCards('he')) return 1.5;\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {loseCard: \"1\",discard: \"1\",},},}","info":"你可以将一张黑色牌当做【过河拆桥】使用。"},"fenwei":{"name":"奋威","script":"{skillAnimation: \"true\",animationColor: \"wood\",audio: \"2\",audioname: [\"heqi\"],unique: \"true\",mark: \"true\",limited: \"true\",trigger: {global: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\tif(event.getParent().triggeredTargets3.length>1) return false;\n\t\t\t\t\tif(get.type(event.card)!='trick') return false;\n\t\t\t\t\tif(get.info(event.card).multitarget) return false;\n\t\t\t\t\tif(event.targets.length<2) return false;\n\t\t\t\t\tif(player.storage.fenwei) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.fenwei=false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('fenwei'),\n\t\t\t\t\t\t[1,trigger.targets.length],function(card,player,target){\n\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tif(game.phaseNumber>game.players.length*2&&trigger.targets.length>=game.players.length-1&&!trigger.excluded.contains(target)){\n\t\t\t\t\t\t\treturn -get.effect(target,trigger.card,trigger.player,_status.event.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}).set('targets',trigger.targets);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.awakenSkill('fenwei');\n\t\t\t\t\t\tplayer.logSkill('fenwei',result.targets);\n\t\t\t\t\t\tplayer.storage.fenwei=true;\n\t\t\t\t\t\ttrigger.getParent().excluded.addArray(result.targets);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"limited\",},}","info":"限定技，当一名角色使用的锦囊牌指定了至少两名角色为目标时，你可以令此牌对其中任意名角色无效。"},"reqianxun":{"name":"谦逊","script":"{init: function (player){\n\t\t\t\t\tif(!player.storage.reqianxun2) player.storage.reqianxun2=[];\n\t\t\t\t},audio: \"2\",trigger: {target: \"useCardToBegin\",player: \"judgeBefore\",},filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')==0) return false;\n\t\t\t\t\tif(event.parent.name=='phaseJudge'){\n\t\t\t\t\t\tif(lib.skill.reqianxun.trigger.player=='judgeBefore'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn event.result&&event.result.judge!=0;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.name=='judge') return false;\n\t\t\t\t\tif(event.targets&&event.targets.length>1) return false;\n\t\t\t\t\tif(event.card&&get.type(event.card)=='trick'&&event.player!=player) return true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.reqianxun2=player.storage.reqianxun2.concat(player.getCards('h'));\n\t\t\t\t\tgame.addVideo('storage',player,['reqianxun2',get.cardsInfo(player.storage.reqianxun2),'cards']);\n\t\t\t\t\tplayer.lose(player.getCards('h'),ui.special,'toStorage');\n\t\t\t\t\tplayer.addSkill('reqianxun2');\n\t\t\t\t},ai: {effect: function (card,player,target){\n\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\tif(player==target) return;\n\t\t\t\t\t\tvar type=get.type(card);\n\t\t\t\t\t\tvar nh=target.countCards();\n\t\t\t\t\t\tif(type=='trick'){\n\t\t\t\t\t\t\tif(!get.tag(card,'multitarget')||get.info(card).singleCard){\n\t\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\t\tif(nh<3||target.hp<=2) return 0.8;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn [1,nh];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(type=='delay'){\n\t\t\t\t\t\t\treturn [0.5,0.5];\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"每当一张延时类锦囊牌或其他角色使用的普通锦囊牌生效时，若你是此牌的唯一目标，你可以将所有手牌置于你的武将牌上，若如此做，此回合结束时，你获得你武将牌上的所有牌。"},"relianying":{"name":"连营","script":"{audio: \"2\",trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.hs&&evt.hs.length;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar num=trigger.getl(player).hs.length;\n\t\t\t\t\tplayer.chooseTarget(get.prompt('relianying'),'令至多'+get.cnNumber(num)+'名角色各摸一张牌',[1,num]).ai=function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player==target) return get.attitude(player,target)+10;\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('relianying',result.targets);\n\t\t\t\t\t\tgame.asyncDraw(result.targets);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {threaten: \"0.8\",effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='guohe'||card.name=='liuxinghuoyu') return 0.5;\n\t\t\t\t\t\t},},noh: \"true\",},}","info":"当你失去最后的手牌时，你可以令至多X名角色各摸一张牌（X为你此次失去的手牌数）。"},"reguose":{"name":"国色","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",discard: \"false\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'diamond'})>0;\n\t\t\t\t},prepare: \"throw\",position: \"he\",filterCard: {suit: \"diamond\",},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hasJudge('lebu')) return true;\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\treturn lib.filter.targetEnabled({name:'lebu'},player,target);\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(target.hasJudge('lebu')){\n\t\t\t\t\t\ttarget.discard(target.getJudge('lebu'));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar next=player.useCard({name:'lebu'},target,cards);\n\t\t\t\t\t\tnext.animate=false;\n\t\t\t\t\t\tnext.audio=false;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')) return -get.effect(target,{name:'lebu'},player,target);\n\t\t\t\t\t\t\treturn get.effect(target,{name:'lebu'},player,target);\n\t\t\t\t\t\t},},order: \"9\",},}","info":"出牌阶段限一次，你可以选择一项：将一张方片花色牌当做【乐不思蜀】使用；或弃置一张方片花色牌并弃置场上的一张【乐不思蜀】。选择完成后，你摸一张牌。"},"liuli":{"name":"流离","script":"{audio: \"2\",audioname: [\"re_daqiao\",\"daxiaoqiao\"],trigger: {target: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(player.countCards('he')==0) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.inRange(current)&&current!=event.player&&\n\t\t\t\t\t\t\tcurrent!=player&&lib.filter.targetEnabled(event.card,event.player,current);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\tvar trigger=_status.event;\n\t\t\t\t\t\t\tif(player.inRange(target)&&target!=trigger.source){\n\t\t\t\t\t\t\t\tif(lib.filter.targetEnabled(trigger.card,trigger.source,target)) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tif(_status.event.player.countCards('h','shan')){\n\t\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.attitude(_status.event.player,target)<5){\n\t\t\t\t\t\t\t\treturn 6-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==1&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\t\treturn 10-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==2&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\t\treturn 8-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('liuli'),\n\t\t\t\t\t\tprompt2:'弃置一张牌，将此【杀】转移给攻击范围内的一名其他角色',\n\t\t\t\t\t\tsource:trigger.player,\n\t\t\t\t\t\tcard:trigger.card,\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill(event.name,target);\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tvar evt=trigger.getParent();\n\t\t\t\t\t\tevt.triggeredTargets2.remove(player);\n\t\t\t\t\t\tevt.targets.remove(player);\n\t\t\t\t\t\tevt.targets.push(target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(target.countCards('he')==0) return;\n\t\t\t\t\t\t\tif(card.name!='sha') return;\n\t\t\t\t\t\t\tvar min=1;\n\t\t\t\t\t\t\tvar friend=get.attitude(player,target)>0;\n\t\t\t\t\t\t\tvar vcard={name:'shacopy',nature:card.nature,suit:card.suit};\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(player!=players[i]&&\n\t\t\t\t\t\t\t\t\tget.attitude(target,players[i])<0&&\n\t\t\t\t\t\t\t\t\ttarget.canUse(card,players[i])){\n\t\t\t\t\t\t\t\t\tif(!friend) return 0;\n\t\t\t\t\t\t\t\t\tif(get.effect(players[i],vcard,player,player)>0){\n\t\t\t\t\t\t\t\t\t\tif(!player.canUse(card,players[0])){\n\t\t\t\t\t\t\t\t\t\t\treturn [0,0.1];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tmin=0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn min;\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标时，你可以弃置一张牌并将此【杀】转移给攻击范围内的一名其他角色（不能是此【杀】的使用者）。"},"rekurou":{"name":"苦肉","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t},ai: {order: \"8\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<=2) return player.countCards('h')==0?1:0;\n\t\t\t\t\t\t\tif(player.countCards('h',{name:'sha',color:'red'})) return 1;\n\t\t\t\t\t\t\treturn player.countCards('h')<=player.hp?1:0;\n\t\t\t\t\t\t},},effect: function (card,player,target){\n\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,1];\n\t\t\t\t\t\t\treturn 1.2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.tag(card,'loseHp')){\n\t\t\t\t\t\t\tif(player.hp<=1) return;\n\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"出牌阶段限一次，你可以弃置一张牌，然后失去1点体力。"},"zhaxiang":{"name":"诈降","script":"{trigger: {player: \"loseHpEnd\",},forced: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\tvar num=trigger.num;\n\t\t\t\t\tplayer.draw(3*num);\n\t\t\t\t\tif(_status.currentPhase==player){\n\t\t\t\t\t\tif(!player.storage.zhaxiang2) player.storage.zhaxiang2=0;\n\t\t\t\t\t\tplayer.storage.zhaxiang2+=num;\n\t\t\t\t\t\tplayer.addTempSkill('zhaxiang2',{player:'phaseAfter'});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.trySkillAudio('zhaxiang',player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maihp: \"true\",},}","info":"锁定技 每当你失去1点体力后，你摸三张牌。然后若此时是你的出牌阶段，则直到回合结束，你使用红色【杀】无距离限制且不能被【闪】响应，你可以额外使用一张【杀】。"},"wushuang":{"name":"无双","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"re_lvbu\",\"shen_lvbu\"],forced: \"true\",locked: \"true\",group: [\"wushuang1\",\"wushuang2\"],}","info":"锁定技，当你使用【杀】或【决斗】指定目标后，你令此牌需要依次使用或打出两张【闪】或【杀】响应。"},"new_liyu":{"name":"利驭","script":"{audio: \"liyu\",trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player!=player&&event.player.isAlive()&&event.player.countGainableCards(player,'hej')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.gainPlayerCard(get.prompt('new_liyu',trigger.player),trigger.player,'hej','visibleMove').set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar evt=_status.event.target;\n\t\t\t\t\t\tif(get.attitude(player,evt)>0&&get.position(card)=='j') return 4+get.value(card);\n\t\t\t\t\t\tif(get.type(card)=='equip'){\n\t\t\t\t\t\t\tif(get.attitude(player,evt)>0&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn (player.canUse({name:'juedou'},current)&&current!=evt.target&&get.effect(current,{name:'juedou'},player,player)>2);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn (player.canUse({name:'juedou'},current)&&current!=evt&&current!=player&&get.effect(current,{name:'juedou'},player,player)<0);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse return 4;\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn 3;\n\t\t\t\t\t}).set('logSkill',['new_liyu',trigger.player]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(get.type(result.cards[0])!='equip'){\n\t\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current!=trigger.player&&player.canUse('juedou',current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger.player.chooseTarget(true,function(card,player,target){\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\t\treturn evt.player.canUse({name:'juedou'},target)&&target!=_status.event.player;\n\t\t\t\t\t\t},'请选择一名角色，视为'+get.translation(player)+'对其使用【决斗】').set('ai',function(target){\n\t\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\t\treturn get.effect(target,{name:'juedou'},evt.player,_status.event.player)-2;\n\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.targets){\n\t\t\t\t\t\tplayer.useCard({name:'juedou',isCard:true},result.targets[0],'noai');\n\t\t\t\t\t}\n\t\t\t\t},ai: {halfneg: \"true\",},}","info":"当你使用【杀】对一名其他角色造成伤害后，你可以获得其一张牌。若此牌不为装备牌，则其摸一张牌。若此牌为装备牌，则视为你对其选择的另一名角色使用一张【决斗】。"},"jijiu":{"name":"急救","script":"{audio: \"2\",audioname: [\"re_huatuo\"],enable: \"chooseToUse\",viewAsFilter: function (player){\n\t\t\t\t\treturn player!=_status.currentPhase&&player.countCards('he',{color:'red'})>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},position: \"he\",viewAs: {name: \"tao\",},prompt: \"将一张红色牌当桃使用\",check: function (card){return 15-get.value(card)},ai: {threaten: \"1.5\",basic: {order: function (card,player){\n\t\t\t\t\t\t\tif(player.hasSkillTag('pretao')) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},useful: [8,6.5,5,4],value: [8,6.5,5,4],},result: {target: \"2\",target_use: function (player,target){\n\t\t\t\t\t\t\t// if(player==target&&player.hp<=0) return 2;\n\t\t\t\t\t\t\tif(player.hasSkillTag('nokeep',true,null,true)) return 2;\n\t\t\t\t\t\t\tvar nd=player.needsToDiscard();\n\t\t\t\t\t\t\tvar keep=false;\n\t\t\t\t\t\t\tif(nd<=0){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nd==1&&target.hp>=2&&target.countCards('h','tao')<=1){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\t\t\tif(target.hp>=2&&keep&&target.hasFriend()){\n\t\t\t\t\t\t\t\tif(target.hp>2||nd==0) return 0;\n\t\t\t\t\t\t\t\tif(target.hp==2){\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(target!=current&&get.attitude(target,current)>=3){\n\t\t\t\t\t\t\t\t\t\t\tif(current.hp<=1) return true;\n\t\t\t\t\t\t\t\t\t\t\tif((mode=='identity'||mode=='versus'||mode=='chess')&&current.identity=='zhu'&&current.hp<=2) return true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<0&&target!=player&&target.identity!='zhu') return 0;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att<3&&att>=0&&player!=target) return 0;\n\t\t\t\t\t\t\tvar tri=_status.event.getTrigger();\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='fan'&&target.identity=='fan'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='fan'&&tri.source!=target){\n\t\t\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(current.identity=='fan'){\n\t\t\t\t\t\t\t\t\t\t\treturn current.countCards('h','tao');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif(num>1&&player==target) return 2;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='zhu'&&target.identity=='nei'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='zhong'){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='stone'&&target.isMin()&&\n\t\t\t\t\t\t\tplayer!=target&&tri&&tri.name=='dying'&&player.side==target.side&&\n\t\t\t\t\t\t\ttri.source!=target.getEnemy()){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},},tag: {recover: \"1\",save: \"1\",},},}","info":"你的回合外，你可以将一张红色牌当做【桃】使用。"},"new_reqingnang":{"name":"青囊","script":"{subSkill: {off: {sub: \"true\",},off2: {sub: \"true\",},},audio: \"qingnang\",enable: \"phaseUse\",filterCard: \"true\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(game.countPlayer(function(current){\n\t\t\t\t\t\treturn (get.recoverEffect(current,player,player)>0&&get.attitude(player,current)>2);\n\t\t\t\t\t})>1&&get.color(card)=='black'&&player.countCards('h',{color:'red'})>0) return 3-get.value(card);\n\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('new_reqingnang_off2');\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hp>=target.maxHp||target.hasSkill('new_reqingnang_off')) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.addTempSkill('new_reqingnang_off');\n\t\t\t\t\tif(get.color(cards[0])=='black') player.addTempSkill('new_reqingnang_off2');\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp==1) return 5;\n\t\t\t\t\t\t\tif(player==target&&player.countCards('h')>player.hp) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},},threaten: \"2\",},}","info":"出牌阶段，你可以弃置一张手牌，令一名本回合内未成为过〖青囊〗的目标的角色回复一点体力。若你弃置的是黑色牌，则你本回合内不能再发动〖青囊〗。"},"rerende":{"name":"仁德","script":"{audio: \"2\",audioname: [\"gz_jun_liubei\",\"shen_caopi\"],enable: \"phaseUse\",filterCard: \"true\",selectCard: [1,null],discard: \"false\",lose: \"false\",delay: \"false\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player.storage.rerende2&&player.storage.rerende2.contains(target)) return false;\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},onremove: [\"rerende\",\"rerende2\"],check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du') return 0;\n\t\t\t\t\tif(!ui.selected.cards.length&&card.name=='du') return 20;\n\t\t\t\t\tvar player=get.owner(card);\n\t\t\t\t\tif(ui.selected.cards.length>=Math.max(2,player.countCards('h')-player.hp)) return 0;\n\t\t\t\t\tif(player.hp==player.maxHp||player.storage.rerende<0||player.countCards('h')<=1){\n\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(players[i].hasSkill('haoshi')&&\n\t\t\t\t\t\t\t\t!players[i].isTurnedOver()&&\n\t\t\t\t\t\t\t\t!players[i].hasJudge('lebu')&&\n\t\t\t\t\t\t\t\tget.attitude(player,players[i])>=3&&\n\t\t\t\t\t\t\t\tget.attitude(players[i],player)>=3){\n\t\t\t\t\t\t\t\treturn 11-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.countCards('h')>player.hp) return 10-get.value(card);\n\t\t\t\t\t\tif(player.countCards('h')>2) return 6-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\tif(evt&&evt.name=='phaseUse'&&!evt.rerende){\n\t\t\t\t\t\tvar next=game.createEvent('rerende_clear');\n\t\t\t\t\t\t_status.event.next.remove(next);\n\t\t\t\t\t\tevt.after.push(next);\n\t\t\t\t\t\tevt.rerende=true;\n\t\t\t\t\t\tnext.player=player;\n\t\t\t\t\t\tnext.setContent(lib.skill.rerende1.content);\n\t\t\t\t\t}\n\t\t\t\t\tif(!Array.isArray(player.storage.rerende2)){\n\t\t\t\t\t\tplayer.storage.rerende2=[];\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.rerende2.push(target);\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\tif(typeof player.storage.rerende!='number'){\n\t\t\t\t\t\tplayer.storage.rerende=0;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.rerende>=0){\n\t\t\t\t\t\tplayer.storage.rerende+=cards.length;\n\t\t\t\t\t\tif(player.storage.rerende>=2){\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tif(lib.filter.cardUsable({name:'sha'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.canUse('sha',current);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(lib.filter.cardUsable({name:'tao'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.canUse('tao',current);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tlist.push(['基本','','tao']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(lib.filter.cardUsable({name:'jiu'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.canUse('jiu',current);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tlist.push(['基本','','jiu']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\t\tplayer.chooseButton(['是否视为使用一张基本牌？',[list,'vcard']]).set('ai',function(button){\n\t\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\t\tvar card={name:button.link[2],nature:button.link[3]};\n\t\t\t\t\t\t\t\t\tif(card.name=='tao'){\n\t\t\t\t\t\t\t\t\t\tif(player.hp==1||(player.hp==2&&!player.hasShan())||player.needsToDiscard()){\n\t\t\t\t\t\t\t\t\t\t\treturn 5;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\t\treturn player.canUse(card,current)&&get.effect(current,card,player,player)>0\n\t\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\t\tif(card.nature=='fire') return 2.95;\n\t\t\t\t\t\t\t\t\t\t\tif(card.nature=='thunder'||card.nature=='ice') return 2.92;\n\t\t\t\t\t\t\t\t\t\t\treturn 2.9;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(card.name=='jiu'){\n\t\t\t\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.storage.rerende=-1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result&&result.bool&&result.links[0]){\n\t\t\t\t\t\tvar card={name:result.links[0][2],nature:result.links[0][3]};\n\t\t\t\t\t\tplayer.chooseUseTarget(card,true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {fireAttack: \"true\",order: function (skill,player){\n\t\t\t\t\t\tif(player.hp<player.maxHp&&player.storage.rerende<2&&player.countCards('h')>1){\n\t\t\t\t\t\t\treturn 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 4;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0;\n\t\t\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0;\n\t\t\t\t\t\t\t\treturn -10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')) return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tvar np=player.countCards('h');\n\t\t\t\t\t\t\tif(player.hp==player.maxHp||player.storage.rerende<0||player.countCards('h')<=1){\n\t\t\t\t\t\t\t\tif(nh>=np-1&&np<=player.hp&&!target.hasSkill('haoshi')) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn Math.max(1,5-nh);\n\t\t\t\t\t\t},},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player==target&&get.type(card)=='equip'){\n\t\t\t\t\t\t\t\tif(player.countCards('e',{subtype:get.subtype(card)})){\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn current!=player&&get.attitude(player,current)>0;\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"0.8\",},}","info":"出牌阶段，你可以将至少一张手牌交给其他角色，然后你于此阶段内不能再以此法交给该角色牌；若你于此阶段内给出的牌首次达到两张，你可以视为使用一张基本牌"},"jijiang":{"name":"激将","script":"{audio: \"jijiang1\",audioname: [\"liushan\",\"re_liubei\",\"re_liushan\",\"ol_liushan\"],unique: \"true\",group: [\"jijiang1\"],zhuSkill: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('jijiang')||!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='shu';\n\t\t\t\t\t})) return false;\n\t\t\t\t\treturn !event.jijiang&&(event.type!='phase'||!player.hasSkill('jijiang3'));\n\t\t\t\t},enable: [\"chooseToUse\",\"chooseToRespond\"],viewAs: {name: \"sha\",},filterCard: function (){return false},selectCard: \"-1\",ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.3;\n\t\t\t\t\t},respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.hasZhuSkill('jijiang')||!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.group=='shu';\n\t\t\t\t\t\t})) return false;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"主公技，当你需要使用或打出【杀】时，你可以令其他蜀势力角色依次选择是否打出一张【杀】。若有角色响应，则你视为使用或打出了此【杀】。"},"lijian":{"name":"离间","script":"{audio: \"2\",audioname: [\"re_diaochan\"],enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.sex=='male';\n\t\t\t\t\t})>1;\n\t\t\t\t},check: function (card){return 10-get.value(card)},filterCard: \"true\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(target.sex!='male') return false;\n\t\t\t\t\tif(ui.selected.targets.length==1){\n\t\t\t\t\t\treturn target.canUse({name:'juedou'},ui.selected.targets[0]);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},targetprompt: [\"先出杀\",\"后出杀\"],selectTarget: \"2\",multitarget: \"true\",content: function (){\n\t\t\t\t\ttargets[1].useCard({name:'juedou',isCard:true},'nowuxie',targets[0],'noai').animate=false;\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\t\treturn -3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'juedou'},ui.selected.targets[0],target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},expose: \"0.4\",threaten: \"3\",},}","info":"出牌阶段限一次，你可以弃置一张牌，视为一名男性角色对另一名男性角色使用一张【决斗】（不可被【无懈可击】响应）。"},"rebiyue":{"name":"闭月","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\tvar num=1;\n\t\t\t\t\tif(!player.countCards('h')){\n\t\t\t\t\t\tnum=2;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t},}","info":"结束阶段，你可以摸一张牌，若你没有手牌，则改为摸两张牌。"},"rejizhi":{"name":"集智","script":"{audio: \"2\",audioname: [\"lukang\"],locked: \"false\",trigger: {player: \"useCard\",},frequent: \"true\",filter: function (event){\n\t\t\t\t\treturn (get.type(event.card,'trick')=='trick'&&event.card.isCard);\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.rejizhi=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.card=result[0];\n\t\t\t\t\tif(get.type(event.card)=='basic'){\n\t\t\t\t\t\tplayer.chooseBool('是否弃置'+get.translation(event.card)+'并令本回合手牌上限+1？').set('ai',function(evt,player){\n\t\t\t\t\t\t\treturn _status.currentPhase==player&&player.needsToDiscard(-3)&&_status.event.value<6;\n\t\t\t\t\t\t}).set('value',get.value(event.card,player));\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(event.card);\n\t\t\t\t\t\tplayer.storage.rejizhi++;\n\t\t\t\t\t\tif(_status.currentPhase==player){\n\t\t\t\t\t\t\tplayer.markSkill('rejizhi');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",noautowuxie: \"true\",},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.storage.rejizhi;\n\t\t\t\t\t},},intro: {content: \"本回合手牌上限+#\",},group: \"rejizhi_clear\",subSkill: {clear: {trigger: {global: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.rejizhi=0;\n\t\t\t\t\t\t\tplayer.unmarkSkill('rejizhi');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"当你使用锦囊牌时，你可以摸一张牌。若此牌为基本牌，则你可以弃置之，然后令本回合手牌上限+1。"},"reqicai":{"name":"奇才","script":"{mod: {targetInRange: function (card,player,target,now){\n\t\t\t\t\t\tvar type=get.type(card);\n\t\t\t\t\t\tif(type=='trick'||type=='delay') return true;\n\t\t\t\t\t},canBeDiscarded: function (card){\n\t\t\t\t\t\tif(get.position(card)=='e'&&['equip2','equip5'].contains(get.subtype(card))) return false;\n\t\t\t\t\t},},}","info":"锁定技，你使用锦囊牌无距离限制，你装备区内的防具牌和宝物牌不能被其他角色弃置。"},"rezhiheng":{"name":"制衡","script":"{audio: \"2\",audioname: [\"shen_caopi\"],enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: function (card,player,event){\n\t\t\t\tevent=event||_status.event;\n\t\t\t\tif(typeof event!='string') event=event.getParent().name;\n\t\t\t\tvar mod=game.checkMod(card,player,event,'unchanged','cardDiscardable',player);\n\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\treturn true;\n\t\t\t},discard: \"false\",lose: \"false\",delay: \"false\",selectCard: [1,null],check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(get.position(card)=='h'&&!player.countCards('h','du')&&(player.hp>2||!player.countCards('h',function(card){\n\t\t\t\t\t\treturn get.value(card)>=8;\n\t\t\t\t\t}))){\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\tevent.num=1;\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tif(!hs.length) event.num=0;\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tif(!cards.contains(hs[i])){\n\t\t\t\t\t\t\tevent.num=0;break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw(event.num+cards.length);\n\t\t\t\t},subSkill: {draw: {trigger: {player: \"loseEnd\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event.getParent(2).skill!='rezhiheng'&&event.getParent(2).skill!='jilue_zhiheng') return false;\n\t\t\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\t\tif(event.cards[i].original=='h') return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.addTempSkill('rezhiheng_delay',trigger.getParent(2).skill+'After');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},delay: {sub: \"true\",},},ai: {order: \"1\",result: {player: \"1\",},threaten: \"1.55\",},}","info":"出牌阶段限一次，你可以弃置任意张牌并摸等量的牌，若你在发动〖制衡〗时弃置了所有手牌，则你多摸一张牌。"},"rejiuyuan":{"name":"救援","script":"{global: \"rejiuyuan2\",audio: \"2\",zhuSkill: \"true\",}","info":"主公技，其他吴势力角色对自己使用【桃】时，若其体力值大于你，则其可以选择令你回复1点体力，然后其摸1张牌。"},"xiaoji":{"name":"枭姬","script":"{audio: \"2\",audioname: [\"sp_sunshangxiang\",\"re_sunshangxiang\"],trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.player==player&&evt.es&&evt.es.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.getl(player).es.length;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.count>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('xiaoji')).set('frequentSkill','xiaoji').ai=lib.filter.all;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xiaoji');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {noe: \"true\",reverseEquip: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},},}","info":"当你失去一张装备区内的牌后，你可以摸两张牌。"},"rejieyin":{"name":"结姻","script":"{audio: \"2\",enable: \"phaseUse\",filterCard: \"true\",usable: \"1\",position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(get.position(card)=='e'){\n\t\t\t\t\t\tvar subtype=get.subtype(card);\n\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.hp!=player.hp&&get.attitude(player,current)>0&&!current.countCards('e',{subtype:subtype});\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.countCards('h',{subtype:subtype})) return 20-get.value(card);\n\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.countCards('e')) return 0;\n\t\t\t\t\t\tif(player.countCards('h',{type:'equip'})) return 0;\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.sex!='male') return false;\n\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\tif(!card) return false;\n\t\t\t\t\tif(get.position(card)=='e'&&!target.isEmpty(get.subtype(card))) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},discard: \"false\",delay: \"false\",lose: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(get.position(cards[0])=='e') event._result={index:0};\n\t\t\t\t\telse if(get.type(cards[0])!='equip'||!target.isEmpty(get.subtype(cards[0]))) event._result={index:1};\n\t\t\t\t\telse player.chooseControl().set('choiceList',[\n\t\t\t\t\t\t'将'+get.translation(cards[0])+'置入'+get.translation(target)+'的装备区',\n\t\t\t\t\t\t'弃置'+get.translation(cards[0]),\n\t\t\t\t\t]).ai=function(){return 1};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.$give(cards,target,false);\n\t\t\t\t\t\ttarget.equip(cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.hp>target.hp){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tif(target.isDamaged()) target.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse if(player.hp<target.hp){\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\tif(player.isDamaged()) player.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\tif(player.countCards('h',{subtype:get.subtype(es[i])})) return 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar goon=function(){\n\t\t\t\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\t\tif(player.countCards('h',{subtype:get.subtype(es[i])})) return true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hp<target.hp){\n\t\t\t\t\t\t\t\tif(player.isHealthy()){\n\t\t\t\t\t\t\t\t\tif(!player.needsToDiscard(1)||goon()) return 0.1;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 1.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hp>target.hp){\n\t\t\t\t\t\t\t\tif(target.isHealthy()){\n\t\t\t\t\t\t\t\t\tif(!player.needsToDiscard(1)||goon()) return 0.1;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择一名男性角色并弃置一张手牌或将装备区内的一张装备牌置于其装备区，你与其体力较高的角色摸一张牌，体力值较低的角色回复1点体力。"},"reluoshen":{"name":"洛神","script":"{audio: \"2\",locked: \"false\",trigger: {player: \"phaseZhunbeiBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.addTempSkill('reluoshen_add');\n\t\t\t\t\tevent.cards=[];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar next=player.judge(function(card){\n\t\t\t\t\t\tif(get.color(card)=='black') return 1.5;\n\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t});\n\t\t\t\t\tif(get.mode()!='guozhan'&&!player.hasSkillTag('rejudge')) next.set('callback',function(){\n\t\t\t\t\t\tif(event.judgeResult.color=='black'&&get.position(card,true)=='o'){\n\t\t\t\t\t\t\tplayer.gain(card,'gain2').gaintag.add('reluoshen');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\telse next.set('callback',function(){\n\t\t\t\t\t\tif(event.judgeResult.color=='black') event.getParent().orderingCards.remove(card);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.cards.push(result.card);\n\t\t\t\t\t\tplayer.chooseBool('是否再次发动【洛神】？').set('frequentSkill','reluoshen');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.position(event.cards[i],true)!='o'){\n\t\t\t\t\t\t\t\tevent.cards.splice(i,1);\n\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.gain(event.cards,'gain2').gaintag.add('reluoshen');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.position(event.cards[i],true)!='o'){\n\t\t\t\t\t\t\t\tevent.cards.splice(i,1);i--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.gain(event.cards,'gain2').gaintag.add('reluoshen');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {add: {mod: {ignoredHandcard: function (card,player){\n\t\t\t\t\t\t\t\tif(card.hasGaintag('reluoshen')){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},cardDiscardable: function (card,player,name){\n\t\t\t\t\t\t\t\tif(name=='phaseDiscard'&&card.hasGaintag('reluoshen')){\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},onremove: function (player){\n\t\t\t\t\t\t\tplayer.removeGaintag('reluoshen');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"准备阶段，你可以进行判定，若结果为黑色则获得此判定牌，且可重复此流程直到出现红色的判定结果。你通过〖洛神〗获得的牌，不计入当前回合的手牌上限"},"reqingguo":{"name":"倾国","script":"{audio: \"2\",enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},position: \"he\",viewAs: {name: \"shan\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t},prompt: \"将一张黑色牌当闪打出\",check: function (){return 1},ai: {respondShan: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&current<0) return 0.6\n\t\t\t\t\t\t},},order: \"3\",basic: {useful: [7,2],value: [7,2],},result: {player: \"1\",},},}","info":"你可以将一张黑色牌当做【闪】使用或打出。"},"reguanxing":{"name":"观星","script":"{audio: \"guanxing\",audioname: [\"jiangwei\",\"re_jiangwei\",\"re_zhugeliang\",\"gexuan\"],trigger: {player: [\"phaseZhunbeiBegin\",\"phaseJieshuBegin\"],},frequent: \"true\",filter: function (event,player,name){\n\t\t\t\t\tif(name=='phaseJieshuBegin'){\n\t\t\t\t\t\treturn player.hasSkill('reguanxing_on');\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.swapPlayerAuto(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar num=game.countPlayer()<4?3:5;\n\t\t\t\t\tvar cards=get.cards(num);\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t\tvar top=[];\n\t\t\t\t\t\tvar judges=player.getCards('j');\n\t\t\t\t\t\tvar stopped=false;\n\t\t\t\t\t\tif(!player.hasWuxie()){\n\t\t\t\t\t\t\tfor(var i=0;i<judges.length;i++){\n\t\t\t\t\t\t\t\tvar judge=get.judge(judges[i]);\n\t\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\t\treturn judge(b)-judge(a);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(judge(cards[0])<0){\n\t\t\t\t\t\t\t\t\tstopped=true;break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar bottom;\n\t\t\t\t\t\tif(!stopped){\n\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.value(b,player)-get.value(a,player);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\t\tif(get.value(cards[0],player)<=5) break;\n\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom=cards;\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.triggername=='phaseZhunbeiBegin'&&top.length==0){\n\t\t\t\t\t\t\tplayer.addTempSkill('reguanxing_on');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(bottom.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(online,player,cards){\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tplayer=player||event.player;\n\t\t\t\t\t\tcards=cards||event.cards;\n\t\t\t\t\t\tevent.top=[];\n\t\t\t\t\t\tevent.bottom=[];\n\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('按顺序选择置于牌堆顶的牌（先选择的在上）',cards);\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('pointerdiv');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result='ai';\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevent.control=ui.create.control('ok','pileTop','pileBottom',function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link=='ok'){\n\t\t\t\t\t\t\t\tif(online){\n\t\t\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\t\t\ttop:[],\n\t\t\t\t\t\t\t\t\t\tbottom:[]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.top.push(event.top[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.bottom.push(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tvar i;\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.insertBefore(event.top[i].link,ui.cardPile.firstChild);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(event.dialog.buttons[i].classList.contains('glow')==false&&\n\t\t\t\t\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.contains('target')==false)\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.dialog.buttons[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(event.triggername=='phaseZhunbeiBegin'&&event.top.length==0){\n\t\t\t\t\t\t\t\t\t\tplayer.addTempSkill('reguanxing_on');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplayer.popup(get.cnNumber(event.top.length)+'上'+get.cnNumber(event.cards.length-event.top.length)+'下');\n\t\t\t\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(event.top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link=='pileTop'){\n\t\t\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆顶的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.status=false;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆底的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('selectable');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.button=function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link.classList.contains('target')){\n\t\t\t\t\t\t\t\tlink.classList.remove('target');\n\t\t\t\t\t\t\t\tevent.top.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link.classList.contains('glow')){\n\t\t\t\t\t\t\t\tlink.classList.remove('glow');\n\t\t\t\t\t\t\t\tevent.bottom.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(event.status){\n\t\t\t\t\t\t\t\tlink.classList.add('target');\n\t\t\t\t\t\t\t\tevent.top.unshift(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlink.classList.add('glow');\n\t\t\t\t\t\t\t\tevent.bottom.push(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.window=function(){\n\t\t\t\t\t\t\tfor(var i=0;i<_status.event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('target');\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('glow');\n\t\t\t\t\t\t\t\t_status.event.top.length=0;\n\t\t\t\t\t\t\t\t_status.event.bottom.length=0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t};\n\t\t\t\t\tevent.switchToAuto=switchToAuto;\n\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,true,event.player,event.cards);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.result=='ai'||!event.result){\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar top=event.result.top||[];\n\t\t\t\t\t\tvar bottom=event.result.bottom||[];\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(!top.contains(event.cards[i])&&!bottom.contains(event.cards[i])){\n\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.triggername=='phaseZhunbeiBegin'&&top.length==0){\n\t\t\t\t\t\t\tplayer.addTempSkill('reguanxing_on');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(event.cards.length-top.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {on: {sub: \"true\",},},}","info":"准备阶段，你可以观看牌堆顶的5张牌（存活角色小于4时改为3张），并将其以任意顺序置于牌堆项或牌堆底，若你将〖观星〗的牌都放在了牌堆底，则你可以在结束阶段再次发动〖观星〗。"},"kongcheng":{"name":"空城","script":"{mod: {targetEnabled: function (card,player,target,now){\n\t\t\t\t\t\tif(target.countCards('h')==0){\n\t\t\t\t\t\t\tif(card.name=='sha'||card.name=='juedou') return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"kongcheng1\",audio: \"kongcheng1\",audioname: [\"re_zhugeliang\"],ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\tif(player.countCards('h')!=1) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，当你没有手牌时，你不能成为【杀】或【决斗】的目标。"},"reyaowu":{"name":"耀武","script":"{trigger: {player: \"damageBegin3\",},audio: \"new_reyaowu\",forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.card&&(get.color(event.card)!='red'||event.source&&event.source.isAlive());\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger[get.color(trigger.card)!='red'?'player':'source'].draw();\n\t\t\t\t},}","info":"锁定技，当你受到牌造成的伤害时，若此牌为红色，则伤害来源摸一张牌；否则你摸一张牌。"},"xinleiji":{"name":"雷击","script":"{group: \"xinleiji_misa\",audio: \"2\",derivation: \"xinleiji_faq\",audioname: [\"boss_qinglong\"],trigger: {player: [\"useCard\",\"respond\"],},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='shan'||event.name=='useCard'&&event.card.name=='shandian';\n\t\t\t\t},judgeCheck: function (card,bool){\n\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\tif(suit=='spade'){\n\t\t\t\t\t\tif(bool&&card.number>1&&card.number<10) return 5;\n\t\t\t\t\t\treturn 4;\n\t\t\t\t\t}\n\t\t\t\t\tif(suit=='club') return 2;\n\t\t\t\t\treturn 0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.judge(lib.skill.xinleiji.judgeCheck);\n\t\t\t\t},ai: {useShan: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)){\n\t\t\t\t\t\t\t\tvar hastarget=game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn get.attitude(target,current)<0;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvar be=target.countCards('e',{color:'black'});\n\t\t\t\t\t\t\t\tif(target.countCards('h','shan')&&be){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkill('xinguidao')) return 0;\n\t\t\t\t\t\t\t\t\treturn [0,hastarget?target.countCards('he')/2:0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h','shan')&&target.countCards('h')>2){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkill('xinguidao')) return 0;\n\t\t\t\t\t\t\t\t\treturn [0,hastarget?target.countCards('h')/4:0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h')>3||(be&&target.countCards('h')>=2)){\n\t\t\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h')==0){\n\t\t\t\t\t\t\t\t\treturn [1.5,0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.countCards('h')==1&&!be){\n\t\t\t\t\t\t\t\t\treturn [1.2,0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(!target.hasSkill('xinguidao')) return [1,0.05];\n\t\t\t\t\t\t\t\treturn [1,Math.min(0.5,(target.countCards('h')+be)/4)];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"①当你使用或打出【闪】或【闪电】时，你可以进行判定。②当你的判定的判定牌生效后，若结果为：黑桃，你可对一名其他角色造成2点雷电伤害；梅花：你回复1点体力并可对一名其他其他角色造成1点雷电伤害。"},"xinguidao":{"name":"鬼道","script":"{audio: \"2\",trigger: {global: \"judge\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，'+get.prompt('xinguidao'),'he',function(card){\n\t\t\t\t\t\tif(get.color(card)!='black') return false;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0||result==0){\n\t\t\t\t\t\t\tif(trigger.player!=player) return 0;\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)<0;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tvar checkx=lib.skill.xinleiji.judgeCheck(card,true)-lib.skill.xinleiji.judgeCheck(judging);\n\t\t\t\t\t\t\t\tif(checkx>0) return checkx;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif(attitude>0){\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.respond(result.cards,'highlight','xinguidao','noOrdering');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.$gain2(trigger.player.judging[0]);\n\t\t\t\t\t\tplayer.gain(trigger.player.judging[0]);\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tif(get.suit(card)=='spade'&&card.number>1&&card.number<10) player.draw('nodelay');\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.orderingCards.addArray(result.cards);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"1\",},},}","info":"一名角色的判定牌生效前，你可以打出一张黑色牌作为判定牌并获得原判定牌。若你以此法打出的牌为黑桃2-9，则你摸一张牌。"},"huangtian":{"name":"黄天","script":"{unique: \"true\",audio: \"huangtian2\",audioname: [\"zhangjiao\",\"re_zhangjiao\"],global: \"huangtian2\",zhuSkill: \"true\",}","info":"主公技，其他群势力角色的出牌阶段限一次，其可以交给你一张【闪】或【闪电】。"},"reguhuo":{"name":"蛊惑","script":"{audio: \"2\",derivation: \"rechanyuan\",enable: [\"chooseToUse\",\"chooseToRespond\"],hiddenCard: function (player,name){\n\t\t\t\t\treturn (lib.inpile.contains(name)&&player.countCards('h')>0&&!player.hasSkill('reguhuo_phase'));\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('h')||player.hasSkill('reguhuo_phase')) return false;\n\t\t\t\t\tfor(var i of lib.inpile){\n\t\t\t\t\t\tif(i=='shan'||i=='wuxie') continue;\n\t\t\t\t\t\tvar type=get.type(i);\n\t\t\t\t\t\tif((type=='basic'||type=='trick')&&event.filterCard({name:i},player,event)) return true;\n\t\t\t\t\t\tif(i=='sha'&&(event.filterCard({name:i,nature:'ice'},player,event)||event.filterCard({name:i,nature:'fire'},player,event)||event.filterCard({name:i,nature:'thunder'},player,event))) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i of lib.inpile){\n\t\t\t\t\t\t\tif(i=='shan'||i=='wuxie') continue;\n\t\t\t\t\t\t\tvar type=get.type(i);\n\t\t\t\t\t\t\tif(type=='basic'||type=='trick') list.push([type,'',i]);\n\t\t\t\t\t\t\tif(i=='sha'){\n\t\t\t\t\t\t\t\tlist.push([type,'',i,'fire']);\n\t\t\t\t\t\t\t\tlist.push([type,'',i,'thunder']);\n\t\t\t\t\t\t\t\tlist.push([type,'',i,'ice']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('蛊惑',[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\treturn evt.filterCard({name:button.link[2],nature:button.link[3]},player,evt);\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar hasEnemy=game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&!current.hasSkill('rechanyuan')&&(get.realAttitude||get.attitude)(current,player)<0;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar card={name:button.link[2],nature:button.link[3]};\n\t\t\t\t\t\tvar val=_status.event.getParent().type=='phase'?player.getUseValue(card):1;\n\t\t\t\t\t\tif(val<=0) return 0;\n\t\t\t\t\t\tif(hasEnemy){\n\t\t\t\t\t\t\tif(!player.countCards('h',function(cardx){\n\t\t\t\t\t\t\t\tif(card.name==cardx.name){\n\t\t\t\t\t\t\t\t\tif(card.name!='sha') return true;\n\t\t\t\t\t\t\t\t\treturn get.nature(card)==get.nature(cardx);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\treturn 3*val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tviewAs:{\n\t\t\t\t\t\t\t\tname:links[0][2],\n\t\t\t\t\t\t\t\tnature:links[0][3],\n\t\t\t\t\t\t\t\tsuit:'none',\n\t\t\t\t\t\t\t\tnumber:null,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tvar hasEnemy=game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=player&&!current.hasSkill('rechanyuan')&&(get.realAttitude||get.attitude)(current,player)<0;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvar cardx=lib.skill.reguhuo_backup.viewAs;\n\t\t\t\t\t\t\t\tif(hasEnemy){\n\t\t\t\t\t\t\t\t\tif(card.name==cardx.name&&(card.name!='sha'||card.nature==cardx.nature)) return 10;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tposition:'h',\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links){\n\t\t\t\t\t\treturn '将一张牌当做'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {fireAttack: \"true\",respondShan: \"true\",respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('h')||player.hasSkill('reguhuo_phase')) return false;\n\t\t\t\t\t},order: \"10\",result: {player: \"1\",},threaten: \"1.3\",},group: [\"reguhuo_shan\",\"reguhuo_wuxie\",\"reguhuo_guess\"],}","info":"每名角色的回合限一次，你可以扣置一张手牌当作一张基本牌或普通锦囊牌使用或打出。其他角色同时选择是否质疑。然后，你展示此牌。若有质疑的角色：若此牌为假，则此牌作废，且所有质疑者各摸一张牌；为真，则所有质疑角色于此牌结算完成后依次弃置一张牌或失去1点体力，并获得技能〖缠怨〗。"},"rehuashen":{"name":"化身","script":"{audio: \"2\",unique: \"true\",direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\t_status.noclearcountdown=true;\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar cards=player.storage.rehuashen.character.slice(0);\n\t\t\t\t\tvar skills=[];\n\t\t\t\t\tvar sto=player.storage.rehuashen;\n\t\t\t\t\tfor(var i in player.storage.rehuashen.map){\n\t\t\t\t\t\tskills.addArray(player.storage.rehuashen.map[i]);\n\t\t\t\t\t}\n\t\t\t\t\tvar cond='out';\n\t\t\t\t\tif(event.triggername=='phaseBegin'){\n\t\t\t\t\t\tcond='in';\n\t\t\t\t\t}\n\t\t\t\t\tskills.randomSort();\n\t\t\t\t\tskills.sort(function(a,b){\n\t\t\t\t\t\treturn get.skillRank(b,cond)-get.skillRank(a,cond);\n\t\t\t\t\t});\n\t\t\t\t\tevent.aiChoice=skills[0];\n\t\t\t\t\tvar choice='更换技能';\n\t\t\t\t\tif(event.aiChoice==player.storage.rehuashen.current2||get.skillRank(event.aiChoice,cond)<1) choice='弃置化身';\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send(function(cards,id){\n\t\t\t\t\t\t\tvar dialog=ui.create.dialog('是否发动【化身】？',[cards,'character']);\n\t\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t\t},cards,event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog=ui.create.dialog(get.prompt('rehuashen'),[cards,'character']);\n\t\t\t\t\tevent.dialog.videoId=event.videoId;\n\t\t\t\t\tif(!event.isMine()){\n\t\t\t\t\t\tevent.dialog.style.display='none';\n\t\t\t\t\t}\n\t\t\t\t\tif(event.triggername=='rehuashen') event._result={control:'更换技能'};\n\t\t\t\t\telse player.chooseControl('弃置化身','更换技能','cancel2').set('ai',function(){\n\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t}).set('choice',choice);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.control=result.control;\n\t\t\t\t\tif(event.control=='cancel2'){\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tevent.finish();return;\n\t\t\t\t\t}\n\t\t\t\t\tif(!event.logged){player.logSkill('rehuashen');event.logged=true}\n\t\t\t\t\tvar next=player.chooseButton(true).set('dialog',event.videoId);\n\t\t\t\t\tif(event.control=='弃置化身'){\n\t\t\t\t\t\tnext.set('selectButton',[1,2]);\n\t\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\t\treturn button.link!=_status.event.current;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('current',player.storage.rehuashen.current);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\t\treturn player.storage.rehuashen.map[button.link].contains(_status.event.choice)?2.5:1+Math.random();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('choice',event.aiChoice);\n\t\t\t\t\t}\n\t\t\t\t\tvar prompt=event.control=='弃置化身'?'选择弃置至多两张化身':'选择要切换的化身';\n\t\t\t\t\tvar func=function(id,prompt){\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\tdialog.content.childNodes[0].innerHTML=prompt;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send(func,event.videoId,prompt);\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isMine()){\n\t\t\t\t\t\tfunc(event.videoId,prompt);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&event.control!='弃置化身'){\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\tvar func=function(card,id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\tif(dialog.buttons[i].link==card){\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('selectedx');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('unselectable');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send(func,event.card,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.isMine()){\n\t\t\t\t\t\t\tfunc(event.card,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar list=player.storage.rehuashen.map[event.card].slice(0);\n\t\t\t\t\t\tlist.push('返回');\n\t\t\t\t\t\tplayer.chooseControl(list).set('choice',event.aiChoice).set('ai',function(){\n\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tlib.skill.rehuashen.removeHuashen(player,result.links.slice(0));\n\t\t\t\t\t\tlib.skill.rehuashen.addHuashens(player,result.links.length);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.control=='返回'){\n\t\t\t\t\t\tvar func=function(id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.remove('selectedx');\n\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.remove('unselectable');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send(func,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.isMine()){\n\t\t\t\t\t\t\tfunc(event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent._result={control:'更换化身'};\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.control=='弃置化身') return;\n\t\t\t\t\tif(player.storage.rehuashen.current!=event.card){\n\t\t\t\t\t\tplayer.storage.rehuashen.current=event.card;\n\t\t\t\t\t\tgame.broadcastAll(function(character,player){\n\t\t\t\t\t\t\tplayer.sex=lib.character[character][0];\n\t\t\t\t\t\t\tplayer.group=lib.character[character][1];\n\t\t\t\t\t\t\tplayer.node.name.dataset.nature=get.groupnature(player.group);\n\t\t\t\t\t\t},event.card,player);\n\t\t\t\t\t}\n\t\t\t\t\tvar link=result.control;\n\t\t\t\t\tplayer.storage.rehuashen.current2=link;\n\t\t\t\t\tif(!player.additionalSkills.rehuashen||!player.additionalSkills.rehuashen.contains(link)){\n\t\t\t\t\t\tplayer.addAdditionalSkill('rehuashen',link);\n\t\t\t\t\t\tplayer.flashAvatar('rehuashen',event.card);\n\t\t\t\t\t\tgame.log(player,'获得技能','#g【'+get.translation(link)+'】');\n\t\t\t\t\t\tplayer.popup(link);\n\t\t\t\t\t\tplayer.syncStorage('rehuashen');\n\t\t\t\t\t\tplayer.updateMarks('rehuashen');\n\t\t\t\t\t}\n\t\t\t\t},init: function (player,skill){\n\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]={\n\t\t\t\t\t\tcharacter:[],\n\t\t\t\t\t\tmap:{},\n\t\t\t\t\t}\n\t\t\t\t},group: \"rehuashen_init\",trigger: {player: [\"phaseBegin\",\"phaseEnd\",\"rehuashen\"],},filter: function (event,player,name){\n\t\t\t\t\t//if(name=='phaseBegin'&&game.phaseNumber==1) return false;\n\t\t\t\t\treturn player.storage.rehuashen&&player.storage.rehuashen.character.length>0;\n\t\t\t\t},banned: [\"lisu\",\"sp_xiahoudun\",\"xushao\"],addHuashen: function (player){\n\t\t\t\t\tif(!player.storage.rehuashen) return;\n\t\t\t\t\tif(!_status.characterlist){\n\t\t\t\t\t\tif(_status.connectMode) var list=get.charactersOL();\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tfor(var i in lib.character){\n\t\t\t\t\t\t\t\tif(lib.filter.characterDisabled2(i)||lib.filter.characterDisabled(i)) continue;\n\t\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\t\tlist.remove(current.name);\n\t\t\t\t\t\t\tlist.remove(current.name1);\n\t\t\t\t\t\t\tlist.remove(current.name2);\n\t\t\t\t\t\t\tif(current.storage.rehuashen&&current.storage.rehuashen.character) list.removeArray(current.storage.rehuashen.character)\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_status.characterlist=list;\n\t\t\t\t\t}\n\t\t\t\t\t_status.characterlist.randomSort();\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tfor(var i=0;i<_status.characterlist.length;i++){\n\t\t\t\t\t\tvar name=_status.characterlist[i];\n\t\t\t\t\t\tif(name.indexOf('zuoci')!=-1||name.indexOf('key')==0||lib.skill.rehuashen.banned.contains(name)||player.storage.rehuashen.character.contains(name)) continue;\n\t\t\t\t\t\tvar skills=lib.character[name][3];\n\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\tvar info=lib.skill[skills[j]];\n\t\t\t\t\t\t\tif(info.charlotte||(info.unique&&!info.gainable)||info.juexingji||info.limited||info.zhuSkill||info.hiddenSkill) skills.splice(j--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(skills.length){\n\t\t\t\t\t\t\tplayer.storage.rehuashen.character.push(name);\n\t\t\t\t\t\t\tplayer.storage.rehuashen.map[name]=skills;\n\t\t\t\t\t\t\t_status.characterlist.remove(name);\n\t\t\t\t\t\t\treturn name;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},addHuashens: function (player,num){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<num;i++){\n\t\t\t\t\t\tvar name=lib.skill.rehuashen.addHuashen(player);\n\t\t\t\t\t\tif(name) list.push(name);\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tgame.log(player,'获得了',get.cnNumber(list.length)+'张','#g化身')\n\t\t\t\t\t\tlib.skill.rehuashen.drawCharacter(player,list);\n\t\t\t\t\t}\n\t\t\t\t},removeHuashen: function (player,links){\n\t\t\t\t\tplayer.storage.rehuashen.character.removeArray(links);\n\t\t\t\t\t_status.characterlist.addArray(links);\n\t\t\t\t\tgame.log(player,'移去了',get.cnNumber(links.length)+'张','#g化身')\n\t\t\t\t},drawCharacter: function (player,list){\n\t\t\t\t\tgame.broadcastAll(function(player,list){\n\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tvar cardname='huashen_card_'+list[i];\n\t\t\t\t\t\t\t\tlib.card[cardname]={\n\t\t\t\t\t\t\t\t\tfullimage:true,\n\t\t\t\t\t\t\t\t\timage:'character:'+list[i]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlib.translate[cardname]=get.rawName2(list[i]);\n\t\t\t\t\t\t\t\tcards.push(game.createCard(cardname,'',''));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.$draw(cards,'nobroadcast');\n\t\t\t\t\t\t}\n\t\t\t\t\t},player,list);\n\t\t\t\t},intro: {onunmark: function (storage,player){\n\t\t\t\t\t\t_status.characterlist.addArray(storage.character);\n\t\t\t\t\t\tstorage.character=[];\n\t\t\t\t\t},mark: function (dialog,storage,player){\n\t\t\t\t\t\tif(storage&&storage.current) dialog.addSmall([[storage.current],'character']);\n\t\t\t\t\t\tif(storage&&storage.current2) dialog.add('<div><div class=\"skill\">【'+get.translation(lib.translate[storage.current2+'_ab']||get.translation(storage.current2).slice(0,2))+'】</div><div>'+get.skillInfoTranslation(storage.current2,player)+'</div></div>');\n\t\t\t\t\t\tif(storage&&storage.character.length){\n\t\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\t\tdialog.addSmall([storage.character,'character']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tdialog.addText('共有'+get.cnNumber(storage.character.length)+'张“化身”');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '没有化身';\n\t\t\t\t\t\t}\n\t\t\t\t\t},content: function (storage,player){\n\t\t\t\t\t\t\treturn '共有'+get.cnNumber(storage.character.length)+'张“化身”'\n\t\t\t\t\t},markcount: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.character) return storage.character.length;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},},}","info":"游戏开始后，你随机获得三张未加入游戏的武将牌，选一张置于你面前并声明该武将牌的一项技能，你拥有该技能且同时将性别和势力属性变成与该武将相同直到该化身被替换。你的每个准备阶段和结束后，你可以选择一项：①弃置至多两张未展示的化身牌并重新获得等量化身牌；②更换所展示的化身牌或技能。（你不可声明限定技、觉醒技、隐匿技、主公技等特殊技能）。"},"rexinsheng":{"name":"新生","script":"{unique: \"true\",audio: \"rexingsheng\",trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\tlib.skill.rehuashen.addHuashens(player,trigger.num);\n\t\t\t\t\tplayer.syncStorage('rehuashen');\n\t\t\t\t\tplayer.updateMarks('rehuashen');\n\t\t\t\t},}","info":"当你受到1点伤害后，你可以获得一张新的化身牌。"},"xinshensu":{"name":"神速","script":"{audio: \"shensu1\",audioname: [\"xiahouba\",\"re_xiahouyuan\",\"ol_xiahouyuan\"],group: [\"shensu1\",\"shensu2\",\"shensu4\"],}","info":"你可以选择一至三项：1. 跳过判定阶段和摸牌阶段；2. 跳过出牌阶段并弃置一张装备牌；3. 跳过弃牌阶段并将你的武将牌翻面。你每选择一项，视为你对一名其他角色使用一张没有距离限制的【杀】"},"shebian":{"name":"设变","script":"{trigger: {player: \"turnOverEnd\",},check: function (event,player){\n\t\t\t\t\treturn player.canMoveCard(true,true);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.canMoveCard(null,true);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.moveCard().nojudge=true;\n\t\t\t\t},}","info":"当你的武将牌翻面后，你可以移动场上的一张装备牌。"},"xinjushou":{"name":"据守","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw(4);\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseCard('h',true,'弃置一张手牌，若以此法弃置的是装备牌，则你改为使用之').set('ai',function(card){\n\t\t\t\t\t\tif(get.type(card)=='equip'){\n\t\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t}).set('filterCard',lib.filter.cardDiscardable);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.cards.length){\n\t\t\t\t\t\tif(get.type(result.cards[0])=='equip'&&!player.isDisabled(get.subtype(result.cards[0]))){\n\t\t\t\t\t\t\tplayer.chooseUseTarget(result.cards[0],true,'nopopup');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.discard(result.cards[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='guiyoujie') return [0,1];\n\t\t\t\t\t\t},},},}","info":"结束阶段，你可以翻面并摸四张牌，然后弃置一张手牌，若以此法弃置的是装备牌，则你改为使用之"},"xinjiewei":{"name":"解围","script":"{audio: \"2\",enable: \"chooseToUse\",filterCard: \"true\",position: \"e\",viewAs: {name: \"wuxie\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('e')>0;\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('e')>0;\n\t\t\t\t},prompt: \"将一张装备区内的牌当无懈可击使用\",check: function (card){return 8-get.equipValue(card)},threaten: \"1.2\",group: \"xinjiewei_move\",subSkill: {move: {trigger: {player: \"turnOverEnd\",},direct: \"true\",audio: \"jiewei\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !player.isTurnedOver()&&player.canMoveCard();\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tplayer.chooseToDiscard('he',get.prompt('xinjiewei'),'弃置一张牌并移动场上的一张牌',lib.filter.cardDiscardable).set('ai',function(card){\n\t\t\t\t\t\t\t\tif(!_status.event.check) return 0;\n\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t}).set('check',player.canMoveCard(true)).set('logSkill','xinjiewei');\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.moveCard(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {basic: {useful: [6,4],value: [6,4],},result: {player: \"1\",},expose: \"0.2\",},}","info":"你可以将装备区里的牌当【无懈可击】使用；当你的武将牌从背面翻至正面时，你可以弃置一张牌，然后移动场上的一张牌"},"xinliegong":{"name":"烈弓","script":"{shaRelated: \"true\",mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(card.name=='sha'&&typeof get.number(card)=='number'){\n\t\t\t\t\t\t\tif(get.distance(player,target)<=get.number(card)) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},audio: \"liegong\",audioname: [\"re_huangzhong\"],trigger: {player: \"useCardToTargeted\",},logTarget: \"target\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(event.target.countCards('h')<=player.countCards('h')) return true;\n\t\t\t\t\tif(event.target.hp>=player.hp) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.target.countCards('h')<=player.countCards('h')) trigger.getParent().directHit.push(trigger.target);\n\t\t\t\t\tif(trigger.target.hp>=player.hp){\n\t\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\t\tvar map=trigger.getParent().customArgs;\n\t\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\t\tif(typeof map[id].extraDamage!='number'){\n\t\t\t\t\t\t\tmap[id].extraDamage=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmap[id].extraDamage++;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.5\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(get.attitude(player,arg.target)<=0&&arg.card.name=='sha'&&player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn card!=arg.card&&(!arg.card.cards||!arg.card.cards.contains(card));\n\t\t\t\t\t\t})>=arg.target.countCards('h')) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"你使用【杀】可以选择你距离不大于此【杀】点数的角色为目标；当你使用【杀】指定一个目标后，你可以根据下列条件执行相应的效果：1.其手牌数小于等于你的手牌数，此【杀】不可被【闪】响应，2.其体力值大于等于你的体力值，此【杀】伤害+1。"},"xinkuanggu":{"name":"狂骨","script":"{trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\treturn get.distance(player,event.player)<=1&&event.num>0;\n\t\t\t\t},direct: \"true\",audio: \"kuanggu\",audioname: [\"re_weiyan\",\"ol_weiyan\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseDrawRecover(get.prompt(event.name)).set('logSkill',event.name).set('prompt2','摸一张牌或回复1点体力');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你对距离1以内的一名角色造成1点伤害后，你可以回复1点体力或摸一张牌。"},"reqimou":{"name":"奇谋","script":"{unique: \"true\",limited: \"true\",audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.reqimou;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.reqimou=false;\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},skillAnimation: \"true\",animationColor: \"orange\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar shas=player.getCards('h','sha');\n\t\t\t\t\tvar num;\n\t\t\t\t\tif(player.hp>=4&&shas.length>=3){\n\t\t\t\t\t\tnum=3;\n\t\t\t\t\t}\n\t\t\t\t\telse if(player.hp>=3&&shas.length>=2){\n\t\t\t\t\t\tnum=2;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnum=1\n\t\t\t\t\t}\n\t\t\t\t\tvar map={};\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<=player.hp;i++){\n\t\t\t\t\t\tvar cn=get.cnNumber(i,true);\n\t\t\t\t\t\tmap[cn]=i;\n\t\t\t\t\t\tlist.push(cn);\n\t\t\t\t\t}\n\t\t\t\t\tevent.map=map;\n\t\t\t\t\tplayer.awakenSkill('reqimou');\n\t\t\t\t\tplayer.storage.reqimou=true;\n\t\t\t\t\tplayer.chooseControl(list,function(){\n\t\t\t\t\t\treturn get.cnNumber(_status.event.goon,true);\n\t\t\t\t\t}).set('prompt','失去任意点体力').set('goon',num);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=event.map[result.control]||1;\n\t\t\t\t\tplayer.storage.reqimou2=num;\n\t\t\t\t\tplayer.loseHp(num);\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\tplayer.addTempSkill('reqimou2');\n\t\t\t\t},ai: {order: \"2\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp==1) return 0;\n\t\t\t\t\t\t\tvar shas=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(!shas.length) return 0;\n\t\t\t\t\t\t\tvar card=shas[0];\n\t\t\t\t\t\t\tif(!lib.filter.cardEnabled(card,player)) return 0;\n\t\t\t\t\t\t\tif(lib.filter.cardUsable(card,player)) return 0;\n\t\t\t\t\t\t\tvar mindist;\n\t\t\t\t\t\t\tif(player.hp>=4&&shas.length>=3){\n\t\t\t\t\t\t\t\tmindist=4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(player.hp>=3&&shas.length>=2){\n\t\t\t\t\t\t\t\tmindist=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tmindist=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn (current.hp<=mindist-1&&\n\t\t\t\t\t\t\t\t\tget.distance(player,current,'attack')<=mindist&&\n\t\t\t\t\t\t\t\t\tplayer.canUse(card,current,false)&&\n\t\t\t\t\t\t\t\t\tget.effect(current,card,player,player)>0);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以失去任意点体力并摸等量的牌，然后直到回合结束，你计算与其他角色的距离时-X，且你可以多使用X张【杀】（X为你失去的体力值）"},"oltianxiang":{"name":"天香","script":"{audio: \"tianxiang\",audioname: [\"daxiaoqiao\",\"re_xiaoqiao\",\"ol_xiaoqiao\"],trigger: {player: \"damageBegin4\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',function(card){\n\t\t\t\t\t\tif(_status.connectMode&&get.position(card)=='h') return true;\n\t\t\t\t\t\treturn get.suit(card,player)=='heart';\n\t\t\t\t\t})>0&&event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.suit(card)=='heart'&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\tvar da=0;\n\t\t\t\t\t\t\tif(_status.event.player.hp==1){\n\t\t\t\t\t\t\t\tda=10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,trigger.source,target);\n\t\t\t\t\t\t\tif(att==0) return 0.1+da;\n\t\t\t\t\t\t\tif(eff>=0&&att>0){\n\t\t\t\t\t\t\t\treturn att+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(att>0&&target.hp>1){\n\t\t\t\t\t\t\t\tif(target.maxHp-target.hp>=3) return att*1.1+da;\n\t\t\t\t\t\t\t\tif(target.maxHp-target.hp>=2) return att*0.9+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -att+da;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('oltianxiang'),\n\t\t\t\t\t\tprompt2:lib.translate.oltianxiang_info\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.chooseControlList(true,function(event,player){\n\t\t\t\t\t\t\tvar target=_status.event.target;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(target.hasSkillTag('maihp')) att=-att;\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\t['令'+get.translation(target)+'受到伤害来源对其造成的1点伤害，然后摸X张牌（X为其已损失体力值且至多为5）',\n\t\t\t\t\t\t\t'令'+get.translation(target)+'失去1点体力，然后获得'+get.translation(result.cards)]).set('target',target);\n\t\t\t\t\t\tplayer.logSkill(event.name,target);\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(typeof result.index=='number'){\n\t\t\t\t\t\tevent.index=result.index;\n\t\t\t\t\t\tif(result.index){\n\t\t\t\t\t\t\tevent.related=event.target.loseHp();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.related=event.target.damage(trigger.source||'nosource','nocard');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.related.cancelled||target.isDead()) return;\n\t\t\t\t\tif(event.index&&card.isInPile()) target.gain(card,'gain2');\n\t\t\t\t\telse if(target.getDamagedHp()) target.draw(Math.min(5,target.getDamagedHp()));\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.countCards('he')>1) return 0.7;\n\t\t\t\t\t\t},},},}","info":"当你受到伤害时，你可以弃置一张红桃牌，防止此伤害并选择一名其他角色，然后你选择一项：1.令其受到伤害来源对其造成的1点伤害，然后摸X张牌（X为其已损失体力值且至多为5）；2.令其失去1点体力，然后获得你弃置的牌。"},"olhongyan":{"name":"红颜","script":"{audio: \"rehongyan\",mod: {suit: function (card,suit){\n\t\t\t\t\t\tif(suit=='spade') return 'heart';\n\t\t\t\t\t},maxHandcardBase: function (player,num){\n\t\t\t\t\t\tif(player.countCards('e',function(card){\n\t\t\t\t\t\t\treturn get.suit(card,player)=='heart';\n\t\t\t\t\t\t})) return player.maxHp;\n\t\t\t\t\t},},}","info":"锁定技，你的黑桃牌的花色视为红桃。若你的装备区内有红桃牌，则你的手牌上限基数视为体力上限。"},"piaoling":{"name":"飘零","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.suit(card)=='heart'?2:0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.card=result.card;\n\t\t\t\t\tif(result.bool&&get.position(event.card,true)=='d'){\n\t\t\t\t\t\tplayer.chooseTarget('令一名角色获得'+get.translation(event.card)+'，或点【取消】将其置于牌堆顶').set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(player==target) att/=2;\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.targets&&result.targets.length){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.gain(card,'gain2','log');\n\t\t\t\t\t\tif(player==target) player.chooseToDiscard('he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以进行判定。若判定结果为红桃，则你选择一项：1.将此牌交给一名角色。若你交给了自己，则你弃置一张牌。2.将此牌置于牌堆顶。"},"buqu":{"name":"不屈","script":"{audio: \"2\",audioname: [\"key_yuri\"],trigger: {player: \"chooseToUseBefore\",},forced: \"true\",filter: function (event,player){return event.type=='dying'&&player.isDying()&&event.dying==player},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.card=get.cards()[0];\n\t\t\t\t\tif(player.storage.buqu==undefined) player.storage.buqu=[];\n\t\t\t\t\tplayer.storage.buqu.push(event.card);\n\t\t\t\t\tplayer.syncStorage('buqu');\n\t\t\t\t\t//event.trigger(\"addCardToStorage\");\n\t\t\t\t\tgame.cardsGotoSpecial(event.card);\n\t\t\t\t\tplayer.showCards(player.storage.buqu,'不屈')\n\t\t\t\t\tplayer.markSkill('buqu');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tfor(var i=0;i<player.storage.buqu.length-1;i++){\n\t\t\t\t\t\tif(get.number(event.card)&&get.number(event.card)==get.number(player.storage.buqu[i])){\n\t\t\t\t\t\t\tplayer.storage.buqu.remove(event.card);\n\t\t\t\t\t\t\tplayer.syncStorage('buqu');\n\t\t\t\t\t\t\tplayer.markSkill('buqu');\n\t\t\t\t\t\t\tgame.cardsDiscard(event.card);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\ttrigger.result={bool:true};\n\t\t\t\t\tif(player.hp<=0){\n\t\t\t\t\t\tplayer.recover(1-player.hp);\n\t\t\t\t\t}\n\t\t\t\t},mod: {maxHandcardBase: function (player,num){\n\t\t\t\t\t\tif(get.mode()!='guozhan'&&player.storage.buqu&&player.storage.buqu.length) return player.storage.buqu.length;\n\t\t\t\t\t},},ai: {save: \"true\",mingzhi: \"true\",skillTagFilter: function (player,tag,target){\n\t\t\t\t\t\tif(player!=target) return false;\n\t\t\t\t\t},},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tdelete player.storage.buqu;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，当你处于濒死状态时，你亮出牌堆顶的一张牌并置于你的武将牌上，称之为“创”。若此牌的点数与你武将牌上已有的“创”点数均不同，则你回复至1体力。若点数相同，则将此牌置入弃牌堆。只要你的武将牌上有“创”，你的手牌上限便与“创”的数量相等。"},"fenji":{"name":"奋激","script":"{audio: \"2\",trigger: {global: [\"gainAfter\",\"loseAfter\"],},filter: function (event){\n\t\t\t\t\tvar evt=event;\n\t\t\t\t\tif(event.name=='lose'){\n\t\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\t\tevt=event.getParent();\n\t\t\t\t\t}\n\t\t\t\t\tvar player=evt[event.name=='gain'?'source':'player'];\n\t\t\t\t\tif(!player||player.isDead()) return false;\n\t\t\t\t\tif(evt[event.name=='gain'?'bySelf':'notBySelf']!=true) return false;\n\t\t\t\t\tif(event.name=='lose') return event.hs.length>0;\n\t\t\t\t\treturn event.relatedLose&&event.relatedLose.hs&&event.relatedLose.hs.length>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event[event.name=='gain'?'source':'player'])>2;\n\t\t\t\t},logTarget: function (event){\n\t\t\t\t\treturn event[event.name=='gain'?'source':'player'];\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttrigger[trigger.name=='gain'?'source':'player'].draw(2);\n\t\t\t\t},}","info":"当一名角色的手牌被其他角色弃置或获得后，你可以失去1点体力，然后令该角色摸两张牌。"},"rejianchu":{"name":"鞬出","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"re_pangde\"],trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.target.countDiscardableCards(player,'he')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discardPlayerCard(trigger.target,get.prompt('rejianchu',trigger.target)).set('ai',function(button){\n\t\t\t\t\t\tif(!_status.event.att) return 0;\n\t\t\t\t\t\tif(get.position(button.link)=='e'){\n\t\t\t\t\t\t\tif(get.subtype(button.link)=='equip2')\treturn 2*get.value(button.link);\n\t\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}).set('logSkill',['rejianchu',trigger.target]).set('att',get.attitude(player,trigger.target)<=0);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.links&&result.links.length){\n\t\t\t\t\t\tif(get.type(result.links[0],null,result.links[0].original=='h'?player:false)!='basic'){\n\t\t\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\n\t\t\t\t\t\t\tplayer.addTempSkill('rejianchu2');\n\t\t\t\t\t\t\tplayer.addMark('rejianchu2',1,false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(trigger.cards){\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.position(trigger.cards[i],true)=='o') list.push(trigger.cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(list.length) trigger.target.gain(list,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {unequip_ai: \"true\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(tag=='directHit_ai') return arg.card.name=='sha'&&arg.target.countCards('e',function(card){\n\t\t\t\t\t\t\treturn get.value(card)>1;\n\t\t\t\t\t\t})>0;\n\t\t\t\t\t\tif(arg&&arg.name=='sha'&&arg.target.getEquip(2)) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"当你使用【杀】指定一名角色为目标后，你可以弃置其一张牌，若以此法弃置的牌不为基本牌，此【杀】不可被【闪】响应且你本回合使用【杀】的次数上限+1，为基本牌，该角色获得此【杀】"},"duanliang":{"name":"断粮","script":"{audio: \"duanliang1\",audioname: [\"re_xuhuang\"],group: [\"duanliang1\",\"duanliang3\"],ai: {threaten: \"1.2\",},}","info":"你可以将一张黑色基本牌或装备牌当做【兵粮寸断】使用；若一名角色的手牌数大于或等于你的手牌数，则你对其使用【兵粮寸断】没有距离限制。"},"jiezi":{"name":"截辎","script":"{trigger: {global: [\"phaseDrawSkipped\",\"phaseDrawCancelled\"],},audio: \"2\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"锁定技，其他角色跳过摸牌阶段后，你摸一张牌。"},"bazhen":{"name":"八阵","script":"{audio: \"2\",audioname: [\"re_sp_zhugeliang\",\"ol_sp_zhugeliang\",\"ol_pangtong\"],group: \"bazhen_bagua\",locked: \"true\",}","info":"锁定技，若你的防具栏内没有牌且没有被废除，则你视为装备着【八卦阵】。"},"rehuoji":{"name":"火计","script":"{position: \"he\",audio: \"2\",audioname: [\"ol_sp_zhugeliang\",\"ol_pangtong\"],enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},viewAs: {name: \"huogong\",nature: \"fire\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t},prompt: \"将一张红色牌当火攻使用\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('h')>player.hp){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 4-get.value(card)\n\t\t\t\t},ai: {fireAttack: \"true\",basic: {order: \"4\",value: [3,1],useful: \"1\",},wuxie: function (target,card,player,current,state){\n\t\t\t\t\t\tif(get.attitude(current,player)>=0&&state>0) return false;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\t\tif(nh<=player.hp&&nh<=4&&_status.event.name=='chooseToUse'){\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'huogong'},player,_status.event)){\n\t\t\t\t\t\t\t\t\treturn -10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(_status.event.skill){\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\n\t\t\t\t\t\t\t\t\tif(viewAs=='huogong') return -10;\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='huogong') return -10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkill('huogong2')||target.countCards('h')==0) return 0;\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\n\t\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'huogong'},player,_status.event)){\n\t\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(_status.event.skill){\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\n\t\t\t\t\t\t\t\t\tif(viewAs=='huogong') return -1.5;\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='huogong') return -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {damage: \"1\",fireDamage: \"1\",natureDamage: \"1\",norepeat: \"1\",},},}","info":"出牌阶段，你可一张红色牌当作【火攻】使用。"},"rekanpo":{"name":"看破","script":"{audio: \"2\",audioname: [\"ol_sp_zhugeliang\",\"ol_pangtong\"],position: \"he\",enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},viewAs: {name: \"wuxie\",},prompt: \"将一张黑色牌当无懈可击使用\",check: function (card){return 8-get.value(card)},ai: {basic: {useful: [6,4],value: [6,4],},result: {player: \"1\",},expose: \"0.2\",},}","info":"你可以将一张黑色牌当作【无懈可击】使用。"},"cangzhuo":{"name":"藏拙","script":"{trigger: {player: \"phaseDiscardBegin\",},frequent: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('useCard',function(card){\n\t\t\t\t\t\treturn get.type(card.card,'trick')=='trick';\n\t\t\t\t\t}).length==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('cangzhuo2');\n\t\t\t\t},}","info":"弃牌阶段开始时，若你本回合内没有使用过锦囊牌，则你的锦囊牌不计入手牌上限。"},"quhu":{"name":"驱虎","script":"{audio: \"2\",audioname: [\"re_xunyu\"],enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')==0) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp>player.hp&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hp>player.hp&&player.canCompare(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(game.hasPlayer(function(player){\n\t\t\t\t\t\t\treturn player!=target&&target.inRange(player);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\t\t\tvar source=_status.event.source;\n\t\t\t\t\t\t\t\treturn target!=source&&source.inRange(target);\n\t\t\t\t\t\t\t},true).set('ai',function(target){\n\t\t\t\t\t\t\t\treturn get.damageEffect(target,_status.event.source,player);\n\t\t\t\t\t\t\t}).set('source',target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.damage(target);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\ttarget.line(result.targets[0],'green');\n\t\t\t\t\t\tresult.targets[0].damage(target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"0.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tvar oc=(target.countCards('h')==1);\n\t\t\t\t\t\t\tif(att>0&&oc) return 0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=target&&players[i]!=player&&\n\t\t\t\t\t\t\t\t\ttarget.inRange(players[i])){\n\t\t\t\t\t\t\t\t\tif(get.damageEffect(players[i],target,player)>0){\n\t\t\t\t\t\t\t\t\t\treturn att>0?att/2:att-(oc?5:0);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},player: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('jueqing',false,target)) return -10;\n\t\t\t\t\t\t\tvar mn=1;\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tmn=Math.max(mn,hs[i].number);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mn<=11&&player.hp<2) return -20;\n\t\t\t\t\t\t\tvar max=player.maxHp-hs.length;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>2){\n\t\t\t\t\t\t\t\t\tmax=Math.max(Math.min(5,players[i].hp)-players[i].countCards('h'),max);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tswitch(max){\n\t\t\t\t\t\t\t\tcase 0:return mn==13?0:-20;\n\t\t\t\t\t\t\t\tcase 1:return mn>=12?0:-15;\n\t\t\t\t\t\t\t\tcase 2:return 0;\n\t\t\t\t\t\t\t\tcase 3:return 1;\n\t\t\t\t\t\t\t\tdefault:return max;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},expose: \"0.2\",},}","info":"出牌阶段限一次，你可以与一名体力值大于你的角色拼点，若你赢，则该角色对其攻击范围内另一名由你指定的角色造成1点伤害。若你没赢，该角色对你造成一点伤害。"},"rejieming":{"name":"节命","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('rejieming'),'令一名角色摸两张牌。然后若其手牌数少于体力上限，你摸一张牌').set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>2){\n\t\t\t\t\t\t\tif((target.maxHp-target.countCards('h'))>2) return 2*att;\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att/3;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.current=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('rejieming',event.current);\n\t\t\t\t\t\tplayer.line(event.current,'thunder');\n\t\t\t\t\t\tevent.current.draw(2);\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.current.countCards('h')<event.current.maxHp){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.count>0) event.goto(1);\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.hp>1){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(get.attitude(target,players[i])>0){\n\t\t\t\t\t\t\t\t\t\tmax=Math.max(Math.min(5,players[i].hp)-players[i].countCards('h'),max);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tswitch(max){\n\t\t\t\t\t\t\t\t\tcase 0:return 2;\n\t\t\t\t\t\t\t\t\tcase 1:return 1.5;\n\t\t\t\t\t\t\t\t\tcase 2:return [1,2];\n\t\t\t\t\t\t\t\t\tdefault:return [0,max];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif((card.name=='tao'||card.name=='caoyao')&&\n\t\t\t\t\t\t\t\ttarget.hp>1&&target.countCards('h')<=target.hp) return [0,0];\n\t\t\t\t\t\t},},},}","info":"当你受到1点伤害后，你可以令一名角色摸两张牌。然后若其手牌数小于体力上限，则你摸一张牌。"},"reqiangxi":{"name":"强袭","script":"{subSkill: {off: {sub: \"true\",},},audio: \"2\",enable: \"phaseUse\",filterCard: function (card){\n\t\t\t\t\treturn get.subtype(card)=='equip1';\n\t\t\t\t},selectCard: function (){\n\t\t\t\t\treturn [0,1];\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(target.hasSkill('reqiangxi_off')) return false;\n\t\t\t\t\treturn player.inRange(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(cards.length==0){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.addTempSkill('reqiangxi_off');\n\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t},position: \"he\",ai: {order: \"8.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\t\t\tif(player.hp<2) return 0;\n\t\t\t\t\t\t\t\tif(target.hp>=player.hp) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},},threaten: \"1.5\",}","info":"出牌阶段对每名其他角色限一次，你可以选择一项：1. 失去一点体力并对你攻击范围内的一名其他角色造成一点伤害；2. 弃置一张武器牌并对你攻击范围内的一名其他角色造成一点伤害。"},"reshuangxiong":{"name":"双雄","script":"{trigger: {player: \"phaseDrawBegin1\",},group: \"reshuangxiong2\",audio: \"shuangxiong\",audioname: [\"re_yanwen\"],check: function (event,player){\n\t\t\t\t\tif(player.countCards('h')>player.hp) return true;\n\t\t\t\t\tif(player.countCards('h')>3) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\tevent.cards=get.cards(2);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tgame.broadcastAll(function(player,id,cards){\n\t\t\t\t\t\tvar str;\n\t\t\t\t\t\tif(player==game.me&&!_status.auto){\n\t\t\t\t\t\t\tstr='【双雄】选择获得其中一张牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr='双雄';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar dialog=ui.create.dialog(str,cards);\n\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t},player,event.videoId,event.cards);\n\t\t\t\t\tevent.time=get.utc();\n\t\t\t\t\tgame.addVideo('showCards',player,['双雄',get.cardsInfo(event.cards)]);\n\t\t\t\t\tgame.addVideo('delay',null,2);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar next=player.chooseButton([1,1],true);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar color=get.color(button.link);\n\t\t\t\t\t\tvar value=get.value(button.link,player);\n\t\t\t\t\t\tif(player.countCards('h',{color:color})>player.countCards('h',['red','black'].remove(color)[0])) value+=5;\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.links){\n\t\t\t\t\t\tvar cards2=[];\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tcards2.push(result.links[i]);\n\t\t\t\t\t\t\tcards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\tevent.card2=cards2[0];\n\t\t\t\t\t}\n\t\t\t\t\tvar time=1000-(get.utc()-event.time);\n\t\t\t\t\tif(time>0){\n\t\t\t\t\t\tgame.delay(0,time);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tvar card2=event.card2;\n\t\t\t\t\tplayer.gain(card2,'gain2');\n\t\t\t\t\tplayer.addTempSkill('shuangxiong2');\n\t\t\t\t\tplayer.storage.shuangxiong=get.color(card2);\n\t\t\t\t},}","info":"摸牌阶段，你可以放弃摸牌。若如此做，你展示牌堆顶的两张牌并选择获得其中的一张。然后，你本回合内可以将与此牌颜色不同的一张手牌当做【决斗】使用。当你受到【决斗】造成的伤害时，你可以获得对方于此决斗中打出的所有【杀】"},"olluanji":{"name":"乱击","script":"{inherit: \"luanji\",audioname: [\"shen_caopi\"],audio: \"2\",line: \"false\",group: \"olluanji_remove\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},enable: \"phaseUse\",viewAs: {name: \"wanjian\",},filterCard: function (card,player){\n\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\treturn get.suit(card)==get.suit(ui.selected.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(card!=cards[i]){\n\t\t\t\t\t\t\tif(get.suit(card)==get.suit(cards[i])) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},selectCard: \"2\",complexCard: \"true\",ai: {basic: {order: \"8.5\",useful: \"1\",value: \"5\",},wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"你可以将两张花色相同的手牌当做【万箭齐发】使用。当你使用【万箭齐发】选择目标后，你可以为此牌减少一个目标。"},"olxueyi":{"name":"血裔","script":"{audio: \"2\",trigger: {global: \"phaseBefore\",},forced: \"true\",zhuSkill: \"true\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.olxueyi_inited&&player.hasZhuSkill('olxueyi');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.olxueyi_inited=true;\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\treturn\tcurrent.group=='qun';\n\t\t\t\t\t})\n\t\t\t\t\tif(num) player.addMark('olxueyi',num)\n\t\t\t\t},marktext: \"裔\",intro: {name2: \"裔\",content: \"mark\",},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.hasZhuSkill('olxueyi')) return num+2*player.countMark('olxueyi');\n\t\t\t\t\t},},group: \"olxueyi_draw\",}","info":"主公技，锁定技，游戏开始时，你获得X个“裔”标记。回合开始时，你可以移去一个“裔”标记，然后摸一张牌。你每有一个“裔”标记，手牌上限便+2。（X为场上群势力角色的数目）"},"juxiang":{"name":"巨象","script":"{locked: \"true\",audio: \"juxiang1\",audioname: [\"re_zhurong\"],group: [\"juxiang1\",\"juxiang2\"],ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='nanman') return [0,1];\n\t\t\t\t\t\t},},},}","info":"锁定技，【南蛮入侵】对你无效。其他角色使用的【南蛮入侵】结算后进入弃牌堆时，你获得之。"},"relieren":{"name":"烈刃","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"boss_lvbu3\"],trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&player.canCompare(event.target);\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(trigger.target).clear=false;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.target.countGainableCards(player,'he')) player.gainPlayerCard(trigger.target,true,'he');\n\t\t\t\t\t\tui.clear();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar card1=result.player;\n\t\t\t\t\t\tvar card2=result.target;\n\t\t\t\t\t\tif(get.position(card1)=='d') trigger.target.gain(card1,'gain2');\n\t\t\t\t\t\tif(get.position(card2)=='d') player.gain(card2,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用【杀】指定目标后，你可以和目标角色进行拼点。若你赢，你获得其一张牌。若你没赢，你获得对方的拼点牌，其获得你的拼点牌。"},"huoshou":{"name":"祸首","script":"{audio: \"huoshou1\",audioname: [\"re_menghuo\"],locked: \"true\",group: [\"huoshou1\",\"huoshou2\"],ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='nanman') return 0;\n\t\t\t\t\t\t},},},}","info":"锁定技，【南蛮入侵】对你无效；你视为所有【南蛮入侵】的伤害来源。"},"rezaiqi":{"name":"再起","script":"{count: function (){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\tcurrent.getHistory('lose',function(evt){\n\t\t\t\t\t\t\tif(evt.position==ui.discardPile){\n\t\t\t\t\t\t\t\tfor(var i=0;i<evt.cards.length;i++){\n\t\t\t\t\t\t\t\t\tif(get.color(evt.cards[i])=='red') num++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tgame.getGlobalHistory('cardMove',function(evt){\n\t\t\t\t\tif(evt.name=='cardsDiscard'){\n\t\t\t\t\t\t\tfor(var i=0;i<evt.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.color(evt.cards[i])=='red') num++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\treturn num;\n\t\t\t\t},audio: \"2\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn lib.skill.rezaiqi.count()>0;\n\t\t\t\t},trigger: {player: \"phaseDiscardEnd\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget([1,lib.skill.rezaiqi.count()],get.prompt2('rezaiqi')).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar targets=result.targets;\n\t\t\t\t\t\ttargets.sortBySeat();\n\t\t\t\t\t\tplayer.line(targets,'fire');\n\t\t\t\t\t\tplayer.logSkill('rezaiqi',targets);\n\t\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.current=targets.shift();\n\t\t\t\t\tif(player.isHealthy()) event._result={index:0};\n\t\t\t\t\telse event.current.chooseControl().set('choiceList',[\n\t\t\t\t\t\t'摸一张牌',\n\t\t\t\t\t\t'令'+get.translation(player)+'回复一点体力',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\tif(get.attitude(event.current,player)>0) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.index==1){\n\t\t\t\t\t\tevent.current.line(player);\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse event.current.draw();\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tif(targets.length) event.goto(2);\n\t\t\t\t},group: \"rezaiqi_count\",}","info":"弃牌阶段结束时，你可以令至多X名角色选择一项：1.摸一张牌，2.令你回复1点体力（X为本回合进入弃牌堆的红色牌数）"},"oljiuchi":{"name":"酒池","script":"{mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='jiu') return Infinity;\n\t\t\t\t\t},},audio: \"2\",enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.suit(card)=='spade';\n\t\t\t\t},viewAs: {name: \"jiu\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('h',{suit:'spade'})) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},prompt: \"将一张黑桃手牌当酒使用\",check: function (cardx,player){\n\t\t\t\t\tif(player&&player==cardx.player) return true;\n\t\t\t\t\tif(_status.event.type=='dying') return 1;\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar shas=player.getCards('h',function(card){\n\t\t\t\t\t\treturn card!=cardx&&get.name(card,player)=='sha';\n\t\t\t\t\t});\n\t\t\t\t\tif(!shas.length) return -1;\n\t\t\t\t\tif(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('h','zhuge'))){\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tshas.sort(function(a,b){\n\t\t\t\t\t\treturn get.order(b)-get.order(a);\n\t\t\t\t\t});\n\t\t\t\t\tvar card=false;\n\t\t\t\t\tif(shas.length){\n\t\t\t\t\t\tfor(var i=0;i<shas.length;i++){\n\t\t\t\t\t\t\tif(shas[i]!=cardx&&lib.filter.filterCard(shas[i],player)){\n\t\t\t\t\t\t\t\tcard=shas[i];break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn (get.attitude(player,current)<0&&\n\t\t\t\t\t\t\t!current.hasShan()\n\t\t\t\t\t\t\t&&current.hp+current.countCards('h',{name:['tao','jiu']})>1+(player.storage.jiu||0)\n\t\t\t\t\t\t\t&&player.canUse(card,current,true,true)&&\n\t\t\t\t\t\t\t!current.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t})&&\n\t\t\t\t\t\t\tget.effect(current,card,player)>0);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn 4-get.value(cardx);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t},ai: {threaten: \"1.5\",basic: {useful: function (card,i){\n\t\t\t\t\t\t\tif(_status.event.player.hp>1){\n\t\t\t\t\t\t\t\tif(i==0) return 4;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==0) return 7.3;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t},value: function (card,player,i){\n\t\t\t\t\t\t\tif(player.hp>1){\n\t\t\t\t\t\t\t\tif(i==0) return 5;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==0) return 7.3;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t},},order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.2;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target&&target.isDying()) return 2;\n\t\t\t\t\t\t\tif(target&&!target.isPhaseUsing()) return 0;\n\t\t\t\t\t\t\tif(lib.config.mode=='stone'&&!player.isMin()){\n\t\t\t\t\t\t\t\tif(player.getActCount()+1>=player.actcount) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar shas=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('h','zhuge'))){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshas.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.order(b)-get.order(a);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tvar card;\n\t\t\t\t\t\t\tif(shas.length){\n\t\t\t\t\t\t\t\tfor(var i=0;i<shas.length;i++){\n\t\t\t\t\t\t\t\t\tif(lib.filter.filterCard(shas[i],target)){\n\t\t\t\t\t\t\t\t\t\tcard=shas[i];break;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(player.hasSha()&&player.needsToDiscard()){\n\t\t\t\t\t\t\t\tif(player.countCards('h','hufu')!=1){\n\t\t\t\t\t\t\t\t\tcard={name:'sha'};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn (get.attitude(target,current)<0&&\n\t\t\t\t\t\t\t\t\t\ttarget.canUse(card,current,true,true)&&\n\t\t\t\t\t\t\t\t\t\t!current.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t\t})&&\n\t\t\t\t\t\t\t\t\t\tget.effect(current,card,target)>0);\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},tag: {save: \"1\",},},trigger: {source: \"damageEnd\",},locked: \"true\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.name=='chooseToUse') return player.countCards('h',{suit:'spade'})>0;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.getParent(2).jiu==true&&!player.hasSkill('oljiuchi_air');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.logSkill('oljiuchi');\n\t\t\t\t\tplayer.addTempSkill('oljiuchi_air');\n\t\t\t\t},subSkill: {air: {sub: \"true\",},},}","info":"你可以将一张黑桃手牌当做【酒】使用。锁定技，你使用【酒】无次数限制，且当你于回合内使用带有【酒】效果的【杀】造成伤害后，你令你的【崩坏】失效直到回合结束。"},"roulin":{"name":"肉林","script":"{audio: \"2\",audioname: [\"re_dongzhuo\",\"ol_dongzhuo\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(player==event.player){\n\t\t\t\t\t\treturn event.target.sex=='female';\n\t\t\t\t\t}\n\t\t\t\t\treturn event.player.sex=='female';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player==event.player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar id=(player==trigger.player?trigger.target:player).playerid;\n\t\t\t\t\tvar map=trigger.getParent().customArgs;\n\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\tif(typeof map[id].shanRequired=='number'){\n\t\t\t\t\t\tmap[id].shanRequired++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tmap[id].shanRequired=2;\n\t\t\t\t\t}\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg.card.name!='sha'||arg.target.sex!='female'||arg.target.countCards('h','shan')>1) return false;\n\t\t\t\t\t},},}","info":"锁定技。你对女性角色、女性角色对你使用【杀】时，都需连续使用两张【闪】才能抵消。"},"benghuai":{"name":"崩坏","script":"{audio: \"2\",audioname: [\"zhugedan\",\"re_dongzhuo\",\"ol_dongzhuo\"],trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.isMinHp()&&!player.hasSkill('rejiuchi_air')&&!player.hasSkill('oljiuchi_air');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseControl('baonue_hp','baonue_maxHp',function(event,player){\n\t\t\t\t\t\tif(player.hp==player.maxHp) return 'baonue_hp';\n\t\t\t\t\t\tif(player.hp<player.maxHp-1||player.hp<=2) return 'baonue_maxHp';\n\t\t\t\t\t\treturn 'baonue_hp';\n\t\t\t\t\t}).set('prompt','崩坏：失去1点体力或减1点体力上限');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='baonue_hp'){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.loseMaxHp(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.5\",neg: \"true\",},}","info":"结束阶段，若你的体力不是全场最少的(或之一)，你须减1点体力或体力上限。"},"olbaonue":{"name":"暴虐","script":"{audio: \"2\",unique: \"true\",zhuSkill: \"true\",trigger: {global: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\tif(player==event.source||!event.source||event.source.group!='qun') return false;\n\t\t\t\t\treturn player.hasZhuSkill('olbaonue',event.source);\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.count--;\n\t\t\t\t\ttrigger.source.chooseBool('是否对'+get.translation(player)+'发动【暴虐】？').set('choice',get.attitude(trigger.source,player)>0);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('olbaonue');\n\t\t\t\t\t\ttrigger.source.line(player,'green')\n\t\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\t\tif(get.suit(card)=='spade') return 4;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.suit=='spade'){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\tif(get.position(result.card)=='d') player.gain(result.card,'gain2','log')\n\t\t\t\t\t}\n\t\t\t\t\tif(event.count) event.goto(1);\n\t\t\t\t},}","info":"主公技，其他群雄角色造成1点伤害后，其可进行判定，若为♠，你回复1点体力并获得判定牌。"},"gzyinghun":{"name":"英魂","script":"{audio: \"yinghun\",audioname: [\"re_sunjian\",\"sunce\",\"re_sunben\",\"re_sunce\",\"ol_sunjian\"],trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.getDamagedHp()>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('gzyinghun'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.getDamagedHp()==1&&target.countCards('he')==0){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)>0){\n\t\t\t\t\t\t\treturn 10+get.attitude(_status.event.player,target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.getDamagedHp()==1){\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.num=player.getDamagedHp();\n\t\t\t\t\t\tplayer.logSkill(event.name,result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(event.num==1){\n\t\t\t\t\t\t\tevent.directcontrol=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar str1='摸'+get.cnNumber(event.num,true)+'弃一';\n\t\t\t\t\t\t\tvar str2='摸一弃'+get.cnNumber(event.num,true);\n\t\t\t\t\t\t\tplayer.chooseControl(str1,str2,function(event,player){\n\t\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t\t}).set('choice',get.attitude(player,event.target)>0?str1:str2);\n\t\t\t\t\t\t\tevent.str=str1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.directcontrol||result.control==event.str){\n\t\t\t\t\t\tevent.target.draw(event.num);\n\t\t\t\t\t\tevent.target.chooseToDiscard(true,'he');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.target.draw();\n\t\t\t\t\t\tevent.target.chooseToDiscard(event.num,true,'he');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==target.maxHp) return 0.5;\n\t\t\t\t\t\tif(target.hp==1) return 2;\n\t\t\t\t\t\tif(target.hp==2) return 1.5;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},maixie: \"true\",},}","info":"准备阶段开始时，若你已受伤，你可令一名其他角色执行一项：摸X张牌，然后弃置一张牌；或摸一张牌，然后弃置X张牌（X为你已损失的体力值）"},"wulie":{"name":"武烈","script":"{trigger: {player: \"phaseJieshuBegin\",},audio: \"2\",direct: \"true\",limited: \"true\",skillAnimation: \"true\",animationColor: \"wood\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget([1,player.hp],get.prompt2('wulie'),lib.filter.notMe).set('ai',function(){return 0});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar targets=result.targets.sortBySeat();\n\t\t\t\t\t\tplayer.logSkill('wulie',targets);\n\t\t\t\t\t\tplayer.awakenSkill('wulie');\n\t\t\t\t\t\tplayer.loseHp(targets.length);\n\t\t\t\t\t\twhile(targets.length){\n\t\t\t\t\t\t\ttargets[0].addSkill('wulie2');\n\t\t\t\t\t\t\ttargets.shift().addMark('wulie2');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，结束阶段，你可以失去任意点体力并指定等量的其他角色。这些角色各获得一枚「烈」。有「烈」的角色受到伤害时，其移去一枚「烈」，然后防止此伤害。"},"rexingshang":{"name":"行殇","script":"{audio: \"2\",trigger: {global: \"die\",},filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged()||event.player.countCards('he')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar choice=[];\n\t\t\t\t\tif(player.isDamaged()) choice.push('回复体力');\n\t\t\t\t\tif(trigger.player.countCards('he')) choice.push('获得牌');\n\t\t\t\t\tchoice.push('cancel2');\n\t\t\t\t\tplayer.chooseControl(choice).set('prompt',get.prompt2('rexingshang')).set('ai',function(){\n\t\t\t\t\t\tif(choice.length==2) return 0;\n\t\t\t\t\t\tif(get.value(trigger.player.getCards('he'))>8) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill(event.name,trigger.player);\n\t\t\t\t\t\tif(result.control=='获得牌'){\n\t\t\t\t\t\t\tevent.togain=trigger.player.getCards('he');\n\t\t\t\t\t\t\tplayer.gain(event.togain,trigger.player,'giveAuto');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.recover();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当其他角色死亡后，你可以选择一项：回复1点体力，或获得其所有牌。"},"refangzhu":{"name":"放逐","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('refangzhu'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tif(target.hasSkillTag('noturn')) return 0;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)==0) return 0;\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)>0){\n\t\t\t\t\t\t\tif(target.classList.contains('turnedover')) return 1000-target.countCards('h');\n\t\t\t\t\t\t\tif(player.getDamagedHp()<3) return -1;\n\t\t\t\t\t\t\treturn 100-target.countCards('h');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(target.classList.contains('turnedover')) return -1;\n\t\t\t\t\t\t\tif(player.getDamagedHp()>=3) return -1;\n\t\t\t\t\t\t\treturn 1+target.countCards('h');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('refangzhu',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(player.isHealthy()) event._result={bool:false};\n\t\t\t\t\t\telse event.target.chooseToDiscard('he',player.getDamagedHp()).set('ai',function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player.isTurnedOver()||_status.event.getTrigger().player.getDamagedHp()>2) return -1;\n\t\t\t\t\t\t\treturn (player.hp*player.hp)-get.value(card);\n\t\t\t\t\t\t}).set('prompt','弃置'+get.cnNumber(player.getDamagedHp())+'张牌并失去一点体力；或选择不弃置，将武将牌翻面并摸'+get.cnNumber(player.getDamagedHp())+'张牌。');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.isDamaged()) event.target.draw(player.getDamagedHp());\n\t\t\t\t\t\tevent.target.turnOver();\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];\n\t\t\t\t\t\t\t\tif(target.hp<=1) return;\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar hastarget=false;\n\t\t\t\t\t\t\t\tvar turnfriend=false;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(get.attitude(target,players[i])<0&&!players[i].isTurnedOver()){\n\t\t\t\t\t\t\t\t\t\thastarget=true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(get.attitude(target,players[i])>0&&players[i].isTurnedOver()){\n\t\t\t\t\t\t\t\t\t\thastarget=true;\n\t\t\t\t\t\t\t\t\t\tturnfriend=true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0&&!hastarget) return;\n\t\t\t\t\t\t\t\tif(turnfriend||target.hp==target.maxHp) return [0.5,1];\n\t\t\t\t\t\t\t\tif(target.hp>1) return [1,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以令一名其他角色选择一项：摸X张牌并将武将牌翻面，或弃置X张牌并失去1点体力。（X为你已损失的体力值）"},"songwei":{"name":"颂威","script":"{unique: \"true\",group: \"songwei2\",audioname: [\"re_caopi\"],audio: \"songwei2\",zhuSkill: \"true\",}","info":"主公技，其他魏势力的角色的判定牌结果为黑色且生效后，其可以令你摸一张牌。"},"retiaoxin":{"name":"挑衅","script":"{audio: \"tiaoxin\",audioname: [\"sp_jiangwei\",\"xiahouba\",\"re_jiangwei\"],enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.chooseToUse(function(card,player,event){\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t},'挑衅：对'+get.translation(player)+'使用一张杀，或令其弃置你的一张牌').set('targetRequired',true).set('complexSelect',true).set('filterTarget',function(card,player,target){\n\t\t\t\t\t\tif(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;\n\t\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\n\t\t\t\t\t}).set('sourcex',player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool==false&&target.countCards('he')>0){\n\t\t\t\t\t\tplayer.discardPlayerCard(target,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"4\",expose: \"0.2\",result: {target: \"-1\",player: function (player,target){\n\t\t\t\t\t\t\tif(!target.canUse('sha',player)) return 0;\n\t\t\t\t\t\t\tif(target.countCards('h')==0) return 0;\n\t\t\t\t\t\t\tif(target.countCards('h')==1) return -0.1;\n\t\t\t\t\t\t\tif(player.hp<=2) return -2;\n\t\t\t\t\t\t\tif(player.countCards('h','shan')==0) return -1;\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},threaten: \"1.1\",},}","info":"出牌阶段限一次，你可以指定一名有牌的其他角色，该角色需对你使用一张【杀】，否则你弃置其一张牌。"},"zhiji":{"name":"志继","script":"{skillAnimation: \"true\",animationColor: \"fire\",audio: \"2\",audioname: [\"re_jiangwei\"],unique: \"true\",juexingji: \"true\",derivation: \"reguanxing\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.zhiji) return false;\n\t\t\t\t\treturn player.countCards('h')==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('zhiji');\n\t\t\t\t\tplayer.chooseDrawRecover(2,true);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.storage.zhiji=true;\n\t\t\t\t\tif(player.hp>player.maxHp) player.hp=player.maxHp;\n\t\t\t\t\tplayer.update();\n\t\t\t\t\tplayer.addSkill('reguanxing');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你没有手牌，你须回复1点体力或摸两张牌，然后减1点体力上限，并获得技能〖观星〗。"},"rebeige":{"name":"悲歌","script":"{audio: \"beige\",audioname: [\"re_caiwenji\"],trigger: {global: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn (event.card&&event.card.name=='sha'&&event.source&&\n\t\t\t\t\t\tevent.player.classList.contains('dead')==false&&player.countCards('he'));\n\t\t\t\t},direct: \"true\",checkx: function (event,player){\n\t\t\t\t\tvar att1=get.attitude(player,event.player);\n\t\t\t\t\tvar att2=get.attitude(player,event.source);\n\t\t\t\t\treturn att1>0&&att2<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt2('rebeige',trigger.player));\n\t\t\t\t\tvar check=lib.skill.beige.checkx(trigger,player);\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.goon) return 8-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('logSkill','rebeige');\n\t\t\t\t\tnext.set('goon',check);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.judge();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tswitch(result.suit){\n\t\t\t\t\t\tcase 'heart':trigger.player.recover(trigger.num);break;\n\t\t\t\t\t\tcase 'diamond':trigger.player.draw(3);break;\n\t\t\t\t\t\tcase 'club':trigger.source.chooseToDiscard('he',2,true);break;\n\t\t\t\t\t\tcase 'spade':trigger.source.turnOver();break;\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"当有角色受到【杀】造成的伤害后，你可以弃一张牌，并令其进行一次判定，若判定结果为：♥该角色回复X点体力(X为伤害点数)；♦︎该角色摸三张牌；♣伤害来源弃两张牌；♠伤害来源将其武将牌翻面"},"duanchang":{"name":"断肠","script":"{audio: \"2\",audioname: [\"re_caiwenji\"],forbid: [\"boss\"],trigger: {player: \"die\",},forced: \"true\",forceDie: \"true\",skillAnimation: \"true\",animationColor: \"gray\",filter: function (event){\n\t\t\t\t\treturn event.source&&event.source.isIn();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.source.clearSkills();\n\t\t\t\t},logTarget: \"source\",ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 0.2;\n\t\t\t\t\t\treturn 1.5;\n\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(target.hp<=1&&get.tag(card,'damage')) return [1,0,0,-2];\n\t\t\t\t\t\t},},},}","info":"锁定技，杀死你的角色失去当前的所有技能。"},"xiangle":{"name":"享乐","script":"{audio: \"2\",audioname: [\"re_liushan\",\"ol_liushan\"],trigger: {target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar eff=get.effect(player,trigger.card,trigger.player,trigger.player);\n\t\t\t\t\ttrigger.player.chooseToDiscard('享乐：弃置一张基本牌，否则杀对'+get.translation(player)+'无效',function(card){\n\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.eff>0){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('eff',eff);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.attitude(player,target)<0){\n\t\t\t\t\t\t\t\tif(_status.event.name=='xiangle') return;\n\t\t\t\t\t\t\t\tvar bs=player.getCards('h',{type:'basic'});\n\t\t\t\t\t\t\t\tif(bs.length<2) return 0;\n\t\t\t\t\t\t\t\tif(player.hasSkill('jiu')||player.hasSkill('tianxianjiu')) return;\n\t\t\t\t\t\t\t\tif(bs.length<=3&&player.countCards('h','sha')<=1){\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<bs.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(bs[i].name!='sha'&&get.value(bs[i])<7){\n\t\t\t\t\t\t\t\t\t\t\treturn [1,0,1,-0.5];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn [1,0,1,-0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当其他角色使用【杀】指定你为目标时，其需弃置一张基本牌，否则此【杀】对你无效。"},"olfangquan":{"name":"放权","script":"{audio: \"2\",audioname: [\"shen_caopi\"],trigger: {player: \"phaseUseBefore\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&!player.hasSkill('olfangquan3');\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar fang=player.countMark('olfangquan2')==0&&player.hp>=2&&player.countCards('h')<=player.hp+1;\n\t\t\t\t\tplayer.chooseBool(get.prompt2('olfangquan')).set('ai',function(){\n\t\t\t\t\t\tif(!_status.event.fang) return false;\n\t\t\t\t\t\treturn game.hasPlayer(function(target){\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')||target==player) return false;\n\t\t\t\t\t\t\tif(get.attitude(player,target)>4){\n\t\t\t\t\t\t\t\treturn (get.threaten(target)/Math.sqrt(target.hp+1)/Math.sqrt(target.countCards('h')+1)>0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}).set('fang',fang);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('olfangquan');\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tplayer.addTempSkill('olfangquan2');\n\t\t\t\t\t\tplayer.addMark('olfangquan2',1,false);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始前，你可以跳过此阶段。若如此做，弃牌阶段开始时，你可以弃置一张手牌，令一名其他角色进行一个额外回合。"},"olruoyu":{"name":"若愚","script":"{skillAnimation: \"true\",animationColor: \"fire\",audio: \"2\",unique: \"true\",juexingji: \"true\",zhuSkill: \"true\",keepSkill: \"true\",derivation: [\"jijiang\",\"sishu\"],trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('olruoyu')) return false;\n\t\t\t\t\tif(player.storage.olruoyu) return false;\n\t\t\t\t\treturn player.isMinHp();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.olruoyu=true;\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tgame.log(player,'获得了技能','#g【思蜀】','和','#g【激将】');\n\t\t\t\t\tplayer.addSkill('sishu');\n\t\t\t\t\tif(player.hasSkill('olruoyu')){\n\t\t\t\t\t\tplayer.addSkill('jijiang');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addAdditionalSkill('olruoyu','jijiang');\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.isZhu){\n\t\t\t\t\t\tplayer.storage.zhuSkill_olruoyu=['jijiang'];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.trigger('zhuUpdate');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.awakenSkill('olruoyu');\n\t\t\t\t},}","info":"主公技，觉醒技，准备阶段，若你的体力值为全场最少，则你加1点体力上限并回复1点体力，然后获得技能〖思蜀〗和〖激将〗。"},"rezhijian":{"name":"直谏","script":"{inherit: \"zhijian\",group: [\"rezhijian_use\"],subfrequent: [\"use\"],subSkill: {use: {audio: \"rezhijian\",trigger: {player: \"useCard\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn get.type(event.card)=='equip';\n\t\t\t\t\t\t},prompt: \"是否发动【直谏】摸一张牌？\",content: function (){\n\t\t\t\t\t\t\tplayer.draw('nodelay');\n\t\t\t\t\t\t},sub: \"true\",},},audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:'equip'})>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.isMin()) return false;\n\t\t\t\t\tvar type=get.subtype(card);\n\t\t\t\t\treturn player!=target&&target.isEmpty(type);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.equip(cards[0]);\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},discard: \"false\",prepare: function (cards,player,targets){\n\t\t\t\t\tplayer.$give(cards,targets[0],false);\n\t\t\t\t},ai: {basic: {order: \"10\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\tif(card) return get.effect(target,card,target,target);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"出牌阶段，你可以将手牌中的一张装备牌置于一名其他角色装备区里（不得替换原装备），然后摸一张牌。当你使用装备牌时，你可以摸一张牌。"},"guzheng":{"name":"固政","script":"{audio: \"2\",audioname: [\"re_zhangzhang\"],trigger: {global: \"phaseDiscardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.player!=player&&event.player.isIn()){\n\t\t\t\t\t\treturn event.player.getHistory('lose',function(evt){\n\t\t\t\t\t\t\treturn evt.type=='discard'&&evt.getParent('phaseDiscard')==event&&evt.hs.filterInD('d').length>0;\n\t\t\t\t\t\t}).length>0;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},checkx: function (event,player,cards,cards2){\n\t\t\t\t\tif(cards.length>2||get.attitude(player,event.player)>0) return true;\n\t\t\t\t\tfor(var i=0;i<cards2.length;i++){\n\t\t\t\t\t\tif(get.value(cards2[i],event.player,'raw')<0) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tvar cards2=[];\n\t\t\t\t\tgame.getGlobalHistory('cardMove',function(evt){\n\t\t\t\t\t\tif(evt.name=='cardsDiscard'&&evt.getParent('phaseDiscard')==trigger) cards.addArray(evt.cards.filterInD('d'));\n\t\t\t\t\t});\n\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\tcurrent.getHistory('lose',function(evt){\n\t\t\t\t\t\t\tif(evt.type!='discard'||evt.getParent('phaseDiscard')!=trigger) return;\n\t\t\t\t\t\t\tcards.addArray(evt.cards.filterInD('d'));\n\t\t\t\t\t\t\tif(current==trigger.player) cards2.addArray(evt.hs.filterInD('d'));\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar check=lib.skill.guzheng.checkx(trigger,player,cards,cards2);\n\t\t\t\t\tplayer.chooseCardButton(cards,'固政：选择令'+get.translation(trigger.player)+'收回的牌').set('ai',function(button){\n\t\t\t\t\t\tif(_status.event.check){\n\t\t\t\t\t\t\treturn 20-get.value(button.link,_status.event.getTrigger().player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('check',check).set('cards',cards2).set('filterButton',function(button){\n\t\t\t\t\t\treturn _status.event.cards.contains(button.link);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t\tplayer.logSkill('guzheng',trigger.player);\n\t\t\t\t\t\ttrigger.player.gain(result.links[0]);\n\t\t\t\t\t\ttrigger.player.$gain2(result.links[0]);\n\t\t\t\t\t\tgame.log(trigger.player,'收回了',result.links[0]);\n\t\t\t\t\t\tevent.cards.remove(result.links[0]);\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.gain(event.cards);\n\t\t\t\t\t\t\tplayer.$gain2(event.cards);\n\t\t\t\t\t\t\tgame.log(player,'收回了',event.cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",expose: \"0.2\",},}","info":"其他角色的弃牌阶段结束时，你可以令其获得本阶段内进入弃牌堆的牌中的一张，然后你获得其余的牌。"},"jiang":{"name":"激昂","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"sp_lvmeng\",\"re_sunben\",\"re_sunce\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\tif(!(event.card.name=='juedou'||(event.card.name=='sha'&&get.color(event.card)=='red'))) return false;\n\t\t\t\t\treturn player==event.target||event.getParent().triggeredTargets3.length==1;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,0.6];\n\t\t\t\t\t\t},player: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,1];\n\t\t\t\t\t\t},},},}","info":"每当你使用（指定目标后）或被使用（成为目标后）一张【决斗】或红色的【杀】时，你可以摸一张牌。"},"olhunzi":{"name":"魂姿","script":"{audio: \"2\",inherit: \"hunzi\",content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.addSkill('reyingzi');\n\t\t\t\t\tplayer.addSkill('gzyinghun');\n\t\t\t\t\tgame.log(player,'获得了技能','#g【英姿】','和','#g【英魂】');\n\t\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\t\tplayer.storage[event.name]=true;\n\t\t\t\t},skillAnimation: \"true\",animationColor: \"wood\",juexingji: \"true\",derivation: [\"reyingzi\",\"gzyinghun\"],unique: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.hp<=1&&!player.storage.hunzi;\n\t\t\t\t},forced: \"true\",ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 2;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},maixie: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')==1&&target.hp==2&&!target.isTurnedOver()&&\n\t\t\t\t\t\t\t_status.currentPhase!=target&&get.distance(_status.currentPhase,target,'absolute')<=3) return [0.5,1];\n\t\t\t\t\t\t},},},}","info":"觉醒技，准备阶段，若你的体力值为1，你减1点体力上限并回复1点体力，然后获得技能〖英姿〗和〖英魂〗。"},"olzhiba":{"name":"制霸","script":"{audio: \"2\",unique: \"true\",zhuSkill: \"true\",global: \"olzhiba2\",}","info":"主公技，其他吴势力的角色的出牌阶段限一次，其可以与你拼点（你可拒绝此拼点）。若其没赢，你可以获得两张拼点牌。你的出牌阶段限一次，你可以和一名吴势力角色拼点，若你赢，你获得两张拼点牌。"},"reqiaoshui":{"name":"巧说","script":"{audio: \"2\",enable: \"phaseUse\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool) player.addTempSkill('qiaoshui3','phaseUseEnd');\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addTempSkill('qiaoshui4');\n\t\t\t\t\t\tevent.getParent(3).skipped=true;\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (item,player){\n\t\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn player.hasValueTarget(card);\n\t\t\t\t\t\t})) return 10;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn player.hasValueTarget(card);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tif(player.hasSkill('qiaoshui3')) return 0;\n\t\t\t\t\t\t\t\tvar nd=!player.needsToDiscard();\n\t\t\t\t\t\t\t\tif(player.hasCard(function(card){\n\t\t\t\t\t\t\t\t\tif(get.position(card)!=\"h\") return false;\n\t\t\t\t\t\t\t\t\tvar val=get.value(card)\n\t\t\t\t\t\t\t\t\tif(nd&&val<0) return true;\n\t\t\t\t\t\t\t\t\tif(val<=5){\n\t\t\t\t\t\t\t\t\t\treturn card.number>=12;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(val<=6){\n\t\t\t\t\t\t\t\t\t\treturn card.number>=13;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t})) return -1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可与一名其他角色拼点。若你赢，你使用的下一张基本牌或普通锦囊牌可以额外指定任意一名其他角色为目标或减少指定一个目标；若你没赢，你结束出牌阶段且本回合内锦囊牌不计入手牌上限。"},"jyzongshi":{"name":"纵适","script":"{audio: \"2\",audioname: [\"re_jianyong\"],trigger: {player: [\"chooseToCompareAfter\",\"compareMultipleAfter\"],target: [\"chooseToCompareAfter\",\"compareMultipleAfter\"],},filter: function (event,player){\n\t\t\t\t\tif(event.preserve) return false;\n\t\t\t\t\tif(player==event.player){\n\t\t\t\t\t\tif(event.num1>event.num2){\n\t\t\t\t\t\t\treturn !get.owner(event.card2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn !get.owner(event.card1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.num1<event.num1){\n\t\t\t\t\t\t\treturn !get.owner(event.card1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn !get.owner(event.card2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player==event.player){\n\t\t\t\t\t\tif(event.num1>event.num2){\n\t\t\t\t\t\t\treturn event.card2.name!='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn event.card1.name!='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.num1<event.num2){\n\t\t\t\t\t\t\treturn event.card1.name!='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn event.card2.name!='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\tif(trigger.num1>trigger.num2){\n\t\t\t\t\t\t\tplayer.gain(trigger.card2,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.gain(trigger.card1,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(trigger.num1<trigger.num2){\n\t\t\t\t\t\t\tplayer.gain(trigger.card1,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.gain(trigger.card2,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你拼点赢时，你可以获得对方此次拼点的牌；当你拼点没赢时，你可以收回你此次拼点的牌。"}},"card":{},"hero":{"re_gongsunyuan":{"name":"界公孙渊","attr":["male","qun",4,["rehuaiyi"],[]]},"re_caozhen":{"name":"界曹真","attr":["male","wei",4,["residi"],[]]},"re_fuhuanghou":{"name":"界伏皇后","attr":["female","qun",3,["rezhuikong","reqiuyuan"],[]]},"re_fazheng":{"name":"界法正","attr":["male","shu",3,["reenyuan","rexuanhuo"],[]]},"xin_lingtong":{"name":"界凌统","attr":["male","wu",4,["decadexuanfeng","yongjin"],[]]},"xin_liubiao":{"name":"界刘表","attr":["male","qun",3,["decadezishou","decadezongshi"],[]]},"re_caoxiu":{"name":"界曹休","attr":["male","wei",4,["qianju","reqingxi"],[]]},"re_sunxiu":{"name":"界孙休","attr":["male","wu",3,["reyanzhu","rexingxue","zhaofu"],["zhu"]]},"ol_dengai":{"name":"界邓艾","attr":["male","wei",4,["oltuntian","olzaoxian"],[]]},"re_gongsunzan":{"name":"界公孙瓒","attr":["male","qun",4,["reqiaomeng","reyicong"],[]]},"re_manchong":{"name":"界满宠","attr":["male","wei",3,["rejunxing","yuce"],[]]},"re_liru":{"name":"界李儒","attr":["male","qun",3,["rejuece","remieji","xinfencheng"],[]]},"re_yufan":{"name":"界虞翻","attr":["male","wu",3,["zhiyan","rezongxuan"],[]]},"re_bulianshi":{"name":"界步练师","attr":["female","wu",3,["reanxu","zhuiyi"],[]]},"re_hanhaoshihuan":{"name":"界韩浩史涣","attr":["male","wei",4,["reshenduan","reyonglve"],[]]},"re_panzhangmazhong":{"name":"界潘璋马忠","attr":["male","wu",4,["reduodao","reanjian"],[]]},"wangyi":{"name":"界王异","attr":["female","wei",3,["zhenlie","miji"],[]]},"old_madai":{"name":"界马岱","attr":["male","shu",4,["mashu","qianxi"],[]]},"guanzhang":{"name":"界关兴张苞","attr":["male","shu",4,["fuhun"],[]]},"xin_xusheng":{"name":"界徐盛","attr":["male","wu",4,["decadepojun"],[]]},"re_taishici":{"name":"界太史慈","attr":["male","wu",4,["tianyi","hanzhan"],[]]},"re_masu":{"name":"界马谡","attr":["male","shu",3,["resanyao","rezhiman"],[]]},"re_sunluban":{"name":"界孙鲁班","attr":["female","wu",3,["rechanhui","rejiaojin"],[]]},"re_zhonghui":{"name":"界钟会","attr":["male","wei",4,["requanji","zili"],[]]},"re_handang":{"name":"界韩当","attr":["male","wu",4,["regongji","jiefan"],[]]},"yujin_yujin":{"name":"界于禁","attr":["male","wei",4,["rejieyue"],[]]},"re_caozhang":{"name":"界曹彰","attr":["male","wei",4,["new_jiangchi"],[]]},"re_chengpu":{"name":"界程普","attr":["male","wu",4,["decadelihuo","decadechunlao"],[]]},"re_quancong":{"name":"界全琮","attr":["male","wu",4,["xinyaoming"],[]]},"re_liaohua":{"name":"界廖化","attr":["male","shu",4,["xindangxian","xinfuli"],[]]},"re_guohuai":{"name":"界郭淮","attr":["male","wei",4,["xinjingce"],[]]},"re_wuyi":{"name":"界吴懿","attr":["male","shu",4,["xinbenxi"],[]]},"re_zhuran":{"name":"界朱然","attr":["male","wu",4,["xindanshou"],[]]},"re_caozhi":{"name":"界曹植","attr":["male","wei",3,["reluoying","rejiushi","chengzhang"],[]]},"ol_pangtong":{"name":"界庞统","attr":["male","shu",3,["ollianhuan","olniepan"],[]]},"re_zhangyi":{"name":"界张嶷","attr":["male","shu",4,["rewurong","shizhi"],[]]},"re_wuguotai":{"name":"界吴国太","attr":["female","wu",3,["reganlu","buyi"],[]]},"re_gaoshun":{"name":"界高顺","attr":["male","qun",4,["rexianzhen","rejinjiu"],[]]},"re_caocao":{"name":"界曹操","attr":["male","wei",4,["new_rejianxiong","hujia"],["zhu"]]},"re_simayi":{"name":"界司马懿","attr":["male","wei",3,["refankui","reguicai"],[]]},"re_guojia":{"name":"界郭嘉","attr":["male","wei",3,["tiandu","new_reyiji"],[]]},"re_lidian":{"name":"李典","attr":["male","wei",3,["xunxun","wangxi"],[]]},"re_zhangliao":{"name":"界张辽","attr":["male","wei",4,["new_retuxi"],[]]},"re_xuzhu":{"name":"界许褚","attr":["male","wei",4,["new_reluoyi"],[]]},"re_xiahoudun":{"name":"界夏侯惇","attr":["male","wei",4,["reganglie","new_qingjian"],[]]},"re_zhangfei":{"name":"界张飞","attr":["male","shu",4,["olpaoxiao","oltishen"],[]]},"re_zhaoyun":{"name":"界赵云","attr":["male","shu",4,["ollongdan","olyajiao"],[]]},"re_guanyu":{"name":"界关羽","attr":["male","shu",4,["new_rewusheng","new_yijue"],[]]},"re_machao":{"name":"界马超","attr":["male","shu",4,["mashu","retieji"],[]]},"re_xushu":{"name":"界徐庶","attr":["male","shu",4,["zhuhai","qianxin"],[]]},"re_zhouyu":{"name":"界周瑜","attr":["male","wu",3,["reyingzi","refanjian"],[]]},"re_lvmeng":{"name":"界吕蒙","attr":["male","wu",4,["keji","qinxue","botu"],[]]},"re_ganning":{"name":"界甘宁","attr":["male","wu",4,["qixi","fenwei"],[]]},"re_luxun":{"name":"界陆逊","attr":["male","wu",3,["reqianxun","relianying"],[]]},"re_daqiao":{"name":"界大乔","attr":["female","wu",3,["reguose","liuli"],[]]},"re_huanggai":{"name":"界黄盖","attr":["male","wu",4,["rekurou","zhaxiang"],[]]},"re_lvbu":{"name":"界吕布","attr":["male","qun",5,["wushuang","new_liyu"],[]]},"re_huatuo":{"name":"界华佗","attr":["male","qun",3,["jijiu","new_reqingnang"],[]]},"re_liubei":{"name":"界刘备","attr":["male","shu",4,["rerende","jijiang"],["zhu"]]},"re_diaochan":{"name":"界貂蝉","attr":["female","qun",3,["lijian","rebiyue"],[]]},"re_huangyueying":{"name":"界黄月英","attr":["female","shu",3,["rejizhi","reqicai"],[]]},"re_sunquan":{"name":"界孙权","attr":["male","wu",4,["rezhiheng","rejiuyuan"],["zhu"]]},"re_sunshangxiang":{"name":"界孙尚香","attr":["female","wu",3,["xiaoji","rejieyin"],[]]},"re_zhenji":{"name":"界甄姬","attr":["female","wei",3,["reluoshen","reqingguo"],[]]},"re_zhugeliang":{"name":"界诸葛亮","attr":["male","shu",3,["reguanxing","kongcheng"],[]]},"re_huaxiong":{"name":"界华雄","attr":["male","qun",6,["reyaowu"],[]]},"re_zhangjiao":{"name":"界张角","attr":["male","qun",3,["xinleiji","xinguidao","huangtian"],["zhu"]]},"xin_yuji":{"name":"界于吉","attr":["male","qun",3,["reguhuo"],[]]},"re_zuoci":{"name":"界左慈","attr":["male","qun",3,["rehuashen","rexinsheng"],[]]},"ol_xiahouyuan":{"name":"界夏侯渊","attr":["male","wei",4,["xinshensu","shebian"],[]]},"caoren":{"name":"界曹仁","attr":["male","wei",4,["xinjushou","xinjiewei"],[]]},"re_huangzhong":{"name":"界黄忠","attr":["male","shu",4,["xinliegong"],[]]},"ol_weiyan":{"name":"界魏延","attr":["male","shu",4,["xinkuanggu","reqimou"],[]]},"ol_xiaoqiao":{"name":"界小乔","attr":["female","wu",3,["oltianxiang","olhongyan","piaoling"],[]]},"zhoutai":{"name":"界周泰","attr":["male","wu",4,["buqu","fenji"],[]]},"ol_pangde":{"name":"界庞德","attr":["male","qun",4,["mashu","rejianchu"],[]]},"re_xuhuang":{"name":"界徐晃","attr":["male","wei",4,["duanliang","jiezi"],[]]},"ol_sp_zhugeliang":{"name":"界卧龙","attr":["male","shu",3,["bazhen","rehuoji","rekanpo","cangzhuo"],[]]},"re_xunyu":{"name":"界荀彧","attr":["male","wei",3,["quhu","rejieming"],[]]},"re_dianwei":{"name":"界典韦","attr":["male","wei",4,["reqiangxi"],[]]},"re_yanwen":{"name":"界颜良文丑","attr":["male","qun",4,["reshuangxiong"],[]]},"ol_yuanshao":{"name":"界袁绍","attr":["male","qun",4,["olluanji","olxueyi"],["zhu"]]},"re_zhurong":{"name":"界祝融","attr":["female","shu",4,["juxiang","relieren"],[]]},"re_menghuo":{"name":"界孟获","attr":["male","shu",4,["huoshou","rezaiqi"],[]]},"ol_dongzhuo":{"name":"界董卓","attr":["male","qun",8,["oljiuchi","roulin","benghuai","olbaonue"],["zhu"]]},"ol_sunjian":{"name":"界孙坚","attr":["male","wu","4/5",["gzyinghun","wulie"],[]]},"re_caopi":{"name":"界曹丕","attr":["male","wei",3,["rexingshang","refangzhu","songwei"],["zhu"]]},"re_jiangwei":{"name":"界姜维","attr":["male","shu",4,["retiaoxin","zhiji"],[]]},"re_caiwenji":{"name":"界蔡文姬","attr":["female","qun",3,["rebeige","duanchang"],[]]},"ol_liushan":{"name":"界刘禅","attr":["male","shu",3,["xiangle","olfangquan","olruoyu"],["zhu"]]},"re_zhangzhang":{"name":"界张昭张纮","attr":["male","wu",3,["rezhijian","guzheng"],[]]},"re_sunce":{"name":"界孙策","attr":["male","wu",4,["jiang","olhunzi","olzhiba"],["zhu"]]},"re_jianyong":{"name":"界简雍","attr":["male","shu",3,["reqiaoshui","jyzongshi"],[]]}}},"hearth":{"name":"炉石传说","skill":{"huopu":{"name":"火瀑","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: function (card){\n\t\t\t\t\treturn get.suit(card)=='heart';\n\t\t\t\t},viewAs: {name: \"liuxinghuoyu\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{suit:'heart'})) return false;\n\t\t\t\t},prompt: \"将一张红桃手牌当作流星火羽使用\",check: function (card){return 6-get.value(card)},ai: {threaten: \"1.4\",order: \"9\",basic: {order: \"4\",value: \"7\",useful: \"2\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nofire')) return 0;\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,player)<0&&get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar nh=target.countCards('he');\n\t\t\t\t\t\t\tif(target==player) nh--;\n\t\t\t\t\t\t\tswitch(nh){\n\t\t\t\t\t\t\t\tcase 0:case 1:return -2;\n\t\t\t\t\t\t\t\tcase 2:return -1.5;\n\t\t\t\t\t\t\t\tcase 3:return -1;\n\t\t\t\t\t\t\t\tdefault:return -0.7;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},tag: {damage: \"1\",fireDamage: \"1\",natureDamage: \"1\",discard: \"1\",loseCard: \"1\",position: \"he\",},},}","info":"出牌阶段限一次，你可以将一张红桃牌当作流星火羽使用"},"aoshu":{"name":"奥术","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: function (card){\n\t\t\t\t\treturn get.suit(card)=='spade';\n\t\t\t\t},viewAs: {name: \"wuzhong\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{suit:'spade'})) return false;\n\t\t\t\t},prompt: \"将一张黑桃牌当作无中生有使用\",check: function (card){return 7-get.value(card)},ai: {threaten: \"1.4\",order: \"9\",basic: {order: \"7.2\",useful: \"4.5\",value: \"9.2\",},result: {target: \"2\",},tag: {draw: \"2\",},},}","info":"出牌阶段限一次，你可以将一张黑桃牌当作无中生有使用"},"bingjia":{"name":"冰甲","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('bingjia2');\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},discard: \"false\",prepare: function (cards,player){\n\t\t\t\t\tplayer.$give(1,player,false);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.bingjia=cards[0];\n\t\t\t\t\tplayer.addSkill('bingjia2');\n\t\t\t\t\tgame.addVideo('storage',player,['bingjia',get.cardInfo(cards[0]),'card']);\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段，若你武将牌上没有牌，你可以将一张手牌背面朝上置于你的武将牌上，当你成为其他角色的与此牌花色相同的牌的目标时，你移去此牌，获得一点护甲，并且本回合内防止一切伤害"},"yushou":{"name":"御兽","script":"{enable: \"phaseUse\",filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tif(player.hasSkill('yushou_misha')) num+=1.5;\n\t\t\t\t\tif(player.hasSkill('yushou_huofu')) num+=1.5;\n\t\t\t\t\tif(player.hasSkill('yushou_leiouke')) num+=1.5;\n\t\t\t\t\treturn 5-num-get.value(card);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('yushou_misha')&&player.hasSkill('yushou_huofu')&&player.hasSkill('yushou_leiouke')) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(!lib.character.stone_misha){\n\t\t\t\t\t\tlib.character.stone_misha=['male','shu',3,['chaofeng'],['minskin','stone','mode:stone'],[3,3,'hunter']];\n\t\t\t\t\t}\n\t\t\t\t\tif(!lib.character.stone_huofu){\n\t\t\t\t\t\tlib.character.stone_huofu=['male','qun',2,['stone_chongfeng'],['minskin','stone','mode:stone'],[3,4,'hunter']];\n\t\t\t\t\t}\n\t\t\t\t\tif(!lib.character.stone_leiouke){\n\t\t\t\t\t\tlib.character.stone_leiouke=['male','shu',2,['hunter_zhanhuo'],['minskin','stone','mode:stone'],[3,1,'hunter']];\n\t\t\t\t\t}\n\t\t\t\t\tvar list=['misha','leiouke','huofu'];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(player.hasSkill('yushou_'+list[i])){\n\t\t\t\t\t\t\tlist.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar skill=list.randomGet();\n\t\t\t\t\tvar name='yushou_'+skill;\n\t\t\t\t\tplayer.addSkill(name);\n\t\t\t\t\tplayer.markSkillCharacter(name,'stone_'+skill,lib.translate[name],lib.translate[name+'_info']);\n\t\t\t\t},ai: {order: \"9.5\",result: {player: \"1\",},},group: \"yushou_lose\",}","info":"出牌阶段，你可以弃置一张牌并召唤一个随机的野兽宠物，回合开始阶段，你随机失去一个宠物"},"fengxian":{"name":"奉献","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('h')>0;\n\t\t\t\t},selectTarget: \"-1\",content: function (){\n\t\t\t\t\ttarget.chooseToDiscard(true);\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tswitch(nh){\n\t\t\t\t\t\t\t\tcase 0:return 0;\n\t\t\t\t\t\t\t\tcase 1:return -1.5;\n\t\t\t\t\t\t\t\tcase 2:return -1.3;\n\t\t\t\t\t\t\t\tcase 3:return -1;\n\t\t\t\t\t\t\t\tdefault:return -0.8;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以令场上所有角色各弃置一张手牌"},"rejieming":{"name":"节命","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('rejieming'),'令一名角色摸两张牌。然后若其手牌数少于体力上限，你摸一张牌').set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>2){\n\t\t\t\t\t\t\tif((target.maxHp-target.countCards('h'))>2) return 2*att;\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att/3;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.current=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('rejieming',event.current);\n\t\t\t\t\t\tplayer.line(event.current,'thunder');\n\t\t\t\t\t\tevent.current.draw(2);\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.current.countCards('h')<event.current.maxHp){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.count>0) event.goto(1);\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.hp>1){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(get.attitude(target,players[i])>0){\n\t\t\t\t\t\t\t\t\t\tmax=Math.max(Math.min(5,players[i].hp)-players[i].countCards('h'),max);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tswitch(max){\n\t\t\t\t\t\t\t\t\tcase 0:return 2;\n\t\t\t\t\t\t\t\t\tcase 1:return 1.5;\n\t\t\t\t\t\t\t\t\tcase 2:return [1,2];\n\t\t\t\t\t\t\t\t\tdefault:return [0,max];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif((card.name=='tao'||card.name=='caoyao')&&\n\t\t\t\t\t\t\t\ttarget.hp>1&&target.countCards('h')<=target.hp) return [0,0];\n\t\t\t\t\t\t},},},}","info":"当你受到1点伤害后，你可以令一名角色摸两张牌。然后若其手牌数小于体力上限，则你摸一张牌。"},"zhanhou":{"name":"战吼","script":"{enable: \"phaseUse\",filterCard: {subtype: \"equip2\",},position: \"he\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{subtype:'equip2'})>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t},ai: {order: \"9.5\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张防具牌并获得一点护甲"},"qiangxi":{"name":"强袭","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",audioname: [\"boss_lvbu3\"],filterCard: function (card){\n\t\t\t\t\treturn get.subtype(card)=='equip1';\n\t\t\t\t},selectCard: [0,1],filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\treturn player.inRange(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(cards.length==0){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t},position: \"he\",ai: {damage: \"true\",order: \"8\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.cards.length) return 0;\n\t\t\t\t\t\t\tif(player.hp>=target.hp) return -0.9;\n\t\t\t\t\t\t\tif(player.hp<=2) return -10;\n\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\t\t\tif(player.hp<2) return 0;\n\t\t\t\t\t\t\t\tif(player.hp==2&&target.hp>=2) return 0;\n\t\t\t\t\t\t\t\tif(target.hp>player.hp) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},},threaten: \"1.3\",}","info":"出牌阶段限一次，你可以失去一点体力或弃置一张武器牌，然后对你攻击范围内的一名其他角色造成一点伤害。"},"jihuo":{"name":"激活","script":"{trigger: {player: \"phaseAfter\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&event.skill!='jihuo';\n\t\t\t\t},direct: \"true\",priority: \"-50\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('jihuo'));\n\t\t\t\t\tnext.ai=get.unuseful2;\n\t\t\t\t\tnext.logSkill='jihuo';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"在你的回合结束后，你可以弃置一张手牌并进行一个额外的回合"},"moxie":{"name":"魔血","script":"{trigger: {player: \"duBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {threaten: \"1.2\",nodu: \"true\",usedu: \"true\",},group: \"moxie_use\",subSkill: {use: {trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(hs[i].name=='du'){\n\t\t\t\t\t\t\t\t\ths.splice(i--,1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\t\t\tvar card=hs.randomGet();\n\t\t\t\t\t\t\t\tcard.init([card.suit,card.number,'du']);\n\t\t\t\t\t\t\t\tgame.log(player,'将一张手牌转化为',{name:'du'});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，你失去毒时不流失体力；你使用毒时摸两张牌；结束阶段，你将一张随机手牌转化为毒"},"fuhua":{"name":"腐化","script":"{enable: \"phaseUse\",filterCard: {name: \"du\",},check: function (){return 1},filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.hasSkill('moxie')&&!target.hasSkill('fuhua2');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','du');\n\t\t\t\t},discard: \"false\",prepare: \"give\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.gain(cards,player);\n\t\t\t\t\tvar choice=1;\n\t\t\t\t\tif(get.attitude(target,player)>0||(target.hp<=1&&!target.hasSha())){\n\t\t\t\t\t\tchoice=0;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.chooseControl(function(){\n\t\t\t\t\t\treturn choice;\n\t\t\t\t\t}).set('choiceList',['获得技能魔血，每个出牌阶段开始时需交给'+get.translation(player)+'一张牌',\n\t\t\t\t\t'视为'+get.translation(player)+'对你使用一张决斗，若你赢，本局不能再成为腐化目标']);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\ttarget.storage.fuhua2=player;\n\t\t\t\t\t\ttarget.addSkill('fuhua2');\n\t\t\t\t\t\ttarget.addSkill('moxie');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.useCard({name:'juedou'},target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",order: \"8\",expos: \"0.2\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h')<=2) return 0;\n\t\t\t\t\t\t\tif(get.attitude(target,player)>0) return 1;\n\t\t\t\t\t\t\tif(get.effect(target,{name:'juedou'},player,player)>0) return 1.5;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以将一张毒交给一名没有魔血技能的其他角色，该角色选择一项：1. 获得技能魔血，此后每个结束阶段需交给你一张手牌；2. 视为你对其使用一张决斗"},"hongxi":{"name":"虹吸","script":"{trigger: {global: \"dieAfter\",},filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.recover(player.maxHp-player.hp);\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"锁定技，每当有一名角色死亡，你将体力回复至体力上限"},"shengguang":{"name":"圣光","script":"{enable: \"phaseUse\",filterCard: {color: \"red\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'red'})>0;\n\t\t\t\t},position: \"he\",usable: \"1\",check: function (card){\n\t\t\t\t\treturn 9-get.value(card)\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(player.storage.anying) return true;\n\t\t\t\t\tif(target.hp>=target.maxHp) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player.storage.anying){\n\t\t\t\t\t\ttarget.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.storage.anying) return -1;\n\t\t\t\t\t\t\tif(target.hp==1) return 5;\n\t\t\t\t\t\t\tif(player==target&&player.countCards('h')>player.hp) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},},threaten: \"2\",expose: \"0.2\",},}","info":"出牌阶段限一次，你可以弃置一张红色牌令一名角色回复一点体力"},"shijie":{"name":"视界","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('shijie'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&target.countCards('h')>0;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn 11-get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('shijie',result.targets);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar card=target.getCards('h').randomGet()\n\t\t\t\t\t\tplayer.gain(card,target);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\ttarget.$giveAuto(card,player);\n\t\t\t\t\t\tevent.target.draw();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"结束阶段，你可以获得一名其他角色的一张手牌，然后该角色摸一张牌"},"anying":{"name":"暗影","script":"{unique: \"true\",enable: \"phaseUse\",skillAnimation: \"epic\",animationColor: \"thunder\",derivation: \"xinci\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.anying&&player.countCards('he',{color:'black'})>0;\n\t\t\t\t},filterCard: {color: \"black\",},position: \"he\",check: function (card){\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.anying=true;\n\t\t\t\t\tplayer.awakenSkill('anying');\n\t\t\t\t\tplayer.removeSkill('shengguang');\n\t\t\t\t\tplayer.addAdditionalSkill('anying','xinci');\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)>0&&current.isDamaged()&&current.hp<=2;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以弃置一张黑色牌，失去技能圣光，并获得技能心刺"},"tuteng":{"name":"图腾","script":"{enable: \"phaseUse\",usable: \"1\",unique: \"true\",direct: \"true\",delay: \"0\",init: function (){\n\t\t\t\t\tfor(var i=1;i<=8;i++){\n\t\t\t\t\t\tlib.translate['tuteng'+i+'_info']=lib.skill['tuteng'+i].intro.content;\n\t\t\t\t\t}\n\t\t\t\t},position: \"he\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.tuteng_awake) return true;\n\t\t\t\t\tvar rand=['tuteng1','tuteng2','tuteng3','tuteng4'];\n\t\t\t\t\tfor(var i=0;i<rand.length;i++){\n\t\t\t\t\t\tif(!player.hasSkill(rand[i])) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar rand=['tuteng1','tuteng2','tuteng3','tuteng4'];\n\t\t\t\t\tvar rand2=[];\n\t\t\t\t\tvar randx=[];\n\t\t\t\t\tvar rand2x=[];\n\t\t\t\t\tif(player.storage.tuteng_awake){\n\t\t\t\t\t\trand=rand.concat(['tuteng5','tuteng6','tuteng7','tuteng8']);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<player.skills.length;i++){\n\t\t\t\t\t\tif(rand.contains(player.skills[i])){\n\t\t\t\t\t\t\trand.remove(player.skills[i]);\n\t\t\t\t\t\t\trand2.push(player.skills[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.storage.tuteng_awake){\n\t\t\t\t\t\tplayer.addSkill(rand.randomGet());\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(rand.length){\n\t\t\t\t\t\tif(event.isMine()&&(rand.length>1||rand2.length>=4)){\n\t\t\t\t\t\t\tvar dialog=ui.create.dialog();\n\t\t\t\t\t\t\tfor(var i=0;i<rand.length;i++){\n\t\t\t\t\t\t\t\trandx[i]=['','',rand[i]];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<rand2.length;i++){\n\t\t\t\t\t\t\t\trand2x[i]=['','',rand2[i]];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdialog.add('选择一个图腾');\n\t\t\t\t\t\t\tdialog.add([randx,'vcard']);\n\t\t\t\t\t\t\tif(rand2.length>=4){\n\t\t\t\t\t\t\t\tdialog.add('替换一个已有图腾');\n\t\t\t\t\t\t\t\tdialog.add([rand2x,'vcard']);\n\t\t\t\t\t\t\t\tplayer.chooseButton(dialog,2,true).filterButton=function(button){\n\t\t\t\t\t\t\t\t\tif(ui.selected.buttons.length){\n\t\t\t\t\t\t\t\t\t\tvar current=ui.selected.buttons[0].name;\n\t\t\t\t\t\t\t\t\t\tif(rand.contains(current)){\n\t\t\t\t\t\t\t\t\t\t\treturn rand2.contains(button.name);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn rand.contains(button.name);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.chooseButton(dialog,true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\tvar item=dialog.buttons[i]\n\t\t\t\t\t\t\t\tif(i==4){\n\t\t\t\t\t\t\t\t\titem.parentNode.insertBefore(document.createElement('br'),item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\titem.style.zoom=0.7;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(player.hp<player.maxHp&&rand.contains('tuteng1')){\n\t\t\t\t\t\t\t\tplayer.addSkill('tuteng1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(rand.length>1){\n\t\t\t\t\t\t\t\t\trand.remove('tuteng1');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplayer.addSkill(rand.randomGet());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// if(rand2.length>=3){\n\t\t\t\t\t\t\t// \tplayer.removeSkill(rand2.randomGet());\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.buttons.length==1){\n\t\t\t\t\t\tplayer.addSkill(result.buttons[0].name);\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.buttons.length==2){\n\t\t\t\t\t\tvar skill1=result.buttons[0].name;\n\t\t\t\t\t\tvar skill2=result.buttons[1].name;\n\t\t\t\t\t\tif(player.hasSkill(skill1)){\n\t\t\t\t\t\t\tplayer.removeSkill(skill1);\n\t\t\t\t\t\t\tplayer.addSkill(skill2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.removeSkill(skill2);\n\t\t\t\t\t\t\tplayer.addSkill(skill1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"11\",result: {player: \"1\",},effect: function (card,player,target){\n\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\treturn 1.2;\n\t\t\t\t\t\t}\n\t\t\t\t\t},threaten: \"2\",},group: \"tuteng_lose\",}","info":"出牌阶段，你可以获得一个随机基础图腾；每当你受到一次伤害，你随机失去一个图腾"},"guozai":{"name":"过载","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<(get.is.altered('guozai')?3:4);\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.guozai2=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=(get.is.altered('guozai')?3:4)-player.countCards('h');\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\tplayer.addSkill('guozai2');\n\t\t\t\t\tplayer.storage.guozai2+=num;\n\t\t\t\t\tgame.addVideo('storage',player,['guozai2',player.storage.guozai2]);\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可将手牌补至四张，并于此阶段结束时弃置等量的牌"},"zuling":{"name":"祖灵","script":"{skillAnimation: \"epic\",animationColor: \"thunder\",trigger: {player: \"phaseBegin\",},forced: \"true\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.storage.tuteng_awake){\n\t\t\t\t\t\tvar rand=['tuteng1','tuteng2','tuteng3','tuteng4',\n\t\t\t\t\t\t'tuteng5','tuteng6','tuteng7','tuteng8'];\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<player.skills.length;i++){\n\t\t\t\t\t\t\tif(rand.contains(player.skills[i])) num++;\n\t\t\t\t\t\t\tif(num>=3){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.tuteng_awake=true;\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.awakenSkill('zuling');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你拥有至少3个图腾，你失去一点体力上限，并将图腾描述中的“获得一个随机基础图腾”改为“获得任意一个图腾（若有4个图腾则改为替换一个图腾）”"},"jianren":{"name":"刃舞","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.getEquip(1)?true:false;\n\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\treturn card==player.getEquip(1);\n\t\t\t\t},position: \"e\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},selectCard: \"-1\",selectTarget: \"-1\",content: function (){\n\t\t\t\t\ttarget.damage();\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,target);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置装备区内的武器牌，对所有其他角色造成一点伤害"},"mengun":{"name":"闷棍","script":"{trigger: {global: \"useCardToBefore\",},priority: \"12\",filter: function (event,player){\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(_status.currentPhase!=event.player) return false;\n\t\t\t\t\tif(event.player.hasSkill('mengun2')) return false;\n\t\t\t\t\tif(get.itemtype(event.card)!='card') return false;\n\t\t\t\t\tif(!player.countCards('h',{suit:get.suit(event.card)})) return false;\n\t\t\t\t\treturn get.type(event.card)=='basic';\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar val=get.value(trigger.card);\n\t\t\t\t\tvar suit=get.suit(trigger.card);\n\t\t\t\t\tvar eff=get.effect(trigger.target,trigger.card,trigger.player,player);\n\t\t\t\t\tvar next=player.chooseToDiscard('是否对'+get.translation(trigger.player)+'使用的'+get.translation(trigger.card)+'发动【闷棍】？',function(card){\n\t\t\t\t\t\treturn get.suit(card)==suit;\n\t\t\t\t\t});\n\t\t\t\t\tnext.logSkill=['mengun',trigger.player];\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(eff>=0) return 0;\n\t\t\t\t\t\treturn Math.min(8,1+val)-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.log(trigger.player,'收回了',trigger.cards);\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\ttrigger.player.$gain2(trigger.cards);\n\t\t\t\t\ttrigger.player.gain(trigger.cards);\n\t\t\t\t\ttrigger.player.storage.mengun2=trigger.cards[0];\n\t\t\t\t\tgame.addVideo('storage',player,['mengun2',get.cardInfo(trigger.cards[0]),'card']);\n\t\t\t\t\ttrigger.player.addTempSkill('mengun2','phaseEnd');\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"每当一名其他角色于回合内使用基本牌，你可以弃置一张与之花色相同的牌令其收回此牌，且在本回合内不能再次使用，每回合限一次"},"wlianji":{"name":"连击","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countUsed()>player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},init: function (player){player.storage.jingce=true},intro: {content: function (storage,player){\n\t\t\t\t\t\tif(_status.currentPhase==player) return '已使用'+player.countUsed()+'张牌';\n\t\t\t\t\t},},}","info":"结束阶段，若你本回合使用的卡牌数大于你当前的体力值，你可以摸两张牌"},"jingxiang":{"name":"镜像","script":"{trigger: {player: \"chooseToRespondBegin\",},direct: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(event.responded) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('jingxiang'),function(card,player,target){\n\t\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\tif(nh==0) return false;\n\t\t\t\t\t\tif(get.is.altered('jingxiang')){\n\t\t\t\t\t\t\treturn nh<=player.countCards('h');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn 1-get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('jingxiang',target);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tvar cards=target.getCards('h');\n\t\t\t\t\t\tplayer.chooseCardButton('选择'+get.translation(target)+'的一张卡手牌打出',cards).filterButton=function(button){\n\t\t\t\t\t\t\treturn trigger.filterCard(button.link);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.log(player,'使用了',event.target,'的手牌');\n\t\t\t\t\t\tevent.target.$throw(result.links);\n\t\t\t\t\t\tevent.target.lose(result.links);\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.animate=false;\n\t\t\t\t\t\ttrigger.responded=true;\n\t\t\t\t\t\tresult.buttons[0].link.remove();\n\t\t\t\t\t\ttrigger.result={bool:true,card:result.buttons[0].link}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.counttrigger.jingxiang--;\n\t\t\t\t\t}\n\t\t\t\t},ai: {respondShan: \"true\",effect: {target: function (card){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')) return 0.4;\n\t\t\t\t\t\t\tif(get.tag(card,'respondSha')) return 0.4;\n\t\t\t\t\t\t},},},}","info":"每回合限一次，当你需要打出卡牌时，你可以观看一名角色的手牌并将其视为你的手牌打出"},"zuzhou":{"name":"诅咒","script":"{trigger: {player: \"phaseBegin\",},filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('h',{suit:'spade'})) return false;\n\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hasJudge('fulei');\n\t\t\t\t\t});\n\t\t\t\t},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar card=game.createCard('fulei');\n\t\t\t\t\tplayer.addJudge(card);\n\t\t\t\t\tplayer.$draw(card);\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t},ai: {threaten: \"1.5\",},group: \"zuzhou_remove\",subSkill: {remove: {trigger: {global: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card&&event.card.name=='fulei';\n\t\t\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t\t\ttrigger.card.expired=true;\n\t\t\t\t\t\t\tgame.log(trigger.card,'被移去');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，准备阶段，若场上没有浮雷且你手牌中有黑桃牌，你将牌堆中的一张浮雷置于你的判定区；当一名角色受到浮雷伤害时，你移去此浮雷"},"mdzhoufu":{"name":"缚魂","script":"{enable: \"phaseUse\",filterCard: {color: \"black\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{color:'black'})>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&!target.hasSkill('mdzhoufu2');\n\t\t\t\t},prepare: \"throw\",discard: \"false\",content: function (){\n\t\t\t\t\ttarget.$gain2(cards);\n\t\t\t\t\ttarget.storage.mdzhoufu2=cards[0];\n\t\t\t\t\ttarget.addSkill('mdzhoufu2');\n\t\t\t\t\ttarget.storage.mdzhoufu3=player;\n\t\t\t\t\tgame.addVideo('storage',target,['mdzhoufu2',get.cardInfo(cards[0]),'card']);\n\t\t\t\t\tui.special.appendChild(cards[0]);\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(get.suit(card)=='spade'){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t},ai: {tag: {rejudge: \"0.1\",},threaten: \"1.5\",expose: \"0.1\",order: \"10\",result: {target: \"-1\",},},}","info":"出牌阶段，你可以将一张黑色手牌置于一名其他角色的武将牌上，在其判定时以此牌作为判定结果，然后你获得亮出的判定牌"},"fengxing":{"name":"风行","script":"{trigger: {player: \"loseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase!=player&&!player.hasSkill('fengxing2')&&player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addTempSkill('fengxing2');\n\t\t\t\t\tplayer.chooseToDiscard('he',get.prompt('fengxing')).set('ai',function(card){\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t}).set('autodelay',0.5).logSkill='fengxing';\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.6\",},}","info":"每当你于回合外首次失去牌，你可以弃置一张牌并摸两张牌"},"xinliegong":{"name":"烈弓","script":"{shaRelated: \"true\",mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(card.name=='sha'&&typeof get.number(card)=='number'){\n\t\t\t\t\t\t\tif(get.distance(player,target)<=get.number(card)) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},audio: \"liegong\",audioname: [\"re_huangzhong\"],trigger: {player: \"useCardToTargeted\",},logTarget: \"target\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(event.target.countCards('h')<=player.countCards('h')) return true;\n\t\t\t\t\tif(event.target.hp>=player.hp) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.target.countCards('h')<=player.countCards('h')) trigger.getParent().directHit.push(trigger.target);\n\t\t\t\t\tif(trigger.target.hp>=player.hp){\n\t\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\t\tvar map=trigger.getParent().customArgs;\n\t\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\t\tif(typeof map[id].extraDamage!='number'){\n\t\t\t\t\t\t\tmap[id].extraDamage=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmap[id].extraDamage++;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.5\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(get.attitude(player,arg.target)<=0&&arg.card.name=='sha'&&player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn card!=arg.card&&(!arg.card.cards||!arg.card.cards.contains(card));\n\t\t\t\t\t\t})>=arg.target.countCards('h')) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"你使用【杀】可以选择你距离不大于此【杀】点数的角色为目标；当你使用【杀】指定一个目标后，你可以根据下列条件执行相应的效果：1.其手牌数小于等于你的手牌数，此【杀】不可被【闪】响应，2.其体力值大于等于你的体力值，此【杀】伤害+1。"},"zhongjia":{"name":"战甲","script":"{trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t},ai: {nohujia: \"true\",maixie: \"true\",maixie_hp: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\treturn player.hp>player.countCards('h')&&player.hp>1;\n\t\t\t\t\t},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.hujia) return 0.8;\n\t\t\t\t\t},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1];\n\t\t\t\t\t\t\t\treturn 0.8;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你受到一次伤害，你获得一点护甲；当你的体力值大于1且大于手牌数时，你的护甲不为你抵挡伤害"},"dunji":{"name":"盾击","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.hujia?true:false;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&get.distance(player,target,'attack')<=1;\n\t\t\t\t},selectTarget: function (){\n\t\t\t\t\treturn [1,_status.event.player.hujia];\n\t\t\t\t},contentBefore: function (){\n\t\t\t\t\tplayer.changeHujia(-targets.length);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.damage();\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,player,target)+0.5;\n\t\t\t\t\t\t\tif(eff>0&&eff<=0.5) return 0;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以对攻击范围内的至多X名其他角色各造成一点伤害，并失去等量的护甲，X为你的护甲数"},"xueren":{"name":"血刃","script":"{trigger: {source: \"damageEnd\",},filter: function (event){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player.isAlive();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)>=0) return false;\n\t\t\t\t\tif(player.hp>2) return true;\n\t\t\t\t\tif(player.hp<2) return false;\n\t\t\t\t\treturn player.hp>=event.player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.player.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},}","info":"每当你使用杀造成伤害，你可以令受伤害角色与你各流失一点体力，然后你摸两张牌"},"s_tuteng":{"name":"神谕","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",unique: \"true\",content: function (){\n\t\t\t\t\tvar rand=['tuteng1','tuteng2','tuteng3','tuteng4','tuteng5','tuteng6','tuteng7','tuteng8'];\n\t\t\t\t\tvar rand2=[];\n\t\t\t\t\tfor(var i=0;i<rand.length;i++){\n\t\t\t\t\t\tif(player.skills.contains(rand[i])){\n\t\t\t\t\t\t\trand2.push(rand[i]);\n\t\t\t\t\t\t\trand.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(rand2.length>=3){\n\t\t\t\t\t\tplayer.removeSkill(rand2.randomGet());\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addSkill(rand.randomGet('tuteng1','tuteng3'));\n\t\t\t\t},ai: {threaten: \"2\",},}","info":"锁定技，准备阶段，你随机获得一个图腾，若你已有至少3个图腾，则改为随机替换一个图腾"},"midian":{"name":"秘典","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:['trick','delay']})>0;\n\t\t\t\t},filterCard: {type: [\"trick\",\"delay\"],},check: function (card){\n\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=get.inpile('trick','trick');\n\t\t\t\t\tvar list2=[];\n\t\t\t\t\tfor(var i=0;i<3;i++){\n\t\t\t\t\t\tlist2.push(game.createCard(list.randomGet()));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(list2,'draw');\n\t\t\t\t},ai: {order: \"9.8\",threaten: \"1.8\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张锦囊牌，然后随机获得三张锦囊牌"},"fuwen":{"name":"符文","script":"{trigger: {player: \"phaseDiscardEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.type(event.cards[i],'trick')=='trick') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t},}","info":"若你弃牌阶段弃置了锦囊牌，你可以获得一点护甲"},"jinzhou":{"name":"禁咒","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{suit:'spade'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('jinzhou'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!target.hasSkill('fengyin');\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>=0) return 0;\n\t\t\t\t\t\tvar skills=target.getSkills();\n\t\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\t\tif(!get.is.locked(skills[i])){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('maixie')) return 2;\n\t\t\t\t\t\t\t\treturn get.threaten(target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('jinzhou',result.targets);\n\t\t\t\t\t\tresult.targets[0].addTempSkill('fengyin',{player:'phaseAfter'});\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.4\",},}","info":"结束阶段，若你手牌中有黑桃牌，你可以令一名其他角色的非锁定技失效直到其下一回合结束"},"yuelu":{"name":"月露","script":"{enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn event.type=='dying'&&player.countCards('he',{color:'black'});\n\t\t\t\t},filterCard: {color: \"black\",},position: \"he\",check: function (card){\n\t\t\t\t\treturn 11-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target==_status.event.dying;\n\t\t\t\t},selectTarget: \"-1\",content: function (){\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\tif(!get.is.altered('yuelu')) target.changeHujia();\n\t\t\t\t},ai: {order: \"10\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.countCards('he',{color:'black'})==0) return false;\n\t\t\t\t\t},save: \"true\",result: {target: \"3\",},threaten: \"2.5\",},}","info":"在一名角色的濒死阶段，你可以弃置一张黑色牌令其回复一点体力并获得一点护甲"},"xingluo":{"name":"星落","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.isMaxHandcard();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h')>nh;\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseTarget(get.prompt('xingluo'),[1,num],function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')>nh;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn 0.5-get.attitude(player,target);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.cards=[];\n\t\t\t\t\t\tevent.list=result.targets.slice(0);\n\t\t\t\t\t\tevent.list.sort(lib.sort.seat);\n\t\t\t\t\t\tplayer.logSkill('xingluo',result.targets);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\tevent.list.shift().chooseToDiscard('h',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool&&result.cards.length){\n\t\t\t\t\t\tevent.cards.push(result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tplayer.chooseCardButton('选择一张加入手牌',event.cards).ai=function(button){\n\t\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.links,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"准备阶段，你可以令任意名手牌数多于你的角色各弃置一张手牌，然后你可以从弃置的牌中选择一张加入手牌"},"liechao":{"name":"猎潮","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn !player.isTurnedOver()&&player.countCards('h')<=player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(get.is.altered('liechao')?3:4);\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\tplayer.skip('phaseDiscard');\n\t\t\t\t},ai: {order: \"10\",result: {player: \"1\",},},}","info":"出牌阶阶段限一次，若你的武将牌正面朝上且手牌数不大于当前体力值，你可以翻面并摸四张牌，若如此做，你跳过本回合的弃牌阶段"},"qingliu":{"name":"清流","script":"{trigger: {player: \"damageBefore\",},filter: function (event){\n\t\t\t\t\treturn event.nature=='fire';\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {nofire: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'fireDamage')) return 0;\n\t\t\t\t\t\t},},},}","info":"锁定技，你防止即将受到的火焰伤害"},"shengyan":{"name":"圣言","script":"{trigger: {global: \"recoverEnd\",},filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('shengyan2')&&event.player.hp<event.player.maxHp;\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.player.recover();\n\t\t\t\t\tplayer.addTempSkill('shengyan2');\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"任意一名角色回复体力后，你可以令其额外回复一点体力，每回合限发动一次"},"xianzhi":{"name":"先知","script":"{trigger: {global: \"judgeBegin\",},frequent: \"true\",filter: function (){\n\t\t\t\t\treturn ui.cardPile.childNodes.length>1;\n\t\t\t\t},check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar str='';\n\t\t\t\t\tif(trigger.card) str=get.translation(trigger.card.viewAs||trigger.card.name);\n\t\t\t\t\telse if(trigger.skill) str=get.translation(trigger.skill);\n\t\t\t\t\telse str=get.translation(trigger.parent.name);\n\n\t\t\t\t\tvar cards=[ui.cardPile.childNodes[0],ui.cardPile.childNodes[1]];\n\t\t\t\t\tvar att=get.attitude(player,trigger.player);\n\t\t\t\t\tvar delta=trigger.judge(ui.cardPile.childNodes[1])-trigger.judge(ui.cardPile.childNodes[0]);\n\t\t\t\t\tplayer.chooseControl('调换顺序','cancel2',\n\t\t\t\t\tui.create.dialog('先知：'+get.translation(trigger.player)+'的'+str+'判定',cards,'hidden')).ai=function(){\n\t\t\t\t\t\tif(att*delta>0) return '调换顺序';\n\t\t\t\t\t\telse return 'cancel2';\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='调换顺序'){\n\t\t\t\t\t\tvar card=ui.cardPile.firstChild;\n\t\t\t\t\t\tui.cardPile.removeChild(card);\n\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild.nextSibling);\n\t\t\t\t\t\tgame.log(player,'调换了牌堆顶两张牌的顺序');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",tag: {rejudge: \"0.5\",},},}","info":"任意一名角色进行判定前，你可以观看牌堆顶的两张牌，并可以将其调换顺序"},"yanshu":{"name":"炎舞","script":"{trigger: {player: \"discardAfter\",},frequent: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(!event.cards) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards[i])!='basic') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(game.createCard('liuxinghuoyu','red'),'gain2');\n\t\t\t\t},}","info":"每回合限一次，当你弃置非基本牌后，你可以获得一张流星火雨"},"bingshuang":{"name":"冰枪","script":"{trigger: {source: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&get.type(event.card)=='trick'&&\n\t\t\t\t\tevent.player.isAlive()&&!event.player.isTurnedOver();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(event.player.hasSkillTag('noturn')) return;\n\t\t\t\t\tif(event.player.isTurnedOver()){\n\t\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t\t}\n\t\t\t\t\treturn get.attitude(player,event.player)<=0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t\ttrigger.player.turnOver();\n\t\t\t\t},}","info":"你使用锦囊牌造成伤害后，可令目标摸两张牌并翻面"},"fengnu":{"name":"风怒","script":"{mod: {cardUsable: function (card){\n\t\t\t\t\t\tif(get.info(card)&&get.info(card).forceUsable) return;\n\t\t\t\t\t\treturn Infinity;\n\t\t\t\t\t},targetInRange: function (){\n\t\t\t\t\t\tif(!get.is.altered('fengnu')) return true;\n\t\t\t\t\t},},trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\treturn player.countUsed(event.card)>1;\n\t\t\t\t},forced: \"true\",usable: \"3\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"锁定技，你使用的任何卡牌无数量及距离限制；当你于回合内重复使用同名卡牌时，你摸一张牌（每回合最多以此法摸3张牌）"},"shengdun":{"name":"圣盾","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hujia;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t\tplayer.update();\n\t\t\t\t},}","info":"锁定技，准备阶段，若你没有护甲，你获得一点护甲"},"yiwen":{"name":"轶闻","script":"{trigger: {target: \"useCardToBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.targets&&event.targets.length==1&&\n\t\t\t\t\tevent.target!=event.player&&_status.currentPhase==event.player&&\n\t\t\t\t\t!event.player.hasSkill('yiwen2')&&!get.info(event.card).unique;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.gain(game.createCard(trigger.card),'gain2');\n\t\t\t\t\ttrigger.player.addTempSkill('yiwen2');\n\t\t\t\t},ai: {threaten: \"0.7\",},}","info":"锁定技，每当其他角色于回合内首次使用非特殊卡牌指定你为惟一目标，你获得一张此牌的复制"},"huanwu":{"name":"唤雾","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.storage.huanwu;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.gainMaxHp();\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\ttarget.storage.huanwu=true;\n\t\t\t\t\ttarget.mark('huanwu',{\n\t\t\t\t\t\tname:'唤雾',\n\t\t\t\t\t\tcontent:'已发动'\n\t\t\t\t\t});\n\t\t\t\t\tgame.addVideo('mark',target,{\n\t\t\t\t\t\tname:'唤雾',\n\t\t\t\t\t\tcontent:'已发动',\n\t\t\t\t\t\tid:'huanwu'\n\t\t\t\t\t});\n\t\t\t\t},ai: {threaten: \"1.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn 1/target.hp;\n\t\t\t\t\t\t},},order: \"10\",expose: \"0.3\",},}","info":"出牌阶段限一次，你可以令一名角色增加一点体力上限，回复一点体力，并摸两张牌（每名角色限发动一次）"},"hanshuang":{"name":"寒霜","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&get.color(event.card)=='black'&&\n\t\t\t\t\t!event.player.isTurnedOver()&&event.player.isAlive();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.player.turnOver();\n\t\t\t\t\tif(get.is.altered('hanshuang')) trigger.player.draw();\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t},ai: {threaten: \"1.5\",effect: {player: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.color(card)=='black'&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn [1,0,1,-2];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，你使用黑色牌对一名未翻面角色造成伤害后，你令受伤害角色翻面，然后你流失一点体力"},"bingshi":{"name":"冰噬","script":"{global: \"bingshi2\",}","info":"锁定技，你死亡时，对所有其他角色造成一点伤害"},"enze":{"name":"恩泽","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.countCards('h')!=target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=player.countCards('h')-target.countCards('h');\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\tif(num>3){\n\t\t\t\t\t\t\tnum=3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.draw(num);\n\t\t\t\t\t}\n\t\t\t\t\telse if(num<0){\n\t\t\t\t\t\tif(num<-3){\n\t\t\t\t\t\t\tnum=-3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.chooseToDiscard(-num,true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.8\",order: function (name,player){\n\t\t\t\t\t\tvar max=true,num=0;\n\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(players[i]==player) continue;\n\t\t\t\t\t\t\tvar att=get.attitude(player,players[i]);\n\t\t\t\t\t\t\tvar dh=player.countCards('h')-players[i].countCards('h');\n\t\t\t\t\t\t\tif(att*dh>num){\n\t\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\t\tmax=true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(att<0){\n\t\t\t\t\t\t\t\t\tmax=false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnum=att*dh;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(max) return 10;\n\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t},result: {player: function (player,target){\n\t\t\t\t\t\t\treturn (player.countCards('h')-target.countCards('h'))*get.attitude(player,target);\n\t\t\t\t\t\t},},expose: \"0.2\",},}","info":"出牌阶段限一次，你可以指定一名角色令其手牌数与你相等（最多摸或弃三张牌）"},"chongsheng":{"name":"重生","script":"{unique: \"true\",enable: \"chooseToUse\",mark: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.chongsheng=2;\n\t\t\t\t\tplayer.syncStorage('chongsheng');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.type!='dying') return false;\n\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\tif(player.storage.chongsheng<=0) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.hp=Math.min(player.storage.chongsheng,player.maxHp);\n\t\t\t\t\tplayer.discard(player.getCards('hej'));\n\t\t\t\t\tplayer.draw(player.storage.chongsheng);\n\t\t\t\t\tplayer.storage.chongsheng--;\n\t\t\t\t\tif(player.storage.chongsheng<=0){\n\t\t\t\t\t\tplayer.unmarkSkill('chongsheng');\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.isLinked()) player.link();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.isTurnedOver()) player.turnOver();\n\t\t\t\t\tplayer.syncStorage('chongsheng');\n\t\t\t\t},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.storage.chongsheng<=0) return false;\n\t\t\t\t\t\tif(player.hp>0) return false;\n\t\t\t\t\t},save: \"true\",result: {player: \"10\",},threaten: function (player,target){\n\t\t\t\t\t\tif(target.storage.chongsheng>0) return 0.6;\n\t\t\t\t\t},},intro: {content: \"time\",},}","info":"濒死阶段，你可弃置所有牌，将体力回复至2-X，并摸2-X张牌，X为你本局发动此技能的次数。每局最多发动2次"},"malymowang":{"name":"魔网","script":"{trigger: {source: \"damageBegin\",},forced: \"true\",usable: \"1\",filter: function (event){\n\t\t\t\t\treturn event.card&&get.type(event.card)=='trick'&&event.parent.name!='_lianhuan'&&event.parent.name!='_lianhuan2';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},group: \"malymowang_discover\",ai: {threaten: \"1.8\",},subSkill: {discover: {trigger: {player: \"phaseUseBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.discoverCard(get.inpile('trick'));\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，你的锦囊牌在每回合中造成的首次伤害+1；出牌阶段开始时，你发现一张普通锦囊牌"},"liehun":{"name":"裂魂","script":"{trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic'&&!get.info(card).unique;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tif(get.type(hs[i])=='basic'||get.info(hs[i]).unique){\n\t\t\t\t\t\t\ths.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\tvar hs2=[];\n\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\ths2.push(game.createCard(hs[i].name,hs[i].suit,hs[i].number));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.gain(hs2,'draw');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"锁定技，结束阶段，你获得手牌中所有非基本、非特殊牌的复制"},"xjumo":{"name":"聚魔","script":"{mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.hp<player.maxHp) return num+5;\n\t\t\t\t\t\treturn num+3;\n\t\t\t\t\t},},}","info":"锁定技，你的手牌上限+3；若你已受伤，改为+5"},"duzhang":{"name":"毒瘴","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar stat=player.getStat('card');\n\t\t\t\t\tfor(var i in stat){\n\t\t\t\t\t\tif(typeof stat[i]=='number'&&get.type(i,'trick')=='trick'){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('duzhang'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn -get.attitude(player,target)*Math.sqrt(target.countCards('h'));\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('duzhang',result.targets);\n\t\t\t\t\t\tresult.targets[0].addTempSkill('duzhang2',{player:'phaseAfter'});\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，若你于本回合内未使用过锦囊牌，你可以指定一名其他角色令其下个回合无法使用锦囊牌"},"qianghuax":{"name":"强化","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: function (card){\n\t\t\t\t\tvar type=get.type(card,'trick');\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tif(type==get.type(ui.selected.cards[i],'trick')) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},complexCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},selectCard: [1,null],content: function (){\n\t\t\t\t\tvar cards2=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tvar type=get.type(cards[i],'trick');\n\t\t\t\t\t\tvar list=game.findCards(function(name){\n\t\t\t\t\t\t\tif(cards[i].name==name) return;\n\t\t\t\t\t\t\tif(get.type({name:name},'trick')==type){\n\t\t\t\t\t\t\t\treturn get.value({name:name})>get.value(cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\t\tlist=game.findCards(function(name){\n\t\t\t\t\t\t\t\tif(cards[i].name==name) return;\n\t\t\t\t\t\t\t\tif(get.type({name:name},'trick')==type){\n\t\t\t\t\t\t\t\t\treturn get.value({name:name})==get.value(cards[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\t\tlist=[cards[i].name];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcards2.push(game.createCard(list.randomGet()));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards2,'log');\n\t\t\t\t\tplayer.$draw(cards2);\n\t\t\t\t},ai: {order: \"8\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置任意张不同类别的牌，然后展示并获得与弃置的牌类别相同且价值更高的牌"},"yulu":{"name":"雨露","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: \"true\",selectTarget: [1,null],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(target==targets[0]){\n\t\t\t\t\t\tgame.asyncDraw(targets);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(target==targets[0]){\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.chooseToDiscard('hej',true);\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.countCards('j')) return 2;\n\t\t\t\t\t\t\tswitch(target.countCards('he')){\n\t\t\t\t\t\t\t\tcase 0:return 0;\n\t\t\t\t\t\t\t\tcase 1:return 0.5;\n\t\t\t\t\t\t\t\tcase 2:return 0.8;\n\t\t\t\t\t\t\t\tdefault:return 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"1.2\",},}","info":"出牌阶段限一次，你可以指定任意名角色各摸一张牌，然后各弃置区域内的一张牌"},"bingyan":{"name":"冰焰","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(!lib.card.chiyuxi||!lib.card.jingleishan) return false;\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(get.color(card)=='red'){\n\t\t\t\t\t\treturn player.canUse('chiyuxi',target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn player.canUse('jingleishan',target);\n\t\t\t\t\t}\n\t\t\t\t},selectTarget: \"-1\",discard: \"false\",delay: \"false\",line: \"false\",filterCard: \"true\",position: \"he\",log: \"notarget\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},multitarget: \"true\",content: function (){\n\t\t\t\t\tif(get.color(cards[0])=='black'){\n\t\t\t\t\t\tplayer.useCard({name:'jingleishan'},cards,targets);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.useCard({name:'chiyuxi'},cards,targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9.1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\tif(card&&get.color(card)=='black'){\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'jingleishan'},player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.effect(target,{name:'chiyuxi'},player,target);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以将一张红色牌当作炽羽袭，或将一张黑色牌当作惊雷闪使用"},"yufa":{"name":"驭法","script":"{trigger: {global: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.yufa==event.player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('yufa'),function(card,player,target){\n\t\t\t\t\t\treturn target!=trigger.player;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yufa',result.targets);\n\t\t\t\t\t\tresult.targets[0].gain(game.createCard('chuansongmen'),'gain2');\n\t\t\t\t\t}\n\t\t\t\t},group: [\"yufa2\",\"yufa3\"],ai: {maixie: \"true\",maixie_hp: \"true\",expose: \"0.1\",},}","info":"在任意一名其他角色的结束阶段，若你于此回合内受过其伤害，你可以将一张传送门交给除此角色外的任意一名角色"},"yuanzheng":{"name":"远征","script":"{trigger: {player: \"useCardToBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.target&&event.target!=player&&get.distance(player,event.target)>1&&event.target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.discardPlayerCard(trigger.target,get.prompt('yuanzheng',trigger.target),'hej').logSkill=['yuanzheng',trigger.target];\n\t\t\t\t},}","info":"每当你对距离1以外的角色使用一张牌，你可以弃置目标区域内的一张牌"},"bzhuiji":{"name":"追击","script":"{trigger: {global: \"dieAfter\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.source)<=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.isAlive()&&event.source!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.useCard({name:'juedou'},trigger.source);\n\t\t\t\t},ai: {threaten: \"1.5\",expose: \"0.1\",},}","info":"每当一名角色死亡，你可以摸两张牌，并视为对杀死该角色的人使用一张决斗"},"fbeifa":{"name":"北伐","script":"{trigger: {player: \"loseEnd\",},filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",usable: \"3\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('fbeifa'),function(card,player,target){\n\t\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,target);\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('fbeifa');\n\t\t\t\t\t\tplayer.useCard({name:'sha'},result.targets,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\tif(player.countCards('h')!=1) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},expose: \"0.2\",},group: [\"fbeifa_draw\"],subSkill: {draw: {trigger: {source: \"damageAfter\",},forced: \"true\",popup: \"false\",filter: function (event){\n\t\t\t\t\t\t\treturn event.parent.parent.parent.name=='fbeifa';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"每当你失去最后一张手牌，你可以视为使用一张无视距离的杀，若此杀造成伤害，你摸一张牌，每回合最多发动3次"},"jixuan":{"name":"疾旋","script":"{trigger: {player: \"phaseAfter\",},forced: \"true\",priority: \"-50\",filter: function (event,player){\n\t\t\t\t\treturn event.skill!='jixuan';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t},ai: {threaten: \"1.8\",},}","info":"锁定技，回合结束后，你摸一张牌进行一个额外的回合"},"bimeng":{"name":"碧梦","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\tvar list=['hsmengjing_feicuiyoulong','hsmengjing_huanxiaojiemei',\n\t\t\t\t\t\t'hsmengjing_suxing','hsmengjing_mengye','hsmengjing_mengjing'];\n\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()));\n\t\t\t\t\tplayer.$draw();\n\t\t\t\t},ai: {threaten: \"2\",},}","info":"结束阶段，你可以将一张随机梦境牌加入你的手牌"},"fushi":{"name":"缚誓","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hp<target.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.loseMaxHp(true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",expose: \"0.2\",order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp==target.maxHp) return 0;\n\t\t\t\t\t\t\tif(target.hp==target.maxHp-1) return -1;\n\t\t\t\t\t\t\tif(target.hp==1) return 1;\n\t\t\t\t\t\t\tif(target.hp<target.maxHp-2) return 0.5;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以令一名已受伤角色失去一点体力上限并回复一点体力"},"shixu":{"name":"时序","script":"{group: [\"shixu_begin\",\"shixu_end\",\"shixu_discard\"],subSkill: {begin: {trigger: {global: \"phaseUseBegin\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\ttrigger.player.storage.shixu_begin=get.time();\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},end: {trigger: {global: \"phaseUseEnd\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn typeof event.player.storage.shixu_begin=='number';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.player.storage.shixu=get.time()-trigger.player.storage.shixu_begin;\n\t\t\t\t\t\t\tdelete trigger.player.storage.shixu_begin;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},discard: {trigger: {global: \"phaseEnd\",},forced: \"true\",check: function (event,player){\n\t\t\t\t\t\t\treturn get.attitude(player,event.player)<0;\n\t\t\t\t\t\t},filter: function (event,player){\n\t\t\t\t\t\t\treturn typeof event.player.storage.shixu=='number'&&\n\t\t\t\t\t\t\t\tevent.player.storage.shixu>3000&&event.player.countCards('he')>0&&event.player.isAlive();\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\t\t\ttrigger.player.chooseToDiscard('he',true,Math.floor(trigger.player.storage.shixu/3000));\n\t\t\t\t\t\t\tdelete trigger.player.storage.shixu;\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，所有角色于出牌阶段每消耗3秒，便须于结束阶段弃置一张牌"},"bingdong":{"name":"冰冻","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(!lib.card.hslingjian_jinjilengdong){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(game.createCard('hslingjian_jinjilengdong'),'gain2');\n\t\t\t\t},}","info":"锁定技，你在一个回合内首次造成伤害后，获得一个冰冻零件"},"stuxi":{"name":"吐息","script":"{trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\tfor(var i=0;i<enemies.length;i++){\n\t\t\t\t\t\tif(!enemies[i].hasSkill('stuxi2')) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\tfor(var i=0;i<enemies.length;i++){\n\t\t\t\t\t\tif(enemies[i].hasSkill('stuxi2')){\n\t\t\t\t\t\t\tenemies.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar target=enemies.randomGet();\n\t\t\t\t\tif(target){\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.addExpose(0.2);\n\t\t\t\t\t\ttarget.addSkill('stuxi2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"锁定技，结束阶段，你令一名随机敌人下一个摸牌阶段摸牌数-1"},"fenlie":{"name":"分裂","script":"{audio: \"2\",forced: \"true\",trigger: {player: \"gainAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.parent.parent.name=='phaseDraw') return false;\n\t\t\t\t\tif(event.parent.name=='fenlie') return false;\n\t\t\t\t\tif(!event.cards) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(!get.info(event.cards[i]).unique) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},usable: \"2\",content: function (){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tif(get.info(trigger.cards[i]).unique) continue;\n\t\t\t\t\t\tcards.push(game.createCard(trigger.cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards,'draw');\n\t\t\t\t},ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='toulianghuanzhu'){\n\t\t\t\t\t\t\t\treturn [1,2];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你于摸牌阶段外获得非特殊卡牌，你获得一张此牌的复制，每回合最多发动两次"},"tanmi":{"name":"探秘","script":"{trigger: {global: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')==0&&event.player!=player;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseToUse();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseToUse();\n\t\t\t\t\t}\n\t\t\t\t},ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\tif(player.countCards('h')!=1) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"在一名其他角色的结束阶段，若你没有手牌，你可以摸两张牌并可以使用两张牌"},"qianghua":{"name":"绝手","script":"{trigger: {player: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.parent.name=='qianghua') return false;\n\t\t\t\t\tif(player.storage.qianghua>=1) return false;\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tif(event.parent.parent.name!='phaseUse') return false;\n\t\t\t\t\tif(!event.targets||!event.card) return false;\n\t\t\t\t\tif(get.info(event.card).complexTarget) return false;\n\t\t\t\t\tif(!lib.filter.cardEnabled(event.card,player,event.parent)) return false;\n\t\t\t\t\tvar type=get.type(event.card);\n\t\t\t\t\tif(type!='basic'&&type!='trick') return false;\n\t\t\t\t\tvar card=game.createCard(event.card.name,event.card.suit,event.card.number,event.card.nature);\n\t\t\t\t\tvar targets=event._targets||event.targets;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tif(!targets[i].isIn()) return false;\n\t\t\t\t\t\tif(!player.canUse({name:event.card.name},targets[i],false,false)){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.tag({name:event.card.name},'norepeat')) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.qianghua++;\n\t\t\t\t\tvar card=game.createCard(trigger.card.name,trigger.card.suit,trigger.card.number,trigger.card.nature);\n\t\t\t\t\tplayer.useCard(card,(trigger._targets||trigger.targets).slice(0));\n\t\t\t\t},ai: {threaten: \"1.3\",},group: \"qianghua_clear\",subSkill: {clear: {trigger: {player: \"phaseBefore\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.qianghua=0;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"出牌阶段内，你可以令一张你使用的基本牌或普通锦囊牌额外结算一次，每回合限一次"},"mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-1。"},"maoxian":{"name":"奇旅","script":"{enable: \"phaseUse\",usable: \"2\",direct: \"true\",delay: \"false\",unique: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=get.gainableSkills();\n\t\t\t\t\tlist.remove('maoxian');\n\t\t\t\t\tlist=list.randomGets(3);\n\t\t\t\t\tevent.skillai=function(){\n\t\t\t\t\t\treturn get.max(list,get.skillRank,'item');\n\t\t\t\t\t};\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('forcebutton');\n\t\t\t\t\t\tdialog.add('选择获得一项技能');\n\t\t\t\t\t\tvar clickItem=function(){\n\t\t\t\t\t\t\t_status.event._result=this.link;\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(lib.translate[list[i]+'_info']){\n\t\t\t\t\t\t\t\tvar translation=get.translation(list[i]);\n\t\t\t\t\t\t\t\tif(translation[0]=='新'&&translation.length==3){\n\t\t\t\t\t\t\t\t\ttranslation=translation.slice(1,3);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttranslation=translation.slice(0,2);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar item=dialog.add('<div class=\"popup pointerdiv\" style=\"width:80%;display:inline-block\"><div class=\"skill\">【'+\n\t\t\t\t\t\t\t\ttranslation+'】</div><div>'+lib.translate[list[i]+'_info']+'</div></div>');\n\t\t\t\t\t\t\t\titem.firstChild.addEventListener('click',clickItem);\n\t\t\t\t\t\t\t\titem.firstChild.link=list[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\t_status.imchoosing=true;\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\tvar link=result;\n\t\t\t\t\tplayer.addAdditionalSkill('maoxian',link);\n\t\t\t\t\tplayer.popup(link);\n\t\t\t\t\tgame.log(player,'获得了技能','【'+get.translation(link)+'】');\n\t\t\t\t\tplayer.checkMarks();\n\t\t\t\t\tplayer.markSkill('maoxian');\n\t\t\t\t\tgame.delay();\n\t\t\t\t},intro: {content: function (storage,player){\n\t\t\t\t\t\treturn '当前技能：'+get.translation(player.additionalSkills.maoxian);\n\t\t\t\t\t},},ai: {order: \"11\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.getStat().skill.maoxian) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限两次，你可以发现一个技能并获得之（替换此前发现的技能）"},"luanji":{"name":"乱击","script":"{audio: \"2\",enable: \"phaseUse\",viewAs: {name: \"wanjian\",},filterCard: function (card,player){\n\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\treturn get.suit(card)==get.suit(ui.selected.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(card!=cards[i]){\n\t\t\t\t\t\t\tif(get.suit(card)==get.suit(cards[i])) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},selectCard: \"2\",complexCard: \"true\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('wanjian',current);\n\t\t\t\t\t});\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tvar eff=get.sgn(get.effect(targets[i],{name:'wanjian'},player,player));\n\t\t\t\t\t\tif(targets[i].hp==1){\n\t\t\t\t\t\t\teff*=1.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnum+=eff;\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.needsToDiscard(-1)){\n\t\t\t\t\t\tif(targets.length>=7){\n\t\t\t\t\t\t\tif(num<2) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(targets.length>=5){\n\t\t\t\t\t\t\tif(num<1.5) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},ai: {basic: {order: \"8.5\",useful: \"1\",value: \"5\",},wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"出牌阶段，你可以将任意两张相同花色的手牌当做【万箭齐发】使用。"},"xianji":{"name":"献祭","script":"{unique: \"true\",forceunique: \"true\",global: \"xianji2\",}","info":"其他角色可以在其结束阶段弃置1~2张手牌并令你摸等量的牌，若如此做，直到其下一回合结束，每当你使用卡牌指定其为目标时，其摸一张牌"},"mobao":{"name":"魔爆","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(!player.storage.mobao) return false;\n\t\t\t\t\tif(!player.countCards('h',{color:'black'})) return false;\n\t\t\t\t\tfor(var i=0;i<player.storage.mobao.length;i++){\n\t\t\t\t\t\tif(player.storage.mobao[i].isAlive()) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.storage.mobao.contains(target);\n\t\t\t\t},position: \"he\",selectTarget: \"-1\",selectCard: [1,3],check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},filterCard: {color: \"black\",},line: \"thunder\",content: function (){\n\t\t\t\t\ttarget.damage('thunder',cards.length);\n\t\t\t\t},ai: {order: \"9\",threaten: \"0.7\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,target,'thunder');\n\t\t\t\t\t\t},},},group: [\"mobao2\",\"mobao3\"],}","info":"出牌阶段限一次，你可以弃置至多三张黑色牌，然后对所有于上轮对你造成过伤害的角色造成等同于你弃牌数的雷电伤害"},"zengli":{"name":"赠礼","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.isMin();\n\t\t\t\t},delay: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tif(lib.card[lib.inpile[i]].subtype=='equip1'){\n\t\t\t\t\t\t\tlist.push(lib.inpile[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.card1=game.createCard(list.randomGet());\n\t\t\t\t\tevent.card2=game.createCard(list.randomGet());\n\t\t\t\t\tplayer.$draw(event.card1);\n\t\t\t\t\ttarget.$draw(event.card2);\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.equip(event.card1);\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.equip(event.card2);\n\t\t\t\t},ai: {order: \"11\",result: {player: \"1\",target: function (player,target){\n\t\t\t\t\t\t\tif(target.getEquip(1)) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你指定一名其他角色与你各装备一把武器"},"xiubu":{"name":"修补","script":"{trigger: {player: \"equipEnd\",},frequent: \"true\",filter: function (event){\n\t\t\t\t\treturn lib.inpile.contains(event.card.name)&&get.subtype(event.card)=='equip1'&&typeof lib.cardType.hslingjian=='number';\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=1;\n\t\t\t\t\tvar info=get.info(trigger.card);\n\t\t\t\t\tif(info&&info.distance&&typeof info.distance.attackFrom=='number'){\n\t\t\t\t\t\tnum=1-info.distance.attackFrom;\n\t\t\t\t\t}\n\t\t\t\t\tif(num<1){\n\t\t\t\t\t\tnum=1;\n\t\t\t\t\t}\n\t\t\t\t\tvar list=get.typeCard('hslingjian');\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\twhile(num--){\n\t\t\t\t\t\tcards.push(game.createCard(list.randomGet()));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards,'gain2');\n\t\t\t\t},threaten: \"1.3\",}","info":"每当你装备一把未强化的武器，你可以获得数量等同于武器攻击范围的随机零件"},"qianhou":{"name":"千喉","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tif(lib.filter.filterCard({name:lib.inpile[i]},player)){\n\t\t\t\t\t\t\tvar info=lib.card[lib.inpile[i]];\n\t\t\t\t\t\t\tif(info.type=='trick'&&!info.multitarget&&!info.notarget){\n\t\t\t\t\t\t\t\tif(Array.isArray(info.selectTarget)){\n\t\t\t\t\t\t\t\t\tif(info.selectTarget[0]>0&&info.selectTarget[1]>=info.selectTarget[0]){\n\t\t\t\t\t\t\t\t\t\tlist.push(lib.inpile[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(typeof info.selectTarget=='number'){\n\t\t\t\t\t\t\t\t\tlist.push(lib.inpile[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twhile(list.length){\n\t\t\t\t\t\tvar card={name:list.randomRemove()};\n\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn lib.filter.filterTarget(card,player,current);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\t\t\tif(info.selectTarget!=-1){\n\t\t\t\t\t\t\t\tvar num=info.selectTarget;\n\t\t\t\t\t\t\t\tif(Array.isArray(num)){\n\t\t\t\t\t\t\t\t\tif(targets.length<num[0]) continue;\n\t\t\t\t\t\t\t\t\tnum=num[0]+Math.floor(Math.random()*(num[1]-num[0]+1));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(targets.length<num) continue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttargets=targets.randomGets(num);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.useCard(card,targets,'noai');\n\t\t\t\t\t\t\tif(targets.length==1&&targets[0]!=player){\n\t\t\t\t\t\t\t\tevent.cardname=card.name;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.countCards('h')&&event.cardname){\n\t\t\t\t\t\tplayer.chooseToDiscard('是否弃置一张手牌并获得'+get.translation(event.cardname)+'？','h').ai=function(card){\n\t\t\t\t\t\t\treturn get.value({name:event.cardname})-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tvar fakecard=game.createCard(event.cardname,card.suit,card.number);\n\t\t\t\t\t\tplayer.gain(fakecard,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，准备阶段，你视为使用一张随机普通锦囊牌（随机指定目标）；若目标只有1人且不是你，你可以弃置一张手牌并获得此锦囊"},"duxin":{"name":"毒心","script":"{trigger: {player: [\"phaseBegin\",\"phaseEnd\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.countCards('h',{type:'hsdusu'});\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=['hsdusu_xueji','hsdusu_huangxuecao','hsdusu_kuyecao','hsdusu_shinancao','hsdusu_huoyanhua'];\n\t\t\t\t\tif(typeof lib.cardType.hslingjian!='number'){\n\t\t\t\t\t\tlist.remove('hsdusu_kuyecao');\n\t\t\t\t\t}\n\t\t\t\t\tvar name=list.randomGet();\n\t\t\t\t\tif(name=='hsdusu_huoyanhua'){\n\t\t\t\t\t\tplayer.gain(game.createCard({name:name,nature:'fire'}),'draw');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gain(game.createCard(name),'draw');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.6\",},}","info":"准备阶段和结束阶段，若你的手中没有毒素牌，你可以获得一张随机毒素牌"},"pyuhuo":{"name":"浴火","script":"{unique: \"true\",skillAnimation: \"true\",animationColor: \"fire\",trigger: {player: \"dying\",},priority: \"10\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.pyuhuo!='over';\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discard(player.getCards('hej'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.link(false);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.turnOver(false);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(player.storage.pyuhuo=='mid'){\n\t\t\t\t\t\tplayer.storage.pyuhuo='over';\n\t\t\t\t\t\tplayer.awakenSkill('pyuhuo');\n\t\t\t\t\t\tplayer.hp=6;\n\t\t\t\t\t\tplayer.maxHp=6;\n\t\t\t\t\t\tplayer.draw(6);\n\t\t\t\t\t\tplayer.setAvatar('hs_pyros','hs_pyros2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.pyuhuo='mid';\n\t\t\t\t\t\tplayer.hp=4;\n\t\t\t\t\t\tplayer.maxHp=4;\n\t\t\t\t\t\tplayer.draw(4);\n\t\t\t\t\t\tplayer.setAvatar('hs_pyros','hs_pyros1');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.storage.pyuhuo=='mid') return 0.6;\n\t\t\t\t\t\tif(target.storage.pyuhuo=='over') return 1;\n\t\t\t\t\t\treturn 0.4;\n\t\t\t\t\t},},}","info":"锁定技，在你首次进入濒死状态时，你弃置所有牌、重置武将牌、将体力和体力上限变为4并摸4张牌；在你第二次进入濒死状态时，你弃置所有牌、重置武将牌、将体力和体力上限变为6并摸6张牌"},"kqizhou":{"name":"祈咒","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.kqizhou;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tdelete player.storage.kqizhou;\n\t\t\t\t\tvar list=[['','','hsqizhou_feng'],\n\t\t\t\t\t\t['','','hsqizhou_shui'],\n\t\t\t\t\t\t['','','hsqizhou_huo'],\n\t\t\t\t\t\t['','','hsqizhou_tu']];\n\t\t\t\t\tvar dialog=ui.create.dialog(get.prompt('kqizhou'),[list,'vcard'],'hidden');\n\t\t\t\t\tvar shui=(player.hp<=1&&player.maxHp>=3);\n\t\t\t\t\tvar tu=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp==1&&get.attitude(player,current)>0;\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseButton(dialog).ai=function(button){\n\t\t\t\t\t\tif(!player.hasFriend()&&button.link[2]=='hsqizhou_tu') return 0;\n\t\t\t\t\t\tif(player.isHealthy()&&button.link[2]=='hsqizhou_shui') return 0;\n\t\t\t\t\t\tif(shui&&button.link[2]=='hsqizhou_shui') return 3;\n\t\t\t\t\t\tif(tu&&button.link[2]=='hsqizhou_tu') return 2;\n\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.buttons){\n\t\t\t\t\t\tplayer.logSkill('kqizhou');\n\t\t\t\t\t\tplayer.gain(game.createCard(result.buttons[0].link[2]),'draw');\n\t\t\t\t\t}\n\t\t\t\t},group: \"kqizhou_add\",subSkill: {add: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn _status.currentPhase==player&&get.type(event.card,'trick')=='trick';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.kqizhou=true;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"准备阶段，若你于上回合使用过锦囊牌，则可以获得一张元素祈咒"},"jiaohui":{"name":"教诲","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.getStat('damage');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('jiaohui')).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>1){\n\t\t\t\t\t\t\tif(target.hp<=1) att+=2;\n\t\t\t\t\t\t\tif(target.hp<=2) att++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('jiaohui',event.target);\n\t\t\t\t\t\tevent.target.chooseDrawRecover(true);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，若你没有于本回合内造成伤害，你可以令一名角色摸一张牌或回复一点体力"},"biri":{"name":"蔽日","script":"{trigger: {global: \"useCard\",},priority: \"15\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.player!=player&&\n\t\t\t\t\t\tget.distance(player,event.targets[0])<=1&&\n\t\t\t\t\t\tplayer.countCards('h','shan')>0&&\n\t\t\t\t\t\tevent.targets.contains(player)==false&&event.targets.length==1;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar effect=0;\n\t\t\t\t\tfor(var i=0;i<trigger.targets.length;i++){\n\t\t\t\t\t\teffect+=get.effect(trigger.targets[i],trigger.card,trigger.player,player);\n\t\t\t\t\t}\n\t\t\t\t\tvar str='蔽日：是否弃置一张闪令'+get.translation(trigger.player);\n\t\t\t\t\tif(trigger.targets&&trigger.targets.length){\n\t\t\t\t\t\tstr+='对'+get.translation(trigger.targets);\n\t\t\t\t\t}\n\t\t\t\t\tstr+='的'+get.translation(trigger.card)+'失效？';\n\t\t\t\t\tvar next=player.chooseToDiscard('h',function(card){\n\t\t\t\t\t\treturn card.name=='shan';\n\t\t\t\t\t},str);\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(effect<0){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tnext.autodelay=true;\n\t\t\t\t\tnext.logSkill=['biri',trigger.targets];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"每当距离你1以内的一名其他角色成为杀的惟一目标时，若杀的使用者不是你，你可以弃置一张闪取消之"},"ronghuo":{"name":"熔火","script":"{trigger: {player: \"useCardToBefore\",},priority: \"7\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar att=get.attitude(player,event.target);\n\t\t\t\t\tif(event.target.hasSkillTag('nofire')){\n\t\t\t\t\t\treturn att>0;\n\t\t\t\t\t}\n\t\t\t\t\treturn att<=0;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.card.nature='fire';\n\t\t\t\t\tplayer.addSkill('ronghuo2');\n\t\t\t\t\tplayer.storage.ronghuo=trigger.card;\n\t\t\t\t},}","info":"锁定技，你的普通杀均视为火杀"},"luoshi":{"name":"落石","script":"{trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0||(event.source&&event.source.countCards('he')>0);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar hs=player.getCards('he');\n\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\tplayer.discard(hs.randomGet())\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\tvar hs=trigger.source.getCards('he');\n\t\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\t\ttrigger.source.discard(hs.randomGet())\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",},}","info":"锁定技，每当你受到一次伤害，你与伤害来源各随机弃置一张牌"},"lianzhan":{"name":"连斩","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",content: function (){\n\t\t\t\t\tif(player.getStat().damage>trigger.num){\n\t\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {damageBonus: \"true\",},}","info":"每当你造成一次伤害，若此伤害是你本回合第一次造成伤害，你摸两张牌；否则你增加一点体力上限并回复一点体力"},"kuixin":{"name":"窥心","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\tif(current==player) return false;\n\t\t\t\t\t\tvar nh=current.countCards('h');\n\t\t\t\t\t\treturn nh&&nh>=player.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('kuixin'),function(card,player,target){\n\t\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\treturn nh&&nh>=player.countCards('h');\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(target.hasSkillTag('noe')){\n\t\t\t\t\t\t\tatt/=3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -att;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar card=target.getCards('h').randomGet();\n\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\tplayer.logSkill('kuixin',target);\n\t\t\t\t\t\t\tplayer.gain(card,target);\n\t\t\t\t\t\t\ttarget.$giveAuto(card,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以获得一名手牌数不少于你的角色的一张手牌"},"jingmeng":{"name":"镜梦","script":"{trigger: {player: \"useCard\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase==player&&player.countUsed()==1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar type=get.type(trigger.card);\n\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\treturn get.type(card)==type;\n\t\t\t\t\t});\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tplayer.gain(card,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.1\",},}","info":"每当你于回合内使用第一张牌时，你可以从牌堆中随机获得一张与之类型相同的牌"},"peiyu":{"name":"培育","script":"{trigger: {player: [\"phaseBegin\"],},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('peiyu'),function(card,player,target){\n\t\t\t\t\t\tfor(var i=1;i<=8;i++){\n\t\t\t\t\t\t\tif(target.hasSkill('tuteng'+i)) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tif(player==target&&get.attitude(player,target)>0&&event.parent.triggername=='phaseBegin'){\n\t\t\t\t\t\t\treturn get.attitude(player,target)+10;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('peiyu',result.targets);\n\t\t\t\t\t\tvar rand=['tuteng1','tuteng2','tuteng3','tuteng4',\n\t\t\t\t\t\t\t'tuteng5','tuteng6','tuteng7','tuteng8'];\n\t\t\t\t\t\tresult.targets[0].addAdditionalSkill('peiyu',['peiyu2',rand.randomGet()]);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段，你可以令一名没有图腾的角色获得一个随机图腾直到其首次受到伤害"},"hswuji":{"name":"无羁","script":"{trigger: {player: \"phaseUseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countUsed()>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(player.countUsed());\n\t\t\t\t},ai: {threaten: \"1.3\",},}","info":"出牌阶段结束时，你可以摸X张牌，X为你本回合使用的卡牌数"},"busi":{"name":"不死","script":"{trigger: {player: \"dying\",},priority: \"7\",unique: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.suit(card)=='spade'?-1:1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.recover(1-player.hp);\n\t\t\t\t\t\tplayer.turnOver(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",},}","info":"锁定技，当你进入濒死状态时，你进行一次判定，若结果不为黑桃，你将体力回复至1并将武将牌翻至背面"},"xshixin":{"name":"蚀心","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\tif(get.is.altered('xshixin')&&event.player.hp<player.hp) return false;\n\t\t\t\t\treturn event.player.isAlive()&&event.player!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.player.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t},}","info":"锁定技，每当你对一名其他角色造成一次伤害，受伤害角色与你各流失一点体力"},"xmojian":{"name":"魔箭","script":"{trigger: {player: \"turnOverAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.isTurnedOver();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('xmojian'),function(card,player,target){\n\t\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,target);\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xmojian');\n\t\t\t\t\t\tplayer.useCard({name:'sha'},result.targets,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"每当你的武将牌翻至正面时，你可以指定一名角色视为对其使用了一张杀"},"mieshi":{"name":"灭世","script":"{trigger: {player: \"phaseEnd\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.target=game.filterPlayer().randomGet(player);\n\t\t\t\t\tif(!event.target){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.line(event.target,'fire');\n\t\t\t\t\tgame.delayx();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.target.damage('fire');\n\t\t\t\t},}","info":"锁定技，结束阶段，你流失一点体力，并对一名随机的其他角色造成一点火焰伤害"},"lingzhou":{"name":"灵咒","script":"{trigger: {player: \"useCard\",},direct: \"true\",filter: function (event){\n\t\t\t\t\treturn get.type(event.card,'trick')=='trick'&&event.card.isCard;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('lingzhou')).ai=function(target){\n\t\t\t\t\t\tvar num=get.attitude(player,target);\n\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tnum+=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target.hp==2){\n\t\t\t\t\t\t\t\tnum+=1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('lingzhou',result.targets);\n\t\t\t\t\t\tresult.targets[0].chooseDrawRecover(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.5\",noautowuxie: \"true\",},}","info":"每当你使用一张非转化的锦囊牌，可令一名角色摸一张牌或回复一点体力"},"moyao":{"name":"魔曜","script":"{mod: {targetEnabled: function (card,player,target,now){\n\t\t\t\t\t\tif(player!=target){\n\t\t\t\t\t\t\tif(get.type(card,'trick')=='trick') return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，你不能成为其他角色的锦囊牌的目标"},"nianfu":{"name":"粘附","script":"{trigger: {source: \"damageEnd\",player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\tif(player==event.source){\n\t\t\t\t\t\treturn event.player!=player&&event.player.countCards('e');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn event.source&&event.source!=player&&event.source.countCards('e');\n\t\t\t\t\t}\n\t\t\t\t},logTarget: function (event,player){\n\t\t\t\t\tif(player==event.player){\n\t\t\t\t\t\treturn event.source;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn event.player;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar target=(player==trigger.player)?trigger.source:trigger.player;\n\t\t\t\t\tif(target){\n\t\t\t\t\t\tvar cards=target.getCards('e');\n\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\tvar card=cards.randomGet();\n\t\t\t\t\t\t\tplayer.gain(card,target);\n\t\t\t\t\t\t\ttarget.$give(card,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，每当你造成或受到伤害，你随机获得对方装备区内的一张牌"},"xiaorong":{"name":"消融","script":"{mod: {ignoredHandcard: function (card,player){\n\t\t\t\t\t\tif(get.type(card)=='equip'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:'equip'});\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar cards=player.getCards('h',{type:'equip'});\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tplayer.lose(cards)._triggered=null;\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tvar names=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tif(lib.card[lib.inpile[i]].type=='basic'){\n\t\t\t\t\t\t\t\tnames.push(lib.inpile[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnames.remove('du');\n\t\t\t\t\t\tfor(var i=0;i<cards.length*2;i++){\n\t\t\t\t\t\t\tlist.push(game.createCard(names.randomGet()));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.directgain(list);\n\t\t\t\t\t\tplayer.recover(cards.length);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {player: function (card,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&get.equipValueNumber(card)<7){\n\t\t\t\t\t\t\t\tif(player.needsToDiscard(2)) return;\n\t\t\t\t\t\t\t\treturn [0,0,0,0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，你的装备牌不占用手牌上限；结束阶段，你将手牌中的每张装备牌转化为两张随机基本牌，每转化一张装备牌便回复一点体力"},"hhudun":{"name":"护盾","script":"{trigger: {global: \"phaseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hujia;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t},group: \"hhudun_hujia\",subSkill: {hujia: {trigger: {player: \"damageZero\",},filter: function (event){\n\t\t\t\t\t\t\treturn event.hujia;\n\t\t\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hujia){\n\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，在每名角色的准备阶段，若你没有护甲，你获得一点护甲；每当你的护甲抵消一次伤害，你摸一张牌"},"chuidiao":{"name":"垂钓","script":"{trigger: {player: \"phaseEnd\",},forced: \"true\",content: function (){\n\t\t\t\t\tvar num=Math.floor(Math.random()*3);\n\t\t\t\t\tif(num) player.draw(num);\n\t\t\t\t},}","info":"锁定技，结束阶段，你随机摸0~2张牌"},"hannu":{"name":"寒怒","script":"{trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tif(nh){\n\t\t\t\t\t\tplayer.draw(nh);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tif(hs.length>10&&hs.length>player.hp){\n\t\t\t\t\t\tplayer.discard(hs.randomGets(hs.length-player.hp));\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\t\tif(nh>5) return [1,-1];\n\t\t\t\t\t\t\t\tif(nh<=1) return [1,-0.1];\n\t\t\t\t\t\t\t\tif(nh==2){\n\t\t\t\t\t\t\t\t\tif(target.hp>=2) return [1,0.1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,2];\n\t\t\t\t\t\t\t\t\tif(target.hp==3) return [1,1.5];\n\t\t\t\t\t\t\t\t\tif(target.hp==2) return [1,0.5];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你受到一次伤害，你将手牌数翻倍；若你的手牌数因此超过10张，你随机弃置若干张手牌直到手牌数等于你当前的体力值"},"shifa":{"name":"魔瘾","script":"{trigger: {player: \"phaseUseBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar target=player.getEnemies().randomGet();\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tif(lib.card[lib.inpile[i]].type=='trick'){\n\t\t\t\t\t\t\tlist.push(lib.inpile[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()));\n\t\t\t\t\tplayer.$draw();\n\t\t\t\t\tif(target){\n\t\t\t\t\t\ttarget.gain(game.createCard(list.randomGet()));\n\t\t\t\t\t\ttarget.$draw();\n\t\t\t\t\t\ttarget.addExpose(0.2);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tgame.log(player,'和',target,'获得了一张锦囊牌');\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},group: \"shifa_draw\",subSkill: {draw: {trigger: {player: \"useCard\",},frequent: \"true\",usable: \"3\",filter: function (event,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\t\t\treturn (get.type(event.card)=='trick'&&event.card.isCard);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: \"1.5\",noautowuxie: \"true\",},}","info":"锁定技，每当你于回合内使用一张非转化的普通锦囊牌，你摸一张牌（每回合最多发动3次）；出牌阶段开始时，你令你与一名随机敌人各获得一张随机普通锦囊牌"},"xieneng":{"name":"邪能","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[['','','hsshenqi_morijingxiang'],\n\t\t\t\t\t\t['','','hsshenqi_kongbusangzhong'],\n\t\t\t\t\t\t['','','hsshenqi_nengliangzhiguang']];\n\t\t\t\t\tvar dialog=ui.create.dialog(get.prompt('xieneng'),[list,'vcard'],'hidden');\n\t\t\t\t\tplayer.chooseButton(dialog).ai=function(){return Math.random();};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.buttons){\n\t\t\t\t\t\tplayer.logSkill('xieneng');\n\t\t\t\t\t\tplayer.gain(game.createCard(result.buttons[0].link[2]),'draw');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='guiyoujie') return [0,1];\n\t\t\t\t\t\t},},},}","info":"结束阶段，你可以选择一张神器牌并获得之"},"xunbao":{"name":"寻宝","script":"{trigger: {player: \"phaseBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('xunbao2');\n\t\t\t\t},derivation: [\"hsbaowu_cangbaotu\",\"hsbaowu_huangjinyuanhou\"],priority: \"1\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.card=game.createCard('hsbaowu_cangbaotu');\n\t\t\t\t\tplayer.storage.xunbao2=event.card;\n\t\t\t\t\tplayer.storage.xunbao2_markcount=player.storage.xunbao2.number;\n\t\t\t\t\t// player.$draw(player.storage.xunbao2);\n\t\t\t\t\tplayer.addSkill('xunbao2');\n\t\t\t\t\tgame.delay(2);\n\n\t\t\t\t\tevent.node=event.card.copy('thrown','center','thrownhighlight',ui.arena).animate('start');\n\t\t\t\t\tui.arena.classList.add('thrownhighlight');\n\t\t\t\t\tgame.addVideo('thrownhighlight1');\n\t\t\t\t\tgame.addVideo('centernode',null,get.cardInfo(event.card));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.addVideo('deletenode',player,[get.cardInfo(event.node)]);\n\t\t\t\t\tevent.node.delete();\n\t\t\t\t\tevent.node.style.transform='scale(0)';\n\t\t\t\t\tgame.addVideo('thrownhighlight2');\n\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t},ai: {order: \"3\",result: {player: \"1\",},},}","info":"准备阶段，若你的武将牌上没有藏宝图，你可以将一张藏宝图置于你的武将牌上；若你的武将牌上有藏宝图，你可以弃置一张与藏宝图点数相同的牌并获得此藏宝图"},"zhuizong":{"name":"追踪","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",selectCard: [1,null],check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length) return 0;\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cards=get.cards(4*cards.length);\n\t\t\t\t\tplayer.chooseCardButton('获得其中的一张牌',true,event.cards,true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.gain(result.links,'draw');\n\t\t\t\t\tevent.cards.remove(result.links[0]);\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tevent.cards[i].discard();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置任意张牌，观看牌堆顶的等同于弃牌数四倍的牌，然后获得其中的一张牌"},"jinhua":{"name":"进化","script":"{trigger: {target: \"useCardToBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player==event.player&&get.type(event.card,'trick')=='trick'&&event.card.isCard;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=get.gainableSkills();\n\t\t\t\t\tlist.remove(player.getSkills());\n\t\t\t\t\tlist=list.randomGets(3);\n\t\t\t\t\tevent.skillai=function(){\n\t\t\t\t\t\treturn get.max(list,get.skillRank,'item');\n\t\t\t\t\t};\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('forcebutton');\n\t\t\t\t\t\tdialog.add('选择获得一项技能');\n\t\t\t\t\t\tvar clickItem=function(){\n\t\t\t\t\t\t\t_status.event._result=this.link;\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(lib.translate[list[i]+'_info']){\n\t\t\t\t\t\t\t\tvar translation=get.translation(list[i]);\n\t\t\t\t\t\t\t\tif(translation[0]=='新'&&translation.length==3){\n\t\t\t\t\t\t\t\t\ttranslation=translation.slice(1,3);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttranslation=translation.slice(0,2);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar item=dialog.add('<div class=\"popup pointerdiv\" style=\"width:80%;display:inline-block\"><div class=\"skill\">【'+\n\t\t\t\t\t\t\t\ttranslation+'】</div><div>'+lib.translate[list[i]+'_info']+'</div></div>');\n\t\t\t\t\t\t\t\titem.firstChild.addEventListener('click',clickItem);\n\t\t\t\t\t\t\t\titem.firstChild.link=list[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\t_status.imchoosing=true;\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\tvar link=result;\n\t\t\t\t\tplayer.addSkill(link,true);\n\t\t\t\t\tplayer.popup(link);\n\t\t\t\t\tgame.log(player,'获得了技能','【'+get.translation(link)+'】');\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.type(card,'trick')=='trick'&&player==target) return [1,1];\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你以自己为目标使用一张非转化的锦囊牌，你发现一个技能并获得之"},"nuyan":{"name":"怒焰","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'red'})>0\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.nuyan=[];\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tif(get.tag({name:lib.inpile[i]},'damage')){\n\t\t\t\t\t\t\t\tlist.push([get.type(lib.inpile[i]),'',lib.inpile[i]]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog([list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tif(player.storage.nuyan.contains(button.link[2])) return false;\n\t\t\t\t\t\treturn lib.filter.filterCard({name:button.link[2]},player,_status.event.getParent());\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar recover=0,lose=1;\n\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(players[i].hp<players[i].maxHp){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\tif(players[i].hp<2){\n\t\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\t\trecover+=0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\trecover++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\t\tif(players[i].hp<2){\n\t\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\t\trecover-=0.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\trecover--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(button.link[2]=='nanman'||button.link[2]=='nanman'||button.link[2]=='yuansuhuimie'||\n\t\t\t\t\t\tbutton.link[2]=='chiyuxi'||button.link[2]=='jingleishan'){\n\t\t\t\t\t\t\tif(lose>recover&&lose>0){\n\t\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:{color:'red'},\n\t\t\t\t\t\t\tselectCard:1,\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tviewAs:{name:links[0][2]},\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonuse:function(result,player){\n\t\t\t\t\t\t\t\tplayer.storage.nuyan.add(result.card.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将一张红色牌当作'+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {order: \"6\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以将一张红色牌当作任意一张能造成伤害的牌使用（不得是你本局以此法使用过的牌）"},"chouhuo":{"name":"仇火","script":"{unique: \"true\",trigger: {player: \"phaseBegin\",},forced: \"true\",skillAnimation: \"true\",animationColor: \"fire\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.nuyan&&player.storage.nuyan.length){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tif(get.tag({name:lib.inpile[i]},'damage')){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num<=player.storage.nuyan.length;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.changeHujia(2);\n\t\t\t\t\tplayer.removeSkill('nuyan');\n\t\t\t\t\tplayer.addSkill('nuyan2');\n\t\t\t\t\tplayer.awakenSkill('chouhuo');\n\t\t\t\t},}","info":"觉醒技，出牌阶段开始时，若你的怒焰技能已将可用的牌用完，你失去一点体力上限，获得两点护甲，然后将怒焰的描述改为“出牌阶段限三次，你可以失去一点体力，视为使用任意一张能造成伤害的牌”"},"shengteng":{"name":"升腾","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.card&&get.type(event.card)=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gainMaxHp(true);\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},}","info":"锁定技，每当你使用锦囊牌造成伤害，你增加一点体力上限并回复一点体力"},"yuansu":{"name":"寂灭","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.maxHp-player.hp>=3;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canUse('yuansuhuimie',target);\n\t\t\t\t},selectTarget: \"-1\",multitarget: \"true\",multiline: \"true\",line: \"thunder\",content: function (){\n\t\t\t\t\tplayer.maxHp=player.hp;\n\t\t\t\t\tplayer.update();\n\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\tplayer.useCard({name:'yuansuhuimie'},targets).animate=false;\n\t\t\t\t},}","info":"出牌阶段限一次，若你已损失的体力值不少于3，你可以将体力上限降至与体力值相同，视为使用一张元素毁灭"},"mengye":{"name":"梦魇","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('mengye'),function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')>0;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return get.attitude(player,target)*1.5;\n\t\t\t\t\t\tif(target.hasCard(function(card){\n\t\t\t\t\t\t\treturn card.name!='du';\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -get.attitude(player,target)/5;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('mengye',target);\n\t\t\t\t\t\tvar card=target.getCards('h',function(card){\n\t\t\t\t\t\t\treturn card.name!='du';\n\t\t\t\t\t\t}).randomGet();\n\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\tcard.init([card.suit,card.number,'du']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.changeHujia();\n\t\t\t\t\t\tgame.log(target,'将一张手牌转化为',{name:'du'});\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"结束阶段，你可以选择一名有手牌的角色将其一张随机的非毒手牌转化为毒，然后令其获得一点护甲"},"wzhanyi":{"name":"战意","script":"{trigger: {player: \"phaseUseBefore\",},check: function (event,player){\n\t\t\t\t\treturn player.countCards('h')+2<=player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cards=get.cards(3);\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.$draw(event.cards.slice(0));\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards[i])=='equip'){\n\t\t\t\t\t\t\tplayer.equip(event.cards[i]);\n\t\t\t\t\t\t\tevent.cards.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(event.cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.countCards('h','sha')){\n\t\t\t\t\t\tplayer.chooseToUse('战意：使用一张杀').filterCard=function(card){\n\t\t\t\t\t\t\treturn card.name=='sha'&&get.itemtype(card)=='card';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"你可以跳过出牌阶段，改为摸三张牌并展示之，将摸到的装备牌置于装备区，然后可以使用手牌中的杀"},"yindan":{"name":"引弹","script":"{enable: \"phaseUse\",filterCard: {suit: \"spade\",},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'spade'});\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<2;i++){\n\t\t\t\t\t\tcards.push(game.createCard('hsjixie_zhadan'));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards,'gain2');\n\t\t\t\t},ai: {order: \"7\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.hp>=3) return 1;\n\t\t\t\t\t\t\tif(player.hp==2&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.damageEffect(current,player,player,'fire')>0&&current.hp==1;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张黑桃牌并流失一点体力，然后获得两张炸弹机器人"},"ysjqisha":{"name":"七煞","script":"{trigger: {source: \"damageEnd\",player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn (event.source!=player&&event.source.isIn())||(event.player!=player&&event.player.isIn());\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar target=trigger.source;\n\t\t\t\t\tif(target==player){\n\t\t\t\t\t\ttarget=trigger.player;\n\t\t\t\t\t}\n\t\t\t\t\tvar list=['ju','kuang','nu','yi','wang','hen','ao'];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tlist[i]='ysjqisha_'+list[i];\n\t\t\t\t\t\tif(target.hasSkillTag(list[i])){\n\t\t\t\t\t\t\tlist.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\ttarget.addTempSkill(list.randomGet(),{player:'phaseAfter'});\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",maixie_defend: \"true\",},subSkill: {ju: {mark: \"true\",intro: {content: \"锁定技，每当你使用一张牌，需弃置一张牌\",},trigger: {player: \"useCard\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t\t\tplayer.chooseToDiscard(true,'he');\n\t\t\t\t\t\t},sub: \"true\",},kuang: {mark: \"true\",intro: {content: \"锁定技，每当你使用一张牌指定惟一目标，有50%的机率指定错误的目标\",},trigger: {player: \"useCard\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.getRand()<0.5&&event.targets&&event.targets.length==1&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=event.targets[0]&&lib.filter.targetEnabled2(event.card,player,current);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=trigger.targets[0]&&lib.filter.targetEnabled2(trigger.card,player,current);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\t\tvar target=list.randomGet();\n\t\t\t\t\t\t\t\ttrigger.targets[0]=target;\n\t\t\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},nu: {mark: \"true\",intro: {content: \"锁定技，你使用的卡牌造成的伤害+1；每当你使用一张牌，有65%的机率失效\",},forced: \"true\",trigger: {source: \"damageBegin\",player: \"useCardToBefore\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(event.name=='damage') return event.notLink()&&(event.card?true:false);\n\t\t\t\t\t\t\tvar info=get.info(event.card);\n\t\t\t\t\t\t\tif(info.multitarget&&event.targets&&event.targets.contains(player)) return false;\n\t\t\t\t\t\t\treturn event.getRand()<0.65;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(trigger.name=='damage'){\n\t\t\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},yi: {mark: \"true\",intro: {content: \"锁定技，你不能成为非敌方角色的卡牌目标\",},mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\t\t\tif(!player.getEnemies().contains(target)) return false;\n\t\t\t\t\t\t\t},},sub: \"true\",},wang: {mark: \"true\",intro: {content: \"锁定技，你的摸牌数始终-1\",},priority: \"5\",trigger: {player: \"drawBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\t},sub: \"true\",},hen: {mark: \"true\",intro: {content: \"锁定技，每当一名敌方角色回复一点体力，你失去一点体力\",},trigger: {global: \"recoverAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.getEnemies().contains(event.player);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t},sub: \"true\",},ao: {mark: \"true\",intro: {content: \"锁定技，你的手牌上限-2\",},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\t\t\treturn num-2;\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"锁定技，每当你造成或受到伤害，你令对方随机获得一种消极状态直到下一回合结束"},"zhongji":{"name":"重击","script":"{trigger: {source: \"damageBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{color:'black'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('zhongji',trigger.player),{color:'black'});\n\t\t\t\t\tnext.logSkill=['zhongji',trigger.player];\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(get.attitude(player,trigger.player)<0){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",},}","info":"每当你即将造成伤害，可弃置一张黑色手牌令伤害+1"},"ayuling":{"name":"玉灵","script":"{trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\tvar list=['feibiao','hufu','zhao','zhanfang','shandian'];\n\t\t\t\t\tplayer.gain(game.createCard('hsqingyu_'+list.randomGet()),'draw');\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,get.tag(card,'damage')*2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,get.tag(card,'damage')*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，你可以获得一张随机青玉牌"},"qingzun":{"name":"青樽","script":"{subSkill: {count: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.name.indexOf('hsqingyu_')==0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.qingzun++;\n\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},draw1: {trigger: {player: \"phaseBegin\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(get.is.altered('qingzun')) return player.storage.qingzun>=3;\n\t\t\t\t\t\t\treturn player.storage.qingzun>=2;\n\t\t\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},draw2: {trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(get.is.altered('qingzun')) return player.storage.qingzun>=9;\n\t\t\t\t\t\t\treturn player.storage.qingzun>=6;\n\t\t\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.storage.qingzun;\n\t\t\t\t\t},},init: function (player){\n\t\t\t\t\tplayer.storage.qingzun=0;\n\t\t\t\t},mark: \"true\",marktext: \"玉\",intro: {content: function (storage,player){\n\t\t\t\t\t\tif(!storage) return '未使用过青玉牌';\n\t\t\t\t\t\tvar str='手牌上限+'+storage;\n\t\t\t\t\t\tvar num1,num2;\n\t\t\t\t\t\tif(get.is.altered('qingzun')){\n\t\t\t\t\t\t\tnum1=3;\n\t\t\t\t\t\t\tnum2=9;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tnum1=2;\n\t\t\t\t\t\t\tnum2=6;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(storage>=num2){\n\t\t\t\t\t\t\tstr+='；准备阶段和结束阶段，你可以摸一张牌'\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(storage>=num1){\n\t\t\t\t\t\t\tstr+='；准备阶段，你可以摸一张牌'\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},},group: [\"qingzun_count\",\"qingzun_draw1\",\"qingzun_draw2\"],}","info":"本局对战中，每当你使用一张青玉牌，你的手牌上限+1；当你累计使用两张青玉牌后，你可以于准备阶段摸一张牌；当你累计使用六张青玉牌后，你可以于结束阶段摸一张牌"},"hsnitai":{"name":"拟态","script":"{trigger: {player: \"phaseUseBegin\",},forced: \"true\",video: function (player,data){\n\t\t\t\t\tvar skills=data[0];\n\t\t\t\t\tvar name=data[1];\n\t\t\t\t\tlib.skill.hsnitai.process(skills,name);\n\t\t\t\t},onremove: function (player){\n\t\t\t\t\tplayer.removeSkill('hsnitai_card');\n\t\t\t\t},process: function (skills,name){\n\t\t\t\t\tvar cardname='hsnitai_'+name;\n\t\t\t\t\tlib.translate[cardname]=lib.translate[name];\n\t\t\t\t\tlib.translate[cardname+'_info']='出牌阶段对自己使用，获得'+get.translation(name)+'的一个技能（替换前一个以此法获得的技能，效果持续2回合）';\n\t\t\t\t\tlib.translate[cardname+'_append']='';\n\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\tlib.translate[cardname+'_append']+='<div class=\"skill\">【'+lib.translate[skills[i]]+'】</div><div>'+\n\t\t\t\t\t\tget.skillInfoTranslation(skills[i])+'</div>';\n\t\t\t\t\t\tif(i<skills.length){\n\t\t\t\t\t\t\tlib.translate[cardname+'_append']+='<br>'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlib.card[cardname]=lib.card[cardname]||{\n\t\t\t\t\t\tenable:true,\n\t\t\t\t\t\ttype:'character',\n\t\t\t\t\t\timage:'character:'+name,\n\t\t\t\t\t\tfullimage:true,\n\t\t\t\t\t\tvanish:true,\n\t\t\t\t\t\tskills:skills,\n\t\t\t\t\t\tderivation:'hs_barnes',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player==target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectTarget:-1,\n\t\t\t\t\t\tcontent:function(){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar list=lib.card[card.name].skills;\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tif(target.hasSkill(list[i])){\n\t\t\t\t\t\t\t\t\tlist.splice(i--,1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.skillai=function(){\n\t\t\t\t\t\t\t\treturn get.max(list,get.skillRank,'item');\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif(list.length==1){\n\t\t\t\t\t\t\t\tevent._result=list[0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(event.isMine()){\n\t\t\t\t\t\t\t\tvar dialog=ui.create.dialog('forcebutton');\n\t\t\t\t\t\t\t\tdialog.add('选择获得一项技能');\n\t\t\t\t\t\t\t\tvar clickItem=function(){\n\t\t\t\t\t\t\t\t\t_status.event._result=this.link;\n\t\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\t\tif(lib.translate[list[i]+'_info']){\n\t\t\t\t\t\t\t\t\t\tvar translation=get.translation(list[i]);\n\t\t\t\t\t\t\t\t\t\tif(translation[0]=='新'&&translation.length==3){\n\t\t\t\t\t\t\t\t\t\t\ttranslation=translation.slice(1,3);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\ttranslation=translation.slice(0,2);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tvar item=dialog.add('<div class=\"popup pointerdiv\" style=\"width:80%;display:inline-block\"><div class=\"skill\">【'+\n\t\t\t\t\t\t\t\t\t\ttranslation+'】</div><div>'+lib.translate[list[i]+'_info']+'</div></div>');\n\t\t\t\t\t\t\t\t\t\titem.firstChild.addEventListener('click',clickItem);\n\t\t\t\t\t\t\t\t\t\titem.firstChild.link=list[i];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t_status.imchoosing=true;\n\t\t\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tvar skill=result;\n\t\t\t\t\t\t\tif(!target.hasSkill(skill)){\n\t\t\t\t\t\t\t\tplayer.popup(skill);\n\t\t\t\t\t\t\t\ttarget.$gain2(card);\n\t\t\t\t\t\t\t\ttarget.removeSkill('hsnitai_card');\n\t\t\t\t\t\t\t\ttarget.storage.hsnitai_card=card;\n\t\t\t\t\t\t\t\ttarget.storage.hsnitai_card_count=1;\n\t\t\t\t\t\t\t\ttarget.storage.hsnitai_card_skill=skill;\n\t\t\t\t\t\t\t\tplayer.syncStorage('hsnitai_card');\n\t\t\t\t\t\t\t\tplayer.syncStorage('hsnitai_card_skill');\n\t\t\t\t\t\t\t\ttarget.addAdditionalSkill('hsnitai_card',skill);\n\t\t\t\t\t\t\t\ttarget.addSkill('hsnitai_card');\n\t\t\t\t\t\t\t\tgame.log(target,'获得技能','【'+get.translation(skill)+'】');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai:{\n\t\t\t\t\t\t\torder:function(){\n\t\t\t\t\t\t\t\tif(_status.event.player.hasSkill('hsnitai_card')) return 1;\n\t\t\t\t\t\t\t\treturn 9;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tresult:{\n\t\t\t\t\t\t\t\ttarget:function(player,target){\n\t\t\t\t\t\t\t\t\tif(!player.hasSkill('hsnitai_card')||player.needsToDiscard()) return 1;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar current=game.expandSkills(player.getSkills());\n\t\t\t\t\tvar list=get.gainableSkills(function(info,skill,name){\n\t\t\t\t\t\tif(current.contains(skill)) return false;\n\t\t\t\t\t\treturn lib.characterPack.hearth&&lib.characterPack.hearth[name];\n\t\t\t\t\t});\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar skill=list.randomGet();\n\t\t\t\t\tvar source=[];\n\t\t\t\t\tfor(var i in lib.characterPack.hearth){\n\t\t\t\t\t\tif(lib.characterPack.hearth[i][3].contains(skill)){\n\t\t\t\t\t\t\tsource.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!source.length){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar name=source.randomGet();\n\t\t\t\t\tvar skills=[skill];\n\t\t\t\t\tvar nameskills=lib.characterPack.hearth[name][3]\n\t\t\t\t\tfor(var i=0;i<nameskills.length;i++){\n\t\t\t\t\t\tif(list.contains(nameskills[i])){\n\t\t\t\t\t\t\tskills.add(nameskills[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.addVideo('skill',player,['hsnitai',[skills,name]]);\n\t\t\t\t\tlib.skill.hsnitai.process(skills,name);\n\t\t\t\t\tplayer.gain(game.createCard('hsnitai_'+name),'gain2');\n\t\t\t\t},subSkill: {card: {mark: \"card\",onremove: [\"hsnitai_card\",\"hsnitai_card_count\",\"hsnitai_card_skill\"],intro: {content: function (storage,player){\n\t\t\t\t\t\t\t\tvar skill=player.storage.hsnitai_card_skill;\n\t\t\t\t\t\t\t\t// var skill=storage.name.slice(8);\n\t\t\t\t\t\t\t\treturn '<div class=\"skill\">【'+lib.translate[skill]+'】</div><div>'+\n\t\t\t\t\t\t\t\tget.skillInfoTranslation(skill)+'</div>';\n\t\t\t\t\t\t\t},},trigger: {player: \"phaseUseBegin\",},priority: \"-10\",silent: \"true\",content: function (){\n\t\t\t\t\t\t\tif(player.storage.hsnitai_card_count>0){\n\t\t\t\t\t\t\t\tplayer.storage.hsnitai_card_count--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.removeSkill('hsnitai_card');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"锁定技，出牌阶段开始时，你获得一张随机炉石角色的技能牌"},"lianjin":{"name":"炼金","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: function (card){\n\t\t\t\t\treturn get.type(card)!='hsyaoshui';\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar names=[];\n\t\t\t\t\tvar inpile=lib.inpile.slice(0);\n\t\t\t\t\tinpile.randomSort();\n\t\t\t\t\tvar single=false;\n\t\t\t\t\tvar equip=Math.random()<0.5;\n\t\t\t\t\tvar equips=[];\n\t\t\t\t\tfor(var i=0;i<inpile.length;i++){\n\t\t\t\t\t\tif(lib.inpile[i]=='chuansongmen') continue;\n\t\t\t\t\t\tvar info=lib.card[inpile[i]];\n\t\t\t\t\t\tif(!info.enable) continue;\n\t\t\t\t\t\tif(!info.filterTarget) continue;\n\t\t\t\t\t\tif(typeof info.selectTarget=='function') continue;\n\t\t\t\t\t\tif(inpile[i].indexOf('_')!=-1) continue;\n\t\t\t\t\t\tif(info.type=='equip'){\n\t\t\t\t\t\t\tequips.push(inpile[i]);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(equip&&names.length>=2) continue;\n\t\t\t\t\t\tif(names.length>=3) continue;\n\t\t\t\t\t\tvar select=get.select(info.selectTarget);\n\t\t\t\t\t\tif(select[0]==-1&&select[1]==-1){\n\t\t\t\t\t\t\tnames.push(inpile[i]);\n\t\t\t\t\t\t\tif(info.modTarget) single=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(select[0]==1&&select[1]==1){\n\t\t\t\t\t\t\tnames.push(inpile[i]);\n\t\t\t\t\t\t\tsingle=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(equip){\n\t\t\t\t\t\tnames.push(equips.randomGet());\n\t\t\t\t\t}\n\t\t\t\t\tnames.sort(lib.sort.name);\n\t\t\t\t\tvar name='hsyaoshui_'+names[0]+'_'+names[1]+'_'+names[2];\n\t\t\t\t\tif(!lib.card[name]){\n\t\t\t\t\t\tlib.card[name]=get.copy(lib.skill.lianjin.template);\n\t\t\t\t\t\tlib.card[name].names=names;\n\t\t\t\t\t\tlib.card[name].selectTarget=single?1:-1;\n\t\t\t\t\t\tlib.translate[name]='药水';\n\t\t\t\t\t\tlib.translate[name+'_info']=get.translation(names[0])+'、'+\n\t\t\t\t\t\tget.translation(names[1])+'、'+get.translation(names[2]);\n\t\t\t\t\t}\n\t\t\t\t\tvar fakecard=game.createCard(name,cards[0].suit,cards[0].number);\n\t\t\t\t\tplayer.gain(fakecard,'gain2');\n\t\t\t\t\t// cards[0].style.transitionDuration='0.2s';\n\t\t\t\t\t// ui.refresh(cards[0]);\n\t\t\t\t\t// cards[0].classList.add('opaque');\n\t\t\t\t\t// event.cardname=name;\n\t\t\t\t\t// if(player!=game.me){\n\t\t\t\t\t// \tvar fakecard=game.createCard(name);\n\t\t\t\t\t// \tfakecard.node.info.remove();\n\t\t\t\t\t// \tplayer.$draw(fakecard);\n\t\t\t\t\t// }\n\t\t\t\t\t// game.delay(0,200);\n\t\t\t\t\t// stp 1\n\t\t\t\t\t// cards[0].style.transitionDuration='0s';\n\t\t\t\t\t// ui.refresh(cards[0]);\n\t\t\t\t\t// cards[0].classList.remove('fullskin');\n\t\t\t\t\t// cards[0].init([cards[0].suit,cards[0].number,event.cardname]);\n\t\t\t\t\t// game.delay(0,100);\n\t\t\t\t\t// stp 2\n\t\t\t\t\t// cards[0].style.transitionDuration='';\n\t\t\t\t\t// ui.refresh(cards[0]);\n\t\t\t\t\t// cards[0].classList.remove('opaque');\n\t\t\t\t\t// game.delay(0,200);\n\t\t\t\t},template: {type: \"hsyaoshui\",enable: \"true\",fullimage: \"true\",image: \"card/hsyaoshui\",vanish: \"true\",derivation: \"hs_kazhakusi\",multitarget: \"true\",multiline: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\tvar names=info.names;\n\t\t\t\t\t\tfor(var i=0;i<names.length;i++){\n\t\t\t\t\t\t\tvar info2=lib.card[names[i]];\n\t\t\t\t\t\t\tif(get.select(info2.selectTarget)[0]==-1&&!info2.modTarget) continue;\n\t\t\t\t\t\t\tif(!lib.filter.targetEnabled2({name:names[i]},player,target)) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\tevent.names=get.info(card).names.slice(0);\n\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\tif(event.names.length){\n\t\t\t\t\t\t\tvar name=event.names.shift();\n\t\t\t\t\t\t\tvar info=lib.card[name];\n\t\t\t\t\t\t\tvar targets=[];\n\t\t\t\t\t\t\tif(get.select(info.selectTarget)[0]==-1&&!info.modTarget){\n\t\t\t\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn player.canUse(name,current);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(target.isDead()){\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttargets.push(target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.useCard(game.createCard({name:name,suit:get.suit(card),number:card.number}),targets,'noai');\n\t\t\t\t\t\t\tplayer.addExpose(0.2);\n\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t}\n\t\t\t\t\t},ai: {order: \"9.1\",threaten: \"1.5\",result: {target: function (player,target,card){\n\t\t\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\t\t\tif(!info) return 0;\n\t\t\t\t\t\t\t\tif(!Array.isArray(info.names)) return 0;\n\t\t\t\t\t\t\t\tvar names=info.names;\n\t\t\t\t\t\t\t\tif(names.contains('xingjiegoutong')&&target.countCards('h')>=3) return -1;\n\t\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\t\tfor(var i=0;i<names.length;i++){\n\t\t\t\t\t\t\t\t\tvar info2=lib.card[names[i]];\n\t\t\t\t\t\t\t\t\tif(get.select(info2.selectTarget)[0]==-1&&!info2.modTarget) continue;\n\t\t\t\t\t\t\t\t\tvar eff=get.effect(target,{name:names[i]},player,target);\n\t\t\t\t\t\t\t\t\tif(eff>0){\n\t\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(eff<0){\n\t\t\t\t\t\t\t\t\t\tnum-=0.9;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t\t},},},},ai: {order: \"9\",result: {player: \"1\",},threaten: \"1.4\",},group: \"lianjin_discard\",subSkill: {discard: {trigger: {player: \"discardAfter\",},forced: \"true\",filter: function (event){\n\t\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.type(event.cards[i])=='hsyaoshui') return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar list=[],cards=[];\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.type(trigger.cards[i])=='hsyaoshui'){\n\t\t\t\t\t\t\t\t\tlist.push(trigger.cards[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tvar names=get.info(list[i]).names;\n\t\t\t\t\t\t\t\tif(names){\n\t\t\t\t\t\t\t\t\tcards.push(game.createCard(names.randomGet()));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.gain(cards,'draw2','log');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段限一次，你可以弃置一张牌并获得一张由三张随机牌组成的药水；当你因弃置而失去药水牌时，你随机获得药水的组成卡牌之一"},"shouji":{"name":"收集","script":"{group: [\"shouji_begin\",\"shouji_miss\"],subSkill: {begin: {trigger: {player: \"shaBegin\",},frequent: \"true\",usable: \"1\",filter: function (event){\n\t\t\t\t\t\t\treturn event.target.countCards('h')>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.gain(game.createCard(trigger.target.getCards('h').randomGet()),'draw');\n\t\t\t\t\t\t},sub: \"true\",},miss: {trigger: {player: \"shaMiss\",},frequent: \"true\",usable: \"1\",filter: function (event){\n\t\t\t\t\t\t\treturn event.target.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn !get.info(card).unique;\n\t\t\t\t\t\t\t},'e');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.gain(game.createCard(trigger.target.getCards('e',function(card){\n\t\t\t\t\t\t\t\treturn !get.info(card).unique;\n\t\t\t\t\t\t\t}).randomGet()),'draw');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"每当你使用一张杀，你可以获得一张目标随机手牌的复制；每当你的杀被闪避，你可以获得一张目标随机非特殊装备牌的复制；每回合限各限一次"},"guimou":{"name":"鬼谋","script":"{trigger: {player: \"damageEnd\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.source)<=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.isAlive()&&event.source!=player&&event.source.countCards('h')>0;\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\tvar card=trigger.source.getCards('h').randomGet();\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tplayer.gain(card,trigger.source);\n\t\t\t\t\t\tif(get.color(card)=='black'){\n\t\t\t\t\t\t\ttrigger.source.$give(card,player);\n\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttrigger.source.$giveAuto(card,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\tif(!target.hasFriend()) return false;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&player.countCards('h')>1) return [1,0,0,-1];\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，你可以获得伤害来源的一张手牌，若此牌是黑色，你展示此牌并重复此过程"},"yingxi":{"name":"影袭","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.getStat('damage')&&player.countCards('he',{color:'black'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt('yingxi'),\n\t\t\t\t\t\tfilterCard:{color:'black'},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},result.cards,result.targets,'yingxi');\n\t\t\t\t\t}\n\t\t\t\t},group: \"yingxi2\",}","info":"结束阶段，若你本回合未造成伤害，你可以将一张黑色牌当作杀对任意一名角色使用，若目标未受到伤害，此杀不可闪避"},"longyi":{"name":"龙裔","script":"{mod: {ignoredHandcard: function (card,player){\n\t\t\t\t\t\tif(get.color(card)=='black'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，你的黑色牌不占用手牌上限"},"jingcu":{"name":"晶簇","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.maxHp>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseMaxHp(true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {order: \"1.5\",threaten: \"1.4\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.isDamaged()) return 1;\n\t\t\t\t\t\t\tif(player.hp>=3&&!player.needsToDiscard(2)) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以减少一点体力上限并摸两张牌"},"shengzhang":{"name":"生长","script":"{trigger: {player: \"phaseDiscardEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.cards&&event.cards.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gainMaxHp(true);\n\t\t\t\t},}","info":"锁定技，若你于弃牌阶段弃置了牌，你增加一点体力上限"},"kekao":{"name":"科考","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i in lib.card){\n\t\t\t\t\t\tif(game.bannedcards&&game.bannedcards.contains(i)) continue;\n\t\t\t\t\t\tif(lib.card[i].type=='delay'){\n\t\t\t\t\t\t\tlist.push(['锦囊','',i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length==0){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar dialog=ui.create.dialog(get.prompt('kekao'),[list.randomGets(3),'vcard'],'hidden');\n\t\t\t\t\tplayer.chooseButton(dialog).ai=function(button){\n\t\t\t\t\t\tvar name=button.link[2]\n\t\t\t\t\t\tvar num=Math.random()*get.value({name:name});\n\t\t\t\t\t\tif(lib.card[name].selectTarget==-1){\n\t\t\t\t\t\t\treturn num/10;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.buttons){\n\t\t\t\t\t\tplayer.logSkill('kekao');\n\t\t\t\t\t\tplayer.gain(game.createCard(result.buttons[0].link[2]),'draw');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.6\",},}","info":"结束阶段，你可以发现一张延时锦囊牌"},"szbianshen":{"name":"变身","script":"{trigger: {player: \"phaseBefore\",},unique: \"true\",skillAnimation: \"true\",forceunique: \"true\",filter: function (){\n\t\t\t\t\treturn game.roundNumber>=3;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hp<=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=get.gainableCharacters(function(info){\n\t\t\t\t\t\treturn info[2]>=5;\n\t\t\t\t\t});\n\t\t\t\t\tvar players=game.players.concat(game.dead);\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tlist.remove(players[i].name);\n\t\t\t\t\t\tlist.remove(players[i].name1);\n\t\t\t\t\t\tlist.remove(players[i].name2);\n\t\t\t\t\t}\n\t\t\t\t\tvar dialog=ui.create.dialog('将武将牌替换为一名角色','hidden');\n\t\t\t\t\tdialog.add([list.randomGets(5),'character']);\n\t\t\t\t\tplayer.chooseButton(dialog,true).ai=function(button){\n\t\t\t\t\t\treturn get.rank(button.link,true);\n\t\t\t\t\t};\n\t\t\t\t\tplayer.awakenSkill('szbianshen');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.reinit('hs_shizugui',result.links[0]);\n\t\t\t\t\tplayer.hp=player.maxHp;\n\t\t\t\t\tplayer.update();\n\t\t\t\t},}","info":"限定技，回合开始时，若游戏轮数不少于3，你可以随机观看5张体力上限不小于5的武将牌，将武将牌替换为其中一张"},"zhuilie":{"name":"追猎","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard('he',get.prompt('zhuilie')).set('ai',function(card){\n\t\t\t\t\t\tif(player.hp>=4||(player.hasSha()&&player.hasShan())){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.hasSha()||player.hasShan()){\n\t\t\t\t\t\t\treturn 3-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).logSkill='zhuilie';\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tvar list2=[];\n\t\t\t\t\t\tfor(var i=0;i<6&&i<ui.cardPile.childElementCount;i++){\n\t\t\t\t\t\t\tlist.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(get.type(list[i])=='basic'){\n\t\t\t\t\t\t\t\tlist[i].discard();\n\t\t\t\t\t\t\t\tlist2.push(list[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.showCards(get.translation(player)+'将'+get.cnNumber(list2.length)+'张牌移入弃牌堆',list2);\n\t\t\t\t\t\tif(list2.length>3){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段，你可以弃置一张牌，然后将牌堆顶6张牌中的基本牌移至弃牌堆；若移入弃牌堆的牌超过3张，你摸一张牌"},"lieyang":{"name":"裂阳","script":"{trigger: {player: \"useCard\",},forced: \"true\",usable: \"3\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase==player&&get.type(event.card,'trick')=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=get.inpile('trick','trick');\n\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()),'draw');\n\t\t\t\t\tif(player.storage.counttrigger&&player.storage.counttrigger.lieyang>=3){\n\t\t\t\t\t\tplayer.addTempSkill('lieyang2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.8\",},}","info":"锁定技，每当你于回合内使用一张锦囊牌，你获得一张随机锦囊牌；当你发动三次此技能后，你本回合不能再使用锦囊牌"},"qianfu":{"name":"潜伏","script":"{trigger: {player: \"dieBefore\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('qianfu2')&&player.maxHp>0;\n\t\t\t\t},unique: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.addSkill('qianfu2');\n\t\t\t\t\tplayer.hp=1;\n\t\t\t\t\tplayer.update();\n\t\t\t\t\tplayer.discard(player.getCards('he'));\n\t\t\t\t\tplayer.setAvatar('hs_selajin','hs_selajin2');\n\t\t\t\t},ai: {threaten: \"0.8\",},}","info":"锁定技，在你死亡前，若你没有进入潜伏状态，你弃置所有牌并进入潜伏状态；当你体力值回复到3（或体力上限）时，你解除潜伏状态并摸3张牌"},"shimo":{"name":"尸魔","script":"{trigger: {global: \"damageAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&get.distance(player,event.player)<=1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player.isDamaged()){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，距离你为1的角色受到伤害时，你回复一点体力，若你没受伤，改为摸一张牌"},"qingtian":{"name":"擎天","script":"{trigger: {player: \"damageBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isMaxHp(true);\n\t\t\t\t},check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},}","info":"锁定技，若你的体力值为全场最多，你受到的伤害始终+1"},"azaowu":{"name":"造物","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(event.filterCard({name:'sha'},player,event)||\n\t\t\t\t\t\tevent.filterCard({name:'jiu'},player,event)||\n\t\t\t\t\t\tevent.filterCard({name:'tao'},player,event)){\n\t\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tif(event.filterCard({name:'sha'},player,event)){\n\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tif(lib.inpile[i]!='sha'&&\n\t\t\t\t\t\t\t\tlib.card[lib.inpile[i]].type=='basic'&&\n\t\t\t\t\t\t\t\tevent.filterCard({name:lib.inpile[i]},player,event)){\n\t\t\t\t\t\t\t\tlist.push(['基本','',lib.inpile[i]]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('造物',[list,'vcard'],'hidden');\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar card={name:button.link[2],nature:button.link[3]};\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tswitch(button.link[2]){\n\t\t\t\t\t\t\t\tcase 'tao':return 5;\n\t\t\t\t\t\t\t\tcase 'xuejibingbao': return 4;\n\t\t\t\t\t\t\t\tcase 'jiu':return 3.01;\n\t\t\t\t\t\t\t\tcase 'sha':\n\t\t\t\t\t\t\t\t\tif(button.link[3]=='fire') return 2.95;\n\t\t\t\t\t\t\t\t\telse if(button.link[3]=='fire') return 2.92;\n\t\t\t\t\t\t\t\t\telse return 2.9;\n\t\t\t\t\t\t\t\tdefault:return 2+_status.event.getRand()*2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3]},\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将一张基本牌当作'+get.translation(links[0][3]||'')+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {order: function (){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tif(event.filterCard({name:'jiu'},player,event)&&get.effect(player,{name:'jiu'})>0){\n\t\t\t\t\t\t\treturn 3.1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 2.9;\n\t\t\t\t\t},result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以将一张基本牌当作任意一张基本牌使用"},"shouwang":{"name":"守望","script":"{enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn event.type=='dying'&&event.dying&&!event.dying.hasSkill('shouwang2');\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target==_status.event.dying;\n\t\t\t\t},selectTarget: \"-1\",content: function (){\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\ttarget.changeHujia();\n\t\t\t\t\ttarget.addSkill('shouwang2')\n\t\t\t\t},ai: {order: \"6\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(!_status.event.dying||_status.event.dying.hasSkill('shouwang2')) return false;\n\t\t\t\t\t},save: \"true\",result: {target: \"3\",},threaten: \"1.6\",},}","info":"每名角色每局限一次，当一名角色进入濒死状态时，你可以令其回复一点体力并获得一点护甲"},"lieqi":{"name":"猎奇","script":"{trigger: {player: [\"phaseBegin\",\"phaseEnd\"],},filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !current.isUnderControl(true,player)&&current!=player.storage.lieqi&&current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('lieqi'),function(card,player,target){\n\t\t\t\t\t\treturn !target.isUnderControl(true,player)&&target!=player.storage.lieqi&&target.countCards('h');\n\t\t\t\t\t}).ai=function(){\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('lieqi',target);\n\t\t\t\t\t\tif(event.triggername=='phaseBegin'){\n\t\t\t\t\t\t\tplayer.storage.lieqi=target;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar hs=target.getCards('h').randomSort();\n\t\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\t\tvar list2=[];\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(list2.contains(hs[i].name)){\n\t\t\t\t\t\t\t\t\ths.splice(i--,1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tlist2.push(hs[i].name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar card=hs.randomGet();\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\t\tif(!list2.contains(lib.inpile[i])&&\n\t\t\t\t\t\t\t\t\t(get.type(lib.inpile[i])!='equip'||Math.random()<0.5)){\n\t\t\t\t\t\t\t\t\tlist.push(lib.inpile[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\t\tplayer.chooseCardButton(true,'猜测哪张牌为'+get.translation(target)+'的手牌',\n\t\t\t\t\t\t\t[card,game.createCard(list.randomRemove()),game.createCard(list.randomRemove())].randomSort()).ai=function(button){\n\t\t\t\t\t\t\t\tif(get.value(button.link)<0) return -10;\n\t\t\t\t\t\t\t\tif(_status.event.getRand()<0.7){\n\t\t\t\t\t\t\t\t\treturn button.link==card?1:-1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn button.link==card?-1:1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.triggername=='phaseEnd'){\n\t\t\t\t\t\tdelete player.storage.lieqi;\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.links){\n\t\t\t\t\t\tif(result.links[0]==event.card){\n\t\t\t\t\t\t\tplayer.gain(game.createCard(event.card),'draw');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.viewCards('正确答案',[event.card]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"准备和结束阶段，你可以指定一名角色，从一张该角色手牌与另外两张随机牌中猜测哪张为该角色手牌，若猜中，你获得一张该牌的复制（同一回合不能指定相同角色）"},"huanjue":{"name":"幻觉","script":"{trigger: {player: \"useCard1\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._huanjue) return false;\n\t\t\t\t\tif(event.targets.length!=1) return false;\n\t\t\t\t\tvar target=event.targets[0];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar info=lib.card[lib.inpile[i]];\n\t\t\t\t\t\tif(info.multitarget) continue;\n\t\t\t\t\t\tif(lib.filter.targetEnabled2({name:lib.inpile[i]},event.player,target)){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},autodelay: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[],list1=[],list2=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar info=lib.card[lib.inpile[i]];\n\t\t\t\t\t\tif(info.multitarget) continue;\n\t\t\t\t\t\tif(lib.filter.targetEnabled2({name:lib.inpile[i]},trigger.player,trigger.targets[0])){\n\t\t\t\t\t\t\tvar cardinfo=[trigger.card.suit||'',trigger.card.number||'',lib.inpile[i]];\n\t\t\t\t\t\t\tlist1.push(cardinfo);\n\t\t\t\t\t\t\tif(info.type!='equip'){\n\t\t\t\t\t\t\t\tlist2.push(cardinfo);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar equipped=false;\n\t\t\t\t\tfor(var i=0;i<3;i++){\n\t\t\t\t\t\tif(equipped&&list2.length){\n\t\t\t\t\t\t\tlist.push(list2.randomRemove());\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tequipped=true;\n\t\t\t\t\t\t\tlist.push(list1.randomRemove());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar eff1=get.effect(trigger.targets[0],trigger.card,trigger.player,player);\n\t\t\t\t\tvar val1=get.value(trigger.card,player,'raw');\n\t\t\t\t\tplayer.chooseButton(['幻觉',[list,'vcard']]).ai=function(button){\n\t\t\t\t\t\tvar card={suit:trigger.card.suit,number:trigger.card.number,name:button.link[2]};\n\t\t\t\t\t\tvar eff2=get.effect(trigger.targets[0],card,trigger.player,player)\n\t\t\t\t\t\tvar val2=get.value(card,player,'raw');\n\t\t\t\t\t\tif(eff1>0){\n\t\t\t\t\t\t\tif(eff2<=0) return 0;\n\t\t\t\t\t\t\treturn val2-val1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(eff1<0){\n\t\t\t\t\t\t\tif(eff2>=0) return val2;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(eff1==0){\n\t\t\t\t\t\t\tif(eff2>0) return val2;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar stat=player.stat[player.stat.length-1].card;\n\t\t\t\t\t\tif(stat[trigger.card.name]){\n\t\t\t\t\t\t\tstat[trigger.card.name]--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar card=game.createCard({\n\t\t\t\t\t\t\tsuit:trigger.card.suit||lib.suit.randomGet(),\n\t\t\t\t\t\t\tnumber:trigger.card.number||Math.ceil(Math.random()*13),\n\t\t\t\t\t\t\tname:result.links[0][2]}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\tgame.log(player,'将',trigger.card,'变为',card);\n\t\t\t\t\t\t// if(!event.isMine()) game.delayx();\n\t\t\t\t\t\ttrigger.card=get.autoViewAs(card);\n\t\t\t\t\t\ttrigger.cards=[card];\n\t\t\t\t\t\tgame.cardsGotoOrdering(card).relatedEvent=trigger;\n\t\t\t\t\t\ttrigger._huanjue=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.$throw(event.card,null,null,true);\n\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\tplayer.line(trigger.targets[0],'green');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\t}\n\t\t\t\t\tgame.delayx(0.5);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar stat=player.stat[player.stat.length-1].card;\n\t\t\t\t\tif(!stat[trigger.card.name]){\n\t\t\t\t\t\tstat[trigger.card.name]=1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstat[trigger.card.name]++;\n\t\t\t\t\t}\n\t\t\t\t},draw: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {usedu: \"true\",},}","info":"每当你使用一张牌，若此牌指定了惟一目标，你可以发现一张牌，然后可以代替此牌结算"},"srjici":{"name":"棘刺","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tif(trigger.player&&trigger.player.isIn()&&!trigger._notrigger.contains(trigger.player)){\n\t\t\t\t\t\ttrigger.player.randomDiscard();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",},}","info":"锁定技，每当你造成一次伤害，你摸一张牌，受伤害角色随机弃置一张牌"},"tansuo":{"name":"探索","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(!lib.characterPack.hearth){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<lib.cardPack.mode_derivation.length;i++){\n\t\t\t\t\t\tvar name=lib.cardPack.mode_derivation[i];\n\t\t\t\t\t\tvar info=lib.card[name];\n\t\t\t\t\t\tif(info.gainable==false||info.destroy) continue;\n\t\t\t\t\t\tif(lib.characterPack.hearth[info.derivation]){\n\t\t\t\t\t\t\tlist.push(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.discoverCard(list);\n\t\t\t\t\t\t// player.gain(game.createCard(list.randomGet()),'draw');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.6\",order: \"8\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张牌，然后发现一张炉石衍生牌"},"yinzong":{"name":"影踪","script":"{trigger: {player: \"loseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='e') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t// player.tempHide();\n\t\t\t\t\tplayer.gain(game.createCard('shan'),'gain2');\n\t\t\t\t},}","info":"锁定技，每当你失去装备区内的牌，你获得一张闪"},"xiyong":{"name":"汐涌","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(Array.isArray(result)&&result.length){\n\t\t\t\t\t\tvar gained=result[0];\n\t\t\t\t\t\tif(lib.filter.cardEnabled(gained,target)){\n\t\t\t\t\t\t\tvar next=player.chooseToUse();\n\t\t\t\t\t\t\tnext.filterCard=function(card){\n\t\t\t\t\t\t\t\treturn card==gained;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnext.prompt='是否使用'+get.translation(gained)+'？';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.6\",},}","info":"结束阶段，你可以摸一张牌并可以使用之，若你使用了此牌，你再摸一张牌"},"hllingxi":{"name":"灵息","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(target){\n\t\t\t\t\t\treturn lib.skill.hllingxi.filterTarget(null,player,target);\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hasSkill('hllingxi_used')) return false;\n\t\t\t\t\treturn target!=player&&target.isDamaged()&&target.countCards('he')>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseToDiscard('he',2,true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\ttarget.addTempSkill('hllingxi_used');\n\t\t\t\t},group: \"hllingxi_end\",subSkill: {used: {sub: \"true\",},end: {trigger: {player: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.isDamaged();\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t},sub: \"true\",},},ai: {order: \"6\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar nc=target.countCards('he');\n\t\t\t\t\t\t\tif(target.hasSkillTag('maixie_hp')){\n\t\t\t\t\t\t\t\tif(nc>=3) return 1;\n\t\t\t\t\t\t\t\tif(target.hp==1) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nc>=4){\n\t\t\t\t\t\t\t\tif(target.hp<=2) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nc==3){\n\t\t\t\t\t\t\t\tif(target.hp==1) return 1;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return -1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(target.hp==1) return 0;\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以令一名已受伤的其他角色弃置两张牌并回复一点体力（同阶段对一名角色限用一次）；结束阶段，你可以回复一点体力"},"zhaochao":{"name":"招潮","script":"{trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getEnemies().length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.targets=player.getEnemies();\n\t\t\t\t\tplayer.addSkill('zhaochao2');\n\t\t\t\t\tplayer.useCard({name:'sha'},event.targets.randomRemove());\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.removeSkill('zhaochao2');\n\t\t\t\t\tif(player.storage.zhaochao2&&event.targets.length){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},event.targets.randomRemove());\n\t\t\t\t\t\tdelete player.storage.zhaochao2;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.7\",},}","info":"锁定技，结束阶段，你视为对一名随机敌人使用一张杀；若此杀被闪避，你视为对另一名随机敌人使用一张杀"},"xinwuyan":{"name":"无言","script":"{audio: \"2\",trigger: {source: \"damageBegin2\",player: \"damageBegin4\",},forced: \"true\",check: function (event,player){\n\t\t\t\t\tif(player==event.player) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card,'trick')=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {notrick: \"true\",notricksource: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},player: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当你使用锦囊牌造成伤害时，你防止此伤害；锁定技，当你受到锦囊牌对你造成的伤害时，你防止此伤害。"},"guozaix":{"name":"过载","script":"{enable: \"phaseUse\",usable: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<4;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.guozaix2=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=4-player.countCards('h');\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\tplayer.addSkill('guozaix2');\n\t\t\t\t\tplayer.storage.guozaix2+=num;\n\t\t\t\t\tgame.addVideo('storage',player,['guozaix2',player.storage.guozaix2]);\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段限两次，你可将手牌补至四张，并于此阶段结束时弃置等量的牌"},"hstianqi":{"name":"天启","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he');\n\t\t\t\t},position: \"he\",init: function (player){\n\t\t\t\t\tplayer.storage.hstianqi=[];\n\t\t\t\t},onremove: \"true\",filterCard: function (card,player){\n\t\t\t\t\tif(get.position(card)=='h'){\n\t\t\t\t\t\tif(player.getEquip(1)&&player.getEquip(2)&&\n\t\t\t\t\t\t\tplayer.getEquip(3)&&player.getEquip(4)){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(get.position(card)=='e'){\n\t\t\t\t\t\tif(card.name.indexOf('hstianqi_')==0){\n\t\t\t\t\t\t\tfor(var i=0;i<player.storage.hstianqi.length;i++){\n\t\t\t\t\t\t\t\tif(player.storage.hstianqi[i].name==card.name) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 20-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn (9-get.value(card))/5;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(get.type(card)=='equip'){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"0\",intro: {content: \"cards\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.position=get.position(cards[0]);\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\tif(event.position=='e'){\n\t\t\t\t\t\tvar name=cards[0].name;\n\t\t\t\t\t\tif(name.indexOf('hstianqi_')!=0) return;\n\t\t\t\t\t\tfor(var i=0;i<player.storage.hstianqi.length;i++){\n\t\t\t\t\t\t\tif(player.storage.hstianqi[i].name==name){\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.hstianqi.add(cards[0]);\n\t\t\t\t\t\tplayer.markSkill('hstianqi');\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.position=='h'){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tif(!player.getEquip(1)){\n\t\t\t\t\t\t\tlist.push({name:'hstianqi_dalian',suit:'spade',number:1});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.getEquip(2)){\n\t\t\t\t\t\t\tlist.push({name:'hstianqi_shali',suit:'heart',number:1});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.getEquip(3)){\n\t\t\t\t\t\t\tlist.push({name:'hstianqi_suolasi',suit:'diamond',number:1});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.getEquip(4)){\n\t\t\t\t\t\t\tlist.push({name:'hstianqi_nazigelin',suit:'club',number:1});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tplayer.equip(game.createCard(list.randomGet()),true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!event.isMine()){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t}\n\t\t\t\t},group: [\"hstianqi_win\"],subSkill: {win: {trigger: {player: \"phaseBegin\",},priority: \"30\",forced: \"true\",skillAnimation: \"true\",animationColor: \"legend\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.hstianqi.length==4;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(game.showIdentity){\n\t\t\t\t\t\t\t\tgame.showIdentity();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.isUnderControl(true)||player.getFriends().contains(game.me)){\n\t\t\t\t\t\t\t\tgame.over(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tgame.over(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.storage.hstianqi.length==4) return 20;\n\t\t\t\t\t\tif(target.storage.hstianqi.length==3) return 2;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},order: \"9\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以选择一项：弃置一张手牌并随机装备一件天启骑士（不能替换现有装备），或弃置一张装备区内的牌并摸两张牌；当你以此法弃置天启骑士时，若你武将牌上没有对应的天启骑士，你将其置于你的武将牌上；准备阶段，若你的武将牌上有4张天启骑士，你获得游戏胜利"},"hspuzhao":{"name":"普照","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {suit: \"heart\",},position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'heart'})>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar targets=player.getFriends();\n\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\ttargets.push(player);\n\t\t\t\t\t\tif(targets.length>3){\n\t\t\t\t\t\t\ttargets=targets.randomGets(3);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttargets.sortBySeat();\n\t\t\t\t\t\tplayer.line(targets,'green');\n\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\t\ttargets[i].addExpose(0.2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.asyncDraw(targets);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",expose: \"0.3\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张红桃牌，然后令至多三名随机友方角色各摸一张牌（若你无其他队友，改为摸两张牌）"},"hsyanxin":{"name":"炎心","script":"{trigger: {player: \"drawBegin\",},priority: \"-5\",filter: function (event,player){\n\t\t\t\t\tif(game.fixedPile) return false;\n\t\t\t\t\tif(event.num<=0) return false;\n\t\t\t\t\tif(ui.cardPile.childNodes.length==0) return false;\n\t\t\t\t\tif(get.color(ui.cardPile.firstChild)=='red') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},forced: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\tvar card=ui.cardPile.firstChild;\n\t\t\t\t\tif(lib.inpile.contains(card.name)){\n\t\t\t\t\t\tfor(var i=1;i<ui.cardPile.childElementCount;i++){\n\t\t\t\t\t\t\tvar card2=ui.cardPile.childNodes[i];\n\t\t\t\t\t\t\tif(get.color(card2)=='red'){\n\t\t\t\t\t\t\t\tui.cardPile.insertBefore(card2,card);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tcard.init([['heart','diamond'].randomGet(),card.number,card.name,card.nature]);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，在你摸牌时，若牌堆中有红色牌，你摸到的首张牌必为红色"},"nsaiqi":{"name":"哀泣","script":"{trigger: {player: \"useCard\",},forced: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.nsaiqi=[];\n\t\t\t\t},intro: {content: \"cards\",},filter: function (event,player){\n\t\t\t\t\tif(ui.cardPile.firstChild&&ui.cardPile.firstChild.vanishtag.contains('nsaiqi')){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},onremove: \"lose\",content: function (){\n\t\t\t\t\tvar cards=get.cards(3);\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tcards[i].vanishtag.add('nsaiqi');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.nsaiqi.addArray(cards);\n\t\t\t\t\tplayer.syncStorage('nsaiqi');\n\t\t\t\t\tplayer.markSkill('nsaiqi');\n\t\t\t\t},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+1;\n\t\t\t\t\t},},}","info":"锁定技，每当你使用一张牌，你移除牌堆顶的3张牌；你的手牌上限始终+1"},"nsbeiming":{"name":"悲鸣","script":"{trigger: {player: \"nsaiqiAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.nsaiqi.length>=9;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseCardButton(player.storage.nsaiqi,true,'将顺序将牌置于牌堆顶（先选择的在上）',player.storage.nsaiqi.length);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar list=result.links.slice(0);\n\t\t\t\t\twhile(list.length){\n\t\t\t\t\t\tui.cardPile.insertBefore(list.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.nsaiqi.length=0;\n\t\t\t\t\tplayer.unmarkSkill('nsaiqi');\n\t\t\t\t},}","info":"锁定技，当你移除的牌不少于9张时，你摸一张牌，然后将移除的牌以任意顺序置于牌堆顶；当被移除过的牌在牌堆顶时（洗牌后重置），你的不能发动【哀泣】移除牌"},"ylyuchu":{"name":"育雏","script":"{trigger: {player: \"recoverAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('subplayer')) return false;\n\t\t\t\t\treturn player.storage.ylyuchu.length<3;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.ylyuchu) player.storage.ylyuchu=[];\n\t\t\t\t},ai: {threaten: \"0.7\",},group: [\"ylyuchu_swap\",\"ylyuchu_phase\"],subSkill: {chosen: {sub: \"true\",},swap: {trigger: {player: \"phaseEnd\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.ylyuchu.length;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar list=game.filterPlayer();\n\t\t\t\t\t\t\tlist.remove(player);\n\t\t\t\t\t\t\tplayer.storage.ylyuchu2=list.randomGets(player.storage.ylyuchu.length);\n\t\t\t\t\t\t\tplayer.storage.ylyuchu3=player.storage.ylyuchu.slice(0).randomSort();\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},phase: {trigger: {global: \"phaseBefore\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tif(player.hasSkill('subplayer')) return false;\n\t\t\t\t\t\t\tif(player.storage.ylyuchu2&&player.storage.ylyuchu3){\n\t\t\t\t\t\t\t\tvar idx=player.storage.ylyuchu2.indexOf(event.player);\n\t\t\t\t\t\t\t\tvar target=player.storage.ylyuchu3[idx];\n\t\t\t\t\t\t\t\tif(target&&player.storage.ylyuchu.contains(target)){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(player.storage.ylyuchu2&&player.storage.ylyuchu3){\n\t\t\t\t\t\t\t\tvar idx=player.storage.ylyuchu2.indexOf(trigger.player);\n\t\t\t\t\t\t\t\tvar target=player.storage.ylyuchu3[idx];\n\t\t\t\t\t\t\t\tif(target&&player.storage.ylyuchu.contains(target)){\n\t\t\t\t\t\t\t\t\tplayer.callSubPlayer(target);\n\t\t\t\t\t\t\t\t\tplayer.storage.ylyuchu2[idx]=null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},exit: {trigger: {player: [\"phaseAfter\"],},forced: \"true\",popup: \"false\",priority: \"-60\",content: function (){\n\t\t\t\t\t\t\tplayer.exitSubPlayer();\n\t\t\t\t\t\t},sub: \"true\",},draw: {trigger: {player: \"phaseDrawBegin\",},silent: \"true\",filter: function (event){\n\t\t\t\t\t\t\treturn event.num>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},enter: {trigger: {global: \"phaseAfter\",},forced: \"true\",popup: \"false\",priority: \"-60\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.player!=player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.insertPhase(null,true);\n\t\t\t\t\t\t},sub: \"true\",},},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.num&&player.storage.ylyuchu.length<3){\n\t\t\t\t\t\tvar skill=player.addSubPlayer({\n\t\t\t\t\t\t\tname:'hs_yelinchulong',\n\t\t\t\t\t\t\tskills:['ylyuchu_draw','ylyuchu_exit','ylyuchu_enter'],\n\t\t\t\t\t\t\thp:2,\n\t\t\t\t\t\t\tmaxHp:2,\n\t\t\t\t\t\t\ths:get.cards(2),\n\t\t\t\t\t\t\tskill:skill,\n\t\t\t\t\t\t\t// intro:'下个敌方回合开始前，随机切换至此随从',\n\t\t\t\t\t\t\tintro2:'当前回合结束后进行一个额外回合并切换回本体',\n\t\t\t\t\t\t\tonremove:function(player){\n\t\t\t\t\t\t\t\tplayer.storage.ylyuchu.remove(skill);\n\t\t\t\t\t\t\t\tdelete lib.skill[skill];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.storage.ylyuchu.push(skill);\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，每当你回复一点体力，你获得一只雏龙随从（不超过3只）；结束阶段，你每有一只雏龙，便随机选择一名其他角色，在该角色的下个回合开始前你切换至该雏龙，然后在此回合结束后进行一个额外回合并切换回本体"},"asyouzhang":{"name":"幽瘴","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h',{type:'basic'})==0) return true;\n\t\t\t\t\tif(player.countCards('h',{type:['trick','delay']})==0) return true;\n\t\t\t\t\tif(player.countCards('h',{type:'equip'})==0) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.countCards('h',{type:'basic'})==0){\n\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\tplayer.gain(card,'draw');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.basiccard=card;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.basiccard){\n\t\t\t\t\t\tif(player.hasUseTarget(event.basiccard)){\n\t\t\t\t\t\t\tvar next=player.chooseToUse();\n\t\t\t\t\t\t\tnext.filterCard=function(card){\n\t\t\t\t\t\t\t\treturn card==event.basiccard;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnext.prompt='是否使用'+get.translation(event.basiccard)+'？';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.countCards('h',{type:['trick','delay']})==0){\n\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='trick'||get.type(card)=='delay';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\tplayer.gain(card,'draw');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.trickcard=card;\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.trickcard){\n\t\t\t\t\t\tif(player.hasUseTarget(event.trickcard)){\n\t\t\t\t\t\t\tvar next=player.chooseToUse();\n\t\t\t\t\t\t\tnext.filterCard=function(card){\n\t\t\t\t\t\t\t\treturn card==event.trickcard;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnext.prompt='是否使用'+get.translation(event.trickcard)+'？';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(player.countCards('h',{type:'equip'})==0){\n\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\tplayer.gain(card,'draw');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.equipcard=card;\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.equipcard){\n\t\t\t\t\t\tif(player.hasUseTarget(event.equipcard)){\n\t\t\t\t\t\t\tvar next=player.chooseToUse();\n\t\t\t\t\t\t\tnext.filterCard=function(card){\n\t\t\t\t\t\t\t\treturn card==event.equipcard;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnext.prompt='是否使用'+get.translation(event.equipcard)+'？';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.7\",},}","info":"结束阶段，若你的手牌中没有基本牌/锦囊牌/装备牌，你可以获得牌堆顶的一张基本牌/锦囊牌/装备牌，并可以立即使用"},"huanfeng":{"name":"唤风","script":"{skillAnimation: \"epic\",animationColor: \"thunder\",trigger: {player: \"phaseBeginStart\",},forced: \"true\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\t// if(player.storage.huanfeng_awake) return false;\n\t\t\t\t\tvar skills=['tuteng1','tuteng2','tuteng3','tuteng4'];\n\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\tif(!player.hasSkill(skills[i])){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t// player.storage.huanfeng_awake=true;\n\t\t\t\t\tplayer.removeSkill('tuteng1');\n\t\t\t\t\tplayer.removeSkill('tuteng2');\n\t\t\t\t\tplayer.removeSkill('tuteng3');\n\t\t\t\t\tplayer.removeSkill('tuteng4');\n\t\t\t\t\t// player.awakenSkill('huanfeng');\n\t\t\t\t\tplayer.storage.huanfeng_end=player.addSubPlayer({\n\t\t\t\t\t\tname:'hs_alakir',\n\t\t\t\t\t\thp:3,\n\t\t\t\t\t\tmaxHp:3,\n\t\t\t\t\t\tskills:lib.character.hs_alakir[3],\n\t\t\t\t\t\ths:get.cards(4)\n\t\t\t\t\t});\n\t\t\t\t\tplayer.callSubPlayer(player.storage.huanfeng_end);\n\t\t\t\t\t// game.createTrigger('phaseBegin','shengdun',player,trigger);\n\t\t\t\t},subSkill: {end: {temp: \"true\",vanish: \"true\",trigger: {player: \"phaseEnd\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.huanfeng_end;\n\t\t\t\t\t\t},content: function (){\n\n\t\t\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\t\t\tdelete player.storage.huanfeng_end;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"锁定技，准备阶段，若你有4个图腾，你失去所有图腾，然后获得并召唤随从奥拉基尔"},"hsxingyi":{"name":"星移","script":"{trigger: {global: \"useSkillAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(lib.filter.skillDisabled(event.skill)) return false;\n\t\t\t\t\tif(!game.expandSkills(event.player.getStockSkills()).contains(event.skill)) return false;\n\t\t\t\t\treturn _status.currentPhase==event.player&&event.player.isEnemiesOf(player);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill(trigger.skill,{player:'phaseAfter'});\n\t\t\t\t},}","info":"锁定技，每当一名敌方角色于回合内使用主动技能，你获得此技能直到下一回合结束"},"hshuanling":{"name":"幻灵","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.hshuanling.length&&player.countCards('he');\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.hshuanling=[];\n\t\t\t\t},intro: {content: \"cards\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=Math.min(\n\t\t\t\t\t\tMath.max(1,player.countCards('e')),\n\t\t\t\t\t\tplayer.storage.hshuanling.length\n\t\t\t\t\t);\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt2('hshuanling'),[1,num]);\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(get.position(card)=='e') return 7-get.value(card);\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill='hshuanling';\n\t\t\t\t\tnext.delay=false;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.num=result.cards.length;\n\t\t\t\t\t\tplayer.draw(event.num);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.num){\n\t\t\t\t\t\tvar targets=game.filterPlayer();\n\t\t\t\t\t\tvar list=player.storage.hshuanling.slice(0);\n\t\t\t\t\t\twhile(list.length){\n\t\t\t\t\t\t\tvar choice=list.randomRemove();\n\t\t\t\t\t\t\tvar card=game.createCard(choice);\n\t\t\t\t\t\t\tvar target;\n\t\t\t\t\t\t\twhile(targets.length){\n\t\t\t\t\t\t\t\ttarget=targets.randomRemove();\n\t\t\t\t\t\t\t\tif(lib.filter.targetEnabled2(card,player,target)&&\n\t\t\t\t\t\t\t\t\tget.effect(target,card,player,player)>0){\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttarget = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target){\n\t\t\t\t\t\t\t\tplayer.storage.hshuanling.remove(choice);\n\t\t\t\t\t\t\t\tif(!player.storage.hshuanling.length){\n\t\t\t\t\t\t\t\t\tplayer.unmarkSkill('hshuanling');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tplayer.syncStorage('hshuanling');\n\t\t\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplayer.useCard(card,target);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},group: [\"hshuanling_count\"],subSkill: {count: {trigger: {global: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(get.is.converted(event)) return false;\n\t\t\t\t\t\t\tif(!event.player.isEnemiesOf(player)) return false;\n\t\t\t\t\t\t\tif(get.type(event.card)!='trick') return false;\n\t\t\t\t\t\t\tif(event.targets.length!=1) return false;\n\t\t\t\t\t\t\t// if(!event.targets[0].isFriendsOf(player)) return false;\n\t\t\t\t\t\t\tif(get.info(event.card).multitarget) return false;\n\t\t\t\t\t\t\tif(get.info(event.card).singleCard) return false;\n\t\t\t\t\t\t\tif(!get.info(event.card).enable) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.hshuanling.add(trigger.card);\n\t\t\t\t\t\t\tplayer.markSkill('hshuanling');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"结束阶段，你可以弃置至多X张牌（X为你装备区内的牌数且至少为1）并摸等量的牌，每弃置一张牌，你随机使用一张本局敌方角色使用过的单目标非转化普通锦囊牌，随机指定一个具有正收益的角色为目标"},"zhoujiang":{"name":"咒降","script":"{trigger: {player: \"useCard\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card)=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=['hszuzhou_nvwudeganguo','hszuzhou_nvwudepingguo',\n\t\t\t\t\t\t'hszuzhou_nvwudexuetu','hszuzhou_wushushike','hszuzhou_guhuo'];\n\t\t\t\t\tplayer.gain(game.createCard(list.randomGet()),'draw');\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"锁定技，每当你使用一张普通锦囊牌，你将一张随机“诅咒”牌置于你的手牌"},"muyin":{"name":"暮隐","script":"{trigger: {player: \"loseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.tempHide();\n\t\t\t\t},ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\tif(player.countCards('h')!=1) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，每当你失去最后一张手牌，你获得潜行直到下一回合开始"},"tqchuanyue":{"name":"穿越","script":"{trigger: {player: \"phaseBeginStart\",},forced: \"true\",ai: {threaten: \"1.5\",},content: function (){\n\t\t\t\t\tvar list=[\n\t\t\t\t\t\t'oldhanshuang','oldyanshu','oldfbeifa','oldmalymowang','oldfenlie',\n\t\t\t\t\t\t'oldshifa','oldfushi','oldhuanjue','oldzhanhou','oldduxin',\n\t\t\t\t\t\t'oldenze','oldyulu',\n\t\t\t\t\t];\n\t\t\t\t\tvar map={\n\t\t\t\t\t\toldhanshuang:'hs_bchillmaw',\n\t\t\t\t\t\toldyanshu:'hs_antonidas',\n\t\t\t\t\t\toldfbeifa:'hs_fuding',\n\t\t\t\t\t\toldmalymowang:'hs_malygos',\n\t\t\t\t\t\toldfenlie:'hs_kchromaggus',\n\t\t\t\t\t\toldshifa:'hs_shifazhe',\n\t\t\t\t\t\toldfushi:'hs_alextrasza',\n\t\t\t\t\t\toldhuanjue:'hs_zhihuanhua',\n\t\t\t\t\t\toldzhanhou:'hs_jgarrosh',\n\t\t\t\t\t\toldduxin:'hs_xialikeer',\n\t\t\t\t\t\toldenze:'hs_malorne',\n\t\t\t\t\t\toldyulu:'hs_sainaliusi'\n\t\t\t\t\t};\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tvar skill=list[i];\n\t\t\t\t\t\tif(!lib.skill[skill]||player.hasSkill(skill)||get.is.empty(lib.skill[skill])){\n\t\t\t\t\t\t\tlist.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tvar skill=list.randomGet();\n\t\t\t\t\t\tplayer.addAdditionalSkill('tqchuanyue',skill);\n\t\t\t\t\t\tplayer.popup(skill);\n\t\t\t\t\t\tplayer.flashAvatar('tqchuanyue',map[skill]);\n\t\t\t\t\t\tplayer.markSkillCharacter('tqchuanyue',map[skill],get.skillTranslation(skill),get.skillInfoTranslation(skill));\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，准备阶段开始时，你随机选择一个被削弱过的炉石技能，获得其未削弱的版本，替换上一个以此法获得的技能"},"hualing":{"name":"化灵","script":"{enable: \"phaseUse\",round: \"3\",skillAnimation: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseSkill(target,function(info,skill){\n\t\t\t\t\t\treturn !player.hasSkill(skill);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar skill=result.skill;\n\t\t\t\t\t\tplayer.addAdditionalSkill('hualing',skill);\n\t\t\t\t\t\tplayer.popup(skill);\n\t\t\t\t\t\tplayer.markSkillCharacter('hualing',target.name,get.skillTranslation(skill,player),get.skillInfoTranslation(skill));\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar rank=get.rank(target,true);\n\t\t\t\t\tvar list=get.gainableCharacters(true);\n\t\t\t\t\tvar choice=[];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(get.rank(list[i],true)==rank+1){\n\t\t\t\t\t\t\tchoice.push(list[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!choice.length){\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(get.rank(list[i],true)==rank){\n\t\t\t\t\t\t\t\tchoice.push(list[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(choice.length){\n\t\t\t\t\t\tvar hp=target.hp;\n\t\t\t\t\t\tvar name=choice.randomGet();\n\t\t\t\t\t\ttarget.reinit(target.name,name);\n\t\t\t\t\t\ttarget.hp=Math.min(hp,target.maxHp);\n\t\t\t\t\t\ttarget.update();\n\t\t\t\t\t\tgame.triggerEnter(target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn 1/(get.rank(target,true)+1);\n\t\t\t\t\t\t},},},group: [\"hualing_roundcount\"],}","info":"每三轮限一次，你可以选择一名其他角色，获得其一项技能，然后将其随机变形为一名强度高一级的武将"},"yibian":{"name":"异变","script":"{trigger: {player: \"phaseUseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.countCards('h','hsfashu_buwendingyibian');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(game.createCard('hsfashu_buwendingyibian'),'gain2');\n\t\t\t\t},}","info":"锁定技，出牌阶段开始时，若你没有不稳定异变，则将一张不稳定异变置于你的手牌"},"wxuying":{"name":"虚影","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=player.getCards('h',function(card){\n\t\t\t\t\t\treturn card.name=='hsfashu_anyingjingxiang'||card._wxuying;\n\t\t\t\t\t});\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\tplayer.lose(cards)._triggered=null;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card=game.createCard('hsfashu_anyingjingxiang');\n\t\t\t\t\tcard._modUseful=function(){\n\t\t\t\t\t\treturn 7;\n\t\t\t\t\t};\n\t\t\t\t\tcard._modValue=function(){\n\t\t\t\t\t\treturn 7;\n\t\t\t\t\t};\n\t\t\t\t\tplayer.gain(card,'gain2');\n\t\t\t\t},subSkill: {lose: {trigger: {player: \"loseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\t\t\tif(trigger.cards[i]._wxuying){\n\t\t\t\t\t\t\t\t\tplayer.storage.wxuying=trigger.cards[i];\n\t\t\t\t\t\t\t\t\tdelete trigger.cards[i]._wxuying;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},change: {trigger: {player: [\"useCard\",\"respond\"],},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tvar cards=player.getCards('h',function(card){\n\t\t\t\t\t\t\t\treturn card.name=='hsfashu_anyingjingxiang'||card._wxuying;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\tcards[i].init(trigger.card);\n\t\t\t\t\t\t\t\tcards[i].classList.add('glow');\n\t\t\t\t\t\t\t\tcards[i]._wxuying=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},hide: {trigger: {player: [\"useCard\",\"respond\"],},forced: \"true\",priority: \"-1\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.cards.contains(player.storage.wxuying);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(_status.currentPhase==player){\n\t\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.tempHide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete player.storage.wxuying;\n\t\t\t\t\t\t},sub: \"true\",},clear: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.wxuying;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},group: [\"wxuying_change\",\"wxuying_hide\",\"wxuying_lose\",\"wxuying_clear\"],}","info":"锁定技，准备阶段，你移去手牌中的暗影镜像，然后获得一张暗影镜像（当你使用或打出一张牌后，暗影镜像变为该牌的复制）；当你回合内使用暗影镜像时，你摸一张牌；当你回合外使用暗影镜像时，你获得潜行直到下一回合开始"},"hshuanyu":{"name":"幻羽","script":"{trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\tif(!lib.characterPack.hearth){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<lib.cardPack.mode_derivation.length;i++){\n\t\t\t\t\t\tvar name=lib.cardPack.mode_derivation[i];\n\t\t\t\t\t\tvar info=lib.card[name];\n\t\t\t\t\t\tif(info.gainable==false||info.destroy) continue;\n\t\t\t\t\t\tif(lib.characterPack.hearth[info.derivation]){\n\t\t\t\t\t\t\tlist.push(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.discoverCard(list);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,get.tag(card,'damage')*2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,get.tag(card,'damage')*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，你获得发现一张炉石衍生牌"}},"card":{},"hero":{"hs_jaina":{"name":"吉安娜","attr":["female","wei",3,["huopu","aoshu","bingjia"]]},"hs_lrexxar":{"name":"雷克萨","attr":["male","shu",4,["yushou"]]},"hs_wuther":{"name":"乌瑟尔","attr":["male","qun",4,["fengxian","rejieming"]]},"hs_jgarrosh":{"name":"加尔鲁什","attr":["male","shu",4,["zhanhou","qiangxi"]]},"hs_malfurion":{"name":"玛法里奥","attr":["male","wu",4,["jihuo"]]},"hs_guldan":{"name":"古尔丹","attr":["male","wei",3,["moxie","fuhua","hongxi"]]},"hs_anduin":{"name":"安度因","attr":["male","qun",3,["shengguang","shijie","anying"]]},"hs_sthrall":{"name":"萨尔","attr":["male","wu",4,["tuteng","guozai","zuling"]]},"hs_waleera":{"name":"瓦莉拉","attr":["female","shu",3,["jianren","mengun","wlianji"]]},"hs_medivh":{"name":"麦迪文","attr":["male","wei",3,["jingxiang","zuzhou","mdzhoufu"]]},"hs_alleria":{"name":"奥蕾莉亚","attr":["female","wu",3,["fengxing","xinliegong"]]},"hs_magni":{"name":"麦格尼","attr":["male","shu",4,["zhongjia","dunji"]]},"hs_liadrin":{"name":"莉亚德琳","attr":["female","shu",4,["xueren"]]},"hs_morgl":{"name":"摩戈尔","attr":["male","wu",3,["s_tuteng"]]},"hs_khadgar":{"name":"卡德加","attr":["male","shu",3,["midian","fuwen","jinzhou"]]},"hs_tyrande":{"name":"泰兰德","attr":["female","wei",3,["yuelu","xingluo"]]},"hs_neptulon":{"name":"耐普图隆","attr":["male","wu",4,["liechao","qingliu"]]},"hs_wvelen":{"name":"维纶","attr":["male","qun",3,["shengyan","xianzhi"]]},"hs_antonidas":{"name":"安东尼达斯","attr":["male","wei",3,["yanshu","bingshuang"]]},"hs_alakir":{"name":"奥拉基尔","attr":["male","wei",3,["fengnu","shengdun"]]},"hs_zhouzhuo":{"name":"周卓","attr":["male","qun",4,["yiwen"]]},"hs_yngvar":{"name":"伊戈瓦尔","attr":["male","qun",3,["huanwu"]]},"hs_bchillmaw":{"name":"冰喉","attr":["male","wei",5,["hanshuang","bingshi"]]},"hs_malorne":{"name":"玛洛恩","attr":["male","wu",3,["enze","chongsheng"]]},"hs_malygos":{"name":"玛里苟斯","attr":["male","wei",4,["malymowang"]]},"hs_xuefashi":{"name":"血法师","attr":["male","wei",2,["liehun","xjumo"]]},"hs_loatheb":{"name":"洛欧塞布","attr":["male","wu",5,["duzhang"]]},"hs_trueheart":{"name":"图哈特","attr":["female","qun",3,["qianghuax"]]},"hs_sainaliusi":{"name":"塞纳留斯","attr":["male","wu",4,["chongsheng","yulu"]]},"hs_lrhonin":{"name":"罗宁","attr":["male","wei",4,["bingyan","yufa"]]},"hs_bolvar":{"name":"伯瓦尔","attr":["male","wei",4,["yuanzheng","bzhuiji"]]},"hs_fuding":{"name":"弗丁","attr":["male","wei",4,["shengdun","fbeifa"]]},"hs_xuanzhuanjijia":{"name":"旋转机甲","attr":["male","shu",2,["jixuan"]]},"hs_ysera":{"name":"伊瑟拉","attr":["female","wu",4,["bimeng"]]},"hs_alextrasza":{"name":"阿莱克斯塔","attr":["female","shu",5,["fushi"]]},"hs_nozdormu":{"name":"诺兹多姆","attr":["male","qun",5,["shixu"]]},"hs_sapphiron":{"name":"萨菲隆","attr":["male","wei",4,["bingdong","stuxi"]]},"hs_kchromaggus":{"name":"克洛玛古斯","attr":["male","wei",4,["fenlie"]]},"hs_lreno":{"name":"雷诺","attr":["male","shu",4,["tanmi"]]},"hs_brann":{"name":"布莱恩","attr":["male","shu",3,["qianghua","mashu"]]},"hs_finley":{"name":"芬利","attr":["male","wu",3,["maoxian"]]},"hs_kcthun":{"name":"克苏恩","attr":["male","qun",4,["luanji","xianji"]]},"hs_anomalus":{"name":"阿诺玛鲁斯","attr":["male","wei",4,["mobao"]]},"hs_blingtron":{"name":"布林顿","attr":["male","shu",3,["zengli","xiubu"]]},"hs_yogg":{"name":"尤格萨隆","attr":["male","wu",4,["qianhou"]]},"hs_xialikeer":{"name":"夏克里尔","attr":["female","shu",3,["duxin"]]},"hs_pyros":{"name":"派洛斯","attr":["female","shu",2,["pyuhuo"]]},"hs_kalimosi":{"name":"卡利莫斯","attr":["male","wu",4,["kqizhou"]]},"hs_zhishigushu":{"name":"知识古树","attr":["male","shu",4,["jiaohui"]]},"hs_zhanzhenggushu":{"name":"战争古树","attr":["male","wei",6,["biri"]]},"hs_ronghejuren":{"name":"熔核巨人","attr":["male","shu",8,["ronghuo"]]},"hs_shanlingjuren":{"name":"山岭巨人","attr":["male","wu",8,["luoshi"]]},"hs_aedwin":{"name":"艾德温","attr":["male","wu",4,["lianzhan"]]},"hs_mijiaojisi":{"name":"秘教祭司","attr":["female","wu",3,["kuixin"]]},"hs_huzhixiannv":{"name":"湖之仙女","attr":["female","wu",3,["jingmeng","qingliu"]]},"hs_totemic":{"name":"图腾师","attr":["male","wu",3,["peiyu"]]},"hs_wujiyuansu":{"name":"无羁元素","attr":["male","wei",3,["hswuji"]]},"hs_xsylvanas":{"name":"希尔瓦娜斯","attr":["female","qun",3,["busi","xshixin","xmojian"]]},"hs_siwangzhiyi":{"name":"死亡之翼","attr":["male","qun",12,["mieshi"]]},"hs_bilanyoulong":{"name":"碧蓝幼龙","attr":["male","wei",4,["lingzhou"]]},"hs_jinglinglong":{"name":"精灵龙","attr":["male","wu",3,["moyao"]]},"hs_ruanniguai":{"name":"软泥怪","attr":["male","wu",3,["nianfu","xiaorong"]]},"hs_hudunren":{"name":"护盾机甲","attr":["male","shu",2,["hhudun"]]},"hs_nate":{"name":"纳特","attr":["male","wu",4,["chuidiao"]]},"hs_jiaziruila":{"name":"加兹瑞拉","attr":["male","wu",4,["hannu"]]},"hs_shifazhe":{"name":"嗜法者","attr":["male","wei",3,["shifa"]]},"hs_lafamu":{"name":"拉法姆","attr":["male","shu",4,["xieneng"]]},"hs_yelise":{"name":"伊莉斯","attr":["female","wei",3,["xunbao","zhuizong"]]},"hs_jiawodun":{"name":"嘉沃顿","attr":["male","wu",4,["jinhua"]]},"hs_fandral":{"name":"范达尔","attr":["male","shu",4,["nuyan","chouhuo"]]},"hs_hallazeal":{"name":"海纳泽尔","attr":["male","wei",4,["shengteng","yuansu"]]},"hs_enzoth":{"name":"恩佐斯","attr":["male","qun",4,["mengye"]]},"hs_walian":{"name":"瓦里安","attr":["male","shu",4,["wzhanyi"]]},"hs_pengpeng":{"name":"砰砰博士","attr":["male","qun",4,["yindan"]]},"hs_yashaji":{"name":"亚煞极","attr":["male","qun",4,["ysjqisha"]]},"hs_tanghangu":{"name":"唐·汉古","attr":["male","shu",5,["zhongji"]]},"hs_aya":{"name":"艾雅","attr":["female","wu",3,["ayuling","qingzun"]]},"hs_barnes":{"name":"巴内斯","attr":["male","shu",4,["hsnitai"]]},"hs_kazhakusi":{"name":"卡扎库斯","attr":["male","shu",3,["lianjin"]]},"hs_shaku":{"name":"沙库尔","attr":["male","wei",3,["shouji"]]},"hs_laxiao":{"name":"拉希奥","attr":["male","shu",3,["guimou","yingxi","longyi"]]},"hs_mojinbaozi":{"name":"魔晶孢子","attr":["male","wei",3,["jingcu","shengzhang"]]},"hs_shuiwenxuejia":{"name":"水文学家","attr":["male","wu",3,["kekao"]]},"hs_shizugui":{"name":"始祖龟","attr":["male","wu",3,["szbianshen"]]},"hs_hemite":{"name":"赫米特","attr":["male","wu",6,["zhuilie"]]},"hs_laila":{"name":"莱拉","attr":["male","wu",3,["lieyang"]]},"hs_selajin":{"name":"瑟拉金","attr":["male","shu",3,["qianfu","shimo"]]},"hs_bannabusi":{"name":"班纳布斯","attr":["male","wu",14,["qingtian"]]},"hs_amala":{"name":"阿玛拉","attr":["female","wu",3,["azaowu","shouwang"]]},"hs_yinggencao":{"name":"萤根草","attr":["male","wu",3,["lieqi"]]},"hs_zhihuanhua":{"name":"致幻花","attr":["female","wei",3,["huanjue"]]},"hs_shirencao":{"name":"食人草","attr":["male","wu",3,["srjici"]]},"hs_kaituozhe":{"name":"开拓者","attr":["female","wu",3,["tansuo","yinzong"]]},"hs_fachaotuteng":{"name":"法潮图腾","attr":["male","wei",3,["xiyong"]]},"hs_huolituteng":{"name":"活力图腾","attr":["male","wei",3,["hllingxi"]]},"hs_manyututeng":{"name":"蛮鱼图腾","attr":["male","wu",3,["zhaochao"]]},"hs_tgolem":{"name":"图腾魔像","attr":["male","wu",4,["xinwuyan","guozaix"]]},"hs_heifengqishi":{"name":"黑锋骑士","attr":["male","qun",4,["hstianqi"]]},"hs_yangyanwageli":{"name":"阳焰瓦格里","attr":["female","qun",3,["hspuzhao","hsyanxin"]]},"hs_aiqinvyao":{"name":"哀泣女妖","attr":["famale","qun",4,["nsaiqi","nsbeiming"]]},"hs_yelinlonghou":{"name":"夜鳞龙后","attr":["female","qun",4,["ylyuchu"]]},"hs_yelinchulong":{"name":"雏龙","attr":["male","qun",1,[],["unseen"]]},"hs_ashamoer":{"name":"阿莎摩尔","attr":["female","wei",3,["asyouzhang"]]},"hs_fengjianhuanfengzhe":{"name":"风剪唤风者","attr":["male","wei",3,["tuteng","huanfeng"]]},"hs_taisi":{"name":"苔丝","attr":["female","wei",3,["hsxingyi","hshuanling"]]},"hs_hajiasha":{"name":"哈加莎","attr":["female","wu",3,["zhoujiang","muyin"]]},"hs_tuoqi":{"name":"托奇","attr":["female","shu",3,["tqchuanyue"]]},"hs_siwangxianzhi":{"name":"死亡先知","attr":["male","wei",3,["hualing","yibian"]]},"hs_xukongzhiying":{"name":"虚空之影","attr":["female","qun",3,["wxuying"]]},"hs_duyaxinshi":{"name":"渡鸦信使","attr":["male","wei",3,["hshuanyu"]]}}},"swd":{"name":"轩辕剑","skill":{"daofa":{"name":"道法","script":"{trigger: {global: \"damageAfter\",},check: function (event,player){\n\t\t\t\t\treturn event.source&&get.attitude(player,event.source)<0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source!=player&&event.source.countCards('he');\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\ttrigger.source.chooseToDiscard('he',true);\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.5\",},}","info":"每当有一名其他角色造成伤害，你可以令其弃置一张牌"},"xielv":{"name":"谐率","script":"{trigger: {player: \"phaseDiscardEnd\",},filter: function (event,player){\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tif(cards.length<2) return false;\n\t\t\t\t\tvar color=get.color(cards[0]);\n\t\t\t\t\tfor(var i=1;i<cards.length;i++){\n\t\t\t\t\t\tif(get.color(cards[i])!=color) return false;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.isDamaged()) return true;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('j');\n\t\t\t\t\t});\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.isDamaged()) return true;\n\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\tif(current.countCards('j')) return get.sgn(get.attitude(player,current));\n\t\t\t\t\t})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tevent.targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('j');\n\t\t\t\t\t});\n\t\t\t\t\tevent.targets.sortBySeat();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar current=event.targets.shift();\n\t\t\t\t\t\tvar js=current.getCards('j');\n\t\t\t\t\t\tif(js.length){\n\t\t\t\t\t\t\tcurrent.discard(js);\n\t\t\t\t\t\t\tplayer.line(current,'green');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"弃牌阶段结束后，若你的所有手牌（至少两张）颜色均相同，你可以展示所有手牌，然后回复一点体力并弃置场上的所有判定牌"},"hujing":{"name":"壶境","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.discardPile('lianyaohu')?true:false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar card=get.discardPile('lianyaohu');\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tplayer.equip(card);\n\t\t\t\t\t\tplayer.$gain2(card);\n\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t}\n\t\t\t\t},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.getEquip('lianyaohu')) return num+2;\n\t\t\t\t\t},},}","info":"锁定技，准备阶段，若弃牌堆中有炼妖壶，你装备之；当你的装备区内有炼妖壶时，你的手牌上限+2"},"songci":{"name":"颂词","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(!player.storage.songci) return true;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !player.storage.songci.contains(current);\n\t\t\t\t\t});\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.songci) player.storage.songci=[];\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn (!player.storage.songci||!player.storage.songci.contains(target));\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(target.countCards('h')>target.hp){\n\t\t\t\t\t\ttarget.chooseToDiscard(2,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.storage.songci) player.storage.songci=[];\n\t\t\t\t\tplayer.storage.songci.push(target);\n\t\t\t\t\tplayer.storage.songci.sortBySeat();\n\t\t\t\t\tplayer.markSkill('songci');\n\t\t\t\t},intro: {content: \"已对$发动过〖颂词〗\",},ai: {order: \"7\",threaten: \"1.6\",expose: \"0.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.countCards('h')<=target.hp){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target.countCards('h')>target.hp){\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},group: \"songci_draw\",}","info":"①出牌阶段，你可以选择一名未以此法选择过的角色。若其手牌数：大于其体力值，其弃置两张牌；不小于其体力值，其摸两张牌。②弃牌阶段结束时，若你已对场上所有存活角色发动过〖颂词①〗，则你摸一张牌。"},"anlianying":{"name":"连营","script":"{trigger: {player: \"loseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='guohe'||card.name=='liuxinghuoyu') return 0.5;\n\t\t\t\t\t\t},},noh: \"true\",},}","info":"每当你失去最后一张手牌，可摸两张牌"},"jiying":{"name":"疾鹰","script":"{mod: {targetInRange: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\t},},}","info":"锁定技，你使用杀无视距离"},"liaoyuan":{"name":"燎原","script":"{trigger: {player: \"shaBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(get.itemtype(event.cards)!='cards') return false;\n\t\t\t\t\treturn player.countCards('he',{suit:get.suit(event.cards)})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.storage.liaoyuan=0;\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tevent.cards=[];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar suit=get.suit(trigger.cards);\n\t\t\t\t\tevent.suit=suit;\n\t\t\t\t\tplayer.chooseCard('he',get.prompt('liaoyuan'),function(card,player){\n\t\t\t\t\t\treturn get.suit(card)==suit&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t}).ai=function(card){\n\t\t\t\t\t\tif(get.attitude(player,trigger.target)>=0) return 0;\n\t\t\t\t\t\tif(get.effect(trigger.target,{name:'sha'},player,player)>0){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(event.num==0){\n\t\t\t\t\t\t\tplayer.logSkill('liaoyuan');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\tif(player.countCards('he',{suit:event.suit})>1&&!get.is.altered('liaoyuan')){\n\t\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.num){\n\t\t\t\t\t\tvar next=trigger.target.chooseToRespond({name:'shan'},'请打出一张闪响应燎原');\n\t\t\t\t\t\tnext.ai=get.unuseful2;\n\t\t\t\t\t\tif(event.num>1) next.set('prompt2','共需额外打出'+event.num+'张闪');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tevent.goto(3);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t\t\tplayer.storage.liaoyuan=event.num;\n\t\t\t\t\t}\n\t\t\t\t},group: [\"liaoyuan2\",\"liaoyuan3\"],}","info":"每当你使用一张杀指定目标后，你可以弃置任意张与此杀花色相同的牌，若如此做，目标需额外打出等量的闪，每少打出一张闪，此杀的伤害+1"},"yishan":{"name":"异闪","script":"{group: \"yishan2\",notemp: \"true\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\tvar content=player.storage.yishan;\n\t\t\t\t\tfor(var i=0;i<content.length;i++){\n\t\t\t\t\t\tif(get.owner(content[i])!=player&&get.position(content[i])!='s'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.yishan=[];\n\t\t\t\t\tgame.addVideo('storage',player,['yishan',get.cardsInfo(player.storage.yishan),'cards']);\n\t\t\t\t},mark: \"true\",content: function (){\n\t\t\t\t\tfor(var i=0;i<player.storage.yishan.length;i++){\n\t\t\t\t\t\tif(get.owner(player.storage.yishan[i])==player||get.position(player.storage.yishan[i])=='s'){\n\t\t\t\t\t\t\tplayer.storage.yishan.splice(i,1);\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=player.storage.yishan.splice(0,2);\n\t\t\t\t\tplayer.gain(cards,'log');\n\t\t\t\t\tplayer.$gain2(cards);\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(target.storage.yishan.length==0) return 1.5;\n\t\t\t\t\t\t\t\tif(target.storage.yishan[0]=='tao'||target.storage.yishan[1]=='tao'){\n\t\t\t\t\t\t\t\t\treturn [0,2];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn [1,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},intro: {nocount: \"true\",onunmark: function (content,player){\n\t\t\t\t\t\tplayer.storage.yishan.length=0;\n\t\t\t\t\t},mark: function (dialog,content,player){\n\t\t\t\t\t\tdialog.add('<div class=\"text center\">最近失去的牌</div>');\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tfor(var i=0;i<content.length;i++){\n\t\t\t\t\t\t\tif(get.owner(content[i])!=player&&get.position(content[i])!='s'){\n\t\t\t\t\t\t\t\tcards.push(content[i]);\n\t\t\t\t\t\t\t\tif(cards.length>=4) break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\tdialog.add(cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdialog.add('（无）');\n\t\t\t\t\t\t}\n\t\t\t\t\t},content: function (content,player){\n\t\t\t\t\t\tvar str='最近失去的牌：';\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tfor(var i=0;i<content.length;i++){\n\t\t\t\t\t\t\tif(get.owner(content[i])!=player&&get.position(content[i])!='s'){\n\t\t\t\t\t\t\t\tcards.push(content[i]);\n\t\t\t\t\t\t\t\tif(cards.length>=4) break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\tstr+=get.translation(cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr+='无';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},},}","info":"每当你受到一次伤害，你可以重新获得最近失去的两张牌"},"yueren":{"name":"月刃","script":"{trigger: {player: \"shaBegin\",},filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('yueren2');\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge(function(){\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\tplayer.addTempSkill('yueren2');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(get.color(result.card)=='black'){\n\t\t\t\t\t\tif(trigger.target.countCards('he')){\n\t\t\t\t\t\t\tplayer.discardPlayerCard(true,trigger.target,'he');\n\t\t\t\t\t\t\t// trigger.target.discard(trigger.target.getCards('he').randomGet());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.cards&&trigger.cards.length){\n\t\t\t\t\t\tplayer.gain(trigger.cards);\n\t\t\t\t\t\tplayer.$gain2(trigger.cards);\n\t\t\t\t\t\tgame.log(player,'收回了',trigger.cards);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你使用一张杀，可以进行一次判定，若结果为黑色，你弃置目标一张牌，若结果为红色，你将此杀收回，每回合限发动一次"},"shangshi":{"name":"伤逝","script":"{audio: \"2\",trigger: {player: [\"loseAfter\",\"changeHp\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<player.getDamagedHp();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(player.getDamagedHp()-player.countCards('h'));\n\t\t\t\t},ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'&&player.maxHp-player.hp<player.countCards('h')){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"当你的手牌数小于X时，你可以将手牌摸至X张（X为你已损失的体力值）"},"huanjian":{"name":"幻箭","script":"{enable: \"phaseUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},viewAs: {name: \"bingpotong\",},position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{color:'black'})>0;\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'black'})) return false;\n\t\t\t\t},prompt: \"将一张黑色牌当作冰魄针使用\",check: function (card){return 5-get.value(card)},ai: {threaten: \"1.1\",basic: {order: \"2\",value: [5,1],useful: \"1\",},result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h')<=Math.min(5,Math.max(2,player.hp))&&_status.event.name=='chooseToUse'){\n\t\t\t\t\t\t\t\tif(typeof _status.event.filterCard=='function'&&\n\t\t\t\t\t\t\t\t\t_status.event.filterCard({name:'bingpotong'})){\n\t\t\t\t\t\t\t\t\treturn -10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(_status.event.skill){\n\t\t\t\t\t\t\t\t\tvar viewAs=get.info(_status.event.skill).viewAs;\n\t\t\t\t\t\t\t\t\tif(viewAs=='bingpotong') return -10;\n\t\t\t\t\t\t\t\t\tif(viewAs&&viewAs.name=='bingpotong') return -10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {loseHp: \"1\",},},}","info":"出牌阶段，你可以将一张黑色牌当作冰魄针使用"},"lingwu":{"name":"灵舞","script":"{trigger: {player: \"phaseAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countUsed()>=player.hp&&event.skill!='lingwu';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t},ai: {order: \"-10\",result: {target: \"2\",},threaten: \"1.5\",},}","info":"回合结束后，若你在本回合内使用的牌数不少于当前体力值，你可以进行一个额外的回合（不可重复发动）"},"minjing":{"name":"明镜","script":"{trigger: {player: \"damageBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.getEquip(2)) return false;\n\t\t\t\t\treturn lib.skill.guangshatianyi.filter(event,player);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num--;\n\t\t\t\t},ai: {threaten: \"0.8\",},}","info":"若你没有防具牌，你视为装备了光纱天衣"},"duishi":{"name":"对诗","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&!player.hasSkill('duishi2');\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h')>0&&!target.hasSkill('duishi3');\n\t\t\t\t},filterCard: \"true\",check: function (card){return 8-get.value(card)},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar suit=get.suit(cards[0]);\n\t\t\t\t\ttarget.chooseToDiscard({suit:suit},'h','对诗：弃置一张'+get.translation(suit)+\n\t\t\t\t\t\t'牌，或令'+get.translation(player)+'获得你一张牌').ai=function(card){\n\t\t\t\t\t\tif(get.attitude(target,player)>0) return 0;\n\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t}\n\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.addTempSkill('duishi3');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gainPlayerCard(target,'he',true);\n\t\t\t\t\t\tplayer.addTempSkill('duishi2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",threaten: \"1.5\",result: {target: \"-2\",player: \"0.5\",},expose: \"0.2\",},}","info":"出牌阶段，你可以弃置一张手牌，并指定一名有手牌的角色选择一项：1)弃置一张与之花色相同的手牌，本回合内对诗不能再次指定其为目标，2)令你获得其一张牌，对诗失效直到回合结束"},"biyue":{"name":"闭月","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"结束阶段，你可以摸一张牌。"},"zhenlie":{"name":"贞烈","script":"{audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.card&&(event.card.name=='sha'||get.type(event.card)=='trick');\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tif(event.getParent().excluded.contains(player)) return false;\n\t\t\t\t\tif(get.attitude(player,event.player)>0){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif(get.tag(event.card,'respondSha')){\n\t\t\t\t\t\tif(player.countCards('h',{name:'sha'})==0){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(get.tag(event.card,'respondShan')){\n\t\t\t\t\t\tif(player.countCards('h',{name:'shan'})==0){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(get.tag(event.card,'damage')){\n\t\t\t\t\t\tif(event.card.name=='shuiyanqijunx') return player.countCards('e')<2;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t//if(player.countCards('h')<2) return true;\n\t\t\t\t\t}\n\t\t\t\t\telse if((event.card.name=='shunshou'||(event.card.name=='zhujinqiyuan'&&(event.card.yingbian||get.distance(event.player,player)<0)))&&player.hp>2){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},trigger: {target: \"useCardToTargeted\",},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(trigger.player.countCards('he')){\n\t\t\t\t\t\tplayer.discardPlayerCard(trigger.player,'he',true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"当你成为其他角色使用【杀】或普通锦囊牌的目标后，你可以失去一点体力并令此牌对你无效，然后弃置对方一张牌。"},"duijue":{"name":"对决","script":"{enable: \"phaseUse\",mark: \"true\",unique: \"true\",forceunique: \"true\",skillAnimation: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.skill) return false;\n\t\t\t\t\treturn !player.storage.duijue;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hp<=1) return false;\n\t\t\t\t\t// if(get.mode()=='identity'&&_status.mode=='zhong'&&game.zhu&&!game.zhu.isZhu){\n\t\t\t\t\t// \treturn target==game.zhong;\n\t\t\t\t\t// }\n\t\t\t\t\t// if(target.identity=='zhu'||get.is.jun(target)) return false;\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.duijue=true;\n\t\t\t\t\tplayer.awakenSkill('duijue');\n\t\t\t\t\tvar evt=_status.event;\n\t\t\t\t\tfor(var i=0;i<10;i++){\n\t\t\t\t\t\tif(evt&&evt.getParent){\n\t\t\t\t\t\t\tevt=evt.getParent();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(evt.name=='phaseUse'){\n\t\t\t\t\t\t\tevt.skipped=true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.duijue3=target;\n\t\t\t\t\tplayer.addSkill('duijue3');\n\t\t\t\t},duijueLoop: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttargets[0].phase('duijue');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tui.duijueLoop.round--;\n\t\t\t\t\tui.duijueLoop.innerHTML=get.cnNumber(ui.duijueLoop.round)+'回合';\n\t\t\t\t\tif(targets[0].isDead()||targets[1].isDead()||ui.duijueLoop.round==0){\n\t\t\t\t\t\tevent.goto(3);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttargets[1].phase('duijue');\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tui.duijueLoop.round--;\n\t\t\t\t\tui.duijueLoop.innerHTML=get.cnNumber(ui.duijueLoop.round)+'回合';\n\t\t\t\t\tif(targets[0].isDead()||targets[1].isDead()||ui.duijueLoop.round==0){\n\t\t\t\t\t\tevent.goto(3);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tfor(var i=0;i<event.backup.length;i++){\n\t\t\t\t\t\tevent.backup[i].in('duijue');\n\t\t\t\t\t}\n\t\t\t\t\tif(ui.duijueLoop){\n\t\t\t\t\t\tui.duijueLoop.remove();\n\t\t\t\t\t\tdelete ui.duijueLoop;\n\t\t\t\t\t}\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.duijue=false;\n\t\t\t\t},intro: {content: \"limited\",},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp==1&&player.hp>=3) return -1;\n\t\t\t\t\t\t\tif(target.hp<player.hp&&target.countCards('h')<=player.countCards('h')) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以指定一名体力值大于1的其他角色，你结束出牌阶段，并在回合结束后将所有其他角色移出游戏，然后该角色与你轮流进行回合，直到有一方死亡或一共进行六个回合为止"},"pozhou":{"name":"破咒","script":"{unique: \"true\",trigger: {player: \"damageEnd\",},forced: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.pozhou=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(typeof trigger.num=='number'){\n\t\t\t\t\t\tplayer.storage.pozhou+=trigger.num;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.pozhou){\n\t\t\t\t\t\tplayer.markSkill('pozhou');\n\t\t\t\t\t}\n\t\t\t\t\tgame.addVideo('storage',player,['pozhou',player.storage.pozhou]);\n\t\t\t\t},intro: {content: \"mark\",},group: \"pozhou2\",ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];\n\t\t\t\t\t\t\t\tif(player.hp>=4) return [1,1.5];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,1];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，你获得一枚破咒标记。出牌阶段，你可以指定任意名其他角色并弃置等量的破咒标记，令目标的非锁定技失效直到其下一回合结束"},"huajian":{"name":"化剑","script":"{trigger: {player: \"phaseUseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('huajian')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('huajian');\n\t\t\t\t\t\tplayer.useCard({name:'sha'},result.cards,result.targets,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"出牌阶段结束时，你可以将一张牌当作杀对任意一名角色使用"},"xuanyuan":{"name":"轩辕","script":"{trigger: {player: \"phaseEnd\",},unique: \"true\",forceunique: \"true\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('he',{suit:'spade'})) return false;\n\t\t\t\t\tfor(var i=0;i<ui.discardPile.childElementCount;i++){\n\t\t\t\t\t\tif(ui.discardPile.childNodes[i].name=='xuanyuanjian') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard('he',{suit:'spade'},get.prompt2('xuanyuan')).set('ai',function(card){\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card;\n\t\t\t\t\tfor(var i=0;i<ui.discardPile.childElementCount;i++){\n\t\t\t\t\t\tif(ui.discardPile.childNodes[i].name=='xuanyuanjian'){\n\t\t\t\t\t\t\tcard=ui.discardPile.childNodes[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tplayer.equip(card,true);\n\t\t\t\t\t}\n\t\t\t\t},global: \"xuanyuan_ai\",}","info":"锁定技，你无视【轩辕剑】的装备条件及流失体力的效果；结束阶段，你可以弃置一张黑桃牌从弃牌堆中获得【轩辕剑】并装备之"},"youyin":{"name":"游吟","script":"{trigger: {global: \"discardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(player.countCards('h')>=5) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards[i])!='basic'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"每当有其他角色弃置卡牌时，若其中有非基本牌且你的手牌数不超过5，你可以摸一张牌"},"yihua":{"name":"移花","script":"{trigger: {target: \"useCardToBefore\",},popup: \"false\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.addedTargets) return false;\n\t\t\t\t\t// return event.card&&get.color(event.card)=='red'&&event.player!=player;\n\t\t\t\t\treturn event.targets.length==1&&event.player!=player&&player.countCards('h')>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('yihua',trigger.player),2);\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(get.effect(player,trigger.card)<0){\n\t\t\t\t\t\t\tif(card.name=='liuxinghuoyu') return 7-get.value(card);\n\t\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.prompt2='反弹'+get.translation(trigger.player)+'的'+get.translation(trigger.card);\n\t\t\t\t\tnext.logSkill=['yihua',trigger.player];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t// player.discard(result.cards);\n\t\t\t\t\t\ttrigger.target=trigger.player;\n\t\t\t\t\t\ttrigger.player=player;\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.trigger('useCardToBefore');\n\t\t\t\t\t}\n\t\t\t\t\t// \"step 2\"\n\t\t\t\t\t// if(result.bool){\n\t\t\t\t\t// \ttrigger.target=result.targets[0];\n\t\t\t\t\t// \ttrigger.untrigger;\n\t\t\t\t\t// \ttrigger.trigger('shaBefore');\n\t\t\t\t\t// \tgame.delay();\n\t\t\t\t\t// }\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.countCards('h')<=2){\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 2/(target.countCards('h')-1);\n\t\t\t\t\t},},}","info":"每当你成为其他角色的某张卡牌的惟一目标时，你可以弃置两张手牌，将使用者与目标对调"},"nlianji":{"name":"连计","script":"{audio: \"lianji\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(!ui.selected.targets.length) return target.countCards('h')>0;\n\t\t\t\t\treturn ui.selected.targets[0].canCompare(target);\n\t\t\t\t},selectTarget: \"2\",multitarget: \"true\",multiline: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},prepare: \"throw\",discard: \"false\",filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(targets[0].canCompare(targets[1])){\n\t\t\t\t\t\ttargets[0].chooseToCompare(targets[1]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttargets[0].gain(cards,'log');\n\t\t\t\t\t\ttargets[0].$gain2(cards);\n\t\t\t\t\t\ttargets[1].damage(targets[0]);\n\t\t\t\t\t}\n\t\t\t\t\telse if(!result.tie){\n\t\t\t\t\t\ttargets[1].gain(cards,'log');\n\t\t\t\t\t\ttargets[1].$gain2(cards);\n\t\t\t\t\t\ttargets[0].damage(targets[1]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",threaten: \"2\",order: \"9\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以选择一张手牌并指定两名角色进行拼点。若拼点结果不为平局，拼点赢的角色获得此牌，并对没赢的角色造成一点伤害。"},"touxi":{"name":"偷袭","script":"{trigger: {global: \"phaseEnd\",},check: function (event,player){\n\t\t\t\t\tif(get.damageEffect(event.player,player,player,'thunder')>0){\n\t\t\t\t\t\tif(get.is.altered('touxi')&&get.attitude(player,event.player)<0&&player.countCards('he')){\n\t\t\t\t\t\t\tif(event.player.hp==1&&player.hp>1){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&!player.hasSkill('touxi2')&&event.player.isAlive();\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tif(get.color(card)=='black') return 1;\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.damage('thunder');\n\t\t\t\t\t\tplayer.addSkill('touxi2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.countCards('he')){\n\t\t\t\t\t\t\tvar att=get.attitude(trigger.player,player);\n\t\t\t\t\t\t\ttrigger.player[get.is.altered('touxi')?'gainPlayerCard':'discardPlayerCard'](player,'he',function(button){\n\t\t\t\t\t\t\t\tif(att>0) return 0;\n\t\t\t\t\t\t\t\treturn get.buttonValue(button);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",threaten: \"1.2\",},}","info":"在其他角色的结束阶段，你可以进行一次判定，若结果为黑色，你对其造成一点雷电伤害，且直到下一回合开始不能再次发动偷袭；若结果为红色，对方可以弃置你的一张牌"},"gtiandao":{"name":"天道","script":"{audio: \"true\",trigger: {global: \"judge\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，'+get.prompt('gtiandao'),'he').ai=function(card){\n\t\t\t\t\t\tvar trigger=_status.event.parent._trigger;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(trigger.player.judging[0]);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0||result==0) return 0;\n\t\t\t\t\t\tif(attitude>0){\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -result;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.respond(result.cards,'highlight');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('gtiandao');\n\t\t\t\t\t\tplayer.$gain2(trigger.player.judging[0]);\n\t\t\t\t\t\tplayer.gain(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.position.appendChild(result.cards[0]);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t},ai: {tag: {rejudge: \"1\",},threaten: \"1.5\",},}","info":"任意一名角色的判定生效前，你可以打出一张牌替换之"},"gxianyin":{"name":"仙音","script":"{enable: \"phaseUse\",usable: \"1\",delay: \"0\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar max=0;\n\t\t\t\t\tvar choice='club';\n\t\t\t\t\tvar map={\n\t\t\t\t\t\tclub:0,\n\t\t\t\t\t\theart:0,\n\t\t\t\t\t\tdiamond:0,\n\t\t\t\t\t\tspade:0\n\t\t\t\t\t};\n\t\t\t\t\tfor(var i in map){\n\t\t\t\t\t\tvar hs=player.getCards('h',{suit:i});\n\t\t\t\t\t\tfor(var j=0;j<hs.length;j++){\n\t\t\t\t\t\t\tvar val=get.value(hs[j],player,'raw');\n\t\t\t\t\t\t\tif(val>7){\n\t\t\t\t\t\t\t\tmap[i]=0;break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(val<=5){\n\t\t\t\t\t\t\t\tmap[i]++;\n\t\t\t\t\t\t\t\tif(val<=4){\n\t\t\t\t\t\t\t\t\tmap[i]+=0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(val<0){\n\t\t\t\t\t\t\t\t\tmap[i]+=2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(map[i]>max){\n\t\t\t\t\t\t\tchoice=i;\n\t\t\t\t\t\t\tmax=map[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar controls=['heart2','spade2','diamond2','club2'];\n\t\t\t\t\tfor(var i=0;i<controls.length;i++){\n\t\t\t\t\t\tif(!player.countCards('h',{suit:controls[i].slice(0,controls[i].length-1)})){\n\t\t\t\t\t\t\tcontrols.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!controls.contains(choice)){\n\t\t\t\t\t\tchoice=controls.randomGet();\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl(controls,function(){\n\t\t\t\t\t\treturn choice;\n\t\t\t\t\t}).set('prompt','移去一种花色的手牌');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar hs=player.getCards('h',{suit:result.control.slice(0,result.control.length-1)});\n\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\tplayer.lose(hs,ui.discardPile)._triggered=null;\n\t\t\t\t\t\tplayer.$throw(hs);\n\t\t\t\t\t\tgame.log(player,'移去了',hs);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar controls=['heart2','spade2','diamond2','club2'];\n\t\t\t\t\tcontrols.remove(result.control);\n\t\t\t\t\tvar rand=Math.random();\n\t\t\t\t\tvar list=controls.slice(0);\n\t\t\t\t\tif(player.hasShan()){\n\t\t\t\t\t\tlist.remove('diamond2')\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl(controls,function(){\n\t\t\t\t\t\tif(!player.hasShan()&&controls.contains('diamond2')){\n\t\t\t\t\t\t\treturn 'diamond2';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rand<0.5){\n\t\t\t\t\t\t\treturn list[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rand<0.8){\n\t\t\t\t\t\t\treturn list[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length>=3){\n\t\t\t\t\t\t\treturn controls[2];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn controls[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('prompt','选择一个花色从牌堆中获得'+hs.length+'张该花色的牌');\n\t\t\t\t\tevent.num=hs.length;\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control){\n\t\t\t\t\t\tvar suit=result.control.slice(0,result.control.length-1);\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tfor(var i=0;i<event.num;i++){\n\t\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\t\treturn get.suit(card)==suit;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tui.special.appendChild(card);\n\t\t\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\tplayer.directgain(cards);\n\t\t\t\t\t\t\tplayer.$draw(cards.length);\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t\tgame.log(player,'获得了'+get.cnNumber(cards.length)+'张','#y'+get.translation(suit+'2')+'牌');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7\",result: {player: function (player){\n\t\t\t\t\t\t\tvar list=['club','heart','diamond','spade'];\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tvar hs=player.getCards('h',{suit:list[i]});\n\t\t\t\t\t\t\t\tvar bool=false;\n\t\t\t\t\t\t\t\tfor(var j=0;j<hs.length;j++){\n\t\t\t\t\t\t\t\t\tvar val=get.value(hs[j],player);\n\t\t\t\t\t\t\t\t\tif(val>7){\n\t\t\t\t\t\t\t\t\t\tbool=false;break;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(val<=4){\n\t\t\t\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(bool){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择一种花色，将你的手牌中该花色的牌移至弃牌堆，然后选择另一种花色，从牌堆中获得等量的该花色的牌"},"wangchen":{"name":"忘尘","script":"{trigger: {player: \"phaseDiscardEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\t// if(!get.is.altered('wangchen')) return true;\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.type(event.cards[i])=='basic') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('wangchen'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t// if(get.is.altered('wangchen')){\n\t\t\t\t\t\t// \treturn -get.attitude(player,target)/Math.sqrt(target.hp);\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tif(target.hasSkillTag('noturn')) return 0;\n\t\t\t\t\t\treturn get.attitude(player,target)*(target.isTurnedOver()?1:-1);\n\t\t\t\t\t\t// return -get.attitude(player,target)*get.threaten(target,player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0]\n\t\t\t\t\t\tplayer.logSkill('wangchen',target);\n\t\t\t\t\t\t// target.out('wangchen');\n\t\t\t\t\t\t// if(!player.storage.wangchen){\n\t\t\t\t\t\t//     player.storage.wangchen=[];\n\t\t\t\t\t\t// }\n\t\t\t\t\t\t// player.storage.wangchen.push(target);\n\t\t\t\t\t\ttarget.turnOver();\n\t\t\t\t\t\tif(get.is.altered('wangchen')){\n\t\t\t\t\t\t\ttarget.changeHujia();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.5\",threaten: \"2\",},}","info":"弃牌阶段结束时，若你于此阶段弃置了基本牌，你可以令一名角色翻面"},"swdliuhong":{"name":"流虹","script":"{trigger: {player: [\"useCard\"],},frequent: \"true\",filter: function (event){\n\t\t\t\t\treturn event.card&&event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"每当你使用一张杀，可以摸一张牌"},"poyue":{"name":"破月","script":"{mod: {targetInRange: function (card,player){\n\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='black') return true;\n\t\t\t\t\t},cardUsable: function (card){\n\t\t\t\t\t\tif(get.is.altered('poyue')) return;\n\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return Infinity;\n\t\t\t\t\t},},trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\tif(get.is.altered('poyue')) return false;\n\t\t\t\t\treturn event.card.name=='sha'&&get.color(event.card)=='red';\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tif(player.stat[player.stat.length-1].card.sha>0){\n\t\t\t\t\t\tplayer.stat[player.stat.length-1].card.sha--;\n\t\t\t\t\t}\n\t\t\t\t},group: \"poyue2\",}","info":"锁定技，你的黑杀无视距离，红色杀不计入回合内的出杀限制且不可闪避"},"niepan":{"name":"涅槃","script":"{audio: \"2\",audioname: [\"re_pangtong\"],unique: \"true\",enable: \"chooseToUse\",mark: \"true\",limited: \"true\",skillAnimation: \"true\",animationStr: \"涅盘\",animationColor: \"fire\",init: function (player){\n\t\t\t\t\tplayer.storage.niepan=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.niepan) return false;\n\t\t\t\t\tif(event.type=='dying'){\n\t\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.parent.name=='phaseUse'){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('niepan');\n\t\t\t\t\tplayer.storage.niepan=true;\n\t\t\t\t\tplayer.discard(player.getCards('hej'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.link(false);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.turnOver(false);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(player.hp<3){\n\t\t\t\t\t\tplayer.recover(3-player.hp);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"0.5\",skillTagFilter: function (player,tag,target){\n\t\t\t\t\t\tif(player!=target||player.storage.niepan) return false;\n\t\t\t\t\t},save: \"true\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.hp<=0) return 10;\n\t\t\t\t\t\t\tif(player.hp<=1&&player.countCards('he')<=1) return 10;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.storage.niepan) return 0.6;\n\t\t\t\t\t},},intro: {content: \"limited\",},}","info":"限定技，出牌阶段或当你处于濒死状态时，你可以弃置你区域内的所有牌并复原你的武将牌，然后摸三张牌并将体力回复至3点。"},"wushuang":{"name":"无双","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"re_lvbu\",\"shen_lvbu\"],forced: \"true\",locked: \"true\",group: [\"wushuang1\",\"wushuang2\"],}","info":"锁定技，当你使用【杀】或【决斗】指定目标后，你令此牌需要依次使用或打出两张【闪】或【杀】响应。"},"xielei":{"name":"挟雷","script":"{trigger: {player: [\"useCard\",\"respondAfter\"],},direct: \"true\",filter: function (event){\n\t\t\t\t\treturn game.countPlayer()>2&&event.card&&event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt('xielei'),\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\t\tif(trigger.name=='respond'){\n\t\t\t\t\t\t\t\treturn trigger.source!=target;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn !trigger.targets.contains(target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player,'thunder');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool&&!event.isMine()){\n\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xielei',result.targets,'thunder');\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tresult.targets[0].damage('thunder');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",threaten: \"1.6\",},}","info":"每当你使用或打出一张杀，可以弃置一张牌并对目标以外的一名角色造成一点雷电伤害"},"kunlunjing":{"name":"幻镜","script":"{unique: \"true\",group: [\"kunlunjing1\",\"kunlunjing2\"],video: function (player,data){\n\t\t\t\t\tfor(var i in data){\n\t\t\t\t\t\tvar current=game.playerMap[i];\n\t\t\t\t\t\tcurrent.node.handcards1.innerHTML='';\n\t\t\t\t\t\tcurrent.node.handcards2.innerHTML='';\n\t\t\t\t\t\tcurrent.node.equips.innerHTML='';\n\t\t\t\t\t\tcurrent.node.judges.innerHTML='';\n\t\t\t\t\t\tcurrent.directgain(get.infoCards(data[i].h));\n\t\t\t\t\t\tvar es=get.infoCards(data[i].e);\n\t\t\t\t\t\tfor(var j=0;j<es.length;j++){\n\t\t\t\t\t\t\tcurrent.$equip(es[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar js=get.infoCards(data[i].j);\n\t\t\t\t\t\tfor(var j=0;j<js.length;j++){\n\t\t\t\t\t\t\tcurrent.node.judges.appendChild(js[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段，若你的体力值小于上回合结束时的体力值，你可以将场上所有牌还原到你上一回合结束时的位置"},"huanhun":{"name":"唤魂","script":"{trigger: {global: \"dying\",},priority: \"6\",filter: function (event,player){\n\t\t\t\t\tif(event.player.hp>0) return false;\n\t\t\t\t\tif(get.is.altered('huanhun')) return player.countCards('h',{color:'red'})>0;\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.is.altered('huanhun')?'h':'he',get.prompt2('huanhun',trigger.player),function(card){\n\t\t\t\t\t\tif(get.is.altered('huanhun')){\n\t\t\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tnext.logSkill=['huanhun',trigger.player];\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(card.name=='tao') return 0;\n\t\t\t\t\t\tif(get.attitude(player,trigger.player)>0){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t\ttrigger.player.judge(function(card){\n\t\t\t\t\t\t\treturn get.color(card)=='red'?1:0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.card.isInPile()){\n\t\t\t\t\t\ttrigger.player.gain(event.card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.6\",expose: \"0.2\",},}","info":"当一名角色进入濒死状态时，你可以弃置一张牌并令其进行一次判定，若结果为红色，其回复一点体力，否则其获得你弃置的牌"},"daixing":{"name":"代形","script":"{group: [\"daixing2\",\"daixing3\"],trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt2('daixing'),'he',[1,player.countCards('he')]);\n\t\t\t\t\tnext.logSkill='daixing';\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(ui.selected.cards.length>=2) return 0;\n\t\t\t\t\t\tif(ui.selected.cards.length==1){\n\t\t\t\t\t\t\tif(player.countCards('h')>player.hp){\n\t\t\t\t\t\t\t\treturn 3-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.changeHujia(result.cards.length);\n\t\t\t\t\t\tplayer.storage.daixing=result.cards.length;\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\t\tif(target.storage.daixing>1) return 0.1;\n\t\t\t\t\t\t\t\tif(target.storage.daixing==1) return 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1.5;\n\t\t\t\t\t\t},},},intro: {content: \"mark\",},}","info":"结束阶段，你可以弃置任意张牌并获得等量的护甲；这些护甲将在你的下个准备阶段消失"},"yinyue":{"name":"引月","script":"{trigger: {global: \"recoverAfter\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\t// if(get.is.altered('yinyue')){\n\t\t\t\t\t// \ttrigger.player.draw();\n\t\t\t\t\t// \tevent.finish();\n\t\t\t\t\t// }\n\t\t\t\t\t// else\n\t\t\t\t\tif(trigger.player!=player&&trigger.player.countCards('h')>=player.countCards('h')){\n\t\t\t\t\t\tgame.asyncDraw([trigger.player,player]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"每当有一名角色回复一次体力，你可以令其摸一张牌，若该角色不是你且你的手牌数不大于该角色，你也摸一张牌。"},"yunchou":{"name":"运筹","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h');\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\tif(get.is.altered('yunchou')){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(get.is.altered('yunchou')){\n\t\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar card=target.getCards('h').randomGet();\n\t\t\t\t\tif(!card){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.discard(card);\n\t\t\t\t\tif(get.color(card)==get.color(cards[0])){\n\t\t\t\t\t\tevent.bool=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.bool){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse if(player.countCards('he')){\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t}\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},ai: {order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('noh')) return 0;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"出牌阶段限一次，你可以弃置一张手牌，并弃置一名其他角色的一张手牌，若两张牌颜色相同，你摸一张牌，否则对方摸一张牌"},"gongxin":{"name":"攻心","script":"{audio: \"2\",audioname: [\"re_lvmeng\",\"gexuan\"],enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar cards=target.getCards('h');\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send(function(cards,id){\n\t\t\t\t\t\t\tui.create.dialog('攻心',cards).videoId=id;\n\t\t\t\t\t\t},cards,event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog=ui.create.dialog('攻心',cards);\n\t\t\t\t\tevent.dialog.videoId=event.videoId;\n\t\t\t\t\tif(!event.isMine()){\n\t\t\t\t\t\tevent.dialog.style.display='none';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton().set('filterButton',function(button){\n\t\t\t\t\t\treturn get.suit(button.link)=='heart';\n\t\t\t\t\t}).set('dialog',event.videoId);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\tvar func=function(card,id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\tif(dialog.buttons[i].link==card){\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('selectedx');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('unselectable');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send(func,event.card,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.isMine()){\n\t\t\t\t\t\t\tfunc(event.card,event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseControl('gongxin_discard','gongxin_top');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tif(result.control=='gongxin_top'){\n\t\t\t\t\t\tplayer.showCards(card,'置于牌堆顶');\n\t\t\t\t\t\ttarget.lose(card,ui.cardPile,'insert','visible');\n\t\t\t\t\t\tgame.log(player,'将',event.card,'置于牌堆顶');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.discard(card);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -target.countCards('h');\n\t\t\t\t\t\t},},order: \"10\",expose: \"0.4\",},}","info":"出牌阶段限一次，你可以观看一名其他角色的手牌，并可以展示其中一张红桃牌，然后将其弃置或置于牌堆顶。"},"jqimou":{"name":"奇谋","script":"{trigger: {player: \"damageEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseToUse('是否使用一张牌？');\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&_status.currentPhase!=target){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];\n\t\t\t\t\t\t\t\treturn [1,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你于回合外受到一次伤害，你可以摸一张牌，并可以使用一张牌"},"mojian":{"name":"墨剑","script":"{trigger: {player: \"shaBegin\",},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.target)>0) return true;\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttrigger.target.draw();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},}","info":"每当你使用杀并指定目标后，你可以令其摸一张牌，然后你回复一点体力"},"duanyue":{"name":"断月","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: {type: \"equip\",},check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 12-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 8-get.equipValue(card);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.damage();\n\t\t\t\t},ai: {order: \"9.5\",expose: \"0.2\",result: {player: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张装备牌，对一名其他角色造成一点伤害"},"tuzhen":{"name":"突阵","script":"{trigger: {source: \"damageAfter\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.isIn()&&event.player!=player&&event.player.hasCard(function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t});\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar hs=trigger.player.getCards('h',function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t});\n\t\t\t\t\tif(get.is.altered('tuzhen')){\n\t\t\t\t\t\ths=hs.randomGet();\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.player.discard(hs);\n\t\t\t\t},}","info":"当你造成一次伤害后，你可以弃置对方手牌中的非基本牌"},"huanxia":{"name":"幻霞","script":"{enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},position: \"he\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t},prompt: \"将一张红色牌当杀使用\",check: function (card){return 5-get.value(card)},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t},respondSha: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg!='use') return false;\n\t\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},group: [\"huanxia_expire\",\"huanxia_draw\",\"huanxia_gain\"],subSkill: {expire: {trigger: {source: \"damageAfter\",},forced: \"true\",popup: \"false\",filter: function (event){\n\t\t\t\t\t\t\treturn event.parent.skill=='huanxia';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.huanxia=true;\n\t\t\t\t\t\t},sub: \"true\",},draw: {trigger: {player: \"shaAfter\",},forced: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\t\t\tif(trigger.parent.skill=='huanxia'){\n\t\t\t\t\t\t\t\tvar card=trigger.cards[0];\n\t\t\t\t\t\t\t\tif(get.itemtype(card)=='card'&&get.position(card)=='d'&&!player.storage.huanxia){\n\t\t\t\t\t\t\t\t\tui.special.appendChild(card);\n\t\t\t\t\t\t\t\t\tif(!player.storage.huanxia_draw){\n\t\t\t\t\t\t\t\t\t\tplayer.storage.huanxia_draw=[];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplayer.storage.huanxia_draw.push(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete player.storage.huanxia;\n\t\t\t\t\t\t},sub: \"true\",},gain: {trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.huanxia_draw;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.gain(player.storage.huanxia_draw,'gain2');\n\t\t\t\t\t\t\tdelete player.storage.huanxia_draw;\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"你可以将一张红色牌当作杀使用，若此杀未造成伤害，你在结束阶段收回此牌"},"jiefen":{"name":"解纷","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('h')>player.countCards('h');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.isMaxHandcard();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseCard('h',true,'交给'+get.translation(player)+'一张牌');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,target);\n\t\t\t\t\t\ttarget.$giveAuto(result.cards,player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h')<nh;\n\t\t\t\t\t})){\n\t\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\t\tforced:true,\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\treturn target.countCards('h')<nh;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\t\treturn get.attitude(player,target)/Math.sqrt(target.countCards('h')+1);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprompt:'交给一名手牌数少于你的角色一张牌'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tresult.targets[0].gain(result.cards,player);\n\t\t\t\t\t\tplayer.$giveAuto(result.cards,result.targets[0]);\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以令一名手牌数多于你的角色交给你一张牌，然后你交给一名手牌数少于你的角色一张牌"},"datong":{"name":"大同","script":"{trigger: {global: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar max=player.countCards('h');\n\t\t\t\t\tvar min=max;\n\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\tvar nh=current.countCards('h');\n\t\t\t\t\t\tif(nh>max){\n\t\t\t\t\t\t\tmax=nh;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(nh<min){\n\t\t\t\t\t\t\tmin=nh;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn max-min<=1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},}","info":"任意一名角色的结束阶段，若全场手牌数最多和最少的角色手牌数之差不超过1，你摸两张牌"},"cyxianjiang":{"name":"仙匠","script":"{trigger: {player: \"useCardToBegin\",},init: function (player){\n\t\t\t\t\tplayer.storage.cyxianjiang=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.target!=player&&event.targets&&event.targets.length==1){\n\t\t\t\t\t\tif(player.storage.cyxianjiang.contains(event.target)) return false;\n\t\t\t\t\t\treturn event.target.countCards('e',function(card){\n\t\t\t\t\t\t\treturn !player.countCards('he',card.name);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.choosePlayerCard(trigger.target,'e',get.prompt('cyxianjiang')).set('ai',get.buttonValue).set('filterButton',function(button){\n\t\t\t\t\t\treturn !player.countCards('he',button.link.name);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('cyxianjiang');\n\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\tplayer.equip(game.createCard(card),true);\n\t\t\t\t\t\tplayer.storage.cyxianjiang.add(trigger.target);\n\t\t\t\t\t}\n\t\t\t\t},group: \"cyxianjiang_clear\",subSkill: {clear: {trigger: {global: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.cyxianjiang.length=0;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"每当你使用一张牌指定惟一目标时，你可以复制对方装备区内的一张你没有的牌，并置入你的装备区，每回合对一名角色最多发动一次"},"cyqiaoxie":{"name":"巧械","script":"{trigger: {player: \"loseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.type=='use') return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards[i])=='equip') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tif(get.type(trigger.cards[i])=='equip'){\n\t\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar list=get.inpile('jiguan',function(name){\n\t\t\t\t\t\treturn player.hasUseTarget(name);\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tvar prompt=get.prompt('cyqiaoxie');\n\t\t\t\t\t\tif(event.num>1){\n\t\t\t\t\t\t\tprompt='###'+prompt+'###（剩余'+get.cnNumber(event.num)+'次）';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseVCardButton(list.randomGets(3),prompt);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseUseTarget(true,game.createCard(result.links[0][2]));\n\t\t\t\t\t}\n\t\t\t\t\tevent.num--;\n\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {noe: \"true\",reverseEquip: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip') return [1,3];\n\t\t\t\t\t\t},},},}","info":"每当你失去一张装备牌（使用除外），你可以随机观看三张机关牌，并使用其中一张"},"shengong":{"name":"神工","script":"{trigger: {player: [\"chooseToRespondBegin\"],},filter: function (event,player){\n\t\t\t\t\tif(event.responded) return false;\n\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\tif(event.filterCard({name:'shan'})){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.getEquip(2);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(event.filterCard({name:'sha'})){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.getEquip(1);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tif(trigger.filterCard({name:'shan'})){\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(players[i]!=player&&players[i].getEquip(2)) list.push(players[i].getEquip(2));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(trigger.filterCard({name:'sha'})){\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(players[i]!=player&&players[i].getEquip(1)) list.push(players[i].getEquip(1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar dialog=ui.create.dialog(get.prompt('shengong'),list);\n\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\tdialog.buttons[i].querySelector('.info').innerHTML=get.translation(get.owner(dialog.buttons[i].link));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton(dialog,function(button){\n\t\t\t\t\t\tvar player=get.owner(button.link);\n\t\t\t\t\t\tif(get.subtype(button.link)=='equip2'&&!player.hasShan()){\n\t\t\t\t\t\t\treturn 11-get.attitude(_status.event.player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.subtype(button.link)=='equip1'&&!player.hasSha()){\n\t\t\t\t\t\t\treturn 11-get.attitude(_status.event.player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 5-get.attitude(_status.event.player,player);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.responded=true;\n\t\t\t\t\t\ttrigger.result={bool:true,card:{}};\n\t\t\t\t\t\tif(get.subtype(result.buttons[0].link)=='equip1') trigger.result.card.name='sha';\n\t\t\t\t\t\telse trigger.result.card.name='shan';\n\t\t\t\t\t\tvar target=get.owner(result.buttons[0].link);\n\t\t\t\t\t\ttarget.discard(result.buttons[0].link);\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\tif(player.countCards('he')) player.chooseToDiscard(true,'he');\n\t\t\t\t\t\tplayer.logSkill('shengong',target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tvar he=target.countCards('he');\n\t\t\t\t\t\t\tif(!he) return 1.5;\n\t\t\t\t\t\t\tif(he<=1) return;\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=target&&current.getEquip(2)&&get.attitude(target,current)<=0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn 0.6/he;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.tag(card,'respondSha')){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=target&&current.getEquip(2)&&get.attitude(target,current)<=0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn 0.6/he;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你需要打出一张杀或闪时，你可以弃置一名其他角色装备区内的一张武器牌或防具牌，视为打出一张杀或闪，然后该角色摸一张牌，你弃一张牌"},"tianshu":{"name":"天书","script":"{unique: \"true\",enable: \"phaseUse\",filterCard: function (card){\n\t\t\t\t\treturn get.type(card,'trick')=='trick';\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:['trick','delay']})>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tvar names=[];\n\t\t\t\t\tif(target.name&&!target.isUnseen(0)) names.add(target.name);\n\t\t\t\t\tif(target.name1&&!target.isUnseen(0)) names.add(target.name1);\n\t\t\t\t\tif(target.name2&&!target.isUnseen(1)) names.add(target.name2);\n\t\t\t\t\tvar pss=player.getSkills();\n\t\t\t\t\tfor(var i=0;i<names.length;i++){\n\t\t\t\t\t\tvar info=lib.character[names[i]];\n\t\t\t\t\t\tif(info){\n\t\t\t\t\t\t\tvar skills=info[3];\n\t\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\t\tif(lib.translate[skills[j]+'_info']&&lib.skill[skills[j]]&&\n\t\t\t\t\t\t\t\t\t!lib.skill[skills[j]].unique&&!pss.contains(skills[j])){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},group: \"tianshu_remove\",createDialog: function (player,target,onlylist){\n\t\t\t\t\tvar names=[];\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(target.name&&!target.isUnseen(0)) names.add(target.name);\n\t\t\t\t\tif(target.name1&&!target.isUnseen(0)) names.add(target.name1);\n\t\t\t\t\tif(target.name2&&!target.isUnseen(1)) names.add(target.name2);\n\t\t\t\t\tvar pss=player.getSkills();\n\t\t\t\t\tfor(var i=0;i<names.length;i++){\n\t\t\t\t\t\tvar info=lib.character[names[i]];\n\t\t\t\t\t\tif(info){\n\t\t\t\t\t\t\tvar skills=info[3];\n\t\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\t\tif(lib.translate[skills[j]+'_info']&&lib.skill[skills[j]]&&\n\t\t\t\t\t\t\t\t\t!lib.skill[skills[j]].unique&&\n\t\t\t\t\t\t\t\t\t!pss.contains(skills[j])){\n\t\t\t\t\t\t\t\t\tlist.push(skills[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(onlylist) return list;\n\t\t\t\t\tvar dialog=ui.create.dialog('forcebutton');\n\t\t\t\t\tdialog.add('选择获得一项技能');\n\t\t\t\t\t_status.event.list=list;\n\t\t\t\t\tvar clickItem=function(){\n\t\t\t\t\t\t_status.event._result=this.link;\n\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t};\n\t\t\t\t\tfor(i=0;i<list.length;i++){\n\t\t\t\t\t\tif(lib.translate[list[i]+'_info']){\n\t\t\t\t\t\t\tvar translation=get.translation(list[i]);\n\t\t\t\t\t\t\tif(translation[0]=='新'&&translation.length==3){\n\t\t\t\t\t\t\t\ttranslation=translation.slice(1,3);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttranslation=translation.slice(0,2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar item=dialog.add('<div class=\"popup pointerdiv\" style=\"width:80%;display:inline-block\"><div class=\"skill\">【'+\n\t\t\t\t\t\t\ttranslation+'】</div><div>'+lib.translate[list[i]+'_info']+'</div></div>');\n\t\t\t\t\t\t\titem.firstChild.addEventListener('click',clickItem);\n\t\t\t\t\t\t\titem.firstChild.link=list[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\treturn dialog;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\t// target.gain(cards,player);\n\t\t\t\t\tevent.skillai=function(list){\n\t\t\t\t\t\treturn get.max(list,get.skillRank,'item');\n\t\t\t\t\t};\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tevent.dialog=lib.skill.tianshu.createDialog(player,target);\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result=event.skillai(event.list);\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\t_status.imchoosing=true;\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent._result=event.skillai(lib.skill.tianshu.createDialog(player,target,true));\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\tif(event.dialog){\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t}\n\t\t\t\t\tvar link=result;\n\t\t\t\t\tplayer.addAdditionalSkill('tianshu',link);\n\t\t\t\t\tplayer.popup(link);\n\t\t\t\t\tplayer.markSkillCharacter('tianshu',target,get.translation(link),lib.translate[link+'_info']);\n\t\t\t\t\tplayer.storage.tianshu=target;\n\t\t\t\t\tplayer.checkMarks();\n\t\t\t\t\tgame.log(player,'获得了技能','【'+get.translation(link)+'】');\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h')>player.hp) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张锦囊牌，然后获得一名其他角色的一项技能直到该角色死亡（替换以此法获得的前一个技能）"},"lanzhi":{"name":"兰芷","script":"{trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\tif(get.suit(event.card)=='club'){\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.hp<=player.hp&&current.isDamaged();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},prompt: function (event,player){\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.hp<=player.hp&&current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t\treturn get.prompt('lanzhi',list);\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.hp<=player.hp&&current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tvar eff=get.recoverEffect(list[i],player,player);\n\t\t\t\t\t\tif(eff>0){\n\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tnum--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.hp<=player.hp&&current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t\tplayer.line(list,'green');\n\t\t\t\t\tlist.sort(lib.sort.seat);\n\t\t\t\t\tevent.list=list;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\tevent.list.shift().recover();\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",threaten: \"1.5\",},}","info":"每当你使用一张梅花牌，你可以令所有体力值不大于你的角色回复一点体力"},"mufeng":{"name":"沐风","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hasSkill('mufeng_used');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.discoverCard();\n\t\t\t\t},subSkill: {used: {sub: \"true\",},count: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn _status.currentPhase==player&&get.type(event.card)=='basic';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.addTempSkill('mufeng_used');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},group: \"mufeng_count\",}","info":"结束阶段，若你本回合使用过基本牌，则可发现一张牌"},"duanyi":{"name":"断意","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>1;\n\t\t\t\t},filterCard: {name: \"sha\",},selectCard: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.damage();\n\t\t\t\t\tif(get.is.altered('duanyi')){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar he=target.getCards('he');\n\t\t\t\t\ttarget.discard(he.randomGets(target.maxHp-target.hp));\n\t\t\t\t},ai: {expose: \"0.3\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player)-(target.maxHp-target.hp)/2;\n\t\t\t\t\t\t},},order: \"5\",},}","info":"出牌阶段限一次，你可以弃置两张杀，对一名角色造成一点伤害，然后其随机弃置X张牌，X为其已损失的体力值"},"guxing":{"name":"孤星","script":"{group: [\"guxing1\",\"guxing3\"],}","info":"出牌阶段，你可以将最后至多X张手牌当杀使用，此杀无视距离且可以指定至多3个目标，每造成一次伤害，你摸一张牌，Ｘ为你已损失的体力值且至少为１。"},"reyingzi":{"name":"英姿","script":"{audio: \"2\",audioname: [\"heqi\",\"sunce\",\"gexuan\",\"re_sunben\",\"re_sunce\",\"re_heqi\"],trigger: {player: \"phaseDrawBegin2\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},ai: {threaten: \"1.5\",},mod: {maxHandcardBase: function (player,num){\n\t\t\t\t\t\treturn player.maxHp;\n\t\t\t\t\t},},}","info":"锁定技，摸牌阶段摸牌时，你额外摸一张牌；你的手牌上限为你的体力上限。"},"guozao":{"name":"聒噪","script":"{trigger: {global: \"damageEnd\",},forced: \"true\",logv: \"false\",check: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(player,current)>2&&current.countCards('h')==1\n\t\t\t\t\t});\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.source==player) return false;\n\t\t\t\t\tif(get.distance(player,event.player)>1) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tif(ui.cardPile.childNodes.length<3){\n\t\t\t\t\t\tvar discardcards=get.cards(3);\n\t\t\t\t\t\tfor(var i=0;i<discardcards.length;i++){\n\t\t\t\t\t\t\tdiscardcards[i].discard();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<3;i++){\n\t\t\t\t\t\tcards.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t}\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar dialog=ui.create.dialog('聒噪：选择一个目标将手牌替换',cards,'hidden');\n\t\t\t\t\tdialog.classList.add('noselect');\n\t\t\t\t\tvar dist=2;\n\t\t\t\t\tif(get.is.altered('guozao')){\n\t\t\t\t\t\tdist=1;\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseTarget(true,dialog,function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')>0&&get.distance(player,target)<=dist;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tvar hs=target.getCards('h');\n\t\t\t\t\t\tvar num=hs.length;\n\t\t\t\t\t\tif(num<=1) return att*2;\n\t\t\t\t\t\tif(num==2){\n\t\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.value(cards[i],target,'raw')>6) return att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\t\tfor(var i=0;i<2;i++){\n\t\t\t\t\t\t\t\t\tif(get.value(cards[i],target,'raw')>6) return -1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att/2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num==3){\n\t\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\t\tvar num2=0;\n\t\t\t\t\t\t\t\tfor(var i=0;i<3;i++){\n\t\t\t\t\t\t\t\t\tnum2+=get.value(cards[i],player,'raw');\n\t\t\t\t\t\t\t\t\tnum2-=get.value(hs[i],player,'raw');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(num2>0) return 0.5;\n\t\t\t\t\t\t\t\tif(num2<0) return -0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -att/2;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool&&result.targets[0]){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\t// player.logSkill('guozao',target,'green',true);\n\t\t\t\t\t\tvar cards=target.getCards('h');\n\t\t\t\t\t\ttarget.lose(cards)._triggered=null;\n\t\t\t\t\t\tgame.log(target,'弃置了',cards,'，并获得三张牌');\n\t\t\t\t\t\t// target.$draw(3);\n\t\t\t\t\t\ttarget.$throw(cards);\n\t\t\t\t\t\ttarget.gain(event.cards,'draw')._triggered=null;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"锁定技，每当距离你1以内的角色受到一次伤害，若伤害来源不你，你须观看牌堆顶的三张牌，然后指定距离2以内的一名有手牌角色将手牌与这些牌交换"},"yaotong":{"name":"妖瞳","script":"{group: [\"yaotong1\",\"yaotong2\",\"yaotong3\"],ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='respondShan'&&get.is.altered('yaotong')) return false;\n\t\t\t\t\t\tif(player.countCards('h')%2==0) return false;\n\t\t\t\t\t},},threaten: \"1.3\",}","info":"当你的手牌数为奇数时，你可以将一张手牌当作杀或闪使用或打出，当你的手牌数为偶数时，你可以将一张手牌当作无懈可击使用"},"heihuo":{"name":"黑火","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&player.countCards('he',{type:'equip'})>0&&!player.hasSkill('heihuo2');\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t},position: \"he\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tvar pos=get.position(card);\n\t\t\t\t\tif(nh<2) return 0;\n\t\t\t\t\tif(nh>4) return 0;\n\t\t\t\t\tif(nh==4&&pos=='e') return 0;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card)+(pos=='e'?0.4:0);\n\t\t\t\t\t}\n\t\t\t\t\treturn 5.5-get.value(card)+(pos=='e'?0.4:0);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw(player.countCards('h'));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(player.countCards('h')>=8){\n\t\t\t\t\t\tplayer.damage(3,'fire');\n\t\t\t\t\t\tplayer.addTempSkill('heihuo2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",threaten: \"1.4\",result: {player: \"1\",},},}","info":"出牌阶段，你可以弃置一张装备牌，令你的手牌数加倍；若你的手牌因此达到8张或更多，你立即受到3点火焰伤害且本回合内不能再次发动黑火"},"pojian":{"name":"破茧","script":"{trigger: {player: \"loseEnd\",},filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tfor(var i=0;i<ui.cardPile.childNodes.length;i++){\n\t\t\t\t\t\tif(get.type(ui.cardPile.childNodes[i])=='equip'){\n\t\t\t\t\t\t\tplayer.equip(ui.cardPile.childNodes[i]);\n\t\t\t\t\t\t\tplayer.$gain2(ui.cardPile.childNodes[i]);\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<ui.discardPile.childNodes.length;i++){\n\t\t\t\t\t\tif(get.type(ui.discardPile.childNodes[i])=='equip'){\n\t\t\t\t\t\t\tplayer.equip(ui.discardPile.childNodes[i]);\n\t\t\t\t\t\t\tplayer.$gain2(ui.discardPile.childNodes[i]);\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你失去最后一张手牌，可以从牌堆中获得一张装备牌并装备之"},"ljifeng":{"name":"疾风","script":"{mod: {selectTarget: function (card,player,range){\n\t\t\t\t\t\tif(card.name=='sha'&&range[1]!=-1) range[1]+=player.maxHp-player.hp;\n\t\t\t\t\t},attackFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance+from.hp-from.maxHp;\n\t\t\t\t\t},},}","info":"锁定技，你的攻击范围+X，杀可以额外指定X个目标，X为你已损失的体力值"},"lxianglong":{"name":"翔龙","script":"{trigger: {target: \"shaMiss\",},priority: \"5\",direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\treturn player.canUse('sha',target);\n\t\t\t\t\t},get.prompt('lxianglong')).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('lxianglong',result.targets);\n\t\t\t\t\t\tplayer.useCard({name:'sha'},trigger.cards,result.targets).animate=false;\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&target.countCards('h')) return 0.7;\n\t\t\t\t\t\t},},},}","info":"每当你闪避一张杀，你可以视为使用一张杀"},"xianghui":{"name":"祥晖","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {color: \"red\",},filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('h',{color:'red'})) return false;\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tvar min=players[0].hp;\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tmin=Math.min(min,players[i].hp);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i].hp==min&&players[i].isDamaged()) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},prompt: function (){\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tvar targets=[];\n\t\t\t\t\tvar min=players[0].hp;\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tmin=Math.min(min,players[i].hp);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i].hp==min&&players[i].hp<players[i].maxHp){\n\t\t\t\t\t\t\ttargets.push(players[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn '令'+get.translation(targets)+'回复一点体力';\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.isDamaged()&&target.isMinHp();\n\t\t\t\t},selectTarget: \"-1\",content: function (){\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},ai: {expose: \"0.1\",order: \"9\",threaten: \"1.4\",result: {player: function (player,target){\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar min=players[0].hp;\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tmin=Math.min(min,players[i].hp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i].hp==min&&players[i].hp<players[i].maxHp){\n\t\t\t\t\t\t\t\t\tnum+=get.recoverEffect(players[i],player,player);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张红色手牌，然后令场上体力值最少的角色各回复一点体力"},"huiqi":{"name":"回气","script":"{trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('huiqi'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(player.hp<=0){\n\t\t\t\t\t\t\tif(player==target){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(att>3){\n\t\t\t\t\t\t\t\treturn att+Math.max(0,5-target.countCards('h'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att/4;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(att>3){\n\t\t\t\t\t\t\treturn att+Math.max(0,5-target.countCards('h'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('huiqi',result.targets);\n\t\t\t\t\t\tresult.targets[0].draw(player.maxHp-player.hp);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn [1,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，可令一名其他角色摸X张牌，X为你已损失的体力值"},"rexue":{"name":"热血","script":"{trigger: {global: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,event.player)&&player.hasSha(null,true);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar next=player.chooseToUse({name:'sha'},'热血：是否对'+get.translation(trigger.player)+'使用一张杀',trigger.player,-1);\n\t\t\t\t\tnext.logSkill='rexue';\n\t\t\t\t\tnext.oncard=function(){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"任意一名角色的准备阶段，你可以对其使用一张杀，并摸一张牌"},"liuli":{"name":"流离","script":"{audio: \"2\",audioname: [\"re_daqiao\",\"daxiaoqiao\"],trigger: {target: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\tif(player.countCards('he')==0) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.inRange(current)&&current!=event.player&&\n\t\t\t\t\t\t\tcurrent!=player&&lib.filter.targetEnabled(event.card,event.player,current);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\tvar trigger=_status.event;\n\t\t\t\t\t\t\tif(player.inRange(target)&&target!=trigger.source){\n\t\t\t\t\t\t\t\tif(lib.filter.targetEnabled(trigger.card,trigger.source,target)) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tif(_status.event.player.countCards('h','shan')){\n\t\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.attitude(_status.event.player,target)<5){\n\t\t\t\t\t\t\t\treturn 6-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==1&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\t\treturn 10-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==2&&player.countCards('h','shan')==0){\n\t\t\t\t\t\t\t\treturn 8-get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('liuli'),\n\t\t\t\t\t\tprompt2:'弃置一张牌，将此【杀】转移给攻击范围内的一名其他角色',\n\t\t\t\t\t\tsource:trigger.player,\n\t\t\t\t\t\tcard:trigger.card,\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill(event.name,target);\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tvar evt=trigger.getParent();\n\t\t\t\t\t\tevt.triggeredTargets2.remove(player);\n\t\t\t\t\t\tevt.targets.remove(player);\n\t\t\t\t\t\tevt.targets.push(target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(target.countCards('he')==0) return;\n\t\t\t\t\t\t\tif(card.name!='sha') return;\n\t\t\t\t\t\t\tvar min=1;\n\t\t\t\t\t\t\tvar friend=get.attitude(player,target)>0;\n\t\t\t\t\t\t\tvar vcard={name:'shacopy',nature:card.nature,suit:card.suit};\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(player!=players[i]&&\n\t\t\t\t\t\t\t\t\tget.attitude(target,players[i])<0&&\n\t\t\t\t\t\t\t\t\ttarget.canUse(card,players[i])){\n\t\t\t\t\t\t\t\t\tif(!friend) return 0;\n\t\t\t\t\t\t\t\t\tif(get.effect(players[i],vcard,player,player)>0){\n\t\t\t\t\t\t\t\t\t\tif(!player.canUse(card,players[0])){\n\t\t\t\t\t\t\t\t\t\t\treturn [0,0.1];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tmin=0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn min;\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标时，你可以弃置一张牌并将此【杀】转移给攻击范围内的一名其他角色（不能是此【杀】的使用者）。"},"senluo":{"name":"森罗","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.isMinHandcard();\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseToDiscard(2,'h',true).delay=false;\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.draw();\n\t\t\t\t},selectTarget: \"-1\",ai: {order: \"9\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，若你的手牌数为全场最少或之一，你可以令所有有手牌的其他角色弃置两张手牌然后摸一张牌"},"longdan":{"name":"龙胆","script":"{audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],group: [\"longdan_sha\",\"longdan_shan\",\"longdan_draw\"],subSkill: {draw: {trigger: {player: [\"useCard\",\"respond\"],},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!get.zhu(player,'shouyue')) return false;\n\t\t\t\t\t\t\treturn event.skill=='longdan_sha'||event.skill=='longdan_shan';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tplayer.storage.fanghun2++;\n\t\t\t\t\t\t},sub: \"true\",},sha: {audio: \"2\",audioname: [\"re_zhaoyun\"],enable: [\"chooseToUse\",\"chooseToRespond\"],filterCard: {name: \"shan\",},viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\t},prompt: \"将一张闪当杀使用或打出\",check: function (){return 1},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondSha')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\t\t},order: function (){\n\t\t\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t\t\t},useful: \"-1\",value: \"-1\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},sub: \"true\",},shan: {audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: {name: \"sha\",},viewAs: {name: \"shan\",},prompt: \"将一张杀当闪使用或打出\",check: function (){return 1},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return false;\n\t\t\t\t\t\t},ai: {respondShan: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(!player.countCards('h','sha')) return false;\n\t\t\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&current<0) return 0.6\n\t\t\t\t\t\t\t\t},},order: \"4\",useful: \"-1\",value: \"-1\",basic: {useful: [7,2],value: [7,2],},result: {player: \"1\",},},sub: \"true\",},},}","info":"你可以将【杀】当做【闪】，或将【闪】当做【杀】使用或打出。"},"pozhen":{"name":"破阵","script":"{trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\tif(!event.source) return false;\n\t\t\t\t\tif(get.is.altered('pozhen')){\n\t\t\t\t\t\treturn event.source.countCards('h')>player.countCards('h');\n\t\t\t\t\t}\n\t\t\t\t\treturn event.source.countCards('h')!=player.countCards('h');\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar num=player.countCards('h')-trigger.source.countCards('h');\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\tvar next=player.chooseToDiscard(num,get.prompt('pozhen',trigger.source),'弃置'+num+'张手牌，并对'+get.translation(trigger.source)+'造成一点伤害');\n\t\t\t\t\t\tnext.logSkill=['pozhen',trigger.source];\n\t\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\t\tif(get.damageEffect(trigger.source,player,player)>0&&num<=2){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(num<0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt('pozhen',trigger.source),'弃置'+get.translation(trigger.source)+(-num)+'张手牌').ai=function(){\n\t\t\t\t\t\t\treturn get.attitude(player,trigger.source)<0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\t\ttrigger.source.damage();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.logSkill('pozhen',trigger.source);\n\t\t\t\t\t\t\tvar cards=trigger.source.getCards('h');\n\t\t\t\t\t\t\tcards.sort(lib.sort.random);\n\t\t\t\t\t\t\ttrigger.source.discard(cards.slice(0,-event.num));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1];\n\t\t\t\t\t\t\t\tvar num=player.countCards('h')-target.countCards('h');\n\t\t\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\t\t\treturn [1,0,0,-num/2];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(num<0&&!get.is.altered('pozhen')){\n\t\t\t\t\t\t\t\t\treturn [1,0,0,-0.5];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你受到一次伤害，若你的手牌数大于伤害来源，你可以弃置X张手牌对其造成一点伤害；若你的手牌数小于伤害来源，你可以弃置其X张手牌。X为你与伤害来源的手牌数之差。"},"tanlin":{"name":"探麟","script":"{enable: \"phaseUse\",usable: \"1\",group: \"tanlin4\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(target).set('preserve','win');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(target.hasSkill('tanlin2')==false){\n\t\t\t\t\t\t\ttarget.addSkill('tanlin2');\n\t\t\t\t\t\t\tplayer.addSkill('tanlin3');\n\t\t\t\t\t\t\tif(get.is.altered('tanlin')){\n\t\t\t\t\t\t\t\tplayer.gain([result.target]);\n\t\t\t\t\t\t\t\tplayer.$gain2([result.target]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.gain([result.player,result.target]);\n\t\t\t\t\t\t\t\tplayer.$gain2([result.player,result.target]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.damage(target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\tif(num>cards.length+3&&player.hp>1) return -2;\n\t\t\t\t\t\t\tif(num>cards.length+1&&player.hp>1) return -1;\n\t\t\t\t\t\t\tif(num==cards.length-1&&player.hp>1&&!get.is.altered('pozhen')) return -1;\n\t\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\tif(cards[i].number>9) return num==1?-1:-0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},order: \"9\",},}","info":"出牌阶段限一次，你可以与一名其他角色进行拼点，若你赢，你获得双方拼点牌、对该角色使用卡牌无视距离且可以额外使用一张杀直到回合结束，若你没赢，你受到该角色的一点伤害。"},"funiao":{"name":"符鸟","script":"{enable: \"phaseUse\",usable: \"1\",prepare: \"give2\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},discard: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.gain(cards,player).delay=false;\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(target.countCards('h')){\n\t\t\t\t\t\tplayer.viewHandcards(target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},order: \"2\",},}","info":"出牌阶段限一次，你可以将一张手牌交给一名其他角色，然后摸一张牌并观看其手牌"},"ningxian":{"name":"凝霰","script":"{trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar enemy=game.countPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&get.damageEffect(current,player,player)>0;\n\t\t\t\t\t});\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectCard:[1,player.countCards('he',{color:'black'})],\n\t\t\t\t\t\tselectTarget:function(){\n\t\t\t\t\t\t\tif(ui.selected.targets.length>ui.selected.cards.length){\n\t\t\t\t\t\t\t\tgame.uncheck('target');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn ui.selected.cards.length;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.color(card)=='black'&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>=enemy) return 0;\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('ningxian')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tplayer.logSkill('ningxian',result.targets);\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.targets.shift().damage();\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: function (card,player,target){\n\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-0.5];\n\t\t\t\t\t\t\tif(!target.hasFriend()){\n\t\t\t\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\t\t\t\tif(!player.hasFriend()) return;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.countCards('h')>2||target.countCards('e',{color:'black'})){\n\t\t\t\t\t\t\t\treturn [1,0,0,-1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn [1,-0.5];\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"每当你受到一次伤害，你可以弃置任意张黑色牌并选择等量其他角色对其各造成一点伤害"},"hlingbo":{"name":"凌波","script":"{audio: [\"lingbo\",2],trigger: {player: [\"respond\",\"useCard\"],},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='shan';\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {mingzhi: \"false\",useShan: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\tvar shans=target.countCards('h','shan');\n\t\t\t\t\t\t\t\tvar hs=target.countCards('h');\n\t\t\t\t\t\t\t\tif(shans>1) return [0,1];\n\t\t\t\t\t\t\t\tif(shans&&hs>2) return [0,1];\n\t\t\t\t\t\t\t\tif(shans) return [0,0];\n\t\t\t\t\t\t\t\tif(hs>2) return [0,0];\n\t\t\t\t\t\t\t\tif(hs>1) return [1,0.5];\n\t\t\t\t\t\t\t\treturn [1.5,0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"0.8\",},}","info":"每当你使用或打出一张闪，你可以摸两张牌"},"xuanying":{"name":"旋影","script":"{subSkill: {sha: {enable: \"chooseToUse\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(player.isLinked()) return false;\n\t\t\t\t\t\t},precontent: function (){\n\t\t\t\t\t\t\tplayer.link();\n\t\t\t\t\t\t\t// player.getStat().card.sha--;\n\t\t\t\t\t\t},filterCard: function (){return false},selectCard: \"-1\",prompt: \"横置武将牌，视为使用一张无视距离的杀\",ai: {order: function (){\n\t\t\t\t\t\t\t\t// if(_status.event.player.countCards('h',{type:'equip'})) return 9;\n\t\t\t\t\t\t\t\treturn 3.15;\n\t\t\t\t\t\t\t},skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\t\t\tif(arg!='use') return false;\n\t\t\t\t\t\t\t\tif(player.isLinked()) return false;\n\t\t\t\t\t\t\t},respondSha: \"true\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},mod: {targetInRange: function (card){\n\t\t\t\t\t\t\t\tif(_status.event.skill=='xuanying_sha') return true;\n\t\t\t\t\t\t\t},},sub: \"true\",},shan: {trigger: {player: [\"chooseToRespondBegin\",\"chooseToUseBegin\"],},filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.isLinked()) return false;\n\t\t\t\t\t\t\tif(event.responded) return false;\n\t\t\t\t\t\t\tif(!event.filterCard({name:'shan'},player,event)) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\tif(get.damageEffect(player,event.player,player)>=0) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.link();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\t\ttrigger.responded=true;\n\t\t\t\t\t\t\ttrigger.result={bool:true,card:{name:'shan'}}\n\t\t\t\t\t\t},ai: {respondShan: \"true\",target: function (card,player,target,current){\n\t\t\t\t\t\t\t\tif(!player.isLinked()&&current<0) return 1.5;\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(get.tag(card,'loseCard')&&_status.currentPhase!=target&&target.countCards('he')){\n\t\t\t\t\t\t\t\t\treturn [0.5,Math.max(2,target.countCards('h'))];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(get.tag(card,'respondSha')||get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0&&card.name=='juedou') return;\n\t\t\t\t\t\t\t\t\treturn [0.5,target.countCards('h','sha')+target.countCards('h','shan')];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},damage: {trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.source&&event.source.isAlive()&&player.isLinked()&&\n\t\t\t\t\t\t\tlib.filter.targetEnabled({name:'sha'},player,event.source);\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\treturn get.effect(event.source,{name:'sha'},player,player)>0;\n\t\t\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.link();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.useCard({name:'sha'},trigger.source);\n\t\t\t\t\t\t},sub: \"true\",},use: {trigger: {player: \"loseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn _status.currentPhase!=player&&player.isLinked()&&event.cards&&event.cards.length;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt('xuanying'),function(card,player,target){\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,target);\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},_status.event.player);\n\t\t\t\t\t\t\t}).set('autodelay',0.5);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('xuanying');\n\t\t\t\t\t\t\t\tplayer.link();\n\t\t\t\t\t\t\t\tplayer.useCard({name:'sha'},result.targets,false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},group: [\"xuanying_sha\",\"xuanying_use\"],ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.isLinked()) return 0.7;\n\t\t\t\t\t\treturn 1.4;\n\t\t\t\t\t},},}","info":"你可以横置你的武将牌，视为使用一张无视距离的杀；每当你于回合外失去牌，你可以竖置你的武将牌，视为使用一张无视距离的杀"},"lieren":{"name":"烈刃","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"boss_lvbu3\"],trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn (event.card&&event.card.name=='sha'&&event.getParent().name=='sha'&&\n\t\t\t\t\t\tevent.player.isAlive()&&\n\t\t\t\t\t\tplayer.canCompare(event.player));\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0&&player.countCards('h')>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool&&trigger.player.countGainableCards(player,'he')){\n\t\t\t\t\t\tplayer.gainPlayerCard(trigger.player,true,'he');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用【杀】造成伤害后，可与受到该伤害的角色进行拼点；若你赢，你获得对方的一张牌。"},"yijue":{"name":"义绝","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(target).set('small',true);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!target.hasSkill('fengyin')){\n\t\t\t\t\t\t\ttarget.addTempSkill('fengyin');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.addTempSkill('yijue2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(target.hp<target.maxHp){\n\t\t\t\t\t\tplayer.chooseBool('是否让目标回复一点体力？').ai=function(event,player){\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,player)>0;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tif(hs.length<3) return 0;\n\t\t\t\t\t\t\tvar bool=false;\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(hs[i].number>=9&&get.value(hs[i])<7){\n\t\t\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!bool) return 0;\n\t\t\t\t\t\t\tif(target.countCards('h')>target.hp+1&&get.recoverEffect(target)>0){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.canUse('sha',target)&&(player.countCards('h','sha')||player.countCards('he',{color:'red'}))){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},order: \"9\",},}","info":"出牌阶段限一次，你可以与一名其他角色拼点，若你赢，则直到回合结束，该角色不能使用或打出手牌且其非锁定技失效，若你没赢，你可令该角色回复一点体力。"},"dangping":{"name":"荡平","script":"{trigger: {source: \"damageAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.parent.name!='dangping'&&!player.hasSkill('dangping2')&&player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&trigger.player!=target&&get.distance(trigger.player,target)<=1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn get.unuseful(card)+9;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('dangping')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tplayer.logSkill('dangping',result.targets);\n\t\t\t\t\t\tplayer.addTempSkill('dangping2');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你造成一次伤害，可以弃置一张手牌对其距离1以内的另一名角色造成一点伤害，每回合限一次"},"zhanlu":{"name":"沾露","script":"{enable: \"phaseUse\",filterCard: function (card){var suit=get.suit(card); return suit=='spade';},position: \"he\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'spade'})>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 10-get.value(card)\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hp>=target.maxHp) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},selectTarget: [1,3],content: function (){\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player==target&&player.countCards('h')>player.hp) return 20;\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,target);\n\t\t\t\t\t\t},},threaten: \"2\",},}","info":"出牌阶段限一次，你可以弃置一张黑桃牌令至多3名角色各回复一点体力"},"susheng":{"name":"苏生","script":"{trigger: {global: \"dieBefore\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('susheng2')) return false;\n\t\t\t\t\tif(get.is.altered('susheng')){\n\t\t\t\t\t\treturn player.countCards('h',{color:'red'})>0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar att=get.attitude(player,trigger.player);\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tvar next;\n\t\t\t\t\tif(get.is.altered('susheng')){\n\t\t\t\t\t\tnext=player.chooseToDiscard(get.prompt('susheng',trigger.player),{color:'red'});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnext=player.chooseToDiscard(get.prompt('susheng',trigger.player));\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill=['susheng',trigger.player];\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(att>3||(att>1&&nh>2)){\n\t\t\t\t\t\t\treturn get.unuseful2(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t// player.chooseToDiscard('h',true);\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\ttrigger.player.hp=1;\n\t\t\t\t\t\tif(trigger.player.maxHp<1) trigger.player.maxHp=1;\n\t\t\t\t\t\ttrigger.player.update();\n\t\t\t\t\t\tplayer.addTempSkill('susheng2');\n\t\t\t\t\t}\n\n\t\t\t\t},ai: {threaten: \"2\",},}","info":"在任意一名角色即将死亡时，你可以弃置一张手牌防止其死亡，并将其体力回复至1，每回合限发动一次"},"huopu":{"name":"火瀑","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: function (card){\n\t\t\t\t\treturn get.suit(card)=='heart';\n\t\t\t\t},viewAs: {name: \"liuxinghuoyu\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('he',{suit:'heart'})) return false;\n\t\t\t\t},prompt: \"将一张红桃手牌当作流星火羽使用\",check: function (card){return 6-get.value(card)},ai: {threaten: \"1.4\",order: \"9\",basic: {order: \"4\",value: \"7\",useful: \"2\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nofire')) return 0;\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,player)<0&&get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar nh=target.countCards('he');\n\t\t\t\t\t\t\tif(target==player) nh--;\n\t\t\t\t\t\t\tswitch(nh){\n\t\t\t\t\t\t\t\tcase 0:case 1:return -2;\n\t\t\t\t\t\t\t\tcase 2:return -1.5;\n\t\t\t\t\t\t\t\tcase 3:return -1;\n\t\t\t\t\t\t\t\tdefault:return -0.7;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},tag: {damage: \"1\",fireDamage: \"1\",natureDamage: \"1\",discard: \"1\",loseCard: \"1\",position: \"he\",},},}","info":"出牌阶段限一次，你可以将一张红桃牌当作流星火羽使用"},"shenyan":{"name":"神炎","script":"{trigger: {source: \"damageBegin\",},skillAnimation: \"true\",animationColor: \"fire\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.shenyan&&event.nature=='fire';\n\t\t\t\t},intro: {content: \"limited\",},mark: \"true\",logTarget: \"player\",init: function (player){\n\t\t\t\t\tplayer.storage.shenyan=false;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)>=0) return 0;\n\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\tvar num=0,players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player&&\n\t\t\t\t\t\t\tplayers[i]!=event.player&&\n\t\t\t\t\t\t\tget.distance(event.player,players[i])<=1){\n\t\t\t\t\t\t\tvar eff=get.damageEffect(players[i],player,player,'fire');\n\t\t\t\t\t\t\tif(eff>0){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(eff<0){\n\t\t\t\t\t\t\t\tnum--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t\tplayer.addSkill('shenyan2');\n\t\t\t\t\tplayer.storage.shenyan=true;\n\t\t\t\t\tplayer.awakenSkill('shenyan');\n\t\t\t\t\tplayer.storage.shenyan2=[];\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player&&\n\t\t\t\t\t\t\tplayers[i]!=trigger.player&&\n\t\t\t\t\t\t\tget.distance(trigger.player,players[i])<=1){\n\t\t\t\t\t\t\tplayer.storage.shenyan2.push(players[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.shenyan2.sort(lib.sort.seat);\n\t\t\t\t},}","info":"限定技，当你即将造成火焰伤害时，你可以令此伤害+1，并对目标距离1以内的所有其他角色各造成一点火焰伤害"},"zhuhai":{"name":"诛害","script":"{trigger: {global: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player.isAlive()&&event.player.getStat('damage')&&\n\t\t\t\t\tlib.filter.targetEnabled({name:'sha'},player,event.player)&&(player.hasSha()||_status.connectMode&&player.countCards('h')>0);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.chooseToUse(function(card,player,event){\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t},'诛害：是否对'+get.translation(trigger.player)+'使用一张杀？').set('logSkill','zhuhai').set('complexSelect',true).set('filterTarget',function(card,player,target){\n\t\t\t\t\t\tif(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;\n\t\t\t\t\t\treturn lib.filter.targetEnabled.apply(this,arguments);\n\t\t\t\t\t}).set('sourcex',trigger.player);\n\t\t\t\t},}","info":"一名其他角色的结束阶段开始时，若该角色本回合造成过伤害，你可以对其使用一张【杀】。"},"polang":{"name":"破浪","script":"{trigger: {source: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.player.countCards('e');\n\t\t\t\t},direct: \"true\",logTarget: \"player\",content: function (){\n\t\t\t\t\tplayer.discardPlayerCard(trigger.player,'e',get.prompt('polang',trigger.player)).logSkill='polang';\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"每当你造成一次伤害，可以一张对方的装备牌"},"jikong":{"name":"亟空","script":"{trigger: {player: [\"loseEnd\",\"phaseBegin\"],},direct: \"true\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(event.name=='phase') return true;\n\t\t\t\t\tif(get.is.altered('jikong')) return false;\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('jikong'),function(card,player,target){\n\t\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha',nature:'thunder'},player,target);\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha',nature:'thunder'},player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('jikong');\n\t\t\t\t\t\tplayer.useCard({name:'sha',nature:'thunder'},result.targets,false);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.counttrigger.jikong--;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.countCards('h')) return 0.8;\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t},},}","info":"准备阶段，你可以指定一名角色视为对其使用一张雷杀；每当你失去最后一张手牌，你可以指定一名角色视为对其使用一张雷杀（每回合限发动一次）"},"xingdian":{"name":"星点","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.isEnemyOf(player)&&current.countCards('he');\n\t\t\t\t\t}).randomGets(2).sortBySeat();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\tvar target=event.list.shift();\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tif(event.list.length){\n\t\t\t\t\t\t\ttarget.randomDiscard('he',false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttarget.randomDiscard('he');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {player: function (player){\n\t\t\t\t\t\t\tif(game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isEnemyOf(player)&&current.countCards('he');\n\t\t\t\t\t\t\t})>=2){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张手牌，然后随机弃置两名敌人各一张牌"},"yulin":{"name":"玉鳞","script":"{trigger: {player: \"damageBefore\",},priority: \"-10\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he','是否弃置一张装备牌抵消伤害？',function(card,player){\n\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t});\n\t\t\t\t\tnext.logSkill='yulin';\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(player.hp==1||trigger.num>1){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.hp==2){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你即将受到伤害，你可以弃置一张装备牌抵消此伤害"},"luomei":{"name":"落梅","script":"{trigger: {player: [\"useCard\",\"respond\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!event.cards) return false;\n\t\t\t\t\tif(event.cards.length!=1) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.suit(event.cards[i])=='club') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tif(get.suit(trigger.cards[i])=='club') num++;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t},}","info":"每当你使用或打出一张梅花花色的牌，你可以摸一张牌"},"xuehuang":{"name":"血凰","script":"{enable: \"phaseUse\",init: function (player){\n\t\t\t\t\tplayer.storage.xuehuang=false;\n\t\t\t\t},intro: {content: \"limited\",},mark: \"true\",unique: \"true\",skillAnimation: \"true\",animationColor: \"fire\",line: \"fire\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.xuehuang&&\n\t\t\t\t\t\tplayer.countCards('h',{color:'red'})>0&&\n\t\t\t\t\t\tplayer.countCards('h',{color:'black'})==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.xuehuang=true;\n\t\t\t\t\tplayer.awakenSkill('xuehuang');\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\tevent.num=cards.length;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.num){\n\t\t\t\t\t\tvar targets=player.getEnemies().randomGets(2);\n\t\t\t\t\t\tif(!targets.length){\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.useCard({name:'sha',nature:'fire'},targets);\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('h',{color:'red'})<2) return 0;\n\t\t\t\t\t\t\tif(player.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn get.color(card)=='red'&&get.value(card)>8;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，若你没有黑色手牌，你可以展示并弃置所有手牌，每弃置一张牌视为使用一张火杀，随机指定两名敌人为目标"},"ningshuang":{"name":"凝霜","script":"{trigger: {target: \"useCardToBegin\",},filter: function (event,player){\n\t\t\t\t\tif(get.color(event.card)!='black') return false;\n\t\t\t\t\tif(!event.player) return false;\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(event.player.isLinked()&&event.player.isTurnedOver()) return false;\n\t\t\t\t\tif(player.countCards('he',{color:'black'})) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('凝霜：是否弃置一张黑色牌使'+get.translation(trigger.player)+'横置或翻面？','he',function(card){\n\t\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t\t});\n\t\t\t\t\tnext.logSkill=['ningshuang',trigger.player];\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(trigger.player.hasSkillTag('noturn')&&trigger.player.isLinked()) return 0;\n\t\t\t\t\t\tif(get.attitude(player,trigger.player)<0){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.player.isTurnedOver()){\n\t\t\t\t\t\t\ttrigger.player.loseHp();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(trigger.player.isLinked()){\n\t\t\t\t\t\t\ttrigger.player.turnOver();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttrigger.player.link();\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.color(card)=='black'&&get.attitude(target,player)<0&&target.countCards('h')>0){\n\t\t\t\t\t\t\t\treturn [1,0.1,0,-target.countCards('h')/4];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你成为黑色牌的目标，你可以弃置一张黑色牌将其横置，并摸一张牌，若其已经模置则改为将其翻面"},"zhuyu":{"name":"朱羽","script":"{trigger: {global: \"damageBegin\",},filter: function (event,player){\n\t\t\t\t\tif(!event.player.isLinked()) return false;\n\t\t\t\t\tif(!event.notLink()) return false;\n\t\t\t\t\tif(player.countCards('he',{color:'red'})) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('朱羽：是否弃置一张红色牌使'+get.translation(trigger.player)+'受到的伤害+1？','he',function(card){\n\t\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t\t});\n\t\t\t\t\tnext.logSkill=['zhuyu',trigger.player,'fire'];\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\tif(current.isLinked()){\n\t\t\t\t\t\t\tif(trigger.nature){\n\t\t\t\t\t\t\t\treturn get.sgn(get.damageEffect(current,player,player,'fire'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(current==trigger.player){\n\t\t\t\t\t\t\t\t\treturn get.sgn(get.damageEffect(current,player,player,'fire'));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn 2*get.sgn(get.damageEffect(current,player,player,'fire'));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(trigger.player.hasSkillTag('nofire')) return 0;\n\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\ttrigger.nature='fire';\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当一名横置的角色即将受到伤害时，你可以弃置一张红色牌令此伤害+1并变为火属性"},"huanyin":{"name":"幻音","script":"{trigger: {target: \"useCardToBefore\",},forced: \"true\",priority: \"5.9\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar effect=get.effect(player,trigger.card,trigger.player,player);\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tswitch(get.suit(card)){\n\t\t\t\t\t\t\tcase 'spade':return -effect;\n\t\t\t\t\t\t\tcase 'heart':return 1;\n\t\t\t\t\t\t\tdefault:return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tswitch(result.suit){\n\t\t\t\t\t\tcase 'spade':{\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'heart':{\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\treturn 0.7\n\t\t\t\t\t\t},},threaten: \"0.8\",},}","info":"锁定技，每当你成为其他角色的卡牌的目标时，你进行一次判定，若为黑桃则取消之，若为红桃你摸一张牌"},"tianhuo":{"name":"天火","script":"{enable: \"phaseUse\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('j')>0;\n\t\t\t\t},usable: \"1\",selectTarget: \"-1\",filter: function (){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('j');\n\t\t\t\t\t});\n\t\t\t\t},line: \"fire\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.num=target.countCards('j');\n\t\t\t\t\ttarget.discard(target.getCards('j'));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.damage(event.num,'fire','nosource')\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,player,target,'fire');\n\t\t\t\t\t\t\tif(eff>=0) return eff+1;\n\t\t\t\t\t\t\tvar judges=target.getCards('j');\n\t\t\t\t\t\t\tif(!judges.length) return 0;\n\t\t\t\t\t\t\tif(target.hp==1||judges.length>1) return -judges.length;\n\t\t\t\t\t\t\tvar name=judges[0].viewAs||judges[0].name;\n\t\t\t\t\t\t\tif(name=='shandian'||name=='huoshan'||name=='hongshui') return -judges.length;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以令所有角色弃置其判定区域内的牌，并受到没有来源的等量火焰伤害，每阶段限一次"},"xuanzhou":{"name":"玄咒","script":"{enable: \"phaseUse\",usable: \"1\",discard: \"false\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'trick'})>0;\n\t\t\t\t},prepare: \"throw\",position: \"he\",filterCard: {type: \"trick\",},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i in lib.card){\n\t\t\t\t\t\tif(lib.card[i].mode&&lib.card[i].mode.contains(lib.config.mode)==false) continue;\n\t\t\t\t\t\tif(lib.card[i].type=='delay') list.push([cards[0].suit,cards[0].number,i]);\n\t\t\t\t\t}\n\t\t\t\t\tvar dialog=ui.create.dialog('玄咒',[list,'vcard']);\n\t\t\t\t\tvar bing=target.countCards('h')<=1;\n\t\t\t\t\tplayer.chooseButton(dialog,true,function(button){\n\t\t\t\t\t\tif(get.effect(target,{name:button.link[2]},player,player)>0){\n\t\t\t\t\t\t\tif(button.link[2]=='bingliang'){\n\t\t\t\t\t\t\t\tif(bing) return 2;\n\t\t\t\t\t\t\t\treturn 0.7;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(button.link[2]=='lebu'){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(button.link[2]=='guiyoujie'){\n\t\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(button.link[2]=='caomu'){\n\t\t\t\t\t\t\t\treturn 0.3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0.2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).filterButton=function(button){\n\t\t\t\t\t\treturn !target.hasJudge(button.link[2]);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.addJudge(result.links[0][2],cards);\n\t\t\t\t},ai: {result: {player: function (player,target){\n\t\t\t\t\t\t\tvar eff=0;\n\t\t\t\t\t\t\tfor(var i in lib.card){\n\t\t\t\t\t\t\t\tif(lib.card[i].type=='delay'){\n\t\t\t\t\t\t\t\t\tvar current=get.effect(target,{name:i},player,player);\n\t\t\t\t\t\t\t\t\tif(current>eff){\n\t\t\t\t\t\t\t\t\t\teff=current;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},order: \"9.5\",},}","info":"出牌阶段限一次，你可以将一张普通锦囊牌当作任意一张延时锦囊，对任意一名角色使用（无视锦囊使用范围限制）"},"lexue":{"name":"乐学","script":"{group: [\"lexue1\",\"lexue2\"],}","info":"回合内，你随机获得制衡、集智、缔盟、驱虎中的一个技能；回合外，你随机获得遗计、急救、鬼道、反馈中的一个技能"},"luanji":{"name":"乱击","script":"{audio: \"2\",enable: \"phaseUse\",viewAs: {name: \"wanjian\",},filterCard: function (card,player){\n\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\treturn get.suit(card)==get.suit(ui.selected.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(card!=cards[i]){\n\t\t\t\t\t\t\tif(get.suit(card)==get.suit(cards[i])) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},selectCard: \"2\",complexCard: \"true\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('wanjian',current);\n\t\t\t\t\t});\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tvar eff=get.sgn(get.effect(targets[i],{name:'wanjian'},player,player));\n\t\t\t\t\t\tif(targets[i].hp==1){\n\t\t\t\t\t\t\teff*=1.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnum+=eff;\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.needsToDiscard(-1)){\n\t\t\t\t\t\tif(targets.length>=7){\n\t\t\t\t\t\t\tif(num<2) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(targets.length>=5){\n\t\t\t\t\t\t\tif(num<1.5) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},ai: {basic: {order: \"8.5\",useful: \"1\",value: \"5\",},wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"出牌阶段，你可以将任意两张相同花色的手牌当做【万箭齐发】使用。"},"guiyan":{"name":"鬼眼","script":"{unique: \"true\",enable: \"phaseUse\",usable: \"1\",intro: {content: \"濒死时回复一点体力并失去鬼眼\",},mark: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardButton(target,target.getCards('h')).set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t}).filterButton=function(button){\n\t\t\t\t\t\treturn get.suit(button.link)=='club';\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.links[0],target);\n\t\t\t\t\t\ttarget.$giveAuto(result.links[0],player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"11\",result: {target: \"-1\",player: \"1\",},threaten: \"1.3\",},group: [\"guiyan2\"],}","info":"出牌阶段，你可以观看一名角色的手牌，并获得其中一张梅花牌，每阶段限一次。当你首次进入濒死状态时，你须回复一点体力并失去技能鬼眼"},"jiang":{"name":"激昂","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"sp_lvmeng\",\"re_sunben\",\"re_sunce\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\tif(!(event.card.name=='juedou'||(event.card.name=='sha'&&get.color(event.card)=='red'))) return false;\n\t\t\t\t\treturn player==event.target||event.getParent().triggeredTargets3.length==1;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,0.6];\n\t\t\t\t\t\t},player: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,1];\n\t\t\t\t\t\t},},},}","info":"每当你使用（指定目标后）或被使用（成为目标后）一张【决斗】或红色的【杀】时，你可以摸一张牌。"},"hyunshen":{"name":"云身","script":"{trigger: {player: [\"respond\",\"useCard\"],},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='shan';\n\t\t\t\t},frequent: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.hyunshen=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.hyunshen++;\n\t\t\t\t\tplayer.markSkill('hyunshen');\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\tvar shans=target.countCards('h','shan');\n\t\t\t\t\t\t\t\tvar hs=target.countCards('h');\n\t\t\t\t\t\t\t\tif(shans>1) return [1,1];\n\t\t\t\t\t\t\t\tif(shans&&hs>2) return [1,1];\n\t\t\t\t\t\t\t\tif(shans) return [1,0.5];\n\t\t\t\t\t\t\t\tif(hs>2) return [1,0.3];\n\t\t\t\t\t\t\t\tif(hs>1) return [1,0.2];\n\t\t\t\t\t\t\t\treturn [1.2,0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"0.8\",},intro: {content: \"mark\",},group: \"hyunshen2\",}","info":"每当你打出一张闪，你可以令你的防御距离+1；准备阶段，你将累计的防御距离清零，然后摸等量的牌"},"fengming":{"name":"凤鸣","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'})>0;\n\t\t\t\t},filterCard: {type: \"equip\",},position: \"he\",filterTarget: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.draw();\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\t\t\treturn get.recoverEffect(target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张装备牌，令一名角色恢复一点体力并摸一张牌"},"xianyin":{"name":"散结","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('j')&&current!=player;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('j')&&current!=player;\n\t\t\t\t\t});\n\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.target=event.targets.shift();\n\t\t\t\t\t\tevent.target.discard(event.target.getCards('j'));\n\t\t\t\t\t\tplayer.line(event.target,'green');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.target.countCards('h')){\n\t\t\t\t\t\tevent.target.chooseCard('选择一张手牌交给'+get.translation(player),true).ai=function(card){\n\t\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards[0],target);\n\t\t\t\t\t\ttarget.$give(1,player);\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(1);\n\t\t\t\t},ai: {order: \"9\",result: {player: function (player){\n\t\t\t\t\t\t\tvar num=0,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=player&&players[i].countCards('j')){\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>=0&&\n\t\t\t\t\t\t\t\t\t\tget.attitude(players[i],player)>=0){\n\t\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tnum--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以令所有判定区内有牌的角色弃置判定区内的牌，然后交给你一张手牌"},"mailun":{"name":"脉轮","script":"{unique: \"true\",trigger: {player: \"phaseBegin\",},direct: \"true\",intro: {content: function (storage){\n\t\t\t\t\t\tif(!storage) return '无';\n\t\t\t\t\t\treturn lib.skill.mailun.effects[storage-1];\n\t\t\t\t\t},},effects: [\"减少一点体力并增加一点体力上限\",\"增加一点体力并减少一点体力上限\",\"令你即将造成和即将受到的首次伤害-1\",\"令你即将造成和即将受到的首次伤害+1\",\"少摸一张牌并令手牌上限+1\",\"多摸一张牌并令手牌上限-1\",\"进攻距离+1，防御距离-1\",\"进攻距离-1，防御距离+1\"],content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.removeSkill('mailun31');\n\t\t\t\t\tplayer.removeSkill('mailun32');\n\t\t\t\t\tplayer.removeSkill('mailun41');\n\t\t\t\t\tplayer.removeSkill('mailun42');\n\t\t\t\t\tplayer.removeSkill('mailun5');\n\t\t\t\t\tplayer.removeSkill('mailun6');\n\t\t\t\t\tplayer.removeSkill('mailun7');\n\t\t\t\t\tplayer.removeSkill('mailun8');\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tui.auto.hide();\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('脉轮：选择一个效果','forcebutton');\n\t\t\t\t\t\tvar effects=lib.skill.mailun.effects;\n\t\t\t\t\t\tvar clickItem=function(){\n\t\t\t\t\t\t\tevent.choice=this.link;\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<8;i++){\n\t\t\t\t\t\t\tif(i==0&&player.maxHp==6) continue;\n\t\t\t\t\t\t\tvar item=event.dialog.add('<div class=\"popup pointerdiv\" style=\"width:70%;display:inline-block\"><div class=\"skill\">【'+\n\t\t\t\t\t\t\tget.cnNumber(i+1,true)+'】</div><div>'+effects[i]+'</div></div>');\n\t\t\t\t\t\t\titem.addEventListener('click',clickItem);\n\t\t\t\t\t\t\titem.link=i+1;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.control=ui.create.control('取消',function(){\n\t\t\t\t\t\t\tevent.choice=0;\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tevent.dialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\t\tevent.dialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\t\tevent.dialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar ctrl;\n\t\t\t\t\t\tif(player.hp<=1){\n\t\t\t\t\t\t\tif(player.maxHp>3){\n\t\t\t\t\t\t\t\tctrl=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tctrl=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(player.hp==2){\n\t\t\t\t\t\t\tif(player.maxHp>4){\n\t\t\t\t\t\t\t\tctrl=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(player.countCards('h')==0){\n\t\t\t\t\t\t\t\tctrl=6;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tctrl=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(player.countCards('h')<player.hp){\n\t\t\t\t\t\t\tctrl=6;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(player.countCards('h')>player.hp+1){\n\t\t\t\t\t\t\tctrl=5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.choice=ctrl;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tui.auto.show();\n\t\t\t\t\tplayer.storage.mailun=event.choice;\n\t\t\t\t\tgame.addVideo('storage',player,['mailun',player.storage.mailun]);\n\t\t\t\t\tif(event.choice){\n\t\t\t\t\t\tplayer.logSkill('mailun');\n\t\t\t\t\t\tplayer.markSkill('mailun');\n\t\t\t\t\t\tswitch(event.choice){\n\t\t\t\t\t\t\tcase 1:{\n\t\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 2:{\n\t\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 3:{\n\t\t\t\t\t\t\t\tplayer.addSkill('mailun31');\n\t\t\t\t\t\t\t\tplayer.addSkill('mailun32');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 4:{\n\t\t\t\t\t\t\t\tplayer.addSkill('mailun41');\n\t\t\t\t\t\t\t\tplayer.addSkill('mailun42');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 5:{\n\t\t\t\t\t\t\t\tplayer.addSkill('mailun5');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 6:{\n\t\t\t\t\t\t\t\tplayer.addSkill('mailun6');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 7:{\n\t\t\t\t\t\t\t\tplayer.addSkill('mailun7');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 8:{\n\t\t\t\t\t\t\t\tplayer.addSkill('mailun8');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.unmarkSkill('mailun');\n\t\t\t\t\t}\n\n\t\t\t\t\tif(event.dialog){\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.control){\n\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段，你可以选择一个脉轮效果直到下一回合开始"},"suiyan":{"name":"碎岩","script":"{trigger: {source: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.player.countCards('e');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar att=get.attitude(player,trigger.player);\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt('suiyan'));\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(att<0) return 7-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill=['suiyan',trigger.player];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.discard(trigger.player.getCards('e'));\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"每当你造成一次伤害，可以弃置一张牌并弃置对方的全部装备牌"},"duanxing":{"name":"锻星","script":"{trigger: {player: \"equipEnd\",},direct: \"true\",filter: function (event){\n\t\t\t\t\treturn lib.inpile.contains(event.card.name);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('duanxing'),function(card,player,target){\n\t\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,target);\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('duanxing');\n\t\t\t\t\t\tplayer.useCard({name:'sha'},result.targets,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"每当你装备一张未强化的装备牌，可以视为一名角色使用一张杀"},"wanjun":{"name":"万钧","script":"{enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'})>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t},position: \"he\",viewAs: {name: \"nanman\",},prompt: \"将一张装备牌当南蛮入侵使用\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\tif(player.countCards('h')<player.hp){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 2-get.equipValue(card);\n\t\t\t\t},ai: {order: \"9\",threaten: \"1.1\",wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','sha')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"9\",useful: [5,1],value: \"5\",},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondSha: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"你可以将一张装备牌当作南蛮入侵使用"},"guanhu":{"name":"贯鹄","script":"{trigger: {source: \"damageEnd\",},direct: \"true\",filter: function (event){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player.countCards('he');\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=1;\n\t\t\t\t\tif(trigger.player.countCards('e')&&trigger.player.countCards('h')){\n\t\t\t\t\t\tnum=2;\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.discardPlayerCard(trigger.player,[1,num],get.prompt('guanhu',trigger.player));\n\t\t\t\t\tnext.logSkill=['guanhu',trigger.player];\n\t\t\t\t\tnext.filterButton=function(button){\n\t\t\t\t\t\tif(ui.selected.buttons.length) return get.position(button.link)!=get.position(ui.selected.buttons[0].link);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"每当你使用杀造成伤害，你可以弃置对方一张手牌和一张装备牌"},"lingshi":{"name":"灵矢","script":"{mod: {attackFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-from.countCards('e')*2;\n\t\t\t\t\t},cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha'&&player.getEquip(5)) return num+1;\n\t\t\t\t\t},},group: [\"lingshi_hit\",\"lingshi_draw\"],subSkill: {hit: {trigger: {player: \"shaBegin\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn player.getEquip(1)||player.getEquip(2);\n\t\t\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t\t\t},sub: \"true\",},draw: {trigger: {player: \"phaseDrawBegin\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn player.getEquip(3)||player.getEquip(4);\n\t\t\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"你的装备区内每有一张牌，你的攻击范围+2；当你的装备区内有武器牌或防具牌时，你的杀不可闪避；当你的装备区内有马时，你摸牌阶段额外摸一张牌；当你的装备内的宝物牌时，你回合内可以额外使用一张杀"},"sliufeng":{"name":"流风","script":"{mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(card.name=='sha'&&player.hp>=target.hp){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，体力值不大于你的角色视为在你的攻击范围"},"linyun":{"name":"凌云","script":"{enable: \"chooseToUse\",filterCard: \"true\",selectCard: \"2\",position: \"he\",viewAs: {name: \"sha\",},prompt: \"将两张牌当杀使用\",check: function (card){\n\t\t\t\t\tif(_status.event.player.countCards('h')<4) return 6-get.useful(card);\n\t\t\t\t\treturn 7-get.useful(card);\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},group: [\"linyun2\"],}","info":"你可以将两张牌当作杀使用，此杀需要额外一张闪才能闪避"},"hutian":{"name":"护天","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&!player.storage.hutian;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target.maxHp>=ui.selected.cards.length;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tselectCard:[1,player.countCards('he')],\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tvar useful=get.useful(card);\n\t\t\t\t\t\t\tif(card.name=='du'){\n\t\t\t\t\t\t\t\tuseful=-5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(ui.selected.cards.length==0&&player.hp==1) return 11-useful;\n\t\t\t\t\t\t\tif(ui.selected.cards.length>1) return 0;\n\t\t\t\t\t\t\treturn 7-useful;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tif(target.hp>ui.selected.cards.length){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tprompt:get.prompt('hutian')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.$give(result.cards,target);\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special);\n\t\t\t\t\t\tplayer.storage.hutian=target;\n\t\t\t\t\t\tplayer.logSkill('hutian',result.targets);\n\t\t\t\t\t\tplayer.addTempSkill('hutian4');\n\t\t\t\t\t\ttarget.addSkill('hutian2');\n\t\t\t\t\t\ttarget.storage.hutian2=result.cards;\n\t\t\t\t\t\tgame.addVideo('storage',target,['hutian2',get.cardsInfo(result.cards),'cards']);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar target=event.target;\n\t\t\t\t\tif(target.storage.hutian2&&target.hp<target.storage.hutian2.length){\n\t\t\t\t\t\ttarget.recover(target.storage.hutian2.length-target.hp);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.5\",},group: \"hutian3\",}","info":"结束阶段，你可以将任意张牌置于一名角色的武将牌上，则该角色的体力值始终不能小于“护天”牌数；在你的下一个结束阶段，该角色获得武将牌上的“护天”牌（在此回合不能再次发动）"},"xingzhui":{"name":"星坠","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(get.type(card)=='equip'){\n\t\t\t\t\t\tvar distance=get.info(card).distance;\n\t\t\t\t\t\tif(distance){\n\t\t\t\t\t\t\tif(distance.attackFrom<0||distance.globalFrom<0) return 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.type=get.type(cards[0],'trick');\n\t\t\t\t\tvar dme=get.damageEffect(target,player,target);\n\t\t\t\t\ttarget.chooseToDiscard('he',function(card){\n\t\t\t\t\t\treturn get.type(card,'trick')==event.type;\n\t\t\t\t\t},'弃置一张牌'+get.translation(event.type)+'牌，或受到1点伤害').ai=function(card){\n\t\t\t\t\t\tif(dme<0){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},threaten: \"2\",expose: \"0.2\",},}","info":"出牌阶段限一次，你可以弃置一张牌，并令一名有牌的其他角色弃置一张类别相同的牌，若则受到一点伤害"},"lingxian":{"name":"凌仙","script":"{trigger: {player: [\"respond\",\"useCard\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase) return false;\n\t\t\t\t\tif(get.itemtype(event.cards)!='cards') return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(player,current,'attack')>1&&player!=current;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('lingxian'),function(card,player,target){\n\t\t\t\t\t\treturn get.distance(player,target,'attack')>1&&player!=target;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=-0.5) return 0;\n\t\t\t\t\t\tif(att<=3) return att+0.5;\n\t\t\t\t\t\treturn att+Math.min(0.5,5-target.countCards('h'));\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.asyncDraw([player,result.targets[0]]);\n\t\t\t\t\t\tplayer.logSkill('lingxian',result.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {mingzhi: \"false\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player==_status.currentPhase) return;\n\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.distance(player,current,'attack')>1&&player!=current&&get.attitude(player,current)>=0;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&player==target){\n\t\t\t\t\t\t\t\tvar distance=get.info(card).distance;\n\t\t\t\t\t\t\t\tif(distance){\n\t\t\t\t\t\t\t\t\tif(distance.attackFrom<0||distance.globalFrom<0) return 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tvar hs=target.countCards('h');\n\t\t\t\t\t\t\t\tif(get.tag(card,'respondShan')){\n\t\t\t\t\t\t\t\t\tvar shans=target.countCards('h','shan');\n\t\t\t\t\t\t\t\t\tif(shans>1) return [0,1];\n\t\t\t\t\t\t\t\t\tif(shans&&hs>2) return [0,1];\n\t\t\t\t\t\t\t\t\tif(shans) return [0,0];\n\t\t\t\t\t\t\t\t\tif(hs>2) return [0,0];\n\t\t\t\t\t\t\t\t\tif(hs>1) return [1,0.5];\n\t\t\t\t\t\t\t\t\treturn [1.5,0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(get.tag(card,'respondSha')){\n\t\t\t\t\t\t\t\t\tvar shas=target.countCards('h','sha');\n\t\t\t\t\t\t\t\t\tif(shas>1) return [0,1];\n\t\t\t\t\t\t\t\t\tif(shas&&hs>2) return [0,1];\n\t\t\t\t\t\t\t\t\tif(shas) return [0,0];\n\t\t\t\t\t\t\t\t\tif(hs>2) return [0,0];\n\t\t\t\t\t\t\t\t\tif(hs>1) return [1,0.5];\n\t\t\t\t\t\t\t\t\treturn [1.5,0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"0.8\",expose: \"0.1\",},}","info":"每当你于回合外使用或打出一张手牌，你可以选择攻击范围外的一名其他角色与你各摸一张牌"},"shouyin":{"name":"守印","script":"{skillAnimation: \"epic\",animationColor: \"water\",unique: \"true\",enable: \"chooseToUse\",init: function (player){\n\t\t\t\t\tplayer.storage.shouyin=false;\n\t\t\t\t},mark: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.type!='dying') return false;\n\t\t\t\t\tif(player.storage.shouyin) return false;\n\t\t\t\t\tif(player.isTurnedOver()) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('shouyin');\n\t\t\t\t\tplayer.storage.shouyin=true;\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.targets=game.filterPlayer();\n\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar target=event.targets.shift();\n\t\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\t\tvar num=target.maxHp-target.hp;\n\t\t\t\t\t\t\tif(get.is.altered('shouyin')) num=Math.min(2,num);\n\t\t\t\t\t\t\ttarget.recover(num);\n\t\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.storage.shouyin) return false;\n\t\t\t\t\t},expose: \"0.3\",save: \"true\",result: {player: function (player){\n\t\t\t\t\t\t\tif(_status.event.dying!=player&&get.attitude(player,_status.event.dying)<=0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tvar del=players[i].maxHp-players[i].hp;\n\t\t\t\t\t\t\t\tif(get.is.altered('shouyin')) del=Math.min(2,del);\n\t\t\t\t\t\t\t\tdel/=Math.pow(1+players[i].hp,0.2);\n\t\t\t\t\t\t\t\tnum+=get.sgnAttitude(player,players[i])*del;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},},},intro: {content: \"limited\",},}","info":"限定技，当任意一名角色处于濒死状态时，若你的武将牌正朝上，可以将武将牌翻面，然后令场上所有存活角色将体力回复至体力上限"},"guaili":{"name":"怪力","script":"{trigger: {source: \"damageBegin\",},filter: function (event){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.parent.name!='_lianhuan'&&event.parent.name!='_lianhuan2';\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t\tplayer.addSkill('guaili2');\n\t\t\t\t},}","info":"锁定技，你的杀造成的伤害+1，造成伤害后需弃置两张手牌"},"fuyan":{"name":"覆岩","script":"{trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event){\n\t\t\t\t\treturn event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('fuyan'),function(card,player,target){\n\t\t\t\t\t\treturn !target.hujia;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tif(get.attitude(player,target)<=0) return 0;\n\t\t\t\t\t\tvar eff=-get.damageEffect(target,target,player)+(player==target?2:0);\n\t\t\t\t\t\tif(target.hp==1) eff+=2;\n\t\t\t\t\t\treturn Math.min(1,eff);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('fuyan',result.targets);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\ttarget.changeHujia();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\treturn 0.7;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},expose: \"0.2\",},}","info":"每当你受到一次伤害，可以令一名没有护甲的角色获得一点护甲值"},"fzhenwei":{"name":"镇威","script":"{trigger: {global: \"respondEnd\",},filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.position(event.cards[i])=='d') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=trigger.cards.slice(0);\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.position(cards[i])!='d'){\n\t\t\t\t\t\t\tcards.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tplayer.chooseTarget(get.prompt('fzhenwei'),function(card,player,target){\n\t\t\t\t\t\treturn target!=trigger.player;\n\t\t\t\t\t}).set('autodelay',0.5).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=0) return 0;\n\t\t\t\t\t\tif(att>3){\n\t\t\t\t\t\t\treturn 100-target.countCards('h');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('fzhenwei',result.targets);\n\t\t\t\t\t\tresult.targets[0].gain(event.cards,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",threaten: \"1.6\",},}","info":"在你的回合内，你可以将其他角色打出的卡牌交给除该角色外的任意一名角色"},"shangxi":{"name":"伤袭","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('he')==0) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn (current!=player&&get.distance(player,current,'attack')<=1&&player.hp<=current.hp);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn get.distance(player,target,'attack')<=1&&\n\t\t\t\t\t\t\t\tplayer!=target&&player.hp<=target.hp;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt('shangxi')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tplayer.logSkill('shangxi',result.targets);\n\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"准备阶段，你可以弃置一张牌，并对攻击范围内一名体力值不小于你的其他角色造成一点伤害"},"jilve":{"name":"极略","script":"{enable: \"phaseUse\",usable: \"3\",onChooseToUse: function (event){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tvar num=3;\n\t\t\t\t\tif(get.is.altered('jilve')){\n\t\t\t\t\t\tnum=2;\n\t\t\t\t\t}\n\t\t\t\t\tif(ui.cardPile.childNodes.length<num){\n\t\t\t\t\t\tvar discardcards=get.cards(num);\n\t\t\t\t\t\tfor(var i=0;i<discardcards.length;i++){\n\t\t\t\t\t\t\tdiscardcards[i].discard();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<num;i++){\n\t\t\t\t\t\tcards.push(ui.cardPile.childNodes[i]);\n\t\t\t\t\t}\n\t\t\t\t\tevent.set('jilvecards',cards);\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\treturn ui.create.dialog('极略：选择一张基本牌或锦囊牌使用',event.jilvecards);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(evt&&evt.filterCard){\n\t\t\t\t\t\t\tvar type=get.type(button.link,'trick');\n\t\t\t\t\t\t\treturn type!='equip'&evt.filterCard(button.link,player,evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tif(button.link.name=='du') return 0;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tviewAs:links[0],\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '选择'+get.translation(links)+'的目标';\n\t\t\t\t\t},},ai: {order: \"12\",result: {player: \"1\",},threaten: \"1.7\",},}","info":"出牌阶段，你可以观看牌堆顶的三张牌，然后使用其中的非装备牌。每回合最多发动三次"},"gongshen":{"name":"工神","script":"{trigger: {global: \"useCard\",},priority: \"15\",filter: function (event,player){\n\t\t\t\t\tvar type=get.type(event.card,'trick');\n\t\t\t\t\tif(type!='basic'&&type!='trick') return false;\n\t\t\t\t\treturn event.player!=player&&player.countCards('he',{type:'equip'})>0&&\n\t\t\t\t\t\tevent.targets&&event.targets.length>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar effect=0;\n\t\t\t\t\tfor(var i=0;i<trigger.targets.length;i++){\n\t\t\t\t\t\teffect+=get.effect(trigger.targets[i],trigger.card,trigger.player,player);\n\t\t\t\t\t}\n\t\t\t\t\tvar str='弃置一张装备牌令'+get.translation(trigger.player);\n\t\t\t\t\tif(trigger.targets&&trigger.targets.length){\n\t\t\t\t\t\tstr+='对'+get.translation(trigger.targets);\n\t\t\t\t\t}\n\t\t\t\t\tstr+='的'+get.translation(trigger.card)+'失效'\n\t\t\t\t\tvar next=player.chooseToDiscard('he',{type:'equip'},get.prompt('gongshen'));\n\t\t\t\t\tnext.prompt2=str;\n\t\t\t\t\tnext.logSkill=['gongshen',trigger.player];\n\t\t\t\t\tnext.autodelay=true;\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(effect<0){\n\t\t\t\t\t\t\tvar val=9-get.value(card);\n\t\t\t\t\t\t\tvar nme=trigger.card.name;\n\t\t\t\t\t\t\tif(get.value(trigger.card)>=7&&get.type(trigger.card)=='trick') return val;\n\t\t\t\t\t\t\tif(nme=='tao') return val;\n\t\t\t\t\t\t\tif(nme=='wuzhong') return val;\n\t\t\t\t\t\t\tif(nme=='zengbin') return val;\n\t\t\t\t\t\t\tif(nme=='wangmeizhike') return val;\n\t\t\t\t\t\t\tif(nme=='shunshou'&&player==trigger.targets[0]) return val;\n\t\t\t\t\t\t\tif(nme=='guohe'&&player==trigger.targets[0]) return val;\n\t\t\t\t\t\t\tif(nme=='liuxinghuoyu') return val;\n\t\t\t\t\t\t\tif(nme=='nanman') return val;\n\t\t\t\t\t\t\tif(nme=='wanjian') return val;\n\t\t\t\t\t\t\tif(nme=='jingleishan') return val;\n\t\t\t\t\t\t\tif(nme=='chiyuxi') return val;\n\t\t\t\t\t\t\tif((nme=='juedou')&&(player==trigger.targets[0]||trigger.targets[0].hp==1)) return val;\n\t\t\t\t\t\t\tif(nme=='chenhuodajie') return val;\n\t\t\t\t\t\t\tif(nme=='lebu'&&trigger.targets[0].countCards('h')>trigger.targets[0].hp) return val;\n\t\t\t\t\t\t\tif(nme=='sha'&&trigger.targets[0].hp==1&&!trigger.targets[0].hasShan()) return val;\n\t\t\t\t\t\t\tif(nme=='jiedao'&&trigger.targets[0]==player) return val;\n\t\t\t\t\t\t\tif(nme=='yihuajiemu'&&trigger.targets[0]==player) return val;\n\t\t\t\t\t\t\tif(nme=='shuiyanqijun'&&trigger.targets.contains(player)) return val;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t// game.delay(2);\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(player!=target) return;\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!player.needsToDiscard()){\n\t\t\t\t\t\t\t\treturn [0,0,0,0];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"2\",expose: \"0.3\",},}","info":"任意一名其他角色使用一张基本牌或锦囊牌指定目标后，你可以弃置一张装备牌令其失效"},"gaizao":{"name":"改造","script":"{trigger: {player: \"useCardToBegin\",},filter: function (event,player){\n\t\t\t\t\tif(player!=event.target&&player.countCards('e')==5) return false;\n\t\t\t\t\treturn lib.skill.gaizao.filterx(event.card,player)&&event.target==player;\n\t\t\t\t},direct: \"true\",filterx: function (card,player){\n\t\t\t\t\tif(!lib.inpile.contains(card.name)) return false;\n\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\tif(info.type!='equip') return false;\n\t\t\t\t\tif(info.nomod) return false;\n\t\t\t\t\tif(info.unique) return false;\n\t\t\t\t\tif(!info.subtype) return false;\n\t\t\t\t\tif(!player.getEquip(info.subtype)) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=['equip1','equip2','equip3','equip4','equip5'];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(player.getEquip(list[i])){\n\t\t\t\t\t\t\tlist.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlist.push('cancel2');\n\t\t\t\t\tplayer.chooseControl(list,function(){\n\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t}).prompt='改造：是否改变'+get.translation(trigger.card.name)+'的装备类型？';\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control&&result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('gaizao');\n\t\t\t\t\t\tvar name=trigger.card.name+'_gaizao_'+result.control;\n\t\t\t\t\t\tif(!lib.card[name]){\n\t\t\t\t\t\t\tlib.card[name]=get.copy(get.info(trigger.card));\n\t\t\t\t\t\t\tlib.card[name].subtype=result.control;\n\t\t\t\t\t\t\tlib.card[name].epic=true;\n\t\t\t\t\t\t\tlib.card[name].cardimage=trigger.card.name;\n\t\t\t\t\t\t\tlib.card[name].source=[trigger.card.name];\n\t\t\t\t\t\t\tlib.translate[name]=lib.translate[trigger.card.name];\n\t\t\t\t\t\t\tlib.translate[name+'_info']=lib.translate[trigger.card.name+'_info'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger.card.name=name;\n\t\t\t\t\t\ttrigger.cards[0].init([trigger.card.suit,trigger.card.number,name,trigger.card.nature]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(target==player&&lib.skill.gaizao.filterx(card,target)&&target.countCards('e')<5){\n\t\t\t\t\t\t\t\treturn [1,3];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每当你即将装备一张牌（特殊类装备除外），若你的装备区内对应位置已有牌，你可以永久改变此牌的装备类型使其装备在装备区内的空余位置"},"zhanxing":{"name":"占星","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: \"true\",selectCard: [1,null],filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tswitch(ui.selected.cards.length){\n\t\t\t\t\t\tcase 0: return 8-get.value(card);\n\t\t\t\t\t\tcase 1: return 6-get.value(card);\n\t\t\t\t\t\tcase 2: return 3-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=get.cards(cards.length);\n\t\t\t\t\tevent.list=list;\n\t\t\t\t\tplayer.showCards(list);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tevent.suits=suits;\n\t\t\t\t\tfor(var i=0;i<event.list.length;i++){\n\t\t\t\t\t\tsuits.add(get.suit(event.list[i]));\n\t\t\t\t\t\tevent.list[i].discard();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.suits.contains('diamond')){\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.suits.contains('heart')){\n\t\t\t\t\t\tif(player.isDamaged()){\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(event.suits.contains('club')){\n\t\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\t\tfor(var i=0;i<enemies.length;i++){\n\t\t\t\t\t\t\tenemies[i].randomDiscard();\n\t\t\t\t\t\t\tenemies[i].addExpose(0.1);\n\t\t\t\t\t\t\tplayer.line(enemies[i],'green');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.suits.contains('spade')){\n\t\t\t\t\t\tplayer.chooseTarget('令一名角色受到一点无来源的雷属性伤害').ai=function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,target,player,'thunder');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets[0],'thunder');\n\t\t\t\t\t\tresult.targets[0].damage('thunder','nosource','nocard');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"5\",result: {player: \"1\",},threaten: \"1.5\",},}","info":"出牌阶段限一次，你可以弃置任意张牌，并亮出牌堆顶的等量的牌，并根据亮出的牌包含的花色执行以下效果：♦︎摸两张牌；♥回复一点体力（若未损失体力改为获得一点护甲）；♣令所有敌人随机弃置一张牌；♠令一名角色受到一点无来源的雷属性伤害"},"kbolan":{"name":"博览","script":"{trigger: {player: \"drawBegin\",},frequent: \"true\",priority: \"5\",content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t\ttrigger.id=trigger.id||get.id();\n\t\t\t\t\tplayer.storage.kbolan2=trigger.id;\n\t\t\t\t\tplayer.addTempSkill('kbolan2');\n\t\t\t\t},}","info":"每当你摸牌时，你可以额外摸一张牌，然后摸牌结束时将一张手牌置于牌堆顶"},"swd_wuxie":{"name":"无邪","script":"{mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\tif(get.type(card)=='delay'&&player!=target){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，你不能成为其他角色的延时锦囊的目标"},"lqingcheng":{"name":"倾城","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(event.cards==undefined) event.cards=[];\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tif(get.color(card)=='red') return 1.5;\n\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t},ui.special);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.judge>0){\n\t\t\t\t\t\tevent.cards.push(result.card);\n\t\t\t\t\t\tif(event.cards.length==3){\n\t\t\t\t\t\t\tplayer.gain(event.cards);\n\t\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\t\tplayer.$draw(event.cards);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(lib.config.autoskilllist.contains('lqingcheng')){\n\t\t\t\t\t\t\tplayer.chooseBool('是否再次发动【倾城】？');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent._result={bool:true};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gain(event.cards);\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.$draw(event.cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.goto(0);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gain(event.cards);\n\t\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\t\tplayer.$draw(event.cards);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",},}","info":"结束阶段，你可以进行判定，若为红色则可以继续判定，最多判定3次，判定结束后将判定成功的牌收入手牌"},"busi":{"name":"不死","script":"{trigger: {player: \"dying\",},priority: \"7\",unique: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.suit(card)=='spade'?-1:1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.recover(1-player.hp);\n\t\t\t\t\t\tplayer.turnOver(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",},}","info":"锁定技，当你进入濒死状态时，你进行一次判定，若结果不为黑桃，你将体力回复至1并将武将牌翻至背面"},"xuying":{"name":"虚影","script":"{unique: \"true\",trigger: {player: \"damageBefore\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tif(player.countCards('h')) player.loseHp();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.countCards('h')==0) return 0;\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你即将受到伤害，你防止此伤害，若你此时有手牌，你流失一点体力"},"yinguo":{"name":"因果","script":"{unique: \"true\",trigger: {global: \"damageBefore\",},priority: \"6\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.player==player||event.source==player) return false;\n\t\t\t\t\tif(!event.source) return false;\n\t\t\t\t\tif(player.countCards('he')==0) return false;\n\t\t\t\t\tif(player.hasSkill('yinguo2')) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar go=get.attitude(player,trigger.player)>0&&\n\t\t\t\t\t\tget.attitude(player,trigger.source)<0&&\n\t\t\t\t\t\tget.damageEffect(trigger.player,trigger.source,player)<\n\t\t\t\t\t\tget.damageEffect(trigger.source,trigger.player,player);\n\t\t\t\t\tvar next=player.chooseToDiscard('是否将伤害来源（'+get.translation(trigger.source)+\n\t\t\t\t\t\t'）和目标（'+get.translation(trigger.player)+'）对调？','he');\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(go){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill='yinguo';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=trigger.player;\n\t\t\t\t\t\ttrigger.player=trigger.source;\n\t\t\t\t\t\ttrigger.source=target;\n\t\t\t\t\t\ttrigger.trigger('damageBefore');\n\t\t\t\t\t\tplayer.addTempSkill('yinguo2',['damageAfter','damageCancelled']);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"10\",expose: \"0.5\",},global: \"yinguo3\",}","info":"除你之外的任意一名角色即将受到受到伤害时，若有伤害来源，你可以弃置一张牌将伤害来源和目标对调"},"chengjian":{"name":"承剑","script":"{trigger: {global: \"damageEnd\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.source)>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.card&&event.card.name=='sha'&&event.source!=player;\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\ttrigger.source.draw();\n\t\t\t\t},ai: {expose: \"0.1\",threaten: \"1.2\",},}","info":"每当其他角色使用杀造成一次伤害，你可以令其摸一张牌"},"huanling":{"name":"幻灵","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('huanling'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tif(target.hasSkillTag('noturn')) return 0;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(target.isTurnedOver()){\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\treturn att+5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.isTurnedOver()){\n\t\t\t\t\t\t\treturn 5-att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(att<=-3){\n\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('huanling',result.targets);\n\t\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t\tresult.targets[0].turnOver();\n\t\t\t\t\t}\n\t\t\t\t},group: \"huanling2\",ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='guiyoujie') return [0,2];\n\t\t\t\t\t\t\tif(target.isTurnedOver()){\n\t\t\t\t\t\t\t\tif(get.tag(card,'damage')) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},expose: \"0.2\",},}","info":"结束阶段，你可以选择一名角色与你同时翻面；翻面状态下，你防止一切伤害"},"hwendao":{"name":"问道","script":"{trigger: {player: [\"useCardAfter\",\"respondAfter\"],},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,_status.currentPhase)<=0;\n\t\t\t\t},logTarget: function (){\n\t\t\t\t\treturn _status.currentPhase;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase) return false;\n\t\t\t\t\tif(!_status.currentPhase.countCards('he')) return false;\n\t\t\t\t\treturn event.cards&&event.cards.length==1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar suit=get.suit(trigger.cards[0]);\n\t\t\t\t\tvar goon=(get.attitude(_status.currentPhase,player)<=0);\n\t\t\t\t\t_status.currentPhase.chooseToDiscard('弃置一张'+get.translation(suit+'2')+\n\t\t\t\t\t'牌，或令'+get.translation(player)+'获得你的一张牌',{suit:suit}).ai=function(card){\n\t\t\t\t\t\tif(goon) return 8-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tplayer.gainPlayerCard(_status.currentPhase,'he',true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.7\",},}","info":"每当你于回合外使用或打出一张牌，你可以令当前回合角色弃置一张与之花色相同的牌，否则你获得其一张牌"},"lingfeng":{"name":"凌锋","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countUsed()>=Math.min(3,player.hp);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('凌锋',function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&get.distance(player,target,'attack')<=1;\n\t\t\t\t\t}).set('prompt2','造成一点伤害，或取消并获得一点护甲').ai=function(target){\n\t\t\t\t\t\tif(player.hp==1) return 0;\n\t\t\t\t\t\tif(player.hp==2&&target.hp>=3) return 0;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets[0]);\n\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"-10\",result: {target: \"2\",},threaten: \"1.5\",},}","info":"结束阶段，若你本回合内使用了至少X张牌，你可以选择一项：获得一点护甲，或对攻击范围内的一名角色造成一点伤害（X为你当前的体力值且最多为3）"},"hxunzhi":{"name":"殉志","script":"{unique: \"true\",enable: \"phaseUse\",derivation: [\"wusheng\",\"paoxiao\"],filter: function (event,player){\n\t\t\t\t\treturn !player.storage.hxunzhi;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.hxunzhi=false;\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},skillAnimation: \"true\",animationColor: \"fire\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('hxunzhi');\n\t\t\t\t\tplayer.storage.hxunzhi=true;\n\t\t\t\t\tif(!get.is.altered('hxunzhi')){\n\t\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn player.canUse('wanjian',current);\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\t\tplayer.useCard({name:'wanjian'},targets);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.addSkill('wusheng');\n\t\t\t\t\tplayer.addSkill('paoxiao');\n\t\t\t\t\tplayer.addSkill('hxunzhi2');\n\t\t\t\t},ai: {order: \"2\",result: {player: function (player){\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(player.identity=='zhu') return 0;\n\t\t\t\t\t\t\t\tif(player.identity=='nei') return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.mode()=='guozhan'){\n\t\t\t\t\t\t\t\tif(player.identity=='ye') return 0;\n\t\t\t\t\t\t\t\tif(player.isUnseen()) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hp==1) return 1;\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\tif(!player.hasFriend()) return 0;\n\t\t\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\t\t\tif(enemies.length+1==game.players.length) return 0;\n\t\t\t\t\t\t\tvar num=player.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn card.name=='sha'||get.color(card)=='red';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(num<2) return 0;\n\t\t\t\t\t\t\tfor(var i=0;i<enemies.length;i++){\n\t\t\t\t\t\t\t\tif(player.canUse('sha',enemies[i])&&\n\t\t\t\t\t\t\t\tget.effect(enemies[i],{name:'sha'},player,player)>0&&\n\t\t\t\t\t\t\t\t!enemies[i].getEquip(2)&&num>enemies[i].hp&&enemies[i].hp<=2){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以视为使用一张万箭齐发并获得技能武圣、咆哮，若如此做，你在此阶段结束时死亡"},"shehun":{"name":"摄魂","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tif(get.suit(ui.selected.cards[i])==suit) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},complexCard: \"true\",selectCard: [1,4],check: function (card){\n\t\t\t\t\treturn 7-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tevent.suits=suits;\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tsuits.push(get.suit(cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tvar hs=target.getCards('he');\n\t\t\t\t\tvar hss={\n\t\t\t\t\t\tclub:[],\n\t\t\t\t\t\tdiamond:[],\n\t\t\t\t\t\tspade:[],\n\t\t\t\t\t\theart:[]\n\t\t\t\t\t}\n\t\t\t\t\tvar choice=[];\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tvar suity=get.suit(hs[i]);\n\t\t\t\t\t\tif(hss[suity]){\n\t\t\t\t\t\t\thss[suity].push(hs[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i in hss){\n\t\t\t\t\t\tif(!suits.contains(i)){\n\t\t\t\t\t\t\tchoice=choice.concat(hss[i]);\n\t\t\t\t\t\t\tdelete hss[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(choice.length<cards.length){\n\t\t\t\t\t\tchoice.length=0;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.chooseToDiscard(cards.length,true,'he').ai=function(card){\n\t\t\t\t\t\tvar num=choice.contains(card)?20:0;\n\t\t\t\t\t\treturn num-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar damage=false;\n\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\tif(event.suits.contains(get.suit(result.cards[i]))){\n\t\t\t\t\t\t\tdamage=true;break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(damage){\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"6\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,player);\n\t\t\t\t\t\t\tvar num=target.countCards('he');\n\t\t\t\t\t\t\tvar length=ui.selected.cards.length;\n\t\t\t\t\t\t\tif(num==length) return -2+eff;\n\t\t\t\t\t\t\tif(num>length) return -1.5+eff;\n\t\t\t\t\t\t\treturn -1+eff;\n\t\t\t\t\t\t},},expose: \"0.2\",},}","info":"出牌阶段限一次，你可以弃置任意张花色不同的牌，另一名其他角色弃置等量的牌，若其弃置的牌中有牌的花色与你弃置的牌相同，你对其造成一点伤害"},"xiaomoyu":{"name":"魔愈","script":"{trigger: {source: \"damageEnd\",},priority: \"1\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('xiaomoyu2');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.addTempSkill('xiaomoyu2');\n\t\t\t\t\tif(player.hp<player.maxHp){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='draw_card'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&(get.color(card)=='red')){\n\t\t\t\t\t\t\t\treturn [1,-2];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，每当你于一个回合内首次造成伤害，你回复一点体力，若你没有受伤，则改为摸一张牌"},"huanxing":{"name":"幻形","script":"{trigger: {player: \"phaseBegin\",},group: \"huanxing2\",direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(player.countCards('he')){\n\t\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\t\tprompt:get.prompt('huanxing'),\n\t\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\t\t\t\tif(target.sex!='male') return false;\n\t\t\t\t\t\t\t\tvar name=target.name.indexOf('unknown')==0?target.name2:target.name;\n\t\t\t\t\t\t\t\tif(name==player.storage.huanxing) return false;\n\n\t\t\t\t\t\t\t\tvar info=lib.character[name];\n\t\t\t\t\t\t\t\tif(info){\n\t\t\t\t\t\t\t\t\tvar skills=info[3];\n\t\t\t\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\t\t\t\tif(lib.translate[skills[j]+'_info']&&lib.skill[skills[j]]&&\n\t\t\t\t\t\t\t\t\t\t\t!lib.skill[skills[j]].unique&&!player.hasSkill(skills[j])){\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\tif(player.additionalSkills.huanxing&&player.additionalSkills.huanxing.length>0) return 0;\n\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\t\tif(target.isMin()) return 0;\n\t\t\t\t\t\t\t\treturn 6-target.maxHp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.unmark(player.storage.huanxing+'_charactermark');\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tplayer.logSkill('huanxing',result.targets);\n\t\t\t\t\t\tvar name=result.targets[0].name;\n\t\t\t\t\t\tif(name.indexOf('unknown')==0){\n\t\t\t\t\t\t\tname=result.targets[0].name2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tvar skills=lib.character[name][3];\n\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\tif(lib.translate[skills[j]+'_info']&&lib.skill[skills[j]]&&\n\t\t\t\t\t\t\t\t!lib.skill[skills[j]].unique&&!player.hasSkill(skills[j])){\n\t\t\t\t\t\t\t\tlist.push(skills[j]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.addAdditionalSkill('huanxing',list);\n\t\t\t\t\t\tplayer.markCharacter(name,null,true,true);\n\t\t\t\t\t\tgame.addVideo('markCharacter',player,{\n\t\t\t\t\t\t\tname:'幻形',\n\t\t\t\t\t\t\tcontent:'',\n\t\t\t\t\t\t\tid:'huanxing',\n\t\t\t\t\t\t\ttarget:name\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.storage.huanxing=name;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"准备阶段，你可以弃置一张牌并选择一名男性角色，获得其所有技能，直到你首次受到伤害"},"meihuo":{"name":"魅惑","script":"{trigger: {player: [\"loseEnd\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.equiping) return false;\n\t\t\t\t\tif(player.countCards('e')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='e') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget([1,1],get.prompt('meihuo'),function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\treturn target.countCards('he')>0;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=0){\n\t\t\t\t\t\t\treturn 1-att+(target.countCards('e')?2:0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('meihuo',event.target);\n\t\t\t\t\t\tplayer.choosePlayerCard(event.target,'he',true).ai=function(button){\n\t\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\t\tif(get.position(card)=='e') return get.equipValue(card);\n\t\t\t\t\t\t\treturn 5;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(get.position(result.buttons[0].link)=='e'){\n\t\t\t\t\t\t\tplayer.equip(result.buttons[0].link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.gain(result.buttons[0].link,event.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.target.$giveAuto(result.buttons[0].link,player);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你失去最后一张装备牌，你可以获得一名其他角色的一张牌，若此牌来自装备区，你立即装备之"},"tiebi":{"name":"铁壁","script":"{trigger: {global: \"shaBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{color:'black'})&&!event.target.hujia&&get.distance(player,event.target)<=1;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('tiebi',trigger.target),{color:'black'});\n\t\t\t\t\tvar goon=(get.attitude(player,trigger.target)>2&&\n\t\t\t\t\t\tget.damageEffect(trigger.target,trigger.player,player)<0);\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(goon){\n\t\t\t\t\t\t\tif(trigger.target.hp==1) return 10-get.value(card);\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill=['tiebi',trigger.target];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.target.changeHujia();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.1\",},}","info":"当距离你1以内的一名角色成为杀的目标时，若其没有护甲，你可以弃置一张黑色手牌使其获得一点护甲"},"yudun":{"name":"愚钝","script":"{mod: {cardEnabled: function (card,player){\n\t\t\t\t\t\tif(get.type(card,'trick')=='trick') return false;\n\t\t\t\t\t},cardRespondable: function (card,player){\n\t\t\t\t\t\tif(get.type(card,'trick')=='trick') return false;\n\t\t\t\t\t},cardSavable: function (card,player){\n\t\t\t\t\t\tif(get.type(card,'trick')=='trick') return false;\n\t\t\t\t\t},},enable: \"chooseToUse\",filterCard: function (card){\n\t\t\t\t\treturn get.type(card,'trick')=='trick';\n\t\t\t\t},selectCard: \"2\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\tif(player.countCards('h',{type:['trick','delay']})<2) return false;\n\t\t\t\t},check: function (){return 1},ai: {skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg!='use') return false;\n\t\t\t\t\t\tif(player.countCards('h',{type:['trick','delay']})<2) return false;\n\t\t\t\t\t},respondSha: \"true\",order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t},useful: \"-1\",value: \"-1\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},group: \"yudun_count\",subSkill: {count: {trigger: {player: \"useCard\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.skill=='yudun'&&_status.currentPhase==player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.getStat().card.sha--;\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，你无法使用锦囊牌；你可以将两张锦囊牌当作一张不计入出杀次数的杀使用"},"zhenjiu":{"name":"针灸","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {color: \"red\",},filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.hasSkill('zhenjiu2');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},discard: \"false\",prepare: \"give\",content: function (){\n\t\t\t\t\ttarget.storage.zhenjiu2=cards[0];\n\t\t\t\t\tgame.addVideo('storage',target,['zhenjiu2',get.cardInfo(target.storage.zhenjiu2),'card']);\n\t\t\t\t\ttarget.addSkill('zhenjiu2');\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\t\t\treturn target==player?1:1.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.countCards('h')>player.hp) return 0.5;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},order: \"9\",threaten: \"1.7\",},}","info":"出牌阶段限一次，你可以将一张红色手牌置于一名角色的武将牌上，该角色于下一个准备阶段回复一点体力，然后获得此牌"},"lmazui":{"name":"麻醉","script":"{audio: \"mazui\",enable: \"phaseUse\",usable: \"1\",filterCard: {color: \"black\",},filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.hasSkill('lmazui2');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},discard: \"false\",prepare: \"give\",content: function (){\n\t\t\t\t\ttarget.storage.lmazui2=cards[0];\n\t\t\t\t\ttarget.addSkill('lmazui2');\n\t\t\t\t\tgame.addVideo('storage',target,['lmazui2',get.cardInfo(target.storage.lmazui2),'card']);\n\t\t\t\t},ai: {expose: \"0.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -target.hp;\n\t\t\t\t\t\t},},order: \"4\",threaten: \"1.2\",},}","info":"出牌阶段限一次，你可以将一张黑色手牌置于一名角色的武将牌上，该角色造成的下一次伤害-1，然后获得此牌"},"shoulie":{"name":"狩猎","script":"{trigger: {player: \"shaBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar dis=trigger.target.countCards('h','shan')||trigger.target.getEquip('bagua')||trigger.target.countCards('h')>2;\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('shoulie',trigger.target));\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(dis) return 7-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill='shoulie';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用一张杀指定目标后，可以弃置一张手牌令此杀不可闪避"},"hudun":{"name":"盾甲","script":"{trigger: {source: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hujia&&event.player!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.changeHujia();\n\t\t\t\t\tplayer.update();\n\t\t\t\t},}","info":"锁定技，当你对其他角色造成伤害后，若你没有护甲，你获得一点护甲值"},"toudan":{"name":"投弹","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'spade'});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},filterCard: {suit: \"spade\",},check: function (card){\n\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t},position: \"he\",line: \"fire\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.damage('fire');\n\t\t\t\t\tevent.targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(target,current)<=1;\n\t\t\t\t\t});\n\t\t\t\t\tevent.targets.sortBySeat(event.target);\n\t\t\t\t\tevent.targets.unshift(player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar current=event.targets.shift();\n\t\t\t\t\t\tif(current.countCards('he')){\n\t\t\t\t\t\t\tcurrent.chooseToDiscard('he',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,target,'fire');\n\t\t\t\t\t\t},},order: \"10\",threaten: \"1.5\",},}","info":"出牌阶段限一次，你可以弃置一张黑桃牌对一名其他角色造成一点火焰伤害，然后你与距离该角色1以内的所有角色各弃置一张牌"},"shending":{"name":"神丁","script":"{inherit: \"longfan\",filter: function (event,player){\n\t\t\t\t\treturn !player.getEquip(5);\n\t\t\t\t},ai: {order: \"11\",result: {player: \"1\",},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player!=target) return;\n\t\t\t\t\t\t\tif(get.subtype(card)=='equip5'){\n\t\t\t\t\t\t\t\tif(get.equipValue(card)<=7) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"1.2\",},enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tswitch(get.suit(card)){\n\t\t\t\t\t\t\tcase 'heart':return player.maxHp>player.hp?2:0;\n\t\t\t\t\t\t\tcase 'diamond':return 1;\n\t\t\t\t\t\t\tcase 'club':return 1;\n\t\t\t\t\t\t\tcase 'spade':return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tswitch(result.suit){\n\t\t\t\t\t\tcase 'heart':player.recover();break;\n\t\t\t\t\t\tcase 'diamond':player.draw();break;\n\t\t\t\t\t\tcase 'club':{\n\t\t\t\t\t\t\tvar targets=player.getEnemies();\n\t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\t\t\tif(!targets[i].countCards('he')){\n\t\t\t\t\t\t\t\t\ttargets.splice(i--,1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\t\t\tvar target=targets.randomGet();\n\t\t\t\t\t\t\t\tplayer.line(target);\n\t\t\t\t\t\t\t\ttarget.randomDiscard();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，若你没有宝物牌，视为装备了蓝格怪衣"},"lianda":{"name":"连打","script":"{trigger: {player: \"shaAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.target.isAlive()&&player.countCards('he')>0&&!player.hasSkill('lianda2');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt('lianda'));\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(get.effect(trigger.target,{name:'sha'},player,player)>0){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tnext.logSkill='lianda';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('lianda2');\n\t\t\t\t\t\tplayer.useCard({name:'sha'},trigger.target);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用一杀结算完毕后，可以弃置一张牌视为对目标再使用一张杀"},"bingjian":{"name":"冰箭","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'black',name:'sha'})>0;\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn card.name=='sha'&&get.color(card)=='black';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h')>0;\n\t\t\t\t},line: \"thunder\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.showHandcards();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar cards=target.getCards('h','shan');\n\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\ttarget.discard(cards);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.damage('thunder');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,target,'thunder');\n\t\t\t\t\t\t},},expose: \"0.2\",},}","info":"出牌阶段限一次，你可以弃置一张黑色的杀，令一名有手牌的其他角色展示手牌并弃置其中的所有闪，若其没有闪则受到一点雷电伤害"},"rumeng":{"name":"入梦","script":"{trigger: {global: \"phaseUseBefore\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&player.countCards('he',{type:'basic'})<player.countCards('he');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar yep=get.attitude(player,trigger.player)<0&&\n\t\t\t\t\t\ttrigger.player.countCards('h')>2;\n\t\t\t\t\tvar next=player.chooseToDiscard(function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t},get.prompt('rumeng',trigger.player),'he');\n\t\t\t\t\tnext.logSkill=['rumeng',trigger.player];\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(yep){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.chooseToDiscard({type:'basic'},'入梦：弃置一张基本牌或跳过出牌及弃牌阶段').ai=function(card){\n\t\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\ttrigger.player.skip('phaseDiscard');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"其他角色的出牌阶段前，你可以弃置一张非基本牌，并令其选择一项：弃置一张基本牌，或跳过出牌及弃牌阶段"},"jianji":{"name":"箭疾","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'})>0&&lib.filter.cardEnabled({name:'sha'},player);\n\t\t\t\t},usable: \"1\",filterCard: {type: \"equip\",},position: \"he\",check: function (card){\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.equipValue(card);\n\t\t\t\t},discard: \"false\",prepare: \"throw\",delay: \"false\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn lib.filter.targetEnabled({name:'sha'},player,target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.addAdditionalSkill('jianji','unequip');\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.useCard({name:'sha'},cards,targets,false).animate=false;\n\t\t\t\t\tplayer.line(targets,'fire');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.removeAdditionalSkill('jianji');\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.1;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tplayer.addAdditionalSkill('jianji_ai','unequip');\n\t\t\t\t\t\t\tvar eff=get.effect(target,{name:'sha'},player,target);\n\t\t\t\t\t\t\tplayer.removeAdditionalSkill('jianji_ai');\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},effect: {player: function (card,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&\n\t\t\t\t\t\t\t\tplayer.countCards('e',{subtype:get.subtype(card)})&&\n\t\t\t\t\t\t\t\tlib.filter.filterCard({name:'sha'},player)){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"你可以将一张装备牌当杀使用，然后摸一张牌，此杀无视距离和防具，且不计入回合内出杀限制"},"huangyu":{"name":"凰羽","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(!lib.card.chiyuxi) return false;\n\t\t\t\t\treturn !player.getStat('skill').huangyu&&player.countCards('he',{color:'red'})>1;\n\t\t\t\t},filterCard: {color: \"red\",},selectCard: \"2\",position: \"he\",viewAs: {name: \"chiyuxi\",nature: \"fire\",},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(player.hasSkill('jianji')&&get.type(card)=='equip'&&\n\t\t\t\t\t\tlib.filter.filterCard({name:'sha'},player)){\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},ai: {order: \"8\",expose: \"0.2\",threaten: \"1.2\",wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"9\",useful: \"1\",value: \"5\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nofire')) return 0;\n\t\t\t\t\t\t\tif(player.hasUnknown(2)) return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(lib.config.mode=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: \"1\",natureDamage: \"1\",fireDamage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"出牌阶段限一次，你可以将两张红色牌当炽羽袭使用"},"yuchen":{"name":"浴尘","script":"{trigger: {player: [\"useCard\",\"respondAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase) return false;\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(get.color(event.cards[i])=='black') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('yuchen'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t\t}).set('autodelay',trigger.name=='respond'?0.5:1).ai=function(target){\n\t\t\t\t\t\treturn -get.attitude(player,target);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yuchen',result.targets);\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.7\",},}","info":"每当你于回合外使用或打出一张黑色牌，你可以弃置一名角色的一张牌"},"lianwu":{"name":"连舞","script":"{mod: {selectTarget: function (card,player,range){\n\t\t\t\t\t\tif(card.name=='sha'&&range[1]!=-1) range[1]++;\n\t\t\t\t\t},},trigger: {player: \"shaBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card&&get.color(event.card)=='red';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.directHit=true;\n\t\t\t\t},}","info":"锁定技，你的杀可以额外指定一个目标，你的红杀不可被闪避"},"fengze":{"name":"风泽","script":"{enable: \"phaseUse\",filterCard: {color: \"black\",},selectCard: \"1\",position: \"he\",usable: \"1\",viewAs: {name: \"taoyuan\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0;\n\t\t\t\t},audio: \"true\",prompt: \"将一张黑色牌当作桃园结义使用\",check: function (card){\n\t\t\t\t\treturn 7-get.useful(card)\n\t\t\t\t},ai: {threaten: \"1.5\",basic: {order: function (){\n\t\t\t\t\t\t\treturn 11;\n\t\t\t\t\t\t},useful: [3,1],value: \"0\",},result: {target: function (player,target){\n\t\t\t\t\t\t\treturn (target.hp<target.maxHp)?2:0;\n\t\t\t\t\t\t},},tag: {recover: \"0.5\",multitarget: \"1\",},},}","info":"出牌阶段限一次，你可以将一张黑色牌当作桃园结义使用"},"lingyue":{"name":"凌月","script":"{trigger: {player: \"shaBegin\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},logTarget: \"target\",filter: function (event,player){\n\t\t\t\t\treturn event.target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.target.chooseToDiscard('he',true);\n\t\t\t\t},}","info":"每当你使用一张杀，你可以令目标弃置一张牌"},"jinlin":{"name":"金鳞","script":"{enable: \"phaseUse\",unique: \"true\",mark: \"true\",skillAnimation: \"true\",animationColor: \"metal\",init: function (player){\n\t\t\t\t\tplayer.storage.jinlin=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.jinlin) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: \"true\",selectTarget: [1,null],contentBefore: function (){\n\t\t\t\t\tplayer.awakenSkill('jinlin');\n\t\t\t\t\tplayer.storage.jinlin=true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.changeHujia(3);\n\t\t\t\t\ttarget.addSkill('jinlin2');\n\t\t\t\t\ttarget.storage.jinlin2=3;\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hp==1) return 1;\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>2){\n\t\t\t\t\t\t\t\t\tif(players[i].hp==1) return 1;\n\t\t\t\t\t\t\t\t\tif(players[i].hp==2) {\n\t\t\t\t\t\t\t\t\t\tif(players[i].countCards('h')==0) return 1;\n\t\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\tif(num>1) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},intro: {content: \"limited\",},}","info":"限定技，出牌阶段，你可以令任意名角色各获得3点护甲，获得护甲的角色于每个准备阶段失去1点护甲，直到首次失去所有护甲或累计以此法失去3点护甲"},"jueqing":{"name":"绝情","script":"{trigger: {source: \"damageBefore\",},forced: \"true\",audio: \"2\",check: function (){return false;},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\ttrigger.player.loseHp(trigger.num);\n\t\t\t\t},ai: {jueqing: \"true\",},}","info":"锁定技，你即将造成的伤害均视为失去体力。"},"shengshou":{"name":"圣手","script":"{enable: \"phaseUse\",filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t},viewAs: {name: \"caoyao\",},prompt: \"将一张黑色手牌当作草药使用\",check: function (card){return 6-get.value(card)},ai: {threaten: \"1.6\",basic: {useful: [7,2],value: [7,2],},order: \"2.2\",result: {target: \"2\",},tag: {recover: \"1\",},},}","info":"你可以将一张黑色手牌当作草药使用"},"ciqiu":{"name":"刺酋","script":"{unique: \"true\",trigger: {source: \"damageBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player.hp==event.player.maxHp&&event.notLink();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t\ttrigger._ciqiu3=true;\n\t\t\t\t},group: [\"ciqiu2\"],}","info":"锁定技，每当你使用【杀】对目标角色造成伤害时，若该角色未受伤，你令此伤害+1；若其因此进入濒死状态，你令其死亡，然后你失去“刺酋”。 "},"siji":{"name":"伺机","script":"{trigger: {player: \"phaseDiscardEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(event.cards[i].name=='sha') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tif(trigger.cards[i].name=='sha') num++;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw(2*num);\n\t\t\t\t},}","info":"弃牌阶段结束后，你可以摸2X张牌（X为你于此阶段内弃置的【杀】的数量）。"},"lingxin":{"name":"灵心","script":"{trigger: {player: \"phaseEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.cards=get.cards(3);\n\t\t\t\t\tplayer.showCards(event.cards);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.suit(event.cards[i])!='heart'){\n\t\t\t\t\t\t\tcards[i].discard();\n\t\t\t\t\t\t\tevent.cards.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(event.cards.length==0){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.delay(0,1000);\n\t\t\t\t\t\tplayer.$gain2(event.cards);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.gain(event.cards,'log');\n\t\t\t\t},ai: {result: {target: \"2\",},},}","info":"结束阶段，你可以亮出牌堆顶的三张牌，然后获得其中的红桃牌"},"tianxiang":{"name":"天香","script":"{audio: \"2\",audioname: [\"daxiaoqiao\",\"re_xiaoqiao\",\"ol_xiaoqiao\"],trigger: {player: \"damageBegin3\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{suit:'heart'})>0&&event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.suit(card)=='heart'&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\tvar da=0;\n\t\t\t\t\t\t\tif(_status.event.player.hp==1){\n\t\t\t\t\t\t\t\tda=10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(trigger.num>1){\n\t\t\t\t\t\t\t\tif(target.maxHp>5&&target.hp>1) return -att/10+da;\n\t\t\t\t\t\t\t\treturn -att+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,trigger.source,target,trigger.nature);\n\t\t\t\t\t\t\tif(att==0) return 0.1+da;\n\t\t\t\t\t\t\tif(eff>=0&&trigger.num==1){\n\t\t\t\t\t\t\t\treturn att+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==target.maxHp) return -att+da;\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tif(target.maxHp<=4&&!target.hasSkillTag('maixie')){\n\t\t\t\t\t\t\t\t\tif(target.maxHp<=3){\n\t\t\t\t\t\t\t\t\t\treturn -att+da;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -att/2+da;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp==target.maxHp-1){\n\t\t\t\t\t\t\t\tif(target.hp>2||target.hasSkillTag('maixie')) return att/5+da;\n\t\t\t\t\t\t\t\tif(att>0) return 0.02+da;\n\t\t\t\t\t\t\t\treturn 0.05+da;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att/2+da;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt2('tianxiang')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill(event.name,result.targets);\n\t\t\t\t\t\ttrigger.player=result.targets[0];\n\t\t\t\t\t\ttrigger.player.addSkill('tianxiang2');\n\t\t\t\t\t\tplayer.discard(result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&target.countCards('h')>1) return 0.7;\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(target.countCards('h')==0) return 2;\n\t\t\t\t\t},},}","info":"当你即将受到伤害时，你可以弃置一张♥手牌，将伤害转移给一名其他角色，然后该角色摸X张牌（X为其已损失的体力值）。"},"yicong":{"name":"义从","script":"{trigger: {player: [\"changeHp\"],},audio: \"2\",audioname: [\"re_gongsunzan\"],forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.sgn(player.hp-2.5)!=get.sgn(player.hp-2.5-event.num);\n\t\t\t\t},content: function (){},mod: {globalFrom: function (from,to,current){\n\t\t\t\t\t\tif(from.hp>2) return current-1;\n\t\t\t\t\t},globalTo: function (from,to,current){\n\t\t\t\t\t\tif(to.hp<=2) return current+1;\n\t\t\t\t\t},},ai: {threaten: \"0.8\",},}","info":"锁定技，当你的体力值大于2时，你计算与其他角色的距离时-1；当你的体力值不大于2时，其他角色计算与你的距离时+1。"},"poxing":{"name":"破星","script":"{trigger: {source: \"damageBegin\",},filter: function (trigger,player){\n\t\t\t\t\treturn trigger.player.hp>player.hp;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},}","info":"锁定技，每当你即将造成伤害，若目标的体力值大于你，你令伤害+1"},"sxianjing":{"name":"陷阱","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tfor(var i=0;i<player.storage.sxianjing.length;i++){\n\t\t\t\t\t\tsuits.add(get.suit(player.storage.sxianjing[i]));\n\t\t\t\t\t}\n\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\treturn !suits.contains(get.suit(card));\n\t\t\t\t\t});\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.sxianjing=[];\n\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tfor(var i=0;i<player.storage.sxianjing.length;i++){\n\t\t\t\t\t\tsuits.add(get.suit(player.storage.sxianjing[i]));\n\t\t\t\t\t}\n\t\t\t\t\treturn !suits.contains(get.suit(card));\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},discard: \"false\",prepare: function (cards,player){\n\t\t\t\t\tplayer.$give(1,player,false);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.sxianjing.add(cards[0]);\n\t\t\t\t\tplayer.syncStorage('sxianjing');\n\t\t\t\t\tplayer.markSkill('sxianjing');\n\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},threaten: function (player,target){\n\t\t\t\t\t\tif(target.storage.sxianjing&&target.storage.sxianjing.length){\n\t\t\t\t\t\t\treturn Math.sqrt(1.6/(target.storage.sxianjing.length+1));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn 1.6\n\t\t\t\t\t\t}\n\t\t\t\t\t},},intro: {mark: function (dialog,content,player){\n\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\tdialog.add(player.storage.sxianjing);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '已有'+get.cnNumber(player.storage.sxianjing.length)+'张“陷阱”牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t},content: function (content,player){\n\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\treturn get.translation(player.storage.sxianjing);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn '已有'+get.cnNumber(player.storage.sxianjing.length)+'张“陷阱”牌';\n\t\t\t\t\t},},group: [\"sxianjing_gain\",\"sxianjing_damage\"],subSkill: {gain: {trigger: {target: \"useCardToBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event.player==player||!event.player.countCards('he')) return false;\n\t\t\t\t\t\t\tvar suit=get.suit(event.card);\n\t\t\t\t\t\t\tfor(var i=0;i<player.storage.sxianjing.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(player.storage.sxianjing[i])==suit){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar suit=get.suit(trigger.card);\n\t\t\t\t\t\t\tvar card=null;\n\t\t\t\t\t\t\tfor(var i=0;i<player.storage.sxianjing.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(player.storage.sxianjing[i])==suit){\n\t\t\t\t\t\t\t\t\tcard=player.storage.sxianjing[i];break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tplayer.showCards(card,get.translation(player)+'发动了【陷阱】');\n\t\t\t\t\t\t\t\tplayer.storage.sxianjing.remove(card);\n\t\t\t\t\t\t\t\tcard.discard();\n\t\t\t\t\t\t\t\tplayer.syncStorage('sxianjing');\n\t\t\t\t\t\t\t\tif(player.storage.sxianjing.length){\n\t\t\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tplayer.unmarkSkill('sxianjing');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.randomGain(trigger.player,true);\n\t\t\t\t\t\t},sub: \"true\",},damage: {trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.sxianjing.length>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar card=player.storage.sxianjing.randomGet();\n\t\t\t\t\t\t\tplayer.storage.sxianjing.remove(card);\n\t\t\t\t\t\t\tplayer.gain(card,'draw');\n\t\t\t\t\t\t\tplayer.syncStorage('sxianjing');\n\t\t\t\t\t\t\tif(player.storage.sxianjing.length){\n\t\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.unmarkSkill('sxianjing');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段，你可以将一张手牌背面朝上置于你的武将牌上（不能与已有花色相同）。当一名其他角色使用与一张“陷阱”牌花色相同的牌指定你为目标时，你移去对应的“陷阱”牌，然后随机获得该角色的一张牌。每当你受到一次伤害，你随机将一张“陷阱”牌返回手牌"},"huodan":{"name":"火丹","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {color: \"red\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'red'})>0;\n\t\t\t\t},filterTarget: \"true\",selectTarget: [1,2],position: \"he\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},contentBefore: function (){\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(targets.length==1){\n\t\t\t\t\t\ttarget.damage('fire',2);\n\t\t\t\t\t\tif(get.is.altered('huodan')) target.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.damage('fire');\n\t\t\t\t\t}\n\t\t\t\t},line: \"fire\",ai: {order: \"15\",expose: \"0.2\",threaten: \"1.5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hp<2) return 0;\n\t\t\t\t\t\t\tif(get.attitude(player,target)>=0) return 0;\n\t\t\t\t\t\t\tif(target.hp>player.hp) return 0;\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,player,target,'fire');\n\t\t\t\t\t\t\tif(eff<0){\n\t\t\t\t\t\t\t\tif(ui.selected.targets.length&&target.hp>1&&ui.selected.targets[0].hp>1){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(target.nodying) return eff/10;\n\t\t\t\t\t\t\t\treturn eff/Math.sqrt(target.hp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张红色牌并失去一点体力，然后将两点火属性伤害分配给1~2名角色"},"yeying":{"name":"曳影","script":"{enable: \"phaseUse\",usable: \"1\",viewAs: {name: \"qiankunbiao\",},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'});\n\t\t\t\t},filterCard: {color: \"black\",},position: \"he\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},ai: {threaten: \"1.5\",order: \"7\",tag: {loseCard: \"1\",discard: \"1\",},wuxie: function (){\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以将一张黑色牌当作乾坤镖使用"},"juxi":{"name":"聚息","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.juxi>=game.countPlayer();\n\t\t\t\t},filterTarget: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.juxi=0;\n\t\t\t\t},init2: function (player){\n\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\tplayer.logSkill('juxi');\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"mark\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.juxi-=game.countPlayer();\n\t\t\t\t\tplayer.syncStorage('juxi');\n\t\t\t\t\tif(player.storage.juxi<=0){\n\t\t\t\t\t\tplayer.unmarkSkill('juxi');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t}\n\t\t\t\t\tif(target.isDamaged()){\n\t\t\t\t\t\tplayer.chooseControl(function(){\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}).set('choiceList',[\n\t\t\t\t\t\t\t'对'+get.translation(target)+'造成一点伤害',\n\t\t\t\t\t\t\t'令'+get.translation(target)+'回复一点体力',\n\t\t\t\t\t\t])\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='选项一'){\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\tif(target.isDamaged()) return get.recoverEffect(target,player,target);\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.damageEffect(target,player,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},group: \"juxi_count\",subSkill: {count: {trigger: {global: \"discardAfter\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn _status.currentPhase!=event.player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.juxi++;\n\t\t\t\t\t\t\tplayer.syncStorage('juxi');\n\t\t\t\t\t\t\tplayer.markSkill('juxi');\n\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，每当一名角色于其回合外弃置牌，你获得一枚聚息标记；出牌阶段限一次，你可以移去X枚聚息标记，然后选择一项：对一名角造成一点伤害，或令一名角色回复一点体力，X为存活角色数"},"dunxing":{"name":"遁形","script":"{direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},trigger: {target: \"useCardToBefore\",},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt(event.name));\n\t\t\t\t\tnext.logSkill=event.name;\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(get.tag(trigger.card,'multitarget')&&!get.tag(card,'multineg')) return 0;\n\t\t\t\t\t\tif(get.value(trigger.card,trigger.player,'raw')<5) return 0;\n\t\t\t\t\t\tif(get.tag(trigger.card,'respondSha')&&player.hasSha()) return 0;\n\t\t\t\t\t\tif(get.tag(trigger.card,'respondShan')&&player.hasShan()) return 0;\n\t\t\t\t\t\tif(get.effect(player,trigger.card,trigger.player,player)<0){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tnext.prompt2='弃置一张牌并进行一次判定，若结果不为红桃则'+get.translation(trigger.card)+'失效';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\t\treturn get.suit(card)=='heart'?-1:1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.suit!='heart'){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你成为其他角色卡牌的目标时，你可以弃置一张牌并进行一次判定，若不为红桃，则取消之"},"guiying":{"name":"鬼影","script":"{enable: \"chooseToUse\",filterCard: {color: \"black\",},position: \"he\",viewAs: {name: \"toulianghuanzhu\",},prompt: \"将一张黑色牌当作偷梁换柱使用\",check: function (card){\n\t\t\t\t\tif(_status.event.player.countCards('h')>_status.event.player.hp){\n\t\t\t\t\t\treturn 5-get.value(card)\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},ai: {order: \"8\",tag: {loseCard: \"1\",norepeat: \"1\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.countCards('h')<=1) return 0;\n\t\t\t\t\t\t\tif(target.hasSkill('toulianghuanzhu_ai2')) return 0;\n\t\t\t\t\t\t\tif(target.hasSkill('toulianghuanzhu_ai1')) return 0.5;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},useful: [4,1],value: [6,1],},}","info":"你可以将一张黑色牌当偷梁换柱使用"},"mingfu":{"name":"冥缚","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'club'})>0;\n\t\t\t\t},position: \"he\",filterCard: {suit: \"club\",},discard: \"false\",prepare: \"throw\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn lib.filter.targetEnabled({name:'guiyoujie'},player,target);\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\treturn Math.max(7-get.value(card),7-get.useful(card));\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.addJudge('guiyoujie',cards);\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.effect(target,{name:'guiyoujie'},player,target);\n\t\t\t\t\t\t},},order: \"8\",},}","info":"出牌阶段限一次，你可以将一张梅花牌当鬼幽结使用"},"tianlun":{"name":"天轮","script":"{unique: \"true\",trigger: {global: \"judge\",},direct: \"true\",filter: function (event){\n\t\t\t\t\tif(event.card) return true;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('j');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(trigger.card) list.push(trigger.card);\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tlist=list.concat(players[i].getCards('j'));\n\t\t\t\t\t}\n\t\t\t\t\tvar dialog=ui.create.dialog(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+get.translation(trigger.player.judging[0])+\n\t\t\t\t\t\t'，'+get.prompt('tianlun'),list,'hidden');\n\t\t\t\t\tplayer.chooseButton(dialog,function(button){\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar trigger=_status.event.parent._trigger;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(trigger.player.judging[0]);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\treturn result*attitude;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=result.buttons[0].link;\n\t\t\t\t\t\tif(get.owner(event.card)) get.owner(event.card).discard(event.card);\n\t\t\t\t\t\telse trigger.player.$throw(event.card,1000);\n\t\t\t\t\t\tif(event.card.clone){\n\t\t\t\t\t\t\tevent.card.clone.classList.add('thrownhighlight');\n\t\t\t\t\t\t\tgame.addVideo('highlightnode',player,get.cardInfo(event.card));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.card){\n\t\t\t\t\t\tplayer.logSkill('tianlun',trigger.player);\n\t\t\t\t\t\ttrigger.player.judging[0].discard();\n\t\t\t\t\t\ttrigger.player.judging[0]=event.card;\n\t\t\t\t\t\ttrigger.position.appendChild(event.card);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',event.card);\n\t\t\t\t\t\tevent.card.expired=true;\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {tag: {rejudge: \"0.6\",},},}","info":"任意一名角色的判定牌生效前，你可以弃置一张场上角色的判定牌代替之"}},"card":{},"hero":{"swd_huzhongxian":{"name":"壶中仙","attr":["male","wu",3,["daofa","xielv","hujing"]]},"swd_anka":{"name":"安卡","attr":["male","qun",3,["songci","anlianying"]]},"swd_septem":{"name":"赛特","attr":["male","qun",4,["jiying","liaoyuan","yishan"]]},"swd_kama":{"name":"卡玛","attr":["female","qun",3,["yueren","shangshi"]]},"swd_nicole":{"name":"妮可","attr":["female","qun",3,["huanjian","lingwu","minjing"]]},"swd_wangsiyue":{"name":"王思月","attr":["female","wei",3,["duishi","biyue"]]},"swd_weida":{"name":"薇达","attr":["female","qun",3,["yueren","zhenlie","duijue"]]},"swd_xuanyuanjianxian":{"name":"轩辕剑仙","attr":["male","qun",4,["pozhou","huajian","xuanyuan"]]},"swd_chenjingchou":{"name":"陈靖仇","attr":["male","wu",3,["youyin","yihua"]]},"swd_duguningke":{"name":"独孤宁珂","attr":["female","qun",3,["nlianji","touxi"]]},"swd_guyue":{"name":"古月圣","attr":["male","wei",3,["gtiandao","gxianyin","wangchen"]]},"swd_tuobayuer":{"name":"拓跋玉儿","attr":["female","shu",4,["swdliuhong","poyue","niepan"]]},"swd_yuwentuo":{"name":"宇文拓","attr":["male","shu",4,["wushuang","xielei","kunlunjing"]]},"swd_yuxiaoxue":{"name":"于小雪","attr":["female","wei",3,["huanhun","daixing","yinyue"]]},"swd_jiliang":{"name":"姬良","attr":["male","wu",3,["yunchou","gongxin","jqimou"]]},"swd_shuijing":{"name":"水镜","attr":["female","qun",4,["mojian","duanyue","tuzhen"]]},"swd_quxian":{"name":"屈娴","attr":["female","qun",3,["mojian","huanxia"]]},"swd_xiyan":{"name":"犀衍","attr":["male","qun",3,["jiefen","datong"]]},"swd_cheyun":{"name":"车芸","attr":["female","wu",3,["cyxianjiang","cyqiaoxie","shengong"]]},"swd_huanyuanzhi":{"name":"桓远之","attr":["male","qun",3,["tianshu","lanzhi","mufeng"]]},"swd_murongshi":{"name":"慕容诗","attr":["female","shu",4,["duanyi","guxing"]]},"swd_jipeng":{"name":"疾鹏","attr":["male","wu",3,["reyingzi","guozao"]]},"swd_qi":{"name":"柒","attr":["male","qun",3,["yaotong","heihuo","pojian"]]},"swd_luchengxuan":{"name":"陆承轩","attr":["male","wu",4,["ljifeng","lxianglong"]]},"swd_xiarou":{"name":"夏柔","attr":["female","shu",3,["xianghui","huiqi"]]},"swd_moye":{"name":"莫耶","attr":["female","wu",3,["rexue","liuli","senluo"]]},"swd_zhaoyun":{"name":"皇甫朝云","attr":["male","shu",4,["longdan","pozhen","tanlin"]]},"swd_hengai":{"name":"横艾","attr":["female","shu",3,["funiao","ningxian","hlingbo"]]},"swd_duanmeng":{"name":"端蒙","attr":["female","shu",4,["xuanying","lieren"]]},"swd_jiangwu":{"name":"疆梧","attr":["male","shu",4,["yijue","dangping"]]},"swd_tuwei":{"name":"徒维","attr":["male","shu",3,["zhanlu","susheng"]]},"swd_yeyaxi":{"name":"耶亚希","attr":["female","shu",3,["rexue","huopu","shenyan"]]},"swd_muyun":{"name":"徐暮云","attr":["male","wei",4,["zhuhai","polang","jikong"]]},"swd_lanyin":{"name":"兰茵","attr":["female","wei",3,["xingdian","yulin","luomei"]]},"swd_zhiyin":{"name":"芝茵","attr":["female","wei",3,["xuehuang","ningshuang","zhuyu"]]},"swd_qiner":{"name":"磬儿","attr":["female","wei",3,["huanyin","tianhuo","xuanzhou"]]},"swd_jiuyou":{"name":"久悠","attr":["male","wei",3,["lexue"]]},"swd_duopeng":{"name":"多鹏","attr":["male","wu",3,["luanji","reyingzi"]]},"swd_fengtianling":{"name":"凤天凌","attr":["male","shu",4,["guiyan","jiang"]]},"swd_huyue":{"name":"瑚月","attr":["female","wu",3,["hyunshen","fengming"]]},"swd_jialanduo":{"name":"迦兰多","attr":["male","qun",4,["xianyin","mailun"]]},"swd_rongshuang":{"name":"蓉霜","attr":["female","wu",3,["suiyan","duanxing"]]},"swd_zhuoshanzhu":{"name":"浊山铸","attr":["male","wu",4,["suiyan","wanjun"]]},"swd_jiting":{"name":"姬亭","attr":["female","wei",4,["guanhu","lingshi"]]},"swd_sikongyu":{"name":"司空宇","attr":["male","wu",4,["sliufeng","linyun","hutian"]]},"swd_muyue":{"name":"沐月","attr":["female","wei",3,["xingzhui","lingxian","shouyin"]]},"swd_ziqiao":{"name":"子巧","attr":["female","shu",3,["guaili","fuyan"]]},"swd_fengyu":{"name":"凤煜","attr":["male","shu",4,["fzhenwei","shangxi"]]},"swd_huanglei":{"name":"黄雷","attr":["male","qun",3,["jilve","gongshen","gaizao"]]},"swd_kendi":{"name":"肯迪","attr":["male","qun",3,["zhanxing","kbolan"]]},"swd_lilian":{"name":"莉莲","attr":["female","qun",3,["swd_wuxie","lqingcheng"]]},"swd_kangnalishi":{"name":"康那里士","attr":["male","qun",1,["busi","xuying","yinguo"]]},"swd_xuanyuanjiantong":{"name":"轩辕剑童","attr":["male","qun",3,["chengjian","huanling"]]},"swd_huiyan":{"name":"慧彦","attr":["male","qun",4,["hwendao","lingfeng","hxunzhi"]]},"swd_shanxiaoxiao":{"name":"单小小","attr":["female","wu",3,["shehun","xiaomoyu"]]},"swd_yuchiyanhong":{"name":"尉迟嫣红","attr":["female","shu",3,["huanxing","meihuo"]]},"swd_hanluo":{"name":"寒洛","attr":["male","qun",5,["tiebi"]]},"swd_fu":{"name":"毛民·福","attr":["male","qun",5,["yudun"]]},"swd_linyue":{"name":"临月","attr":["male","wei",3,["zhenjiu","lmazui"]]},"swd_zidashu":{"name":"子大暑","attr":["male","wu",3,["shoulie","hudun"]]},"swd_maixing":{"name":"麦星","attr":["male","wu",3,["toudan","shending"]]},"swd_fuyan":{"name":"符验","attr":["male","qun",4,["lianda"]]},"swd_haidapang":{"name":"海大胖","attr":["female","wu",3,["bingjian","rumeng"]]},"swd_shaowei":{"name":"少微","attr":["female","shu",3,["jianji","huangyu"]]},"swd_youzhao":{"name":"游兆","attr":["male","shu",4,["longdan","yuchen"]]},"swd_shangzhang":{"name":"尚章","attr":["male","shu",4,["lianwu"]]},"swd_situqiang":{"name":"司徒蔷","attr":["female","shu",3,["fengze","lingyue","jinlin"]]},"swd_chunyuheng":{"name":"淳于恒","attr":["male","wei",2,["jueqing","shengshou","xuying"]]},"swd_hanlong":{"name":"韩龙","attr":["male","wei",4,["ciqiu","siji"]]},"swd_yuli":{"name":"玉澧","attr":["female","wu",3,["lingxin","tianxiang"]]},"swd_zhanggao":{"name":"张诰","attr":["male","wei",4,["yicong","poxing"]]},"swd_shuwaner":{"name":"舒莞儿","attr":["female","shu",3,["sxianjing","huodan"]]},"swd_xiaohuanglong":{"name":"小黄龙","attr":["male","wei",3,["yeying","juxi"]]},"swd_hupo":{"name":"琥珀","attr":["male","wu",3,["dunxing","guiying"]]},"swd_jiangziya":{"name":"姜子牙","attr":["male","wu",3,["mingfu","tianlun"]]}}},"sp2":{"name":"系列专属","skill":{"huirong":{"name":"慧容","script":"{trigger: {player: \"showCharacterAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.toShow&&event.toShow.contains('jin_yanghuiyu')&&game.hasPlayer(function(target){\n\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\treturn num>target.hp||Math.min(5,target.hp);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('请选择【慧容】的目标','令一名角色将手牌数摸至/弃置至与其体力值相同（至多摸至五张）',true,function(card,player,target){\n\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\treturn num>target.hp||Math.min(5,target.hp);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\tif(num>target.hp) return -att*(num-target.hp);\n\t\t\t\t\t\treturn att*Math.max(0,Math.min(5,target.hp)-target.countCards('h'));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tif(target.countCards('h')<target.hp) target.drawTo(Math.min(5,target.hp));\n\t\t\t\t\t\telse target.chooseToDiscard('h',true,target.countCards('h')-target.hp);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"隐匿技，锁定技。当你登场后，你令一名角色将手牌数摸至/弃至与体力值相同（至多摸至五张）。"},"ciwei":{"name":"慈威","script":"{trigger: {global: \"useCard\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.all_excluded||event.player==player||event.player!=_status.currentPhase||!player.countCards('he')) return false;\n\t\t\t\t\treturn event.player.getHistory('useCard').indexOf(event)==1&&['basic','trick'].contains(get.type(event.card));\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt('ciwei',trigger.player),'弃置一张牌，取消'+get.translation(trigger.card)+'的所有目标','he').set('ai',function(card){\n\t\t\t\t\t\treturn (_status.event.goon/1.4)-get.value(card);\n\t\t\t\t\t}).set('goon',function(){\n\t\t\t\t\t\tif(!trigger.targets.length) return -get.attitude(player,trigger.player);\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i of trigger.targets){\n\t\t\t\t\t\t\tnum-=get.effect(i,trigger.card,trigger.player,player)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}()).logSkill=['ciwei',trigger.player];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.targets.length=0;\n\t\t\t\t\t\ttrigger.all_excluded=true;\n\t\t\t\t\t}\n\t\t\t\t},global: \"ciwei_ai\",}","info":"一名角色于其回合内使用第二张牌时，若此牌为基本牌或普通锦囊牌，则你可以弃置一张牌，取消此牌的所有目标。"},"caiyuan":{"name":"才媛","script":"{trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('caiyuan_mark')&&player.phaseNumber>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},group: \"caiyuan_count\",subSkill: {mark: {marktext: \"媛\",charlotte: \"true\",intro: {content: \"已扣减过体力\",},sub: \"true\",},count: {trigger: {player: \"changeHp\",},silent: \"true\",charlotte: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.num<0&&!player.hasSkill('caiyuan_mark');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.addTempSkill('caiyuan_mark',{player:'phaseAfter'});\n\t\t\t\t\t\t\tif(player.hasSkill('caiyuan')) player.markSkill('caiyuan_mark');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"锁定技，当你扣减体力时，你获得一枚“才媛”标记直到你的下回合结束。结束阶段开始时，若你没有“才媛”标记且此回合不是你的第一个回合 ，则你摸两张牌。"},"shibao_skill":{"name":"石苞1","script":"{locked: \"false\",onremove: function (player){\n\t\t\t\t\tplayer.removeSkill('shibao_skill_count');\n\t\t\t\t\tplayer.removeGaintag('shibao_skill');\n\t\t\t\t},mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(!card.cards||get.type(card)!='basic') return;\n\t\t\t\t\t\tfor(var i of card.cards){\n\t\t\t\t\t\t\tif(i.hasGaintag('shibao_skill')) return (game.online?player==_status.currentPhase:player.isPhaseUsing());\n\t\t\t\t\t\t}\n\t\t\t\t\t},cardUsable: function (card,player,target){\n\t\t\t\t\t\tif(!card.cards||get.type(card)!='basic'||!(game.online?player==_status.currentPhase:player.isPhaseUsing())) return;\n\t\t\t\t\t\tfor(var i of card.cards){\n\t\t\t\t\t\t\tif(i.hasGaintag('shibao_skill')) return Infinity;\n\t\t\t\t\t\t}\n\t\t\t\t\t},aiOrder: function (player,card,num){\n\t\t\t\t\t\tif(get.itemtype(card)=='card'&&card.hasGaintag('shibao_skill')&&get.type(card)=='basic') return num-0.1;\n\t\t\t\t\t},},trigger: {player: \"useCard2\",},direct: \"true\",filterx: function (event,player){\n\t\t\t\t\tif(!player.isPhaseUsing()) return false;\n\t\t\t\t\treturn player.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.getParent()!=event) return false;\n\t\t\t\t\t\tfor(var i in evt.gaintag_map){\n\t\t\t\t\t\t\tif(evt.gaintag_map[i].contains('shibao_skill')) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}).length>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(!lib.skill.shibao_skill.filterx(event,player)) return false;\n\t\t\t\t\tif(get.type(event.card)!='trick') return false;\n\t\t\t\t\tif(event.targets&&event.targets.length>0) return true;\n\t\t\t\t\tvar info=get.info(event.card);\n\t\t\t\t\tif(info.allowMultiple==false) return false;\n\t\t\t\t\tif(event.targets&&!info.multitarget){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn !event.targets.contains(current)&&lib.filter.targetEnabled2(event.card,player,current)&&lib.filter.targetInRange(event.card,player,current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar prompt2='为'+get.translation(trigger.card)+'增加或减少一个目标'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('shibao_skill'),function(card,player,target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(_status.event.targets.contains(target)) return true;\n\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card,player,target)&&lib.filter.targetInRange(_status.event.card,player,target);\n\t\t\t\t\t}).set('prompt2',prompt2).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player)*(_status.event.targets.contains(target)?-1:1);\n\t\t\t\t\t}).set('targets',trigger.targets).set('card',trigger.card);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.isMine()) game.delayx();\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets){\n\t\t\t\t\t\tplayer.logSkill('shibao_skill',event.targets);\n\t\t\t\t\t\tif(trigger.targets.contains(event.targets[0])) trigger.targets.removeArray(event.targets);\n\t\t\t\t\t\telse trigger.targets.addArray(event.targets);\n\t\t\t\t\t}\n\t\t\t\t},group: [\"shibao_skill_equip\",\"shibao_skill_silent\"],subSkill: {equip: {trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn get.type(event.card)=='equip'&&lib.skill.shibao_skill.filterx(event,player);\n\t\t\t\t\t\t},forced: \"true\",locked: \"false\",content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},silent: {trigger: {player: [\"enterGame\",\"useCard1\"],global: \"gameDrawAfter\",},silent: \"true\",firstDo: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event.name=='useCard') return get.type(event.card)=='basic'&&lib.skill.shibao_skill.filterx(event,player)&&event.addCount!==false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(trigger.name=='useCard'){\n\t\t\t\t\t\t\t\ttrigger.addCount=false;\n\t\t\t\t\t\t\t\tvar stat=player.getStat();\n\t\t\t\t\t\t\t\tif(stat&&stat.card&&stat.card[trigger.card.name]) stat.card[trigger.card.name]--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.addSkill('shibao_skill_count');\n\t\t\t\t\t\t\t\tplayer.addGaintag(player.getCards('h'),'shibao_skill');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"出牌阶段，你使用本轮获得的牌时（以此技能获得的牌除外），根据类型执行以下效果：1.基本牌，不计入次数且无距离限制；2.锦囊牌，此牌目标+1或-1；3.装备牌，摸1张牌。"},"huishi":{"name":"慧识","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn ui.cardPile.childElementCount%10>0&&!event.numFixed;\n\t\t\t\t},prompt: function (){\n\t\t\t\t\treturn get.prompt('huishi')+'（当前牌堆尾数：'+ui.cardPile.childElementCount%10+'）';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn ui.cardPile.childElementCount%10>3;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\tevent.cards=game.cardsGotoOrdering(get.cards(ui.cardPile.childElementCount%10)).cards;\n\t\t\t\t\tvar num=Math.ceil(event.cards.length/2);\n\t\t\t\t\tvar str='按顺序将卡牌置于牌堆底';\n\t\t\t\t\tif(event.cards.length>num) str='按顺序将'+get.cnNumber(num)+'张牌置于牌堆底，然后获得其余的牌';\n\t\t\t\t\tplayer.chooseButton([str,'<div class=\"text center\">（先选择的在上）</div>',event.cards],true,num).set('ai',function(card){\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tfor(var i of result.links){\n\t\t\t\t\t\tcards.remove(i);\n\t\t\t\t\t\ti.fix();\n\t\t\t\t\t\tui.cardPile.appendChild(i);\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tif(cards.length) player.gain(cards,'gain2','log');\n\t\t\t\t},}","info":"摸牌阶段，你可以放弃摸牌，改为观看牌堆顶的X张牌，获得其中的一半（向下取整），然后将其余牌置入牌堆底。（X为牌堆数量的个位数）"},"qingleng":{"name":"清冷","script":"{audio: \"2\",trigger: {global: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar target=event.player;\n\t\t\t\t\treturn target!=player&&!target.storage.nohp&&(target.hp+target.countCards('h'))>=(ui.cardPile.childElementCount%10)&&player.countCards('he')>0&&player.canUse({name:'sha',nature:'ice'},target,false);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('he',get.prompt('qingleng',trigger.player),'将一张牌当做冰【杀】对其使用',function(card,player){\n\t\t\t\t\t\treturn player.canUse(get.autoViewAs({name:'sha',nature:'ice'},[card]),_status.event.target,false);\n\t\t\t\t\t}).set('target',trigger.player).set('ai',function(card){\n\t\t\t\t\t\tif(get.effect(_status.event.target,get.autoViewAs({name:'sha',nature:'ice'},[card]),player)<=0) return false;\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.useCard(get.autoViewAs({name:'sha',nature:'ice'},result.cards),result.cards,false,trigger.player,'qingleng');\n\t\t\t\t\t\tif(!player.storage.qingleng||!player.storage.qingleng.contains(trigger.player)){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\tplayer.markAuto('qingleng',[trigger.player]);\n\t\t\t\t\t\t\tplayer.storage.qingleng.sortBySeat();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"已对$发动过此技能\",},}","info":"一名角色的回合结束时，若其体力值与手牌数之和不小于X，则你可将一张牌当无距离限制的冰属性【杀】对其使用（X为牌堆数量的个位数）。若你本局游戏内未对其发动过此技能，则你摸一张牌。"},"xuanmu":{"name":"宣穆","script":"{audio: \"2\",trigger: {player: \"showCharacterAfter\",},forced: \"true\",hiddenSkill: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.toShow.contains('jin_zhangchunhua')&&player!=_status.currentPhase;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('xuanmu2');\n\t\t\t\t},}","info":"锁定技，隐匿技。你于其他角色的回合登场时，防止你受到的伤害直到回合结束。"},"buchen":{"name":"不臣","script":"{audio: \"2\",trigger: {player: \"showCharacterAfter\",},filter: function (event,player){\n\t\t\t\t\tvar target=_status.currentPhase;\n\t\t\t\t\treturn target&&target!=player&&target.countGainableCards(player,'he')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\tvar target=_status.currentPhase;\n\t\t\t\t\tplayer.gainPlayerCard(target,'he',get.prompt('buchen',target)).set('logSkill',['buchen',target]);\n\t\t\t\t},}","info":"隐匿技，你于其他角色的回合登场时，可获得当前回合角色的一张牌。"},"smyyingshi":{"name":"鹰视","script":"{audio: \"2\",enable: \"phaseUse\",locked: \"true\",onChooseToUse: function (event){\n\t\t\t\t\tif(game.online) return;\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<event.player.maxHp;i++){\n\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\tif(card) cards.push(card);\n\t\t\t\t\t\telse break;\n\t\t\t\t\t}\n\t\t\t\t\tevent.set('smyyingshi',cards);\n\t\t\t\t},chooseButton: {dialog: function (event){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('鹰视','hidden');\n\t\t\t\t\t\tif(event.smyyingshi&&event.smyyingshi.length) dialog.add(event.smyyingshi);\n\t\t\t\t\t\telse dialog.addText('牌堆无牌');\n\t\t\t\t\t\tfor(var i of dialog.buttons){\n\t\t\t\t\t\t\ti.classList.add('noclick');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.buttons.length=0;\n\t\t\t\t\t\treturn dialog;\n\t\t\t\t\t},filter: function (){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技，出牌阶段，你可观看牌堆顶的X张牌（X为你的体力上限）。"},"xiongzhi":{"name":"雄志","script":"{audio: \"2\",enable: \"phaseUse\",limited: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('xiongzhi');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card=get.cards()[0];\n\t\t\t\t\tevent.card=card;\n\t\t\t\t\tplayer.showCards(card);\n\t\t\t\t\tif(!player.hasUseTarget(card)){\n\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar next=player.chooseUseTarget(card,true);\n\t\t\t\t\tif(get.info(card).updateUsable=='phaseUse') next.addCount=false;\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool) event.goto(1);\n\t\t\t\t\telse{\n\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(!player.hasSkill('smyyingshi')) return 1;\n\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\tfor(var i=0;i<Math.min(2,player.maxHp);i++){\n\t\t\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\t\tif(!player.hasValueTarget(card)) return 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可展示牌堆顶的一张牌并使用之。若如此做，你重复此流程，直到你以此法展示的牌无法使用。"},"quanbian":{"name":"权变","script":"{audio: \"2\",trigger: {player: [\"useCard\",\"respond\"],},hasHand: function (event){\n\t\t\t\t\tvar evts=event.player.getHistory('lose',function(evt){\n\t\t\t\t\t\treturn evt.getParent()==event;\n\t\t\t\t\t});\n\t\t\t\t\treturn evts&&evts.length==1&&evts[0].hs.length>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar phase=event.getParent('phaseUse');\n\t\t\t\t\tif(!phase||phase.player!=player) return false;\n\t\t\t\t\tvar suit=get.suit(event.card);\n\t\t\t\t\tif(!lib.suit.contains(suit)||!lib.skill.quanbian.hasHand(event)) return false;\n\t\t\t\t\treturn player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt!=event&&get.suit(evt.card)==suit&&lib.skill.quanbian.hasHand(evt)&&evt.getParent('phaseUse')==phase;\n\t\t\t\t\t}).length+player.getHistory('respond',function(evt){\n\t\t\t\t\t\treturn evt!=event&&get.suit(evt.card)==suit&&lib.skill.quanbian.hasHand(evt)&&evt.getParent('phaseUse')==phase;\n\t\t\t\t\t}).length==0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControl('cancel2').set('prompt',get.prompt('quanbian')).set('choiceList',[\n\t\t\t\t\t\t'摸一张牌',\n\t\t\t\t\t\t'观看牌堆顶的'+get.cnNumber(player.maxHp)+'张牌并将其中一张置于牌堆底',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar suit=get.suit(_status.event.getTrigger().card);\n\t\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.suit(card)==suit&&player.hasValueTarget(card,null,true);\n\t\t\t\t\t\t})) return 'cancel2';\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2'){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addTempSkill('quanbian2');\n\t\t\t\t\tplayer.storage.quanbian2.add(get.suit(trigger.card));\n\t\t\t\t\tplayer.markSkill('quanbian2');\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.cards=get.cards(player.maxHp);\n\t\t\t\t\tplayer.chooseButton(['将一张牌置于牌堆底',event.cards],true);\n\t\t\t\t\t'step 2'\n\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\tvar card=cards.pop();\n\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\tif(card==result.links[0]) ui.cardPile.appendChild(card);\n\t\t\t\t\t\telse ui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},}","info":"当你于出牌阶段内使用/打出手牌时，若此牌有花色且你本回合内未使用/打出过该花色的其他手牌，则你可以选择一项：①摸一张牌。②将牌堆顶X张牌中的一张置于牌堆底（X为你的体力上限）。若你发动此技能，则你本回合内不能再使用与此牌花色相同的手牌。"},"shiren":{"name":"识人","script":"{trigger: {player: \"showCharacterAfter\",},hiddenSkill: \"true\",logTarget: function (){\n\t\t\t\t\treturn _status.currentPhase;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(!event.toShow||!event.toShow.contains('jin_wangyuanji')) return false;\n\t\t\t\t\tvar target=_status.currentPhase;\n\t\t\t\t\treturn target&&target!=player&&target.isAlive()&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar next=game.createEvent('yanxi',false);\n\t\t\t\t\tnext.player=player;\n\t\t\t\t\tnext.target=_status.currentPhase;\n\t\t\t\t\tnext.setContent(lib.skill.yanxi.content);\n\t\t\t\t},}","info":"隐匿技。你于其他角色的回合内登场时，若其有手牌，则你可对其发动〖宴戏〗。"},"yanxi":{"name":"宴戏","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h')>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.card=target.getCards('h').randomGet();\n\t\t\t\t\tvar cards=get.cards(2);\n\t\t\t\t\tevent.cards=cards.concat([event.card]);\n\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\tui.cardPile.insertBefore(cards.pop().fix(),ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tevent.cards.randomSort();\n\t\t\t\t\tgame.log(player,'展示了',event.cards);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar str=get.translation(player)+'对'+get.translation(target)+'发动了【宴戏】';\n\t\t\t\t\tgame.broadcastAll(function(str,id,cards){\n\t\t\t\t\t\tvar dialog=ui.create.dialog(str,cards);\n\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t},str,event.videoId,event.cards);\n\t\t\t\t\tgame.addVideo('showCards',player,[str,get.cardsInfo(event.cards)]);\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar func=function(id,target){\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\tif(dialog) dialog.content.firstChild.innerHTML='猜猜哪张是'+get.translation(target)+'的手牌？';\n\t\t\t\t\t};\n\t\t\t\t\tif(player==game.me) func(event.videoId,target);\n\t\t\t\t\telse if(player.isOnline()) player.send(func,event.videoId,target);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar next=player.chooseButton(true);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\tif(_status.event.answer) return button.link==_status.event.answer?1:0;\n\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\n\t\t\t\t\t});\n\t\t\t\t\tif(player.hasSkillTag('viewHandcard',null,target,true)) next.set('answer',card);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tplayer.addTempSkill('yanxi2');\n\t\t\t\t\tvar card2=result.links[0];\n\t\t\t\t\tif(card2==card){\n\t\t\t\t\t\tplayer.popup('洗具');\n\t\t\t\t\t\tcards.remove(card2);\n\t\t\t\t\t\tplayer.$gain2(cards);\n\t\t\t\t\t\tplayer.gain(cards,'log').gaintag.add('yanxi');\n\t\t\t\t\t\tplayer.gain(card,target,'bySelf','giveAuto').gaintag.add('yanxi');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.popup('杯具');\n\t\t\t\t\t\tplayer.gain(card2,'gain2').gaintag.add('yanxi');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"6\",result: {player: \"1\",target: \"-0.6\",},},}","info":"出牌阶段，你可选择一名有手牌的角色。你将该角色的一张随机手牌与牌堆顶的两张牌混合后展示，并选择其中一张。若你以此法选择的是该角色的手牌，则你获得这三张牌。否则你获得选择的牌。你通过〖宴戏〗获得的牌，不计入当前回合的手牌上限。"},"tuishi":{"name":"推弑","script":"{audio: \"2\",trigger: {player: \"showCharacterAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tvar target=_status.currentPhase;\n\t\t\t\t\treturn player!=target&&target&&target.isAlive()&&event.toShow&&event.toShow.contains('jin_simazhao');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('tuishi2');\n\t\t\t\t},}","info":"隐匿技，你于其他角色A的回合内登场时，可于此回合结束时选择其攻击范围内的一名角色B。A选择一项：①对B使用一张【杀】。②你对A造成1点伤害。"},"choufa":{"name":"筹伐","script":"{enable: \"phaseUse\",audio: \"2\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn lib.skill.choufa.filterTarget(null,player,current);\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.hasSkill('choufa2')&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.choosePlayerCard(target,'h',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.showCards(result.cards);\n\t\t\t\t\tvar type=get.type2(result.cards[0],target);\n\t\t\t\t\ttarget.storage.choufa2=type;\n\t\t\t\t\ttarget.addTempSkill('choufa2',{player:'phaseAfter'});\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -target.countCards('h');\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可展示一名其他角色的一张手牌并记录其类型A。你令其原类型不为A的手牌的牌名均视为【杀】且均视为无属性，直到其回合结束。"},"zhaoran":{"name":"昭然","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},content: function (){\n\t\t\t\t\tplayer.addTempSkill('zhaoran2','phaseUseEnd');\n\t\t\t\t},}","info":"出牌阶段开始时，你可令你的手牌对其他角色可见直到出牌阶段结束。若如此做，当你于此阶段内失去一张手牌后，若你的手牌里没有与此牌花色相同的牌且你本回合内未因该花色的牌触发过此效果，则你选择一项：①摸一张牌。②弃置一名其他角色的一张牌。"},"chengwu":{"name":"成务","script":"{zhuSkill: \"true\",mod: {inRange: function (from,to){\n\t\t\t\t\t\tif(!from.hasZhuSkill('chengwu')||from._chengwu) return;\n\t\t\t\t\t\tfrom._chengwu=true;\n\t\t\t\t\t\tvar bool=game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=from&&current!=to&&current.group=='jin'&&from.hasZhuSkill('chengwu',current)&&current.inRange(to);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete from._chengwu;\n\t\t\t\t\t\tif(bool) return true;\n\t\t\t\t\t},},}","info":"主公技，锁定技，其他晋势力角色攻击范围内的角色视为在你的攻击范围内。"},"baoqie":{"name":"宝箧","script":"{audio: \"2\",trigger: {player: \"showCharacterAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.toShow&&event.toShow.contains('jin_xiahouhui');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\treturn get.subtype(card,false)=='equip5'&&!get.cardtag(card,'gifts');\n\t\t\t\t\t});\n\t\t\t\t\tif(!card){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.card=card;\n\t\t\t\t\tplayer.gain(card,'gain2');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.getCards('h').contains(card)&&get.subtype(card)=='equip5') player.chooseUseTarget(card).nopopup=true;\n\t\t\t\t},}","info":"隐匿技，锁定技。你登场后，从牌堆中获得一张不为赠物的宝物牌。若此牌在你的手牌区内为宝物牌，则你可以使用此牌。"},"jyishi":{"name":"宜室","script":"{audio: \"2\",trigger: {global: \"loseAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn (event.type=='discard'&&event.hs&&event.hs.filterInD('d').length&&event.player.isAlive()&&\n\t\t\t\t\tevent.player!=player&&event.player.isPhaseUsing()&&!player.hasSkill('jyishi2'));\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cards=trigger.hs.filterInD('d');\n\t\t\t\t\tvar str='是否发动【宜室】令'+get.translation(trigger.player)+'获得一张牌';\n\t\t\t\t\tif(event.cards.length>1) str+='，然后获得其余的牌';\n\t\t\t\t\tstr+='？';\n\t\t\t\t\tplayer.chooseButton([str,event.cards]).set('ai',function(button){\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar source=_status.event.source;\n\t\t\t\t\t\tif(get.attitude(player,source)>0) return Math.max(1,source.getUseValue(card,null,true));\n\t\t\t\t\t\tvar cards=_status.event.getParent().cards.slice(0);\n\t\t\t\t\t\tif(cards.length==1) return -get.value(card);\n\t\t\t\t\t\tcards.remove(card);\n\t\t\t\t\t\treturn (get.value(cards)-get.value(card)-2);\n\t\t\t\t\t}).set('source',trigger.player);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('jyishi2');\n\t\t\t\t\t\tplayer.logSkill('jyishi',trigger.player);\n\t\t\t\t\t\tif(cards.length>1){\n\t\t\t\t\t\t\ttrigger.player.$gain2(result.links[0]);\n\t\t\t\t\t\t\ttrigger.player.gain(result.links[0],'log');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse trigger.player.gain(result.links[0],'gain2');\n\t\t\t\t\t\tcards.remove(result.links[0]);\n\t\t\t\t\t\tif(cards.length) player.gain(cards,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每回合限一次，当有其他角色于其出牌阶段内因弃置而失去手牌后，你可令其获得这些牌中位于弃牌堆的一张，然后你获得其余位于弃牌堆的牌。"},"shiduo":{"name":"识度","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(target){\n\t\t\t\t\t\treturn player!=target&&player.canCompare(target);\n\t\t\t\t\t})\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&player.canCompare(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&target.isAlive()){\n\t\t\t\t\t\tvar cards=target.getCards('h');\n\t\t\t\t\t\tif(cards.length) player.gain(cards,target,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar num=Math.floor(player.countCards('h')/2);\n\t\t\t\t\tif(num&&target.isAlive()) player.chooseCard('h',num,true,'交给'+get.translation(target)+get.cnNumber(num)+'张牌')\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length) target.gain(result.cards,player,'giveAuto');\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar delta=(target.countCards('h')-player.countCards('h'));\n\t\t\t\t\t\t\tif(delta<0) return 0;\n\t\t\t\t\t\t\treturn -1-delta;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以与一名其他角色拼点。若你赢，你获得其所有手牌。然后你交给其X张手牌（X为你手牌数的一半，向下取整）。"},"taoyin":{"name":"韬隐","script":"{audio: \"2\",trigger: {player: \"showCharacterAfter\",},logTarget: function (){\n\t\t\t\t\treturn _status.currentPhase;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar target=_status.currentPhase;\n\t\t\t\t\treturn target&&target!=player&&target.isAlive();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,_status.currentPhase)<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t_status.currentPhase.addTempSkill('taoyin2');\n\t\t\t\t\t_status.currentPhase.addMark('taoyin2',2,false);\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"隐匿技，当你登场后，若当前回合角色存在且不是你，则你可令该角色本回合的手牌上限-2。"},"yimie":{"name":"夷灭","script":"{audio: \"2\",usable: \"1\",trigger: {source: \"damageBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&event.num<event.player.hp;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)>-2) return false;\n\t\t\t\t\tif(player.hp>2) return true;\n\t\t\t\t\tif(player.hp==2&&event.player.hp<3) return false;\n\t\t\t\t\treturn player.hp>1;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\ttrigger.player.addTempSkill('yimie2');\n\t\t\t\t\ttrigger.yimie_num=trigger.player.hp-trigger.num;\n\t\t\t\t\ttrigger.num=trigger.player.hp;\n\t\t\t\t},}","info":"每回合限一次，当你对其他角色造成伤害时，若伤害值X小于Y，则你可失去1点体力，将伤害值改为Y。此伤害结算结束后，其回复(Y-X)点体力。（Y为其体力值）’"},"ruilve":{"name":"睿略","script":"{unique: \"true\",audio: \"2\",global: \"ruilve2\",zhuSkill: \"true\",}","info":"主公技，其他晋势力角色的出牌阶段限一次，该角色可以将一张带有伤害标签的基本牌或锦囊牌交给你。"},"tairan":{"name":"泰然","script":"{audio: \"2\",trigger: {player: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<Math.min(5,player.maxHp)||player.countCards('h')<Math.min(player.maxHp,5);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addSkill('tairan2');\n\t\t\t\t\tif(!player.storage.tairan2) player.storage.tairan2=0;\n\t\t\t\t\tvar num=Math.min(player.maxHp,5)-player.hp;\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\tplayer.storage.tairan2+=num;\n\t\t\t\t\t\tplayer.recover(num);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.countCards('h')<Math.min(player.maxHp,5)) player.drawTo(Math.min(player.maxHp,5)).gaintag=['tairan'];\n\t\t\t\t},}","info":"锁定技，回合结束时，你回复Y点体力，并将手牌摸至X张。出牌阶段开始时，你失去Y点体力，弃置上次以此法获得的牌。（X为你的体力上限，且至多为5；Y=X-你的体力值）"},"xijue":{"name":"袭爵","script":"{audio: \"2\",trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.addMark('xijue',4);\n\t\t\t\t},intro: {name2: \"爵\",content: \"mark\",},derivation: [\"retuxi\",\"xiaoguo\"],group: [\"xijue_gain\",\"xijue_tuxi\",\"xijue_xiaoguo\"],}","info":"锁定技，游戏开始时，你获得4枚“爵”。回合结束时，你获得X枚“爵”（X为你本回合内造成的伤害数）。你可弃置一枚“爵”并在合适的时机发动〖突袭〗和〖骁果〗。"},"sanchen":{"name":"三陈","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tvar stat=player.getStat('sanchen');\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn (!stat||!stat.contains(current));\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tvar stat=player.getStat('sanchen');\n\t\t\t\t\treturn (!stat||!stat.contains(target));\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar stat=player.getStat();\n\t\t\t\t\tif(!stat.sanchen) stat.sanchen=[];\n\t\t\t\t\tstat.sanchen.push(target);\n\t\t\t\t\tplayer.addMark('sanchen',1,false);\n\t\t\t\t\ttarget.draw(3);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!target.countCards('he')) event.finish();\n\t\t\t\t\telse target.chooseToDiscard('he',true,3).set('ai',function(card){\n\t\t\t\t\t\tvar list=ui.selected.cards.map(function(i){\n\t\t\t\t\t\t\treturn get.type2(i);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(!list.contains(get.type2(card))) return 7-get.value(card);\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i of result.cards) list.add(get.type2(i));\n\t\t\t\t\t\tif(list.length==result.cards.length){\n\t\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\t\tplayer.getStat('skill').sanchen--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",threaten: \"1.7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return -0.1;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},intro: {content: \"已发动过#次技能\",},}","info":"出牌阶段，你可选择一名本回合内未选择过的角色。其摸三张牌，然后弃置三张牌。若其以此法弃置的牌的类别均不相同，则其摸一张牌。否则你本阶段内不能再发动〖三陈〗。"},"zhaotao":{"name":"诏讨","script":"{trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('sanchen')>2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('zhaotao');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkillLog('pozhu');\n\t\t\t\t},derivation: \"pozhu\",}","info":"觉醒技，准备阶段，若你本局游戏内发动〖三陈〗的次数大于2，则你减1点体力上限并获得〖破竹〗。"},"recangchu":{"name":"仓储","script":"{audio: \"2\",trigger: {global: \"gameStart\",player: \"enterGame\",},marktext: \"粮\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('recangchu')<game.countPlayer();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addMark('recangchu',Math.min(3,game.countPlayer()-player.countMark('recangchu')));\n\t\t\t\t},intro: {content: \"mark\",name: \"粮\",},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.countMark('recangchu');\n\t\t\t\t\t},},group: [\"recangchu2\",\"recangchu3\"],}","info":"锁定技，游戏开始时，你获得3个“粮”。你的手牌上限+X（X为“粮”数）。当你于回合外获得牌时，你获得一个“粮”。（你的“粮”数不能超过存活角色数）"},"reliangying":{"name":"粮营","script":"{audio: \"2\",trigger: {player: \"phaseDiscardBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar map={};\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<=player.countMark('recangchu');i++){\n\t\t\t\t\t\tvar cn=get.cnNumber(i,true);\n\t\t\t\t\t\tmap[cn]=i;\n\t\t\t\t\t\tlist.push(cn);\n\t\t\t\t\t}\n\t\t\t\t\tlist.push('cancel2');\n\t\t\t\t\tevent.map=map;\n\t\t\t\t\tplayer.chooseControl(list).set('prompt',get.prompt('reliangying')).set('prompt2','摸至多'+get.cnNumber(player.countMark('recangchu'))+'张牌，然后交给等量的角色各一张牌').set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar num=Math.min(player.countMark('recangchu'),game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn get.attitude(player,current)>0;\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tif(num) return get.cnNumber(num);\n\t\t\t\t\t\treturn 'cancel2';\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2'){event.finish();return;}\n\t\t\t\t\tplayer.logSkill('reliangying');\n\t\t\t\t\tvar num=event.map[result.control]||1;\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar num=Math.min(event.num,player.countCards('he'),game.countPlayer(function(target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}));\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\t\tprompt:'将'+get.cnNumber(num)+'张牌交给其他角色',\n\t\t\t\t\t\t\tprompt2:'操作提示：先按顺序选中所有要给出的牌，然后再按顺序选择等量的目标角色。可少选一张牌，并将此牌留给自己',\n\t\t\t\t\t\t\tselectCard:[num-1,num],\n\t\t\t\t\t\t\tselectTarget:function(){\n\t\t\t\t\t\t\t\treturn ui.selected.cards.length;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcomplexSelect:true,\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\tif(card.name=='shan') return 1;\n\t\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target)+(5-Math.max(4,target.countCards('h')));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tforced:true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\twhile(result.cards.length){\n\t\t\t\t\t\t\tvar target=result.targets.shift();\n\t\t\t\t\t\t\tvar card=result.cards.shift();\n\t\t\t\t\t\t\ttarget.gain(card,player);\n\t\t\t\t\t\t\tplayer.$giveAuto(card,target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.next.sort(function(a,b){\n\t\t\t\t\t\t\treturn lib.sort.seat(a.player,b.player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"弃牌阶段开始时，你可以摸至多X张牌，然后交给等量的角色各一张牌。（X为你的“粮”数）"},"reshishou":{"name":"失守","script":"{audio: \"2\",trigger: {player: [\"useCard\",\"damageEnd\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.countMark('recangchu')) return false;\n\t\t\t\t\treturn (event.name=='damage')?(event.nature=='fire'):(event.card&&event.card.name=='jiu');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.removeMark('recangchu',Math.min(player.countMark('recangchu'),trigger.num||1));\n\t\t\t\t},group: \"reshishou2\",}","info":"锁定技，当你使用【酒】时或受到1点火焰伤害后，你移去一个“粮”。准备阶段，若你没有“粮”，你失去1点体力。"},"pianchong":{"name":"偏宠","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tvar card1=get.cardPile2(function(card){\n\t\t\t\t\t\treturn get.color(card,false)=='red';\n\t\t\t\t\t});\n\t\t\t\t\tif(card1) cards.push(card1);\n\t\t\t\t\tvar card2=get.cardPile2(function(card){\n\t\t\t\t\t\treturn get.color(card,false)=='black';\n\t\t\t\t\t});\n\t\t\t\t\tif(card2) cards.push(card2);\n\t\t\t\t\tif(cards.length) player.gain(cards,'gain2');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tplayer.chooseControl('red','black').set('prompt','偏宠：请选择一种颜色。直至你的下回合开始时，失去该颜色的一张牌后，从牌堆获得另一种颜色的一张牌。').set('ai',function(){\n\t\t\t\t\t\tvar red=0,black=0;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar cards=player.getCards('he');\n\t\t\t\t\t\tfor(var i of cards){\n\t\t\t\t\t\t\tvar add=1;\n\t\t\t\t\t\t\tvar color=get.color(i,player);\n\t\t\t\t\t\t\tif(get.position(i)=='e') add=0.5;\n\t\t\t\t\t\t\telse if(get.name(i,player)!='sha'&&player.hasValueTarget(i)) add=1.5;\n\t\t\t\t\t\t\tif(color=='red') red+=add;\n\t\t\t\t\t\t\telse black+=add;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(black>red) return 'black';\n\t\t\t\t\t\treturn 'red';\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.storage.pianchong2=result.control;\n\t\t\t\t\tplayer.addTempSkill('pianchong2',{player:'phaseBeginStart'});\n\t\t\t\t\tplayer.popup(result.control,result.control=='red'?'fire':'thunder');\n\t\t\t\t\tgame.log(player,'声明了','#y'+get.translation(result.control));\n\t\t\t\t},ai: {threaten: \"4.8\",},}","info":"摸牌阶段开始时，你可放弃摸牌。若如此做，你从牌堆中获得一张红色牌和一张黑色牌。然后你选择一种颜色。你的下回合开始前，当你失去该颜色的一张牌后，你从牌堆中获得另一种颜色的一张牌。"},"zunwei":{"name":"尊位","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.zunwei||player.storage.zunwei.length<3;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[\n\t\t\t\t\t\t\t'选择体力值大于你的一名角色',\n\t\t\t\t\t\t\t'选择手牌数大于你的一名角色',\n\t\t\t\t\t\t\t'选择装备数大于你的一名角色',\n\t\t\t\t\t\t];\n\t\t\t\t\t\tvar choiceList=ui.create.dialog('尊位：清选择一项','forcebutton','hidden');\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(player.storage.zunwei&&player.storage.zunwei.contains(i)) continue;\n\t\t\t\t\t\t\tvar bool=game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&lib.skill.zunwei.backups[i].filterTarget(null,player,current);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar str='<div class=\"popup text\" style=\"width:calc(100% - 10px);display:inline-block\">';\n\t\t\t\t\t\t\tif(!bool) str+='<div style=\"opacity:0.5\">';\n\t\t\t\t\t\t\tstr+=list[i];\n\t\t\t\t\t\t\tif(!bool) str+='</div>';\n\t\t\t\t\t\t\tstr+='</div>';\n\t\t\t\t\t\t\tvar next=choiceList.add(str);\n\t\t\t\t\t\t\tnext.firstChild.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tnext.firstChild.link=i;\n\t\t\t\t\t\t\tnext.firstChild._filterButton=bool;\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\tnext[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchoiceList.buttons.add(next.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn choiceList;\n\t\t\t\t\t},filter: function (button){\n\t\t\t\t\t\treturn button._filterButton;\n\t\t\t\t\t},backup: function (links){\n\t\t\t\t\t\tvar next=get.copy(lib.skill.zunwei.backups[links[0]]);\n\t\t\t\t\t\tnext.audio='zunwei';\n\t\t\t\t\t\tnext.filterCard=function(){return false};\n\t\t\t\t\t\tnext.selectCard=-1;\n\t\t\t\t\t\treturn next;\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t var player=_status.event.player;\n\t\t\t\t\t switch(button.link){\n\t\t\t\t\t \tcase 0:{\n\t\t\t\t\t \t\tvar target=game.findPlayer(function(current){\n\t\t\t\t\t \t\t\treturn current.isMaxHp();\n\t\t\t\t\t \t\t});\n\t\t\t\t\t \t\treturn (Math.min(target.hp,player.maxHp)-player.hp)*2;\n\t\t\t\t\t \t}\n\t\t\t\t\t \tcase 1:{\n\t\t\t\t\t \t\tvar target=game.findPlayer(function(current){\n\t\t\t\t\t \t\t\treturn current.isMaxHandcard();\n\t\t\t\t\t \t\t});\n\t\t\t\t\t \t\treturn Math.min(5,target.countCards('h')-player.countCards('h'))*0.8;\n\t\t\t\t\t \t}\n\t\t\t\t\t \tcase 2:{\n\t\t\t\t\t \t\tvar target=game.findPlayer(function(current){\n\t\t\t\t\t \t\t\treturn current.isMaxEquip();\n\t\t\t\t\t \t\t});\n\t\t\t\t\t \t\treturn (target.countCards('e')-player.countCards('e'))*1.4;\n\t\t\t\t\t \t}\n\t\t\t\t\t }\n\t\t\t\t\t},prompt: function (links){\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t'选择一名体力值大于你的其他角色，将体力值回复至与其相同',\n\t\t\t\t\t\t\t'选择一名手牌数大于你的其他角色，将手牌数摸至与其相同',\n\t\t\t\t\t\t\t'选择一名装备区内牌数大于你的其他角色，依次使用牌堆中的装备牌，直到装备数与其相同',\n\t\t\t\t\t\t][links[0]];\n\t\t\t\t\t},},backups: [{\"ai\":{\"order\":10,\"result\":{}}},{\"ai\":{\"order\":10,\"result\":{}}},{\"ai\":{\"order\":10,\"result\":{}}}],ai: {order: \"10\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可选择本局游戏内未选择过的一项：①若你已受伤，则你可以选择一名体力值大于你的其他角色，你将体力值回复至X（X为你的体力上限与其体力值中的较小值）②选择一名手牌数大于你的其他角色，你将手牌数摸至与其相同（至多摸五张）③选择一名装备区内牌数大于你的其他角色。你令X=1。若你装备区内的('equip'+X)栏为空，则你使用牌堆中的一张副类别为('equip'+X)，且能对自己使用的装备牌。你令X+1。若X不大于5，且你装备区内的牌数仍小于目标角色，则你重复此流程。"},"hfjieying":{"name":"节应","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('hfjieying'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.attitude(player,target)*(1+target.countCards('h',function(card){\n\t\t\t\t\t\t\treturn !get.tag(card,'damage')&&target.hasValueTarget(card);\n\t\t\t\t\t\t}))/(1+target.countCards('h'));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('hfjieying',target);\n\t\t\t\t\t\ttarget.addTempSkill('hfjieying2',{player:'phaseJieshuBegin'});\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.05\",},}","info":"结束阶段，你可以选择一名其他角色，该角色下回合使用【杀】或普通锦囊牌无距离限制且可多指定一个目标，且当其造成伤害后，其无法再使用牌直到回合结束。 "},"weipo":{"name":"危迫","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&!player.hasSkill('weipo3')&&player.countCards('h')<Math.min(5,player.maxHp)&&(event.card.name=='sha'||get.type(event.card)=='trick');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addTempSkill('weipo2');\n\t\t\t\t\tplayer.drawTo(Math.min(5,player.maxHp));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar evt=trigger.getParent();\n\t\t\t\t\tif(!evt.weipo) evt.weipo={};\n\t\t\t\t\tevt.weipo[player.playerid]=player.countCards('h');\n\t\t\t\t},}","info":"锁定技，其他角色使用【杀】或普通锦囊牌指定你为目标后，若你的手牌数小于X，则你将手牌摸至X张，并记录摸牌事件结算后的手牌数Y。此牌结算结束后，若你的手牌数小于Y，则你将一张手牌交给此牌的使用者，且此技能失效直到你的下回合开始。（X为你的体力上限且至多为5） "},"refuqi":{"name":"伏骑","script":"{audio: \"fuqi\",forced: \"true\",trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\treturn event.card&&(get.type(event.card)=='trick'||get.type(event.card)=='basic'&&!['shan','tao','jiu','du'].contains(event.card.name))&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&get.distance(player,current)<=1;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.directHit.addArray(game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&get.distance(player,current)<=1;\n\t\t\t\t\t}));\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\treturn get.distance(player,arg.target)<=1;\n\t\t\t\t\t},},}","info":"锁定技，当你使用牌时，你令所有距离为1的其他角色不能使用或打出牌响应此牌。"},"jiaozi":{"name":"骄恣","script":"{audio: \"2\",trigger: {player: \"damageBegin3\",source: \"damageBegin1\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isMaxHandcard(true);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},ai: {presha: \"true\",},}","info":"锁定技，若你的手牌数为全场唯一最多，则当你造成或受到伤害时，此伤害+1。"},"juntun":{"name":"军屯","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.maxHp>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.draw(player.maxHp);\n\t\t\t\t},}","info":"锁定技，准备阶段，若X大于1，则你减1点体力上限并摸X张牌（X为你的体力上限）。"},"jiaojie":{"name":"狡黠","script":"{audio: \"2\",mod: {ignoredHandcard: function (card,player){\n\t\t\t\t\t\tif(get.color(card)=='red'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},cardDiscardable: function (card,player,name){\n\t\t\t\t\t\tif(name=='phaseDiscard'&&get.color(card)=='red'){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},targetInRange: function (card){\n\t\t\t\t\t\tif(get.color(card)=='black') return true;\n\t\t\t\t\t},cardUsable: function (card){\n\t\t\t\t\t\tif(get.color(card)=='black') return Infinity;\n\t\t\t\t\t},},}","info":"锁定技，你的红色牌不计入手牌上限。你使用黑色牌无距离和次数限制。"},"rezhongjian":{"name":"忠鉴","script":"{enable: \"phaseUse\",audio: \"zhongjian\",usable: \"2\",filter: function (event,player){\n\t\t\t\t\tif(player.getStat().skill.rezhongjian&&!player.hasSkill('recaishi2')) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn lib.skill.rezhongjian.filterTarget(null,player,current);\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(!player.storage.rezhongjian2) return true;\n\t\t\t\t\treturn !player.storage.rezhongjian2[0].contains(target)&&!player.storage.rezhongjian2[1].contains(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControl().set('prompt','忠鉴：为'+get.translation(target)+'选择获得一项效果').set('choiceList',[\n\t\t\t\t\t\t'令其于下回合开始前首次造成伤害后弃置两张牌',\n\t\t\t\t\t\t'令其于下回合开始前首次受到伤害后摸两张牌',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,_status.event.getParent().target)>0?1:0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.addTempSkill('rezhongjian2',{player:'phaseBeginStart'});\n\t\t\t\t\t//var str=['造成伤害弃牌','受到伤害摸牌'][result.index];\n\t\t\t\t\t//player.popup(str,['fire','wood'][result.index]);\n\t\t\t\t\t//game.log(player,'选择了','#y'+str)\n\t\t\t\t\tplayer.storage.rezhongjian2[result.index].push(target);\n\t\t\t\t\tplayer.markSkill('rezhongjian2');\n\t\t\t\t},ai: {order: \"10\",expose: \"0\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)==0) return false;\n\t\t\t\t\t\t\tvar sgn=get.sgn((get.realAttitude||get.attitude)(player,target));\n\t\t\t\t\t\t\tif(game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.sgn((get.realAttitude||get.attitude)(player,current))==sgn;\n\t\t\t\t\t\t\t})<=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.sgn((get.realAttitude||get.attitude)(player,current))!=sgn;\n\t\t\t\t\t\t\t})) return 1;\n\t\t\t\t\t\t\treturn 0.9;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择一名本回合内未选择过的角色。你令其获得一项效果直至你的下回合开始：①其下次造成伤害后弃置两张牌，然后你摸一张牌。②其下次受到伤害后摸两张牌，然后你摸一张牌。"},"recaishi":{"name":"才识","script":"{trigger: {player: \"phaseDrawEnd\",},direct: \"true\",audio: \"caishi\",isSame: function (event){\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tevent.player.getHistory('gain',function(evt){\n\t\t\t\t\t\tif(evt.getParent().name=='draw'&&evt.getParent('phaseDraw')==event) cards.addArray(evt.cards);\n\t\t\t\t\t});\n\t\t\t\t\tif(!cards.length) return 'nogain';\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tlist.add(get.suit(cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length==1) return true;\n\t\t\t\t\tif(list.length==cards.length) return false;\n\t\t\t\t\treturn 'nogain';\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar isSame=lib.skill.recaishi.isSame(event);\n\t\t\t\t\tif(isSame=='nogain') return false;\n\t\t\t\t\treturn isSame||player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(lib.skill.recaishi.isSame(trigger)){\n\t\t\t\t\t\tplayer.logSkill('recaishi');\n\t\t\t\t\t\tplayer.addTempSkill('recaishi2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseBool(get.prompt('recaishi'),'回复1点体力，然后本回合内不能对自己使用牌').set('ai',function(){\n\t\t\t\t\t\tif(player.countCards('h','tao')) return false;\n\t\t\t\t\t\tif(player.hp<2) return true;\n\t\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\t\treturn info&&(info.toself||info.selectTarget==-1)&&player.canUse(card,player)&&player.getUseValue(card)>0;\n\t\t\t\t\t\t})==0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('recaishi');\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\tplayer.addTempSkill('recaishi3');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段结束时，若你于本阶段内因摸牌而获得的所有的牌：花色均相同，你将〖忠鉴〗于本回合内改为“出牌阶段限两次”。不均相同，你可回复1点体力。若如此做，你本回合内不能对自己使用牌。"},"minsi":{"name":"敏思","script":"{audio: \"2\",enable: \"phaseUse\",getResult: function (cards){\n\t\t\t\t\tvar l=cards.length;\n\t\t\t\t\tvar all=Math.pow(l,2);\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<all;i++){\n\t\t\t\t\t\tvar array=[];\n\t\t\t\t\t\tfor(var j=0;j<l;j++){\n\t\t\t\t\t\t\tif(Math.floor((i%Math.pow(2,j+1))/Math.pow(2,j))>0) array.push(cards[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var k of array){\n\t\t\t\t\t\t\tnum+=get.number(k);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num==13) list.push(array);\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\t\tif(a.length!=b.length) return b.length-a.length;\n\t\t\t\t\t\t\treturn get.value(a)-get.value(b);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn list[0];\n\t\t\t\t\t}\n\t\t\t\t\treturn list;\n\t\t\t\t},usable: \"1\",filterCard: function (card){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t}\n\t\t\t\t\treturn get.number(card)+num<=13;\n\t\t\t\t},complexCard: \"true\",selectCard: function (){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(num==13) return ui.selected.cards.length;\n\t\t\t\t\treturn ui.selected.cards.length+2;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar evt=_status.event;\n\t\t\t\t\tif(!evt.minsi_choice) evt.minsi_choice=lib.skill.minsi.getResult(evt.player.getCards('he'));\n\t\t\t\t\tif(!evt.minsi_choice.contains(card)) return 0;\n\t\t\t\t\treturn 1;\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\tplayer.draw(cards.length*2).gaintag=['minsi2'];\n\t\t\t\t\tplayer.addTempSkill('minsi2');\n\t\t\t\t},ai: {order: \"5\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置任意张点数之和为13的牌，然后摸两倍数量的牌。以此法获得的牌中，黑色牌本回合无距离限制，红色牌本回合不计入手牌上限。"},"jijing":{"name":"吉境","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=result.number;\n\t\t\t\t\tvar next=player.chooseToDiscard('是否弃置任意张点数之和为'+get.cnNumber(num)+'的牌并回复1点体力？',function(card){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.number(card)+num<=_status.event.num;\n\t\t\t\t\t},'he');\n\t\t\t\t\tnext.set('num',num);\n\t\t\t\t\tnext.set('complexCard',true);\n\t\t\t\t\tnext.set('selectCard',function(){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num==_status.event.num) return ui.selected.cards.length;\n\t\t\t\t\t\treturn ui.selected.cards.length+2;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('cardResult',function(){\n\t\t\t\t\t\tvar cards=player.getCards('he');\n\t\t\t\t\t\tvar l=cards.length;\n\t\t\t\t\t\tvar all=Math.pow(l,2);\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=1;i<all;i++){\n\t\t\t\t\t\t\tvar array=[];\n\t\t\t\t\t\t\tfor(var j=0;j<l;j++){\n\t\t\t\t\t\t\t\tif(Math.floor((i%Math.pow(2,j+1))/Math.pow(2,j))>0) array.push(cards[j])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar numx=0;\n\t\t\t\t\t\t\tfor(var k of array){\n\t\t\t\t\t\t\t\tnumx+=get.number(k);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(numx==num) list.push(array);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.value(a)-get.value(b);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn list[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn list;\n\t\t\t\t\t}());\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(!_status.event.cardResult.contains(card)) return 0;\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool) player.recover();\n\t\t\t\t},}","info":"当你受到伤害后，你可以进行一次判定，然后若你弃置任意张点数之和与判定结果点数相同的牌，你回复1点体力。"},"zhuide":{"name":"追德","script":"{audio: \"2\",trigger: {player: \"die\",},forceDie: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('zhuide'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhuide',target);\n\t\t\t\t\t\tvar names=[];\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\twhile(cards.length<4){\n\t\t\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\t\t\treturn !cards.contains(card)&&!names.contains(card.name)&&get.type(card)=='basic';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\t\t\tnames.push(card.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(cards.length) target.gain(cards,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你死亡时，你可令一名其他角色从牌堆中获得四张名称各不相同的基本牌。"},"cixiao":{"name":"慈孝","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hasSkill('panshi');\n\t\t\t\t\t})) return true;\n\t\t\t\t\treturn player.countCards('he')>=1&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&!current.hasSkill('panshi');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hasSkill('panshi');\n\t\t\t\t\t})) event.goto(2);\n\t\t\t\t\telse player.chooseTarget(lib.filter.notMe,get.prompt('cixiao'),'令一名其他角色获得「义子」标记').set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=-get.attitude(player,target);\n\t\t\t\t\t\treturn att*target.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('cixiao',target);\n\t\t\t\t\t\ttarget.addSkill('panshi');\n\t\t\t\t\t}\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.hasSkill('panshi');\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt('cixiao'),\n\t\t\t\t\t\tprompt2:('弃置一张牌并将'+get.translation(list)+'的「义子」标记转移给其他角色'),\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&!target.hasSkill('panshi');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:lib.filter.cardDiscardable,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(_status.event.goon) return 5-get.value(card);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar att=-get.attitude(player,target);\n\t\t\t\t\t\t\treturn att*target.countCards('h');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgoon:function(target){\n\t\t\t\t\t\t\tvar att=-get.attitude(player,target);\n\t\t\t\t\t\t\treturn att*target.countCards('h')<=0;\n\t\t\t\t\t\t}(list[0]),\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('cixiao');\n\t\t\t\t\t\tplayer.discard(result.cards).delay=false;\n\t\t\t\t\t\tplayer.line2(game.filterPlayer(function(current){\n\t\t\t\t\t\t\tif(current.hasSkill('panshi')){\n\t\t\t\t\t\t\t\tcurrent.removeSkill('panshi');\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).concat(result.targets),'green');\n\t\t\t\t\t\ttarget.addSkill('panshi');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},derivation: \"panshi\",ai: {threaten: \"8\",},}","info":"准备阶段，若场上没有“义子”标记，你可令一名其他角色获得一个“义子”标记；若场上有“义子”标记，你可以弃置一张牌移动“义子”标记。拥有“义子”标记的角色获得技能“叛弑”。"},"xianshuai":{"name":"先率","script":"{audio: \"2\",trigger: {global: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.isAlive()&&!player.hasSkill('xianshuai2');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('xianshuai2','roundStart');\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tif(player==trigger.source&&trigger.player.isAlive()){\n\t\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\t\ttrigger.player.damage();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，有角色造成伤害后，若此伤害是本轮第一次造成伤害：你摸一张牌；若伤害来源是你，则你对受伤角色再造成1点伤害。"},"shiyuan":{"name":"诗怨","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar num=1;\n\t\t\t\t\tif(_status.currentPhase&&_status.currentPhase.group=='qun'&&player.hasZhuSkill('yuwei',_status.currentPhase)) num=2;\n\t\t\t\t\treturn player!=event.player&&player.getHistory('gain',function(evt){\n\t\t\t\t\t\treturn evt.getParent(2).name=='shiyuan'&&evt.cards.length==(2+get.sgn(event.player.hp-player.hp));\n\t\t\t\t\t}).length<num;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2+get.sgn(trigger.player.hp-player.hp));\n\t\t\t\t},}","info":"每回合每项限一次，当你成为其他角色使用牌的目标后：①若其体力值大于你，你摸三张牌。②若其体力值等于你，你摸两张牌。③若其体力值小于你，你摸一张牌。"},"dushi":{"name":"毒逝","script":"{audio: \"2\",global: \"dushi2\",locked: \"true\",trigger: {player: \"die\",},forceDie: \"true\",direct: \"true\",skillAnimation: \"true\",animationColor: \"gray\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('请选择【毒逝】的目标','选择一名其他角色，令其获得技能【毒逝】',true,lib.filter.notMe).set('forceDie',true).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('dushi',target);\n\t\t\t\t\t\ttarget.markSkill('dushi');\n\t\t\t\t\t\ttarget.addSkillLog('dushi');\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"您已经获得弘农王的诅咒\",},}","info":"锁定技，你处于濒死状态时，其他角色不能对你使用【桃】。你死亡时，你选择一名其他角色获得〖毒逝〗。"},"yuwei":{"name":"余威","script":"{zhuSkill: \"true\",ai: {combo: \"shiyuan\",},}","info":"主公技，锁定技，其他群雄角色的回合内，你将〖诗怨〗改为“每回合每项限两次”。"},"decadewuniang":{"name":"武娘","script":"{trigger: {player: [\"useCard\",\"respond\"],},audio: \"xinfu_wuniang\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('decadewuniang'),function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\treturn target.countGainableCards(player,'he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn 10-get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('xinfu_wuniang',target);\n\t\t\t\t\t\tplayer.line(target,'fire');\n\t\t\t\t\t\tplayer.gainPlayerCard(target,'he',true);\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\tif(!player.storage.decadexushen) event.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.name=='guansuo'||current.name2=='guansuo';\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length) game.asyncDraw(list);\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},}","info":"当你使用或打出【杀】时，你可以获得一名其他角色的一张牌。若如此做，其摸一张牌。（若你已发动许身，则关索也摸一张牌）"},"decadexushen":{"name":"许身","script":"{derivation: \"decadezhennan\",audio: \"xinfu_xushen\",trigger: {player: \"dying\",},limited: \"true\",skillAnimation: \"true\",animationColor: \"orange\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('decadexushen');\n\t\t\t\t\tplayer.addSkill('decadezhennan');\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.addTempSkill('decadexushen2');\n\t\t\t\t\ttrigger.decadexushen=true;\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，当你进入濒死状态后，你可以回复1点体力并获得技能“镇南”，然后如果你脱离濒死状态且“关索”不在场，你可令一名其他角色选择是否用“关索”代替其武将并令其摸三张牌。"},"spmouzhu":{"name":"谋诛","script":"{enable: \"phaseUse\",audio: \"mouzhu\",usable: \"1\",chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[\n\t\t\t\t\t\t\t'选择距离为1的角色',\n\t\t\t\t\t\t\t'选择体力值等于你的角色',\n\t\t\t\t\t\t];\n\t\t\t\t\t\tvar choiceList=ui.create.dialog('谋诛：请选择一项','forcebutton','hidden');\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar str='<div class=\"popup text\" style=\"width:calc(100% - 10px);display:inline-block\">';\n\t\t\t\t\t\t\tvar bool=lib.skill.spmouzhu.chooseButton.filter({link:i},player);\n\t\t\t\t\t\t\tif(!bool) str+='<div style=\"opacity:0.5\">';\n\t\t\t\t\t\t\tstr+=list[i];\n\t\t\t\t\t\t\tif(!bool) str+='</div>';\n\t\t\t\t\t\t\tstr+='</div>';\n\t\t\t\t\t\t\tvar next=choiceList.add(str);\n\t\t\t\t\t\t\tnext.firstChild.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tnext.firstChild.link=i;\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\tnext[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchoiceList.buttons.add(next.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn choiceList;\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn lib.skill.spmouzhux.filterTargets[button.link](null,player,current)\n\t\t\t\t\t\t});\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t},backup: function (links){\n\t\t\t\t\t\tlib.skill.spmouzhux.link=links[0];\n\t\t\t\t\t\treturn lib.skill.spmouzhux;\n\t\t\t\t\t},},ai: {order: \"7\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以从“距离为1”或“体力值等于你”中选择一个条件，然后令此时所有满足条件的角色依次进行以下结算：交给你一张手牌，然后若其手牌数小于你，则其视为对你使用一张【杀】或【决斗】。"},"spniluan":{"name":"逆乱","script":"{enable: \"phaseUse\",audio: \"niluan\",viewAs: {name: \"sha\",},check: function (card){\n\t\t\t\t\treturn 5.1-get.value(card);\n\t\t\t\t},filterCard: {color: \"black\",},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hp<=player.hp) return false;\n\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\n\t\t\t\t},position: \"he\",viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('he',lib.skill.spniluan.filterCard)>0&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp>player.hp&&player.canUse('sha',current);\n\t\t\t\t\t});\n\t\t\t\t},group: \"spniluan_clear\",ai: {canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以将一张黑色牌当做【杀】对体力值大于你的角色使用。此【杀】使用结算完成后，若你未因此【杀】造成过伤害，则你令此【杀】不计入使用次数。"},"spweiwu":{"name":"违忤","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",viewAs: {name: \"shunshou\",},filterCard: {color: \"red\",},position: \"he\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.countCards('h')<=player.countCards('h')) return false;\n\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('he',lib.skill.spweiwu.filterCard)>0&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h')>player.countCards('h')&&player.canUse('shunshou',current);\n\t\t\t\t\t});\n\t\t\t\t},ai: {wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,player)>0&&get.attitude(viewer,target)>0){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"7.5\",useful: \"4\",value: \"9\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0) return (target.countCards('he',function(card){\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\n\t\t\t\t\t\t\t})>0)?-1.5:1.5;\n\t\t\t\t\t\t\tvar js=target.getCards('j');\n\t\t\t\t\t\t\tif(js.length){\n\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\n\t\t\t\t\t\t\t\t//if(jj.name=='shunshou') return 3;\n\t\t\t\t\t\t\t\tif(js.length==1&&get.effect(target,jj,target,player)>=0){\n\t\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&!target.countCards('he',function(card){\n\t\t\t\t\t\t\t\treturn get.value(card,target)>0&&card!=target.getEquip('jinhe');\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.attitude(player,target)>1){\n\t\t\t\t\t\t\t\tvar js=target.getCards('j');\n\t\t\t\t\t\t\t\tif(js.length){\n\t\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\n\t\t\t\t\t\t\t\t\t//if(jj.name=='shunshou') return 1;\n\t\t\t\t\t\t\t\t\tif(js.length==1&&get.effect(target,jj,target,player)>=0){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},tag: {loseCard: \"1\",gain: \"1\",},},}","info":"出牌阶段限一次，你可以将一张红色牌当做【顺手牵羊】对手牌数大于你的角色使用。"},"yujue":{"name":"鬻爵","script":"{audio: \"2\",derivation: \"zhihu\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countDisabled()<5;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\treturn ui.create.dialog('###鬻爵###'+lib.translate.yujue_info);\n\t\t\t\t\t},chooseControl: function (event,player){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=1;i<6;i++){\n\t\t\t\t\t\t\tif(!player.isDisabled(i)) list.push('equip'+i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.push('cancel2');\n\t\t\t\t\t\treturn list;\n\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\tfor(var i=5;i>0;i--){\n\t\t\t\t\t\t\tif(player.isEmpty(i)) return ('equip'+i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 'cancel2';\n\t\t\t\t\t},backup: function (result){\n\t\t\t\t\t\tvar next=get.copy(lib.skill.yujuex);\n\t\t\t\t\t\tnext.position=result.control;\n\t\t\t\t\t\treturn next;\n\t\t\t\t\t},},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(target){\n\t\t\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\t\t\tvar hs=target.countCards('h');\n\t\t\t\t\t\t\t\treturn hs>2&&get.attitude(player,target)>0;\n\t\t\t\t\t\t\t})) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以废除一个装备栏，然后令一名有手牌的其他角色交给你一张手牌。其获得〖执笏〗直到你的下回合开始。"},"tuxing":{"name":"图兴","script":"{audio: \"2\",trigger: {player: \"disableEquipAfter\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.countDisabled()>=5){\n\t\t\t\t\t\tplayer.loseMaxHp(4);\n\t\t\t\t\t\tplayer.addSkill('tuxing2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，当你废除一个装备栏时，你加1点体力上限并回复1点体力。然后若你所有的装备栏均已被废除，则你减4点体力上限，且本局游戏内造成的伤害+1。"},"gongjian":{"name":"攻坚","script":"{audio: \"2\",trigger: {player: \"useCardToPlayered\",},usable: \"1\",logTarget: \"target\",filter: function (event,player){\n\t\t\t\t\tvar evt=event.getParent();\n\t\t\t\t\tvar history=player.getAllHistory('useCard',function(evtx){\n\t\t\t\t\t\treturn evtx.card.name=='sha'\n\t\t\t\t\t});\n\t\t\t\t\tvar index=history.indexOf(evt);\n\t\t\t\t\treturn index>0&&history[index-1].targets.filter(function(target){\n\t\t\t\t\t\treturn evt.targets.contains(target);\n\t\t\t\t\t}).length>0&&event.target.countDiscardableCards(player,'he')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discardPlayerCard(trigger.target,true,'he',2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=result.cards.filter(function(card){\n\t\t\t\t\t\t\treturn get.name(card,card.original=='h'?trigger.target:false)=='sha';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(cards.length) player.gain(cards,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每回合限一次，当你使用【杀】指定目标后，若此【杀】和你使用的上一张【杀】有相同的目标，则你可以弃置其两张牌，然后获得以此法弃置的所有【杀】。"},"kuimang":{"name":"溃蟒","script":"{audio: \"2\",trigger: {global: \"dieAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getAllHistory('sourceDamage',function(target){\n\t\t\t\t\t\treturn target.player==event.player;\n\t\t\t\t\t}).length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},}","info":"锁定技，一名角色死亡后，若你对其造成过伤害，你摸两张牌。"},"cxliushi":{"name":"流矢","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'heart'})>0;\n\t\t\t\t},filterCard: {suit: \"heart\",},position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canUse('sha',target,false);\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar next=player.getNext();\n\t\t\t\t\tvar att=get.attitude(player,next);\n\t\t\t\t\tif(att>0){\n\t\t\t\t\t\tvar js=next.getCards('j');\n\t\t\t\t\t\tif(js.length) return get.judge(js[0])+10-get.value(card);\n\t\t\t\t\t\treturn 9-get.value(card)\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},discard: \"false\",prepare: \"throw\",loseTo: \"cardPile\",visible: \"true\",insert: \"true\",content: function (){\n\t\t\t\t\tgame.log(player,'将',cards,'置于牌堆顶'); \n\t\t\t\t\tplayer.useCard({name:'sha',isCard:true},false,targets).card.cxliushi=true;\n\t\t\t\t},group: \"cxliushi_damage\",subSkill: {damage: {trigger: {source: \"damageSource\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card&&event.card.cxliushi==true&&event.player.isAlive()&&event.getParent(3).name=='cxliushi';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.player.addMark('cxliushi2',1);\n\t\t\t\t\t\t\ttrigger.player.addSkill('cxliushi2');\n\t\t\t\t\t\t},sub: \"true\",},},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})-0.4;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=get.effect(target,{name:'sha'},player,target);\n\t\t\t\t\t\t\tvar damageEff=get.damageEffect(target,player,player);\n\t\t\t\t\t\t\tif(eff>0) return damageEff>0?0:eff;\n\t\t\t\t\t\t\tif(target.hasSkill('bagua_skill')||target.hasSkill('rw_bagua_skill')||target.hasSkill('bazhen')) return 0;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以将一张红桃牌置于牌堆顶，视为对一名角色使用一张【杀】（无距离限制且不计入使用次数）。当此【杀】造成伤害后，受到伤害的角色获得一个“流”。有“流”的角色手牌上限-X（X为其“流”数）。"},"zhanwan":{"name":"斩腕","script":"{audio: \"2\",trigger: {global: \"phaseDiscardEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player.hasSkill('cxliushi2')&&event.player.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.type=='discard'&&evt.getParent('phaseDiscard')==event) return true;\n\t\t\t\t\t}).length>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.removeSkill('cxliushi2');\n\t\t\t\t\tvar num=0;\n\t\t\t\t\ttrigger.player.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.type=='discard'&&evt.getParent('phaseDiscard')==trigger) num+=evt.cards2.length;\n\t\t\t\t\t});\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t},}","info":"锁定技，有“流”的角色于弃牌阶段弃牌后，你摸等量的牌，然后其移去所有的“流”。"},"rexiemu":{"name":"协穆","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hasMark('rexiemu');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('rexiemu'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.attitude(player,target)*Math.sqrt(Math.max(1+player.countCards('h'),1+target.countCards('h')));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('rexiemu',target);\n\t\t\t\t\t\ttarget.addMark('rexiemu',1);\n\t\t\t\t\t\tplayer.addSkill('rexiemu2');\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"mark\",},ai: {expose: \"0.1\",},}","info":"结束阶段，若全场没有“协穆”标记，你可以选择一名角色获得“协穆”标记直到你的下回合开始。你或该角色在各自的回合外使用或打出手牌时，你与其各摸一张牌（每回合限一次）。"},"heli":{"name":"贺励","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn lib.skill.heli.filterTarget(null,player,current);\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('h')<player.countCards('h')\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(target.countCards('h')) target.showHandcards();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i of lib.inpile) list.add(get.type2(i));\n\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\tif(!target.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.type2(card,target)==i;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\t\t\treturn get.type2(card,false)==i;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card) cards.push(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(cards.length) target.gain(cards,'gain2','log');\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn 1/Math.sqrt(1+target.countCards('h'))\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择手牌数比你少的一名其他角色。该角色展示所有手牌，然后每缺少一种类型的牌，便从牌堆中随机获得一张此类型的牌。"},"rezhenjun":{"name":"镇军","script":"{audio: \"jieyue\",trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h')>0;\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('rezhenjun')).ai=function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)*(target.countCards('e')+1);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tvar num=Math.max(target.countCards('h')-target.hp,1);\n\t\t\t\t\t\tplayer.logSkill('rezhenjun',target);\n\t\t\t\t\t\tplayer.discardPlayerCard(num,target,true);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.cards&&result.cards.length){\n\t\t\t\t\t\tevent.num=0;\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tif(get.type(result.cards[i])!='equip'){\n\t\t\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\t\tvar prompt='弃置'+get.cnNumber(event.num)+'张牌，或令'+get.translation(event.target)+'摸'+get.cnNumber(event.num)+'张牌';\n\t\t\t\t\t\t\tplayer.chooseToDiscard(event.num,prompt,'he').ai=function(card){\n\t\t\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tevent.target.draw(event.num);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段，你可以弃置一名角色的X张牌（X为其手牌数和体力值之差且至少为1），然后选择一项：1.你弃置X张牌；2.其摸X张牌。（X为其弃置的牌中非装备牌的数量）"},"moying":{"name":"墨影","script":"{audio: \"2\",trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase||event.getParent().name=='useCard') return false;\n\t\t\t\t\tif(event.name=='gain'&&event.player==player) return false;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.cards2&&evt.cards2.length==1&&\n\t\t\t\t\t['equip','trick'].contains(get.type2(evt.cards2[0],(evt.type=='discard'&&evt.hs.contains(evt.cards2[0]))?player:false))&&\n\t\t\t\t\t!player.hasSkill('moying2');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar number=trigger.getl(player).cards2[0].number;\n\t\t\t\t\tvar numbers=[number-2,number-1,number,number+1,number+2].filter(function(number){\n\t\t\t\t\t\treturn number>=1&&number<=13;\n\t\t\t\t\t});\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.swapPlayerAuto(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\tsuit:lib.suit.randomGet(),\n\t\t\t\t\t\t\tnumber:numbers.randomGet(),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(player,numbers){\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tplayer=player||event.player;\n\t\t\t\t\t\tif(!event._result) event._result={};\n\t\t\t\t\t\tvar dialog=ui.create.dialog('是否发动【墨影】？','forcebutton','hidden');\n\t\t\t\t\t\tevent.dialog=dialog;\n\t\t\t\t\t\tdialog.addText('花色');\n\t\t\t\t\t\tvar table=document.createElement('div');\n\t\t\t\t\t\ttable.classList.add('add-setting');\n\t\t\t\t\t\ttable.style.margin='0';\n\t\t\t\t\t\ttable.style.width='100%';\n\t\t\t\t\t\ttable.style.position='relative';\n\t\t\t\t\t\tvar listi=['spade','heart','club','diamond'];\n\t\t\t\t\t\tfor(var i=0;i<listi.length;i++){\n\t\t\t\t\t\t\tvar td=ui.create.div('.shadowed.reduce_radius.pointerdiv.tdnode');\n\t\t\t\t\t\t\ttd.link=listi[i];\n\t\t\t\t\t\t\ttable.appendChild(td);\n\t\t\t\t\t\t\ttd.innerHTML='<span>'+get.translation(listi[i])+'</span>';\n\t\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen?'touchend':'click',function(){\n\t\t\t\t\t\t\t\tif(_status.dragged) return;\n\t\t\t\t\t\t\t\tif(_status.justdragged) return;\n\t\t\t\t\t\t\t\t_status.tempNoButton=true;\n\t\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\t\t_status.tempNoButton=false;\n\t\t\t\t\t\t\t\t},500);\n\t\t\t\t\t\t\t\tvar link=this.link;\n\t\t\t\t\t\t\t\tvar current=this.parentNode.querySelector('.bluebg');\n\t\t\t\t\t\t\t\tif(current){\n\t\t\t\t\t\t\t\t\tcurrent.classList.remove('bluebg');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.classList.add('bluebg');\n\t\t\t\t\t\t\t\tevent._result.suit=link;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.content.appendChild(table);\n\t\t\t\t\t\tdialog.addText('点数');\n\t\t\t\t\t\tvar table2=document.createElement('div');\n\t\t\t\t\t\ttable2.classList.add('add-setting');\n\t\t\t\t\t\ttable2.style.margin='0';\n\t\t\t\t\t\ttable2.style.width='100%';\n\t\t\t\t\t\ttable2.style.position='relative';\n\t\t\t\t\t\tfor(var i=0;i<numbers.length;i++){\n\t\t\t\t\t\t\tvar td=ui.create.div('.shadowed.reduce_radius.pointerdiv.tdnode');\n\t\t\t\t\t\t\ttd.link=numbers[i];\n\t\t\t\t\t\t\ttable2.appendChild(td);\n\t\t\t\t\t\t\tvar num=numbers[i];\n\t\t\t\t\t\t\tswitch(num){\n\t\t\t\t\t\t\t\tcase 1:num='A';break;\n\t\t\t\t\t\t\t\tcase 11:num='J';break;\n\t\t\t\t\t\t\t\tcase 12:num='Q';break;\n\t\t\t\t\t\t\t\tcase 13:num='K';break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttd.innerHTML='<span>'+num+'</span>';\n\t\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen?'touchend':'click',function(){\n\t\t\t\t\t\t\t\tif(_status.dragged) return;\n\t\t\t\t\t\t\t\tif(_status.justdragged) return;\n\t\t\t\t\t\t\t\t_status.tempNoButton=true;\n\t\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\t\t_status.tempNoButton=false;\n\t\t\t\t\t\t\t\t},500);\n\t\t\t\t\t\t\t\tvar link=this.link;\n\t\t\t\t\t\t\t\tvar current=this.parentNode.querySelector('.bluebg');\n\t\t\t\t\t\t\t\tif(current){\n\t\t\t\t\t\t\t\t\tcurrent.classList.remove('bluebg');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.classList.add('bluebg');\n\t\t\t\t\t\t\t\tevent._result.number=link;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.content.appendChild(table2);\n\t\t\t\t\t\tdialog.add('　　');\n\t\t\t\t\t\tevent.dialog.open();\n\t\t\t\t\t\t\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\t\tnumber:numbers.randomGet(),\n\t\t\t\t\t\t\t\tsuit:lib.suit.randomGet(),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tevent.control=ui.create.control('ok','cancel2',function(link){\n\t\t\t\t\t\t\tvar result=event._result;\n\t\t\t\t\t\t\tif(link=='cancel2') result.bool=false;\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(!result.number||!result.suit) return;\n\t\t\t\t\t\t\t\tresult.bool=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('selectable');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t};\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton(player,numbers);\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,event.player,numbers);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tswitchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar map=event.result||result;\n\t\t\t\t\tif(map.bool){\n\t\t\t\t\t\tplayer.logSkill('moying');\n\t\t\t\t\t\tplayer.addTempSkill('moying2');\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tfor(var i=0;i<ui.cardPile.childNodes.length;i++){\n\t\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\t\tif(get.suit(card)==map.suit&&get.number(card)==map.number) cards.push(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(cards.length) player.gain(cards,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},}","info":"每回合限一次，当你于回合外不因使用而失去单一一张锦囊牌或装备牌后，你可以选择一个花色和与此牌点数差绝对值不超过2的点数，然后获得牌堆中所有与此牌花色点数相同的牌。"},"juanhui":{"name":"绢绘","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('juanhui'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tif(target.isTurnedOver()||target.hasJudge('lebu')) return Math.random();\n\t\t\t\t\t\treturn (1+target.countCards('h'))*2+Math.random();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('juanhui',target);\n\t\t\t\t\t\tplayer.storage.juanhui2=target;\n\t\t\t\t\t\tplayer.storage.juanhui3=[];\n\t\t\t\t\t\tplayer.addSkill('juanhui2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以选择一名其他角色。记录该角色下回合的出牌阶段里使用的基本牌和普通锦囊牌（每种牌名限记一次），你的下回合出牌阶段，可将一张手牌当这些牌里的任意一张牌使用（每张限使用一次，且【杀】不计次数）。当\"绢绘\"的牌全部用完时，你回复1点体力并将手牌摸至三张。"},"remeibu":{"name":"魅步","script":"{audio: \"meibu\",trigger: {global: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.isAlive()&&event.player.inRange(player)&&player.countCards('he')>0;\n\t\t\t\t},direct: \"true\",derivation: [\"rezhixi\"],checkx: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)>=0) return false;\n\t\t\t\t\tvar e2=player.getEquip(2);\n\t\t\t\t\tif(e2){\n\t\t\t\t\t\tif(e2.name=='tengjia') return true;\n\t\t\t\t\t\tif(e2.name=='bagua') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn event.player.countCards('h')>event.player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar check=lib.skill.new_meibu.checkx(trigger,player);\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt2('remeibu',trigger.player),'he').set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.check) return 6-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('check',check).set('logSkill',['remeibu',trigger.player]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=trigger.player;\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.addTempSkill('rezhixi','phaseUseEnd');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"其他角色的出牌阶段开始时，若你在其攻击范围内，你可以弃置一张牌，令该角色于本阶段内拥有〖止息〗。"},"remumu":{"name":"穆穆","script":"{audio: \"mumu\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('remumu'),'弃置一名角色装备区内的一张牌，或者获得一名角色装备区内的防具牌',function(card,player,target){\n\t\t\t\t\t\tif(target==player) return target.getEquip(2)!=undefined;\n\t\t\t\t\t\treturn target.countCards('e')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target)\n\t\t\t\t\t\tif(target.getEquip(2)&&player.isEmpty(2)){\n\t\t\t\t\t\t\treturn -2*att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('remumu',event.target);\n\t\t\t\t\t\tplayer.line(event.target,'green');\n\t\t\t\t\t\tvar e=event.target.getEquip(2);\n\t\t\t\t\t\tevent.e=e;\n\t\t\t\t\t\tif(target==player) event.choice='获得一张防具牌';\n\t\t\t\t\t\telse if(e){\n\t\t\t\t\t\t\tplayer.chooseControl('弃置一张装备牌','获得一张防具牌').set('ai',function(){\n\t\t\t\t\t\t\t\tif(_status.event.player.getEquip(2)){\n\t\t\t\t\t\t\t\t\treturn '弃置一张装备牌';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn '获得一张防具牌';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.choice='弃置一张装备牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t}else event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar choice=event.choice||result.control;\n\t\t\t\t\tif(choice=='弃置一张装备牌'){\n\t\t\t\t\t\tplayer.discardPlayerCard(event.target,'e',true);\n\t\t\t\t\t\tplayer.addTempSkill('remumu3');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.e){\n\t\t\t\t\t\t\tplayer.gain(event.e,event.target,'give');\n\t\t\t\t\t\t\tplayer.addTempSkill('remumu2')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以选择一项：1.弃置一名其他角色装备区里的一张牌，然后你本回合可使用【杀】的次数+1；2.获得一名角色装备区里的一张防具牌，然后你本回合可使用【杀】的次数-1。"},"refenyin":{"name":"奋音","script":"{audio: \"2\",trigger: {global: [\"loseAfter\",\"cardsDiscardAfter\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player!=_status.currentPhase) return false;\n\t\t\t\t\tif(event.name=='lose'&&event.position!=ui.discardPile) return false;\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar num=event.cards.length;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tvar card=event.cards[i];\n\t\t\t\t\t\tlist.add(get.suit(card,(event.cards2&&event.cards2.contains(card))?event.player:false));\n\t\t\t\t\t}\n\t\t\t\t\tgame.getGlobalHistory('cardMove',function(evt){\n\t\t\t\t\t\tif(evt==event||(evt.name!='lose'&&evt.name!='cardsDiscard')) return false;\n\t\t\t\t\t\tif(evt.name=='lose'&&evt.position!=ui.discardPile) return false;\n\t\t\t\t\t\tnum+=evt.cards.length;\n\t\t\t\t\t\tfor(var i=0;i<evt.cards.length;i++){\n\t\t\t\t\t\t\tvar card=evt.cards[i];\n\t\t\t\t\t\t\tlist.remove(get.suit(card,(evt.cards2&&evt.cards2.contains(card))?evt.player:false));\n\t\t\t\t\t\t}\n\t\t\t\t\t},event);\n\t\t\t\t\tplayer.storage.refenyin_mark2=num;\n\t\t\t\t\treturn list.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar list2=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards.length;i++){\n\t\t\t\t\t\tvar card=trigger.cards[i];\n\t\t\t\t\t\tvar suit=get.suit(card,(trigger.cards2&&trigger.cards2.contains(card))?trigger.player:false);\n\t\t\t\t\t\tlist.add(suit);\n\t\t\t\t\t\tlist2.add(suit);\n\t\t\t\t\t}\n\t\t\t\t\tgame.getGlobalHistory('cardMove',function(evt){\n\t\t\t\t\t\tif(evt==trigger||(evt.name!='lose'&&evt.name!='cardsDiscard')) return false;\n\t\t\t\t\t\tif(evt.name=='lose'&&evt.position!=ui.discardPile) return false;\n\t\t\t\t\t\tfor(var i=0;i<evt.cards.length;i++){\n\t\t\t\t\t\t\tvar card=evt.cards[i];\n\t\t\t\t\t\t\tvar suit=get.suit(card,(evt.cards2&&evt.cards2.contains(card))?evt.player:false);\n\t\t\t\t\t\t\tlist.remove(suit);\n\t\t\t\t\t\t\tlist2.add(suit);\n\t\t\t\t\t\t}\n\t\t\t\t\t},trigger);\n\t\t\t\t\tlist2.sort();\n\t\t\t\t\tplayer.draw(list.length);\n\t\t\t\t\tplayer.storage.refenyin_mark=list2;\n\t\t\t\t\tplayer.addTempSkill('refenyin_mark');\n\t\t\t\t\tplayer.markSkill('refenyin_mark');\n\t\t\t\t},subSkill: {mark: {onremove: function (player){\n\t\t\t\t\t\t\tdelete player.storage.refenyin_mark;\n\t\t\t\t\t\t\tdelete player.storage.refenyin_mark2;\n\t\t\t\t\t\t},intro: {content: function (s,p){\n\t\t\t\t\t\t\t\tvar str='本回合已经进入过弃牌堆的卡牌的花色：';\n\t\t\t\t\t\t\t\tfor(var i=0;i<s.length;i++){\n\t\t\t\t\t\t\t\t\tstr+=get.translation(s[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstr+='<br>本回合进入过弃牌堆的牌数：'\n\t\t\t\t\t\t\t\tstr+=p.storage.refenyin_mark2;\n\t\t\t\t\t\t\t\treturn str;\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"锁定技，你的回合内，当一张牌进入弃牌堆后，若本回合内没有过与此牌花色相同的卡牌进入过弃牌堆，则你摸一张牌。"},"liji":{"name":"力激","script":"{enable: \"phaseUse\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn (player.getStat().skill.liji||0)<(event.liji_num||0);\n\t\t\t\t},onChooseToUse: function (event){\n\t\t\t\t\tif(game.online) return;\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar evt2=event.getParent();\n\t\t\t\t\tif(!evt2.liji_all) evt2.liji_all=(game.players.length>4?8:4);\n\t\t\t\t\tgame.getGlobalHistory('cardMove',function(evt){\n\t\t\t\t\t\tif(evt.name=='cardsDiscard'||(evt.name=='lose'&&evt.position==ui.discardPile)) num+=evt.cards.length;\n\t\t\t\t\t});\n\t\t\t\t\tevent.set('liji_num',Math.floor(num/evt2.liji_all));\n\t\t\t\t},filterCard: \"true\",position: \"he\",check: function (card){\n\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\tif(!_status.event.player.getStorage('refenyin_mark').contains(get.suit(card))) return 12-val;\n\t\t\t\t\treturn 8-val;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},content: function (){\n\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t},ai: {order: \"1\",result: {target: \"-1.5\",},tag: {damage: \"1\",},},}","info":"出牌阶段限X次，你可以弃置一张牌并对一名其他角色造成1点伤害。（X为本回合内进入过弃牌堆的卡牌数除以8，若场上人数小于5则改为除以4，向下取整）"},"xinlvli":{"name":"膂力","script":"{audio: \"lvli\",trigger: {player: \"damageEnd\",source: \"damageSource\",},filter: function (event,player,name){\n\t\t\t\t\tvar stat=player.getStat().skill;\n\t\t\t\t\tif(!stat.xinlvli) stat.xinlvli=0;\n\t\t\t\t\tif(name=='damageEnd'&&!player.storage.beishui) return false;\n\t\t\t\t\tif(stat.xinlvli>1) return false;\n\t\t\t\t\tif(stat.xinlvli>0&&(player!=_status.currentPhase||!player.storage.choujue)) return false;\n\t\t\t\t\tif(player.hp==player.countCards('h')) return false;\n\t\t\t\t\tif(player.hp<player.countCards('h')&&player.isHealthy()) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar stat=player.getStat().skill;\n\t\t\t\t\tstat.xinlvli++;\n\t\t\t\t\tvar num=player.hp-player.countCards('h');\n\t\t\t\t\tif(num>0) player.draw(num);\n\t\t\t\t\telse player.recover(-num);\n\t\t\t\t},}","info":"每回合限一次，当你造成伤害后，你可选择：1，若你的体力值大于你的手牌数，你摸Ｘ张牌；2，若你的手牌数大于你的体力值且你已受伤，你回复Ｘ点体力（Ｘ为你的手牌数与体力值之差）。"},"choujue":{"name":"仇决","script":"{derivation: [\"beishui\",\"qingjiao\"],trigger: {global: \"phaseAfter\",},audio: \"2\",skillAnimation: \"true\",animationColor: \"water\",unique: \"true\",juexingji: \"true\",forced: \"true\",init: function (player,skill){\n\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.choujue) return false;\n\t\t\t\t\treturn Math.abs(player.hp-player.countCards('h'))>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('choujue');\n\t\t\t\t\tplayer.storage.choujue=true;\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('beishui');\n\t\t\t\t},}","info":"觉醒技，一名角色的回合结束时，若你的手牌数和体力值相差3或更多，你减1点体力上限并获得技能〖背水〗，然后将〖膂力〗改为“在自己的回合时每回合限两次”。"},"spzhuilie":{"name":"追猎","script":"{mod: {targetInRange: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\t},},trigger: {player: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&!player.inRange(event.target);\n\t\t\t\t},forced: \"true\",logTarget: \"target\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tvar type=get.subtype(card);\n\t\t\t\t\t\treturn ['equip1','equip4','equip3','equip6'].contains(type)?6: -6;\n\t\t\t\t\t\tswitch(type){\n\t\t\t\t\t\t\tcase 'equip': return 4;\n\t\t\t\t\t\t\tcase 'trick': return -4;\n\t\t\t\t\t\t\tdefault: return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(trigger.getParent().addCount!==false){\n\t\t\t\t\t\ttrigger.getParent().addCount=false;\n\t\t\t\t\t\tvar stat=player.getStat();\n\t\t\t\t\t\tif(stat&&stat.card&&stat.card.sha) stat.card.sha--;\n\t\t\t\t\t}\n\t\t\t\t\tif(result.bool===true){\n\t\t\t\t\t\tvar map=trigger.customArgs;\n\t\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\t\tif(typeof map[id].extraDamage!='number') map[id].extraDamage=0;\n\t\t\t\t\t\tmap[id].extraDamage+=trigger.target.hp-1;\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.bool===false) player.loseHp();\n\t\t\t\t},}","info":"锁定技，你使用【杀】无距离限制；当你使用【杀】指定目标后，若其不在你的攻击范围内，此【杀】不计入使用次数限制且你判定。若判定结果为武器牌或坐骑牌，此【杀】的伤害基数改为X（X为其体力值）。否则你失去1点体力。"},"hmmanyi":{"name":"蛮裔","script":"{trigger: {target: \"useCardToBefore\",},forced: \"true\",audio: \"manyi\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='nanman';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},}","info":"锁定技，【南蛮入侵】对你无效。"},"mansi":{"name":"蛮嗣","script":"{audio: \"2\",group: \"mansi_viewas\",trigger: {global: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='nanman';\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t player.draw();\n\t\t\t\t player.addMark('mansi',1,false);\n\t\t\t\t},intro: {content: \"已因此技能获得了#张牌\",},}","info":"出牌阶段限一次，你可以将所有手牌当做【南蛮入侵】使用；当有角色受到【南蛮入侵】的伤害后，你摸一张牌。"},"souying":{"name":"薮影","script":"{audio: \"2\",trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},direct: \"true\",filter: function (event,player,name){\n\t\t\t\t\tif(!player.countCards('he')||player.hasSkill('souying2')) return false;\n\t\t\t\t\tif(!event.targets||event.targets.length!=1||event.player==event.target) return false;\n\t\t\t\t\tif(event.card.name!='sha'&&get.type(event.card)!='trick') return false;\n\t\t\t\t\tif(name=='useCardToPlayered'){\n\t\t\t\t\t\tif(!event.cards.filterInD().length) return false;\n\t\t\t\t\t\tvar target=event.target;\n\t\t\t\t\t\treturn player.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\treturn evt.targets&&evt.targets.contains(target);\n\t\t\t\t\t\t}).indexOf(event.getParent())>0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar source=event.player;\n\t\t\t\t\t\treturn source.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\treturn evt.targets&&evt.targets.contains(player);\n\t\t\t\t\t\t}).indexOf(event.getParent())>0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseToDiscard('he');\n\t\t\t\t\tvar prompt;\n\t\t\t\t\tif(event.triggername=='useCardToTargeted'){\n\t\t\t\t\t\tevent.target=trigger.player;\n\t\t\t\t\t\tprompt='令'+get.translation(trigger.card)+'对你无效';\n\t\t\t\t\t\tnext.set('goon',-get.effect(player,trigger.card,trigger.player,player));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.target=trigger.targets[0];\n\t\t\t\t\t\tprompt='弃置一张牌，并获得'+get.translation(trigger.cards.filterInD());\n\t\t\t\t\t\tnext.set('goon',get.value(trigger.cards.filterInD()));\n\t\t\t\t\t}\n\t\t\t\t\tnext.set('prompt',get.prompt('souying',event.target));\n\t\t\t\t\tnext.set('prompt2',prompt)\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\treturn _status.event.goon-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('logSkill',['souying',event.target]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('souying2');\n\t\t\t\t\t\tif(event.triggername=='useCardToPlayered') player.gain(trigger.cards.filterInD());\n\t\t\t\t\t\telse trigger.excluded.add(player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.25\",},}","info":"每回合限一次，当你对其他角色（或其他角色对你）使用【杀】或普通锦囊牌指定唯一目标后，若此牌不是本回合你对其（或其对你）使用的第一张【杀】或普通锦囊牌，你可以弃置一张牌，获得此牌对应的所有实体牌（或令此牌对你无效）。"},"zhanyuan":{"name":"战缘","script":"{unique: \"true\",audio: \"2\",derivation: \"hmxili\",skillAnimation: \"true\",animationColor: \"soil\",juexingji: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('mansi')>7;\n\t\t\t\t},trigger: {player: \"phaseZhunbeiBegin\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('zhanyuan');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseTarget('是否失去〖蛮嗣〗，令一名其他男性角色和自己一同获得技能〖系力〗？',function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.sex=='male';\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'fire');\n\t\t\t\t\t\tplayer.addSkill('hmxili');\n\t\t\t\t\t\ttarget.addSkill('hmxili');\n\t\t\t\t\t\tplayer.removeSkill('mansi');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你已因蛮嗣累计获得超过7张牌，你加一点体力上限并回复1点体力，并可以选择一名男性角色，你与其获得技能〖系力〗，然后你失去技能〖蛮嗣〗"},"xinkuangfu":{"name":"狂斧","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",delay: \"false\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return player.countCards('e',function(card){\n\t\t\t\t\t\treturn lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t})>0;\n\t\t\t\t\treturn target.countDiscardableCards(player,'e')>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('e')>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player==target) player.chooseToDiscard('e',true);\n\t\t\t\t\telse player.discardPlayerCard(target,'e',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseUseTarget('sha',true,false,'nodistance');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar bool=game.hasPlayer2(function(current){\n\t\t\t\t\t\treturn current.getHistory('damage',function(evt){\n\t\t\t\t\t\t\treturn evt.getParent(4)==event;\n\t\t\t\t\t\t}).length>0\n\t\t\t\t\t});\n\t\t\t\t\tif(player==target&&bool) player.draw(2);\n\t\t\t\t\telse if(player!=target&&!bool) player.chooseToDiscard('h',2,true);\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})+0.3;\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\tvar min=1;\n\t\t\t\t\t\t\ttarget.countCards('e',function(card){\n\t\t\t\t\t\t\t\tvar val=get.value(card,target);\n\t\t\t\t\t\t\t\tif(val>max) max=val;\n\t\t\t\t\t\t\t\tif(val<min) min=val;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(att>0&&min<=0) return target.hasSkillTag('noe')?3:1;\n\t\t\t\t\t\t\tif(att<0&&max>0){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('noe')) return max>6?(-max/3):0;\n\t\t\t\t\t\t\t\treturn -max;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可选择：1，弃置装备区里的一张牌，你使用无对应实体牌的普【杀】。若此【杀】造成伤害，你摸两张牌。2，弃置一名其他角色装备区里的一张牌，你使用无对应实体牌的普【杀】。若此【杀】未造成伤害，你弃置两张手牌。"},"xuxie":{"name":"虚猲","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},logTarget: function (event,player){\n\t\t\t\t\treturn game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(player,current)<=1;\n\t\t\t\t\t}).sortBySeat();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.isHealthy()) return false;\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(player,current)<=1;\n\t\t\t\t\t});\n\t\t\t\t\tvar draw=0;\n\t\t\t\t\tvar discard=0;\n\t\t\t\t\tvar num=2/player.getDamagedHp();\n\t\t\t\t\twhile(list.length){\n\t\t\t\t\t\tvar target=list.shift();\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\tdraw++;\n\t\t\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) discard--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(att==0){\n\t\t\t\t\t\t\tdraw--;\n\t\t\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) discard--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\tdraw--;\n\t\t\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) discard++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn draw>=num||discard>=num;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn get.distance(player,current)<=1;\n\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\tif(!targets.length) event.finish();\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\t\tplayer.chooseControl().set('choiceList',[\n\t\t\t\t\t\t\t'弃置'+get.translation(targets)+'的各一张牌',\n\t\t\t\t\t\t\t'令'+get.translation(targets)+'各摸一张牌',\n\t\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar list=_status.event.getParent().targets.slice(0);\n\t\t\t\t\t\t\tvar draw=0;\n\t\t\t\t\t\t\tvar discard=0;\n\t\t\t\t\t\t\twhile(list.length){\n\t\t\t\t\t\t\t\tvar target=list.shift();\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\t\tdraw++;\n\t\t\t\t\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) discard--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\t\t\tdraw--;\n\t\t\t\t\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) discard++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(draw>discard) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.index=result.index;\n\t\t\t\t\tif(result.index==1){\n\t\t\t\t\t\tgame.asyncDraw(targets);\n\t\t\t\t\t}\n\t\t\t\t\telse event.goto(4);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tvar target=targets.shift();\n\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) player.discardPlayerCard(target,'he',true);\n\t\t\t\t\tif(targets.length) event.redo();\n\t\t\t\t},group: \"xuxie_add\",}","info":"出牌阶段开始时，你可以减1点体力上限并选择所有与你距离为1的角色，弃置这些角色的各一张牌或令这些角色各摸一张牌。出牌阶段结束时，若你的体力上限为全场最少，则你加1点体力上限。"},"xinfu_langxi":{"name":"狼袭","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.hp<=player.hp;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('xinfu_langxi'),'对一名体力值不大于你的其他角色造成0-2点随机伤害',function(card,player,target){\n\t\t\t\t\t\treturn target.hp<=player.hp&&target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tplayer.logSkill('xinfu_langxi',result.targets);\n\t\t\t\t\t\tvar num=[1,2,0].randomGet();\n\t\t\t\t\t\tif(get.isLuckyStar(player)) num=2;\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tresult.targets[0].damage(num);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.25\",threaten: \"1.7\",},}","info":"准备阶段，你可以对一名体力小于或等于你的其他角色造成0～2点随机伤害。"},"xinfu_yisuan":{"name":"亦算","script":"{usable: \"1\",audio: \"2\",trigger: {player: \"useCardEnd\",},check: function (event,player){\n\t\t\t\t\treturn get.value(event.cards)+player.maxHp*2-18>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.isPhaseUsing()&&get.type(event.card)=='trick'&&event.cards.filterInD().length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.gain(trigger.cards.filterInD(),'gain2','log');\n\t\t\t\t},}","info":"每回合限一次。当你于出牌阶段使用的锦囊牌进入弃牌堆时，你可以减1点体力上限，从弃牌堆中获得之。"},"xinfu_lveming":{"name":"掠命","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.xinfu_lveming=0;\n\t\t\t\t},mark: \"true\",intro: {content: \"已发动过#次\",},audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('e')<player.countCards('e');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=[1,2,3,4,5,6,7,8,9,10,11,12,13]\n\t\t\t\t\ttarget.chooseControl(list).set('ai',function(){\n\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control){\n\t\t\t\t\t\ttarget.popup(result.control);\n\t\t\t\t\t\tplayer.storage.xinfu_lveming++;\n\t\t\t\t\t\tevent.num=result.control;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.popup('13');\n\t\t\t\t\t\tplayer.storage.xinfu_lveming++;\n\t\t\t\t\t\tevent.num=13;\n\t\t\t\t\t};\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\tif(card.number==event.num) return 4;\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool==true){\n\t\t\t\t\t\ttarget.damage(2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar card=target.getCards('hej').randomGet();\n\t\t\t\t\t\tplayer.gain(card,target,'giveAuto','bySelf');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar numj=target.countCards('j');\n\t\t\t\t\t\t\tvar numhe=target.countCards('he');\n\t\t\t\t\t\t\tif(numhe==0) return numj>0?6:-6;\n\t\t\t\t\t\t\treturn -6-(numj+1)/numhe;\n\t\t\t\t\t\t},},threaten: \"1.1\",},}","info":"出牌阶段限一次，你可以选择一名装备区装备比你少的角色，令其选择一个点数，然后你进行判定：<br>若点数相同，你对其造成2点伤害；<br>若点数不同，则你随机获得其区域内的一张牌。"},"xinfu_tunjun":{"name":"屯军","script":"{skillAnimation: \"true\",animationColor: \"metal\",limited: \"true\",unique: \"true\",enable: \"phaseUse\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.xinfu_tunjun) return false;\n\t\t\t\t\treturn player.storage.xinfu_lveming&&player.storage.xinfu_lveming>0;\n\t\t\t\t},filterTarget: \"true\",selectTarget: \"1\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('xinfu_tunjun');\n\t\t\t\t\tevent.num=player.storage.xinfu_lveming;\n\t\t\t\t\tevent.toequip=[];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar equip=get.cardPile(function(card){\n\t\t\t\t\t\tvar bool1=true;\n\t\t\t\t\t\tfor(var i=0;i<event.toequip.length;i++){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&get.subtype(card)==get.subtype(event.toequip[i])) bool1=false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (get.type(card)=='equip'&&!event.toequip.contains(card)&&target.isEmpty(get.subtype(card))&&bool1);\n\t\t\t\t\t});\n\t\t\t\t\tif(equip) event.toequip.push(equip);\n\t\t\t\t\telse event.num=0;\n\t\t\t\t\tevent.num--;\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.num>0) event.goto(1);\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tfor (var i=0;i<event.toequip.length;i++){\n\t\t\t\t\t\ttarget.chooseUseTarget(event.toequip[i],true).set('animate',false).set('nopopup',true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {target: \"0\",},},mark: \"true\",intro: {content: \"limited\",},init: function (player){\n\t\t\t\t\tplayer.storage.xinfu_tunjun=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以选择一名角色，令其随机使用牌堆中的X张装备牌。(X为你发动过“掠命”的次数)"},"xinfu_xingluan":{"name":"兴乱","script":"{usable: \"1\",audio: \"2\",trigger: {player: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(!player.isPhaseUsing()) return false;\n\t\t\t\t\tif(get.type(event.card)==undefined) return false;\n\t\t\t\t\treturn (event.targets&&event.targets.length==1);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\treturn card.number==6;\n\t\t\t\t\t});\n\t\t\t\t\tif(!card){\n\t\t\t\t\t\tplayer.chat('无牌可得了吗');\n\t\t\t\t\t\tgame.log('但是牌堆里面已经没有点数为6的牌了！');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(card,'gain2');\n\t\t\t\t},}","info":"每回合限一次。当你于出牌阶段使用的仅指定一个目标的牌结算完成后，你可以从牌堆中随机获得一张点数为6的牌。"},"xinfu_tanbei":{"name":"贪狈","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(target.countCards('hej')==0){\n\t\t\t\t\t\tevent._result={index:1};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.chooseControl().set('choiceList',[\n\t\t\t\t'令'+get.translation(player)+'随机获得你区域内的一张牌，然后其本回合内不能再对你使用牌。',\n\t\t\t\t'令'+get.translation(player)+'本回合内对你使用牌没有次数与距离限制。',\n\t\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\t\tvar list=[0,1];\n\t\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.addTempSkill('tanbei_effect3');\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tvar card=target.getCards('hej').randomGet();\n\t\t\t\t\t\tplayer.gain(card,target,'giveAuto','bySelf');\n\t\t\t\t\t\ttarget.addTempSkill('tanbei_effect2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.addTempSkill('tanbei_effect1');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn [2,4,6,8,10].randomGet();\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -2-target.countCards('h');\n\t\t\t\t\t\t},},threaten: \"1.1\",},}","info":"出牌阶段限一次，你可以令一名其他角色选择一项：1.令你随机获得其区域内的一张牌，本回合内你不能对其使用牌。2.令你此回合内对其使用牌没有次数与距离限制。"},"xinfu_sidao":{"name":"伺盗","script":"{audio: \"2\",trigger: {player: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('xinfu_sidaoy')||!player.countCards('h')) return false;\n\t\t\t\t\tif(!event.targets||!event.targets.length||!event.isPhaseUsing(player)) return false;\n\t\t\t\t\tvar history=player.getHistory('useCard');\n\t\t\t\t\tvar index=history.indexOf(event)-1;\n\t\t\t\t\tif(index<0) return false;\n\t\t\t\t\tvar evt=history[index];\n\t\t\t\t\tif(!evt||!evt.targets||!evt.targets.length||!evt.isPhaseUsing(player)) return false;\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\n\t\t\t\t\t\tif(evt.targets.contains(event.targets[i])&&lib.filter.filterTarget({name:'shunshou'},player,event.targets[i])) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\tvar targets=player.getLastUsed(1).targets;\n\t\t\t\t\tvar next=player.chooseToUse();\n\t\t\t\t\tnext.set('targets',game.filterPlayer(function(current){\n\t\t\t\t\t\treturn targets.contains(current)&&trigger.targets.contains(current);\n\t\t\t\t\t}));\n\t\t\t\t\tnext.set('openskilldialog',get.prompt2('xinfu_sidao'));\n\t\t\t\t\tnext.set('norestore',true);\n\t\t\t\t\tnext.set('_backupevent','xinfu_sidaox');\n\t\t\t\t\tnext.set('custom',{\n\t\t\t\t\t\tadd:{},\n\t\t\t\t\t\treplace:{window:function(){}}\n\t\t\t\t\t});\n\t\t\t\t\tnext.backup('xinfu_sidaox');\n\t\t\t\t},}","info":"出牌阶段限一次，当你对一名其他角色连续使用两张牌后，你可以将一张手牌当做【顺手牵羊】对其使用。"},"xinfu_tunan":{"name":"图南","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cards=get.cards(1);\n\t\t\t\t\tplayer.showCards(get.translation(player)+'对'+get.translation(target)+'发动了【图南】',event.cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card=cards[0];\n\t\t\t\t\tvar bool1=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn target.canUse(card,current,false);\n\t\t\t\t\t});\n\t\t\t\t\tvar bool2=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn target.canUse({name:'sha'},current);\n\t\t\t\t\t});\n\t\t\t\t\tif(bool1&&bool2){\n\t\t\t\t\t\ttarget.chooseControl(function(){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}).set('choiceList',[\n\t\t\t\t\t\t\t'使用'+get.translation(cards)+'。（没有距离限制）',\n\t\t\t\t\t\t\t'将'+get.translation(cards)+'当做【杀】使用。',\n\t\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t}).set('choice',target.getUseValue(card,false)>target.getUseValue({name:'sha',cards:cards})?0:1);\n\t\t\t\t\t}\n\t\t\t\t\telse if(bool1){\n\t\t\t\t\t\tevent.directindex=0;\n\t\t\t\t\t}\n\t\t\t\t\telse if(bool2){\n\t\t\t\t\t\tevent.directindex=1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar card=cards[0];\n\t\t\t\t\tif(result&&typeof event.directindex!='number'){\n\t\t\t\t\t\tevent.directindex=result.index;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.directindex==1){\n\t\t\t\t\t\ttarget.chooseUseTarget({name:'sha'},cards,true,false).viewAs=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.chooseUseTarget(card,true,false,'nodistance');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7\",result: {target: \"1\",},},}","info":"出牌阶段限一次，你可以展示牌堆顶的一张牌并选择一名其他角色，然后该角色选择一项：使用此牌（无距离限制）；或将此牌当普通【杀】使用。"},"xinfu_bijing":{"name":"闭境","script":"{audio: \"2\",group: [\"xinfu_bijing_lose\",\"xinfu_bijing_discard\"],subSkill: {lose: {trigger: {global: \"phaseDiscardBegin\",},audio: \"xinfu_bijing\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\t\t\treturn player.getHistory('lose',function(evt){\n\t\t\t\t\t\t\t\tfor(var i in evt.gaintag_map){\n\t\t\t\t\t\t\t\t\tif(evt.gaintag_map[i].contains('xinfu_bijing')) return true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).length>0&&event.player.countCards('he')>0;\n\t\t\t\t\t\t},forced: \"true\",logTarget: \"player\",content: function (){\n\t\t\t\t\t\t\ttrigger.player.chooseToDiscard(2,true,'he');\n\t\t\t\t\t\t},sub: \"true\",},discard: {trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.getCards('h',function(card){\n\t\t\t\t\t\t\t\treturn card.hasGaintag('xinfu_bijing');\n\t\t\t\t\t\t\t}).length>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.discard(player.getCards('h',function(card){\n\t\t\t\t\t\t\t\treturn card.hasGaintag('xinfu_bijing');\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t},sub: \"true\",},},trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (player,event){\n\t\t\t\t\treturn event.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard(get.prompt2('xinfu_bijing'),'h').set('ai',function(card){\n\t\t\t\t\t\tif(card.name=='shan') return 6;\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xinfu_bijing');\n\t\t\t\t\t\tplayer.addGaintag(result.cards,'xinfu_bijing');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以选择一张手牌并标记为“闭境”。若你于回合外失去“闭境”牌，则当前回合角色的弃牌阶段开始时，其需弃置两张牌。你的准备阶段，弃置手牌中的“闭境”牌。"},"xinfu_zhenxing":{"name":"镇行","script":"{audio: \"2\",trigger: {player: [\"damageEnd\",\"phaseJieshuBegin\"],},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControl('一张','两张','三张','cancel2').set('prompt',get.prompt2('xinfu_zhenxing')).set('',function(){return 0});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2') event.finish();\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.logSkill('xinfu_zhenxing');\n\t\t\t\t\t\tevent.num={一张:1,两张:2,三张:3}[result.control];\n\t\t\t\t\t};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.cards=get.cards(num);\n\t\t\t\t\tplayer.chooseButton(['【镇行】：请选择要获得的牌',event.cards]).set('filterButton',function(button){\n\t\t\t\t\t\tvar cards=_status.event.cards;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(button.link!=cards[i]&&get.suit(cards[i])==get.suit(button.link)) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t}).set('cards',event.cards);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar tothrow=[];\n\t\t\t\t\tfor(var i=event.cards.length-1;i>=0;i--){\n\t\t\t\t\t\tif(result.bool&&result.links.contains(event.cards[i])){\n\t\t\t\t\t\t\tplayer.gain(event.cards[i],'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.cards[i].fix();\n\t\t\t\t\t\t\tui.cardPile.insertBefore(event.cards[i],ui.cardPile.childNodes[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},}","info":"结束阶段开始时或当你受到伤害后，你可以观看牌堆顶的至多三张牌，然后你获得其中与其余牌花色均不相同的一张牌。"},"xinfu_qianxin":{"name":"遣信","script":"{audio: \"2\",group: [\"xinfu_qianxin2\"],enable: \"phaseUse\",usable: \"1\",onChooseToUse: function (event){\n\t\t\t\t\tif(!game.online){\n\t\t\t\t\t\tvar num1=game.players.length-1;\n\t\t\t\t\t\tvar player=event.player;\n\t\t\t\t\t\tvar num2=ui.cardPile.childElementCount;\n\t\t\t\t\t\tvar num3=num2;\n\t\t\t\t\t\tif(num1>num2) num3=0;\n\t\t\t\t\t\telse if(!player.storage.xinfu_qianxin){}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tfor(var i=0;i<num2;i++){\n\t\t\t\t\t\t\t\tif(player.storage.xinfu_qianxin.contains(ui.cardPile.childNodes[i])){\n\t\t\t\t\t\t\t\t\tnum3=0;break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.set('qianxinNum',num3);\n\t\t\t\t\t}\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.qianxinNum&&event.qianxinNum>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},filterCard: \"true\",selectCard: function (){\n\t\t\t\t\tvar num1=game.players.length-1;\n\t\t\t\t\tvar num2=_status.event.qianxinNum;\n\t\t\t\t\treturn [1,Math.floor(num2/num1)];\n\t\t\t\t},discard: \"false\",check: function (){\n\t\t\t\t\treturn -1;\n\t\t\t\t},delay: \"false\",lose: \"false\",prompt: function (){\n\t\t\t\t\treturn '选择一名角色并将任意张手牌置于处理区，然后将这些牌放置于牌堆中'+get.cnNumber(game.players.length)+'倍数的位置（先选择的牌在上）';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.lose(cards,ui.ordering).noOrdering=true;\n\t\t\t\t\tplayer.$throw(cards.length);\n\t\t\t\t\tplayer.storage.xinfu_qianxin=cards.slice(0);\n\t\t\t\t\tplayer.storage.xinfu_qianxin2=target;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.cards.reverse();\n\t\t\t\t\tvar num1=game.players.length;\n\t\t\t\t\tvar num2=ui.cardPile.childElementCount;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tevent.cards[i].fix();\n\t\t\t\t\t\tvar num3=num1*(i+1)-1;\n\t\t\t\t\t\tif(num3<num2){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(cards[i],ui.cardPile.childNodes[num3]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tui.cardPile.appendChild(cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tgame.log(player,'把',get.cnNumber(cards.length),'张牌放在了牌堆里');\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},ai: {order: \"1\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，若牌堆中没有“信”，你可以选择一名角色并将任意张手牌置于处理区，然后将这些牌放置于牌堆中X倍数的位置（X为存活人数），称为“信”。该角色的弃牌阶段开始时，若其手牌区内有于本回合内获得过的“信”，其选择一项：令你将手牌摸至四张；本回合手牌上限-2。"},"xinfu_fuhai":{"name":"浮海","script":"{subSkill: {next: {sub: \"true\",},previous: {sub: \"true\",},},audio: \"2\",group: [\"fuhai_clear\"],intro: {content: \"已指定过#个目标\",},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('xinfu_fuhai_next')&&player.hasSkill('xinfu_fuhai_previous')) return false;\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(![player.next,player.previous].contains(target)||target.countCards('h')==0) return false;\n\t\t\t\t\tif(player.hasSkill('xinfu_fuhai_next')) return target==player.previous;\n\t\t\t\t\tif(player.hasSkill('xinfu_fuhai_previous')) return target==player.next;\n\t\t\t\t\treturn true;\n\t\t\t\t},line: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.side=target==player.next?'next':'previous';\n\t\t\t\t\tevent.current=target;\n\t\t\t\t\tif(!player.storage.xinfu_fuhai) player.storage.xinfu_fuhai=1;\n\t\t\t\t\tplayer.addTempSkill('xinfu_fuhai_'+event.side,'phaseUseAfter');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.countCards('h')==0||event.current.countCards('h')==0||event.current==player){\n\t\t\t\t\tevent.finish();\n\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar next=event.current[event.side];\n\t\t\t\t\tif(get.attitude(event.current,player)>0){\n\t\t\t\t\t\tif(get.attitude(next,target)<=0||next.countCards('h')==0||player.countCards('h')==1){\n\t\t\t\t\t\t\tevent.stopm=true;\n\t\t\t\t\t\t\tevent.stopt=true\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.stopm=false;\n\t\t\t\t\t\t\tevent.stopt=false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(get.attitude(next,target)>=0){\n\t\t\t\t\t\t\tevent.stopt=true;\n\t\t\t\t\t\t\tevent.stopm=false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.stopt=false;\n\t\t\t\t\t\t\tevent.stopm=false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.markSkill('xinfu_fuhai');\n\t\t\t\t\tplayer.line(event.current,'green');\n\t\t\t\t\tplayer.chooseCard('请选择要展示的牌',true).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.stop) return 14-get.number(card);\n\t\t\t\t\t\treturn get.number(card)\n\t\t\t\t\t}).set('stop',event.stopm);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.mes=result.cards[0];\n\t\t\t\t\tplayer.showCards(event.mes);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tevent.current.chooseCard('请选择要展示的牌',true).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.stop) return get.number(card);\n\t\t\t\t\t\treturn 14-get.number(card);\n\t\t\t\t\t}).set('stop',event.stopt);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tevent.tes=result.cards[0];\n\t\t\t\t\tevent.current.showCards(event.tes);\n\t\t\t\t\t'step 5'\n\t\t\t\t\tvar num1=get.number(event.mes);\n\t\t\t\t\tvar num2=get.number(event.tes);\n\t\t\t\t\tif(num1<num2){\n\t\t\t\t\t\tevent.current.discard(event.tes);\n\t\t\t\t\t\tgame.asyncDraw([player,event.current],player.storage.xinfu_fuhai);\n\t\t\t\t\t\tplayer.addTempSkill('xinfu_fuhai_next','phaseUseAfter');\n\t\t\t\t\t\tplayer.addTempSkill('xinfu_fuhai_previous','phaseUseAfter');\n\t\t\t\t\t\tplayer.unmarkSkill('xinfu_fuhai');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.discard(event.mes);\n\t\t\t\t\t\tplayer.storage.xinfu_fuhai++;\n\t\t\t\t\t\tevent.current=event.current[event.side];\n\t\t\t\t\t\tif(player.countCards('h')>0&&event.current.countCards('h')>0&&event.current!=player) event.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\tvar hs=player.countCards('h');\n\t\t\t\t\t\t\tvar side=target==player.next?'next':'previous';\n\t\t\t\t\t\t\tvar current=player;\n\t\t\t\t\t\t\tfor(var i=0;i<hs;i++){\n\t\t\t\t\t\t\t\tcurrent=current[side];\n\t\t\t\t\t\t\t\tif(current==player||!current.countCards('h')) return 0;\n\t\t\t\t\t\t\t\tif(get.attitude(current,player)>0) return 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段每个方向限一次，你可以展示一张手牌并选择上家或下家。该角色展示一张手牌，若你展示的牌点数大于等于其展示的牌点数，你弃置你展示的牌，然后继续对其上家或下家重复此流程；若你展示的牌点数小于该展示角色牌的点数，则该角色弃置其展示的牌，然后你与其各摸X张牌（X为你此回合内发动此技能选择的角色数），且你此阶段内不能再发动〖浮海〗。"},"zongkui":{"name":"纵傀","script":"{trigger: {player: \"phaseBefore\",global: \"roundStart\",},direct: \"true\",audio: \"2\",audioname: [\"tw_beimihu\"],filter: function (event,player,name){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\tif(name=='roundStart'&&!current.isMinHp()) return false;\n\t\t\t\t\t\treturn current!=player&&!current.hasMark('zongkui_mark');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\tif(event.triggername=='roundStart'&&!current.isMinHp()) return false;\n\t\t\t\t\t\treturn current!=player&&!current.hasMark('zongkui_mark');\n\t\t\t\t\t});\n\t\t\t\t\tif(event.triggername=='roundStart'&&targets.length==1){\n\t\t\t\t\t\tevent._result={bool:true,targets:targets};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar next=player.chooseTarget(get.prompt('zongkui'),'令一名'+(event.triggername=='roundStart'?'体力值最小的':'')+'其他角色获得“傀”标记',function(card,player,target){\n\t\t\t\t\t\t\tif(_status.event.round&&!target.isMinHp()) return false;\n\t\t\t\t\t\t\treturn target!=player&&!target.hasMark('zongkui_mark');\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar num=target.isMinHp()?0.5:1;\n\t\t\t\t\t\t\treturn num*get.threaten(target);\n\t\t\t\t\t\t}).set('round',event.triggername=='roundStart');\n\t\t\t\t\t\tif(event.triggername=='roundStart') next.set('forced',true);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zongkui',target);\n\t\t\t\t\t\ttarget.addMark('zongkui_mark',1);\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {mark: {marktext: \"傀\",intro: {name2: \"傀\",content: \"mark\",},sub: \"true\",},},ai: {combo: \"guju\",threaten: \"1.4\",},}","info":"回合开始时，你可以指定一名未拥有“傀”标记的其他角色，令其获得一枚“傀”标记。每轮游戏开始时，你指定一名体力值最少且没有“傀”标记的其他角色，令其获得一枚“傀”标记。"},"guju":{"name":"骨疽","script":"{audio: \"2\",audioname: [\"tw_beimihu\"],init: function (player){\n\t\t\t\t\tif(!player.storage.guju) player.storage.guju=0;\n\t\t\t\t},intro: {content: \"已因此技能获得#张牌\",},trigger: {global: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.isAlive()&&event.player.hasMark('zongkui_mark');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.storage.guju++;\n\t\t\t\t\tplayer.markSkill('guju');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.hasZhuSkill('bingzhao',trigger.player)&&trigger.player.group==player.storage.bingzhao&&trigger.player.isAlive()){\n\t\t\t\t\t\ttrigger.player.chooseBool('是否对'+get.translation(player)+'发动【秉诏】？').ai=function(){\n\t\t\t\t\t\t\treturn get.attitude(trigger.player,player)>1;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.logSkill('bingzhao',player);\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.storage.guju++;\n\t\t\t\t\t\tplayer.markSkill('guju');\n\t\t\t\t\t}\n\t\t\t\t},ai: {combo: \"zongkui\",},}","info":"锁定技，拥有“傀”标记的角色受到伤害后，你摸一张牌。"},"baijia":{"name":"拜假","script":"{audio: \"2\",audioname: [\"tw_beimihu\"],unique: \"true\",derivation: \"bmcanshi\",juexingji: \"true\",ai: {combo: \"guju\",},trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",filter: function (event,player){\n\t\t\t\t\treturn player.hasSkill('guju')&&player.storage.guju>=7;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('baijia');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tvar list=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(list[i]!=player&&!list[i].hasMark('zongkui_mark')){\n\t\t\t\t\t\t\tlist[i].addMark('zongkui_mark',1);\n\t\t\t\t\t\t\tplayer.line(list[i],'green');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.removeSkill('guju');\n\t\t\t\t\tplayer.addSkill('bmcanshi');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你因〖骨疽〗获得的牌不少于7张，则你增加1点体力上限，回复1点体力，然后令所有未拥有“傀”标记的其他角色获得“傀”标记，最后失去技能〖骨疽〗，并获得技能〖蚕食〗。"},"xinfu_xionghuo":{"name":"凶镬","script":"{group: [\"xinfu_xionghuo_damage\",\"xinfu_xionghuo_begin\",\"xinfu_xionghuo_init\"],subSkill: {begin: {audio: \"xinfu_xionghuo\",logTarget: \"player\",line: \"false\",forced: \"true\",trigger: {global: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.player.countMark('xionghuo')>0&&event.player!=player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\ttrigger.player.removeMark('xionghuo',trigger.player.countMark('xionghuo'));\n\t\t\t\t\t\t\tvar list=[1,2,3];\n\t\t\t\t\t\t\tvar num=list.randomGet();\n\t\t\t\t\t\t\tevent.goto(num);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.line(trigger.player,'fire');\n\t\t\t\t\t\t\ttrigger.player.damage('fire');\n\t\t\t\t\t\t\tif(!trigger.player.storage.xionghuo_disable) trigger.player.storage.xionghuo_disable=[];\n\t\t\t\t\t\t\ttrigger.player.storage.xionghuo_disable.push(player);\n\t\t\t\t\t\t\ttrigger.player.addTempSkill('xionghuo_disable','phaseAfter');\n\t\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tplayer.line(trigger.player,'water');\n\t\t\t\t\t\t\ttrigger.player.loseHp();\n\t\t\t\t\t\t\ttrigger.player.addMark('xionghuo_low',1,false);\n\t\t\t\t\t\t\ttrigger.player.addTempSkill('xionghuo_low','phaseAfter');\n\t\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t\t\t'step 3'\n\t\t\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\t\t\tvar card1=trigger.player.getCards('h').randomGet();\n\t\t\t\t\t\t\tvar card2=trigger.player.getCards('e').randomGet();\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tif(card1) list.push(card1);\n\t\t\t\t\t\t\tif(card2) list.push(card2);\n\t\t\t\t\t\t\tif(list.length>0){\n\t\t\t\t\t\t\t\tplayer.gain(list,trigger.player,'giveAuto','bySelf');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 4'\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t},sub: \"true\",},damage: {audio: \"xinfu_xionghuo\",sub: \"true\",forced: \"true\",trigger: {source: \"damageBegin1\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.player.countMark('xionghuo')>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\t},},init: {audio: \"xinfu_xionghuo\",trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",locked: \"false\",content: function (){\n\t\t\t\t\t\t\tplayer.addMark(\"xionghuo\",3);\n\t\t\t\t\t\t},sub: \"true\",},},audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('xionghuo')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.hasMark('xionghuo')) return false;\n\t\t\t\t\treturn player!=target>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.removeMark('xionghuo',1);\n\t\t\t\t\ttarget.addMark('xionghuo',1);\n\t\t\t\t},ai: {order: \"11\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif((player.countMark('xionghuo')>=2||!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&get.attitude(player,current)<0&&current.hasMark('xionghuo');\n\t\t\t\t\t\t\t}))&&player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn get.tag(card,'damage')&&player.canUse(card,target,null,true)\n\t\t\t\t\t\t\t\t&&player.getUseValue(card)>0&&get.effect_use(target,card,player)>0\n\t\t\t\t\t\t\t\t&&target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})) return 3/Math.max(1,target.hp);\n\t\t\t\t\t\t\tif((!player.hasUnknown()&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)<0;\n\t\t\t\t\t\t\t})<=1)||player.countMark('xionghuo')>=2){\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(player!=target&&get.tag(card,'damage')&&target&&target.hasMark('xionghuo')&&!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t})) return [1,0,1,-2];\n\t\t\t\t\t\t},},threaten: \"1.6\",},}","info":"游戏开始时，你获得3个“暴戾”标记。出牌阶段，你可以交给一名其他角色一个“暴戾”标记，你对有“暴戾”标记的角色造成伤害时，此伤害+1。有“暴戾”的其他角色的出牌阶段开始时，其移去所有“暴戾”标记并随机执行一项：1.受到1点火焰伤害且本回合不能对你使用【杀】；2.失去1点体力且本回合手牌上限-1；3.你随机获得其一张手牌和一张装备区的牌。"},"xinfu_shajue":{"name":"杀绝","script":"{audio: \"2\",trigger: {global: \"dying\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<0&&event.player!=player;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tif(trigger.parent.name=='damage'&&get.itemtype(trigger.parent.cards)=='cards'&&get.position(trigger.parent.cards[0],true)=='o'){\n\t\t\t\t\t\tplayer.gain(trigger.parent.cards,\"gain2\");\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addMark('xionghuo',1);\n\t\t\t\t},}","info":"锁定技，其他角色进入濒死状态时，若其体力值小于0，则你获得一个“暴戾”标记，并获得使其进入濒死状态的牌。"},"xinfu_falu":{"name":"法箓","script":"{subSkill: {spade: {marktext: \"♠︎️\",intro: {name: \"紫薇\",content: \"mark\",},sub: \"true\",},heart: {marktext: \"♥︎️\",intro: {name: \"玉清\",content: \"mark\",},sub: \"true\",},club: {marktext: \"♣︎️\",intro: {name: \"后土\",content: \"mark\",},sub: \"true\",},diamond: {marktext: \"♦︎\",intro: {name: \"勾陈\",content: \"mark\",},sub: \"true\",},},forced: \"true\",audio: \"2\",trigger: {player: [\"loseAfter\",\"enterGame\"],global: \"gameDrawAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.name!='lose') return true;\n\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\tif(!player.hasMark('xinfu_falu_'+get.suit(event.cards2[i]))) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.name!='lose'){\n\t\t\t\t\t\tfor(var i=0;i<lib.suit.length;i++){\n\t\t\t\t\t\t\tif(!player.hasMark('xinfu_falu_'+lib.suit[i])) player.addMark('xinfu_falu_'+lib.suit[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\tvar suit=get.suit(trigger.cards2[i]);\n\t\t\t\t\t\tif(!player.hasMark('xinfu_falu_'+suit)) player.addMark('xinfu_falu_'+suit);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",},}","info":"锁定技，游戏开始时，你获得「紫薇」「后土」「玉清」「勾陈」标记各一个。当你的牌因弃置而进入弃牌堆后，根据这些牌的花色，你获得对应的标记：黑桃，你获得1枚「紫薇」；梅花，你获得1枚「后土」；红桃，你获得1枚「玉清」；方块，你获得1枚「勾陈」。（每种标记限拥有1个）"},"xinfu_dianhua":{"name":"点化","script":"{trigger: {player: [\"phaseZhunbeiBegin\",\"phaseJieshuBegin\"],},frequent: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\tfor(var i=0;i<lib.suit.length;i++){\n\t\t\t\t\t\tif(player.hasMark('xinfu_falu_'+lib.suit[i])) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<lib.suit.length;i++){\n\t\t\t\t\t\tif(player.hasMark('xinfu_falu_'+lib.suit[i])) num++;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.swapPlayerAuto(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=get.cards(num);\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t\tvar top=[];\n\t\t\t\t\t\tvar judges=player.getCards('j');\n\t\t\t\t\t\tvar stopped=false;\n\t\t\t\t\t\tif(!player.hasWuxie()){\n\t\t\t\t\t\t\tfor(var i=0;i<judges.length;i++){\n\t\t\t\t\t\t\t\tvar judge=get.judge(judges[i]);\n\t\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\t\treturn judge(b)-judge(a);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(judge(cards[0])<0){\n\t\t\t\t\t\t\t\t\tstopped=true;break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar bottom;\n\t\t\t\t\t\tif(!stopped){\n\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.value(b,player)-get.value(a,player);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\t\tif(get.value(cards[0],player)<=5) break;\n\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom=cards;\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(bottom.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(online,player,cards){\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tplayer=player||event.player;\n\t\t\t\t\t\tcards=cards||event.cards;\n\t\t\t\t\t\tevent.top=[];\n\t\t\t\t\t\tevent.bottom=[];\n\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('按顺序选择置于牌堆顶的牌（先选择的在上）',cards);\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('pointerdiv');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result='ai';\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevent.control=ui.create.control('ok','pileTop','pileBottom',function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link=='ok'){\n\t\t\t\t\t\t\t\tif(online){\n\t\t\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\t\t\ttop:[],\n\t\t\t\t\t\t\t\t\t\tbottom:[]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.top.push(event.top[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.bottom.push(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tvar i;\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.insertBefore(event.top[i].link,ui.cardPile.firstChild);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(event.dialog.buttons[i].classList.contains('glow')==false&&\n\t\t\t\t\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.contains('target')==false)\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.dialog.buttons[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplayer.popup(get.cnNumber(event.top.length)+'上'+get.cnNumber(event.cards.length-event.top.length)+'下');\n\t\t\t\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(event.top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link=='pileTop'){\n\t\t\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆顶的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.status=false;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆底的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('selectable');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.button=function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link.classList.contains('target')){\n\t\t\t\t\t\t\t\tlink.classList.remove('target');\n\t\t\t\t\t\t\t\tevent.top.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link.classList.contains('glow')){\n\t\t\t\t\t\t\t\tlink.classList.remove('glow');\n\t\t\t\t\t\t\t\tevent.bottom.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(event.status){\n\t\t\t\t\t\t\t\tlink.classList.add('target');\n\t\t\t\t\t\t\t\tevent.top.unshift(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlink.classList.add('glow');\n\t\t\t\t\t\t\t\tevent.bottom.push(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.window=function(){\n\t\t\t\t\t\t\tfor(var i=0;i<_status.event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('target');\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('glow');\n\t\t\t\t\t\t\t\t_status.event.top.length=0;\n\t\t\t\t\t\t\t\t_status.event.bottom.length=0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t};\n\t\t\t\t\tevent.switchToAuto=switchToAuto;\n\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,true,event.player,event.cards);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.result=='ai'||!event.result){\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar top=event.result.top||[];\n\t\t\t\t\t\tvar bottom=event.result.bottom||[];\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(!top.contains(event.cards[i])&&!bottom.contains(event.cards[i])){\n\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(event.cards.length-top.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"2.2\",},}","info":"准备阶段或结束阶段，你可以观看牌堆顶的X张牌（X为你的「紫薇」「后土」「玉清」「勾陈」标记数的总和）。若如此做，你将这些牌以任意顺序放回牌堆顶或牌堆底。"},"xinfu_zhenyi":{"name":"真仪","script":"{group: [\"zhenyi_spade\",\"zhenyi_club\",\"zhenyi_heart\"],trigger: {player: \"damageEnd\",},audio: \"2\",filter: function (event,player){\n\t\t\t\t\t//if(!event.nature) return false;\n\t\t\t\t\treturn player.hasMark('xinfu_falu_diamond');\n\t\t\t\t},prompt2: \"弃置「勾陈♦」标记，从牌堆中获得每种类型的牌各一张。\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.removeMark('xinfu_falu_diamond');\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tevent.togain=[];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\tfor(var i=0;i<event.togain.length;i++){\n\t\t\t\t\t\t\tif(get.type(card,'trick')==get.type(event.togain[i],'trick')) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tevent.togain.push(card);\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\tif(event.num<3) event.redo();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.togain.length){\n\t\t\t\t\t\tplayer.gain(event.togain,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"你可以在以下时机弃置相应的标记来发动以下效果：一名角色的判定牌生效前，你可以弃置一枚「紫薇」，然后将判定结果改为任意花色且点数为5；你的回合外，你可以弃置一枚「后土」，然后将你的一张手牌当【桃】使用；当你造成伤害时，你可以弃置一枚「玉清」，然后令此伤害+1；当你受到伤害后，你可以弃置一张「勾陈」，然后你从牌堆中随机获得三种类型的牌各一张。"},"spwenji":{"name":"问计","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('he');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('spwenji'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('he');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>0) return Math.sqrt(att)/10;\n\t\t\t\t\t\treturn 5-att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('spwenji',target);\n\t\t\t\t\t\ttarget.chooseCard('he',true,'问计：将一张牌交给'+get.translation(player));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('spwenji_respond');\n\t\t\t\t\t\tplayer.storage.spwenji_respond=result.cards[0].name;\n\t\t\t\t\t\tevent.target.give(result.cards,player,true);\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {respond: {onremove: \"true\",trigger: {player: \"useCard\",},forced: \"true\",charlotte: \"true\",audio: \"spwenji\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.name==player.storage.spwenji_respond;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.directHit.addArray(game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player;\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\t\t\treturn arg.card.name==player.storage.spwenji_respond;\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"出牌阶段开始时，你可以令一名其他角色交给你一张牌。你于本回合内使用与该牌名称相同的牌时不能被其他角色响应。"},"sptunjiang":{"name":"屯江","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.getHistory('skipped').contains('phaseUse')) return false;\n\t\t\t\t\treturn player.getHistory('useCard',function(evt){\n\t\t\t\t\t\tif(evt.targets&&evt.targets.length&&evt.isPhaseUsing()){\n\t\t\t\t\t\t\tvar targets=evt.targets.slice(0);\n\t\t\t\t\t\t\twhile(targets.contains(player)) targets.remove(player);\n\t\t\t\t\t\t\treturn targets.length>0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}).length==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(game.countGroup());\n\t\t\t\t},}","info":"结束阶段，若你未跳过本回合的出牌阶段，且你于本回合出牌阶段内未使用牌指定过其他角色为目标，则你可以摸X张牌（X为全场势力数）。"},"xinfu_xingzhao":{"name":"兴棹","script":"{audio: \"true\",group: [\"xz_xunxun\",\"xinfu_xingzhao2\"],mark: \"true\",intro: {content: function (storage,player){\n\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar str='暂无任何效果';\n\t\t\t\t\t\tif(num>=1){\n\t\t\t\t\t\t\tstr='<li>视为拥有技能“恂恂”';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num>=2){\n\t\t\t\t\t\t\tstr+='；使用装备牌时摸一张牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num>=3){\n\t\t\t\t\t\tstr+='；始终跳过弃牌阶段';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},},trigger: {player: \"useCard\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(get.type(event.card)!='equip') return false;\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t\treturn num>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"锁定技，若X≥1，你视为拥有技能〖恂恂〗。若X≥2，当你使用装备牌时，你摸一张牌。若X≥3，弃牌阶段开始时，你跳过此阶段。（X为场上已受伤的角色数）"},"xinfu_dianhu":{"name":"点虎","script":"{audio: \"2\",trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",filter: function (){\n\t\t\t\t\treturn game.players.length>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('选择【点虎】的目标',lib.translate.xinfu_dianhu_info,true,function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!target.hasSkill('xinfu_dianhu2');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att<0) return -att+3;\n\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tgame.log(target,'成为了','【点虎】','的目标');\n\t\t\t\t\t\ttarget.storage.xinfu_dianhu2=player;\n\t\t\t\t\t\ttarget.addSkill('xinfu_dianhu2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，游戏开始时，你选择一名其他角色。当其受到来自你的伤害后或回复体力后，你摸一张牌。"},"xinfu_jianji":{"name":"谏计","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card=result[0];\n\t\t\t\t\tif(card&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn target.canUse(card,current);\n\t\t\t\t\t})&&get.owner(card)==target){\n\t\t\t\t\t\ttarget.chooseToUse({\n\t\t\t\t\t\t\tprompt:'是否使用'+get.translation(card)+'？',\n\t\t\t\t\t\t\tfilterCard:function(cardx,player,target){\n\t\t\t\t\t\t\t\treturn cardx==_status.event.cardx;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcardx:card,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7.5\",result: {target: \"1\",},},}","info":"出牌阶段限一次，你可以令一名其他角色摸一张牌。然后该角色可以使用此牌。"},"xinfu_lianpian":{"name":"联翩","script":"{audio: \"2\",usable: \"3\",trigger: {player: \"useCardToPlayered\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!event.targets||!event.targets.length||\n\t\t\t\t\tevent.getParent().triggeredTargets3.length>1||!event.isPhaseUsing(player)) return false;\n\t\t\t\t\tvar evt=player.getLastUsed(1);\n\t\t\t\t\tif(!evt||!evt.targets||!evt.targets.length||!evt.isPhaseUsing(player)) return false;\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\n\t\t\t\t\t\tif(evt.targets.contains(event.targets[i])) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.card=result[0];\n\t\t\t\t\tvar ablers=player.getLastUsed(1).targets.slice(0);\n\t\t\t\t\tfor(var i=0;i<ablers.length;i++){\n\t\t\t\t\t\tif(ablers[i]==player||!trigger.targets.contains(ablers[i])) ablers.splice(i--,1);\n\t\t\t\t\t}\n\t\t\t\t\tif(event.card&&get.owner(event.card)==player&&ablers.length){\n\t\t\t\t\t\tplayer.chooseTarget('是否将'+get.translation(event.card)+'交给其他角色？',function(card,player,target){\n\t\t\t\t\t\t\treturn _status.event.ablers.contains(target)&&target!=player;\n\t\t\t\t\t\t}).set('ablers',ablers).ai=function(){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.give(event.card,result.targets[0],true);\n\t\t\t\t\t}\n\t\t\t\t},locked: \"false\",mod: {aiOrder: function (player,card,num){\n\t\t\t\t\t\tif(player.isPhaseUsing()&&(!player.storage.counttrigger||!player.storage.counttrigger.xinfu_lianpian||!player.storage.counttrigger.xinfu_lianpian<3)){\n\t\t\t\t\t\t\tvar evt=player.getLastUsed();\n\t\t\t\t\t\t\tif(evt&&evt.targets&&evt.targets.length&&evt.isPhaseUsing(player)&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn evt.targets.contains(current)&&player.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn num+10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tvar evt=player.getLastUsed();\n\t\t\t\t\t\t\tif(evt&&evt.targets.contains(target)&&(!player.storage.counttrigger||!player.storage.counttrigger.xinfu_lianpian||!player.storage.counttrigger.xinfu_lianpian<3)&&player.isPhaseUsing(player)) return [1.5,0];\n\t\t\t\t\t\t},},},}","info":"出牌阶段限三次。当你对一名角色连续使用牌时，你可以摸一张牌，然后可以将一张牌交给该角色。"},"pingjian":{"name":"评荐","script":"{audio: \"2\",trigger: {player: [\"damageEnd\",\"phaseJieshuBegin\"],},initList: function (){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(_status.connectMode) var list=get.charactersOL();\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i in lib.character){\n\t\t\t\t\t\t\tif(lib.filter.characterDisabled2(i)||lib.filter.characterDisabled(i)) continue;\n\t\t\t\t\t\t\tlist.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\tlist.remove(current.name);\n\t\t\t\t\t\tlist.remove(current.name1);\n\t\t\t\t\t\tlist.remove(current.name2);\n\t\t\t\t\t\tif(current.storage.rehuashen&&current.storage.rehuashen.character) list.removeArray(current.storage.rehuashen.character)\n\t\t\t\t\t});\n\t\t\t\t\t_status.characterlist=list;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!player.storage.pingjian) player.storage.pingjian=[];\n\t\t\t\t\tevent._result={bool:true};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!_status.characterlist){\n\t\t\t\t\t\t\tlib.skill.pingjian.initList();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tvar skills=[];\n\t\t\t\t\t\tvar map=[];\n\t\t\t\t\t\t_status.characterlist.randomSort();\n\t\t\t\t\t\tvar name2=event.triggername;\n\t\t\t\t\t\tfor(var i=0;i<_status.characterlist.length;i++){\n\t\t\t\t\t\t\tvar name=_status.characterlist[i];\n\t\t\t\t\t\t\tif(name.indexOf('zuoci')!=-1||name.indexOf('xushao')!=-1) continue;\n\t\t\t\t\t\t\tvar skills2=lib.character[name][3];\n\t\t\t\t\t\t\tfor(var j=0;j<skills2.length;j++){\n\t\t\t\t\t\t\t\tif(player.storage.pingjian.contains(skills2[j])) continue;\n\t\t\t\t\t\t\t\tif(skills.contains(skills2[j])){\n\t\t\t\t\t\t\t\t\tlist.add(name);\n\t\t\t\t\t\t\t\t\tif(!map[name]) map[name]=[];\n\t\t\t\t\t\t\t\t\tmap[name].push(skills2[j]);\n\t\t\t\t\t\t\t\t\tskills.add(skills2[j]);\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar list2=[skills2[j]];\n\t\t\t\t\t\t\t\tgame.expandSkills(list2);\n\t\t\t\t\t\t\t\tfor(var k=0;k<list2.length;k++){\n\t\t\t\t\t\t\t\t\tvar info=lib.skill[list2[k]];\n\t\t\t\t\t\t\t\t\tif(!info||!info.trigger||!info.trigger.player||info.silent||info.limited||info.juexingji||info.zhuanhuanji||info.hiddenSkill) continue;\n\t\t\t\t\t\t\t\t\tif(info.trigger.player==name2||Array.isArray(info.trigger.player)&&info.trigger.player.contains(name2)){\n\t\t\t\t\t\t\t\t\t\tif(info.init||info.ai&&(info.ai.combo||info.ai.notemp||info.ai.neg)) continue;\n\t\t\t\t\t\t\t\t\t\tif(info.filter){\n\t\t\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\t\t\tvar bool=info.filter(trigger,player,name2);\n\t\t\t\t\t\t\t\t\t\t\t\tif(!bool) continue;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tcatch(e){\n\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlist.add(name);\n\t\t\t\t\t\t\t\t\t\tif(!map[name]) map[name]=[];\n\t\t\t\t\t\t\t\t\t\tmap[name].push(skills2[j]);\n\t\t\t\t\t\t\t\t\t\tskills.add(skills2[j]);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(list.length>2) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!skills.length){\n\t\t\t\t\t\t\t//player.draw();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t//skills.unshift('摸一张牌');\n\t\t\t\t\t\t\tplayer.chooseControl(skills).set('dialog',['请选择要发动的技能',[list,'character']]).set('ai',function(){return 0});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control=='摸一张牌'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.pingjian.add(result.control);\n\t\t\t\t\tplayer.addTempSkill(result.control,event.triggername=='damageEnd'?'damageAfter':'phaseJieshu');\n\t\t\t\t},group: \"pingjian_use\",phaseUse_special: [\"xinfu_lingren\"],}","info":"结束阶段开始时/当你受到伤害后/出牌阶段限一次，你可以令系统随机从剩余武将牌堆中检索出三张拥有发动时机为结束阶段开始时/当你受到伤害后/出牌阶段的技能的武将牌。然后你可以选择尝试发动其中一个技能。每个技能每局只能选择一次。"},"pytianjiang":{"name":"天匠","script":"{audio: \"2\",trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",locked: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar i=0;\n\t\t\t\t\tvar list=[];\n\t\t\t\t\twhile(i++<2){\n\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\tif(get.type(card)!='equip') return false;\n\t\t\t\t\t\t\treturn list.length==0||get.subtype(card)!=get.subtype(list[0]);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card) list.push(card);\n\t\t\t\t\t}\n\t\t\t\t\tif(!list.length){event.finish();return;}\n\t\t\t\t\tevent.list=list;\n\t\t\t\t\tplayer.gain(event.list,'gain2');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.delay(1);\n\t\t\t\t\tvar card=event.list.shift();\n\t\t\t\t\tif(player.getCards('h').contains(card)){\n\t\t\t\t\t\tplayer.$give(card,player,false)\n\t\t\t\t\t\tplayer.equip(card);\n\t\t\t\t\t}\n\t\t\t\t\tif(event.list.length) event.redo();\n\t\t\t\t},group: \"pytianjiang_move\",}","info":"游戏开始时，你随机获得两张不同副类别的装备牌，并置入你的装备区。出牌阶段，你可以将装备区的牌移动至其他角色的装备区（可替换原装备）。若你以此法移动了〖铸刃〗的衍生装备，你摸两张牌。"},"pyzhuren":{"name":"铸刃","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",selectCard: \"1\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar name='pyzhuren_'+(card[card.name=='shandian'?'name':'suit']);\n\t\t\t\t\tif(!lib.card[name]||_status.pyzhuren&&_status.pyzhuren[name]){\n\t\t\t\t\t\tif(!player.countCards('h','sha')) return 4-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addSkill('pyzhuren_destroy');\n\t\t\t\t\tif(!_status.pyzhuren) _status.pyzhuren={};\n\t\t\t\t\tvar rand=0.85;\n\t\t\t\t\tvar num=get.number(cards[0]);\n\t\t\t\t\tif(num>4) rand=0.9;\n\t\t\t\t\tif(num>8) rand=0.95;\n\t\t\t\t\tif(num>12||cards[0].name=='shandian'||get.isLuckyStar(player)) rand=1;\n\t\t\t\t\tvar name='pyzhuren_'+(cards[0][cards[0].name=='shandian'?'name':'suit']);\n\t\t\t\t\tif(!lib.card[name]||_status.pyzhuren[name]||Math.random()>rand){\n\t\t\t\t\t\tplayer.popup('杯具');\n\t\t\t\t\t\tgame.log(player,'锻造失败');\n\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\treturn card.name=='sha';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card) player.gain(card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t_status.pyzhuren[name]=true;\n\t\t\t\t\t\tplayer.gain(game.createCard(name,cards[0].name=='shandian'?'spade':cards[0].suit,1),'gain2')\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张手牌。根据此牌的花色点数，你有一定概率打造成功并获得一张武器牌（若打造失败或武器已有则改为摸一张【杀】，花色决定武器名称，点数决定成功率）。此武器牌进入弃牌堆时，将其移出游戏。"},"xpchijie":{"name":"持节","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('xpchijie4')||!event.card) return false;\n\t\t\t\t\tvar evt=event.getParent('useCard');\n\t\t\t\t\treturn evt.card==event.card&&evt.player!=player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar evt=event.getParent('useCard');\n\t\t\t\t\tvar targets=evt.targets.slice(evt.num+1);\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tnum+=get.effect(targets[i],evt.card,evt.player,player);\n\t\t\t\t\t}\n\t\t\t\t\treturn num<-1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('xpchijie4');\n\t\t\t\t\tvar evt=trigger.getParent('useCard');\n\t\t\t\t\tevt.excluded.addArray(evt.targets);\n\t\t\t\t},group: \"xpchijie2\",}","info":"每回合限一次。①当你受到其他角色使用的牌造成的伤害时，你可以令此牌对所有目标无效。②其他角色使用的牌结算完成时，若你是此牌的目标之一且此牌未造成过伤害，则你可以获得此牌对应的所有实体牌。"},"yinju":{"name":"引裾","script":"{audio: \"2\",enable: \"phaseUse\",limited: \"true\",filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},skillAnimation: \"true\",animationColor: \"water\",content: function (){\n\t\t\t\t\tplayer.awakenSkill('yinju');\n\t\t\t\t\tplayer.storage.yinju2=target;\n\t\t\t\t\tplayer.addTempSkill('yinju2');\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以选择一名其他角色。若如此做，当你于此阶段内使用装备牌指定目标或使用延时锦囊牌指定除其外的其他角色为目标或使用其他牌指定其为目标时，你摸一张牌；当你即将对其造成伤害时，防止此伤害，然后其回复等量的体力。"},"lslixun":{"name":"利熏","script":"{audio: \"2\",forced: \"true\",trigger: {player: \"damageBegin4\",},marktext: \"珠\",intro: {name2: \"珠\",content: \"共有#个“珠”\",},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.addMark('lslixun',trigger.num);\n\t\t\t\t},group: \"lslixun_fate\",}","info":"锁定技，当你受到伤害时，你防止此伤害，然后获得等同于伤害值的“珠”标记。出牌阶段开始时，你进行判定，若结果点数小于“珠”的数量，你弃置等同于“珠”数量的手牌（若弃牌的牌数不够，则失去剩余数量的体力值）。"},"lskuizhu":{"name":"馈珠","script":"{audio: \"2\",trigger: {player: \"phaseUseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isMaxHp(true)==false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('lskuizhu'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.isMaxHp();\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar ts=Math.min(5,target.countCards('h'));\n\t\t\t\t\t\tvar delta=ts-player.countCards('h');\n\t\t\t\t\t\tif(delta<=0) return 0;\n\t\t\t\t\t\tif(get.attitude(player,target)<1) return false;\n\t\t\t\t\t\treturn target.countCards('he',function(card){\n\t\t\t\t\t\t\treturn lib.skill.zhiheng.check(card)>0;\n\t\t\t\t\t\t})>1?delta:0;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('lskuizhu',target);\n\t\t\t\t\t\tplayer.drawTo(Math.min(5,target.countCards('h')));\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!player.countCards('h')){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.viewHandcards(player);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(!target.countCards('h')){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.chooseToDiscard(true,'h',[1,player.countCards('h')],'弃置至多'+get.cnNumber(player.countCards('h'))+'张手牌，并获得'+get.translation(player)+'等量的手牌').ai=function(card){\n\t\t\t\t\t\tif(ui.selected.cards.length>1) return -1;\n\t\t\t\t\t\treturn lib.skill.zhiheng.check.apply(this,arguments)\n\t\t\t\t\t};\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length&&player.countGainableCards(target,'h')>0){\n\t\t\t\t\t\ttarget.gainPlayerCard(player,'h',true,result.cards.length).visible=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length>1){\n\t\t\t\t\t\tvar bool=player.storage.lslixun>0!==true;\n\t\t\t\t\t\tplayer.chooseTarget(bool,'令'+get.translation(target)+'对其攻击范围内的一名角色造成1点伤害'+(bool?'':'，或点「取消」移去一个“珠”'),function(card,player,target){\n\t\t\t\t\t\t\tvar source=_status.event.source;\n\t\t\t\t\t\t\treturn target!=source&&source.inRange(target);\n\t\t\t\t\t\t}).set('source',target).set('ai',function(target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,_status.event.source,_status.event.player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tplayer.line(result.targets[0]);\n\t\t\t\t\t\tresult.targets[0].damage(target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.removeMark('lslixun',1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.25\",},}","info":"出牌阶段结束时，你可以选择体力值为全场最多的一名其他角色，将手牌摸至与该角色相同（最多摸至五张），然后该角色观看你的手牌，弃置任意张手牌并从观看的牌中获得等量的牌。若其获得的牌大于一张，则你选择一项：移去一个“珠”；或令其对其攻击范围内的一名角色造成1点伤害。"},"songshu":{"name":"颂蜀","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('songshu_reflectionblue')&&player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&player.canCompare(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target).set('small',get.attitude(player,target)>0);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t\tplayer.addTempSkill('songshu_reflectionblue');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段，你可以和其他角色拼点。若你没赢，其摸两张牌，且你本阶段内不能再发动〖颂蜀〗"},"sibian":{"name":"思辩","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\tevent.cards=get.cards(4);\n\t\t\t\t\tgame.cardsGotoOrdering(event.cards);\n\t\t\t\t\tplayer.showCards(event.cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\treturn b.number-a.number;\n\t\t\t\t\t});\n\t\t\t\t\tvar gains=[];\n\t\t\t\t\tvar mx=[cards[0].number,cards[3].number];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(mx.contains(cards[i].number)) gains.addArray(cards.splice(i--,1));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(gains,'gain2');\n\t\t\t\t\tif(cards.length!=2||Math.abs(gains[0].number-gains[1].number)>=game.players.length) event._result={bool:false};\n\t\t\t\t\telse player.chooseTarget('是否令一名手牌数最少的角色获得'+get.translation(cards),function(card,player,target){\n\t\t\t\t\t\treturn target.isMinHandcard();\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target);\n\t\t\t\t\t\tplayer.addExpose(0.2);\n\t\t\t\t\t\ttarget.gain(cards,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段，你可以放弃摸牌，改为亮出牌堆顶的四张牌，然后获得其中所有点数最大与点数最小的牌。若获得的牌是两张且点数之差小于存活人数，则你可以将剩余的牌交给手牌数最少的角色。"},"tuiyan":{"name":"推演","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=get.cards(2);\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tgame.log(player,'观看了牌堆顶的'+get.cnNumber(cards.length)+'张牌');\n\t\t\t\t\tplayer.chooseControl('ok').set('dialog',['推演',cards]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\tui.cardPile.insertBefore(cards.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},}","info":"出牌阶段开始时，你可以观看牌堆顶的两张牌。"},"busuan":{"name":"卜算","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\tvar type=get.type(name,'trick');\n\t\t\t\t\t\tif(['basic','trick'].contains(type)) list.push([type,'',name]);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton(['选择至多两种牌',[list,'vcard']],true,[1,2]).set('ai',function(button){\n\t\t\t\t\t\tvar target=_status.event.getParent().target;\n\t\t\t\t\t\tvar card={name:button.link[2]};\n\t\t\t\t\t\tif(get.type(card)=='basic'||!target.hasUseTarget(card)) return false;\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target)*(target.getUseValue(card)-0.1);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.storage.busuan_angelbeats=result.links.slice(0);\n\t\t\t\t\ttarget.addSkill('busuan_angelbeats');\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att>0) return 1\n\t\t\t\t\t\t\treturn -5/(target.countCards('h')+1);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择一名其他角色，然后选择至多两张不同的卡牌名称（限基本牌或锦囊牌）。该角色下次摸牌阶段摸牌时，改为从牌堆或弃牌堆中获得你选择的牌。"},"mingjie":{"name":"命戒","script":"{audio: \"1\",trigger: {player: \"phaseJieshuBegin\",},check: function (){\n\t\t\t\t\treturn ui.cardPile.hasChildNodes()&&get.color(ui.cardPile.firstChild)!='black';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=0;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw('visible');\n\t\t\t\t\tevent.count++;\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(Array.isArray(result)){\n\t\t\t\t\t\tif(get.color(result[0])=='black'){\n\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.count<3) player.chooseBool('是否继续发动【命戒】？').ai=function(){\n\t\t\t\t\t\t\tif(event.count==2) return Math.random()<0.5;\n\t\t\t\t\t\t\treturn lib.skill.mingjie.check();\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool) event.goto(1);\n\t\t\t\t},}","info":"结束阶段，你可以摸一张牌，若此牌为红色，你可以重复此流程直到摸到黑色牌或摸到第三张牌。当你以此法摸到黑色牌时，你失去1点体力。"},"gxlianhua":{"name":"炼化","script":"{derivation: [\"reyingzi\",\"reguanxing\",\"zhiyan\",\"gongxin\"],audio: \"2\",init: function (player,skill){\n\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]={\n\t\t\t\t\t\tred:0,black:0,\n\t\t\t\t\t}\n\t\t\t\t},marktext: \"丹\",intro: {name: \"丹血\",markcount: function (storage){\n\t\t\t\t\t\treturn storage.red+storage.black;\n\t\t\t\t\t},content: function (storage){\n\t\t\t\t\t\treturn '共有'+(storage.red+storage.black)+'个标记';\n\t\t\t\t\t},},trigger: {global: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.isAlive()&&_status.currentPhase!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.gxlianhua[player.getFriends().contains(trigger.player)?'red':'black']++;\n\t\t\t\t\tplayer.markSkill('gxlianhua');\n\t\t\t\t},group: \"gxlianhua_harmonia\",subSkill: {harmonia: {forced: \"true\",audio: \"gxlianhua\",sub: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},content: function (){\n\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\tvar cards2=[];\n\t\t\t\t\t\t\tvar skill='';\n\t\t\t\t\t\t\tvar red=player.storage.gxlianhua.red;\n\t\t\t\t\t\t\tvar black=player.storage.gxlianhua.black;\n\t\t\t\t\t\t\tplayer.storage.gxlianhua={red:0,black:0};\n\t\t\t\t\t\t\tplayer.unmarkSkill('gxlianhua');\n\t\t\t\t\t\t\tif(red+black<4){\n\t\t\t\t\t\t\t\tcards=['tao'];\n\t\t\t\t\t\t\t\tskill='reyingzi';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(red>black){\n\t\t\t\t\t\t\t\tcards=['wuzhong'];\n\t\t\t\t\t\t\t\tskill='reguanxing';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(red<black){\n\t\t\t\t\t\t\t\tcards=['shunshou'];\n\t\t\t\t\t\t\t\tskill='zhiyan';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tcards=['sha','juedou'];\n\t\t\t\t\t\t\t\tskill='gongxin';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\tvar card=get.cardPile(function(shiona){\n\t\t\t\t\t\t\t\t\treturn shiona.name==cards[i];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(card) cards2.push(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.addTempSkill(skill);\n\t\t\t\t\t\t\tif(cards2.length) player.gain(cards2,'gain2','log');\n\t\t\t\t\t\t},},},}","info":"你的回合外，每当有其他角色受到伤害后，你获得一个“丹血”标记（该角色与你阵营一致时为红色，不一致为黑色，此颜色对所有玩家均不可见）直到你的准备阶段开始。准备阶段，根据你获得的“丹血”标记的数量和颜色，你从牌堆/弃牌堆中获得相应的牌以及相应技能直到回合结束。3枚或以下：〖英姿〗和【桃】；超过3枚且红色“丹血”较多：〖观星〗和【无中生有】；超过3枚且黑色“丹血”较多：〖直言〗和【顺手牵羊】；超过3枚且红色和黑色一样多：【杀】、【决斗】和〖攻心〗。"},"zhafu":{"name":"札符","script":"{audio: \"2\",enable: \"phaseUse\",limited: \"true\",skillAnimation: \"true\",animationColor: \"wood\",filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('zhafu');\n\t\t\t\t\ttarget.addSkill('zhafu_hf');\n\t\t\t\t\ttarget.storage.zhafu_hf=player;\n\t\t\t\t},subSkill: {hf: {trigger: {player: \"phaseDiscardBegin\",},forced: \"true\",popup: \"false\",charlotte: \"true\",onremove: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tif(player.countCards('h')<=1||player.storage.zhafu_hf.isDead()) event.finish();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.storage.zhafu_hf.logSkill('zhafu_hf',player);\n\t\t\t\t\t\t\tplayer.chooseCard('h',true,'选择保留一张手牌，将其余的手牌交给'+get.translation(player.storage.zhafu_hf)).ai=get.value;\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\t\tcards.remove(result.cards[0]);\n\t\t\t\t\t\t\tplayer.storage.zhafu_hf.gain(cards,player,'giveAuto');\n\t\t\t\t\t\t\t'step 3'\n\t\t\t\t\t\t\tplayer.removeSkill('zhafu_hf');\n\t\t\t\t\t\t},sub: \"true\",},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"\t限定技，出牌阶段，你可以选择一名其他角色，令其获得一枚「札」。有「札」的角色弃牌阶段开始时，若其手牌数大于1，其移去「札」并选择保留一张手牌，然后将其余的手牌交给你。"},"spjiedao":{"name":"截刀","script":"{audio: \"2\",trigger: {source: \"damageBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged()&&!player.getHistory('sourceDamage').length;\n\t\t\t\t},logTarget: \"player\",direct: \"true\",check: function (trigger,player){\n\t\t\t\t\t\tif(get.attitude(player,trigger.player)>=-1) return false;\n\t\t\t\t\t\treturn !trigger.player.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\tcard:trigger.card,\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar num=player.getDamagedHp();\n\t\t\t\t\tvar map={};\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<=num;i++){\n\t\t\t\t\t\tvar cn=get.cnNumber(i,true);\n\t\t\t\t\t\tmap[cn]=i;\n\t\t\t\t\t\tlist.push(cn);\n\t\t\t\t\t}\n\t\t\t\t\tevent.map=map;\n\t\t\t\t\tplayer.chooseControl(list,'cancel2',function(){\n\t\t\t\t\t\tif(!lib.skill.spjiedao.check(_status.event.getTrigger(),player)) return 'cancel2';\n\t\t\t\t\t\treturn get.cnNumber(_status.event.goon,true);\n\t\t\t\t\t}).set('prompt',get.prompt2('spjiedao',trigger.player)).set('goon',num);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='cancel2') return;\n\t\t\t\t\tplayer.logSkill('spjiedao',trigger.player);\n\t\t\t\t\tvar num=event.map[result.control]||1;\n\t\t\t\t\ttrigger.num+=num;\n\t\t\t\t\tvar next=game.createEvent('spjiedao_after',null,trigger.getParent());\n\t\t\t\t\tnext.player=player;\n\t\t\t\t\tnext.target=trigger.player;\n\t\t\t\t\tnext.num=num;\n\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\tif(target.isAlive()) player.chooseToDiscard(num,true,'he');\n\t\t\t\t\t});\n\t\t\t\t},}","info":"当你每回合第一次造成伤害时，你可令此伤害至多+X（X为你损失的体力值）。然后若受到此伤害的角色没有死亡，你弃置等同于此伤害加值的牌。"},"biaozhao":{"name":"表召","script":"{audio: \"2\",intro: {content: \"cards\",},trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0&&!player.storage.biaozhao;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('he',get.prompt2('biaozhao')).ai=function(card){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addSkill('biaozhao2');\n\t\t\t\t\t\tplayer.addSkill('biaozhao3');\n\t\t\t\t\t\tplayer.logSkill('biaozhao');\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage','visible');\n\t\t\t\t\t\tplayer.$give(result.cards,player,false);\n\t\t\t\t\t\tplayer.storage.biaozhao=result.cards;\n\t\t\t\t\t\tplayer.markSkill('biaozhao');\n\t\t\t\t\t}\n\t\t\t\t},ai: {notemp: \"true\",},}","info":"结束阶段，你可以将一张牌置于武将牌上，称为“表”。当有一张与“表”花色点数均相同的牌进入弃牌堆时，你将“表”置入弃牌堆并失去1点体力，若此牌是其他角色因弃置而进入弃牌堆的，则改为该角色获得“表”。准备阶段，若你的武将牌上有“表”，则你将“表”置入弃牌堆。然后你选择一名角色，该角色回复1点体力且将手牌摸至与全场手牌数最多的人相同（最多摸五张）。"},"yechou":{"name":"业仇","script":"{audio: \"2\",trigger: {player: \"die\",},direct: \"true\",forceDie: \"true\",skillAnimation: \"true\",animationColor: \"wood\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('yechou'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&target.getDamagedHp()>1\n\t\t\t\t\t}).set('forceDie',true).set('ai',function(target){\n\t\t\t\t\t\tvar num=get.attitude(_status.event.player,target);\n\t\t\t\t\t\treturn -num;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('yechou',target);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.addTempSkill('yechou2',{player:'phaseZhunbeiBegin'});\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.5\",},}","info":"当你死亡时，你可以选择一名已损失体力值大于1的角色。直到其下个回合开始前，每个回合结束时，该角色失去1点体力。"},"yanjiao":{"name":"严教","script":"{audio: \"2\",ai: {order: \"10\",result: {player: \"1\",target: \"1.1\",},},enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar num=4;\n\t\t\t\t\tif(player.storage.xingshen){\n\t\t\t\t\t\tnum+=player.storage.xingshen;\n\t\t\t\t\t\tplayer.storage.xingshen=0;\n\t\t\t\t\t\tplayer.unmarkSkill('xingshen');\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.olxingshen){\n\t\t\t\t\t\tnum+=player.storage.olxingshen;\n\t\t\t\t\t\tplayer.storage.olxingshen=0;\n\t\t\t\t\t\tplayer.unmarkSkill('olxingshen');\n\t\t\t\t\t}\n\t\t\t\t\tevent.cards=get.cards(num);\n\t\t\t\t\tplayer.showCards(event.cards);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.getedResult=lib.skill.yanjiao.getResult(cards);\n\t\t\t\t\tif(!event.getedResult.length){\n\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\tplayer.addTempSkill('yanjiao2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\ttarget.chooseControl(\"自动分配\",\"手动分配\").set(\"prompt\",\"【严教】：是否让系统自动分配方案？\").ai=function(){\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.control==\"手动分配\"){\n\t\t\t\t\t\tevent.map=[cards,[],[]];\n\t\t\t\t\t\t_status.noclearcountdown=true;\n\t\t\t\t\t\tevent.goto(8);\n\t\t\t\t\t}\n\t\t\t\t\telse if(!_status.connectMode){\n\t\t\t\t\t\tvar choiceList=ui.create.dialog('请选择一种方案','hidden','forcebutton');\n\t\t\t\t\t\tfor(var i=0;i<event.getedResult.length;i++){\n\t\t\t\t\t\t\tvar str='<div class=\"popup text\" style=\"width:calc(100% - 10px);display:inline-block\">方案'+get.cnNumber(i+1,true);\n\t\t\t\t\t\t\tstr+='<br>第一组：';\n\t\t\t\t\t\t\tvar current=event.getedResult[i];\n\t\t\t\t\t\t\tstr+=get.translation(current[0]);\n\t\t\t\t\t\t\tstr+='<br>第二组：';\n\t\t\t\t\t\t\tstr+=get.translation(current[1]);\n\t\t\t\t\t\t\tif(current[2].length){\n\t\t\t\t\t\t\t\tstr+='<br>剩余：';\n\t\t\t\t\t\t\t\tstr+=get.translation(current[2]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr+='</div>';\n\t\t\t\t\t\t\tvar next=choiceList.add(str);\n\t\t\t\t\t\t\tnext.firstChild.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tnext.firstChild.link=i;\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\tnext[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchoiceList.buttons.add(next.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.choiceList=choiceList;\n\t\t\t\t\t\ttarget.chooseButton(choiceList,true,function(button){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.bool&&result.links) event.index=result.links[0];\n\t\t\t\t\telse event.index=0;\n\t\t\t\t\tevent.togain=event.getedResult[event.index];\n\t\t\t\t\ttarget.showCards(event.togain[0],get.translation(target)+'分出的第一份牌');\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\ttarget.showCards(event.togain[1],get.translation(target)+'分出的第二份牌');\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\ttarget.chooseControl().set('choiceList',[\n\t\t\t\t\t\t'获得'+get.translation(event.togain[0]),\n\t\t\t\t\t\t'获得'+get.translation(event.togain[1])\n\t\t\t\t\t]).ai=function(){return Math.random()<0.5?1:0};\n\t\t\t\t\t\"step 7\"\n\t\t\t\t\ttarget.gain(event.togain[result.index],'gain2');\n\t\t\t\t\tplayer.gain(event.togain[1-result.index],'gain2');\n\t\t\t\t\tif(event.togain[2].length){\n\t\t\t\t\t\tgame.cardsDiscard(event.togain[2]);\n\t\t\t\t\t\tif(event.togain[2].length>1) player.addTempSkill('yanjiao2');\n\t\t\t\t\t}\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t\"step 8\"\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar dialogx=['严教：选择要移动的牌'];\n\t\t\t\t\tvar name=[\"未分配\",\"第一组\",\"第二组\"];\n\t\t\t\t\tfor(var i=0;i<event.map.length;i++){\n\t\t\t\t\t\tif(event.map[i].length>0){\n\t\t\t\t\t\t\tdialogx.push('<div class=\"text center\">'+name[i]+'</div>');\n\t\t\t\t\t\t\tdialogx.push(event.map[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\ttarget.send(function(dialogx,id){\n\t\t\t\t\t\t\tui.create.dialog.apply(null,dialogx).videoId=id;\n\t\t\t\t\t\t},dialogx,event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog=ui.create.dialog.apply(null,dialogx);\n\t\t\t\t\tevent.dialog.videoId=event.videoId;\n\t\t\t\t\tif(target!=game.me||_status.auto){\n\t\t\t\t\t\tevent.dialog.style.display='none';\n\t\t\t\t\t}\n\t\t\t\t\tvar next=target.chooseButton();\n\t\t\t\t\tnext.set('selectButton',function(){\n\t\t\t\t\t\tif(!_status.event.map[1].length||!_status.event.map[2].length) return 1;\n\t\t\t\t\t\tvar num1=0;\n\t\t\t\t\t\tfor(var i=0;i<_status.event.map[1].length;i++){\n\t\t\t\t\t\t\tnum1+=_status.event.map[1][i].number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar num2=0;\n\t\t\t\t\t\tfor(var j=0;j<_status.event.map[2].length;j++){\n\t\t\t\t\t\t\tnum2+=_status.event.map[2][j].number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (num1==num2?[0,1]:1);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('map',event.map);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('ai',function(){return -1});\n\t\t\t\t\tnext.set('forceAuto',true);\n\t\t\t\t\t\"step 9\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!result.links.length){\n\t\t\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\t\t\ttarget.send('closeDialog',event.videoId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.togain=[event.map[1],event.map[2],event.map[0]];\n\t\t\t\t\t\t\ttarget.showCards(event.togain[0],get.translation(target)+'分出的第一份牌');\n\t\t\t\t\t\t\tevent.goto(5);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\t\tvar controls=[\"取消分组\",\"移动到第一组\",\"移动到第二组\"];\n\t\t\t\t\t\t\tfor(var i=0;i<event.map.length;i++){\n\t\t\t\t\t\t\t\tif(event.map[i].contains(event.card)){\n\t\t\t\t\t\t\t\t\tcontrols.splice(i,1);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar func=function(card,id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(dialog.buttons[i].link==card){\n\t\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('glow');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('unselectable');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\t\t\ttarget.send(func,event.card,event.videoId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target==game.me&&!_status.auto){\n\t\t\t\t\t\t\t\tfunc(event.card,event.videoId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget.chooseControl(controls);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\t\ttarget.send('closeDialog',event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\tplayer.addTempSkill('yanjiao2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 10\"\n\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\ttarget.send('closeDialog',event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\tvar position={\n\t\t\t\t\t\t\"取消分组\":0,\n\t\t\t\t\t\t\"移动到第一组\":1,\n\t\t\t\t\t\t\"移动到第二组\":2,\n\t\t\t\t\t}[result.control||\"取消分组\"];\n\t\t\t\t\tfor(var i=0;i<event.map.length;i++){\n\t\t\t\t\t\tif(event.map[i].contains(card)){\n\t\t\t\t\t\t\tevent.map[i].remove(card);\n\t\t\t\t\t\t\tevent.map[position].push(card);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(8);\n\t\t\t\t},getResult: function (cards){\n\t\t\t\t\tvar cl=cards.length;\n\t\t\t\t\tvar maxmium=Math.pow(3,cl);\n\t\t\t\t\tvar filter=function(list){\n\t\t\t\t\t\tif(!list[1].length||!list[0].length) return false;\n\t\t\t\t\t\tvar num1=0;\n\t\t\t\t\t\tfor(var i=0;i<list[1].length;i++){\n\t\t\t\t\t\t\tnum1+=list[1][i].number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar num2=0;\n\t\t\t\t\t\tfor(var j=0;j<list[0].length;j++){\n\t\t\t\t\t\t\tnum2+=list[0][j].number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num1==num2\n\t\t\t\t\t};\n\t\t\t\t\tvar results=[];\n\t\t\t\t\tfor(var i=0;i<maxmium;i++){\n\t\t\t\t\t\tvar result=[[],[],[]];\n\t\t\t\t\t\tfor(var j=0;j<cl;j++){\n\t\t\t\t\t\t\tresult[Math.floor((i%Math.pow(3,j+1))/Math.pow(3,j))].push(cards[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(filter(result)) results.push(result);\n\t\t\t\t\t}\n\t\t\t\t\tvar filterSame=function(list1,list2){\n\t\t\t\t\t\tif(list1[1].length==list2[0].length&&list1[0].length==list2[1].length){\n\t\t\t\t\t\t\tfor(var i=0;i<list1[0].length;i++){\n\t\t\t\t\t\t\t\tif(!list2[1].contains(list1[0][i])) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<list1[1].length;i++){\n\t\t\t\t\t\t\t\tif(!list2[0].contains(list1[1][i])) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<results.length;i++){\n\t\t\t\t\t\tfor(var j=i+1;j<results.length;j++){\n\t\t\t\t\t\t\tif(filterSame(results[i],results[j])) results.splice(j--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresults.sort(function(a,b){\n\t\t\t\t\t\treturn a[2].length-b[2].length;\n\t\t\t\t\t});\n\t\t\t\t\treturn results;\n\t\t\t\t},}","info":"出牌阶段限一次，你可以选择一名其他角色并从牌堆顶亮出四张牌。该角色将这些牌分成点数之和相等的两组，你与其各获得其中一组，然后将剩余未分组的牌置入弃牌堆。若未分组的牌超过一张，则你本回合手牌上限-1。"},"xingshen":{"name":"省身","script":"{audio: \"2\",intro: {content: \"下一次发动【严教】时多展示#张牌\",},trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(player.isMinHandcard()?2:1);\n\t\t\t\t\tif(!player.storage.xingshen) player.storage.xingshen=0;\n\t\t\t\t\tplayer.storage.xingshen+=player.isMinHp()?2:1;\n\t\t\t\t\tif(player.storage.xingshen>4) player.storage.xingshen=4;\n\t\t\t\t\tplayer.markSkill('xingshen');\n\t\t\t\t},}","info":"当你受到伤害后，你可以摸一张牌且下一次发动〖严教〗亮出的牌数+1。若你的手牌数为全场最少，则改为摸两张牌；若你的体力值为全场最少，则〖严教〗亮出的牌数改为+2（加值总数不能超过4）。"},"xiying":{"name":"袭营","script":"{trigger: {player: \"phaseUseBegin\",},audio: \"2\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\treturn _status.connectMode||get.type(card)!='basic';\n\t\t\t\t\t})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=player;\n\t\t\t\t\t});\n\t\t\t\t\tlist.sortBySeat();\n\t\t\t\t\tevent.targets=list;\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt2('xiying'),'h',function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t}).set('logSkill',['xiying',list]).set('ai',function(card){\n\t\t\t\t\t\treturn _status.event.val-get.value(card)\n\t\t\t\t\t}).set('val',function(){\n\t\t\t\t\t\treturn 4*Math.sqrt(game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn get.attitude(player,current)<0&&current.countCards('he')>0;\n\t\t\t\t\t\t}));\n\t\t\t\t\t}());\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool) event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar target=targets.shift();\n\t\t\t\t\tevent.target=target;\n\t\t\t\t\tif(target.isAlive()) target.chooseToDiscard('he','弃置一张牌，或本回合内不能使用或打出牌').set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar source=_status.event.getTrigger().player;\n\t\t\t\t\t\tif(get.attitude(source,player)>0) return -1;\n\t\t\t\t\t\tif(_status.event.getRand()>0.5) return 5-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(target.isAlive()&&!result.bool) target.addTempSkill('xiying2');\n\t\t\t\t\tif(targets.length) event.goto(2);\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\treturn arg.target.hasSkill('xiying2');\n\t\t\t\t\t},},}","info":"出牌阶段开始时，你可以弃置一张非基本手牌，然后令所有其他角色依次选择一项：弃置一张牌，或本回合内不能使用或打出牌。"},"gangzhi":{"name":"刚直","script":"{audio: \"2\",trigger: {player: \"damageBefore\",source: \"damageBefore\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\ttrigger.player.loseHp(trigger.num);\n\t\t\t\t},ai: {jueqing: \"true\",},}","info":"锁定技，当你即将受到或造成伤害时，你防止此伤害，改为受到伤害的角色失去等量的体力。"},"beizhan":{"name":"备战","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('beizhan')).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tvar hs=target.countCards('h');\n\t\t\t\t\t\tvar ht=target.maxHp;\n\t\t\t\t\t\tif(hs>=ht&&target.isMaxHandcard()) return -att*hs;\n\t\t\t\t\t\tif(hs<ht&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.countCards('h')>ht;\n\t\t\t\t\t\t})) return att*2*(ht-hs);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('beizhan',target);\n\t\t\t\t\t\ttarget.drawTo(Math.min(5,target.maxHp))\n\t\t\t\t\t\ttarget.addSkill('beizhan2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.25\",},}","info":"结束阶段，你可以令一名角色将手牌摸至体力上限（至多为5）。其下个回合开始时，若其手牌数为全场最多，则其此回合内使用的牌不能指定其他角色为目标。"},"fenglve":{"name":"锋略","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar goon=player.hasCard(function(card){\n\t\t\t\t\t\tif(get.position(card)!=\"h\") return false;\n\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\tif(val<0) return true;\n\t\t\t\t\t\tif(val<=5){\n\t\t\t\t\t\t\treturn card.number>=12;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(val<=6){\n\t\t\t\t\t\t\treturn card.number>=13;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('fenglve'),function(card,player,target){\n\t\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\treturn -get.attitude(player,target)*(1+target.countCards('e'))/(1+target.countCards('j'));\n\t\t\t\t\t}).set('goon',goon);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('fenglve',target);\n\t\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tif(target.countCards('h')) num++;\n\t\t\t\t\t\tif(target.countCards('e')) num++;\n\t\t\t\t\t\tif(target.countCards('j')) num++;\n\t\t\t\t\t\tif(num){\n\t\t\t\t\t\t\tevent.gainner=player;\n\t\t\t\t\t\t\tevent.giver=target;\n\t\t\t\t\t\t\ttarget.choosePlayerCard(target,num,'hej',true).set('filterButton',function(button){\n\t\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\t\t\tif(get.position(button.link)==get.position(ui.selected.buttons[i].link)) return false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}).set('prompt','选择交给'+get.translation(event.gainner)+'的牌');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.countCards('he')){\n\t\t\t\t\t\t\tevent.gainner=target;\n\t\t\t\t\t\t\tevent.giver=player;\n\t\t\t\t\t\t\tplayer.choosePlayerCard(player,true,'he').set('prompt','选择交给'+get.translation(event.gainner)+'的牌');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tevent.gainner.gain(result.links,'giveAuto',event.giver)\n\t\t\t\t},group: \"fenglve2\",ai: {expose: \"0.25\",},}","info":"出牌阶段开始时，你可以与一名角色拼点，若你赢，该角色将其区域内的各一张牌交给你；若你没赢，你交给其一张牌。当你的单人拼点结算后，你可以令对方获得你拼点的牌。"},"mouzhi":{"name":"谋识","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0\n\t\t\t\t},filterCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.storage.mouzhi2&&target.storage.mouzhi2.contains(player)) return false;\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},delay: \"0\",lose: \"false\",discard: \"false\",check: function (card){\n\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar useval=player.getUseValue(card);\n\t\t\t\t\tvar maxval=0;\n\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\tif(current!=player&&!current.hasSkillTag('nogain')&&get.attitude(player,current)>0){\n\t\t\t\t\t\t\tvar temp=current.getUseValue(card);\n\t\t\t\t\t\t\tif(temp>maxval) maxval=temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(maxval>0&&get.tag(card,'damage')) return 15;\n\t\t\t\t\tif(maxval>useval) return 10;\n\t\t\t\t\tif(player.needsToDiscard()) return 1/Math.max(0.1,get.value(card));\n\t\t\t\t\treturn -1;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\ttarget.addTempSkill('mouzhi2',{player:'phaseEnd'});\n\t\t\t\t\ttarget.storage.mouzhi2.add(player);\n\t\t\t\t\ttarget.storage.mouzhi2.sortBySeat(target);\n\t\t\t\t\ttarget.markSkill('mouzhi2');\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\t\tif(card.name=='du') return target.hasSkill('lucia_duqu')?1:-1;\n\t\t\t\t\t\t\t\tvar t=target.getUseValue(card);\n\t\t\t\t\t\t\t\tvar p=player.getUseValue(card);\n\t\t\t\t\t\t\t\tif(t>p) return 2;\n\t\t\t\t\t\t\t\tif(t>0) return 1.5\n\t\t\t\t\t\t\t\tif(player.needsToDiscard()) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以将一张手牌交给一名角色，若如此做，当其于其下回合的出牌阶段内对一名角色造成伤害后，若是此阶段其第一次对该角色造成伤害，你摸一张牌。"},"yuanlve":{"name":"远略","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\treturn get.type(card)!='equip';\n\t\t\t\t\t})\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.type(card)!='equip';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},delay: \"false\",discard: \"false\",lose: \"false\",check: function (card){\n\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar useval=player.getUseValue(card);\n\t\t\t\t\tvar maxval=0;\n\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\tif(current!=player&&!current.hasSkillTag('nogain')&&get.attitude(player,current)>0){\n\t\t\t\t\t\t\tvar temp=current.getUseValue(card);\n\t\t\t\t\t\t\tif(temp>maxval) maxval=temp;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(maxval>useval) return 15;\n\t\t\t\t\tif(maxval>0) return 10;\n\t\t\t\t\tif(player.needsToDiscard()) return 1/Math.max(0.1,get.value(card));\n\t\t\t\t\treturn -1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.chooseUseTarget(cards[0]);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool) player.draw();\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.cards.length){\n\t\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\t\tif(card.name=='du') return target.hasSkill('lucia_duqu')?1:-1;\n\t\t\t\t\t\t\t\tvar t=target.getUseValue(card);\n\t\t\t\t\t\t\t\tvar p=player.getUseValue(card);\n\t\t\t\t\t\t\t\tif(t>p) return 2;\n\t\t\t\t\t\t\t\tif(t>0) return 1.5\n\t\t\t\t\t\t\t\tif(player.needsToDiscard()) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以将一张非装备牌交给一名角色，然后该角色可以使用该牌并令你摸一张牌。"},"spshicai":{"name":"恃才","script":"{audio: \"2\",enable: \"phaseUse\",position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.spshicai2||!player.getCards('h').contains(player.storage.spshicai2);\n\t\t\t\t},filterCard: \"true\",prompt: function (){\n\t\t\t\t\tvar str='弃置一张牌，然后获得';\n\t\t\t\t\tif(get.itemtype(_status.pileTop)=='card') str+=get.translation(_status.pileTop);\n\t\t\t\t\telse str+='牌堆顶的一张牌';\n\t\t\t\t\treturn str;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar cardx=_status.pileTop;\n\t\t\t\t\tif(get.itemtype(cardx)!='card') return 0;\n\t\t\t\t\tvar val=player.getUseValue(cardx,null,true);\n\t\t\t\t\tif(!val) return 0;\n\t\t\t\t\tvar val2=player.getUseValue(card,null,true);\n\t\t\t\t\treturn (val-val2)/Math.max(0.1,get.value(card));\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar card=get.cards()[0];\n\t\t\t\t\tplayer.storage.spshicai2=card;\n\t\t\t\t\tplayer.gain(card,'draw');\n\t\t\t\t\tgame.log(player,'获得了牌堆顶的一张牌');\n\t\t\t\t},group: \"spshicai_mark\",ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段，牌堆顶的一张牌对你可见。你可以弃置一张牌，然后获得牌堆顶的一张牌，且不能再发动〖恃才〗直到此牌离开你的手牌区。"},"spfushi":{"name":"附势","script":"{group: [\"zezhu\",\"chenggong\"],derivation: [\"zezhu\",\"chenggong\"],locked: \"true\",}","info":"锁定技，若己方存活角色数：大于敌方，你视为拥有〖择主〗；小于敌方，你视为拥有〖逞功〗。"},"cangchu":{"name":"仓储","script":"{trigger: {global: \"gameDrawAfter\",player: [\"damageEnd\",\"enterGame\"],},audio: \"2\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.name!='damage') return true;\n\t\t\t\t\treturn event.nature=='fire'&&player.countMark('cangchu')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.name!='damage') player.addMark('cangchu',3);\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.removeMark('cangchu',Math.min(trigger.num,player.countMark('cangchu')));\n\t\t\t\t\t\tif(!player.hasMark('cangchu')) event.trigger('cangchuAwaken');\n\t\t\t\t\t}\n\t\t\t\t},marktext: \"粮\",intro: {name2: \"粮\",content: \"mark\",},ai: {threaten: function (player,target){\n\t\t\t\t\t\treturn 1+target.countMark('cangchu')/2;\n\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(target.hasMark('cangchu')){\n\t\t\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\t\t\tif(lib.skill.global.contains('huoshaowuchao')||card.nature=='fire'||player.hasSkill('zhuque_skill')) return 2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(get.tag(card,'fireDamage')&&current<0) return 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，游戏开始时，你获得3枚“粮”标记，当你受到1点火焰伤害后，你失去一枚“粮”标记。"},"sushou":{"name":"宿守","script":"{trigger: {player: \"phaseDiscardBegin\",},frequent: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw(1+player.countMark('cangchu'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=Math.min(player.countCards('h'),game.countPlayer(function(target){\n\t\t\t\t\t\treturn target!=player&&target.isFriendOf(player);\n\t\t\t\t\t}));\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\t\tprompt:'是否将任意张手牌交给其他己方角色？',\n\t\t\t\t\t\t\tprompt2:'操作提示：先按顺序选中所有要给出的手牌，然后再按顺序选择等量的目标角色',\n\t\t\t\t\t\t\tselectCard:[1,num],\n\t\t\t\t\t\t\tselectTarget:function(){\n\t\t\t\t\t\t\t\treturn ui.selected.cards.length;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player&&target.isFriendOf(player);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcomplexSelect:true,\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\tif(card.name=='shan') return 1;\n\t\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\t\treturn 5-Math.max(4,target.countCards('h'));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\twhile(result.cards.length){\n\t\t\t\t\t\t\tvar target=result.targets.shift();\n\t\t\t\t\t\t\tvar card=result.cards.shift();\n\t\t\t\t\t\t\ttarget.gain(card,player);\n\t\t\t\t\t\t\tplayer.$giveAuto(card,target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.next.sort(function(a,b){\n\t\t\t\t\t\t\treturn lib.sort.seat(a.player,b.player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"弃牌阶段开始时，你可以摸X+1张牌（X为“粮”数），然后可以交给任意名友方角色各一张牌。"},"liangying":{"name":"粮营","script":"{trigger: {global: \"phaseDrawBegin2\",player: \"cangchuAwaken\",},forced: \"true\",audio: \"1\",logTarget: function (event,player){\n\t\t\t\t\tif(event.name=='phaseDraw') return event.player;\n\t\t\t\t\treturn game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.isEnemyOf(player);\n\t\t\t\t\t});\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.name=='cangchu') return true;\n\t\t\t\t\treturn player.hasMark('cangchu')&&!event.numFixed&&event.player.isFriendOf(player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(trigger.name=='cangchu'){\n\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn current.isEnemyOf(player);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tgame.asyncDraw(list,2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"锁定技，若你有“粮”标记，则友方角色摸牌阶段摸牌数+1；当你失去所有“粮”标记后，你减1点体力上限，然后令敌方角色各摸两张牌。"},"liehou":{"name":"列侯","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.inRange(target)&&target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseCard('h',true,'交给'+get.translation(player)+'一张牌');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,target,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.countCards('h')&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=target&&player.inRange(current);\n\t\t\t\t\t})){\n\t\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\t\tposition:'h',\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=_status.event.getParent().target&&player.inRange(target);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tforced:true,\n\t\t\t\t\t\t\tprompt:'将一张手牌交给一名攻击范围内的其他角色',\n\t\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(get.name(card)=='du') return 20;\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=_status.event.getParent().target&&player.inRange(current)&&get.attitude(player,current)>0&&current.getUseValue(card)>player.getUseValue(card)&&current.getUseValue(card)>player.getUseValue(card);\n\t\t\t\t\t\t\t\t})) return 12;\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=player&&get.attitude(player,current)>0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\tif(card.name=='wuxie') return 11;\n\t\t\t\t\t\t\t\t\tif(card.name=='shan'&&player.countCards('h','shan')>1) return 9\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 6/Math.max(1,get.value(card));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\t\tif(card.name=='du') return -6*att;\n\t\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\t\tif(get.position(card)=='h'&&target.getUseValue(card)>player.getUseValue(card)) return 4*att;\n\t\t\t\t\t\t\t\t\tif(get.value(card,target)>get.value(card,player)) return 2*att;\n\t\t\t\t\t\t\t\t\treturn 1.2*att;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -att*Math.min(4,target.countCards('he'))/6;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool) result.targets[0].gain(result.cards,player,'giveAuto')\n\t\t\t\t},ai: {order: \"6\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以令一名攻击范围内的角色交给你一张手牌，然后你将一张手牌交给攻击范围内的另一名角色。"},"qigong":{"name":"齐攻","script":"{trigger: {player: \"shaMiss\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.canUse('sha',event.target,false)&&(player.hasSha()||_status.connectMode&&player.countCards('h'));\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToUse(get.prompt('qigong'),function(card,player,event){\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t},trigger.target,-1).set('addCount',false).logSkill='qigong';\n\t\t\t\t},group: \"qigong_hit\",}","info":"当你使用的【杀】被【闪】抵消之后，你可以再对目标角色使用一张【杀】（不可被响应）。"},"kuiji":{"name":"溃击","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(player.hasJudge('bingliang')) return false;\n\t\t\t\t\treturn player.countCards('he',function(card){\n\t\t\t\t\t\treturn get.color(card)=='black'&&get.type(card)=='basic';\n\t\t\t\t\t})>0;\n\t\t\t\t},viewAs: {name: \"bingliang\",},position: \"he\",filterCard: function (card,player,event){\n\t\t\t\t\treturn get.color(card)=='black'&&get.type(card)=='basic'&&player.canAddJudge({name:'bingliang',cards:[card]});\n\t\t\t\t},selectTarget: \"-1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player==target;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t},onuse: function (links,player){\n\t\t\t\t\tvar next=game.createEvent('kuiji_content',false,_status.event.getParent());\n\t\t\t\t\tnext.player=player;\n\t\t\t\t\tnext.setContent(lib.skill.kuiji.kuiji_content);\n\t\t\t\t},kuiji_content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseTarget('选择一名体力值最大的敌方角色，对其造成2点伤害',function(card,player,target){\n\t\t\t\t\t\treturn target.isEnemyOf(player)&&!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.isEnemyOf(player)&&current.hp>target.hp;\n\t\t\t\t\t\t});\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player)\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target);\n\t\t\t\t\t\ttarget.damage(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: \"1\",},order: \"12\",basic: {order: \"1\",useful: \"1\",value: \"4\",},tag: {skip: \"phaseDraw\",},},group: \"kuiji_dying\",subSkill: {dying: {trigger: {global: \"dying\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tvar evt=event.getParent(2);\n\t\t\t\t\t\t\tif(!evt||evt.name!='kuiji_content'||evt.player!=player) return false;\n\t\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isFriendOf(player);\n\t\t\t\t\t\t\t}).sort(function(a,b){\n\t\t\t\t\t\t\t\treturn a.hp-b.hp;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn (list.length==1||list[0].hp<list[1].hp)&&list[0].isDamaged();\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isFriendOf(player);\n\t\t\t\t\t\t\t}).sort(function(a,b){\n\t\t\t\t\t\t\t\treturn a.hp-b.hp;\n\t\t\t\t\t\t\t})[0];\n\t\t\t\t\t\t\tplayer.logSkill('kuiji',list);\n\t\t\t\t\t\t\tlist.recover();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段限一次，你可以将一张黑色基本牌当作【兵粮寸断】置于你的判定区，然后摸一张牌。若如此做，你可以对体力值最多的一名对手造成2点伤害。对手因此进入濒死状态时，你或队友体力值最少的一方回复1点体力。"},"wlcuorui":{"name":"挫锐","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.isFriendOf(player)&&current.countDiscardableCards(player,'hej')>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\treturn target.isFriendOf(player)&&target.countDiscardableCards(player,'hej')>0;\n\t\t\t\t\t},get.prompt2('wlcuorui')).set('ai',function(target){\n\t\t\t\t\t\tif(target.countCards('e',function(card){\n\t\t\t\t\t\t\treturn card.name!='tengjia'&&get.value(card,target)<=0;\n\t\t\t\t\t\t})) return 10;\n\t\t\t\t\t\tif(target.countCards('j',function(card){\n\t\t\t\t\t\t\treturn get.effect(target,{name:card.viewAs||card.name},target,target)<0;\n\t\t\t\t\t\t})) return 10;\n\t\t\t\t\t\treturn Math.random()+0.2-1/target.countCards('hej');\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('wlcuorui',target);\n\t\t\t\t\t\tplayer.discardPlayerCard(target,'hej',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!result.cards||!result.cards.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar color=get.color(result.cards[0],result.cards[0].original=='j'?false:target);\n\t\t\t\t\tevent.color=color;\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.isEnemyOf(player)&&current.countCards('h');\n\t\t\t\t\t})) list.push('展示手牌');\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.isEnemyOf(player)&&current.countCards('e',{color:color});\n\t\t\t\t\t})) list.push('弃置装备');\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length==1) event._result={control:list[0]};\n\t\t\t\t\telse player.chooseControl(list).set('prompt','挫锐：展示对手的至多两张手牌，或弃置对手装备区内至多两张'+get.translation(color)+'牌').set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar color=_status.event.getParent().color;\n\t\t\t\t\t\tif(game.countPlayer(function(current){\n\t\t\t\t\t\t\tif(!current.isEnemyOf(player)) return false;\n\t\t\t\t\t\t\treturn current.countCards('e',function(card){\n\t\t\t\t\t\t\t\treturn get.color(card)==color&&get.value(card)>0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})>1) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.control=='弃置装备') event.goto(5);\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar dialog=['请选择要展示的牌'];\n\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn current.isEnemyOf(player)&&current.countCards('h');\n\t\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\tdialog.push('<div class=\"text center\">'+get.translation(i)+'</div>');\n\t\t\t\t\t\t\tif(player.hasSkillTag('viewHandcard',null,i,true)) dialog.push(i.getCards('h'));\n\t\t\t\t\t\t\telse dialog.push([i.getCards('h'),'blank']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseButton([1,2],true).set('createDialog',dialog).set('ai',function(button){\n\t\t\t\t\t\t\tvar color=(get.color(button.link)==_status.event.getParent().color);\n\t\t\t\t\t\t\treturn color?Math.random():0.35;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tplayer.showCards(result.links);\n\t\t\t\t\tvar map={};\n\t\t\t\t\tvar map2={};\n\t\t\t\t\tfor(var i of result.links){\n\t\t\t\t\t\tvar id=get.owner(i).playerid;\n\t\t\t\t\t\tif(!map[id]) map[id]=[];\n\t\t\t\t\t\tmap[id].push(i);\n\t\t\t\t\t\tif(get.color(i)!=event.color) continue;\n\t\t\t\t\t\tif(!map2[id]) map2[id]=[];\n\t\t\t\t\t\tmap2[id].push(i);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i in map){\n\t\t\t\t\t\tvar source=(_status.connectMode?lib.playerOL:game.playerMap)[i];\n\t\t\t\t\t\tif(map2[i]) player.gain(map2[i],source,'bySelf','give');\n\t\t\t\t\t\tplayer.line(source);\n\t\t\t\t\t\tgame.log(player,'展示了',source,'的',map[i]);\n\t\t\t\t\t}\n\t\t\t\t\tevent.next.sort(function(a,b){\n\t\t\t\t\t\treturn lib.sort.seat(a.source||a.player,b.source||b.player);\n\t\t\t\t\t});\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t'step 5'\n\t\t\t\t\tvar dialog=['请选择要弃置的牌'];\n\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.isEnemyOf(player)&&current.countCards('e',function(card){\n\t\t\t\t\t\t\treturn get.color(card)==event.color;\n\t\t\t\t\t\t});\n\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\tdialog.push('<div class=\"text center\">'+get.translation(i)+'</div>');\n\t\t\t\t\t\tdialog.push(i.getCards('e',function(card){\n\t\t\t\t\t\t\treturn get.color(card)==event.color;\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton([1,2],true).set('createDialog',dialog).set('ai',function(button){\n\t\t\t\t\t\tvar owner=get.owner(button.link);\n\t\t\t\t\t\treturn get.value(button.link,owner)\n\t\t\t\t\t});\n\t\t\t\t\t'step 6'\n\t\t\t\t\tvar map={};\n\t\t\t\t\tfor(var i of result.links){\n\t\t\t\t\t\tif(get.color(i)!=event.color) continue;\n\t\t\t\t\t\tvar id=get.owner(i).playerid;\n\t\t\t\t\t\tif(!map[id]) map[id]=[];\n\t\t\t\t\t\tmap[id].push(i);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i in map){\n\t\t\t\t\t\t(_status.connectMode?lib.playerOL:game.playerMap)[i].discard(map[i],'notBySelf');\n\t\t\t\t\t}\n\t\t\t\t\tevent.next.sort(function(a,b){\n\t\t\t\t\t\treturn lib.sort.seat(a.player,b.player);\n\t\t\t\t\t});\n\t\t\t\t},}","info":"出牌阶段开始时，你可以弃置你或队友区域里的一张牌。若如此做，你选择一项：1.弃置对手装备区里至多两张与此牌颜色相同的牌；2.展示对手的共计两张手牌，然后获得其中与此牌颜色相同的牌。"},"nsfeixiong":{"name":"飞熊","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&player.canCompare(current);\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('nsfeixiong'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&player.canCompare(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar hs=player.getCards('h').sort(function(a,b){\n\t\t\t\t\t\t\treturn b.number-a.number;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar ts=target.getCards('h').sort(function(a,b){\n\t\t\t\t\t\t\treturn b.number-a.number;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(!hs.length||!ts.length) return 0;\n\t\t\t\t\t\tif(hs[0].number>ts[0].number) return get.damageEffect(target,player,player);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('nsfeixiong',target);\n\t\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!result.tie){\n\t\t\t\t\t\tvar targets=[player,target];\n\t\t\t\t\t\tif(result.bool) targets.reverse();\n\t\t\t\t\t\ttargets[0].damage(targets[1]);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以和一名其他角色拼点。赢的角色对没赢的角色造成1点伤害。"},"nscesuan":{"name":"策算","script":"{trigger: {player: \"damageBegin3\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tevent.lose=player.loseMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.lose&&event.lose.loseHp) player.draw();\n\t\t\t\t},ai: {filterDamage: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg&&arg.player){\n\t\t\t\t\t\t\tif(arg.player.hasSkillTag('jueqing',false,player)) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，当你受到伤害时，你防止此伤害并失去一点体力上限。若你因以此法失去体力上限导致体力值减少，则你摸一张牌。"},"nslulve":{"name":"掳掠","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('e')>0&&current.countCards('e')<=player.countCards('he');\n\t\t\t\t\t});\n\t\t\t\t},filterCard: function (){\n\t\t\t\t\tif(ui.selected.targets.length) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},position: \"he\",selectCard: [1,null],complexSelect: \"true\",complexCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('e')>0&&ui.selected.cards.length==target.countCards('e');\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('e')>0&&ui.selected.cards.length==current.countCards('e')&&get.damageEffect(current,player,player)>0;\n\t\t\t\t\t})) return 0;\n\t\t\t\t\tswitch(ui.selected.cards.length){\n\t\t\t\t\t\tcase 0:return 8-get.value(card);\n\t\t\t\t\t\tcase 1:return 6-get.value(card);\n\t\t\t\t\t\tcase 2:return 3-get.value(card);\n\t\t\t\t\t\tdefault:return 0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t},ai: {damage: \"true\",order: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},expose: \"0.3\",},}","info":"出牌阶段限一次，你可以弃置X张牌并选择一名装备区内有牌的其他角色，然后对其造成1点伤害（X为其装备区内的牌数）。"},"nsyangwu":{"name":"扬武","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {suit: \"heart\",},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>player.countCards('h');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar info=lib.skill.nsyangwu;\n\t\t\t\t\treturn player.countCards('h',info.filterCard)&&game.hasPlayer(function(target){\n\t\t\t\t\t\treturn info.filterTarget(null,player,target);\n\t\t\t\t\t});\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\tif(current!=player&&get.attitude(player,current)<0) num=Math.max(num,current.countCards('h')-player.countCards('h'));\n\t\t\t\t\t});\n\t\t\t\t\treturn Math.ceil((num+1)/2)*2+4-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=Math.ceil((target.countCards('h')-player.countCards('h'))/2);\n\t\t\t\t\tif(num) player.gainPlayerCard(target,true,'h',num,'visible');\n\t\t\t\t},ai: {order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn player.countCards('h')-target.countCards('h');\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张♥手牌并选择一名手牌数大于你的其他角色。你观看其手牌并获得其中的X张牌（X为其与你手牌数之差的一半且向上取整）。"},"nsyice":{"name":"遗策","script":"{trigger: {player: \"loseAfter\",global: \"cardsDiscardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.name=='lose'){\n\t\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar evt=event.getParent();\n\t\t\t\t\t\tif(evt.name!='orderingDiscard'||!evt.relatedEvent||evt.relatedEvent.player!=player||!['useCard','respond'].contains(evt.relatedEvent.name)) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn (event.cards2||event.cards).filterInD('d').length>0;\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar evt=trigger.getParent().relatedEvent;\n\t\t\t\t\tif((trigger.name=='discard'&&!trigger.delay)||evt&&evt.name=='respond') game.delayx();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=(trigger.cards2||trigger.cards).filterInD('d');\n\t\t\t\t\tplayer.$gain2(cards);\n\t\t\t\t\tif(cards.length==1) event._result={bool:true,links:cards};\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar dialog=['遗策：选择要放置的卡牌','<div class=\"text center\">（从左到右为从旧到新，后选择的后置入）</div>',cards];\n\t\t\t\t\t\tvar cards2=player.getStorage('nsyice');\n\t\t\t\t\t\tif(cards2.length){\n\t\t\t\t\t\t\tdialog.push('<div class=\"text center\">原有“策”</div>');\n\t\t\t\t\t\t\tdialog.push(cards2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseButton(dialog,true,cards.length).set('filterButton',function(button){\n\t\t\t\t\t\t\treturn _status.event.cards.contains(button.link);\n\t\t\t\t\t\t}).set('cards',cards);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.cardsGotoSpecial(result.links);\n\t\t\t\t\tplayer.markAuto('nsyice',result.links);\n\t\t\t\t\tgame.delayx();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar storage=player.storage.nsyice;\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tfor(var i=0;i<storage.length;i++){\n\t\t\t\t\t\tfor(var j=storage.length-1;j>i;j--){\n\t\t\t\t\t\t\tif(get.number(storage[i])==get.number(storage[j])){\n\t\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(bool) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(bool){\n\t\t\t\t\t\tevent.cards=storage.slice(0);\n\t\t\t\t\t\tevent.cards=storage.splice(i,j-i+1);\n\t\t\t\t\t\tplayer.unmarkAuto('nsyice',event.cards);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tvar cardsx=[];\n\t\t\t\t\tcardsx.push(cards.shift());\n\t\t\t\t\tcardsx.push(cards.pop());\n\t\t\t\t\tif(cards.length) player.gain(cards,'gain2');\n\t\t\t\t\tevent.cards=cardsx;\n\t\t\t\t\t'step 5'\n\t\t\t\t\tplayer.chooseButton(['将一张牌置于牌堆顶，将另一张牌置于牌堆底',cards],true);\n\t\t\t\t\t'step 6'\n\t\t\t\t\tui.cardPile.insertBefore(result.links[0].fix(),ui.cardPile.firstChild);\n\t\t\t\t\tcards.remove(result.links[0]);\n\t\t\t\t\tui.cardPile.appendChild(cards[0].fix());\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tif(_status.dying.length) event.finish();\n\t\t\t\t\t'step 7'\n\t\t\t\t\tplayer.chooseTarget('对一名角色造成1点伤害',true).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t});\n\t\t\t\t\t'step 8'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target);\n\t\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t\t}\n\t\t\t\t},marktext: \"策\",intro: {content: \"cards\",},}","info":"锁定技，当你使用/打出/弃置的牌进入弃牌堆后，你将这些牌以任意顺序置于你的武将牌上，称为“策”。若这些“策”中有点数相同的牌，则你获得这两张牌中的所有牌，将这两张牌置于牌堆两端。若场上没有处于濒死状态的角色，则你对一名角色造成1点伤害。"},"luanwu":{"name":"乱武","script":"{audio: \"2\",unique: \"true\",enable: \"phaseUse\",limited: \"true\",skillAnimation: \"epic\",animationColor: \"thunder\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},selectTarget: \"-1\",multitarget: \"true\",multiline: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('luanwu');\n\t\t\t\t\tevent.current=player.next;\n\t\t\t\t\tevent.currented=[];\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.currented.push(event.current);\n\t\t\t\t\tevent.current.animate('target');\n\t\t\t\t\tevent.current.chooseToUse('乱武：使用一张杀或流失一点体力',{name:'sha'},function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\tif(!player.canUse('sha',target)) return false;\n\t\t\t\t\t\tif(get.distance(player,target)<=1) return true;\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&get.distance(player,current)<get.distance(player,target);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool==false) event.current.loseHp();\n\t\t\t\t\tevent.current=event.current.next;\n\t\t\t\t\tif(event.current!=player&&!event.currented.contains(event.current)){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(lib.config.mode=='identity'&&game.zhu.isZhu&&player.identity=='fan'){\n\t\t\t\t\t\t\t\tif(game.zhu.hp==1&&game.zhu.countCards('h')<=2) return 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,players[i]);\n\t\t\t\t\t\t\t\tif(att>0) att=1;\n\t\t\t\t\t\t\t\tif(att<0) att=-1;\n\t\t\t\t\t\t\t\tif(players[i]!=player&&players[i].hp<=3){\n\t\t\t\t\t\t\t\t\tif(players[i].countCards('h')==0) num+=att/players[i].hp;\n\t\t\t\t\t\t\t\t\telse if(players[i].countCards('h')==1) num+=att/2/players[i].hp;\n\t\t\t\t\t\t\t\t\telse if(players[i].countCards('h')==2) num+=att/4/players[i].hp;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(players[i].hp==1) num+=att*1.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hp==1){\n\t\t\t\t\t\t\t\treturn -num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hp==2){\n\t\t\t\t\t\t\t\treturn -game.players.length/4-num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -game.players.length/3-num;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可令除你外的所有角色依次对与其距离最近的另一名角色使用一张【杀】，否则失去1点体力。"},"nsjianglie":{"name":"将烈","script":"{trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.target.countCards('h')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.target.showHandcards();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=trigger.target.getCards('h');\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tlist.add(get.color(cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length==1) event._result={control:list[0]};\n\t\t\t\t\telse{\n\t\t\t\t\t\tlist.sort();\n\t\t\t\t\t\ttrigger.target.chooseControl(list).set('prompt','选择弃置一种颜色的所有手牌').set('ai',function(){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(get.value(player.getCards('h',{color:'red'}))>=get.value(player.getCards('h',{color:'black'}))) return 'black';\n\t\t\t\t\t\t\treturn 'red';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttrigger.target.discard(trigger.target.getCards('h',{color:result.control}));\n\t\t\t\t},}","info":"当你使用【杀】指定目标后，你可以令其展示所有手牌，然后弃置其中一种颜色的牌。"},"yjxuepin":{"name":"血拼","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (event,player,target){\n\t\t\t\t\treturn player.inRange(target)&&target.countDiscardableCards(player,'he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) player.discardPlayerCard(target,2,'he',true);\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.cards.length==2&&get.type2(result.cards[0],result.cards[0].original=='h'?target:false)==get.type2(result.cards[1],result.cards[1].original=='h'?target:false)) player.recover();\n\t\t\t\t},ai: {order: \"4\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(player.hp==1) return -8;\n\t\t\t\t\t\t\tif(target.countCards('e')>1) return 0;\n\t\t\t\t\t\t\tif(player.hp>2||target.countCards('h')>1) return -0.5;\n\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(target.countDiscardableCards(player,'he')<2) return 0;\n\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择攻击范围内的一名角色并失去1点体力。你弃置其两张牌。若这两张牌类型相同，你回复1点体力。"},"minizhiheng":{"name":"制衡","script":"{audio: \"zhiheng\",trigger: {player: \"phaseUseEnd\",},direct: \"true\",filter: function (event){\n\t\t\t\t\treturn event.player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard('h',get.prompt('minizhiheng'),'弃置任意张手牌，若如此做，将手牌摸至四张',[1,player.countCards('h')]).set('ai',function(card){\n\t\t\t\t\t\tvar num=4-player.countCards('h');\n\t\t\t\t\t\tvar val=6.1+Math.max(0,num);\n\t\t\t\t\t\tvar cs=player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.value(card)>=val;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(cs>=4) return 0;\n\t\t\t\t\t\treturn val-get.value(card)\n\t\t\t\t\t}).logSkill='minizhiheng';\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool) player.drawTo(4);\n\t\t\t\t},}","info":"出牌阶段结束时，你可以弃置任意张手牌。若如此做，你将手牌摸至四张。"},"jiuyuan":{"name":"救援","script":"{audio: \"2\",unique: \"true\",trigger: {target: \"taoBegin\",},zhuSkill: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(!player.hasZhuSkill('jiuyuan')) return false;\n\t\t\t\t\tif(event.player.group!='wu') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.baseDamage++;\n\t\t\t\t},}","info":"主公技，锁定技，其他吴势力角色对你使用的【桃】的回复值+1。"},"minishendao":{"name":"神道","script":"{audio: \"rehuashen\",trigger: {player: \"judge\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar str='你的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，是否修改判定结果？';\n\t\t\t\t\tplayer.chooseControl('spade','heart','diamond','club','cancel2').set('prompt',str).set('ai',function(){\n\t\t\t\t\t\t//return '取消';\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar res1=trigger.judge(judging);\n\t\t\t\t\t\tvar list=lib.suit.slice(0);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0) return 0;\n\t\t\t\t\t\tvar getj=function(suit){\n\t\t\t\t\t\t\treturn trigger.judge({\n\t\t\t\t\t\t\t\tname:get.name(judging),\n\t\t\t\t\t\t\t\tnature:get.nature(judging),\n\t\t\t\t\t\t\t\tsuit:suit,\n\t\t\t\t\t\t\t\tnumber:get.number(judging),\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\t\treturn (getj(b)-getj(a))*get.sgn(attitude);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif((getj(list[0])-res1)*attitude>0) return list[0];\n\t\t\t\t\t\treturn 'cancel2';\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('minishendao');\n\t\t\t\t\t\t//player.line(trigger.player);\n\t\t\t\t\t\tplayer.popup(result.control+2);\n\t\t\t\t\t\tgame.log(player,'将判定结果改为了','#y'+get.translation(result.control+2));\n\t\t\t\t\t\ttrigger.fixedResult={\n\t\t\t\t\t\t\tsuit:result.control,\n\t\t\t\t\t\t\tcolor:get.color({suit:result.control}),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"0.3\",},},}","info":"你的判定牌生效前，你可以将判定结果改为任意花色。"},"minixinsheng":{"name":"新生","script":"{audio: \"rexinsheng\",trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.cards=get.cards(3);\n\t\t\t\t\tgame.cardsGotoOrdering(event.cards);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tgame.broadcastAll(function(player,id,cards){\n\t\t\t\t\t\tvar str;\n\t\t\t\t\t\tif(player==game.me&&!_status.auto){\n\t\t\t\t\t\t\tstr='新生：获取花色各不相同的牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr='新生';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar dialog=ui.create.dialog(str,cards);\n\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t},player,event.videoId,event.cards);\n\t\t\t\t\tevent.time=get.utc();\n\t\t\t\t\tgame.addVideo('showCards',player,['新生',get.cardsInfo(event.cards)]);\n\t\t\t\t\tgame.addVideo('delay',null,2);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar next=player.chooseButton([0,3],true);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tif(get.suit(ui.selected.buttons[i].link)==get.suit(button.link)) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.links){\n\t\t\t\t\t\tevent.cards2=result.links;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\tvar time=1000-(get.utc()-event.time);\n\t\t\t\t\tif(time>0){\n\t\t\t\t\t\tgame.delay(0,time);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tvar cards2=event.cards2;\n\t\t\t\t\tplayer.gain(cards2,'log','gain2');\n\t\t\t\t},}","info":"当你受到伤害后，你可以展示牌堆顶的三张牌，然后获得其中每种花色的牌各一张。"},"minitiaoxin":{"name":"挑衅","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",audio: \"tiaoxin\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countDiscardableCards(player,'h')>0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('minitiaoxin'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countDiscardableCards(player,'h')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.countCards('h')==1) att=get.sgn(att);\n\t\t\t\t\t\treturn -att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('minitiaoxin',target);\n\t\t\t\t\t\tplayer.discardPlayerCard(target,true,[1,2],'h');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.cards&&result.cards.length&&player.countCards('h')>0){\n\t\t\t\t\t\tfor(var i of result.cards){\n\t\t\t\t\t\t\tif(get.name(i,target)=='sha'){\n\t\t\t\t\t\t\t\tplayer.chooseToDiscard('h',true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以弃置一名其他角色的两张手牌。若你以此法弃置的牌中有【杀】，则你弃置一张手牌。"},"zhiji":{"name":"志继","script":"{skillAnimation: \"true\",animationColor: \"fire\",audio: \"2\",audioname: [\"re_jiangwei\"],unique: \"true\",juexingji: \"true\",derivation: \"reguanxing\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.zhiji) return false;\n\t\t\t\t\treturn player.countCards('h')==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('zhiji');\n\t\t\t\t\tplayer.chooseDrawRecover(2,true);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.storage.zhiji=true;\n\t\t\t\t\tif(player.hp>player.maxHp) player.hp=player.maxHp;\n\t\t\t\t\tplayer.update();\n\t\t\t\t\tplayer.addSkill('reguanxing');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你没有手牌，你须回复1点体力或摸两张牌，然后减1点体力上限，并获得技能〖观星〗。"},"minilijian":{"name":"离间","script":"{trigger: {player: \"useCard2\",},direct: \"true\",audio: \"lijian\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(!['sha','juedou'].contains(event.card.name)) return false;\n\t\t\t\t\tvar info=get.info(event.card);\n\t\t\t\t\tif(info.allowMultiple==false) return false;\n\t\t\t\t\tif(event.targets&&!info.multitarget){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.sex=='male'&&!event.targets.contains(current)&&lib.filter.targetEnabled2(event.card,player,current)&&lib.filter.targetInRange(event.card,player,current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar prompt2='为'+get.translation(trigger.card)+'增加一个目标'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('minilijian'),function(card,player,target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn target.sex=='male'&&!_status.event.targets.contains(target)&&lib.filter.targetEnabled2(_status.event.card,player,target)&&lib.filter.targetInRange(_status.event.card,player,target);\n\t\t\t\t\t}).set('prompt2',prompt2).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player);\n\t\t\t\t\t}).set('card',trigger.card).set('targets',trigger.targets);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.isMine()) game.delayx();\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets){\n\t\t\t\t\t\tplayer.logSkill('minilijian',event.targets);\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {player: function (card,player,target,current,isLink){\n\t\t\t\t\t\t\tif(!isLink&&(card.name=='sha'||card.name=='juedou')&&(!player.storage.counttrigger||!player.storage.counttrigger.minilijian)){\n\t\t\t\t\t\t\t\tif(player._minilijiantemp) return;\n\t\t\t\t\t\t\t\tplayer._minilijiantemp=true;\n\t\t\t\t\t\t\t\tif(get.effect(target,card,player,player)<=0){\n\t\t\t\t\t\t\t\t\tdelete player._minilijiantemp;\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=target&&current.sex=='male'&&\n\t\t\t\t\t\t\t\t\tplayer.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\tdelete player._minilijiantemp;\n\t\t\t\t\t\t\t\t\treturn [1,1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdelete player._minilijiantemp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"每回合限触发一次，当你使用【杀】或【决斗】指定目标后，你可以为此牌增加一个目标。"},"rebiyue":{"name":"闭月","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\tvar num=1;\n\t\t\t\t\tif(!player.countCards('h')){\n\t\t\t\t\t\tnum=2;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t},}","info":"结束阶段，你可以摸一张牌，若你没有手牌，则改为摸两张牌。"},"jueqing":{"name":"绝情","script":"{trigger: {source: \"damageBefore\",},forced: \"true\",audio: \"2\",check: function (){return false;},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\ttrigger.player.loseHp(trigger.num);\n\t\t\t\t},ai: {jueqing: \"true\",},}","info":"锁定技，你即将造成的伤害均视为失去体力。"},"minishangshi":{"name":"伤逝","script":"{audio: \"shangshi\",trigger: {player: [\"loseAfter\",\"changeHp\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<Math.max(1,player.getDamagedHp());\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.drawTo(Math.max(player.getDamagedHp(),1));\n\t\t\t\t},ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'&&Math.max(1,player.getDamagedHp())<player.countCards('h')){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"当你的手牌数小于X时，你可以将手牌摸至X张（X为你已损失的体力值且至少为1）"},"nskuishe":{"name":"窥舍","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.choosePlayerCard(target,'he',true).set('ai',get.buttonValue);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(target)+'的'+(get.position(card)=='h'&&!player.hasSkillTag('viewHandcard',null,target,true)?'手牌':get.translation(card))+'交给一名角色',true,function(target){\n\t\t\t\t\t\t\treturn target!=_status.event.getParent().target;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.du){\n\t\t\t\t\t\t\t\tif(target.hasSkillTag('nodu')) return 0;\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0.1;\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\treturn att+Math.max(0,5-target.countCards('h'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t}).set('du',event.card.name=='du');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target2=result.targets[0];\n\t\t\t\t\t\ttarget.line(target2,'green');\n\t\t\t\t\t\ttarget2.gain(target,card,'giveAuto','bySelf');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\ttarget.chooseToUse(function(card,player,event){\n\t\t\t\t\t\tif(get.name(card)!='sha') return false;\n\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t},'是否对'+get.translation(player)+'使用一张杀？').set('targetRequired',true).set('complexSelect',true).set('filterTarget',function(card,player,target){\n\t\t\t\t\t\tif(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;\n\t\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\n\t\t\t\t\t}).set('sourcex',player);\n\t\t\t\t},ai: {order: \"6\",expose: \"0.2\",result: {target: \"-1.5\",player: function (player,target){\n\t\t\t\t\t\t\tif(!target.canUse('sha',player)) return 0;\n\t\t\t\t\t\t\tif(target.countCards('h')==1) return 0.1;\n\t\t\t\t\t\t\tif(player.hasShan()) return -0.5;\n\t\t\t\t\t\t\tif(player.hp<=1) return -2;\n\t\t\t\t\t\t\tif(player.hp<=2) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择一名其他角色A的一张牌，并将此牌交给不为A的一名角色。然后A可以对你使用一张【杀】。"}},"card":{},"hero":{"jin_yanghuiyu":{"name":"晋羊徽瑜","attr":["female","jin",3,["huirong","ciwei","caiyuan"],["hiddenSkill","unseen"]]},"shibao":{"name":"石苞","attr":["male","jin",4,["shibao_skill"],["unseen"]]},"jin_zhangchunhua":{"name":"晋张春华","attr":["female","jin",3,["huishi","qingleng","xuanmu"],["hiddenSkill"]]},"jin_simayi":{"name":"晋司马懿","attr":["male","jin",3,["buchen","smyyingshi","xiongzhi","quanbian"],["hiddenSkill"]]},"jin_wangyuanji":{"name":"晋王元姬","attr":["female","jin",3,["shiren","yanxi"],["hiddenSkill"]]},"jin_simazhao":{"name":"晋司马昭","attr":["male","jin",3,["tuishi","choufa","zhaoran","chengwu"],["zhu","hiddenSkill"]]},"jin_xiahouhui":{"name":"晋夏侯徽","attr":["female","jin",3,["baoqie","jyishi","shiduo"],["hiddenSkill"]]},"jin_simashi":{"name":"晋司马师","attr":["male","jin","3/4",["taoyin","yimie","ruilve","tairan"],["hiddenSkill","zhu"]]},"zhanghuyuechen":{"name":"张虎乐綝","attr":["male","jin",4,["xijue"],[]]},"duyu":{"name":"杜预","attr":["male","jin",4,["sanchen","zhaotao"],[]]},"re_chunyuqiong":{"name":"淳于琼","attr":["male","qun",4,["recangchu","reliangying","reshishou"],[]]},"guozhao":{"name":"郭照","attr":["female","wei",3,["pianchong","zunwei"],[]]},"hanfu":{"name":"韩馥","attr":["male","qun",4,["hfjieying","weipo"],[]]},"re_quyi":{"name":"麴义","attr":["male","qun",4,["refuqi","jiaozi"],[]]},"dongxie":{"name":"董翓","attr":["female","qun","3/4",["juntun","jiaojie"],[]]},"re_xinxianying":{"name":"辛宪英","attr":["female","wei",3,["rezhongjian","recaishi"],[]]},"wangrong":{"name":"王荣","attr":["female","qun",3,["minsi","jijing","zhuide"],[]]},"ol_dingyuan":{"name":"丁原","attr":["male","qun",4,["cixiao","xianshuai"],[]]},"liubian":{"name":"刘辩","attr":["male","qun",3,["shiyuan","dushi","yuwei"],["zhu"]]},"xin_baosanniang":{"name":"鲍三娘","attr":["female","shu",3,["decadewuniang","decadexushen"],[]]},"re_hejin":{"name":"何进","attr":["male","qun",4,["spmouzhu"],[]]},"re_hansui":{"name":"韩遂","attr":["male","qun",4,["spniluan","spweiwu"],[]]},"liuhong":{"name":"刘宏","attr":["male","qun",4,["yujue","tuxing"],[]]},"zhujun":{"name":"朱儁","attr":["male","qun",4,["gongjian","kuimang"],[]]},"caoxing":{"name":"曹性","attr":["male","qun",4,["cxliushi","zhanwan"],[]]},"re_maliang":{"name":"马良","attr":["male","shu",3,["rexiemu","heli"],[]]},"ol_yujin":{"name":"OL于禁","attr":["male","wei",4,["rezhenjun"],[]]},"caobuxing":{"name":"曹不兴","attr":["male","wu",3,["moying","juanhui"],[]]},"re_sunluyu":{"name":"孙鲁育","attr":["female","wu",3,["remeibu","remumu"],[]]},"re_liuzan":{"name":"留赞","attr":["male","wu",4,["refenyin","liji"],[]]},"wenyang":{"name":"文鸯","attr":["male","wei",5,["xinlvli","choujue"],[]]},"wangshuang":{"name":"王双","attr":["male","wei",8,["spzhuilie"],[]]},"huaman":{"name":"花鬘","attr":["female","shu",3,["hmmanyi","mansi","souying","zhanyuan"],[]]},"re_panfeng":{"name":"潘凤","attr":["male","qun",4,["xinkuangfu"],[]]},"xingdaorong":{"name":"邢道荣","attr":["male","qun","4/6",["xuxie"],[]]},"lijue":{"name":"李傕","attr":["male","qun","4/6",["xinfu_langxi","xinfu_yisuan"],[]]},"zhangji":{"name":"张济","attr":["male","qun",4,["xinfu_lveming","xinfu_tunjun"],[]]},"fanchou":{"name":"樊稠","attr":["male","qun",4,["xinfu_xingluan"],[]]},"guosi":{"name":"郭汜","attr":["male","qun",4,["xinfu_tanbei","xinfu_sidao"],[]]},"lvkai":{"name":"吕凯","attr":["male","shu",3,["xinfu_tunan","xinfu_bijing"],[]]},"zhanggong":{"name":"张恭","attr":["male","wei",3,["xinfu_zhenxing","xinfu_qianxin"],[]]},"weiwenzhugezhi":{"name":"卫温诸葛直","attr":["male","wu",4,["xinfu_fuhai"],[]]},"beimihu":{"name":"卑弥呼","attr":["female","qun",3,["zongkui","guju","baijia"],[]]},"xurong":{"name":"徐荣","attr":["male","qun",4,["xinfu_xionghuo","xinfu_shajue"],[]]},"zhangqiying":{"name":"张琪瑛","attr":["female","qun",3,["xinfu_falu","xinfu_dianhua","xinfu_zhenyi"],[]]},"sp_liuqi":{"name":"刘琦","attr":["male","qun",3,["spwenji","sptunjiang"],[]]},"xf_tangzi":{"name":"唐咨","attr":["male","wei",4,["xinfu_xingzhao"],[]]},"xf_huangquan":{"name":"黄权","attr":["male","shu",3,["xinfu_dianhu","xinfu_jianji"],[]]},"xf_sufei":{"name":"苏飞","attr":["male","wu",4,["xinfu_lianpian"],[]]},"xushao":{"name":"许劭","attr":["male","qun",4,["pingjian"],[]]},"puyuan":{"name":"蒲元","attr":["male","shu",4,["pytianjiang","pyzhuren"],[]]},"xinpi":{"name":"辛毗","attr":["male","wei",3,["xpchijie","yinju"],[]]},"lisu":{"name":"李肃","attr":["male","qun",2,["lslixun","lskuizhu"],[]]},"zhangwen":{"name":"张温","attr":["male","wu",3,["songshu","sibian"],[]]},"guanlu":{"name":"管辂","attr":["male","wei",3,["tuiyan","busuan","mingjie"],[]]},"gexuan":{"name":"葛玄","attr":["male","wu",3,["gxlianhua","zhafu"],[]]},"mangyachang":{"name":"忙牙长","attr":["male","qun",4,["spjiedao"],[]]},"xugong":{"name":"许贡","attr":["male","wu",3,["biaozhao","yechou"],[]]},"zhangchangpu":{"name":"张昌蒲","attr":["female","wei",3,["yanjiao","xingshen"],[]]},"gaolan":{"name":"高览","attr":["male","qun",4,["xiying"],[]]},"sp_shenpei":{"name":"SP审配","attr":["male","qun",3,["gangzhi","beizhan"],[]]},"xunchen":{"name":"荀谌","attr":["male","qun",3,["fenglve","mouzhi"],[]]},"sp_zhanghe":{"name":"SP张郃","attr":["male","qun",4,["yuanlve"],[]]},"sp_xuyou":{"name":"SP许攸","attr":["male","qun",3,["spshicai","spfushi"],[]]},"chunyuqiong":{"name":"淳于琼","attr":["male","qun",5,["cangchu","sushou","liangying"],[]]},"lvkuanglvxiang":{"name":"吕旷吕翔","attr":["male","qun",4,["liehou","qigong"],[]]},"leitong":{"name":"雷铜","attr":["male","shu",4,["kuiji"],[]]},"wulan":{"name":"吴兰","attr":["male","shu",4,["wlcuorui"],[]]},"ns_lijue":{"name":"SP李傕","attr":["male","qun","4/6",["nsfeixiong","nscesuan"],[]]},"ns_zhangji":{"name":"SP张济","attr":["male","qun",4,["nslulve"],[]]},"ns_fanchou":{"name":"SP樊稠","attr":["male","qun",4,["nsyangwu"],[]]},"ns_jiaxu":{"name":"☆贾诩","attr":["male","qun",3,["nsyice","luanwu"],[]]},"ns_chendao":{"name":"SP陈到","attr":["male","shu",4,["nsjianglie"],[]]},"yj_caoang":{"name":"SP曹昂","attr":["male","wei",4,["yjxuepin"],[]]},"mini_sunquan":{"name":"SP孙权","attr":["male","wu",4,["minizhiheng","jiuyuan"],["zhu"]]},"mini_zuoci":{"name":"SP左慈","attr":["male","qun",3,["minishendao","minixinsheng"],[]]},"mini_jiangwei":{"name":"SP姜维","attr":["male","shu",4,["minitiaoxin","zhiji"],[]]},"mini_diaochan":{"name":"SP貂蝉","attr":["female","qun",3,["minilijian","rebiyue"],[]]},"mini_zhangchunhua":{"name":"SP张春华","attr":["female","wei",3,["jueqing","minishangshi"],[]]},"ns_caoanmin":{"name":"曹安民","attr":["male","wei",4,["nskuishe"],[]]}}},"diy":{"name":"DIY","skill":{"mubing":{"name":"募兵","script":"{audio: \"2\",audioname: [\"sp_key_yuri\"],trigger: {player: \"phaseUseBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=player.storage.mubing2?4:3;\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\tevent.cards=game.cardsGotoOrdering(get.cards(num)).cards;\n\t\t\t\t\tgame.log(player,'展示了',event.cards);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tgame.broadcastAll(function(player,id,cards){\n\t\t\t\t\t\tvar str=get.translation(player)+'发动了【募兵】';\n\t\t\t\t\t\tvar dialog=ui.create.dialog(str,cards);\n\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t},player,event.videoId,event.cards);\n\t\t\t\t\tgame.addVideo('showCards',player,[get.translation(player)+'发动了【募兵】',get.cardsInfo(event.cards)]);\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar numa=0;\n\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\treturn a.number-b.number;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i of cards){\n\t\t\t\t\t\tif(get.value(i,player)>0) numa+=get.number(i);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseToDiscard([1,Infinity],'h').set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar numa=_status.event.numa;\n\t\t\t\t\t\t//if(card.name!='tengjia'&&get.position(card)=='e'&&get.equipValue(card,player)<=0) return 14;\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i of ui.selected.cards){\n\t\t\t\t\t\t\tnum+=i.number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num>=numa) return 0;\n\t\t\t\t\t\tif(card.number+num>=numa) return 15-get.value(card);\n\t\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\t\tvar min=_status.event.min;\n\t\t\t\t\t\t\tif(card.number<min&&!player.countCards('h',function(xcard){\n\t\t\t\t\t\t\t\treturn xcard!=card&&card.number+xcard.number>min;\n\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\treturn card.number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Math.max(5-get.value(card),card.number);\n\t\t\t\t\t}).set('prompt',false).set('numa',numa).set('min',cards[0].number);\n\t\t\t\t\tvar func=function(id){\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\tif(dialog) dialog.content.firstChild.innerHTML='请选择要弃置的牌';\n\t\t\t\t\t};\n\t\t\t\t\tif(player==game.me) func(event.videoId);\n\t\t\t\t\telse if(player.isOnline()) player.send(func,event.videoId);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar numx=0;\n\t\t\t\t\tfor(var i of result.cards){\n\t\t\t\t\t\tnumx+=get.number(i);\n\t\t\t\t\t}\n\t\t\t\t\tevent.numx=numx;\n\t\t\t\t\tvar next=player.chooseButton([0,num]);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tvar num=0\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.buttons[i].link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (num+get.number(button.link)<=_status.event.maxNum);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('maxNum',event.numx);\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\n\t\t\t\t\t});\n\t\t\t\t\tvar func=function(id){\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\tif(dialog) dialog.content.firstChild.innerHTML='请选择要获得的牌';\n\t\t\t\t\t};\n\t\t\t\t\tif(player==game.me) func(event.videoId);\n\t\t\t\t\telse if(player.isOnline()) player.send(func,event.videoId);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(!result.bool) event.cards=[];\n\t\t\t\t\telse event.cards=result.links;\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tif(!cards.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards,'log','gain2');\n\t\t\t\t\tif(!player.storage.mubing2){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.given=[];\n\t\t\t\t\t'step 5'\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tcards=cards.filter(function(card){\n\t\t\t\t\t\treturn hs.contains(card);\n\t\t\t\t\t});\n\t\t\t\t\tif(cards.length&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&!event.given.contains(current);\n\t\t\t\t\t})) player.chooseCardTarget({\n\t\t\t\t\t\tprompt:'是否将获得的牌中的任意张交给其他角色？',\n\t\t\t\t\t\tselectCard:[1,cards.length],\n\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\treturn _status.event.cards.contains(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player&&!_status.event.given.contains(target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcards:cards,\n\t\t\t\t\t\tgiven:event.given,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\t\tevent.given.push(target);\n\t\t\t\t\t\tevent.cards.removeArray(cards);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\t\tevent.goto(5);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以展示牌堆顶的三张牌。你可弃置任意张手牌，并可获得任意张点数之和不大于你弃置的牌点数之和的牌。"},"ziqu":{"name":"资取","script":"{audio: \"2\",audioname: [\"sp_key_yuri\"],trigger: {source: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&!player.getStorage('ziqu').contains(event.player)&&\n\t\t\t\t\tevent.player.countCards('he')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar target=event.player;\n\t\t\t\t\tvar eff=get.damageEffect(target,player,player);\n\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\tif(eff>=0) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif(eff<=0) return true;\n\t\t\t\t\tif(target.hp==1) return false;\n\t\t\t\t\tif(event.num>1) return false;\n\t\t\t\t\tvar cards=target.getCards('he');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.number(cards[i])>10) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tif(!player.storage.ziqu) player.storage.ziqu=[];\n\t\t\t\t\tplayer.storage.ziqu.push(trigger.player);\n\t\t\t\t\tplayer.markSkill('ziqu');\n\t\t\t\t\ttrigger.player.chooseCard(true,'he',function(card,player){\n\t\t\t\t\t\treturn !player.countCards('he',function(cardx){\n\t\t\t\t\t\t\treturn cardx.number>card.number;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length) player.gain(result.cards,trigger.player,'giveAuto');\n\t\t\t\t},intro: {content: \"已对$发动过\",},}","info":"每名角色限一次，当你对有牌的其他角色造成伤害后，你可以防止此伤害。然后其将其点数最大的牌交给你。"},"diaoling":{"name":"调令","script":"{audio: \"2\",audioname: [\"sp_key_yuri\"],trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"metal\",filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getAllHistory('gain',function(evt){\n\t\t\t\t\t\tvar evt2=evt.getParent();\n\t\t\t\t\t\tif(evt2.name=='mubing'&&evt2.player==player) num+=evt.cards.filter(function(card){\n\t\t\t\t\t\t\treturn card.name=='sha'||get.subtype(card,false)=='equip1'||(get.type2(card,false)=='trick'&&get.tag({name:card.name},'damage'));\n\t\t\t\t\t\t}).length;\n\t\t\t\t\t});\n\t\t\t\t\treturn num>=6;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('diaoling');\n\t\t\t\t\tplayer.storage.mubing2=true;\n\t\t\t\t\tplayer.markSkill('mubing_rewrite');\n\t\t\t\t\tplayer.chooseDrawRecover(2,true);\n\t\t\t\t},derivation: \"mubing_rewrite\",}","info":"觉醒技，准备阶段，若你已因〖募兵〗获得了6张或更多的【杀】或武器牌或伤害锦囊牌，则你回复1点体力或摸两张牌，然后修改〖募兵〗。"},"lucia_duqu":{"name":"毒躯","script":"{mod: {cardSavable: function (card,player,target){\n\t\t\t\t\t\t\tif(player==target&&card.name=='du'&&!player.hasSkill('lucia_duqu_terra')) return true;\n\t\t\t\t\t\t},},trigger: {player: [\"damage\",\"loseHpBefore\",\"useCardBefore\"],source: \"damage\",},forced: \"true\",charlotte: \"true\",filter: function (event,player,onrewrite){\n\t\t\t\t\t\tif(onrewrite=='loseHpBefore'){\n\t\t\t\t\t\t\treturn event.type=='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(onrewrite=='useCardBefore'){\n\t\t\t\t\t\t\treturn event.card.name=='du'&&event.getParent().type=='dying';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn event.source!=undefined&&event.source!=event.player;\n\t\t\t\t\t},content: function (){\n\t\t\t\t\t\tvar onrewrite=event.triggername;\n\t\t\t\t\t\tif(onrewrite=='loseHpBefore'){\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t\tplayer.recover(trigger.num);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(onrewrite=='useCardBefore'){\n\t\t\t\t\t\t\tplayer.addTempSkill('lucia_duqu_terra');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar another=trigger[trigger.source==player?'player':'source'];\n\t\t\t\t\t\t\tplayer.line(another,{color:[220, 90, 139]});\n\t\t\t\t\t\t\tvar card=game.createCard2('du');\n\t\t\t\t\t\t\tplayer.$gain2(card);\n\t\t\t\t\t\t\tplayer.gain(card);\n\t\t\t\t\t\t\tanother.gain(game.createCard2('du'),'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t},ai: {usedu: \"true\",save: \"true\",skillTagFilter: function (player,tag,target){\n\t\t\t\t\t\t\treturn player==target&&player.hasUsableCard('du')&&!player.hasSkill('lucia_duqu_terra');\n\t\t\t\t\t\t},},subSkill: {terra: {sub: \"true\",},},}","info":"锁定技，①当你对其他角色造成伤害或受到其他角色的伤害时，你和对方各获得一张花色点数随机的【毒】。<br>②当你因【毒】失去体力时，你改为回复等量的体力。<br>③当你处于濒死状态时，你可以使用一张【毒】（每回合限一次）。"},"lucia_zhenren":{"name":"振刃","script":"{trigger: {global: \"phaseEnd\",},forced: \"true\",charlotte: \"true\",filter: function (event,player){\n\t\t\t\t\t\treturn player.countCards('e')>0;\n\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\t\tevent.count=es.length;\n\t\t\t\t\t\tplayer.discard(es);\n\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.countDiscardableCards(player,'ej')>0;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tplayer.chooseTarget('请选择一名角色，弃置其装备区或判定区内的一张牌。',true,function(card,player,target){\n\t\t\t\t\t\t\t\treturn target.countDiscardableCards(player,'ej')>0;\n\t\t\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\tif(target.countCards('j')&&att>0) return att*1.5;\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\tplayer.line(target,{color:[220, 90, 139]});\n\t\t\t\t\t\t\tplayer.discardPlayerCard(target,'ej',true);\n\t\t\t\t\t\t\tif(event.count) event.goto(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t},}","info":"锁定技，每个结束阶段，若你的装备区内有牌，则你弃置之。然后，你依次弃置场上的X张牌。（X为你以此法弃置的牌数）"},"nk_shekong":{"name":"设控","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t\t},filterCard: \"true\",selectCard: function (){\n\t\t\t\t\t\tif(ui.selected.targets.length) return [1,ui.selected.targets[0].countCards('he')];\n\t\t\t\t\t\treturn [1,Infinity];\n\t\t\t\t\t},filterTarget: function (event,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('he')>=Math.max(1,ui.selected.cards.length);\n\t\t\t\t\t},check: function (card){\n\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=_status.event.player&&get.attitude(_status.event.player,current)<0&&current.countCards('he')>ui.selected.cards.length;\n\t\t\t\t\t})) return 0;\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\tevent.cardsx=cards.slice(0);\n\t\t\t\t\t\tvar num=get.cnNumber(cards.length);\n\t\t\t\t\t\tvar trans=get.translation(player);\n\t\t\t\t\t\tvar prompt=('弃置'+num+'张牌，然后'+trans+'摸一张牌');\n\t\t\t\t\t\tif(cards.length>1) prompt+=('；或弃置一张牌，然后'+trans+'摸'+num+'张牌');\n\t\t\t\t\t\tvar next=target.chooseToDiscard(prompt,'he',true);\n\t\t\t\t\t\tnext.numx=cards.length;\n\t\t\t\t\t\tnext.selectCard=function(){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>1) return _status.event.numx;\n\t\t\t\t\t\t\treturn [1,_status.event.numx];\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnext.complexCard=true;\n\t\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\t\tif(ui.selected.cards.length==0||(_status.event.player.countCards('he',function(cardxq){\n\t\t\t\t\t\t\t\treturn get.value(cardxq)<7;\n\t\t\t\t\t\t\t})>=_status.event.numx)) return 7-get.value(card);\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t};\n\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tif(result.cards.length==cards.length) player.draw();\n\t\t\t\t\t\t\telse player.draw(cards.length);\n\t\t\t\t\t\t\tevent.cardsx.addArray(result.cards);\n\t\t\t\t\t\t\tfor(var i=0;i<event.cardsx.length;i++){\n\t\t\t\t\t\t\t\tif(get.position(event.cardsx[i])!='d') event.cardsx.splice(i--,1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\tif(event.cardsx.length){\n\t\t\t\t\t\t\tplayer.chooseButton(['请按顺序将卡牌置于牌堆顶（先选择的在上）',event.cardsx],true,event.cardsx.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t\t'step 3'\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tvar cardsx=result.links;\n\t\t\t\t\t\t\twhile(cardsx.length){\n\t\t\t\t\t\t\t\tvar card=cardsx.pop();\n\t\t\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},ai: {order: \"10\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以弃置任意张手牌并选择一名其他角色（不能超过该角色的牌数），然后令其选择一项：弃置一张牌并令你摸X张牌，或弃置X张牌并令你摸一张牌。然后，你将你与其弃置的且位于弃牌堆中的牌以任意顺序置于牌堆顶。"},"key_huanjie":{"name":"幻界","script":"{trigger: {player: [\"drawBegin\",\"judgeBegin\"],},forced: \"true\",silent: \"true\",popup: \"false\",lastDo: \"true\",filter: function (event){\n\t\t\t\t\t\treturn event.name=='draw'||!event.directresult;\n\t\t\t\t\t},content: function (){\n\t\t\t\t\t\tif(trigger.name=='draw'){\n\t\t\t\t\t\t\tif(trigger.bottom) trigger.bottom=false;\n\t\t\t\t\t\t\telse trigger.bottom=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse trigger.directresult=get.bottomCards()[0];\n\t\t\t\t\t},}","info":"锁定技，当你进行判定或摸牌时，你改为从牌堆的另一端获取相应的牌。"},"yuri_xingdong":{"name":"行动","script":"{audio: \"2\",group: \"yuri_xingdong_gain\",subSkill: {mark: {mark: \"true\",marktext: \"令\",intro: {content: \"跳过下个回合的判定阶段和摸牌阶段\",},sub: \"true\",},gain: {trigger: {player: \"phaseUseBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\t\treturn card.name=='sha'||get.type(card)=='trick';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card) player.gain(card,'gain2','log');\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\t},sub: \"true\",},},enable: \"phaseUse\",usable: \"1\",locked: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',lib.skill.yuri_xingdong.filterCard);\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn card.name=='sha'||get.type(card)=='trick';\n\t\t\t\t},check: function (card){return 1},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},discard: \"false\",lose: \"false\",delay: \"0\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.gain(cards,player,'give');\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.chooseUseTarget(cards[0],game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=player;\n\t\t\t\t\t}),'请使用得到的牌，或者跳过下回合的判定阶段和摸牌阶段');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool) game.asyncDraw([player,target]);\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.addTempSkill('yuri_xingdong_mark','phaseJudgeSkipped');\n\t\t\t\t\t\ttarget.skip('phaseJudge');\n\t\t\t\t\t\ttarget.skip('phaseDraw');\n\t\t\t\t\t\ttarget.addTempSkill('zhengjing3',{player:'phaseAfter'});\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {order: \"12\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\tif(target.hasSkill('pingkou')) return 1;\n\t\t\t\t\t\t\tif(!card) return 0;\n\t\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\t\tif(info.selectTarget==-1){\n\t\t\t\t\t\t\t\tvar eff=0;\n\t\t\t\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\tif(current!=player&&target.canUse(card,current)) eff+=get.effect(current,card,target,target);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(eff>0||get.value(card)<3) return eff;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&target.canUse(card,current)&&get.effect(current,card,target,target)>0\n\t\t\t\t\t\t\t})) return 1.5;\n\t\t\t\t\t\t\telse if(get.value(card)<3) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"锁定技，出牌阶段开始时，你获得一张【杀】或普通锦囊牌。出牌阶段限一次，你可以将一张【杀】或普通锦囊牌交给一名其他角色，然后该角色选择一项：对除你以外的角色使用此牌并在此牌结算完成后和你各摸一张牌；或跳过下回合的判定阶段和摸牌阶段。"},"yuri_wangxi":{"name":"忘隙","script":"{trigger: {global: \"dieAfter\",},direct: \"true\",limited: \"true\",mark: \"false\",init: function (player){\n\t\t\t\t\tif(player.hasZhuSkill('yuri_wangxi')){\n\t\t\t\t\t\tplayer.markSkill('yuri_wangxi');\n\t\t\t\t\t\tplayer.storage.yuri_wangxi=false;\n\t\t\t\t\t}\n\t\t\t\t},zhuSkill: \"true\",unique: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",filter: function (event,player){\n\t\t\t\t\tif(get.mode()!='identity') return false;\n\t\t\t\t\tif(!player.hasZhuSkill('yuri_wangxi')) return false;\n\t\t\t\t\tif(event.player.isAlive()) return false;\n\t\t\t\t\tif(event.player.identity=='mingzhong') return false;\n\t\t\t\t\tvar evt=event.getParent('yuri_xingdong');\n\t\t\t\t\treturn evt&&evt.name=='yuri_xingdong'&&evt.player==player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.player.chooseBool('是否发动'+get.translation(player)+'的【忘隙】？').forceDie=true;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yuri_wangxi',trigger.player);\n\t\t\t\t\t\tplayer.awakenSkill('yuri_wangxi');\n\t\t\t\t\t\tvar identity='zhong';\n\t\t\t\t\t\tif(_status.mode=='purple'){\n\t\t\t\t\t\t\tif(['rNei','bNei'].contains(player.identity)) identity=player.identity;\n\t\t\t\t\t\t\telse if(['rZhu','rZhong','bNei'].contains(player.identity)) identity='rZhong';\n\t\t\t\t\t\t\telse identity='bZhong';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.broadcastAll(function(source,identity){\n\t\t\t\t\t\t\tif(source.node.dieidentity){\n\t\t\t\t\t\t\t\tsource.node.dieidentity.innerHTML=get.translation(identity+2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsource.revive(2,false);\n\t\t\t\t\t\t\tsource.identity=identity;\n\t\t\t\t\t\t\tsource.setIdentity();\n\t\t\t\t\t\t},trigger.player,identity);\n\t\t\t\t\t\ttrigger.player.changeGroup(player.group);\n\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\tvar evt=trigger.getParent('damage');\n\t\t\t\t\t\tif(evt.untrigger) evt.untrigger(false,trigger.player);\n\t\t\t\t\t\tgame.addVideo('setIdentity',trigger.player,'zhong');\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"limited\",},}","info":"主公技，限定技，当有角色因你发动的【行动】而死亡后，若其身份不为【明忠】，则其可以将身份改为忠臣并重新加入游戏，然后将势力改为与你相同，将体力值回复至2点并摸一张牌。"},"haruko_haofang":{"name":"豪放","script":"{mod: {cardname: function (card,player,name){\n\t\t\t\t\t\tif(lib.card[card.name].type=='delay') return 'wuzhong';\n\t\t\t\t\t},},trigger: {player: \"drawBefore\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.getParent().name=='wuzhong';\n\t\t\t\t},content: function (){trigger.num+=2},}","info":"锁定技，你的延时锦囊牌视为【无中生有】。当你因执行【无中生有】的效果而摸牌时，你令摸牌数+2。"},"haruko_zhuishi":{"name":"追逝","script":"{trigger: {global: \"phaseJudgeBegin\",},filter: function (misuzu){\n\t\t\t\t\treturn misuzu.player.countCards('j')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>1;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.gain(trigger.player.getCards('j'),trigger.player,'give');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.hp>1) player.loseHp();\n\t\t\t\t},}","info":"一名角色的判定阶段开始时，若其判定区内有牌，则你可以获得其判定区内的所有牌。若你的体力值大于1，你失去1点体力。"},"umi_chaofan":{"name":"炒饭","script":"{enable: \"phaseUse\",usable: \"1\",selectCard: \"2\",complexCard: \"true\",filter: function (summer,umi){\n\t\t\t\t\treturn umi.countCards('h')>1;\n\t\t\t\t},check: function (ingredient){\n\t\t\t\t\treturn 7-get.value(ingredient);\n\t\t\t\t},filterCard: function (ingredient){\n\t\t\t\t\tif(ui.selected.cards.length) return get.suit(ingredient)!=get.suit(ui.selected.cards[0]);\n\t\t\t\t\treturn true;\n\t\t\t\t},line: {color: [251,193,217],},filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.hp>2) target.recover();\n\t\t\t\t\telse if(player.hp==2) target.draw(2);\n\t\t\t\t\telse target.damage('fire','nosource');\n\t\t\t\t},ai: {order: \"2\",result: {target: function (umi,takahara){\n\t\t\t\t\t\t\tif(umi.hp>2&&takahara.isDamaged()) return 2.2;\n\t\t\t\t\t\t\tif(umi.hp==2&&!takahara.hasSkillTag('nogain')) return 2;\n\t\t\t\t\t\t\tif(umi.hp<2) return get.damageEffect(takahara,umi,umi,'fire');\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置两张花色不同的手牌并选择一名其他角色。你摸一张牌，若你的体力值：大于2，目标角色回复1点体力；等于2，目标角色摸两张牌；小于2，目标角色受到1点无来源且对应渠道为这两张牌的火焰伤害。"},"umi_lunhui":{"name":"轮回","script":"{trigger: {global: \"phaseAfter\",},filter: function (summer,umi){\n\t\t\t\t\treturn summer.player!=umi&&umi.countCards('h')<umi.hp;\n\t\t\t\t},line: {color: [251,193,217],},logTarget: \"player\",charlotte: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\tplayer.storage.umi_shiroha=trigger.player;\n\t\t\t\t\tplayer.addTempSkill('umi_shiroha');\n\t\t\t\t},}","info":"一名其他角色的回合结束时，若你的手牌数小于体力值，则你可以失去1点体力。若如此做，你摸两张牌并进行一个额外回合，且你于此回合内计算与此角色的距离视为1。"},"umi_qihuan":{"name":"七幻","script":"{enable: \"chooseToUse\",filter: function (summer,umi){\n\t\t\t\t\treturn summer.type=='dying'&&umi.isDying();\n\t\t\t\t},limited: \"true\",skillAnimation: \"true\",charlotte: \"true\",animationColor: \"key\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.reinit('key_umi','key_umi2');\n\t\t\t\t\tplayer.recover(game.countGroup()||1);\n\t\t\t\t\tif(!game.dead.length) event.finish();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar chara=[];\n\t\t\t\t\tvar skills=[];\n\t\t\t\t\tfor(var i=0;i<game.dead.length;i++){\n\t\t\t\t\t\tvar name=game.dead[i].name;\n\t\t\t\t\t\tvar name2=game.dead[i].name2;\n\t\t\t\t\t\tvar skill=[];\n\t\t\t\t\t\tif(name&&lib.character[name]) skill.addArray(lib.character[name][3]);\n\t\t\t\t\t\tif(name2&&lib.character[name2]) skill.addArray(lib.character[name2][3]);\n\t\t\t\t\t\tif(skill.length){\n\t\t\t\t\t\t\tchara.push(game.dead[i]);\n\t\t\t\t\t\t\tskills.push(skill);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!chara.length) event.finish();\n\t\t\t\t\tevent.chara=chara;\n\t\t\t\t\tevent.skills=skills;\n\t\t\t\t\tevent.chosen=[];\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar next=player.chooseTarget('是否获得一名已死亡角色的一个技能？');\n\t\t\t\t\tnext.set('chara',event.chara);\n\t\t\t\t\tnext.set('skills',event.skills);\n\t\t\t\t\tnext.set('chosen',event.chosen);\n\t\t\t\t\tnext.set('filterTarget',function(card,player,target){\n\t\t\t\t\t\tif(target.isAlive()) return false;\n\t\t\t\t\t\tvar evt=_status.event;\n\t\t\t\t\t\tif(!evt.chosen.length) return true;\n\t\t\t\t\t\tvar skills=evt.skills[evt.chara.indexOf(target)];\n\t\t\t\t\t\tif(skills.length==1&&skills[0]==evt.chosen[0]) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('deadTarget',true);\n\t\t\t\t\tnext.set('ai',function(){return Math.random()});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(!result.bool) event.finish();\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.temp=result.targets[0];\n\t\t\t\t\t\tvar list=event.skills[event.chara.indexOf(result.targets[0])];\n\t\t\t\t\t\tresult.targets[0].line(player,{color:[251, 193, 217]})\n\t\t\t\t\t\tlist.removeArray(event.chosen);\n\t\t\t\t\t\tplayer.chooseControl(list).set('prompt','选择获得一个技能');\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tplayer.addSkill(result.control,get.groupnature(event.temp.group)||'key');\n\t\t\t\t\tplayer.addSkill(result.control);\n\t\t\t\t\tvar info=get.info(result.control);\n\t\t\t\t\tif(info.zhuSkill){\n\t\t\t\t\t\tif(!player.storage.zhuSkill_umi_qihuan) player.storage.zhuSkill_umi_qihuan=[];\n\t\t\t\t\t\tplayer.storage.zhuSkill_umi_qihuan.push(result.control);\n\t\t\t\t\t}\n\t\t\t\t\tevent.chosen.push(result.control);\n\t\t\t\t\tif(event.chosen.length<2) event.goto(2);\n\t\t\t\t},ai: {order: \"10\",save: \"true\",skillTagFilter: function (player,tag,target){\n\t\t\t\t\t\treturn player==target;\n\t\t\t\t\t},result: {player: \"1\",},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，当你处于濒死状态时，你可以移去此武将牌。若如此做，你回复X点体力（X为场上势力数）。然后，你可获得场上已死亡角色武将牌上的至多两个技能。"},"xiandeng":{"name":"先登","script":"{mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha') return num+1;\n\t\t\t\t\t},targetInRange: function (card,player){\n\t\t\t\t\t\tif(card.name=='sha'&&player.countUsed('sha',true)==0) return true;\n\t\t\t\t\t},},}","info":"锁定技，出牌阶段，你使用的第一张【杀】不计入次数且无距离限制。"},"shulv":{"name":"熟虑","script":"{inherit: \"zhiheng\",prompt: \"弃置一张牌并摸一张牌\",selectCard: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>player.hp;\n\t\t\t\t},audio: \"2\",audioname: [\"gz_jun_sunquan\"],enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(cards.length);\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},threaten: \"1.5\",},}","info":"出牌阶段限一次，若你的手牌数大于体力值，则你可以弃置一张牌并摸一张牌。"},"xisheng":{"name":"牺牲","script":"{enable: \"chooseToUse\",usable: \"1\",viewAs: {name: \"tao\",},viewAsFilter: function (player){\n\t\t\t\t\treturn player!=_status.currentPhase&&player.countCards('he')>1;\n\t\t\t\t},selectCard: \"2\",filterCard: \"true\",position: \"he\",ai: {skillTagFilter: function (){\n\t\t\t\t\t\treturn lib.skill.xisheng.viewAsFilter.apply(this,arguments)\n\t\t\t\t\t},basic: {order: function (card,player){\n\t\t\t\t\t\t\tif(player.hasSkillTag('pretao')) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},useful: [8,6.5,5,4],value: [8,6.5,5,4],},result: {target: \"2\",target_use: function (player,target){\n\t\t\t\t\t\t\t// if(player==target&&player.hp<=0) return 2;\n\t\t\t\t\t\t\tif(player.hasSkillTag('nokeep',true,null,true)) return 2;\n\t\t\t\t\t\t\tvar nd=player.needsToDiscard();\n\t\t\t\t\t\t\tvar keep=false;\n\t\t\t\t\t\t\tif(nd<=0){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nd==1&&target.hp>=2&&target.countCards('h','tao')<=1){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\t\t\tif(target.hp>=2&&keep&&target.hasFriend()){\n\t\t\t\t\t\t\t\tif(target.hp>2||nd==0) return 0;\n\t\t\t\t\t\t\t\tif(target.hp==2){\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(target!=current&&get.attitude(target,current)>=3){\n\t\t\t\t\t\t\t\t\t\t\tif(current.hp<=1) return true;\n\t\t\t\t\t\t\t\t\t\t\tif((mode=='identity'||mode=='versus'||mode=='chess')&&current.identity=='zhu'&&current.hp<=2) return true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<0&&target!=player&&target.identity!='zhu') return 0;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att<3&&att>=0&&player!=target) return 0;\n\t\t\t\t\t\t\tvar tri=_status.event.getTrigger();\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='fan'&&target.identity=='fan'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='fan'&&tri.source!=target){\n\t\t\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(current.identity=='fan'){\n\t\t\t\t\t\t\t\t\t\t\treturn current.countCards('h','tao');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif(num>1&&player==target) return 2;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='zhu'&&target.identity=='nei'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='zhong'){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='stone'&&target.isMin()&&\n\t\t\t\t\t\t\tplayer!=target&&tri&&tri.name=='dying'&&player.side==target.side&&\n\t\t\t\t\t\t\ttri.source!=target.getEnemy()){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},},tag: {recover: \"1\",save: \"1\",},},}","info":"每名其他角色的回合限一次，你可以将两张牌当做【桃】使用。"},"komari_tiankou":{"name":"甜口","script":"{trigger: {player: \"useCard2\",target: \"useCardToTarget\",},forced: \"true\",filter: function (event,player,name){\n\t\t\t\t\tif(name=='useCardToTarget'&&player==event.player) return false;\n\t\t\t\t\tif(get.color(event.card)!='red') return false;\n\t\t\t\t\tif(get.tag(event.card,'damage')) return false;\n\t\t\t\t\treturn ['basic','trick'].contains(get.type(event.card));\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar info=get.info(trigger.card);\n\t\t\t\t\tvar bool=true;\n\t\t\t\t\tif(info.multitarget||info.allowMultiple===false) bool=false;\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn !trigger.targets.contains(current)&&lib.filter.targetEnabled2(trigger.card,trigger.player,current);\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif(!list.length) bool=false;\n\t\t\t\t\t}\n\t\t\t\t\tif(bool) player.chooseTarget('甜口：为'+get.translation(trigger.card)+'增加一个额外目标，或点【取消】摸一张牌。',function(candy,komari,rin){\n\t\t\t\t\t\treturn _status.event.rin_chan.contains(rin);\n\t\t\t\t\t}).set('rin_chan',list).set('ai',function(target){\n\t\t\t\t\t\tvar evt=_status.event;\n\t\t\t\t\t\treturn get.effect(target,evt.candy,evt.source,evt.player);\n\t\t\t\t\t}).set('candy',trigger.card).set('',trigger.player);\n\t\t\t\t\telse event._result={bool:false};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar rin=result.targets[0];\n\t\t\t\t\t\ttrigger.targets.push(rin);\n\t\t\t\t\t\tplayer.line(rin,{color:[255, 224,172]});\n\t\t\t\t\t}\n\t\t\t\t\telse player.draw();\n\t\t\t\t},}","info":"锁定技，当你使用红色的非伤害性基本牌/锦囊牌选择目标时，或成为其他角色使用的这些牌的目标时，你选择一项：1.摸一张牌；2.为此牌增加一个目标"},"komari_xueshang":{"name":"血殇","script":"{trigger: {global: \"die\",},forced: \"true\",skillAnimation: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp>0;\n\t\t\t\t},animationColor: \"metal\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addSkill('riki_xueshang');\n\t\t\t\t\tvar map={};\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<=player.hp;i++){\n\t\t\t\t\t\tvar cn=get.cnNumber(i,true);\n\t\t\t\t\t\tmap[cn]=i;\n\t\t\t\t\t\tlist.push(cn);\n\t\t\t\t\t}\n\t\t\t\t\tevent.map=map;\n\t\t\t\t\tplayer.chooseControl(list,function(){\n\t\t\t\t\t\treturn '一';\n\t\t\t\t\t}).set('prompt','血殇：请选择自己受到的伤害的点数');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=event.map[result.control]||1;\n\t\t\t\t\tevent.num=num>1?2:1;\n\t\t\t\t\tevent.list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=player;\n\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\tplayer.damage(num);\n\t\t\t\t\tplayer.line(event.list,{color:[255, 224,172]});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!player.hasSkill(event.name)) return;\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.list.shift().damage(num);\n\t\t\t\t\t\tif(event.list.length) event.redo();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，蓄力技，当有角色死亡时，你对自己造成<span class=yellowtext>1</span>点伤害，然后对所有其他角色依次造成<span class=firetext>1</span>点伤害。当有角色因此法进入濒死状态时，你加1点体力上限并回复1点体力，然后失去此技能并终止此技能的所有后续结算。"},"yukine_wenzhou":{"name":"问咒","script":"{trigger: {global: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.forceDie=true;\n\t\t\t\t\tvar ask=trigger.player.chooseCard('he',get.prompt('yukine_wenzhou'));\n\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\task.set('prompt2','选择一张牌，然后从牌堆中获得一张与此牌类型相同的牌。本回合内使用与此牌类型相同的牌时不可被其他角色响应。');\n\t\t\t\t\t}\n\t\t\t\t\telse ask.set('prompt2','将一张牌交给'+get.translation(player)+'然后其可以选择：交给你一张牌；或令你从牌堆中获得一张与此牌类型相同的牌，且你本回合内使用与此牌类型相同的牌时不可被响应。');\n\t\t\t\t\task.set('ai',function(card){\n\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.getParent().player)>0) return 10-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yukine_wenzhou',trigger.player);\n\t\t\t\t\t\tevent.type=get.type(result.cards[0],'trick');\n\t\t\t\t\t\tif(trigger.player!=player) trigger.player.give(result.cards,player,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(player==trigger.player||player.countCards('he')==0){\n\t\t\t\t\t\tevent._result={index:1};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseControl().set('choiceList',[\n\t\t\t\t\t\t\t'将一张牌交给'+get.translation(trigger.player),\n\t\t\t\t\t\t\t'令'+get.translation(trigger.player)+'从牌堆中获得一张'+get.translation(event.type)+'牌，且其本回合内使用与此牌名称相同的牌时不可被响应',\n\t\t\t\t\t\t]).set('forceDie',true).set('ai',function(){\n\t\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.getTrigger().player)>0) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tevent.index=result.index;\n\t\t\t\t\tif(result.index==1){\n\t\t\t\t\t\tvar magic=get.cardPile2(function(card){\n\t\t\t\t\t\t\treturn get.type(card,'trick')==event.type;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(magic){\n\t\t\t\t\t\t\ttrigger.player.addTempSkill('yukine_magic','phaseUseEnd');\n\t\t\t\t\t\t\ttrigger.player.storage.yukine_magic.add(magic.name);\n\t\t\t\t\t\t\ttrigger.player.gain(magic,'draw');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse player.chooseCard('he',true,'选择要交给'+get.translation(trigger.player)+'的牌').set('ai',function(card){\n\t\t\t\t\t\treturn -get.value(card,_status.event.getTrigger().player);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(event.index==1) game.updateRoundNumber();\n\t\t\t\t\telse if(result.bool) player.give(result.cards,trigger.player,'giveAuto');\n\t\t\t\t},}","info":"一名角色的出牌阶段开始时，其可以交给你一张牌。若如此做，你选择一项：交给其一张牌，或令其从牌堆中获得一张与此牌类型相同的牌，且其于此阶段内使用与此牌牌名相同的牌时无法被响应。"},"yusa_yanyi":{"name":"演艺","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn get.distance(player,target)<=player.hp;\n\t\t\t\t},selectTarget: function (){\n\t\t\t\t\treturn [1,Math.max(_status.event.player.getAttackRange())];\n\t\t\t\t},line: \"thunder\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(target.isHealthy()){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar name=get.translation(player);\n\t\t\t\t\t\ttarget.chooseControl().set('choiceList',[\n\t\t\t\t\t\t\t'令'+name+'摸一张牌',\n\t\t\t\t\t\t\t'回复1点体力，然后交给'+name+'一张牌',\n\t\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(target!=player&&target.countCards('he')>0){\n\t\t\t\t\t\ttarget.chooseCard('交给'+get.translation(player)+'一张牌','he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\ttarget.give(result.cards,player,'giveAuto');\n\t\t\t\t},ai: {order: \"10\",result: {player: function (player,target){\n\t\t\t\t\t\t\treturn target.isHealthy()?1:0;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(target.isHealthy()) return 0;\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,target);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以指定至多X名与你距离不大于你的体力值的角色。这些角色选择一项：①令你摸一张牌。②回复1点体力，然后交给你一张牌。（X为你的攻击范围且至少为1）"},"yusa_misa":{"name":"通灵","script":"{charlotte: \"true\",trigger: {player: \"useSkillAfter\",},filter: function (event,player){\n\t\t\t\t\treturn event.skill=='yusa_yanyi'&&!player.storage.dualside_over&&Array.isArray(player.storage.dualside);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t},}","info":"当你发动的〖演艺〗结算完成之后，你可以将武将牌翻面。"},"misa_yehuo":{"name":"业火","script":"{charlotte: \"true\",trigger: {global: \"phaseDrawBegin1\",},direct: \"true\",locked: \"true\",line: {color: [236,137,52],},filter: function (event,player){\n\t\t\t\t\tvar target=event.player;\n\t\t\t\t\treturn player.inRange(target)&&player.countCards('he')>=get.distance(player,target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.distance(player,trigger.player)||1,get.prompt2('misa_yehuo',trigger.player));\n\t\t\t\t\tnext.set('logSkill',['misa_yehuo',trigger.player,'fire']);\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tvar val=_status.event.val;\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\tval-=get.value(ui.selected.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn val-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('val',-2*get.attitude(player,trigger.player))\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.bool=true;\n\t\t\t\t\t\tif(trigger.numFixed) event._result={index:0};\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar name=get.translation(trigger.player);\n\t\t\t\t\t\t\tplayer.chooseControl().set('choiceList',[\n\t\t\t\t\t\t\t\t'对'+name+'造成一点火属性伤害',\n\t\t\t\t\t\t\t\t'令'+name+'此出牌阶段的额定摸牌数改为0'\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.index==0) trigger.player.damage('fire');\n\t\t\t\t\telse trigger.changeToZero();\n\t\t\t\t},ai: {fireAttack: \"true\",},}","info":"一名角色的摸牌阶段开始时，若其在你的攻击范围内，你可以弃置X张牌并选择一项：①对其造成1点火属性伤害。②令其于此摸牌阶段放弃摸牌。（X为你与其的的距离）"},"misa_yusa":{"name":"归魂","script":"{charlotte: \"true\",trigger: {player: \"misa_yehuoAfter\",},filter: function (event,player){\n\t\t\t\t\treturn event.bool===true&&!player.storage.dualside_over&&Array.isArray(player.storage.dualside);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t},}","info":"当你发动的〖业火〗结算完成后，你可以将武将牌翻面。"},"masato_baoquan":{"name":"暴拳","script":"{trigger: {source: \"damageBefore\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControl('防止伤害','增加伤害').set('prompt','暴拳：防止即将对'+get.translation(trigger.player)+'造成的伤害，或失去1点体力上限并令此伤害+2').set('choice',get.attitude(player,trigger.player)>=0?0:1).set('ai',function(){return _status.event.choice});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='增加伤害'){\n\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\ttrigger.num+=2;\n\t\t\t\t\t}\n\t\t\t\t\telse trigger.cancel();\n\t\t\t\t},ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(target&&get.attitude(player,target)>0&&get.tag(card,'damage')) return 'zeroplayertarget';\n\t\t\t\t\t\t},},},}","info":"锁定技，当你即将造成伤害时，你选择一项：1.令此伤害+2并减1点体力上限。2.防止此伤害。"},"iwasawa_yinhang":{"name":"引吭","script":"{trigger: {player: \"changeHp\",},locked: \"true\",direct: \"true\",line: {color: [235,96,138],},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=Math.abs(trigger.num);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.chooseTarget([1,2],get.prompt('iwasawa_yinhang'),'令至多两名角色各摸一张牌').set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar targets=result.targets;\n\t\t\t\t\t\ttargets.sortBySeat();\n\t\t\t\t\t\tplayer.logSkill('iwasawa_yinhang',targets,lib.skill.iwasawa_yinhang.line);\n\t\t\t\t\t\tgame.asyncDraw(targets);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tif(event.count>0) event.goto(1);\n\t\t\t\t},}","info":"锁定技，当你的体力值变化1点时，你可以令至多两名角色摸一张牌。"},"iwasawa_mysong":{"name":"My Song","script":"{trigger: {player: [\"phaseBeginStart\",\"phaseAfter\",\"dyingBefore\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.name=='dying'||player.hp<1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.name=='dying') trigger.cancel();\n\t\t\t\t\telse if(event.triggername=='phaseBeginStart') player.addTempSkill('iwasawa_refenyin');\n\t\t\t\t\telse player.die();\n\t\t\t\t},nobracket: \"true\",derivation: \"iwasawa_refenyin\",}","info":"锁定技，当你即将进行濒死结算时，取消之。回合开始时，若你的体力值小于1，则你获得技能〖奋音〗直到回合结束。回合结束时，若你的体力值小于1，你死亡。"},"kengo_weishang":{"name":"伪伤","script":"{locked: \"false\",mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha'&&player.isDisabled(1)) return num+1;\n\t\t\t\t\t},globalFrom: function (from,to,distance){\n\t\t\t\t\t\tif(from.isDisabled(4)) return distance-1;\n\t\t\t\t\t},globalTo: function (from,to,distance){\n\t\t\t\t\t\tif(to.isDisabled(3)) return distance+1;\n\t\t\t\t\t},},enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tvar list=['equip1','equip2','equip3','equip4','equip5'];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(!player.isDisabled(list[i])&&(!player.storage.kengo_guidui2||!player.storage.kengo_guidui2.contains(list[i]))) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=['equip1','equip2','equip3','equip4','equip5'];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(player.isDisabled(list[i])||player.storage.kengo_guidui2&&player.storage.kengo_guidui2.contains(list[i])) list.splice(i--,1);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl(list).set('prompt','请选择废除一个装备栏').ai=function(){\n\t\t\t\t\t\tif(list.contains('equip1')&&player.isEmpty('equip1')&&player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn card.name=='sha'&&player.getUseValue(card)>0\n\t\t\t\t\t\t})) return 'equip1';\n\t\t\t\t\t\tif(list.contains('equip3')&&player.isEmpty('equip3')) return 'equip3';\n\t\t\t\t\t\tif(list.contains('equip4')&&player.isEmpty('equip4')) return 'equip4';\n\t\t\t\t\t\tif(list.contains('equip5')&&player.isEmpty('equip5')) return 'equip5';\n\t\t\t\t\t\tif(list.contains('equip2')&&player.isEmpty('equip2')) return 'equip2';\n\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.disableEquip(result.control);\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},group: [\"kengo_weishang_sha\",\"kengo_weishang_shan\"],ai: {order: \"10\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以废除一个装备栏并摸两张牌。若你的武器栏已废除，则你使用【杀】的次数上限+1，且当你使用【杀】指定目标后，目标角色弃置一张牌；若你的防具栏已废除，则你可以将一张牌当做【闪】使用或打出；若你的攻击/防御坐骑栏已废除，则你至其他角色的距离-1/其他角色至你的距离-1。"},"kengo_guidui":{"name":"归队","script":"{trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countDisabled()>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=['equip1','equip2','equip3','equip4','equip5'];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(!player.isDisabled(list[i])) list.splice(i--,1);\n\t\t\t\t\t\telse player.enableEquip(list[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.storage.kengo_guidui2) player.storage.kengo_guidui2=[];\n\t\t\t\t\tplayer.storage.kengo_guidui2.addArray(list);\n\t\t\t\t\t//player.addTempSkill('kengo_guidui2');\n\t\t\t\t},}","info":"锁定技，准备阶段，若你有已废除的装备栏，则你恢复这些装备栏，且本局游戏内发动【伪伤】时不能废除这些装备栏。"},"yoshino_jueyi":{"name":"决义","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(lib.filter.notMe,get.prompt2('yoshino_jueyi')).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.damageEffect(target,player,player)<0) return 0;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>0) return 0;\n\t\t\t\t\t\tif(att==0) return 0.1;\n\t\t\t\t\t\tvar eff=0;\n\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\tif(player.canUse(hs[i],target)){\n\t\t\t\t\t\t\t\tvar eff2=get.effect(target,hs[i],player,player);\n\t\t\t\t\t\t\t\tif(eff2>0) eff+=eff2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -att/(1+eff);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('yoshino_jueyi',target);\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.chooseToPSS(target);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.tie) event.goto(2);\n\t\t\t\t\telse if(result.bool) target.damage();\n\t\t\t\t\telse target.addTempSkill('yoshino_fail','phaseUseEnd');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以选择一名其他角色。你摸一张牌并与其猜拳（平局则重来）。若你赢，你对其造成1点伤害。若你没赢，你本阶段内使用牌时不能指定其为目标。"},"yui_jiang":{"name":"激昂","script":"{shaRelated: \"true\",audio: \"2\",audioname: [\"sp_lvmeng\",\"re_sunben\",\"re_sunce\"],trigger: {player: \"useCardToPlayered\",target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\tif(!(event.card.name=='juedou'||(event.card.name=='sha'&&get.color(event.card)=='red'))) return false;\n\t\t\t\t\treturn player==event.target||event.getParent().triggeredTargets3.length==1;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,0.6];\n\t\t\t\t\t\t},player: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red') return [1,1];\n\t\t\t\t\t\t},},},}","info":"每当你使用（指定目标后）或被使用（成为目标后）一张【决斗】或红色的【杀】时，你可以摸一张牌。"},"yui_lieyin":{"name":"烈音","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",locked: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(player.storage._ichiban_no_takaramono) list.push('cancel2');\n\t\t\t\t\tplayer.chooseControl.apply(player,list).set('choiceList',[\n\t\t\t\t\t\t'令此阶段内的所有红色牌视为【杀】',\n\t\t\t\t\t\t'令此阶段内的所有【杀】视为【决斗】'\n\t\t\t\t\t]).set('prompt',player.storage._ichiban_no_takaramono?get.prompt('yui_lieyin'):'烈音：请选择一项').set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar shas=player.countCards('h','sha')\n\t\t\t\t\t\tif(shas>0){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)<0&&player.canUse('juedou',current)&&!current.hasSha()&&get.effect(current,{name:'juedou'},player,player)>0;\n\t\t\t\t\t\t\t})) return 1;\n\t\t\t\t\t\t\tif(player.storage._ichiban_no_takaramono) return 'cancel2';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.color(card)=='red'&&card.name!='sha'&&player.hasValueTarget(card);\n\t\t\t\t\t\t})==0) return 0;\n\t\t\t\t\t\tif(player.storage._ichiban_no_takaramono) return 'cancel2';\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('yui_lieyin');\n\t\t\t\t\t\tplayer.addTempSkill('yui_lieyin'+result.index,'phaseUseEnd')\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，出牌阶段开始时，你选择一项：①本阶段内的红色牌均视为【杀】；②本阶段内的【杀】均视为【决斗】。"},"yui_takaramono":{"name":"珍宝","script":"{trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",unique: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"key\",filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tif(player.hp<=1) num++;\n\t\t\t\t\tif(game.dead.length>0) num++;\n\t\t\t\t\tif(num!=1) return num>1;\n\t\t\t\t\tvar draw=0;\n\t\t\t\t\tplayer.getAllHistory('gain',function(evt){\n\t\t\t\t\t\tif(evt.getParent(2).name=='yui_jiang') draw+=evt.cards.length;\n\t\t\t\t\t});\n\t\t\t\t\treturn draw>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('yui_takaramono');\n\t\t\t\t\tplayer.addSkill('yui_yinhang');\n\t\t\t\t\tplayer.storage._ichiban_no_takaramono=true;\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},derivation: \"yui_yinhang\",}","info":"觉醒技，准备阶段，若你满足以下条件中的至少两个：①体力值不大于1；②场上有已死亡的角色；③已因〖激昂〗累计获得过至少三张牌；则你获得技能〖引吭〗，将〖烈音〗描述中的「你选择」改为「你可选择」，然后加1点体力上限并回复1点体力。"},"tsumugi_mugyu":{"name":"姆啾","script":"{audio: \"5\",trigger: {target: \"useCardToTargeted\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"当你成为牌的目标后，若你的手牌数小于体力上限，则你可以摸一张牌。"},"tsumugi_huilang":{"name":"回廊","script":"{trigger: {player: \"phaseEnd\",},charlotte: \"true\",line: {color: [253,198,116],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('he',[1,player.countCards('he')],get.prompt2('tsumugi_huilang')).set('ai',function(card){\n\t\t\t\t\t\tif(get.position(card)!='h') return -1;\n\t\t\t\t\t\tif(!['shan','wuxie','caochuan'].contains(get.name(card))) return 9;\n\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\t\tplayer.logSkill('tsumugi_huilang');\n\t\t\t\t\t\tplayer.addSkill('tsumugi_huilang2');\n\t\t\t\t\t\tplayer.markAuto('tsumugi_huilang2',cards);\n\t\t\t\t\t\tplayer.lose(cards,ui.special);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"回合结束时，你可以将任意张牌扣置于武将牌下（均称为「隐」）。回合开始时，你获得所有「隐」，然后可令等量的角色各摸一张牌。"},"saya_shouji":{"name":"授计","script":"{audio: \"2\",trigger: {player: \"useCardAfter\",},filter: function (event,player){\n\t\t\t\t\treturn !player.getStat('skill').saya_shouji&&event.cards.filterInD().length>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar goon=function(){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tvar cards=trigger.cards.filterInD();\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tnum+=player.getUseValue(cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn player.getUseValue(card,null,true)>num;\n\t\t\t\t\t\t})==0;\n\t\t\t\t\t}();\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('saya_shouji'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar cards=_status.event.getTrigger().cards.filterInD();\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tnum+=target.getUseValue(cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Math.max(num,0.1)*att;\n\t\t\t\t\t}).set('goon',goon);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.getStat('skill').saya_shouji=1;\n\t\t\t\t\t\tevent.cards=trigger.cards.filterInD();\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('saya_shouji',target);\n\t\t\t\t\t\ttarget.gain(event.cards,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.chooseToUse({\n\t\t\t\t\t\tcards:cards,\n\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\tif(get.itemtype(card)!='card'||!_status.event.cards||!_status.event.cards.contains(card)) return false;\n\t\t\t\t\t\t\treturn lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:'是否使用得到的牌中的一张？',\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool) player.draw();\n\t\t\t\t},}","info":"每回合限一次，当你使用的牌结算完成后，你可以将此牌对应的所有实体牌交给一名其他角色。其可以使用这些牌中的一张，若如此做，你摸一张牌。"},"saya_powei":{"name":"破围","script":"{audio: \"2\",trigger: {player: \"phaseAfter\",},direct: \"true\",locked: \"true\",limited: \"true\",unique: \"true\",skillAnimation: \"true\",animationColor: \"metal\",filter: function (event,player){\n\t\t\t\t\treturn event.type!='saya_powei'&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp>player.hp;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('saya_powei'),function(card,saya,kyousuke){\n\t\t\t\t\t\treturn kyousuke.hp>saya.hp;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>=-2) return 0;\n\t\t\t\t\t\tif(target!=get.zhu(target)&&player.hasUnknown()) return 0;\n\t\t\t\t\t\tif(target.getEquip(3)&&!player.getEquip(4)) att/=2;\n\t\t\t\t\t\tif(player.hp<=1) att*=1.5;\n\t\t\t\t\t\treturn -att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('saya_powei',target);\n\t\t\t\t\t\tplayer.awakenSkill('saya_powei');\n\t\t\t\t\t\tgame.delay(3);\n\t\t\t\t\t\tvar next=game.createEvent('saya_powei_loop',false,trigger);\n\t\t\t\t\t\tnext.playertrue=player;\n\t\t\t\t\t\tnext.playerfalse=target;\n\t\t\t\t\t\tnext.setContent(lib.skill.saya_powei.content2);\n\t\t\t\t\t}\n\t\t\t\t},content2: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=0;\n\t\t\t\t\tevent.stat=true;\n\t\t\t\t\tevent.current=event['player'+event.stat];\n\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\tif(current!=event.playertrue&&current!=event.playerfalse) current.addSkill('saya_nodis');\n\t\t\t\t\t});\n\t\t\t\t\tevent.playertrue.addSkill('saya_judge');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.count++;\n\t\t\t\t\tevent.current.phase().set('type','saya_powei');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.count==9||event.playertrue.isDead()||event.playerfalse.isDead()){\n\t\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\t\tcurrent.removeSkill('saya_nodis');\n\t\t\t\t\t\t\tcurrent.removeSkill('saya_judge');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.stat=!event.stat;\n\t\t\t\t\t\tevent.current=event['player'+event.stat];\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，回合结束后，你可以选择一名体力值大于你的其他角色。你与其交替进行额外回合，直到你与其中的一名角色死亡或进行到九个回合。你于回合开始时进行判定，若结果为红色，则你对其造成1点伤害。此过程中其他角色不计入距离和座次计算。"},"haruka_shuangche":{"name":"双掣","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('haruka_kanata');\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(name=='boss_mengpohuihun') continue;\n\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('双掣',[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\treturn _status.event.getParent().filterCard({name:button.link[2]},player,_status.event.getParent());\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h',button.link[2])>0) return 0;\n\t\t\t\t\t\tif(['wugu','zhulu_card'].contains(button.link[2])) return 0;\n\t\t\t\t\t\tvar effect=player.getUseValue(button.link[2]);\n\t\t\t\t\t\tif(effect>0) return effect;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\taudio:'haruka_shuangche',\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tcheck:function(card){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3],isCard:true},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '请选择'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'的目标';\n\t\t\t\t\t},},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tvar cards=player.getCards('he').sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.value(a)-get.value(b);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar num=(player.getStat('skill').haruka_shuangche||0)+1;\n\t\t\t\t\t\t\tif(player.needsToDiscard()>=num) return 1;\n\t\t\t\t\t\t\tif(player.hp>2) return 1;\n\t\t\t\t\t\t\tif(cards.length>=num){\n\t\t\t\t\t\t\t\tvar val=0;\n\t\t\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\t\tval+=get.value(cards[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 12-val;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},fireAttack: \"true\",},group: \"kanata_shuangche\",}","info":"出牌阶段，你可以视为使用任意基本牌或普通锦囊牌。此牌结算完成后，你选择一项：1.弃置X张牌。2.失去1点体力且本回合内不能再发动〖双掣〗。（X为你于此回合内发动过〖双掣〗的次数）"},"inari_baiwei":{"name":"摆尾","script":"{enable: [\"chooseToUse\",\"chooseToRespond\"],hiddenCard: function (player,name){\n\t\t\t\t\treturn name!='du'&&get.type(name)=='basic'&&player.countCards('he',{suit:'diamond'})>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.type=='wuxie'||!player.countCards('he',{suit:'diamond'})) return false;\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\tif(name!='du'&&name!='shan'&&get.type(name)=='basic'&&event.filterCard({name:name},player,event)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(name=='du'||name=='shan') continue;\n\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\tlist.addArray([\n\t\t\t\t\t\t\t\t\t['基本','','sha'],\n\t\t\t\t\t\t\t\t\t['基本','','sha','fire'],\n\t\t\t\t\t\t\t\t\t['基本','','sha','thunder'],\n\t\t\t\t\t\t\t\t\t['基本','','sha','ice'],\n\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.type(name)=='basic'){\n\t\t\t\t\t\t\t\tlist.push(['基本','',name]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('摆尾',[list,'vcard'],'hidden');\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\treturn _status.event.getParent().filterCard({name:button.link[2]},player,_status.event.getParent());\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tif(_status.event.getParent().type=='phase'){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar fakecard={name:button.link[2],nature:button.link[3]};\n\t\t\t\t\t\t\tif(player.getUseValue(fakecard)>0) return get.order(fakecard);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tselectCard:1,\n\t\t\t\t\t\t\tfilterCard:{suit:'diamond'},\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tcheck:function(card){\n\t\t\t\t\t\t\t\tif(get.type(card)=='basic') return 6;\n\t\t\t\t\t\t\t\treturn 1/Math.max(0.1,get.value(card));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3]},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将一张♦牌当做'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'使用或打出';\n\t\t\t\t\t},},ai: {order: function (item,player){\n\t\t\t\t\t\tif(player&&_status.event.type=='phase'){\n\t\t\t\t\t\t\tvar max=0\n\t\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t \t\t\t\tif(get.type(name)=='basic'&&player.getUseValue({name:name})>0){\n\t\t\t \t\t\t\t\tvar temp=get.order({name:name});\n\t\t\t \t\t\t\t\tif(temp>max) max=temp;\n\t\t\t \t\t\t\t}\n\t\t\t \t\t\t}\n\t\t\t \t\t\tif(max>0) max+=0.5;\n\t\t\t \t\t\treturn max;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 4;\n\t\t\t\t\t},result: {player: \"1\",},respondSha: \"true\",fireAttack: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\treturn tag=='fireAttack'||player.countCards('he',{suit:'diamond'})>0;\n\t\t\t\t\t},},group: [\"inari_baiwei_shan\",\"inari_baiwei_draw\"],}","info":"你可以将一张♦牌当做任意基本牌使用或打出。此牌结算完成后，你摸一张牌。"},"inari_huhun":{"name":"狐魂","script":"{mod: {suit: function (card,suit){\n\t\t\t\t\t\tif(suit=='club') return 'diamond';\n\t\t\t\t\t},maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+1;\n\t\t\t\t\t},},}","info":"锁定技，你的♣牌的花色均视为♦。你的手牌上限+1。"},"shiina_qingshen":{"name":"轻身","script":"{trigger: {player: \"damageEnd\",source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\treturn event.cards&&event.cards.filterInD().length>0;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=trigger.cards.filterInD('od');\n\t\t\t\t\tplayer.gain(cards,'gain2','log');\n\t\t\t\t\tevent.count=cards.length;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=player.getCards('he');\n\t\t\t\t\tif(cards.length==0){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\telse if(cards.length<=event.count){\n\t\t\t\t\t\tevent._result={bool:true,cards:cards};\n\t\t\t\t\t}\n\t\t\t\t\telse player.chooseCard(true,'he',event.count,'请选择要置于武将牌上的牌');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.cards.length){\n\t\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\t\tplayer.lose(cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.markAuto('shiina_qingshen',cards);\n\t\t\t\t\t\tgame.log(player,'将',cards,'置于武将牌上');\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"cards\",onunmark: \"throw\",},mod: {attackFrom: function (from,to,num){\n\t\t\t\t\t return num-from.getStorage('shiina_qingshen').length;\n\t\t\t\t\t},maxHandcard: function (from,num){\n\t\t\t\t\t return num+from.getStorage('shiina_qingshen').length;\n\t\t\t\t\t},},ai: {notemp: \"true\",},}","info":"当你受到或造成伤害后，你可以获得此次伤害的渠道对应的实体牌，然后将等量的牌置于你的武将牌上，称为「轻」。锁定技，你的手牌上限和攻击范围+X（X为「轻」数）。"},"shiina_feiyan":{"name":"飞燕","script":"{animalList: [\"key_inari\",\"key_doruji\"],trigger: {global: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(lib.skill.shiina_feiyan.animalList.contains(event.player.name)) return false;\n\t\t\t\t\treturn player.getStorage('shiina_qingshen').length>0&&player.inRange(event.player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseButton([get.prompt('shiina_feiyan',trigger.player),player.getStorage('shiina_qingshen')]).set('goon',get.attitude(player,trigger.player)<0?1:-1).set('ai',function(){return _status.event.goon});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=result.links;\n\t\t\t\t\t\tplayer.unmarkAuto('shiina_qingshen',cards);\n\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\tplayer.$throw(cards);\n\t\t\t\t\t\tevent.card={name:'sha',isCard:true};\n\t\t\t\t\t\tif(lib.filter.targetEnabled(event.card,player,trigger.player)){\n\t\t\t\t\t\t\tevent.card=player.useCard(event.card,trigger.player,'shiina_feiyan').card;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.logSkill('shiina_feiyan',trigger.player);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!player.getHistory('sourceDamage',function(evt){\n\t\t\t\t\t\treturn event.card==evt.card;\n\t\t\t\t\t}).length) player.draw();\n\t\t\t\t},group: \"shiina_retieji\",ai: {notemp: \"true\",combo: \"shiina_feiyan\",},}","info":"一名其他角色的回合开始时，若其在你的攻击范围内，则你可以将一张「轻」置于弃牌堆，然后视为对其使用一张【杀】。若此【杀】未造成伤害，你摸一张牌。你于此【杀】的结算流程中视为拥有技能【铁骑】。"},"sunohara_chengshuang":{"name":"成双","script":"{trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},group: \"sunohara_chengshuang_phase\",forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar evt=event.getParent('phase');\n\t\t\t\t\tif(evt&&evt.player==player) evt.sunohara_chengshuang=true;\n\t\t\t\t\tplayer.chooseControl('male','female').set('prompt','成双：请选择自己的性别');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar sex=result.control;\n\t\t\t\t\tgame.broadcastAll(function(player,sex){\n\t\t\t\t\t\tplayer.sex=sex;\n\t\t\t\t\t\tif(player.marks&&player.marks.sunohara_chengshuang) player.marks.sunohara_chengshuang.firstChild.innerHTML=sex=='male'?'♂':'♀';\n\t\t\t\t\t},player,sex);\n\t\t\t\t\tgame.log(player,'将性别变更为','#g'+get.translation(sex));\n\t\t\t\t},mark: \"true\",intro: {content: function (storage,player){\n\t\t\t\t\t\tif(player.sex=='unknown') return '当前性别未确定';\n\t\t\t\t\t\treturn '当前性别：'+get.translation(player.sex);\n\t\t\t\t\t},},}","info":"锁定技，游戏开始时，你选择你的性别。回合开始时，你可以切换你的性别。"},"sunohara_tiaoyin":{"name":"挑引","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countGainableCards(player,'hej')>0;\n\t\t\t\t},selectCard: [1,4],filterCard: function (card){\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tif(get.suit(ui.selected.cards[i])==get.suit(card)) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},complexSelect: \"true\",complexCard: \"true\",complexTarget: \"true\",selectTarget: function (){\n\t\t\t\t\treturn [ui.selected.cards.length,ui.selected.cards.length];\n\t\t\t\t},line: {color: [239,204,96],},content: function (){\n\t\t\t\t\tif(target.countGainableCards(player,'hej')>0) player.gainPlayerCard(target,'hej','visible');\n\t\t\t\t},contentAfter: function (){\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tif(targets[i].sex!=player.sex){\n\t\t\t\t\t\t\tbool=true;break;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif(bool) player.loseHp();\n\t\t\t\t},ai: {order: \"6\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn lib.card.shunshou.ai.result.target.apply(this,arguments);\n\t\t\t\t\t\t},player: function (player,target){\n\t\t\t\t\t\t\tif(target.sex==player.sex) return 0;\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.targets.length;i++){\n\t\t\t\t\t\t\t\tif(ui.selected.targets[i].sex!=player.sex) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (get.attitude(player,target)<0&&target.countCards('h','tao')>0)?1:-2;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置任意张花色各不相同的手牌，然后获得等量角色区域内的各一张牌。若你以此法获得了异性角色区域内的牌，则你失去1点体力。"},"sunohara_jianren":{"name":"坚忍","script":"{trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=(!trigger.source||trigger.source.isDead()||trigger.source.sex!=player.sex)?3:1;\n\t\t\t\t\tplayer.chooseTarget(get.prompt('sunohara_jianren'),'令一名角色摸'+get.cnNumber(event.num)+'张牌。').set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=0) return 0;\n\t\t\t\t\t\tif(target.hasSkillTag('nogain')&&target!=_status.currentPhase) return 0.1;\n\t\t\t\t\t\treturn att/(1+0.1*target.countCards('h'));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('sunohara_jianren',target,{color:[145,149,179]});\n\t\t\t\t\t\ttarget.draw(event.num);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到伤害后，你可以令一名角色摸一张牌。若伤害无来源或来源与你性别不同，则改为摸三张牌。"},"rin_baoqiu":{"name":"暴球","script":"{mod: {attackFrom: function (rin,riki,ball){\n\t\t\t\t\t\treturn ball-2;\n\t\t\t\t\t},},trigger: {player: \"useCardToPlayered\",},forced: \"true\",logTarget: \"target\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},line: {color: [194,117,92],},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(){return 0});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar target=trigger.target;\n\t\t\t\t\tvar map=trigger.customArgs;\n\t\t\t\t\tvar id=target.playerid;\n\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\tif(result.color=='red'){\n\t\t\t\t \tif(!map[id].extraDamage) map[id].extraDamage=0;\n\t\t\t\t \tmap[id].extraDamage++;\n\t\t\t\t\t}\n\t\t\t\t\tif(result.color=='black'){\n\t\t\t\t\t\ttrigger.directHit.add(target);\n\t\t\t\t\t}\n\t\t\t\t\tif(result.suit=='spade'||result.suit=='heart'){\n\t\t\t\t\t\tvar evt=trigger.getParent();\n\t\t\t\t\t\tif(evt.addCount!==false){\n\t\t\t\t\t\t\tevt.addCount=false;\n\t\t\t\t\t\t\tplayer.getStat().card.sha--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\tif(result.suit=='diamond'||result.suit=='club'){\n\t\t\t\t\t\ttarget.addTempSkill('fengyin');\n\t\t\t\t\t\tif(target.countDiscardableCards(player,'he')>0) player.discardPlayerCard(target,'he',true);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，你的攻击范围+2。当你使用【杀】指定目标后，你进行判定。若结果：为红色，此【杀】对其的伤害值基数+1；为黑色，其无法闪避此【杀】；为♠/♥，此【杀】不计入使用次数限制且你摸一张牌；为♦/♣，目标角色的所有非锁定技失效直到回合结束，且你弃置其一张牌。"},"sasami_miaobian":{"name":"喵变","script":"{derivation: [\"sasami_gongqing\",\"sasami_funan\",\"sasami_baoqiu\"],init2: function (player){\n\t\t\t\t\tif(player.hp<=3) player.addSkill('sasami_gongqing');\n\t\t\t\t\tif(player.hp<=2) player.addSkill('sasami_funan');\n\t\t\t\t\tif(player.hp<=1) player.addSkill('sasami_baoqiu');\n\t\t\t\t},trigger: {player: \"changeHp\",},firstDo: \"true\",silent: \"true\",content: function (){\n\t\t\t\t\tlib.skill.sasami_miaobian.init2(player);\n\t\t\t\t},forced: \"true\",popup: \"false\",}","info":"当你的体力值变为：3以下时，你获得技能〖公清〗，2以下时，你获得技能〖复难〗，1以下时，你获得技能〖暴球〗"},"akane_jugu":{"name":"巨贾","script":"{audio: \"2\",mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.maxHp;\n\t\t\t\t\t},},trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(player.maxHp);\n\t\t\t\t},}","info":"锁定技，1.你的手牌上限+X。2.游戏开始时，你摸X张牌（X为你的体力上限）"},"akane_quanqing":{"name":"权倾","script":"{enable: \"phaseUse\",filterCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&player.inRange(target);\n\t\t\t\t},position: \"he\",check: function (card){\n\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\tvar num=card.number;\n\t\t\t\t\tif(num>10) return 8-val;\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(player.getUseValue(card,null,true)>player.getUseValue({name:'guohe'})) return 0;\n\t\t\t\t\tif(num>6) return 6-val;\n\t\t\t\t\treturn 3-val;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=cards[0].number;\n\t\t\t\t\tvar trans=get.translation(target);\n\t\t\t\t\tvar list=['令'+trans+'摸一张牌'];\n\t\t\t\t\tevent.addIndex=0;\n\t\t\t\t\tif(num>6){\n\t\t\t\t\t\tif(target.countDiscardableCards(player,'hej')>0) list.push('弃置'+trans+'区域内的一张牌');\n\t\t\t\t\t\telse event.addIndex++;\n\t\t\t\t\t}\n\t\t\t\t\tif(num>10) list.push('对'+trans+'造成1点伤害');\n\t\t\t\t\tif(list.length==1) event._result={index:0};\n\t\t\t\t\telse player.chooseControl().set('choiceList',list).set('index',list.length-1).set('ai',function(){return _status.event.index});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index>0) result.index+=event.addIndex;\n\t\t\t\t\tswitch(result.index){\n\t\t\t\t\t\tcase 0:target.draw();break;\n\t\t\t\t\t\tcase 1:player.discardPlayerCard(target,'hej',true);break;\n\t\t\t\t\t\tcase 2:target.damage('nocard');break;\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tif(card.number>10) return get.damageEffect(target,player,target);\n\t\t\t\t\t\t\t\tif(card.number>6) return lib.card.guohe.ai.result.target.apply(this,arguments);\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可选择：1.弃置一张点数大于10的牌并对攻击范围内的一名其他角色造成1点伤害；2.弃置一张点数大于6的牌并弃置攻击范围内的一名其他角色区域内的一张牌。3.弃置一张牌并令攻击范围内的一名其他角色摸一张牌。"},"akane_yifu":{"name":"蚁附","script":"{unique: \"true\",global: \"akane_yifu2\",zhuSkill: \"true\",}","info":"主公技，其他键势力角色的出牌阶段限一次，其可交给你一张手牌。然后你摸一张牌，并将一张手牌交给该角色。"},"doruji_feiqu":{"name":"肥躯","script":"{trigger: {player: \"useCard\",target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.name=='useCard') trigger.directHit.addArray(game.players);\n\t\t\t\t\telse trigger.directHit.add(player);\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\treturn arg.card.name=='sha';\n\t\t\t\t\t},},global: \"doruji_feiqu_ai\",}","info":"锁定技，当你使用【杀】时，或你成为【杀】的目标后，你令此【杀】不可被响应。"},"yuiko_fenglun":{"name":"锋论","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player.canCompare(current);\n\t\t\t\t\t});\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool) player.addTempSkill('yuiko_fenglun2','phaseUseEnd');\n\t\t\t\t},ai: {order: \"10\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以和一名其他角色拼点。若你赢，你本阶段内使用牌没有次数和距离限制。"},"yuiko_dilve":{"name":"底略","script":"{enable: \"chooseCard\",check: function (){\n\t\t\t\t\treturn 20;\n\t\t\t\t},filter: function (event){\n\t\t\t\t\treturn event.type=='compare'&&!event.directresult;\n\t\t\t\t},onCompare: function (player){\n\t\t\t\t\treturn game.cardsGotoOrdering(get.bottomCards()).cards;\n\t\t\t\t},group: \"yuiko_dilve_gain\",subSkill: {gain: {trigger: {player: [\"chooseToCompareAfter\",\"compareMultipleAfter\"],target: [\"chooseToCompareAfter\",\"compareMultipleAfter\"],},filter: function (event,player){\n\t \t\t\t\t\tif(event.preserve) return false;\n\t \t\t\t\t\treturn [event.card1,event.card2].filterInD('od').length>0;\n\t \t\t\t\t},prompt2: function (event,player){\n\t \t\t\t\t\treturn '获得'+get.translation([event.card1,event.card2].filterInD('od'));\n\t \t\t\t\t},content: function (){\n\t \t\t\t\t\tplayer.gain([trigger.card1,trigger.card2].filterInD('od'),'gain2','log');\n\t \t\t\t\t},sub: \"true\",},},}","info":"你可以使用牌堆底的一张牌进行拼点。当你拼点后，你可以获得两张拼点牌。"},"riki_spwenji":{"name":"问计","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('he');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('riki_spwenji'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('he');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>0) return Math.sqrt(att)/10;\n\t\t\t\t\t\treturn 5-att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('riki_spwenji',target);\n\t\t\t\t\t\ttarget.chooseCard('he',true,'问计：将一张牌交给'+get.translation(player));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('riki_spwenji_respond');\n\t\t\t\t\t\tplayer.storage.riki_spwenji_respond=result.cards[0].name;\n\t\t\t\t\t\tevent.target.give(result.cards,player,true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},subSkill: {respond: {onremove: \"true\",trigger: {player: \"useCard\",},forced: \"true\",charlotte: \"true\",audio: \"riki_spwenji\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.name==player.storage.riki_spwenji_respond;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.directHit.addArray(game.players);\n\t\t\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\t\t\treturn arg.card.name==player.storage.riki_spwenji_respond;\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"出牌阶段开始时，你可以令一名其他角色交给你一张牌。你于本回合内使用与该牌名称相同的牌时不能被其他角色响应。"},"riki_nvzhuang":{"name":"女装","script":"{trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(player.countCards('h')==0?2:1);\n\t\t\t\t},}","info":"锁定技，此武将牌的性别视为女性。结束阶段，若你：有手牌，你摸一张牌；没有手牌，你摸两张牌。"},"riki_mengzhong":{"name":"梦终","script":"{trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",derivation: \"riki_chongzhen\",juexingji: \"true\",unique: \"true\",skillAnimation: \"true\",animationColor: \"key\",filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getAllHistory('gain',function(evt){\n\t\t\t\t\t\tif(evt.getParent().name=='riki_spwenji') num+=evt.cards.length;\n\t\t\t\t\t});\n\t\t\t\t\treturn num>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('riki_mengzhong');\n\t\t\t\t\tplayer.removeSkill('riki_spwenji');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.addSkill('riki_chongzhen');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你已因〖问计〗获得了三张或更多的牌，则你加1点体力上限并回复1点体力，失去〖问计〗并获得〖重振〗。"},"hisako_yinbao":{"name":"音爆","script":"{trigger: {player: [\"damageEnd\",\"recoverAfter\"],},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.suit(card)=='spade'?2:-2;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseTarget(lib.filter.notMe,true,'选择一名其他角色，对其造成1点雷属性伤害').set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player,'thunder');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\tplayer.addExpose(0.2);\n\t\t\t\t\tplayer.line(target,'thunder');\n\t\t\t\t\ttarget.damage('thunder');\n\t\t\t\t},}","info":"当你受到伤害/回复体力后，你可以判定。若结果为♠，则你对一名其他角色造成1点雷属性伤害。"},"hisako_zhuanyun":{"name":"转运","script":"{trigger: {player: \"judgeBegin\",},forced: \"true\",charlotte: \"true\",silent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.directresult;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar tempcard=false,temp=-Infinity;\n\t\t\t\t\tfor(var i=0;i<ui.cardPile.childElementCount;i++){\n\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\tvar temp2=trigger.judge(card);\n\t\t\t\t\t\tif(temp2>temp){\n\t\t\t\t\t\t\ttempcard=card;\n\t\t\t\t\t\t\ttemp=temp2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(tempcard) trigger.directresult=tempcard;\n\t\t\t\t},ai: {luckyStar: \"true\",},popup: \"false\",}","info":"锁定技，你的判定会朝向对你有利的方向倾斜。"},"hinata_qiulve":{"name":"球略","script":"{enable: [\"chooseToUse\",\"chooseToRespond\"],viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('he',function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t})>0;\n\t\t\t\t},viewAs: {name: \"sha\",},filterCard: function (card,player){\n\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t},locked: \"false\",position: \"he\",check: function (card){\n\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\tif(val>=6) return 0;\n\t\t\t\t\tif(get.color(card)=='black') return 12-val;\n\t\t\t\t\treturn 6-val;\n\t\t\t\t},mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\tif(_status.event.skill=='hinata_qiulve') return true;\n\t\t\t\t\t},},group: \"hinata_qiulve_clear\",ai: {respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\treturn player.countCards('he',function(card){\n\t\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t\t})>0;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"你可以将一张非基本牌当做【杀】使用或打出（无距离限制）。你以此法使用的红色【杀】不可被响应，黑色【杀】不计入使用次数限制。"},"hinata_ehou":{"name":"扼喉","script":"{trigger: {global: \"useCardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&event.targets&&event.targets.contains(player)&&(_status.connectMode||player.hasSha());\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToUse({\n\t\t\t\t\t\tlogSkill:'hinata_ehou',\n\t\t\t\t\t\tpreTarget:trigger.player,\n\t\t\t\t\t\tprompt:'是否发动【扼喉】，对'+get.translation(trigger.player)+'使用一张【杀】？',\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.name(card)=='sha'&&lib.filter.filterCard.apply(this,arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target==_status.event.preTarget&&lib.filter.filterTarget.apply(this,arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\taddCount:false,\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&player.getHistory('sourceDamage',function(evt){\n\t\t\t\t\t\treturn evt.getParent(4)==event;\n\t\t\t\t\t}).length) player.draw();\n\t\t\t\t},}","info":"其他角色对你使用的牌结算完成后，你可对其使用一张【杀】。若此【杀】造成伤害，则你摸一张牌。"},"noda_fengcheng":{"name":"奉承","script":"{trigger: {player: \"gainAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.itemtype(event.source)=='player'&&event.bySelf!=true;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.source)>0;\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\ttrigger.source.draw();\n\t\t\t\t},}","info":"锁定技，其他角色交给你牌后，其摸一张牌。"},"noda_xunxin":{"name":"寻衅","script":"{enable: \"phaseUse\",viewAs: {name: \"juedou\",},filter: function (event,player){\n\t\t\t\t\treturn (player.getStat('skill').noda_xunxin||0)<player.hp;\n\t\t\t\t},filterTarget: function (event,player,target){\n\t\t\t\t\tif(target.hp<player.hp) return false;\n\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\n\t\t\t\t},selectCard: \"-1\",filterCard: function (){return false},group: \"noda_xunxin2\",ai: {wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(player==game.me&&get.attitude(viewer,player)>0){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"5\",useful: \"1\",value: \"5.5\",},result: {target: \"-1.5\",player: function (player,target,card){\n\t\t\t\t\t\t\tif(player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,target)>0&&get.attitude(player,target)>0&&get.attitude(target,player)>0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar hs1=target.getCards('h','sha');\n\t\t\t\t\t\t\tvar hs2=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(hs1.length>hs2.length+1){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar hsx=target.getCards('h');\n\t\t\t\t\t\t\tif(hsx.length>2&&hs2.length==0&&hsx[0].number<6){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hsx.length>3&&hs2.length==0){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hs1.length>hs2.length&&(!hs2.length||hs1[0].number>hs2[0].number)){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},tag: {respond: \"2\",respondSha: \"2\",damage: \"1\",},},}","info":"出牌阶段限X次，你可以视为对一名体力值不小于你的角色使用【决斗】。若如此做，此【决斗】结算完成后，没赢的角色交给赢的角色一张牌。（X为你的体力值）"},"tomoya_shangxian":{"name":"伤弦","script":"{trigger: {player: \"phaseUseBegin\",},mark: \"true\",intro: {content: function (s){\n\t\t\t\t\t\treturn '计算与其他角色的距离时始终从'+(s?'逆':'顺')+'时针计算'\n\t\t\t\t\t},},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.storage.tomoya_shangxian=!player.storage.tomoya_shangxian;\n\t\t\t\t},ai: {left_hand: \"true\",right_hand: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\treturn (player.storage.tomoya_shangxian==true)==(tag=='left_hand');\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时始终从逆时针方向计算。出牌阶段开始时，你可摸一张牌，并改变此方向。"},"tomoya_wangjin":{"name":"往今","script":"{trigger: {global: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&!player.hasSkill('tomoya_wangjin_'+player.inRange(event.player));\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tvar target=event.player;\n\t\t\t\t\tvar bool=player.inRange(target);\n\t\t\t\t\tif(!bool){\n\t\t\t\t\t\tif(target.hp>player.hp) return get.effect(target,{name:'sha',isCard:true},player,player)>0;\n\t\t\t\t\t\tvar temp=target;\n\t\t\t\t\t\twhile(true){\n\t\t\t\t\t\t\ttemp=temp.getNext();\n\t\t\t\t\t\t\tif(temp==target||temp==_status.roundStart) return true;\n\t\t\t\t\t\t\tif(temp==player) continue;\n\t\t\t\t\t\t\tif(temp.hp>player.hp&&!player.inRange(temp)&&get.effect(temp,{name:'sha',isCard:true},player,player)>0) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(get.attitude(player,target)<2) return false;\n\t\t\t\t\tif(target.hp<player.hp&&!target.hasSkillTag('nogain')) return true;\n\t\t\t\t\tvar temp=target;\n\t\t\t\t\twhile(true){\n\t\t\t\t\t\ttemp=temp.getNext();\n\t\t\t\t\t\tif(temp==target||temp==_status.roundStart) return true;\n\t\t\t\t\t\tif(temp==player) continue;\n\t\t\t\t\t\tif(temp.hp<player.hp&&player.inRange(temp)&&get.attitude(player,target)>=2&&!temp.hasSkillTag('nogain')) return false;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.bool=player.inRange(trigger.player);\n\t\t\t\t\tplayer.addTempSkill('tomoya_wangjin_'+event.bool,'roundStart');\n\t\t\t\t\tif(event.bool){\n\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse player.draw(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.bool){\n\t\t\t\t\t\tif(trigger.player.hp<player.hp) player.draw();\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(player.countDiscardableCards(trigger.player,'h')>0) trigger.player.discardPlayerCard(player,'h',true);\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.bool){\n\t\t\t\t\t\tplayer.chooseCard('h','是否交给'+get.translation(trigger.player)+'一张牌？');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\tif(player.hp>=trigger.player.hp) return;\n\t\t\t\t\t\tvar card={name:'sha',isCard:true};\n\t\t\t\t\t\tif(player.canUse(card,trigger.player,false)) player.useCard(card,trigger.player,false);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool) trigger.player.gain(result.cards,player,'giveAuto')\n\t\t\t\t},subSkill: {true: {sub: \"true\",},false: {sub: \"true\",},},ai: {expose: \"0.2\",},}","info":"每项每轮各限一次。一名其他角色的回合结束时，若其：在你的攻击范围内，你可令其摸一张牌。若其的体力值小于你，则你摸一张牌，并可交给其一张牌。不在你的攻击范围内，则你摸两张牌，并令其弃置你的一张手牌。若其的体力值大于你，则你视为对其使用一张【杀】（无距离限制）。"},"nagisa_tiandu":{"name":"天妒","script":"{trigger: {player: \"judgeEnd\",},charlotte: \"true\",frequent: function (event){\n\t\t\t\t\tif(event.result.card.name=='du') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},check: function (event){\n\t\t\t\t\tif(event.result.card.name=='du') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn get.position(event.result.card,true)=='o';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(trigger.result.card,'gain2');\n\t\t\t\t},}","info":"当你的判定牌生效后，你可以获得此牌。"},"nagisa_fuxin":{"name":"抚心","script":"{trigger: {global: [\"gainAfter\",\"loseAfter\",\"damageEnd\"],},filter: function (event){\n\t\t\t\t\tvar evt=event;\n\t\t\t\t\tif(event.name=='lose'){\n\t\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\t\tevt=event.getParent();\n\t\t\t\t\t}\n\t\t\t\t\tvar player=evt[event.name=='gain'?'source':'player'];\n\t\t\t\t\tif(!player||player==_status.currentPhase||player.isDead()) return false;\n\t\t\t\t\tif(event.name=='damage') return true;\n\t\t\t\t\tif(evt[event.name=='gain'?'bySelf':'notBySelf']!=true) return false;\n\t\t\t\t\tif(event.name=='lose') return event.hs.length>0;\n\t\t\t\t\treturn event.relatedLose&&event.relatedLose.hs&&event.relatedLose.hs.length>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event[event.name=='gain'?'source':'player'])>0&&get.attitude(player,_status.currentPhase)<=0;\n\t\t\t\t},logTarget: function (event){\n\t\t\t\t\treturn event[event.name=='gain'?'source':'player'];\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.target=trigger[trigger.name=='gain'?'source':'player'];\n\t\t\t\t\tevent.target.judge();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.color=='red') target.draw();\n\t\t\t\t\telse if(_status.currentPhase&&_status.currentPhase.countCards('he')) _status.currentPhase.chooseToDiscard('he',true);\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"当一名角色于回合外受到伤害，或其手牌被其他角色弃置或获得后，你可以令其判定。若结果为：红色，其摸一张牌。黑色，当前回合角色弃置一张牌。"},"ayato_jianshen":{"name":"僭神","script":"{mod: {cardnature: function (card,player){\n\t\t\t\t\t\tif(get.name(card)=='sha') return 'kami';\n\t\t\t\t\t},},ai: {threaten: \"3\",},}","info":"锁定技，你手牌中的【杀】均视为神属性。"},"ayato_zonghuan":{"name":"纵幻","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseButton(['请选择'+get.translation(target)+'的一张手牌',target.getCards('h')],true).set('ai',get.buttonValue);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\tif(!lib.filter.cardEnabled(card,target)) event._result={bool:false};\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar targets=game.players.slice(0);\n\t\t\t\t\t\t\tvar info=get.info(card);\n\t \t\t\t\t\tvar range;\n\t \t\t\t\t\tif(!info.notarget){\n\t   \t\t\t\tvar select=get.copy(info.selectTarget);\n\t   \t\t\t\tif(select==undefined){\n\t   \t\t\t\t\trange=[1,1];\n\t   \t\t\t\t}\n\t   \t\t\t\telse if(typeof select=='number') range=[select,select];\n\t   \t\t\t\telse if(get.itemtype(select)=='select') range=select;\n\t   \t\t\t\telse if(typeof select=='function') range=select(card,player);\n\t   \t\t\t\tgame.checkMod(card,target,range,'selectTarget',target);\n\t  \t\t\t\t}\n\t \t\t\t\t\tif(info.notarget||range[1]==-1){\n\t \t\t\t\t\t\tif(range[1]==-1){\n\t \t\t\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t \t\t\t\t\t\t\t\tif(!target.canUse(card,targets[i])){\n\t \t\t\t\t\t\t\t\t\ttargets.splice(i--,1);\n\t \t\t\t\t\t\t\t\t}\n\t \t\t\t\t\t\t\t}\n\t \t\t\t\t\t\t\tif(targets.length){\n\t \t\t\t\t\t\t\t\tevent.targets2=targets;\n\t \t\t\t\t\t\t\t}\n\t \t\t\t\t\t\t\telse{\n\t \t\t\t\t\t\t\t\tevent.finish();\n\t \t\t\t\t\t\t\t\treturn;\n\t \t\t\t\t\t\t\t}\n\t \t\t\t\t\t\t}\n\t \t\t\t\t\t\telse event.targets2=[];\n\t\t\t\t\t\t\t\tvar next=player.chooseBool();\n\t\t\t\t\t\t\t\tnext.set('prompt',event.prompt||('是否令'+get.translation(target)+(event.targets2.length?'对':'')+get.translation(event.targets2)+'使用'+get.translation(card)+'?'));\n\t\t\t\t\t\t\t\tnext.set('prompt2','或点「取消」，令其将此牌置入弃牌堆');\n\t\t\t\t\t\t\t\tnext.ai=function(){\n\t\t\t\t\t\t\t\t\tvar eff=0;\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.targets2.length;i++){\n\t\t\t\t\t\t\t\t\t\teff+=get.effect(event.targets2[i],card,target,player);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn eff>0;\n\t\t\t\t\t\t\t\t};\n\t \t\t\t\t\t}\n\t \t\t\t\t\telse{\n\t \t\t\t\t\t\tvar next=player.chooseTarget();\n\t \t\t\t\t\t\tnext.set('_get_card',card);\n\t \t\t\t\t\t\tnext.set('source',target);\n\t \t\t\t\t\t\tnext.set('filterTarget',function(card,player,target){\n\t \t\t\t\t\t\t\treturn lib.filter.filterTarget(_status.event._get_card,_status.event.source,target);\n\t \t\t\t\t\t\t});\n\t \t\t\t\t\t\tnext.set('ai',function(target){\n\t \t\t\t\t\t\t\tvar evt=_status.event;\n\t \t\t\t\t\t\t\treturn get.effect(target,evt._get_card,evt.source,evt.player)\n\t \t\t\t\t\t\t});\n\t \t\t\t\t\t\tnext.set('selectTarget',function(){\n\t  \t\t\t\t\t\tvar card=get.card(),player=_status.event.source;\n\t    \t\t\t\tif(card==undefined) return;\n\t    \t\t\t\tvar range;\n\t    \t\t\t\tvar select=get.copy(get.info(card).selectTarget);\n\t    \t\t\t\tif(select==undefined){\n\t    \t\t\t\t\tif(get.info(card).filterTarget==undefined) return[0,0];\n\t    \t\t\t\t\trange=[1,1];\n\t    \t\t\t\t}\n\t    \t\t\t\telse if(typeof select=='number') range=[select,select];\n\t    \t\t\t\telse if(get.itemtype(select)=='select') range=select;\n\t    \t\t\t\telse if(typeof select=='function') range=select(card,player);\n\t    \t\t\t\tgame.checkMod(card,player,range,'selectTarget',player);\n\t    \t\t\t\treturn range;\n\t \t\t\t\t\t\t});\n\t \t\t\t\t\t\tnext.set('prompt',event.prompt||('选择'+get.translation(target)+'使用'+get.translation(card)+'的目标'));\n\t \t\t\t\t\t\tnext.set('prompt2','或点「取消」令其将此牌置入弃牌堆');\n\t \t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.useCard(card,event.targets2||result.targets,false,'noai');\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.lose(card,ui.discardPile);\n\t\t\t\t\t\ttarget.$throw(card);\n\t\t\t\t\t\tgame.log(target,'将',card,'置入了弃牌堆');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以观看一名其他角色的手牌，然后选择一项：将其中的一张牌置入弃牌堆，或以该角色的视角使用其中的一张，然后摸一张牌。"},"ao_xishi":{"name":"习事","script":"{trigger: {player: [\"useCard\",\"respond\"],target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player,name){\n\t\t\t\t\treturn (name=='useCard'||name=='respond'||event.player!=player)&&get.suit(event.card)=='diamond';\n\t\t\t\t},content: function (){player.draw()},}","info":"锁定技，当你使用或打出♦牌时，或其他角色使用♦牌指定你为目标后，你摸一张牌。"},"ao_kuihun":{"name":"窥魂","script":"{trigger: {global: \"dying\",},logTarget: \"player\",line: \"thunder\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!trigger.player.countCards('h')) event.finish();\n\t\t\t\t\telse player.chooseButton(['选择一张牌作为「蝶」',trigger.player.getCards('h')]).set('ai',function(button){\n\t\t\t\t\t\tvar val=get.buttonValue(button);\n\t\t\t\t\t\tif(get.attitude(_status.event.player,get.owner(button.link))<=0) return 10+val;\n\t\t\t\t\t\tif(val<=0) return 20;\n\t\t\t\t\t\tif(button.link.name=='tao'||button.link.name=='jiu') return 0;\n\t\t\t\t\t\treturn 1/val;\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.lose(result.links,ui.special,'visible','toStorage');\n\t\t\t\t\t\ttrigger.player.$give(result.links,player,false);\n\t\t\t\t\t\tplayer.markAuto('ao_diegui',result.links);\n\t\t\t\t\t\tgame.log(result.links,'飞向了',player);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},locked: \"false\",mod: {targetInRange: function (card,player){\n\t\t\t\t\t\tvar list=player.getStorage('ao_diegui');\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(get.suit(list[i],false)==get.suit(card,false)) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},cardUsable: function (card,player){\n\t\t\t\t\t\tvar list=player.getStorage('ao_diegui');\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(get.suit(list[i],false)==get.suit(card,false)) return Infinity;\n\t\t\t\t\t\t}\n\t\t\t\t\t},maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.getStorage('ao_diegui').length;\n\t\t\t\t\t},},}","info":"其他角色进入濒死状态时，你可以摸一张牌，然后观看其手牌并将其中一张牌置于你的武将牌上，称为「蝶」。你使用与一张「蝶」花色相同的牌时无距离和次数限制。你的手牌上限+X（X为蝶数）。"},"ao_shixin":{"name":"释心","script":"{derivation: \"ao_diegui\",trigger: {player: \"phaseZhunbeiBegin\",},juexingji: \"true\",forced: \"true\",skillAnimation: \"true\",animationColor: \"key\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\tvar list=player.getStorage('ao_diegui');\n\t\t\t\t\tvar list2=[];\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tlist2.add(get.suit(list[i],false));\n\t\t\t\t\t}\n\t\t\t\t\treturn list2.length>2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('ao_shixin');\n\t\t\t\t\tplayer.removeSkill('ao_kuihun');\n\t\t\t\t\tplayer.addSkill('ao_diegui');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你的「蝶」中包含至少三种花色，则你加1点体力上限并回复1点体力，失去〖窥魂〗并获得〖蝶归〗。"},"yuzuru_wuxin":{"name":"无心","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterTarget:function(){\n\t\t\t\t\t\t\tif(ui.selected.cards.length) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:function(){\n\t\t\t\t\t\t\tif(ui.selected.targets.length) return false;\n\t\t\t\t\t\t\treturn lib.filter.cardDiscardable.apply(this,arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectTarget:function(){\n\t\t\t\t\t\t\tif(!ui.selected.cards.length) return [1,1];\n\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectCard:function(){\n\t\t\t\t\t\t\tif(ui.selected.targets.length) return [0,0];\n\t\t\t\t\t\t\tif(!ui.selected.cards.length) return [0,2];\n\t\t\t\t\t\t\treturn [2,2];\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt2('yuzuru_wuxin'),\n\t\t\t\t\t\tcomplexCard:true,\n\t\t\t\t\t\tcomplexTarget:true,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player.hp>3) return 0;\n\t\t\t\t\t\t\treturn (player.getDamagedHp()*2)-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tif(player.hp<4||target.hasSkillTag('nogain')) return 0;\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(result.cards.length){\n\t\t\t\t\t\t\tplayer.logSkill('yuzuru_wuxin');\n\t\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\tplayer.logSkill('yuzuru_wuxin',target,{color:[194,117,92]});\n\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以选择一项：失去1点体力并令一名角色摸两张牌，或弃置两张牌并回复1点体力。"},"yuzuru_deyi":{"name":"得义","script":"{derivation: [\"yuzuru_kunfen\",\"yuzuru_quji\",\"yuzuru_wangsheng\",\"yuzuru_kunfen_rewrite\",\"yuzuru_quji_rewrite\"],trigger: {global: \"dieAfter\",},forced: \"true\",unique: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"orange\",content: function (){\n\t\t\t\t\tplayer.awakenSkill('yuzuru_deyi');\n\t\t\t\t\tplayer.removeSkill('yuzuru_wuxin');\n\t\t\t\t\tplayer.addSkillLog('yuzuru_kunfen');\n\t\t\t\t\tplayer.addSkillLog('yuzuru_quji');\n\t\t\t\t\tplayer.addSkillLog('yuzuru_wangsheng');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},}","info":"觉醒技，当有其他角色死亡后，你减1点体力上限并回复1点体力，失去技能〖无心〗，获得技能〖往生〗〖困奋〗和〖去疾〗。"},"kanade_mapo":{"name":"麻婆","script":"{derivation: \"mapodoufu\",enable: \"chooseToUse\",viewAs: {name: \"mapodoufu\",},filterCard: {suit: \"heart\",},viewAsFilter: function (player){\n\t\t\t\t\treturn player.countCards('he',{suit:'heart'})>0;\n\t\t\t\t},position: \"he\",mod: {selectTarget: function (card,player,range){\n\t\t\t\t\t\tif(card.name=='mapodoufu'&&range[1]!=-1) range[1]++;\n\t\t\t\t\t},},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(game.countPlayer(function(current){\n\t\t\t\t\t\treturn player.canUse('mapodoufu',current)&&get.effect(current,{name:'mapodoufu'},player,player)>0;\n\t\t\t\t\t})>1) return 6-get.value(card);\n\t\t\t\t\treturn 4-get.value(card);\n\t\t\t\t},ai: {order: \"1\",value: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn player==target?2:1;\n\t\t\t\t\t\t},},},}","info":"你可以将一张♥牌当做【麻婆豆腐】使用。你使用的【麻婆豆腐】可以多指定一个目标。"},"kanade_benzhan":{"name":"奔战","script":"{trigger: {global: [\"useCard\",\"respond\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn Array.isArray(event.respondTo)&&event.respondTo[0]!=event.player&&[event.respondTo[0],event.player].contains(player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.type=get.type(trigger.card)=='basic';\n\t\t\t\t\tvar prompt=event.type?'令一名角色摸两张牌或弃置两张牌':'令一名角色回复1点体力或对其造成1点伤害';\n\t\t\t\t\tplayer.chooseTarget(get.prompt('kanade_benzhan'),prompt).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(_status.event.getParent().type){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return -att;\n\t\t\t\t\t\t\tif(target.countCards('he')==1&&att<0) att/=2;\n\t\t\t\t\t\t\treturn Math.abs(att)*(1+0.1*(Math.min(0,5-target.countCards('h'))))\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Math.max(get.recoverEffect(target,player,player),get.damageEffect(target,player,player))\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('kanade_benzhan',target,'thunder');\n\t\t\t\t\t\tvar trans=get.translation(target);\n\t\t\t\t\t\tvar list;\n\t\t\t\t\t\tif(event.type){\n\t\t\t\t\t\t\tif(!target.countCards('he')) event._result={index:0};\n\t\t\t\t\t\t\telse list=['令'+trans+'摸两张牌','令'+trans+'弃置两张牌'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(target.isHealthy()) event._result={index:1};\n\t\t\t\t\t\t\telse list=['令'+trans+'回复1点体力','对'+trans+'造成1点伤害'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseControl().set('choiceList',list).set('choice',function(){\n\t\t\t\t\t\t\tif(event.type) return (get.attitude(player,target)>0)?0:1;\n\t\t\t\t\t\t\treturn (get.recoverEffect(target,player,player)>get.damageEffect(target,player,player))?0:1;\n\t\t\t\t\t\t}()).set('ai',function(){\n\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.addExpose(0.2);\n\t\t\t\t\tif(event.type){\n\t\t\t\t\t\tif(result.index==0) target.draw(2);\n\t\t\t\t\t\telse target.chooseToDiscard(2,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(result.index==0) target.recover();\n\t\t\t\t\t\telse target.damage();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用或打出牌响应其他角色，或其他角色使用或打出牌响应你后，若此牌为：基本牌，你可令一名角色弃置两张牌或令一名角色摸两张牌；非基本牌，你可对一名角色造成1点伤害或令一名其他角色回复1点体力。"},"mio_tuifu":{"name":"推腐","script":"{trigger: {global: \"damageBegin1\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.sex=='male'&&event.player.sex=='male';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"锁定技，当一名男性角色对一名男性角色造成伤害时，你摸一张牌。"},"mio_tishen":{"name":"替身","script":"{trigger: {player: \"phaseZhunbeiBegin\",},limited: \"true\",unique: \"true\",charlotte: \"true\",skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hp<=1||player.getDamagedHp()>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\t\tvar num=player.maxHp-player.hp;\n\t\t\t\t\tplayer.recover(num);\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\tif(_status.characterlist&&_status.characterlist.contains('key_midori')){\n\t\t\t\t\t\tplayer.reinit('key_mio','key_midori',false);\n\t\t\t\t\t\t_status.characterlist.remove('key_midori');\n\t\t\t\t\t\t_status.characterlist.add('key_mio');\n\t\t\t\t\t}\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，准备阶段，你可以将体力值回复至体力上限并摸等同于回复量的牌，然后将武将牌替换为【西园美鸟】。"},"midori_nonghuan":{"name":"弄幻","script":"{enable: \"phaseUse\",charlotte: \"true\",filter: function (event,player){\n\t\t\t\t\treturn (player.getStat('skill').midori_nonghuan||0)<player.hp;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tvar stat=player.getStat('midori_nonghuan');\n\t\t\t\t\treturn target!=player&&(!stat||!stat.contains(target))&&target.countGainableCards(player,'hej')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar stat=player.getStat();\n\t\t\t\t\tif(!stat.midori_nonghuan) stat.midori_nonghuan=[];\n\t\t\t\t\tstat.midori_nonghuan.push(target);\n\t\t\t\t\tplayer.gainPlayerCard(target,'hej',true);\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.countCards('he')>0) player.chooseCard('he',true,'交给'+get.translation(target)+'一张牌');\n\t\t\t\t\telse event.goto(3);\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.gain(result.cards,player,'giveAuto');\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar history=game.getGlobalHistory('cardMove');\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tif(history[i].getParent('midori_nonghuan')==event) history.splice(i--,1);\n\t\t\t\t\t}\n\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\tvar history=current.getHistory('lose');\n\t\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\t\tif(history[i].getParent('midori_nonghuan')==event) history.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar history=current.getHistory('gain');\n\t\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\t\tif(history[i].getParent('midori_nonghuan')==event) history.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},ai: {order: \"9\",result: {player: function (){\n\t\t\t\t\t\t\treturn lib.card.shunshou.ai.result.player.apply(this,arguments);\n\t\t\t\t\t\t},target: function (){\n\t\t\t\t\t\t\treturn lib.card.shunshou.ai.result.target.apply(this,arguments);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限X次（X为你的体力值），你可以获得一名本阶段内未选择过的其他角色的区域内的一张牌。你摸一张牌，然后将一张牌交给该角色。然后你清除此技能结算过程中所有卡牌移动事件的移动记录。"},"midori_tishen":{"name":"替身","script":"{trigger: {player: \"phaseZhunbeiBegin\",},limited: \"true\",charlotte: \"true\",unique: \"true\",skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hp<=1||player.getDamagedHp()>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill(event.name);\n\t\t\t\t\tvar num=player.maxHp-player.hp;\n\t\t\t\t\tplayer.recover(num);\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\tif(_status.characterlist&&_status.characterlist.contains('key_mio')){\n\t\t\t\t\t\tplayer.reinit('key_midori','key_mio',false);\n\t\t\t\t\t\t_status.characterlist.remove('key_mio');\n\t\t\t\t\t\t_status.characterlist.add('key_midori');\n\t\t\t\t\t}\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，准备阶段，你可以将体力值回复至体力上限并摸等同于回复量的牌，然后将武将牌替换为【西园美鱼】。"},"kyoko_juwu":{"name":"聚物","script":"{trigger: {global: [\"loseAfter\",\"cardsDiscardAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&player!=_status.currentPhase&&event.cards&&event.cards.filter(function(card){\n\t\t\t\t\t\treturn get.position(card,true)=='d'&&get.type(card,false)=='equip';\n\t\t\t\t\t}).length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=trigger.cards.filter(function(card){\n\t\t\t\t\t\treturn get.position(card,true)=='d'&&get.type(card,false)=='equip';\n\t\t\t\t\t});\n\t\t\t\t\tplayer.chooseButton([get.prompt('kyoko_juwu'),cards],[1,cards.length]).set('ai',function(){return 1});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.links,'gain2','log');\n\t\t\t\t\t\tplayer.logSkill('kyoko_juwu');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"你的回合外，当有装备牌进入弃牌堆后，若这些牌不是从你的区域移动的，则你可以获得这些牌。"},"kyoko_zhengyi":{"name":"整遗","script":"{group: [\"kyoko_jingce\",\"kyoko_shelie\",\"kyoko_zhiheng\"],count: function (player){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tplayer.countCards('e',function(card){\n\t\t\t\t\t\tlist.add(get.suit(card,player));\n\t\t\t\t\t});\n\t\t\t\t\treturn list.length;\n\t\t\t\t},}","info":"锁定技，若你装备区的花色数：大于等于1，你视为拥有〖精策〗；大于等于2，你视为拥有〖涉猎〗：大于等于3，你视为拥有〖制衡〗；大于等于4，你将〖精策〗和〖制衡〗改为界限突破版本。"},"shizuru_nianli":{"name":"念力","script":"{enable: \"chooseToUse\",charlotte: \"true\",prompt: \"展示一张♦/♣/♥/♠手牌，然后视为使用一张雷杀/闪/桃/无懈可击\",viewAs: function (cards,player){\n\t\t\t\t\tvar name=false;\n\t\t\t\t\tvar nature=null;\n\t\t\t\t\tswitch(get.suit(cards[0],player)){\n\t\t\t\t\t\tcase 'club':name='shan';break;\n\t\t\t\t\t\tcase 'diamond':name='sha';nature='thunder';break;\n\t\t\t\t\t\tcase 'spade':name='wuxie';break;\n\t\t\t\t\t\tcase 'heart':name='tao';break;\n\t\t\t\t\t}\n\t\t\t\t\tif(name) return {name:name,nature:nature,isCard:true};\n\t\t\t\t\treturn null;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(_status.event.type=='phase'){\n\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\tvar name2;\n\t\t\t\t\t\tvar list=['sha','tao'];\n\t\t\t\t\t\tvar map={sha:'diamond',tao:'heart'}\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar name=list[i];\n\t\t \t\t\t\tif(player.countCards('h',function(card){\n\t\t \t\t\t\t\treturn get.suit(card,player)==map[name];\n\t\t \t\t\t\t})>0&&player.getUseValue({name:name,nature:name=='sha'?'fire':null})>0){\n\t\t \t\t\t\t\tvar temp=get.order({name:name,nature:name=='sha'?'fire':null});\n\t\t \t\t\t\t\tif(temp>max){\n\t\t \t\t\t\t\t\tmax=temp;\n\t\t \t\t\t\t\t\tname2=map[name];\n\t\t \t\t\t\t\t}\n\t\t \t\t\t\t}\n\t\t \t\t\t}\n\t\t \t\t\tif(name2==get.suit(card,player)) return 1;\n\t\t \t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn 1;\n\t\t\t\t},ignoreMod: \"true\",filterCard: function (card,player,event){\n\t\t\t\t\tevent=event||_status.event;\n\t\t\t\t\tvar filter=event._backup.filterCard;\n\t\t\t\t\tvar name=get.suit(card,player);\n\t\t\t\t\tif(name=='club'&&filter({name:'shan'},player,event)) return true;\n\t\t\t\t\tif(name=='diamond'&&filter({name:'sha',nature:'thunder'},player,event)) return true;\n\t\t\t\t\tif(name=='spade'&&filter({name:'wuxie'},player,event)) return true;\n\t\t\t\t\tif(name=='heart'&&filter({name:'tao'},player,event)) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('shizuru_nianli_round')) return false;\n\t\t\t\t\tvar filter=event.filterCard;\n\t\t\t\t\tif(filter({name:'sha',nature:'thunder'},player,event)&&player.countCards('h',{suit:'diamond'})) return true;\n\t\t\t\t\tif(filter({name:'shan'},player,event)&&player.countCards('h',{suit:'club'})) return true;\n\t\t\t\t\tif(filter({name:'tao'},player,event)&&player.countCards('h',{suit:'heart'})) return true;\n\t\t\t\t\tif(filter({name:'wuxie'},player,event)&&player.countCards('h',{suit:'spade'})) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},precontent: function (){\n\t\t\t\t\tplayer.logSkill('shizuru_nianli');\n\t\t\t\t\tplayer.addTempSkill('shizuru_nianli_round','roundStart');\n\t\t\t\t\tplayer.showCards(get.translation(player)+'发动了【念力】',event.result.cards.slice(0));\n\t\t\t\t\tevent.result.card.cards=[];\n\t\t\t\t\tevent.result.cards=[];\n\t\t\t\t\tdelete event.result.skill;\n\t\t\t\t\tdelete event.result.card.suit;\n\t\t\t\t\tdelete event.result.card.number;\n\t\t\t\t\tevent.getParent().addCount=false;\n\t\t\t\t\tevent.getParent().shizuru_nianli=true;\n\t\t\t\t},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(player.hasSkill('shizuru_nianli_round')) return false;\n\t\t\t\t\t\tvar name;\n\t\t\t\t\t\tswitch(tag){\n\t\t\t\t\t\t\tcase 'respondSha':name='diamond';break;\n\t\t\t\t\t\t\tcase 'respondShan':name='club';break;\n\t\t\t\t\t\t\tcase 'save':name='heart';break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.countCards('h',{suit:name})) return false;\n\t\t\t\t\t},order: function (item,player){\n\t\t\t\t\t\tif(player&&_status.event.type=='phase'){\n\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\tvar list=['sha','tao'];\n\t\t\t\t\t\t\tvar map={sha:'diamond',tao:'heart'}\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t \t\t\t\tif(player.countCards('h',function(card){\n\t\t \t\t\t\t\t\treturn get.suit(card,player)==map[name];\n\t\t \t\t\t\t\t})>0&&player.getUseValue({name:name,nature:name=='sha'?'thunder':null})>0){\n\t\t\t \t\t\t\t\tvar temp=get.order({name:name,nature:name=='sha'?'thunder':null});\n\t\t\t \t\t\t\t\tif(temp>max) max=temp;\n\t\t\t \t\t\t\t}\n\t\t\t \t\t\t}\n\t\t\t \t\t\tmax/=1.1;\n\t\t\t \t\t\treturn max;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 2;\n\t\t\t\t\t},},hiddenCard: function (player,name){\n\t\t\t\t\tif(name=='wuxie') return player.countCards('h',function(card){\n\t\t\t\t\t\treturn _status.connectMode||get.suit(card)=='spade';\n\t\t\t\t\t})>0&&!player.hasSkill('shizuru_nianli_round');\n\t\t\t\t\tif(name=='tao') return player.countCards('h',{suit:'heart'})>0&&!player.hasSkill('shizuru_nianli_round');\n\t\t\t\t\treturn false;\n\t\t\t\t},group: \"shizuru_nianli_clear\",subSkill: {round: {mark: \"true\",intro: {content: \"本轮已发动\",},sub: \"true\",},clear: {trigger: {player: \"useCardAfter\",},lastDo: \"true\",silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.getParent().shizuru_nianli==true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.getHistory('useCard').remove(trigger);\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"每轮限一次，你可以展示一张♦/♣/♥/♠手牌，然后视为使用一张不计入次数限制和记录的雷【杀】/【闪】/【桃】/【无懈可击】。"},"shizuru_benzhan":{"name":"奔战","script":"{trigger: {global: [\"useCard\",\"respond\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn Array.isArray(event.respondTo)&&event.respondTo[0]!=event.player&&[event.respondTo[0],event.player].contains(player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.type=get.type(trigger.card)=='basic';\n\t\t\t\t\tvar prompt=event.type?'令一名角色摸两张牌或弃置两张牌':'令一名角色回复1点体力或对其造成1点伤害';\n\t\t\t\t\tplayer.chooseTarget(get.prompt('shizuru_benzhan'),prompt).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(_status.event.getParent().type){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return -att;\n\t\t\t\t\t\t\tif(target.countCards('he')==1&&att<0) att/=2;\n\t\t\t\t\t\t\treturn Math.abs(att)*(1+0.1*(Math.min(0,5-target.countCards('h'))))\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Math.max(get.recoverEffect(target,player,player),get.damageEffect(target,player,player))\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('shizuru_benzhan',target,'thunder');\n\t\t\t\t\t\tvar trans=get.translation(target);\n\t\t\t\t\t\tvar list;\n\t\t\t\t\t\tif(event.type){\n\t\t\t\t\t\t\tif(!target.countCards('he')) event._result={index:0};\n\t\t\t\t\t\t\telse list=['令'+trans+'摸两张牌','令'+trans+'弃置两张牌'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(target.isHealthy()) event._result={index:1};\n\t\t\t\t\t\t\telse list=['令'+trans+'回复1点体力','对'+trans+'造成1点伤害'];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseControl().set('choiceList',list).set('choice',function(){\n\t\t\t\t\t\t\tif(event.type) return (get.attitude(player,target)>0)?0:1;\n\t\t\t\t\t\t\treturn (get.recoverEffect(target,player,player)>get.damageEffect(target,player,player))?0:1;\n\t\t\t\t\t\t}()).set('ai',function(){\n\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.addExpose(0.2);\n\t\t\t\t\tif(event.type){\n\t\t\t\t\t\tif(result.index==0) target.draw(2);\n\t\t\t\t\t\telse target.chooseToDiscard(2,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(result.index==0) target.recover();\n\t\t\t\t\t\telse target.damage();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用或打出牌响应其他角色，或其他角色使用或打出牌响应你后，若此牌为：基本牌，你可令一名角色弃置两张牌或令一名角色摸两张牌；非基本牌，你可对一名角色造成1点伤害或令一名其他角色回复1点体力。"},"shiorimiyuki_banyin":{"name":"伴音","script":"{trigger: {player: [\"damageEnd\",\"recoverEnd\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.isDamaged();\n\t\t\t\t\t})\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('shiorimiyuki_banyin'),'令一名其他角色回复1点体力',lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.recoverEffect(target,player,player);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('shiorimiyuki_banyin',target);\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到伤害或回复体力后，你可令一名其他角色回复1点体力。"},"shiorimiyuki_tingxian":{"name":"铤险","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControl('一张','两张','三张','cancel2').set('prompt',get.prompt2('shiorimiyuki_tingxian')).set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar max=Math.min(player.hp+1,player.maxHp)\n\t\t\t\t\t\tvar min=Math.min(Math.max(max-2,max-player.hp),3);\n\t\t\t\t\t\tif(min) return min-1;\n\t\t\t\t\t\treturn 3;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2') return;\n\t\t\t\t\tplayer.logSkill('shiorimiyuki_tingxian');\n\t\t\t\t\tvar num=1+result.index;\n\t\t\t\t\tplayer.draw(num).gaintag=['shiorimiyuki_tingxian'];\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.addTempSkill('shiorimiyuki_tingxian2');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以摸至多三张牌。若如此做，你回复1点体力，且此阶段结束时你失去X点体力。（X为你获得的牌中仍在手牌区的牌的数量）"},"miki_shenqiang":{"name":"神枪","script":"{trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.equip(game.createCard2('miki_hydrogladiator','club',6));\n\t\t\t\t\tplayer.equip(game.createCard2('miki_binoculars','diamond',6));\n\t\t\t\t},mod: {canBeDiscarded: function (card){\n\t\t\t\t\t\tif(get.position(card)=='e'&&['equip1','equip5'].contains(get.subtype(card))) return false;\n\t\t\t\t\t},},}","info":"锁定技，游戏开始时，你将一张【海德洛格拉迪尔特·改】和一张【望远镜】置入你的装备区。你装备区内的武器牌和宝物牌不能被其他角色弃置。"},"miki_huanmeng":{"name":"幻梦","script":"{inherit: \"kamome_huanmeng\",trigger: {player: \"phaseZhunbeiBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.modeSwapPlayer(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar num=1+player.countCards('e');\n\t\t\t\t\tvar cards=get.cards(num);\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t\tvar top=[];\n\t\t\t\t\t\tvar judges=player.getCards('j');\n\t\t\t\t\t\tvar stopped=false;\n\t\t\t\t\t\tif(!player.hasWuxie()){\n\t\t\t\t\t\t\tfor(var i=0;i<judges.length;i++){\n\t\t\t\t\t\t\t\tvar judge=get.judge(judges[i]);\n\t\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\t\treturn judge(b)-judge(a);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(judge(cards[0])<0){\n\t\t\t\t\t\t\t\t\tstopped=true;break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar bottom;\n\t\t\t\t\t\tif(!stopped){\n\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.value(b,player)-get.value(a,player);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\t\tif(get.value(cards[0],player)<=5) break;\n\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom=cards;\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(bottom.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(online,player,cards){\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tplayer=player||event.player;\n\t\t\t\t\t\tcards=cards||event.cards;\n\t\t\t\t\t\tevent.top=[];\n\t\t\t\t\t\tevent.bottom=[];\n\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('按顺序选择置于牌堆顶的牌（先选择的在上）',cards);\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('pointerdiv');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result='ai';\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevent.control=ui.create.control('ok','pileTop','pileBottom',function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link=='ok'){\n\t\t\t\t\t\t\t\tif(online){\n\t\t\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\t\t\ttop:[],\n\t\t\t\t\t\t\t\t\t\tbottom:[]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.top.push(event.top[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.bottom.push(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tvar i;\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.insertBefore(event.top[i].link,ui.cardPile.firstChild);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(event.dialog.buttons[i].classList.contains('glow')==false&&\n\t\t\t\t\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.contains('target')==false)\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.dialog.buttons[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplayer.popup(get.cnNumber(event.top.length)+'上'+get.cnNumber(event.cards.length-event.top.length)+'下');\n\t\t\t\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(event.top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link=='pileTop'){\n\t\t\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆顶的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.status=false;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆底的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('selectable');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.button=function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link.classList.contains('target')){\n\t\t\t\t\t\t\t\tlink.classList.remove('target');\n\t\t\t\t\t\t\t\tevent.top.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link.classList.contains('glow')){\n\t\t\t\t\t\t\t\tlink.classList.remove('glow');\n\t\t\t\t\t\t\t\tevent.bottom.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(event.status){\n\t\t\t\t\t\t\t\tlink.classList.add('target');\n\t\t\t\t\t\t\t\tevent.top.unshift(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlink.classList.add('glow');\n\t\t\t\t\t\t\t\tevent.bottom.push(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.window=function(){\n\t\t\t\t\t\t\tfor(var i=0;i<_status.event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('target');\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('glow');\n\t\t\t\t\t\t\t\t_status.event.top.length=0;\n\t\t\t\t\t\t\t\t_status.event.bottom.length=0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t};\n\t\t\t\t\tevent.switchToAuto=switchToAuto;\n\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,true,event.player,event.cards);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.result=='ai'||!event.result){\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar top=event.result.top||[];\n\t\t\t\t\t\tvar bottom=event.result.bottom||[];\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(!top.contains(event.cards[i])&&!bottom.contains(event.cards[i])){\n\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(event.cards.length-top.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"准备阶段开始时，你可以观看牌堆顶的X+1张牌并可以按任意顺序置于牌堆顶或牌堆底。（X为你装备区内的牌数）"},"miki_zhiluo":{"name":"治裸","script":"{trigger: {global: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn !event.player.countCards('e')&&player.inRange(event.player);\n\t\t\t\t},direct: \"true\",locked: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!player.canUse('sha',trigger.player,false)) event._result={index:0};\n\t\t\t\t\telse player.chooseControl().set('prompt','制裸：请选择一项').set('choiceList',[\n\t\t\t\t\t\t'摸一张牌',\n\t\t\t\t\t\t'视为对'+get.translation(trigger.player)+'使用一张【杀】',\n\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\tif(get.effect(_status.event.getTrigger().player,{name:'sha'},_status.event.player)>0) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.logSkill('miki_zhiluo');\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse player.useCard({name:'sha',isCard:true},trigger.player,'miki_zhiluo');\n\t\t\t\t},}","info":"锁定技，一名其他角色的回合结束时，若其在你的攻击范围内且其装备区内没有牌，则你选择：①摸一张牌。②视为对其使用一张【杀】。"},"shiori_huijuan":{"name":"绘卷","script":"{trigger: {global: \"phaseJieshuBegin\",},direct: \"true\",locked: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.isPhaseUsing()&&['basic','trick'].contains(get.type(evt.card))&&player.hasUseTarget({\n\t\t\t\t\t\t\tname:evt.card.name,\n\t\t\t\t\t\t\tnature:evt.card.nature,\n\t\t\t\t\t\t\tisCard:true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}).length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\ttrigger.player.getHistory('useCard',function(evt){\n\t\t\t\t\t\tif(!evt.isPhaseUsing()||!['basic','trick'].contains(get.type(evt.card))) return;\n\t\t\t\t\t\tif(evt.card.name=='sha'&&evt.card.nature) list.add('sha:'+evt.card.nature);\n\t\t\t\t\t\telse list.add(evt.card.name);\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tif(list[i].indexOf('sha:')==0) list[i]=['基本','','sha',list[i].slice(4)];\n\t\t\t\t\t\telse list[i]=[get.type(list[i]),'',list[i]];\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton([get.prompt('shiori_huijuan'),[list,'vcard']]).set('filterButton',function(button){\n\t\t\t\t\t\treturn player.hasUseTarget({name:button.link[2],nature:button.link[3],isCard:true});\n\t\t\t\t\t}).set('ai',function(button){\n\t\t\t\t\t\treturn player.getUseValue({name:button.link[2],nature:button.link[3],isCard:true});\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('shiori_huijuan');\n\t\t\t\t\t\tplayer.chooseUseTarget(true,{name:result.links[0][2],nature:result.links[0][3],isCard:true});\n\t\t\t\t\t\tplayer.getStat('skill').shiori_huijuan=1;\n\t\t\t\t\t}\n\t\t\t\t},group: \"shiori_huijuan_discard\",}","info":"锁定技，其他角色的结束阶段开始时，你可以视为使用一张该角色本回合出牌阶段内使用过的基本牌或普通锦囊牌。准备阶段开始时，若你自上个回合起以此法使用的牌数不小于X，则你选择一项：①弃置装备区或判定区内的一张牌。②跳过本回合的出牌阶段。（X为场上玩家数的一半且至少为2）"},"kaori_siyuan":{"name":"思愿","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',lib.skill.kaori_siyuan.filterCard);\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn ['equip','delay'].contains(get.type(card,false));\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\tif(get.type(card,false)=='delay') return target.canAddJudge({name:card.name});\n\t\t\t\t\treturn target.isEmpty(get.subtype(card,false));\n\t\t\t\t},discard: \"false\",lose: \"false\",prepare: \"give\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar card=cards[0];\n\t\t\t\t\tif(get.type(card,false)=='equip') target.equip(card);\n\t\t\t\t\telse target.addJudge(card);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i of lib.inpile){\n\t\t\t\t\t\tvar type=get.type(i);\n\t\t\t\t\t\tif(type=='basic'||type=='trick') list.push([type,'',i]);\n\t\t\t\t\t\tif(i=='sha'){\n\t\t\t\t\t\t\tlist.push([type,'',i,'fire']);\n\t\t\t\t\t\t\tlist.push([type,'',i,'thunder']);\n\t\t\t\t\t\t\tlist.push([type,'',i,'ice']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton(['是否视为使用一张基本牌或普通锦囊牌？',[list,'vcard']]).set('filterButton',function(button){\n\t\t\t\t\t\treturn player.hasUseTarget({name:button.link[2],nature:button.link[3],isCard:true});\n\t\t\t\t\t}).set('ai',function(button){\n\t\t\t\t\t\treturn player.getUseValue({name:button.link[2],nature:button.link[3],isCard:true});\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseUseTarget(true,{name:result.links[0][2],nature:result.links[0][3],isCard:true});\n\t\t\t\t\t}\n\t\t\t\t},ai: {basic: {order: \"10\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\tif(card) return get.effect(target,card,target,target);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以将一张装备牌或延时锦囊牌置于一名其他角色的装备区内，然后可以视为使用一张基本牌或普通锦囊牌。"},"akiko_dongcha":{"name":"洞察","script":"{trigger: {global: \"gameDrawAfter\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.mode()=='identity';\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar func=function(){\n\t\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\t\tcurrent.setIdentity();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tif(player==game.me) func();\n\t\t\t\t\telse if(player.isOnline()) player.send(func);\n\t\t\t\t\tif(!player.storage.zhibi) player.storage.zhibi=[];\n\t\t\t\t\tplayer.storage.zhibi.addArray(game.players);\n\t\t\t\t},ai: {viewHandcard: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(player==arg) return false;\n\t\t\t\t\t},},}","info":"锁定技，其他角色的手牌对你可见。"},"abyusa_jueqing":{"name":"绝情","script":"{trigger: {source: \"damageBegin2\",},skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&!player.hasSkill('abyusa_jueqing_1st');\n\t\t\t\t},prompt2: function (event,player){\n\t\t\t\t\tvar num=get.cnNumber(2*event.num);\n\t\t\t\t\treturn '防止即将令其造成的伤害，改为令其失去'+num+'点体力并对自己造成'+num+'点伤害';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hp>event.num*2&&event.player.hp>event.num&&event.player.hp<=2*event.num&&get.attitude(player,event.player)<0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\ttrigger.player.loseHp(2*trigger.num);\n\t\t\t\t\tplayer.damage(2*trigger.num);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.addSkill('abyusa_jueqing_1st');\n\t\t\t\t},derivation: \"abyusa_jueqing_rewrite\",}","info":"当你对其他角色造成伤害时，你可以防止此伤害。若如此做，你令其失去2X点体力，修改〖绝情〗并对自己造成2X点伤害。"},"abyusa_dunying":{"name":"遁影","script":"{trigger: {player: [\"phaseZhunbeiBegin\",\"phaseJieshuBegin\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(player.getDamagedHp());\n\t\t\t\t},mod: {globalTo: function (from,to,num){\n\t\t\t\t\t\treturn num+to.getDamagedHp();\n\t\t\t\t\t},},}","info":"锁定技，其他角色计算与你的距离时+X。准备阶段和结束阶段，你摸X张牌（X为你已损失的体力值）。"},"godan_yuanyi":{"name":"远忆","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=game.roundNumber;\n\t\t\t\t\tif(num&&typeof num=='number') player.draw(Math.min(3,num));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar next=player.phaseUse();\n\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\ttrigger.next.push(next);\n\t\t\t\t},}","info":"锁定技，回合开始时，你摸X张牌并进行一个额外的出牌阶段。（X为游戏轮数且至多为3）"},"godan_feiqu":{"name":"肥躯","script":"{inherit: \"doruji_feiqu\",trigger: {player: \"useCard\",target: \"useCardToTargeted\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.name=='useCard') trigger.directHit.addArray(game.players);\n\t\t\t\t\telse trigger.directHit.add(player);\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\treturn arg.card.name=='sha';\n\t\t\t\t\t},},global: \"doruji_feiqu_ai\",}","info":"锁定技，当你使用【杀】时，或你成为【杀】的目标后，你令此【杀】不可被响应。"},"godan_xiaoyuan":{"name":"消元","script":"{trigger: {player: \"changeHp\",},forced: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"soil\",filter: function (event,player){\n\t\t\t\t\treturn event.num<0&&player.hp<4;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('godan_xiaoyuan');\n\t\t\t\t\tplayer.loseMaxHp(3);\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\tplayer.removeSkill('godan_feiqu');\n\t\t\t\t},}","info":"觉醒技，当你扣减体力时，若你的体力值小于4，则你减3点体力上限并摸三张牌，失去【肥躯】。"},"yuu_lveduo":{"name":"掠夺","script":"{mod: {cardEnabled: function (card,player){\n\t\t\t\t\t\tif(player.isTurnedOver()) return false;\n\t\t\t\t\t},cardRespondable: function (card,player){\n\t\t\t\t\t\tif(player.isTurnedOver()) return false;\n\t\t\t\t\t},cardSavable: function (card,player){\n\t\t\t\t\t\tif(player.isTurnedOver()) return false;\n\t\t\t\t\t},},trigger: {global: \"phaseBeginStart\",},filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&!event.player._trueMe&&!player.getStorage('yuu_lveduo').contains(event.player)&&!player.isTurnedOver()&&!player.hasSkill('yuu_lveduo4');\n\t\t\t\t},charlotte: \"true\",check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)>0) return false;\n\t\t\t\t\tif(event.player.hasJudge('lebu')||!event.player.needsToDiscard()) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.isTurnedOver()){\n\t\t\t\t\t\tplayer.addTempSkill('yuu_lveduo4','roundStart')\n\t\t\t\t\t\tif(!player.storage.yuu_lveduo) player.storage.yuu_lveduo=[];\n\t\t\t\t\t\tplayer.storage.yuu_lveduo.push(trigger.player);\n\t\t\t\t\t\ttrigger.player._trueMe=player;\n\t\t\t\t\t\tgame.addGlobalSkill('autoswap');\n\t\t\t\t\t\tif(trigger.player==game.me){\n\t\t\t\t\t\t\tgame.notMe=true;\n\t\t\t\t\t\t\tif(!_status.auto) ui.click.auto();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.addSkill('yuu_lveduo2');\n\t\t\t\t\t\ttrigger.player.addSkill('yuu_lveduo3');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每轮限一次，其他角色的回合开始时，若你本局游戏内未对其发动过〖掠夺〗且你的武将牌正面朝上，你可以将武将牌翻面并获得该角色本回合内的控制权。此回合结束时，你将武将牌翻回正面。锁定技，若你的武将牌背面朝上，则你不能使用或打出牌。"},"ryoichi_baoyi":{"name":"爆衣","script":"{trigger: {player: \"loseAfter\",global: [\"gainAfter\",\"equipAfter\",\"addJudgeAfter\",\"loseAsyncAfter\"],},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&(target.sex=='female'||target.sex=='male'&&target.countCards('hej')>0);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.es&&evt.es.length>0&&game.hasPlayer(function(target){\n\t\t\t\t\t\treturn lib.skill.ryoichi_baoyi.filterTarget;\n\t\t\t\t\t});\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=trigger.getl(player).es.length;\n\t\t\t\t\tplayer.draw(event.count);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.chooseTarget(true,lib.skill.ryoichi_baoyi.filterTarget,'请选择【爆衣】的目标').set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tif(target.sex=='female') target.loseHp();\n\t\t\t\t\t\telse player.discardPlayerCard(target,2,'hej',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.count&&game.hasPlayer(function(target){\n\t\t\t\t\t\treturn lib.skill.ryoichi_baoyi.filterTarget;\n\t\t\t\t\t})) event.goto(1);\n\t\t\t\t},}","info":"锁定技，当你失去装备区内的一张牌后，你摸一张牌，然后选择一项：①弃置一名其他男性角色区域内的两张牌。②令一名其他女性角色失去1点体力。"},"ryoichi_tuipi":{"name":"褪皮","script":"{mod: {targetEnabled: function (card){\n\t\t\t\t\t\tif(card.name=='shunshou'||card.name=='guohe') return false;\n\t\t\t\t\t},},trigger: {player: \"phaseDiscardBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.setContent(lib.skill.ryoichi_tuipi.phaseDiscardContent);\n\t\t\t\t},phaseDiscardContent: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tvar hs=player.getCards('he');\n\t\t\t\t\tnum+=hs.length;\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tif(game.checkMod(hs[i],player,false,'ignoredHandcard',player)==true){\n\t\t\t\t\t\t\tnum--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnum=Math.max(0,num-player.getHandcardLimit());\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\tif(event.num<=0) event.finish();\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(lib.config.show_phase_prompt){\n\t\t\t\t\t\t\tplayer.popup('弃牌阶段');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.trigger('phaseDiscard');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseToDiscard(num,true,'he');\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tevent.cards=result.cards;\n\t\t\t\t},}","info":"锁定技，你不是【顺手牵羊】和【过河拆桥】的合法目标。你装备区的牌于弃牌阶段内计入手牌上限。"},"kotori_yumo":{"name":"驭魔","script":"{trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",charlotte: \"true\",content: function (){\n\t\t\t\t\tvar list=['wei','shu','wu','qun'];\n\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\tif(!player.hasMark('kotori_yumo_'+i)){\n\t\t\t\t\t\t\tplayer.addMark('kotori_yumo_'+i,1,false);\n\t\t\t\t\t\t\tgame.log(player,'获得了一个',lib.translate['kotori_yumo_'+i].replace(/魔物/g,'【魔物】'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},group: [\"kotori_yumo_damage\",\"kotori_yumo_gain\"],}","info":"锁定技，游戏开始时，你获得蓝色、红色、绿色、黄色魔物各一个。当有角色受到伤害后，若你没有对应的标记，你根据其势力获得一个对应魔物：魏：蓝、蜀：红、吴：绿、群：黄、键：紫。回合开始时，你可以弃置一个对应的魔物并获得以下技能之一直到回合结束：蓝：魏业、红：蜀义、绿：吴耀、黄：群心、紫：键魂。"},"kotori_huazhan":{"name":"花绽","script":"{charlotte: \"true\",enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tvar list=['wei','shu','wu','qun','key'];\n\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\tif(player.hasMark('kotori_yumo_'+i)&&!player.getStorage('kotori_huazhan2').contains('kotori_yumo_'+i)){\n\t\t\t\t\t\t\tbool=true;break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn\tbool&&event.filterCard({name:'kaihua',isCard:true},player,event);\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\treturn ui.create.dialog('###花绽###'+lib.translate.kotori_huazhan_info);\n\t\t\t\t\t},chooseControl: function (event,player){\n\t\t\t\t\t\tvar list=['wei','shu','wu','qun','key'];\n\t\t\t\t\t\tvar list2=[];\n\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\tif(player.hasMark('kotori_yumo_'+i)&&!player.getStorage('kotori_huazhan2').contains('kotori_yumo_'+i))\tlist2.push('kotori_yumo_'+i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist2.push('cancel2');\n\t\t\t\t\t\treturn list2;\n\t\t\t\t\t},check: function (){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar list=['wei','shu','wu','qun','key'];\n\t\t\t\t\t\tvar list2=[];\n\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\tif(player.hasMark('kotori_yumo_'+i)&&!player.getStorage('kotori_huazhan2').contains('kotori_yumo_'+i))\tlist2.push('kotori_yumo_'+i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list2.contains('kotori_yumo_wei')) return 'kotori_yumo_wei';\n\t\t\t\t\t\tif(list2.contains('kotori_yumo_wu')) return 'kotori_yumo_wu';\n\t\t\t\t\t\tif(list2.contains('kotori_yumo_qun')) return 'kotori_yumo_qun';\n\t\t\t\t\t\tif(list2.contains('kotori_yumo_key')) return 'kotori_yumo_key';\n\t\t\t\t\t\tif(list2.contains('kotori_yumo_shu')&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.group=='shu';\n\t\t\t\t\t\t})) return 'kotori_yumo_shu';\n\t\t\t\t\t\treturn 'cancel2';\n\t\t\t\t\t},backup: function (result,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tmarkname:result.control,\n\t\t\t\t\t\t\tviewAs:{name:'kaihua',isCard:true},\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tprecontent:function(){\n\t\t\t\t\t\t\t\tdelete event.result.skill;\n\t\t\t\t\t\t\t\tvar name=lib.skill.kotori_huazhan_backup.markname;\n\t\t\t\t\t\t\t\tif(!player.storage.kotori_huazhan2) player.storage.kotori_huazhan2=[];\n\t\t\t\t\t\t\t\tplayer.storage.kotori_huazhan2.push(name);\n\t\t\t\t\t\t\t\tplayer.addTempSkill('kotori_huazhan2');\n\t\t\t\t\t\t\t\tplayer.popup('花绽',get.groupnature(name.slice(12)));\n\t\t\t\t\t\t\t\tgame.log(player,'发动了技能',lib.translate[name].replace(/魔物/g,'【花绽】'));\n\t\t\t\t\t\t\t\tplayer.removeMark(name,1,false);\n\t\t\t\t\t\t\t\t;game.log(player,'移去了一个',lib.translate[name].replace(/魔物/g,'【魔物】'));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('he',function(card){\n\t\t\t\t\t\t\t\tif(get.type(card)=='equip') return get.value(card)<8;\n\t\t\t\t\t\t\t\treturn get.value(card)<6;\n\t\t\t\t\t\t\t})<2) return 0;\n\t\t\t\t\t\t\treturn player.getUseValue({name:'kaihua'});\n\t\t\t\t\t\t},},},}","info":"每回合每种魔物限一次，你可将一个蓝色/红色/绿色/黄色/紫色魔物当做【树上开花】使用。"},"jojiro_shensu":{"name":"神速","script":"{group: [\"jojiro_shensu1\",\"jojiro_shensu2\",\"jojiro_shensu4\"],charlotte: \"true\",}","info":"你可以选择一至三项：1. 跳过判定阶段和摸牌阶段；2. 跳过出牌阶段并弃置一张装备牌；3. 跳过弃牌阶段并将你的武将牌翻面。你每选择一项，视为你对一名其他角色使用一张没有距离限制的【杀】"},"jojiro_shunying":{"name":"瞬影","script":"{trigger: {player: \"phaseEnd\",},forced: \"true\",charlotte: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('skipped').length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=player.getHistory('skipped').length;\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\tplayer.chooseToMove(num,'瞬影：移动至多'+get.cnNumber(num)+'格或失去1点体力');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool) player.loseHp();\n\t\t\t\t\telse player.draw(num);\n\t\t\t\t},}","info":"锁定技，回合结束时，若你本回合内跳过了阶段，则你选择一项：1.失去1点体力。2.移动至多X格并摸X张牌（X为你本回合内跳过的阶段数）。"},"shiroha_yuzhao":{"name":"预兆","script":"{trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",charlotte: \"true\",content: function (){\n\t\t\t\t\tplayer.markAuto('shiroha_yuzhao',game.cardsGotoSpecial(get.cards(game.countGroup())).cards);\n\t\t\t\t},marktext: \"兆\",intro: {onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},mark: function (dialog,content,player){\n\t\t\t\t\t\tif(content&&content.length){\n\t\t\t\t\t\t\tif(player==game.me||player.isUnderControl()){\n\t\t\t\t\t\t\t\tdialog.addAuto(content);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn '共有'+get.cnNumber(content.length)+'张牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},content: function (content,player){\n\t\t\t\t\t\tif(content&&content.length){\n\t\t\t\t\t\t\tif(player==game.me||player.isUnderControl()){\n\t\t\t\t\t\t\t\treturn get.translation(content);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn '共有'+get.cnNumber(content.length)+'张牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"shiroha_yuzhao_umi\",}","info":"锁定技，游戏开始时，你将牌堆顶的X张牌扣置于你的武将牌上，称为「兆」。一名角色的回合开始时，若你有「兆」且其至你的距离不大于1，则你将牌堆顶的X张牌扣置为「兆」，然后将等量的「兆」置于牌堆顶。（X为势力数）"},"shiroha_guying":{"name":"孤影","script":"{derivation: \"shiroha_guying_rewrite\",trigger: {player: \"damageBegin3\",source: \"damageBegin1\",},direct: \"true\",filter: function (event,player,name){\n\t\t\t\t\tif(!player.storage.shiroha_jiezhao&&player.hasSkill('shiroha_guying_temp')) return false;\n\t\t\t\t\tif(name=='damageBegin3') return true;\n\t\t\t\t\treturn player!=event.player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=event.triggername=='damageBegin3'?-1:1;\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\tif(player.storage.shiroha_jiezhao||!player.hasSkill('shiroha_guying')){\n\t\t\t\t\t\tif(num>0) player.chooseBool(get.prompt('shiroha_guying',trigger.player),'进行判定。若判定结果为黑色，则即将对其造成的伤害+1');\n\t\t\t\t\t\telse player.chooseBool(get.prompt('shiroha_guying'),'进行判定。若判定结果为红色，则即将受到的伤害-1');\n\t\t\t\t\t}\n\t\t\t\t\telse event._result={bool:true};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('shiroha_guying_temp');\n\t\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\t\treturn (get.color(card)==(_status.event.getParent('shiroha_guying').num>0?'black':'red'))?2:0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool) trigger.num+=num;\n\t\t\t\t},}","info":"锁定技，每回合限一次，当你受到伤害/对其他角色造成伤害时，你进行判定。若结果为红色/黑色，此伤害-1/+1。"},"shiroha_jiezhao":{"name":"解兆","script":"{trigger: {global: \"judge\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getStorage('shiroha_yuzhao').length&&event.player.isAlive();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=player.storage.shiroha_yuzhao;\n\t\t\t\t\tplayer.chooseButton([get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+get.translation(trigger.player.judging[0])+\n\t\t\t\t\t\t'，'+get.prompt('shiroha_jiezhao'),list,'hidden'],function(button){\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\treturn result*attitude;\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]).set('filterButton',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.forceDie=true;\n\t\t\t\t\t\tplayer.respond(result.links,'shiroha_jiezhao','highlight','noOrdering');\n\t\t\t\t\t\tresult.cards=result.links;\n\t\t\t\t\t\tplayer.unmarkAuto('shiroha_yuzhao',result.cards);\n\t\t\t\t\t\tif(!player.storage.shiroha_yuzhao.length){\n\t\t\t\t\t\t\tplayer.storage.shiroha_jiezhao=true;\n\t\t\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t\tvar list=['umi_chaofan','ao_xishi','tsumugi_mugyu','kamome_jieban'];\n\t\t\t\t\t\t\tvar skill=list.randomGet();\n\t\t\t\t\t\t\tplayer.addSkillLog(skill);\n\t\t\t\t\t\t\tplayer.flashAvatar('shiroha_jiezhao','key_'+skill.split('_')[0])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.player.judging[0].clone){\n\t\t\t\t\t\t\ttrigger.player.judging[0].clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\t\tcard.clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},trigger.player.judging[0]);\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.orderingCards.addArray(result.cards);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"0.6\",},},derivation: [\"umi_chaofan\",\"ao_xishi\",\"tsumugi_mugyu\",\"kamome_jieban\"],}","info":"一名角色的判定牌生效前，你可打出一张「兆」代替之。当你以此法移去最后一张「兆」后，你加1点体力上限并回复1点体力，然后修改〖孤影〗并随机获得以下技能中的一个：〖炒饭〗/〖习事〗/〖呣啾〗/〖结伴〗。"},"shizuku_sizhi":{"name":"思智","script":"{audio: \"2\",enable: \"phaseUse\",getResult: function (cards){\n\t\t\t\t\tvar l=cards.length;\n\t\t\t\t\tvar all=Math.pow(l,2);\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<all;i++){\n\t\t\t\t\t\tvar array=[];\n\t\t\t\t\t\tfor(var j=0;j<l;j++){\n\t\t\t\t\t\t\tif(Math.floor((i%Math.pow(2,j+1))/Math.pow(2,j))>0) array.push(cards[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var k of array){\n\t\t\t\t\t\t\tnum+=get.number(k);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num==13) list.push(array);\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\t\tif(a.length!=b.length) return b.length-a.length;\n\t\t\t\t\t\t\treturn get.value(a)-get.value(b);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn list[0];\n\t\t\t\t\t}\n\t\t\t\t\treturn list;\n\t\t\t\t},usable: \"1\",filterCard: function (card){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t}\n\t\t\t\t\treturn get.number(card)+num<=13;\n\t\t\t\t},complexCard: \"true\",selectCard: function (){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(num==13) return ui.selected.cards.length;\n\t\t\t\t\treturn ui.selected.cards.length+2;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar evt=_status.event;\n\t\t\t\t\tif(!evt.shizuku_sizhi_choice) evt.shizuku_sizhi_choice=lib.skill.shizuku_sizhi.getResult(evt.player.getCards('he'));\n\t\t\t\t\tif(!evt.shizuku_sizhi_choice.contains(card)) return 0;\n\t\t\t\t\treturn 1;\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\tplayer.draw(cards.length*2).gaintag=['shizuku_sizhi2'];\n\t\t\t\t\tplayer.addTempSkill('shizuku_sizhi2');\n\t\t\t\t},ai: {order: \"5\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置任意张点数之和为13的牌，然后摸两倍数量的牌。以此法获得的牌中，黑色牌本回合无距离和次数限制，红色牌本回合不计入手牌上限。"},"shizuku_biyi":{"name":"避忆","script":"{trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=result.number;\n\t\t\t\t\tvar next=player.chooseToDiscard('是否弃置任意张点数之和为'+get.cnNumber(num)+'的牌并回复1点体力？',function(card){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.number(card)+num<=_status.event.num;\n\t\t\t\t\t},'he');\n\t\t\t\t\tnext.set('num',num);\n\t\t\t\t\tnext.set('complexCard',true);\n\t\t\t\t\tnext.set('selectCard',function(){\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num==_status.event.num) return ui.selected.cards.length;\n\t\t\t\t\t\treturn ui.selected.cards.length+2;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('cardResult',function(){\n\t\t\t\t\t\tvar cards=player.getCards('he');\n\t\t\t\t\t\tvar l=cards.length;\n\t\t\t\t\t\tvar all=Math.pow(l,2);\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=1;i<all;i++){\n\t\t\t\t\t\t\tvar array=[];\n\t\t\t\t\t\t\tfor(var j=0;j<l;j++){\n\t\t\t\t\t\t\t\tif(Math.floor((i%Math.pow(2,j+1))/Math.pow(2,j))>0) array.push(cards[j])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar numx=0;\n\t\t\t\t\t\t\tfor(var k of array){\n\t\t\t\t\t\t\t\tnumx+=get.number(k);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(numx==num) list.push(array);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\tlist.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.value(a)-get.value(b);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn list[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn list;\n\t\t\t\t\t}());\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(!_status.event.cardResult.contains(card)) return 0;\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool) player.recover();\n\t\t\t\t},}","info":"当你受到伤害后，你可以进行一次判定，然后若你弃置任意张点数之和与判定结果点数相同的牌，你回复1点体力。"},"shizuku_sanhua":{"name":"散花","script":"{trigger: {player: \"die\",},forceDie: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('shizuku_sanhua'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('shizuku_sanhua',target);\n\t\t\t\t\t\tvar names=[];\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\twhile(cards.length<4){\n\t\t\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\t\t\treturn !cards.contains(card)&&!names.contains(card.name)&&get.type(card)=='basic';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tcards.push(card);\n\t\t\t\t\t\t\t\tnames.push(card.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(cards.length) target.gain(cards,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你死亡时，你可令一名其他角色从牌堆中获得四张名称各不相同的基本牌。"},"hiroto_huyu":{"name":"虎驭","script":"{trigger: {global: \"phaseUseEnd\",},direct: \"true\",noHidden: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&player.hasSkill('hiroto_huyu')&&!player.hasSkill('hiroto_zonglve')&&event.player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.player.chooseCard(2,'h','是否对'+get.translation(player)+'发动【虎驭】？','将两张手牌交给该角色，然后令其获得〖纵略〗并于下回合获得该角色获得的所有牌').set('goon',function(){\n\t\t\t\t\t\tvar source=trigger.player;\n\t\t\t\t\t\tif(get.attitude(source,player)>0) return 7;\n\t\t\t\t\t\tif(source.hp>2) return 4;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}()).set('ai',function(card){\n\t\t\t\t\t\treturn _status.event.goon-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('hiroto_huyu',trigger.player);\n\t\t\t\t\t\tplayer.gain(result.cards,trigger.player,'giveAuto');\n\t\t\t\t\t\tplayer.storage.hiroto_huyu2=trigger.player;\n\t\t\t\t\t\tplayer.addSkill('hiroto_zonglve');\n\t\t\t\t\t\tplayer.addSkill('hiroto_huyu2');\n\t\t\t\t\t}\n\t\t\t\t},derivation: \"hiroto_zonglve\",}","info":"其他角色的出牌阶段结束时，若你没有技能〖纵略〗，则其可将两张手牌交给你。若如此做，你获得〖纵略〗。你的下回合结束时，你失去〖纵略〗并将本回合内获得的所有牌交给该角色。"},"hiroto_tuolao":{"name":"脱牢","script":"{trigger: {player: \"phaseAfter\",},forced: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\treturn player.phaseNumber>1&&!player.getHistory('lose',function(evt){\n\t\t\t\t\t\treturn evt.getParent(2).name=='hiroto_huyu2';\n\t\t\t\t\t}).length;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('hiroto_tuolao');\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\tplayer.removeSkill('hiroto_huyu');\n\t\t\t\t\tplayer.addSkill('hiroto_zonglve');\n\t\t\t\t},}","info":"觉醒技，回合结束后，若此回合不是你的第一个回合且你本轮内未因〖虎驭〗失去过牌，则你摸三张牌，失去〖虎驭〗并获得〖纵略〗。"},"youlong":{"name":"游龙","script":"{enable: \"chooseToUse\",audio: \"2\",audioname: [\"key_sakuya\"],zhuanhuanji: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.youlong=false;\n\t\t\t\t\tif(!player.storage.youlong2) player.storage.youlong2=[];\n\t\t\t\t},hiddenCard: function (player,name){\n\t\t\t\t\tif(player.storage.youlong2.contains(name)||player.countDisabled()>=5) return false;\n\t\t\t\t\tif(player.hasSkill('youlong_'+(player.storage.youlong||false))) return false;\n\t\t\t\t\tvar type=get.type(name);\n\t\t\t\t\tif(player.storage.youlong) return type=='basic';\n\t\t\t\t\treturn type=='trick';\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.youlong2.contains(name)||player.countDisabled()>=5) return false;\n\t\t\t\t\tif(player.hasSkill('youlong_'+(player.storage.youlong||false))) return false;\n\t\t\t\t\tvar type=player.storage.youlong?'basic':'trick';\n\t\t\t\t\tfor(var name of lib.inpile){\n\t\t\t\t\t\tif(player.storage.youlong2.contains(name)) continue;\n\t\t\t\t\t\tif(get.type(name)!=type) continue;\n\t\t\t\t\t\tif(event.filterCard({name:name,isCard:true},player,event)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('游龙','hidden');\n\t\t\t\t\t\tvar table=document.createElement('div');\n\t\t\t\t\t\ttable.classList.add('add-setting');\n\t\t\t\t\t\ttable.style.margin='0';\n\t\t\t\t\t\ttable.style.width='100%';\n\t\t\t\t\t\ttable.style.position='relative';\n\t\t\t\t\t\tfor(var i=1;i<6;i++){\n\t\t\t\t\t\t\tif(player.isDisabled(i)) continue;\n\t\t\t\t\t\t\tvar td=ui.create.div('.shadowed.reduce_radius.pointerdiv.tdnode');\n\t\t\t\t\t\t\ttd.innerHTML='<span>'+get.translation('equip'+i)+'</span>';\n\t\t\t\t\t\t\ttd.link=i;\n\t\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\ttd[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttable.appendChild(td);\n\t\t\t\t\t\t\tdialog.buttons.add(td);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.content.appendChild(table);\n\t\t\t\t\t\tvar type=player.storage.youlong?'basic':'trick';\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var name of lib.inpile){\n\t\t\t\t\t\t\tif(player.storage.youlong2.contains(name)) continue;\n\t\t\t\t\t\t\tif(get.type(name)!=type) continue;\n\t\t\t\t\t\t\tif(event.filterCard({name:name,isCard:true},player,event)){\n\t\t\t\t\t\t\t\tlist.push([type,'',name]);\n\t\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'fire']);\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'thunder']);\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'ice']);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.add([list,'vcard']);\n\t\t\t\t\t\treturn dialog;\n\t\t\t\t\t},filter: function (button){\n\t\t\t\t\t\tif(ui.selected.buttons.length&&typeof button.link==typeof ui.selected.buttons[0].link) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},select: \"2\",check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(typeof button.link=='number'){\n\t\t\t\t\t\t\tvar card=player.getEquip(button.link);\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\t\t\tif(val>0) return 0;\n\t\t\t\t\t\t\t\treturn 5-val;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tswitch(button.link){\n\t\t\t\t\t\t\t\tcase 3:return 4.5;break;\n\t\t\t\t\t\t\t\tcase 4:return 4.4;break;\n\t\t\t\t\t\t\t\tcase 5:return 4.3;break;\n\t\t\t\t\t\t\t\tcase 2:return (3-player.hp)*1.5;break;\n\t\t\t\t\t\t\t\tcase 1:{\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn (get.realAttitude||get.attitude)(player,current)<0&&get.distance(player,current)>1;\n\t\t\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\t\t\treturn 3.2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar name=button.link[2];\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(get.type(name)=='basic'){\n\t\t\t\t\t\t\tif(name=='shan') return 2;\n\t\t\t\t\t\t\tif(evt.type=='dying'){\n\t\t\t\t\t\t\t\tif(get.attitude(player,evt.dying)<2) return false;\n\t\t\t\t\t\t\t\tif(name=='jiu') return 2.1;\n\t\t\t\t\t\t\t\treturn 1.9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(evt.type=='phase') return player.getUseValue({name:name,nature:button.link[3],isCard:true});\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!['chuqibuyi','shuiyanqijunx','juedou','nanman','wanjian','shunshou','zhujinqiyuan'].contains(name)) return 0;\n\t\t\t\t\t\tvar card={name:name,isCard:true};\n\t\t\t\t\t\tif(['shunshou','zhujinqiyuan'].contains(card.name)){\n\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)!=0&&get.distance(player,current)<=1&&player.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\treturn player.getUseValue(card)-7;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn player.getUseValue(card)-4;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\tif(typeof links[1]=='number') links.reverse();\n\t\t\t\t\t\tvar equip=links[0];\n\t\t\t\t\t\tvar name=links[1][2];\n\t\t\t\t\t\tvar nature=links[1][3];\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tequip:equip,\n\t\t\t\t\t\t\tviewAs:{\n\t\t\t\t\t\t\t\tname:name,\n\t\t\t\t\t\t\t\tnature:nature,\n\t\t\t\t\t\t\t\tisCard:true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tprecontent:function(){\n\t\t\t\t\t\t\t\tplayer.logSkill('youlong');\n\t\t\t\t\t\t\t\tplayer.disableEquip(lib.skill.youlong_backup.equip);\n\t\t\t\t\t\t\t\tdelete event.result.skill;\n\t\t\t\t\t\t\t\tplayer.addTempSkill('youlong_'+(player.storage.youlong||false),'roundStart');\n\t\t\t\t\t\t\t\tplayer.storage.youlong=!player.storage.youlong;\n\t\t\t\t\t\t\t\tplayer.storage.youlong2.add(event.result.card.name);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\tif(typeof links[1]=='number') links.reverse();\n\t\t\t\t\t\tvar equip='equip'+links[0];\n\t\t\t\t\t\tvar name=links[1][2];\n\t\t\t\t\t\tvar nature=links[1][3];\n\t\t\t\t\t\treturn '废除自己的'+get.translation(equip)+'栏，视为使用'+(get.translation(nature)||'')+get.translation(name);\n\t\t\t\t\t},},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg=='respond') return false;\n\t\t\t\t\t\tif(!player.storage.youlong||player.hasSkill('youlong_true')) return false;\n\t\t\t\t\t\tvar name=(tag=='respondSha'?'sha':'shan');\n\t\t\t\t\t\treturn !player.storage.youlong2.contains(name);\n\t\t\t\t\t},order: \"1\",result: {player: \"1\",},},}","info":"转换技，阴，每轮限一次，你可以废除你的一个装备栏，视为使用一张未以此法使用过的普通锦囊牌；阳，每轮限一次，你可以废除你的一个装备栏，视为使用一张未以此法使用过的基本牌。"},"luanfeng":{"name":"鸾凤","script":"{audio: \"2\",audioname: [\"key_sakuya\"],trigger: {global: \"dying\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.maxHp>=player.maxHp&&event.player.hp<1;\n\t\t\t\t},limited: \"true\",skillAnimation: \"true\",animationColor: \"soil\",logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<4) return false;\n\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,event.player,'unchanged','cardSavable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\tvar savable=get.info(card).savable;\n\t\t\t\t\t\tif(typeof savable=='function') savable=savable(card,player,event.player);\n\t\t\t\t\t\treturn savable;\n\t\t\t\t\t})>=1-event.player.hp) return false;\n\t\t\t\t\tif(event.player==player||event.player==get.zhu(player)) return true;\n\t\t\t\t\treturn !player.hasUnknown();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('luanfeng');\n\t\t\t\t\ttrigger.player.recover(3-trigger.player.hp);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=trigger.player.countDisabled();\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tfor(var i=1;i<6;i++){\n\t\t\t\t\t\t\tif(trigger.player.isDisabled(i)) trigger.player.enableEquip(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.player.drawTo(6-num);\n\t\t\t\t\tif(player==trigger.player) player.storage.youlong2=[];\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，一名角色进入濒死状态时，若其体力上限不小于你，你可令其回复至3点体力，恢复其被废除的装备栏，令其手牌补至6-X张（X为以此法恢复的装备栏数量）。若该角色是你，重置你因“游龙”使用过的牌名。"},"sakuya_junbu":{"name":"均步","script":"{mod: {targetInRange: function (card,player){\n\t\t\t\t\t\tif(player.countDisabled()>=1) return true;\n\t\t\t\t\t},cardUsable: function (card,player){\n\t\t\t\t\t\tif(player.countDisabled()>=2) return Infinity;\n\t\t\t\t\t},},trigger: {player: \"useCard2\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countDisabled()>=4) return true;\n\t\t\t\t\treturn lib.skill.sakuya_junbu.filter2.apply(this,arguments);\n\t\t\t\t},filter2: function (event,player){\n\t\t\t\t\tif(player.countDisabled()<3) return false;\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\tif(info.allowMultiple==false) return false;\n\t\t\t\t\tif(event.targets&&!info.multitarget){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn !event.targets.contains(current)&&lib.filter.targetEnabled2(card,player,current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.countDisabled()>=4){\n\t\t\t\t\t\ttrigger.directHit.addArray(game.players);\n\t\t\t\t\t\tif(!lib.skill.sakuya_junbu.filter2(trigger,player)){\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar prompt2='为'+get.translation(trigger.card)+'增加一个目标';\n\t\t\t\t\tplayer.chooseTarget(get.prompt('sakuya_junbu'),function(card,player,target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn !_status.event.targets.contains(target)&&lib.filter.targetEnabled2(_status.event.card,player,target);\n\t\t\t\t\t}).set('prompt2',prompt2).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player);\n\t\t\t\t\t}).set('card',trigger.card).set('targets',trigger.targets);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.isMine()) game.delayx();\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets){\n\t\t\t\t\t\tplayer.logSkill('sakuya_junbu',event.targets);\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\n\t\t\t\t\t}\n\t\t\t\t},group: \"sakuya_junbu_damage\",subSkill: {damage: {trigger: {source: \"damageBegin1\",},forced: \"true\",sub: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.countDisabled()>=5&&event.getParent().type=='card';\n\t\t\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\t},},},}","info":"锁定技，若你已废除的装备栏数量：≥1，你使用牌无距离限制。≥2，你使用牌无次数限制。≥3，你使用牌时可以多指定一个目标。≥4，你使用的牌不可被响应。≥5，你使用牌造成伤害时失去1点体力，令此伤害+1。"},"rumi_shuwu":{"name":"淑武","script":"{mod: {cardUsable: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return Infinity;\n\t\t\t\t\t},targetInRange: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\t},},trigger: {player: \"useCard2\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\tif(info.type!='trick'||info.allowMultiple==false) return false;\n\t\t\t\t\tif(event.targets&&!info.multitarget){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn !event.targets.contains(current)&&lib.filter.targetEnabled2(card,player,current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar prompt2='为'+get.translation(trigger.card)+'增加一个目标';\n\t\t\t\t\tplayer.chooseTarget(get.prompt('rumi_shuwu'),function(card,player,target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn !_status.event.targets.contains(target)&&lib.filter.targetEnabled2(_status.event.card,player,target);\n\t\t\t\t\t}).set('prompt2',prompt2).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player);\n\t\t\t\t\t}).set('card',trigger.card).set('targets',trigger.targets);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.isMine()) game.delayx();\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets){\n\t\t\t\t\t\tplayer.logSkill('rumi_shuwu',event.targets);\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\n\t\t\t\t\t}\n\t\t\t\t},group: \"rumi_shuwu2\",}","info":"锁定技，你使用【杀】无距离和次数限制，你使用普通锦囊牌选择目标后，可增加一个目标。出牌阶段结束时，你令X=0，且每满足一项便令X+1：①你于本阶段内使用【杀】的次数不大于1。②你于本阶段内未使用锦囊牌造成过伤害。③你的体力值不大于3。你摸X张牌，且本回合手牌上限+X。"},"chihaya_liewu":{"name":"烈武","script":"{derivation: \"chihaya_huairou\",mod: {cardUsable: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return Infinity;\n\t\t\t\t\t},targetInRange: function (card){\n\t\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\t},},trigger: {player: \"useCard2\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\tif(info.type!='trick'||info.allowMultiple==false) return false;\n\t\t\t\t\tif(event.targets&&!info.multitarget){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn !event.targets.contains(current)&&lib.filter.targetEnabled2(card,player,current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar prompt2='为'+get.translation(trigger.card)+'增加一个目标';\n\t\t\t\t\tplayer.chooseTarget(get.prompt('chihaya_liewu'),function(card,player,target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn !_status.event.targets.contains(target)&&lib.filter.targetEnabled2(_status.event.card,player,target);\n\t\t\t\t\t}).set('prompt2',prompt2).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player);\n\t\t\t\t\t}).set('card',trigger.card).set('targets',trigger.targets);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.isMine()) game.delayx();\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets){\n\t\t\t\t\t\tplayer.logSkill('chihaya_liewu',event.targets);\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\n\t\t\t\t\t}\n\t\t\t\t},group: \"chihaya_liewu2\",}","info":"锁定技，你使用【杀】无距离和次数限制，你使用普通锦囊牌选择目标后，可增加一个目标。当你首次废除最后一个装备栏后，你减4点体力上限并获得技能〖怀柔〗。"},"chihaya_youfeng":{"name":"游凤","script":"{enable: \"chooseToUse\",zhuanhuanji: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.chihaya_youfeng=false;\n\t\t\t\t},hiddenCard: function (player,name){\n\t\t\t\t\tif(player.storage.chihaya_youfeng&&player.countDisabled()>=5) return false;\n\t\t\t\t\tif(player.hasSkill('chihaya_youfeng_'+(player.storage.chihaya_youfeng||false))) return false;\n\t\t\t\t\tvar type=get.type(name);\n\t\t\t\t\tif(player.storage.chihaya_youfeng) return type=='basic';\n\t\t\t\t\treturn type=='trick';\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.chihaya_youfeng&&player.countDisabled()>=5) return false;\n\t\t\t\t\tif(player.hasSkill('chihaya_youfeng_'+(player.storage.chihaya_youfeng||false))) return false;\n\t\t\t\t\tvar type=player.storage.chihaya_youfeng?'basic':'trick';\n\t\t\t\t\tfor(var name of lib.inpile){\n\t\t\t\t\t\tif(get.type(name)!=type) continue;\n\t\t\t\t\t\tif(event.filterCard({name:name,isCard:true},player,event)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('游凤','hidden');\n\t\t\t\t\t\tif(player.storage.chihaya_youfeng){\n\t\t\t\t\t\t\tvar table=document.createElement('div');\n\t\t\t\t\t\t\ttable.classList.add('add-setting');\n\t\t\t\t\t\t\ttable.style.margin='0';\n\t\t\t\t\t\t\ttable.style.width='100%';\n\t\t\t\t\t\t\ttable.style.position='relative';\n\t\t\t\t\t\t\tfor(var i=1;i<6;i++){\n\t\t\t\t\t\t\t\tif(player.isDisabled(i)) continue;\n\t\t\t\t\t\t\t\tvar td=ui.create.div('.shadowed.reduce_radius.pointerdiv.tdnode');\n\t\t\t\t\t\t\t\ttd.innerHTML='<span>'+get.translation('equip'+i)+'</span>';\n\t\t\t\t\t\t\t\ttd.link=i;\n\t\t\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\t\ttd[j]=lib.element.button[i];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttable.appendChild(td);\n\t\t\t\t\t\t\t\tdialog.buttons.add(td);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdialog.content.appendChild(table);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar type=player.storage.chihaya_youfeng?'basic':'trick';\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var name of lib.inpile){\n\t\t\t\t\t\t\tif(get.type(name)!=type) continue;\n\t\t\t\t\t\t\tif(event.filterCard({name:name,isCard:true},player,event)){\n\t\t\t\t\t\t\t\tlist.push([type,'',name]);\n\t\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'fire']);\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'thunder']);\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'ice']);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.add([list,'vcard']);\n\t\t\t\t\t\treturn dialog;\n\t\t\t\t\t},filter: function (button){\n\t\t\t\t\t\tif(ui.selected.buttons.length&&typeof button.link==typeof ui.selected.buttons[0].link) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},select: function (){\n\t\t\t\t\t\tif(_status.event.player.storage.chihaya_youfeng) return 2;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(typeof button.link=='number'){\n\t\t\t\t\t\t\tvar card=player.getEquip(button.link);\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\t\t\tif(val>0) return 0;\n\t\t\t\t\t\t\t\treturn 5-val;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tswitch(button.link){\n\t\t\t\t\t\t\t\tcase 3:return 4.5;break;\n\t\t\t\t\t\t\t\tcase 4:return 4.4;break;\n\t\t\t\t\t\t\t\tcase 5:return 4.3;break;\n\t\t\t\t\t\t\t\tcase 2:return (3-player.hp)*1.5;break;\n\t\t\t\t\t\t\t\tcase 1:{\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn (get.realAttitude||get.attitude)(player,current)<0&&get.distance(player,current)>1;\n\t\t\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\t\t\treturn 3.2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar name=button.link[2];\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(get.type(name)=='basic'){\n\t\t\t\t\t\t\tif(name=='shan') return 2;\n\t\t\t\t\t\t\tif(evt.type=='dying'){\n\t\t\t\t\t\t\t\tif(get.attitude(player,evt.dying)<2) return false;\n\t\t\t\t\t\t\t\tif(name=='jiu') return 2.1;\n\t\t\t\t\t\t\t\treturn 1.9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(evt.type=='phase') return player.getUseValue({name:name,nature:button.link[3],isCard:true});\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!['chuqibuyi','shuiyanqijunx','juedou','nanman','wanjian','shunshou','zhujinqiyuan'].contains(name)) return 0;\n\t\t\t\t\t\tvar card={name:name,isCard:true};\n\t\t\t\t\t\tif(['shunshou','zhujinqiyuan'].contains(card.name)){\n\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)!=0&&get.distance(player,current)<=1&&player.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\treturn player.getUseValue(card)-7;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn player.getUseValue(card)-4;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\tif(links.length==1) return {\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tviewAs:{\n\t\t\t\t\t\t\t\tname:links[0][2],\n\t\t\t\t\t\t\t\tnature:links[0][3],\n\t\t\t\t\t\t\t\tisCard:true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tprecontent:function(){\n\t\t\t\t\t\t\t\tplayer.logSkill('chihaya_youfeng');\n\t\t\t\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t\t\t\tdelete event.result.skill;\n\t\t\t\t\t\t\t\tplayer.addTempSkill('chihaya_youfeng_'+(player.storage.chihaya_youfeng||false),'roundStart');\n\t\t\t\t\t\t\t\tplayer.storage.chihaya_youfeng=!player.storage.chihaya_youfeng;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(typeof links[1]=='number') links.reverse();\n\t\t\t\t\t\tvar equip=links[0];\n\t\t\t\t\t\tvar name=links[1][2];\n\t\t\t\t\t\tvar nature=links[1][3];\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tequip:equip,\n\t\t\t\t\t\t\tviewAs:{\n\t\t\t\t\t\t\t\tname:name,\n\t\t\t\t\t\t\t\tnature:nature,\n\t\t\t\t\t\t\t\tisCard:true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tprecontent:function(){\n\t\t\t\t\t\t\t\tplayer.logSkill('chihaya_youfeng');\n\t\t\t\t\t\t\t\tplayer.disableEquip(lib.skill.chihaya_youfeng_backup.equip);\n\t\t\t\t\t\t\t\tdelete event.result.skill;\n\t\t\t\t\t\t\t\tplayer.addTempSkill('chihaya_youfeng_'+(player.storage.chihaya_youfeng||false),'roundStart');\n\t\t\t\t\t\t\t\tplayer.storage.chihaya_youfeng=!player.storage.chihaya_youfeng;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\tif(links.length==1) return '增加一点体力上限，视为使用'+(get.translation(links[0][3])||'')+get.translation(links[0][2]);\n\t\t\t\t\t\tif(typeof links[1]=='number') links.reverse();\n\t\t\t\t\t\tvar equip='equip'+links[0];\n\t\t\t\t\t\tvar name=links[1][2];\n\t\t\t\t\t\tvar nature=links[1][3];\n\t\t\t\t\t\treturn '废除自己的'+get.translation(equip)+'栏，视为使用'+(get.translation(nature)||'')+get.translation(name);\n\t\t\t\t\t},},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg=='respond') return false;\n\t\t\t\t\t\tif(!player.storage.chihaya_youfeng||player.hasSkill('chihaya_youfeng_true')) return false;\n\t\t\t\t\t},order: \"1\",result: {player: \"1\",},},}","info":"转换技，阴，每轮限一次，你可以加1点体力上限，视为使用一张普通锦囊牌；阳，每轮限一次，你可以废除你的一个装备栏，视为使用一张基本牌。"},"kud_qiaoshou":{"name":"巧手","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn !player.getStorage('kud_qiaoshou_equip').length&&player.countCards('h')>0;\n\t\t\t\t},chooseButton: {dialog: function (){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tvar list2=['pyzhuren_heart','pyzhuren_diamond','pyzhuren_club','pyzhuren_spade','pyzhuren_shandian','rewrite_zhuge'];\n\t\t\t\t\t\tlist2.addArray(lib.inpile);\n\t\t\t\t\t\tfor(var i of list2){\n\t\t\t\t\t\t\tvar sub=get.subtype(i);\n\t\t\t\t\t\t\tif(['equip1','equip4'].contains(sub)) list.push([sub,'',i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('巧手：选择一种装备牌',[list,'vcard'],'hidden');\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar name=button.link[2];\n\t\t\t\t\t\tif(get.subtype(name)=='equip4'||player.getEquip(name)) return 0;\n\t\t\t\t\t\tvar sha=player.countCards('h','sha');\n\t\t\t\t\t\tswitch(name){\n\t\t\t\t\t\t\tcase 'rewrite_zhuge':\n\t\t\t\t\t\t\t return sha-player.getCardUsable('sha');\n\t\t\t\t\t\t\tcase 'guding':\n\t\t\t\t\t\t\t\tif(sha>0&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn get.attitude(player,current)<0&&!current.countCards('h')&&player.canUse('sha',current)&&get.effect(current,{name:'sha'},player)>0;\n\t\t\t\t\t\t\t\t})) return 1.4+Math.random();\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\tcase 'guanshi':\n\t\t\t\t\t\t\t\tif(sha>0) return 0.7+Math.random();\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\tcase 'qinggang':\n\t\t\t\t\t\t\t\tif(sha>0) return 0.4+Math.random();\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\tcase 'zhuque':\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn get.attitude(player,current)<0&&current.getEquip('tengjia')&&get.effect(current,{name:'sha',nature:'fire'},player)>0;\n\t\t\t\t\t\t\t\t})) return 1.2+Math.random();\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\tdefault: return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},backup: function (links){\n\t\t\t\t\t\tvar next=get.copy(lib.skill.kud_qiaoshou_backupx);\n\t\t\t\t\t\tnext.cardname=links[0][2];\n\t\t\t\t\t\treturn next;\n\t\t\t\t},prompt: function (links){\n\t\t\t\t\t\treturn '将一张手牌置于武将牌上，然后视为装备'+get.translation(links[0][2]);\n\t\t\t\t\t},},group: \"kud_qiaoshou_end\",ai: {order: \"5\",result: {player: \"1\",},},}","info":"出牌阶段/结束阶段，若你没有“巧”，则你可以将一张手牌作为“巧”置于武将牌上并摸一张牌，且视为装备了一张你选择的武器牌或进攻坐骑/防具牌或防御坐骑直到“巧”进入弃牌堆。出牌阶段结束时/准备阶段开始时，你将“巧”置入弃牌堆。"},"kud_buhui":{"name":"不悔","script":"{enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn event.type=='dying'&&player==event.dying&&(player.getStorage('kud_qiaoshou_equip').length+player.countCards('e'))>0;\n\t\t\t\t},skillAnimation: \"true\",limited: \"true\",animationColor: \"gray\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('kud_buhui');\n\t\t\t\t\tvar cards=player.getCards('e');\n\t\t\t\t\tvar length=player.getStorage('kud_qiaoshou_equip').length;\n\t\t\t\t\tif(cards.length) player.discard(cards);\n\t\t\t\t\tplayer.removeSkill('kud_qiaoshou_equip');\n\t\t\t\t\tplayer.draw(cards.length+length);\n\t\t\t\t\tplayer.addSkill('kud_chongzhen');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=2-player.hp;\n\t\t\t\t\tif(num) player.recover(num);\n\t\t\t\t},derivation: \"riki_chongzhen\",ai: {order: \"0.5\",result: {player: \"1\",},save: \"true\",skillTagFilter: function (player,tag,target){\n\t\t\t\t\t\treturn player==target;\n\t\t\t\t\t},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，当你进入濒死状态时，你可以弃置“巧”和装备区内的所有牌（至少一张）并摸等量的牌，将体力回复至2点，获得技能〖重振〗。"},"misuzu_hengzhou":{"name":"恒咒","script":"{trigger: {player: [\"phaseJieshuBegin\",\"recoverEnd\",\"damageEnd\",\"phaseDrawBegin2\",\"phaseZhunbeiBegin\"],},forced: \"true\",character: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.name=='phaseZhunbei') return true;\n\t\t\t\t\tif(['damage','recover'].contains(event.name)) return event.num>0;\n\t\t\t\t\tvar num=player.countMark('misuzu_hengzhou');\n\t\t\t\t\tif(event.name=='phaseDraw') return num>0&&!event.numFixed;\n\t\t\t\t\treturn num>3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=player.countMark('misuzu_hengzhou');\n\t\t\t\t\tif(trigger.name=='phaseDraw') trigger.num+=num;\n\t\t\t\t\telse if(trigger.name=='phaseJieshu'){\n\t\t\t\t\t\tplayer.removeMark('misuzu_hengzhou',num);\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse player.addMark('misuzu_hengzhou',trigger.num||1);\n\t\t\t\t},intro: {name: \"诅咒\",name2: \"诅咒\",content: \"mark\",},marktext: \"诅\",mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.countMark('misuzu_hengzhou');\n\t\t\t\t\t},},ai: {notemp: \"true\",},}","info":"锁定技，准备阶段开始时，或当你受到1点伤害或回复1点体力后，你获得一个“诅咒”标记。你的手牌上限和摸牌阶段的额定摸牌数+X。结束阶段开始时，若X大于3，则你移去所有“诅咒”标记并失去1点体力。（X为“诅咒”标记数）"},"misuzu_nongyin":{"name":"浓饮","script":"{enable: \"chooseToUse\",viewAs: {name: \"tao\",isCard: \"true\",},viewAsFilter: function (player){\n\t\t\t\t\treturn !player.hasJudge('lebu')&&player.countCards('he',function(card){\n\t\t\t\t\t\treturn get.color(card)=='red'&&get.type(card,'trick')!='trick';\n\t\t\t\t\t});\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='red'&&get.type(card,'trick')!='trick';\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7+(_status.event.dying||_status.event.player).getDamagedHp()-get.value(card);\n\t\t\t\t},ignoreMod: \"true\",position: \"he\",precontent: function (){\n\t\t\t\t\tplayer.logSkill('misuzu_nongyin');\n\t\t\t\t\tplayer.$throw(event.result.cards);\n\t\t\t\t\tplayer.addJudge({name:'lebu'},event.result.cards);\n\t\t\t\t\tevent.result.card.cards=[];\n\t\t\t\t\tevent.result.cards=[];\n\t\t\t\t\tdelete event.result.skill;\n\t\t\t\t\tdelete event.result.card.suit;\n\t\t\t\t\tdelete event.result.card.number;\n\t\t\t\t},ai: {result: \"0.5\",basic: {order: function (card,player){\n\t\t\t\t\t\t\tif(player.hasSkillTag('pretao')) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},useful: [8,6.5,5,4],value: [8,6.5,5,4],},tag: {recover: \"1\",save: \"1\",},},}","info":"当你需要使用【桃】时，你可将一张红色非锦囊牌当做【乐不思蜀】置入自己的判定区，然后视为使用一张【桃】。"},"misuzu_zhongxing":{"name":"终幸","script":"{trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.js&&evt.js.length>0&&!player.hasSkill('misuzu_zhongxing_haruko');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('misuzu_zhongxing'),'令一名角色选择摸两张牌或回复1点体力').set('ai',function(card){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('misuzu_zhongxing',target);\n\t\t\t\t\t\tplayer.addTempSkill('misuzu_zhongxing_haruko');\n\t\t\t\t\t\ttarget.chooseDrawRecover(2,true);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每回合限一次，当你判定区的牌移动到其他区域后，你可令一名角色回复1点体力或摸两张牌。"},"kamome_yangfan":{"name":"扬帆","script":"{trigger: {player: [\"loseAfter\",\"enterGame\"],global: [\"equipAfter\",\"addJudgeAfter\",\"gameDrawAfter\",\"gainAfter\",\"loseAsyncAfter\"],},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(typeof event.getl!='function') return true;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.player==player&&evt.es&&evt.es.length;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.getl) player.draw(2*trigger.getl(player).es.length);\n\t\t\t\t\telse player.equip(game.createCard2('kamome_suitcase','spade',1));\n\t\t\t\t},ai: {noe: \"true\",reverseEquip: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},},}","info":"锁定技，游戏开始时，你将一张【旅行箱】置入你的装备区。当你失去装备区内的一张牌后，你摸两张牌。"},"kamome_huanmeng":{"name":"幻梦","script":"{trigger: {player: \"phaseZhunbeiBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.modeSwapPlayer(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar num=1+player.countCards('e');\n\t\t\t\t\tvar cards=get.cards(num);\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t\tvar top=[];\n\t\t\t\t\t\tvar judges=player.getCards('j');\n\t\t\t\t\t\tvar stopped=false;\n\t\t\t\t\t\tif(!player.hasWuxie()){\n\t\t\t\t\t\t\tfor(var i=0;i<judges.length;i++){\n\t\t\t\t\t\t\t\tvar judge=get.judge(judges[i]);\n\t\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\t\treturn judge(b)-judge(a);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(judge(cards[0])<0){\n\t\t\t\t\t\t\t\t\tstopped=true;break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar bottom;\n\t\t\t\t\t\tif(!stopped){\n\t\t\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn get.value(b,player)-get.value(a,player);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\t\tif(get.value(cards[0],player)<=5) break;\n\t\t\t\t\t\t\t\ttop.unshift(cards.shift());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbottom=cards;\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(bottom.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(online,player,cards){\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tplayer=player||event.player;\n\t\t\t\t\t\tcards=cards||event.cards;\n\t\t\t\t\t\tevent.top=[];\n\t\t\t\t\t\tevent.bottom=[];\n\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\tevent.dialog=ui.create.dialog('按顺序选择置于牌堆顶的牌（先选择的在上）',cards);\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('pointerdiv');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result='ai';\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevent.control=ui.create.control('ok','pileTop','pileBottom',function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link=='ok'){\n\t\t\t\t\t\t\t\tif(online){\n\t\t\t\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\t\t\t\ttop:[],\n\t\t\t\t\t\t\t\t\t\tbottom:[]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.top.push(event.top[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tevent._result.bottom.push(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tvar i;\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.top.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.insertBefore(event.top[i].link,ui.cardPile.firstChild);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.bottom.length;i++){\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.bottom[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor(i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(event.dialog.buttons[i].classList.contains('glow')==false&&\n\t\t\t\t\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.contains('target')==false)\n\t\t\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.dialog.buttons[i].link);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplayer.popup(get.cnNumber(event.top.length)+'上'+get.cnNumber(event.cards.length-event.top.length)+'下');\n\t\t\t\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(event.top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link=='pileTop'){\n\t\t\t\t\t\t\t\tevent.status=true;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆顶的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.status=false;\n\t\t\t\t\t\t\t\tevent.dialog.content.childNodes[0].innerHTML='按顺序选择置于牌堆底的牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('selectable');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.button=function(link){\n\t\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\t\tif(link.classList.contains('target')){\n\t\t\t\t\t\t\t\tlink.classList.remove('target');\n\t\t\t\t\t\t\t\tevent.top.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(link.classList.contains('glow')){\n\t\t\t\t\t\t\t\tlink.classList.remove('glow');\n\t\t\t\t\t\t\t\tevent.bottom.remove(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(event.status){\n\t\t\t\t\t\t\t\tlink.classList.add('target');\n\t\t\t\t\t\t\t\tevent.top.unshift(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlink.classList.add('glow');\n\t\t\t\t\t\t\t\tevent.bottom.push(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.custom.replace.window=function(){\n\t\t\t\t\t\t\tfor(var i=0;i<_status.event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('target');\n\t\t\t\t\t\t\t\t_status.event.dialog.buttons[i].classList.remove('glow');\n\t\t\t\t\t\t\t\t_status.event.top.length=0;\n\t\t\t\t\t\t\t\t_status.event.bottom.length=0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t};\n\t\t\t\t\tevent.switchToAuto=switchToAuto;\n\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,true,event.player,event.cards);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.result=='ai'||!event.result){\n\t\t\t\t\t\tevent.switchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar top=event.result.top||[];\n\t\t\t\t\t\tvar bottom=event.result.bottom||[];\n\t\t\t\t\t\tfor(var i=0;i<top.length;i++){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(top[i],ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<bottom.length;i++){\n\t\t\t\t\t\t\tui.cardPile.appendChild(bottom[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(!top.contains(event.cards[i])&&!bottom.contains(event.cards[i])){\n\t\t\t\t\t\t\t\tui.cardPile.appendChild(event.cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.popup(get.cnNumber(top.length)+'上'+get.cnNumber(event.cards.length-top.length)+'下');\n\t\t\t\t\t\tgame.log(player,'将'+get.cnNumber(top.length)+'张牌置于牌堆顶');\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"准备阶段开始时，你可以观看牌堆顶的X+1张牌并可以按任意顺序置于牌堆顶或牌堆底。（X为你装备区内的牌数）"},"kamome_jieban":{"name":"结伴","script":"{trigger: {player: \"damageEnd\",source: \"damageSource\",},direct: \"true\",zhuanhuanji: \"true\",mark: \"true\",intro: {content: function (storage,player){\n\t\t\t\t\t\treturn '转换技。每回合限一次，当你受到或造成伤害后，'+(!storage?'你可将两张牌交给一名其他角色，然后其交给你一张牌。':'你可将一张牌交给一名其他角色，然后其交给你两张牌。');\n\t\t\t\t\t},},filter: function (event,player){\n\t\t\t\t\tvar num=player.storage.kamome_jieban?1:2;\n\t\t\t\t\treturn player.countCards('he')>=num&&!player.hasSkill('kamome_jieban_phase');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=player.storage.kamome_jieban?1:2;\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tfilterTarget:lib.filter.notMe,\n\t\t\t\t\t\tselectCard:event.num,\n\t\t\t\t\t\tprompt:get.prompt('kamome_jieban'),\n\t\t\t\t\t\tprompt2:event.num==2?'将两张牌交给一名其他角色，然后其交给你一张牌。':'将一张牌交给一名其他角色，然后其交给你两张牌。',\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(get.position(card)=='e'){\n\t\t\t\t\t\t\t\tif(val<=0) return 10;\n\t\t\t\t\t\t\t\treturn 10/val;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 6-val;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(ui.selected.cards[0].name=='du') return -2*att;\n\t\t\t\t\t\t\tif(att>0) return 1.5*att;\n\t\t\t\t\t\t\tvar num=get.select(_status.event.selectCard)[1];\n\t\t\t\t\t\t\tif(att<0&&num==1) return -0.7*att;\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('kamome_jieban',target);\n\t\t\t\t\t\tplayer.addTempSkill('kamome_jieban_phase');\n\t\t\t\t\t\ttarget.gain(result.cards,player,'giveAuto');\n\t\t\t\t\t\tplayer.storage.kamome_jieban=!player.storage.kamome_jieban;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar num=3-event.num;\n\t\t\t\t\tvar hs=target.getCards('he');\n\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\tif(hs.length<=num) event._result={bool:true,cards:hs};\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t target.chooseCard('he',true,'交给'+get.translation(player)+get.cnNumber(num)+'张牌',num).set('ai',function(card){\n\t\t\t\t\t\t \tvar player=_status.event.player;\n\t\t\t\t\t\t \tvar target=_status.event.getParent().player;\n\t\t\t\t\t\t \tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t \t\tif(!target.hasShan()&&card.name=='shan') return 10;\n\t\t\t\t\t\t \t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')&&target.hasUseTarget(card)) return 10-get.value(card);\n\t\t\t\t\t\t \t\treturn 6-get.value(card);\n\t\t\t\t\t\t \t}\n\t\t\t\t\t\t \treturn -get.value(card);\n\t\t\t\t\t\t });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.gain(result.cards,target,'giveAuto');\n\t\t\t\t},}","info":"转换技。每回合限一次，当你受到或造成伤害后，阴：你可将两张牌交给一名其他角色，然后其交给你一张牌。阳：你可将一张牌交给一名其他角色，然后其交给你两张牌。"},"nao_duyin":{"name":"独隐","script":"{trigger: {global: \"phaseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&(!player.storage.nao_duyin||!player.storage.nao_duyin.contains(event.player));\n\t\t\t\t},logTarget: \"player\",charlotte: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard('he','弃置一张牌，或将武将牌翻面').set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.player.isTurnedOver()) return 0;\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool) player.turnOver();\n\t\t\t\t\tplayer.addTempSkill('nao_duyin2',{player:'phaseAfter'});\n\t\t\t\t\tif(!player.storage.nao_duyin) player.storage.nao_duyin=[];\n\t\t\t\t\tplayer.storage.nao_duyin.push(trigger.player);\n\t\t\t\t\tif(!player.storage.nao_duyin2) player.storage.nao_duyin2=[];\n\t\t\t\t\tplayer.storage.nao_duyin2.push(trigger.player);\n\t\t\t\t\tplayer.markSkill('nao_duyin2');\n\t\t\t\t},}","info":"一名其他角色的回合开始时，若你本局游戏内未对其发动过〖独隐〗，则你可以弃置一张牌或将武将牌翻面。若如此做，你不能成为其使用牌的目标，且对其使用牌没有距离限制且不计入使用次数直到你的下回合结束。"},"nao_wanxin":{"name":"挽心","script":"{trigger: {global: \"phaseEnd\",},hasHistory: function (player){\n\t\t\t\t\treturn player.getHistory('damage').length>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn lib.skill.nao_wanxin.hasHistory(current);\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('nao_wanxin'),function(card,player,target){\n\t\t\t\t\t\treturn _status.event.yuus.contains(target);\n\t\t\t\t\t}).set('yuus',game.filterPlayer(function(current){\n\t\t\t\t\t\treturn lib.skill.nao_wanxin.hasHistory(current);\n\t\t\t\t\t})).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('nao_wanxin',target);\n\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.turnOver(false);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.link(false);\n\t\t\t\t\tif(target==player) event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\ttarget.turnOver(false);\n\t\t\t\t\t'step 5'\n\t\t\t\t\ttarget.link(false);\n\t\t\t\t},}","info":"一名角色的回合结束时，你可以令一名本回合内受到过伤害的角色摸两张牌，然后你与其将武将牌重置。"},"nao_shouqing":{"name":"守情","script":"{global: \"nao_shouqing2\",}","info":"其他角色的出牌阶段内可以对你使用【桃】。若如此做，其摸一张牌且本局游戏内的手牌上限+1。"},"nslongyue":{"name":"龙岳","script":"{trigger: {global: \"useCard\",},filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card,'trick')=='trick'&&event.player.getHistory('useCard').indexOf(event)==0;\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t},ai: {expose: \"0.2\",},global: \"nslongyue_ai\",}","info":"当一名角色使用锦囊牌时，若此牌是其本回合内使用的第一张牌，则你可令其摸一张牌。"},"nszhenyin":{"name":"阵引","script":"{trigger: {global: \"judge\",},usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase&&_status.currentPhase.countCards('h')>0;\n\t\t\t\t},logTarget: function (){\n\t\t\t\t\treturn _status.currentPhase;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar target=_status.currentPhase;\n\t\t\t\t\tvar judge=event.judge(event.player.judging[0]);\n\t\t\t\t\tvar max=0;\n\t\t\t\t\tvar hs=target.getCards('h',function(card){\n\t\t\t\t\t\tvar mod2=game.checkMod(card,target,'unchanged','cardEnabled2',target);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,target,'unchanged','cardRespondable',target);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i of hs){\n\t\t\t\t\t\tvar num=event.judge(i)-judge;\n\t\t\t\t\t\tif(num>max) max=num;\n\t\t\t\t\t}\n\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\tif(att>0) return max>0;\n\t\t\t\t\tif(att<0) return max<=0;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(!_status.currentPhase.countCards('h',function(card){\n\t\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t})){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t};\n\t\t\t\t\t_status.currentPhase.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，请打出一张手牌进行改判','h',true,function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0||result==0) return 0;\n\t\t\t\t\t\tif(attitude>0){\n\t\t\t\t\t\t\treturn result/Math.max(0.1,get.value(card));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -result/Math.max(0.1,get.value(card));\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t_status.currentPhase.respond(result.cards,'highlight').nopopup=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.player.judging[0].clone){\n\t\t\t\t\t\t\ttrigger.player.judging[0].clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\t\tcard.clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},trigger.player.judging[0]);\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.orderingCards.addArray(result.cards);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"1\",},},}","info":"每回合限一次。一名角色的判定牌生效前，你可令当前回合角色打出一张手牌代替之。"},"nsxianhai":{"name":"险害","script":"{trigger: {global: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source!=player&&event.source.isAlive()&&event.source==_status.currentPhase&&\n\t\t\t\t\t(event.source.getStat('damage')||0)>(player.getLastStat('damage')||0)&&\n\t\t\t\t\t!player.hasSkill('nsxianhai_round');\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.maxHp>1&&get.attitude(player,event.source)<-4;\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addTempSkill('nsxianhai_round','roundStart');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=1;i<6;i++){\n\t\t\t\t\t\tif(!trigger.source.isDisabled(i)) list.add('equip'+((i==3||i==4)?6:i));\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.chooseControl(list).set('prompt','选择废除'+get.translation(trigger.source)+'的一种装备栏').set('ai',function(){\n\t\t\t\t\t\t\tvar target=_status.event.getTrigger().source;\n\t\t\t\t\t\t\tif(list.contains('equip6')&&target.getEquip('equip3')&&target.getEquip('equip4')) return 'equip6';\n\t\t\t\t\t\t\tif(list.contains('equip2')&&target.getEquip(2)&&get.value(target.getEquip(2),target)>0) return 'equip2';\n\t\t\t\t\t\t\tif(list.contains('equip5')&&target.getEquip(5)&&get.value(target.getEquip(5),target)>0) return 'equip5';\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.goto(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='equip6') trigger.source.disableEquip(result.control);\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.source.disableEquip(3);\n\t\t\t\t\t\ttrigger.source.disableEquip(4);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.awakenedSkills.contains('nsxingchu')){\n\t\t\t\t\t\tvar next=game.createEvent('nsxianhai_clear');\n\t\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\t\tevent.getParent('phase').after.push(next);\n\t\t\t\t\t\tnext.player=player;\n\t\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\t\tplayer.restoreSkill('nsxingchu');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\tvar hs=trigger.source.getCards('h','shan');\n\t\t\t\t\t\tif(hs.length) trigger.source.discard(hs);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每轮限一次，当一名其他角色于回合内造成伤害后，若其此回合内造成过的伤害总和大于你上一回合内造成的伤害总和，则你可以减1点体力上限，令其废除一种装备栏并弃置手牌中所有的【闪】。若〖兴黜〗已发动，此回合结束后视为该限定技未发动过。"},"nsxingchu":{"name":"兴黜","script":"{trigger: {global: \"die\",},forceDie: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player==event.player||player==event.source;\n\t\t\t\t},limited: \"true\",skillAnimation: \"true\",animationColor: \"wood\",direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('nsxingchu')).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('forceDie',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('nsxingchu',target);\n\t\t\t\t\t\tplayer.awakenSkill('nsxingchu');\n\t\t\t\t\t\tvar he=trigger.player.getCards('he');\n\t\t\t\t\t\tif(he.length) target.gain(he,trigger.player,'giveAuto');\n\t\t\t\t\t\ttarget.gainMaxHp();\n\t\t\t\t\t}\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，当你杀死一名角色/你死亡时，你可以令一名角色获得其/你的所有牌并增加1点体力上限。"},"nsshengyan":{"name":"盛筵","script":"{trigger: {player: \"judgeEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase&&_status.currentPhase.isAlive()&&(!player.storage.nsshengyan2||!player.storage.nsshengyan2.contains(event.result.suit));\n\t\t\t\t},logTarget: function (){\n\t\t\t\t\treturn _status.currentPhase;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('nsshengyan2');\n\t\t\t\t\tif(!player.storage.nsshengyan2) player.storage.nsshengyan2=[];\n\t\t\t\t\t_status.currentPhase.addTempSkill('nsshengyan3');\n\t\t\t\t\tplayer.storage.nsshengyan2.add(trigger.result.suit);\n\t\t\t\t\t_status.currentPhase.addMark('nsshengyan3',2,false);\n\t\t\t\t},}","info":"锁定技，你的判定牌生效后，若结果花色与你本回合内其他判定结果的花色均不同，则你令当前回合角色本回合的手牌上限+2。"},"nsdaizhan":{"name":"怠战","script":"{trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn (!player.hasJudge('lebu')||!player.hasJudge('bingliang'))&&player.countCards('he',function(card){\n\t\t\t\t\t\tif(_status.connectMode) return true;\n\t\t\t\t\t\treturn get.type(card,'trick')!='trick';\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar next=player.chooseToUse();\n\t\t\t\t\tnext.set('norestore',true);\n\t\t\t\t\tnext.set('_backupevent','nsdaizhanx');\n\t\t\t\t\tnext.set('custom',{\n\t\t\t\t\t\tadd:{},\n\t\t\t\t\t\treplace:{window:function(){}}\n\t\t\t\t\t});\n\t\t\t\t\tnext.backup('nsdaizhanx');\n\t\t\t\t},}","info":"准备阶段，你可以将一张非锦囊牌当做【兵粮寸断】或【乐不思蜀】对自己使用。若如此做，回合结束时，你将手牌摸至手牌上限。"},"nsjiquan":{"name":"集权","script":"{trigger: {global: [\"damageEnd\",\"damageSource\"],},direct: \"true\",filter: function (event,player,name){\n\t\t\t\t\tvar target=(name=='damageSource'?event.source:event.player);\n\t\t\t\t\treturn target&&target!=player&&get.distance(player,target)<=1&&target.countCards('hej')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar target=(event.triggername=='damageSource'?trigger.source:trigger.player);\n\t\t\t\t\tevent.target=target;\n\t\t\t\t\tplayer.choosePlayerCard(target,'hej',player.storage.nsfuwei?true:1).set('ai',function(button){\n\t\t\t\t\t\tvar val=get.buttonValue(button);\n\t\t\t\t\t\tif(get.attitude(_status.event.player,get.owner(button.link))>0) return -val;\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('nsjiquan',target);\n\t\t\t\t\t\ttarget.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.markAuto('nsjiquan_mark',result.cards);\n\t\t\t\t\t\ttarget.$give(result.cards,player,false);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha') return num+player.getStorage('nsjiquan_mark').length;\n\t\t\t\t\t},},}","info":"与你距离1以内的其他角色造成或受到伤害后，你可以将其区域内的一张牌置于你的武将牌上（称为“威”）。你使用【杀】的次数上限+X（X为“威”数）。"},"nsfuwei":{"name":"附位","script":"{trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",unique: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",filter: function (event,player){\n\t\t\t\t\treturn player.getStorage('nsjiquan_mark').length>4;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('nsfuwei');\n\t\t\t\t\tplayer.storage.nsfuwei=true;\n\t\t\t\t\tplayer.addSkill('nsdiemou');\n\t\t\t\t\tplayer.addSkill('nszhihuang');\n\t\t\t\t\tplayer.gainMaxHp(2);\n\t\t\t\t},derivation: [\"nsdiemou\",\"nszhihuang\"],}","info":"觉醒技，结束阶段开始时，若“威”数大于4，则你加2点体力上限，获得〖喋谋〗和〖制皇〗，并将〖集权〗改为锁定技。"},"nsqiyue":{"name":"骑钺","script":"{trigger: {global: [\"turnOverEnd\",\"linkEnd\",\"showCharacterEnd\",\"hideCharacterEnd\",\"removeCharacterEnd\"],},forced: \"true\",content: function (){player.draw()},}","info":"锁定技，当有角色的武将牌状态改变后，你摸一张牌。"},"nsxuezhu":{"name":"血逐","script":"{trigger: {player: \"damageEnd\",source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.isAlive();\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t\ttrigger.player.turnOver();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn !event.player.isTurnedOver()||get.attitude(player,event.player)>0;\n\t\t\t\t},}","info":"当你受到伤害或造成伤害后，你可以令受到伤害的角色摸两张牌并翻面。"},"lvli":{"name":"膂力","script":"{audio: \"2\",init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=0;\n\t\t\t\t},enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.lvli>1) return false;\n\t\t\t\t\tif(player.storage.lvli>0&&(player!=_status.currentPhase||!player.storage.choujue)) return false;\n\t\t\t\t\treturn event.type!='wuxie'&&event.type!='respondShan';\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(name=='wuxie') continue;\n\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog(event.lvli6?get.prompt('lvli'):'膂力',[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(evt&&typeof evt.filterCard=='function') return evt.filterCard({name:button.link[2]},player,evt);\n\t\t\t\t\t\treturn lib.filter.filterCard({name:button.link[2]},player,_status.event.getParent());\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h',button.link[2])) return 0;\n\t\t\t\t\t\tif(_status.event.getParent().type!='phase'&&!_status.event.getParent().lvli6) return 1;\n\t\t\t\t\t\treturn player.getUseValue({name:button.link[2]});\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(){return false;},\n\t\t\t\t\t\t\taudio:'lvli',\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tcheck:function(card){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3],isCard:true},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '请选择'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'的目标';\n\t\t\t\t\t},},ai: {order: \"4\",result: {player: \"1\",},threaten: \"2.9\",fireAttack: \"true\",},group: [\"lvli2\",\"lvli3\",\"lvli4\",\"lvli5\",\"lvli6\"],}","info":"每名角色的回合限一次，你可以声明一个基本牌或普通锦囊牌的牌名，有随机概率视为使用之（装备区里的牌数越多，成功概率越大）"},"choujue":{"name":"仇决","script":"{derivation: [\"beishui\",\"qingjiao\"],trigger: {global: \"phaseAfter\",},audio: \"2\",skillAnimation: \"true\",animationColor: \"water\",unique: \"true\",juexingji: \"true\",forced: \"true\",init: function (player,skill){\n\t\t\t\t\tif(!player.storage[skill]) player.storage[skill]=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.choujue) return false;\n\t\t\t\t\treturn Math.abs(player.hp-player.countCards('h'))>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('choujue');\n\t\t\t\t\tplayer.storage.choujue=true;\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('beishui');\n\t\t\t\t},}","info":"觉醒技，一名角色的回合结束时，若你的手牌数和体力值相差3或更多，你减1点体力上限并获得技能〖背水〗，然后将〖膂力〗改为“在自己的回合时每回合限两次”。"},"nsshuaiyan":{"name":"率言","script":"{trigger: {global: \"recoverAfter\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&_status.currentPhase!=player;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar att=get.attitude(trigger.player,player);\n\t\t\t\t\tvar bool=0;\n\t\t\t\t\tif(att<0){\n\t\t\t\t\t\tif(trigger.player.countCards('e')==0&&trigger.player.countCards('h')>2) bool=1;\n\t\t\t\t\t\telse if(trigger.player.countCards('he')==0) bool=1;\n\t\t\t\t\t}\n\t\t\t\t\telse if(att==0&&trigger.player.countCards('he')==0){\n\t\t\t\t\t\tbool=1;\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.player.chooseControl(function(){\n\t\t\t\t\t\treturn _status.event.bool;\n\t\t\t\t\t}).set('prompt','率言').set('bool',bool).set('choiceList',['令'+get.translation(player)+'摸一张牌','令'+get.translation(player)+'弃置你一张牌']);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='选项一'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.player.countCards('he')){\n\t\t\t\t\t\tplayer.discardPlayerCard(trigger.player,true,'he');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"每当其他角色于你的回合外回复体力后，你可以令该角色选择一项：1.令你摸一张牌；2.令你弃置其一张牌。"},"moshou":{"name":"墨守","script":"{mod: {targetEnabled: function (card,player,target,now){\n\t\t\t\t\t\tif(card.name=='bingliang'||card.name=='lebu') return false;\n\t\t\t\t\t},},}","info":"锁定技，你不能成为乐不思蜀和兵粮寸断的目标。"},"juedao":{"name":"绝道","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.isLinked()==false;\n\t\t\t\t},filterCard: \"true\",check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player.isLinked()==false) player.link();\n\t\t\t\t},ai: {link: \"true\",order: \"2\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.isLinked()) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name=='tiesuo'){\n\t\t\t\t\t\t\t\tif(target.isLinked()){\n\t\t\t\t\t\t\t\t\treturn [0,-0.5];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn [0,0.5];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\tif(from.isLinked()) return distance+1;\n\t\t\t\t\t},globalTo: function (from,to,distance){\n\t\t\t\t\t\tif(to.isLinked()) return distance+1;\n\t\t\t\t\t},},}","info":"出牌阶段，你可以弃置一张手牌，横置你的武将牌；锁定技，若你的武将牌横置，则你计算至其他角色的距离和其他角色计算至你的距离均+1。"},"geju":{"name":"割据","script":"{trigger: {player: \"phaseBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(player!=players[i]) list.add(players[i].group);\n\t\t\t\t\t}\n\t\t\t\t\tlist.remove('unknown');\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player){\n\t\t\t\t\t\t\tif(lib.filter.targetInRange({name:'sha'},players[i],player)){\n\t\t\t\t\t\t\t\tlist.remove(players[i].group);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn list.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(player!=players[i]) list.add(players[i].group);\n\t\t\t\t\t}\n\t\t\t\t\tlist.remove('unknown');\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=player){\n\t\t\t\t\t\t\tif(lib.filter.targetInRange({name:'sha'},players[i],player)){\n\t\t\t\t\t\t\t\tlist.remove(players[i].group);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length>0) player.draw(list.length);\n\t\t\t\t},}","info":"准备阶段开始时，你可以摸X张牌（X为攻击范围内不含有你的势力数）。"},"diyguhuo":{"name":"蛊惑","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('hej')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar next=player.discardPlayerCard(player,'hej',2,true);\n\t\t\t\t\tnext.ai=function(button){\n\t\t\t\t\t\tif(get.position(button.link)=='j') return 10;\n\t\t\t\t\t\treturn -get.value(button.link);\n\t\t\t\t\t};\n\t\t\t\t\tnext.filterButton=function(button){\n\t\t\t\t\t\treturn lib.filter.cardDiscardable(button.link,player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(get.type(card)=='delay') return [0,0.5];\n\t\t\t\t\t\t},},},}","info":"锁定技，准备阶段，你摸两张牌，然后弃置区域内的两张牌"},"diychanyuan":{"name":"缠怨","script":"{trigger: {player: \"dieBegin\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn event.source!=undefined;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.source.loseMaxHp(true);\n\t\t\t\t},ai: {threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 0.2;\n\t\t\t\t\t},result: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(target.hp<=1&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-5];\n\t\t\t\t\t\t\t\treturn [1,0,0,-2];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，杀死你的角色失去一点体力上限"},"beige":{"name":"悲歌","script":"{audio: \"2\",audioname: [\"re_caiwenji\"],trigger: {global: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn (event.card&&event.card.name=='sha'&&event.source&&\n\t\t\t\t\t\tevent.player.classList.contains('dead')==false&&player.countCards('he'));\n\t\t\t\t},direct: \"true\",checkx: function (event,player){\n\t\t\t\t\tvar att1=get.attitude(player,event.player);\n\t\t\t\t\tvar att2=get.attitude(player,event.source);\n\t\t\t\t\treturn att1>0&&att2<=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt2('beige',trigger.player));\n\t\t\t\t\tvar check=lib.skill.beige.checkx(trigger,player);\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.goon) return 8-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('logSkill','beige');\n\t\t\t\t\tnext.set('goon',check);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.judge();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tswitch(result.suit){\n\t\t\t\t\t\tcase 'heart':trigger.player.recover();break;\n\t\t\t\t\t\tcase 'diamond':trigger.player.draw(2);break;\n\t\t\t\t\t\tcase 'club':trigger.source.chooseToDiscard('he',2,true);break;\n\t\t\t\t\t\tcase 'spade':trigger.source.turnOver();break;\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",},}","info":"当有角色受到【杀】造成的伤害后，你可以弃一张牌，并令其进行一次判定，若判定结果为：♥该角色回复1点体力；♦︎该角色摸两张牌；♣伤害来源弃两张牌；♠伤害来源将其武将牌翻面"},"guihan":{"name":"归汉","script":"{unique: \"true\",enable: \"chooseToUse\",skillAnimation: \"epic\",limited: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.type!='dying') return false;\n\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.sex=='male'&&player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('guihan');\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t// if(lib.config.mode=='identity'){\n\t\t\t\t\t// \tplayer.node.identity.style.backgroundColor=get.translation('weiColor');\n\t\t\t\t\t// \tplayer.group='wei';\n\t\t\t\t\t// }\n\t\t\t\t},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.storage.guihan) return false;\n\t\t\t\t\t\tif(player.hp>0) return false;\n\t\t\t\t\t},save: \"true\",result: {player: \"4\",target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp==target.maxHp) return 2;\n\t\t\t\t\t\t\treturn 4;\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.storage.guihan) return 0.8;\n\t\t\t\t\t},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，当你进入濒死状态时，可以指定一名男性角色与其各回复一点体力并摸两张牌"},"luweiyan":{"name":"围堰","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: function (card){\n\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t},position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t},'he');\n\t\t\t\t},viewAs: {name: \"shuiyanqijun\",},prompt: \"将一张非基本牌当水淹七军使用\",check: function (card){return 8-get.value(card)},group: \"luweiyan2\",ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.countCards('e')) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},tag: {multitarget: \"1\",multineg: \"1\",},},}","info":"出牌阶段限一次，你可以将一张非基本牌当作水攻使用；结算后你可以视为对其中一个目标使用一张不计入出杀次数的杀"},"qianxun":{"name":"谦逊","script":"{mod: {targetEnabled: function (card,player,target,now){\n\t\t\t\t\t\tif(card.name=='shunshou'||card.name=='lebu') return false;\n\t\t\t\t\t},},audio: \"2\",}","info":"锁定技，你不能成为【顺手牵羊】和【乐不思蜀】的目标。"},"diy_jiaoxia":{"name":"皎霞","script":"{audio: [\"jiaoxia\",2],trigger: {target: \"useCardToBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.card&&get.color(event.card)=='red';\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {effect: function (card,player,target){\n\t\t\t\t\t\tif(get.color(card)=='red') return [1,1];\n\t\t\t\t\t},},}","info":"每当你成为红色牌的目标，你可以摸一张牌"},"yiesheng":{"name":"回雪","script":"{enable: \"phaseUse\",filterCard: {color: \"black\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{color:'black'})>0;\n\t\t\t\t},selectCard: [1,null],prompt: \"弃置任意张黑色手牌并摸等量的牌\",check: function (card){return 5-get.value(card)},content: function (){\n\t\t\t\t\tplayer.draw(cards.length);\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段，你可以弃置任意数量的黑色手牌，然后摸等量的牌。"},"zhucheng":{"name":"筑城","script":"{trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.zhucheng||!player.storage.zhucheng.length;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.storage.zhucheng&&player.storage.zhucheng.length){\n\t\t\t\t\t\tif(!player.hasShan()) return false;\n\t\t\t\t\t\tif(player.storage.zhucheng.length>=2) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},intro: {content: \"cards\",},content: function (){\n\t\t\t\t\tif(player.storage.zhucheng&&player.storage.zhucheng.length){\n\t\t\t\t\t\tplayer.gain(player.storage.zhucheng,'gain2');\n\t\t\t\t\t\tdelete player.storage.zhucheng;\n\t\t\t\t\t\tplayer.unmarkSkill('zhucheng');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar cards=get.cards(Math.max(1,player.maxHp-player.hp));\n\t\t\t\t\t\tplayer.$gain2(cards);\n\t\t\t\t\t\tplayer.storage.zhucheng=cards;\n\t\t\t\t\t\tplayer.markSkill('zhucheng');\n\t\t\t\t\t}\n\t\t\t\t},ai: {target: function (card,player,target,current){\n\t\t\t\t\t\tif(card.name=='sha'&&player.storage.zhucheng&&player.storage.zhucheng.length){\n\t\t\t\t\t\t\tif(player.storage.zhucheng.length>=2){\n\t\t\t\t\t\t\t\tif(!player.hasFriend()&&player.countCards('he')-2<player.storage.zhucheng.length) return 'zeroplayertarget';\n\t\t\t\t\t\t\t\treturn 0.1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tvar he=player.getCards('he');\n\t\t\t\t\t\t\t\tvar sha=false;\n\t\t\t\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\t\t\t\tif(he[i]=='sha'&&!sha){\n\t\t\t\t\t\t\t\t\t\tsha=true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tif(get.value(he[i])<=6){\n\t\t\t\t\t\t\t\t\t\t\treturn [1,0,1,-0.5];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"zhucheng2\",}","info":"①结束阶段开始时，若没有“筑”，你可以将牌堆顶的X张牌置于你的武将牌上〔称为“筑”〕（X为你已损失的体力值与1中的较大值），否则你可以获取所有“筑”。②当你成为杀的目标时，若有“筑”，你可以令此杀的使用者弃置X张牌（X为“筑”的数量），否则杀对你无效"},"duoqi":{"name":"夺气","script":"{trigger: {global: \"discardAfter\",},filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase==player) return false;\n\t\t\t\t\tif(!player.storage.zhucheng||!player.storage.zhucheng.length) return false;\n\t\t\t\t\tvar evt=event.getParent('phaseUse');\n\t\t\t\t\tif(evt&&evt.name=='phaseUse') return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tif(get.attitude(player,trigger.player)<0&&trigger.player.needsToDiscard()){\n\t\t\t\t\t\tbool=true;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCardButton(get.prompt('zhucheng',_status.currentPhase),player.storage.zhucheng).set('ai',function(button){\n\t\t\t\t\t\treturn _status.event.bool?1:0;\n\t\t\t\t\t}).set('bool',bool);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('zhucheng',_status.currentPhase);\n\t\t\t\t\t\tplayer.$throw(result.links[0]);\n\t\t\t\t\t\tplayer.storage.zhucheng.remove(result.links[0]);\n\t\t\t\t\t\tresult.links[0].discard();\n\t\t\t\t\t\tplayer.syncStorage('zhucheng');\n\t\t\t\t\t\tif(player.storage.zhucheng.length==0){\n\t\t\t\t\t\t\tplayer.unmarkSkill('zhucheng');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.updateMarks();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar evt=trigger.getParent('phaseUse');\n\t\t\t\t\t\tif(evt&&evt.name=='phaseUse'){\n\t\t\t\t\t\t\tevt.skipped=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"当一名角色于除你之外的角色的出牌阶段内因弃置而失去牌后，你可以移去一张“筑”，并结束此出牌阶段"},"fuchou":{"name":"负仇","script":"{trigger: {target: \"shaBefore\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tif(!player.hasShan()&&get.effect(player,trigger.card,trigger.player,player)<0){\n\t\t\t\t\t\tbool=true;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCard('he',get.prompt('fuchou',trigger.player)).set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(bool){\n\t\t\t\t\t\t\tif(player.hp<=1){\n\t\t\t\t\t\t\t\tif(get.tag(card,'save')) return 0;\n\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tplayer.logSkill('fuchou',trigger.player);\n\t\t\t\t\t\ttrigger.player.gain(result.cards,player);\n\t\t\t\t\t\tif(get.position(result.cards[0])=='h'){\n\t\t\t\t\t\t\tplayer.$give(1,trigger.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.$give(result.cards,trigger.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.fuchou2.add(trigger.player);\n\t\t\t\t\t}\n\t\t\t\t},group: \"fuchou2\",}","info":"当你成为【杀】的目标时，你可以将一张牌交给此【杀】的使用者，令此【杀】对你无效且你到其的距离于当前回合内视为1，若如此做，此回合的结束阶段开始时，其令你摸一张牌，然后你需对其使用【杀】，否则失去1点体力"},"jinyan":{"name":"噤言","script":"{mod: {cardEnabled: function (card,player){\n\t\t\t\t\t\tif(_status.event.skill!='jinyan'&&player.hp<=2&&get.type(card,'trick')=='trick'&&get.color(card)=='black') return false;\n\t\t\t\t\t},cardUsable: function (card,player){\n\t\t\t\t\t\tif(_status.event.skill!='jinyan'&&player.hp<=2&&get.type(card,'trick')=='trick'&&get.color(card)=='black') return false;\n\t\t\t\t\t},cardRespondable: function (card,player){\n\t\t\t\t\t\tif(_status.event.skill!='jinyan'&&player.hp<=2&&get.type(card,'trick')=='trick'&&get.color(card)=='black') return false;\n\t\t\t\t\t},cardSavable: function (card,player){\n\t\t\t\t\t\tif(_status.event.skill!='jinyan'&&player.hp<=2&&get.type(card,'trick')=='trick'&&get.color(card)=='black') return false;\n\t\t\t\t\t},},enable: [\"chooseToUse\",\"chooseToRespond\"],filterCard: function (card){\n\t\t\t\t\treturn get.type(card,'trick')=='trick'&&get.color(card)=='black';\n\t\t\t\t},viewAsFilter: function (player){\n\t\t\t\t\tif(player.hp>2) return false;\n\t\t\t\t\tif(!player.hasCard(function(card){\n\t\t\t\t\t\treturn get.type(card,'trick')=='trick'&&get.color(card)=='black';\n\t\t\t\t\t})) return false;\n\t\t\t\t},viewAs: {name: \"sha\",},prompt: \"将一张黑色锦囊牌当作杀使用或打出\",check: function (){return 1},ai: {respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.hp>2) return false;\n\t\t\t\t\t\tif(!player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.type(card,'trick')=='trick'&&get.color(card)=='black';\n\t\t\t\t\t\t})) return false;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"锁定技。若你的体力值不大于2，你的黑色锦囊牌视为【杀】"},"kangyin":{"name":"亢音","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.discardPlayerCard(target,true);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.isDamaged()&&result.links&&result.links.length){\n\t\t\t\t\t\tif(get.type(result.links[0])=='basic'){\n\t\t\t\t\t\t\tplayer.chooseTarget([1,player.maxHp-player.hp],\n\t\t\t\t\t\t\t'选择至多'+get.cnNumber(player.maxHp-player.hp)+'名角色各摸一张牌').set('ai',function(target){\n\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.storage.kangyin2=player.maxHp-player.hp;\n\t\t\t\t\t\t\tplayer.addTempSkill('kangyin2');\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.targets&&result.targets.length){\n\t\t\t\t\t\tresult.targets.sort(lib.sort.seat);\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tgame.asyncDraw(result.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hp>=4) return -1;\n\t\t\t\t\t\t\tif(player.hp==3&&!player.needsToDiscard()) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以失去1点体力并选择一名其他角色，弃置该角色的一张牌。若此牌：为基本牌，你可以令一至X名角色各摸一张牌；不为基本牌，于此回合内：你的进攻距离+X，且你使用杀的额外目标数上限+X。（X为你已损失的体力值）"},"liangce":{"name":"粮策","script":"{enable: \"phaseUse\",viewAs: {name: \"wugu\",},usable: \"1\",filterCard: {type: \"basic\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:'basic'})>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},group: \"liangce2\",ai: {wuxie: function (){\n\t\t\t\t\t\tif(Math.random()<0.5) return 0;\n\t\t\t\t\t},basic: {order: \"3\",useful: \"1\",},result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.is.versus()){\n\t\t\t\t\t\t\t\tif(target==player) return 1.5;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hasUnknown(2)){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 2-2*get.distance(player,target,'absolute')/game.countPlayer();\n\t\t\t\t\t\t},},tag: {draw: \"1\",multitarget: \"1\",},},}","info":"①出牌阶段限一次，你可以将一张基本牌当【五谷丰登】使用。②当因执行【五谷丰登】的效果而亮出的牌因效果执行完毕而置入弃牌堆后，你可以选择一名角色，令该角色获取之"},"jianbi":{"name":"坚壁","script":"{trigger: {global: \"useCard\",},priority: \"5\",filter: function (event,player){\n\t\t\t\t\tif(get.type(event.card)!='trick') return false;\n\t\t\t\t\tif(get.info(event.card).multitarget) return false;\n\t\t\t\t\tif(event.targets.length<2) return false;\n\t\t\t\t\tif(!event.targets.contains(player)) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('jianbi'),\n\t\t\t\t\t\t[1,1],function(card,player,target){\n\t\t\t\t\t\treturn _status.event.getTrigger().targets.contains(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar eff=-get.effect(target,trigger.card,trigger.player,_status.event.player);\n\t\t\t\t\t\tif(trigger.card.name=='wugu'&&eff==0&&get.attitude(player,target)<0){\n\t\t\t\t\t\t\treturn 0.01;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn eff;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\t\tplayer.logSkill('jianbi',event.targets);\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<result.targets.length;i++){\n\t\t\t\t\t\t\ttrigger.targets.remove(result.targets[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.logSkill('jianbi',event.targets);\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'multineg')){\n\t\t\t\t\t\t\t\treturn 'zerotarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.tag(card,'multitarget')){\n\t\t\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\t\t\tif(info.selectTarget==-1&&!info.multitarget){\n\t\t\t\t\t\t\t\t\treturn [1,Math.min(3,1+target.maxHp-target.hp)];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你成为锦囊牌的目标时，若此牌的目标包括其他角色，你可以令此牌对1个目标无效"},"diyjuntun":{"name":"军屯","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'})>0;\n\t\t\t\t},position: \"he\",filterCard: {type: \"equip\",},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tvar he=player.getCards('he');\n\t\t\t\t\tvar subtype=get.subtype(card);\n\t\t\t\t\tvar value=get.equipValue(card);\n\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\tif(he[i]!=card&&get.subtype(he[i])==subtype&&get.equipValue(he[i])>=value){\n\t\t\t\t\t\t\treturn 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.needsToDiscard()){\n\t\t\t\t\t\treturn 4-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},discard: \"false\",prompt: \"将一张装备牌置入弃牌堆并摸一张牌\",delay: \"0.5\",loseTo: \"discardPile\",prepare: function (cards,player){\n\t\t\t\t\tplayer.$throw(cards,1000);\n\t\t\t\t\tgame.log(player,'将',cards,'置入了弃牌堆');\n\t\t\t\t},ai: {basic: {order: \"8.5\",},result: {player: \"1\",},},}","info":"出牌阶段，你可以重铸装备牌"},"choudu":{"name":"筹度","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn lib.filter.cardEnabled({name:'diaobingqianjiang'},target);\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=game.filterPlayer();\n\t\t\t\t\tlist.sortBySeat(target);\n\t\t\t\t\ttarget.useCard({name:'diaobingqianjiang'},list);\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=1) return 0;\n\t\t\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.effect(current,{name:'diaobingqianjiang'},target,player);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌，并指定一名角色视为其使用一张调兵遣将"},"liduan":{"name":"立断","script":"{trigger: {global: \"gainAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(_status.currentPhase==event.player) return false;\n\t\t\t\t\tif(event.cards.length!=1) return false;\n\t\t\t\t\treturn get.type(event.cards[0])=='equip'&&get.position(event.cards[0])=='h'&&event.player.hasUseTarget(event.cards[0]);\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tvar att=get.attitude(player,event.player);\n\t\t\t\t\tvar subtype=get.subtype(event.cards[0]);\n\t\t\t\t\tif(att>0){\n\t\t\t\t\t\tif(event.player.countCards('h')>=player.countCards('h')+2) return true;\n\t\t\t\t\t\treturn event.player.countCards('e',{subtype:subtype})==0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn event.player.countCards('e',{subtype:subtype})>0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tvar subtype=get.subtype(trigger.cards[0]);\n\t\t\t\t\tvar current=trigger.player.getEquip('e',parseInt(subtype[5]));\n\t\t\t\t\tvar att=get.attitude(trigger.player,player);\n\t\t\t\t\tif(current){\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(get.equipValue(current)>get.equipValue(trigger.cards[0])){\n\t\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.player.chooseCard('立断').set('prompt2','将一张手牌交给'+get.translation(player)+'，或取消并使用'+get.translation(trigger.cards)).ai=function(card){\n\t\t\t\t\t\tif(bool){\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 4-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(att<=0) return -get.value(card);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,trigger.player);\n\t\t\t\t\t\ttrigger.player.$give(1,player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.chooseUseTarget(trigger.cards[0],true);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当一名其他角色于其回合外获得牌后，若其此次获得的牌数为1且为装备牌（无论是否可见），你可以令该角色选择一项：1.使用此牌；2.将一张手牌交给你"},"chezhen":{"name":"车阵","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\tif(from.countCards('e')) return distance-1;\n\t\t\t\t\t},globalTo: function (from,to,distance){\n\t\t\t\t\t\tif(!to.countCards('e')) return distance+1;\n\t\t\t\t\t},},}","info":"锁定技。若你的装备区里：没有牌，你的防御距离+1；有牌，你的进攻距离+1"},"youzhan":{"name":"诱战","script":"{trigger: {global: \"shaBefore\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.distance(player,event.target)<=1&&player.countCards('he',{type:'equip'});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar bool=(get.attitude(player,trigger.player)<0&&get.attitude(player,trigger.target)>0);\n\t\t\t\t\tvar next=player.chooseToDiscard('he',{type:'equip'},get.prompt('youzhan',trigger.target));\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(bool){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tnext.logSkill=['youzhan',trigger.target];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.youdiinfo={\n\t\t\t\t\t\t\tsource:trigger.player,\n\t\t\t\t\t\t\tevt:trigger\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger.target.useCard({name:'youdishenru'});\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当以你距离不大于1的角色为目标的【杀】的使用结算开始时，你可以弃置一张装备牌，令该角色视为使用【诱敌深入】"},"nsxinsheng":{"name":"新生","script":"{trigger: {source: \"damageEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isHealthy();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gainMaxHp(trigger.num,true);\n\t\t\t\t\tplayer.draw(trigger.num);\n\t\t\t\t},}","info":"每当你对其他角色造成伤害后，若你未受伤，则你可以增加X点体力上限并摸X张牌，X为伤害点数"},"nsdunxing":{"name":"遁形","script":"{trigger: {player: \"damageBefore\",},filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.loseMaxHp(trigger.num,true);\n\t\t\t\t\tplayer.draw(trigger.num);\n\t\t\t\t},}","info":"每当你即将受到其他角色造成的伤害时，若你已受伤，则你可以防止此伤害，改为失去X点体力上限并摸X张牌，X为伤害点数"},"nsnongquan":{"name":"弄权","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')==1&&player.canUse('wuzhong',player);\n\t\t\t\t},direct: \"true\",delay: \"0\",content: function (){\n\t\t\t\t\tplayer.useCard({name:'wuzhong'},player.getCards('h'),player,'nsnongquan');\n\t\t\t\t},ai: {order: \"10\",result: {player: function (player,target){\n\t\t\t\t\t\t\treturn 10-get.value(player.getCards('h')[0]);\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以将最后一张手牌当作【无中生有】使用"},"nsdufu":{"name":"毒妇","script":"{trigger: {source: \"damageBefore\",},check: function (event,player){\n\t\t\t\t\treturn event.player.hasSkillTag('maixie');\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('nsdufu'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(_status.event.bool){\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('bool',trigger.player.hasSkillTag('maixie_defend'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('nsdufu',result.targets);\n\t\t\t\t\t\ttrigger.source=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每当你即将造成一次伤害时，你可以为此伤害重新指定伤害来源"},"liangji":{"name":"环计","script":"{audio: [\"liangji\",2],enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.hasSkill('liangji_1');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('h','环计：将1张牌置于'+get.translation(target)+'的武将牌上',true).set('ai',function(card){\n\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.getParent().player)>0){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.$give(result.cards,target);\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special);\n\t\t\t\t\t\ttarget.storage.liangji_1=result.cards;\n\t\t\t\t\t\ttarget.storage.liangji_1_source=target;\n\t\t\t\t\t\ttarget.syncStorage('liangji_1');\n\t\t\t\t\t\ttarget.addSkill('liangji_1');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\treturn Math.sqrt(target.countCards('he'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},player: \"1\",},},subSkill: {1: {trigger: {player: \"phaseDrawBegin\",},forced: \"true\",mark: \"true\",intro: {content: \"cards\",},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar cards=player.storage.liangji_1;\n\t\t\t\t\t\t\tif(cards){\n\t\t\t\t\t\t\t\tplayer.gain(cards,'gain2');\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t\t\t\tplayer.storage.liangji_1=0;\n\t\t\t\t\t\t\t'step 1'\t\t\t\n\t\t\t\t\t\t\tif(player.sex=='male')player.addTempSkill('wushuang');\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(player.sex=='female')player.addTempSkill('lijian');\n\t\t\t\t\t\t\tplayer.removeSkill('liangji_1');\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段限一次，你可以选择一名未以此法放置牌的其他角色并将一张手牌置于其武将牌上。目标角色于摸牌阶段开始时，获得此牌。若其为男性角色，则获得技能【无双】，若其为女性角色，则获得技能【离间】，直到回合结束。"},"jugong":{"name":"居功","script":"{audio: [\"jingong\",2],trigger: {global: \"damageEnd\",},usable: \"1\",frequent: \"true\",locked: \"false\",notemp: \"true\",marktext: \"功\",init: function (player){\n\t\t\t\t\tplayer.storage.jugong=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card&&(event.card.name=='sha'||event.card.name=='juedou')&&event.notLink()\t\t\t\t\n\t\t\t\t\t&&_status.currentPhase!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(player.countCards('h')){\n\t\t\t\t\t\tplayer.chooseCard('将'+get.cnNumber(1)+'张手牌置于武将牌上作为“功”',1,true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.cards&&result.cards.length){\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special);\n\t\t\t\t\t\tplayer.storage.jugong=player.storage.jugong.concat(result.cards);\n\t\t\t\t\t\tplayer.syncStorage('jugong');\n\t\t\t\t\t\tplayer.markSkill('jugong');\n\t\t\t\t\t\tgame.log(player,'将',result.cards,'置于武将牌上作为“功”');\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"cards\",},group: \"jugong_1\",subSkill: {1: {trigger: {player: \"damageBegin\",},filter: function (event,player){\t\t\n\t\t\t\t\t\t\treturn player.storage.jugong.length>1;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t\"step 0\" \n\t\t\t\t\t\t\tplayer.chooseCardButton('移去两张“功”',2,player.storage.jugong,true);\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(event.directresult||result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('jugong');\n\t\t\t\t\t\t\t\tvar links=event.directresult||result.links;\n\t\t\t\t\t\t\t\tfor(var i=0;i<links.length;i++){\n\t\t\t\t\t\t\t\t\tplayer.storage.jugong.remove(links[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplayer.syncStorage('jugong');\n\t\t\t\t\t\t\t\tif(!player.storage.jugong.length){\n\t\t\t\t\t\t\t\t\tplayer.unmarkSkill('jugong');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tplayer.markSkill('jugong');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplayer.$throw(links);\n\t\t\t\t\t\t\t\tgame.log(player,'被移去了',links);\n\t\t\t\t\t\t\t\tfor(var i=0;i<links.length;i++){\n\t\t\t\t\t\t\t\t\tui.discardPile.appendChild(links[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"step 2\"\n\t\t\t\t\t\t\ttrigger.cancel();\t\t\t\t\t\t\n\t\t\t\t\t\t},sub: \"true\",},},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [0.5,get.tag(card,'damage')*2];\n\t\t\t\t\t\t\t\tif(!target.hasSkill('paiyi')&&target.hp>1) return [0.5,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [0.5,get.tag(card,'damage')*0.2];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [0.1,get.tag(card,'damage')*0.1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"回合外每名角色的回合限一次，每当场上有角色因受到【杀】或【决斗】造成的伤害，你可以摸一张牌并且将一张手牌置于你的武将牌上，称之为“功”。在你即将受到伤害时，你可以弃置两张“功”，防止此伤害。"},"chengmou":{"name":"逞谋","script":"{audio: [\"moucheng\",2],trigger: {player: \"phaseDrawBegin\",},frequent: \"true\",filter: function (event,player){\t\t\n\t\t\t\t\treturn player.storage.jugong.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.storage.jugong.length>2) player.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=player.storage.jugong;\n\t\t\t\t\tif(cards){\t\t\t\t\t\n\t\t\t\t\t\tplayer.gain(cards,'gain2');\t\t\t\t\t\n\t\t\t\t\t}\t\t\t\t\t\t\t\t\n\t\t\t\t\tplayer.storage.jugong=[];   \n\t\t\t\t\t'step 2'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},}","info":"摸牌阶段开始时，若你有“功”牌，你获得之并跳过摸牌阶段，若你所获得的“功”牌多于两张，你须失去一点体力。"},"nshuanxian":{"name":"幻仙","script":"{trigger: {global: \"gameStart\",player: \"enterGame\",},forced: \"true\",nosub: \"true\",unique: \"true\",group: [\"nshuanxian_left\",\"nshuanxian_right\",\"nshuanxian_damage\",\"nshuanxian_swap\",\"nshuanxian_draw\"],content: function (){\n\t\t\t\t\tplayer.storage.nshuanxian_right=player.addSubPlayer({\n\t\t\t\t\t\tname:'ns_nanhua_right',\n\t\t\t\t\t\tskills:['nshuanxian_left','nshuanxian_draw','nshuanxian_swap'],\n\t\t\t\t\t\thp:2,\n\t\t\t\t\t\tmaxHp:2,\n\t\t\t\t\t\ths:get.cards(2),\n\t\t\t\t\t\tskill:'nshuanxian',\n\t\t\t\t\t\tintro:'你的本体回合结束后，切换至此随从并进行一个额外的回合；若你的上家与下家不同，在你的下家的准备阶段，切换至此随从',\n\t\t\t\t\t\tintro2:'当前回合结束后切换回本体',\n\t\t\t\t\t\tonremove:function(player){\n\t\t\t\t\t\t\tdelete player.storage.nshuanxian_right;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp<=2) return;\n\t\t\t\t\t\t\t\tif(!target.storage.nshuanxian_damage){\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)<0||get.tag(card,'multineg')) return [0,1];\n\t\t\t\t\t\t\t\t\treturn [1,1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},subSkill: {chosen: {sub: \"true\",},leftdist: {mod: {globalFrom: function (from,to,distance){\n\n\t\t\t\t\t\t\t},globalTo: function (from,to,distance){\n\n\t\t\t\t\t\t\t},},sub: \"true\",},rightdist: {mod: {globalFrom: function (from,to,distance){\n\n\t\t\t\t\t\t\t},globalTo: function (from,to,distance){\n\n\t\t\t\t\t\t\t},},sub: \"true\",},swap: {trigger: {global: \"phaseBegin\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.player!=player;\n\t\t\t\t\t\t},priority: \"20\",content: function (){\n\t\t\t\t\t\t\tvar next=player.getNext();\n\t\t\t\t\t\t\tvar prev=player.getPrevious();\n\t\t\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\t\t\tif(prev==next||(trigger.player!=next&&trigger.player!=prev)){\n\t\t\t\t\t\t\t\tif(player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\t\tplayer.exitSubPlayer();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(prev==trigger.player&&player.name!=left&&left){\n\t\t\t\t\t\t\t\tif(!player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\t\tplayer.callSubPlayer(left);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tplayer.toggleSubPlayer(left);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(next==trigger.player&&player.name!=right&&right){\n\t\t\t\t\t\t\t\tif(!player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\t\tplayer.callSubPlayer(right);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tplayer.toggleSubPlayer(right);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},damage: {trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !player.storage.nshuanxian_damage;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.nshuanxian_damage=true;\n\t\t\t\t\t\t\tplayer.storage.nshuanxian_left=player.addSubPlayer({\n\t\t\t\t\t\t\t\tname:'ns_nanhua_left',\n\t\t\t\t\t\t\t\tskills:['nshuanxian_middle','nshuanxian_draw','nshuanxian_swap'],\n\t\t\t\t\t\t\t\thp:2,\n\t\t\t\t\t\t\t\tmaxHp:2,\n\t\t\t\t\t\t\t\ths:get.cards(2),\n\t\t\t\t\t\t\t\tskill:'nshuanxian',\n\t\t\t\t\t\t\t\tintro:'你的本体回合开始前，切换至此随从并进行一个额外的回合；若你的上家与下家不同，在你的上家的准备阶段，切换至此随从',\n\t\t\t\t\t\t\t\tintro2:'当前回合结束后切换回本体',\n\t\t\t\t\t\t\t\tonremove:function(player){\n\t\t\t\t\t\t\t\t\tdelete player.storage.nshuanxian_left;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\ttrigger.nshuanxian=true;\n\t\t\t\t\t\t},sub: \"true\",},draw: {trigger: {player: \"phaseDrawBegin\",},silent: \"true\",filter: function (event){\n\t\t\t\t\t\t\treturn event.num>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},left: {trigger: {player: \"phaseBefore\",},forced: \"true\",popup: \"false\",priority: \"40\",filter: function (event,player){\n\t\t\t\t\t\t\tif(event.skill=='nshuanxian_middle') return false;\n\t\t\t\t\t\t\tif(event.skill=='nshuanxian_right') return false;\n\t\t\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\t\t\tif(player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\tif(!left) return player.name==player.storage.nshuanxian_right;\n\t\t\t\t\t\t\t\treturn player.storage.subplayer.skills.contains(left);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(!left) return false;\n\t\t\t\t\t\t\t\treturn player.hasSkill(left);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\t\t\t\tif(left&&player.storage.subplayer.skills.contains(left)){\n\t\t\t\t\t\t\t\t\tplayer.toggleSubPlayer(player.storage.nshuanxian_left);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tplayer.exitSubPlayer();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.callSubPlayer(player.storage.nshuanxian_left);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},middle: {trigger: {player: [\"phaseAfter\",\"phaseCancelled\"],},forced: \"true\",popup: \"false\",priority: \"-40\",filter: function (event,player){\n\t\t\t\t\t\t\tif(player.hasSkill('nshuanxian_chosen')) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.exitSubPlayer();\n\t\t\t\t\t\t\tplayer.insertPhase(null,true);\n\t\t\t\t\t\t},sub: \"true\",},right: {trigger: {player: [\"phaseAfter\",\"phaseCancelled\"],},forced: \"true\",popup: \"false\",priority: \"-40\",filter: function (event,player){\n\t\t\t\t\t\t\tif(player.hasSkill('nshuanxian_chosen')) return false;\n\t\t\t\t\t\t\tif(player.hasSkill('subplayer')) return false;\n\t\t\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\t\t\tif(!right) return false;\n\t\t\t\t\t\t\treturn player.hasSkill(right);\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.callSubPlayer(player.storage.nshuanxian_right);\n\t\t\t\t\t\t\tplayer.insertPhase(null,true);\n\t\t\t\t\t\t\tplayer.addTempSkill('nshuanxian_chosen',['phaseBegin','phaseCancelled']);\n\t\t\t\t\t\t},sub: \"true\",},end: {trigger: {player: [\"phaseAfter\",\"phaseCancelled\"],},forced: \"true\",popup: \"false\",priority: \"-40\",filter: function (event,player){\n\t\t\t\t\t\t\tif(player.hasSkill('nshuanxian_chosen')) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\tplayer.exitSubPlayer();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},content_old: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar controls=['本体'];\n\t\t\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\t\t\tif(player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\tif(player.storage.subplayer.skills.contains(left)){\n\t\t\t\t\t\t\t\t\tcontrols.unshift('幻身·左');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(player.storage.subplayer.skills.contains(right)){\n\t\t\t\t\t\t\t\t\tcontrols.push('幻身·右');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(player.hasSkill(left)){\n\t\t\t\t\t\t\t\t\tcontrols.unshift('幻身·左');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(player.hasSkill(right)){\n\t\t\t\t\t\t\t\t\tcontrols.push('幻身·右');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(controls.length>1){\n\t\t\t\t\t\t\t\tplayer.chooseControl(controls,function(event,player){\n\t\t\t\t\t\t\t\t\treturn Math.floor(Math.random()*_status.event.num);\n\t\t\t\t\t\t\t\t}).set('prompt','选择一个形态直到下一回合开始').set('num',controls.length);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tswitch(result.control){\n\t\t\t\t\t\t\t\tcase '幻身·左':{\n\t\t\t\t\t\t\t\t\tif(!player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\t\t\tplayer.callSubPlayer(player.storage.nshuanxian_left);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tplayer.toggleSubPlayer(player.storage.nshuanxian_left);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase '幻身·右':{\n\t\t\t\t\t\t\t\t\tif(!player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\t\t\tplayer.callSubPlayer(player.storage.nshuanxian_right);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdefault:{\n\t\t\t\t\t\t\t\t\tif(player.hasSkill('subplayer')){\n\t\t\t\t\t\t\t\t\t\tplayer.exitSubPlayer();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.addTempSkill('nshuanxian_chosen','phaseBegin');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，游戏开始时，你获得随从“幻身·右”，当你首次受到伤害时，你获得随从“幻身·左”（体力上限2，初始手牌2）；你与幻身在摸牌阶段均少摸一张牌；在你的回合中（如果有对应幻身），你以【幻身·左-本体-幻身·右】的顺序进行3个连续回合"},"nstaiping":{"name":"太平","script":"{trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn !event.nshuanxian&&player.getSubPlayers('nshuanxian').length;\n\t\t\t\t},direct: \"true\",priority: \"-0.1\",ai: {maixie: \"true\",maixie_hp: \"true\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar choice=0;\n\t\t\t\t\tvar hpleft=0;\n\t\t\t\t\tvar maxleft=0;\n\t\t\t\t\tif(left&&player.hasSkill(left)){\n\t\t\t\t\t\tif(player.storage[left].hp<player.storage[left].maxHp){\n\t\t\t\t\t\t\tlist.push('令幻身·左回复一点体力');\n\t\t\t\t\t\t\thpleft=player.storage[left].hp;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.push('令幻身·左增加一点体力上限');\n\t\t\t\t\t\tmaxleft=player.storage[left].hp;\n\t\t\t\t\t}\n\t\t\t\t\tif(left&&player.hasSkill(right)){\n\t\t\t\t\t\tif(player.storage[right].hp<player.storage[right].maxHp){\n\t\t\t\t\t\t\tlist.push('令幻身·右回复一点体力');\n\t\t\t\t\t\t\tif(!hpleft||player.storage[right].hp<hpleft||\n\t\t\t\t\t\t\t\t(player.storage[right].hp==hpleft&&Math.random()<0.5)){\n\t\t\t\t\t\t\t\tchoice=list.length-1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.push('令幻身·右增加一点体力上限');\n\t\t\t\t\t\tif(!hpleft&&maxleft&&choice==0){\n\t\t\t\t\t\t\tif(player.storage[right].maxHp<maxleft||\n\t\t\t\t\t\t\t\t(player.storage[right].maxHp==maxleft&&Math.random()<0.5)){\n\t\t\t\t\t\t\t\tchoice=list.length-1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.map={};\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tevent.map['选项'+get.cnNumber(i+1,true)]=list[i];\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControlList(list,function(){\n\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t}).set('prompt',get.prompt('nstaiping')).set('choice',choice);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('nstaiping');\n\t\t\t\t\t\tswitch(event.map[result.control]){\n\t\t\t\t\t\t\tcase '令幻身·左回复一点体力':player.storage[left].hp++;break;\n\t\t\t\t\t\t\tcase '令幻身·左增加一点体力上限':player.storage[left].maxHp++;break;\n\t\t\t\t\t\t\tcase '令幻身·右回复一点体力':player.storage[right].hp++;break;\n\t\t\t\t\t\t\tcase '令幻身·右增加一点体力上限':player.storage[right].maxHp++;break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.log(player,event.map[result.control].replace(/一/,'了一'));\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.num>1){\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到一点伤害后（首次伤害除外），你可以选择一项: ①令一个“幻身”增加一点体力上限。②令一个“幻身”回复一点体力。"},"nsshoudao":{"name":"授道","script":"{group: [\"nsshoudao_gain\",\"nsshoudao_die\"],subSkill: {gain: {trigger: {player: \"subPlayerDie\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\t\t\tif(left&&player.hasSkill(left)) return false;\n\t\t\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\t\t\tif(right&&player.hasSkill(right)) return false;\n\t\t\t\t\t\t\tif(!player.storage.nshuanxian_damage) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.addSkill('releiji');\n\t\t\t\t\t\t\tplayer.addSkill('guidao');\n\t\t\t\t\t\t},sub: \"true\",},die: {trigger: {player: \"dieBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(game.countPlayer()<=2) return false;\n\t\t\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\t\t\tif(left&&player.hasSkill(left)) return true;\n\t\t\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\t\t\tif(right&&player.hasSkill(right)) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar str;\n\t\t\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\t\t\tif(left&&player.hasSkill(left)&&right&&player.hasSkill(right)){\n\t\t\t\t\t\t\t\tstr='令一名其他角色获得技能【雷击】和【鬼道】';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tstr='令一名其他角色获得技能【雷击】或【鬼道】';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\t\t\tstr+='（'+get.translation(trigger.source)+'除外）';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player&&target!=_status.event.source;\n\t\t\t\t\t\t\t},get.prompt('nsshoudao')).set('ai',function(target){\n\t\t\t\t\t\t\t\tif(target.hasSkill('releiji')) return 0;\n\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t}).set('source',trigger.source).set('prompt2',str);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tvar goon=false;\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tplayer.logSkill('nsshoudao',target);\n\t\t\t\t\t\t\t\tvar left=player.storage.nshuanxian_left;\n\t\t\t\t\t\t\t\tvar right=player.storage.nshuanxian_right;\n\t\t\t\t\t\t\t\tif(left&&player.hasSkill(left)&&right&&player.hasSkill(right)){\n\t\t\t\t\t\t\t\t\ttarget.addSkillLog('releiji');\n\t\t\t\t\t\t\t\t\ttarget.addSkillLog('guidao');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\t\t\t\tplayer.chooseControl('releiji','guidao').set('prompt','令'+get.translation(target)+'获得一项技能');\n\t\t\t\t\t\t\t\t\tgoon=true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!goon){\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tevent.target.addSkillLog(result.control);\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"当左右“幻身”全部死亡时，你获得技能“雷击”和“鬼道”。当你死亡时，若此时有两个“幻身”，你可以令一名其他角色获得技能“雷击”和“鬼道”。若有一个“幻身”，你可以令一名其他角色获得技能“雷击”或“鬼道”。(杀死你的角色除外)"},"nscongjun":{"name":"从军","script":"{forbid: [\"guozhan\"],unique: \"true\",forceunique: \"true\",init: function (player){\n\t\t\t\t\tif(player.storage.nscongjun_show) return false;\n\t\t\t\t\tvar change=function(target){\n\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\tvar list;\n\t\t\t\t\t\t\tif(_status.connectMode){\n\t\t\t\t\t\t\t\tlist=get.charactersOL(function(i){\n\t\t\t\t\t\t\t\t\treturn lib.character[i][0]!='male';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlist=get.gainableCharacters(function(info){\n\t\t\t\t\t\t\t\t\treturn info[0]=='male';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar name=list.randomGet();\n\t\t\t\t\t\t\ttarget.reinit('ns_huamulan',name,'nosmooth');\n\t\t\t\t\t\t\ttarget.storage.nscongjun_show=name;\n\t\t\t\t\t\t\ttarget.addSkill('nscongjun_show');\n\t\t\t\t\t\t\tplayer._inits.remove(change);\n\t\t\t\t\t\t\tplayer.hp=player.maxHp;\n\t\t\t\t\t\t\tplayer.update();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!player._inits){\n\t\t\t\t\t\tplayer._inits=[];\n\t\t\t\t\t}\n\t\t\t\t\tplayer._inits.push(change);\n\t\t\t\t},subSkill: {show: {trigger: {global: \"useCard\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn player.getEnemies().contains(event.player)&&event.card.name=='wuxie'&&event.getRand()<0.1;\n\t\t\t\t\t\t},direct: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.reinit(player.storage.nscongjun_show,'ns_huamulan','nosmooth');\n\t\t\t\t\t\t\tplayer.logSkill('nscongjun_show');\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tplayer.removeSkill('nscongjun_show');\n\t\t\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\t\t\ttrigger.player.damage(2);\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，游戏开始时，你变身为一名随机男性角色；当一名敌方角色使用无懈可击时，你有小概率亮出此武将并变回花木兰，然后对该角色造成2点伤害"},"xiaoji":{"name":"枭姬","script":"{audio: \"2\",audioname: [\"sp_sunshangxiang\",\"re_sunshangxiang\"],trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.player==player&&evt.es&&evt.es.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.getl(player).es.length;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.count>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('xiaoji')).set('frequentSkill','xiaoji').ai=lib.filter.all;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xiaoji');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {noe: \"true\",reverseEquip: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},},}","info":"当你失去一张装备区内的牌后，你可以摸两张牌。"},"gongji":{"name":"弓骑","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",position: \"he\",filterCard: \"true\",check: function (card){\n\t\t\t\t\tif(get.type(card)!='equip') return 0;\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.equipValue(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.addTempSkill('gongji2');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(get.type(cards[0],null,cards[0].original=='h'?player:false)=='equip'){\n\t\t\t\t\t\tplayer.chooseTarget('是否弃置一名角色的一张牌？',function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0){\n\t\t\t\t\t\t\t\treturn Math.max(0.5,get.effect(target,{name:'sha'},player,player));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.discardPlayerCard(event.target,'he',true).ai=get.buttonValue;\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张牌，然后你的攻击范围视为无限直到回合结束。若你以此法弃置的牌为装备牌，则你可以弃置一名其他角色的一张牌。"},"nsjihui":{"name":"急恚","script":"{trigger: {global: \"discardAfter\",},filter: function (event,player){\n\t\t\t\t\treturn event.cards.length>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\tplayer.storage.nsjihui_use=_status.currentPhase;\n\t\t\t\t\tplayer.addSkill('nsjihui_use');\n\t\t\t\t},subSkill: {use: {mark: \"character\",intro: {content: \"使用牌只能指定自己与$为目标\",},trigger: {player: \"phaseAfter\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.skill=='nsjihui';\n\t\t\t\t\t\t},onremove: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.removeSkill('nsjihui_use');\n\t\t\t\t\t\t},mod: {playerEnabled: function (card,player,target){\n\t\t\t\t\t\t\t\tif(player!=target&&player.storage.nsjihui_use!=target) return false;\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"锁定技，每当一名角色一次弃置了三张或更多的牌，你获得一个额外回合；你的额外回合内，你使用牌只能指定你与上一回合角色为目标"},"nsmouyun":{"name":"谋运","script":"{enable: \"phaseUse\",round: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.isMinHp()&&target!=player&&target.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(target.isDamaged()){\n\t\t\t\t\t\tplayer.discardPlayerCard(target,'hej',target.maxHp-target.hp,true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn target.hp-target.maxHp;\n\t\t\t\t\t\t},},},group: [\"nsmouyun_roundcount\"],}","info":"每两轮限一次，你可以弃置场上体力值最少的一名其他角色区域内的X张牌。（X为其损失的体力值）"},"nspinmin":{"name":"拼命","script":"{trigger: {player: \"dieBefore\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.maxHp>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tplayer.hp=1;\n\t\t\t\t\tplayer.update();\n\t\t\t\t\tif(_status.currentPhase==player){\n\t\t\t\t\t\tvar num=4;\n\t\t\t\t\t\t// if(game.countPlayer()>=7){\n\t\t\t\t\t\t// \tnum=5;\n\t\t\t\t\t\t// }\n\t\t\t\t\t\tif(!player.hasSkill('nspinmin_used')&&player.maxHp<num){\n\t\t\t\t\t\t\tplayer.gainMaxHp(true);\n\t\t\t\t\t\t\tplayer.addTempSkill('nspinmin_used');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.loseMaxHp(true);\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {used: {sub: \"true\",},},}","info":"锁定技，当你于回合内死亡时，你不死亡并增加一点体力上限（每回合最多增加1点且不能超过4）；当你于回合外死亡时，你不死亡并减少一点体力上限（体力上限为0会导致你死亡）"},"nsshishou":{"name":"失手","script":"{trigger: {player: \"loseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(event.cards[i].original=='h') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},group: \"nsshishou_use\",subSkill: {use: {mod: {cardEnabled: function (card,player){\n\t\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\t\tif(get.cardCount(true,player)>=4){\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'save')){\n\t\t\t\t\t\t\t\tif(_status.currentPhase==player) return 0;\n\t\t\t\t\t\t\t\tif(target.maxHp>1&&player!=target) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.tag(card,'recover')){\n\t\t\t\t\t\t\t\tif(_status.currentPhase==player) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当你于回合内失去手牌时，你失去一点体力并摸一张牌；你回合内使用的牌数不能超过4"},"nsduijue":{"name":"对决","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar color={\n\t\t\t\t\t\tblack:player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.color(card)=='red'&&get.value(card)<8;\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tred:player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.color(card)=='black'&&get.value(card)<8;\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt2('nsduijue')).set('ai',function(card){\n\t\t\t\t\t\tvar num=_status.event.color[get.color(card)];\n\t\t\t\t\t\tif(_status.event.goon&&num>=1){\n\t\t\t\t\t\t\treturn 7+num-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('goon',game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.effect(current,{name:'juedou'},player,player)>0;\n\t\t\t\t\t})).set('color',color).set('logSkill','nsduijue');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('nsduijue_use');\n\t\t\t\t\t\tplayer.storage.nsduijue_use=get.color(result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {use: {enable: \"phaseUse\",viewAs: {name: \"juedou\",},usable: \"2\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.hasCard(function(card){\n\t\t\t\t\t\t\t\treturn get.color(card)!=player.storage.nsduijue_use;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\t\t\treturn get.color(card)!=player.storage.nsduijue_use;\n\t\t\t\t\t\t},check: function (card){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t},ai: {basic: {order: \"10\",useful: \"1\",value: \"5.5\",},wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(player==game.me&&get.attitude(viewer,player)>0){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},result: {target: \"-1.5\",player: function (player,target,card){\n\t\t\t\t\t\t\tif(player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,target)>0&&get.attitude(player,target)>0&&get.attitude(target,player)>0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar hs1=target.getCards('h','sha');\n\t\t\t\t\t\t\tvar hs2=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(hs1.length>hs2.length+1){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar hsx=target.getCards('h');\n\t\t\t\t\t\t\tif(hsx.length>2&&hs2.length==0&&hsx[0].number<6){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hsx.length>3&&hs2.length==0){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hs1.length>hs2.length&&(!hs2.length||hs1[0].number>hs2[0].number)){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},tag: {respond: \"2\",respondSha: \"2\",damage: \"1\",},},sub: \"true\",},},}","info":"出牌阶段开始时，你可以弃置一张手牌，若如此做，此阶段你可以将一张与此牌颜色不同的手牌当作[决斗]使用（限2次）"},"nsshuangxiong":{"name":"双雄","script":"{trigger: {player: \"juedouBegin\",target: \"juedouBegin\",},check: function (event,player){\n\t\t\t\t\treturn player.isTurnedOver();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t},}","info":"当你使用[决斗]或被使用[决斗]时，你可以将武将牌翻面"},"nsguanyong":{"name":"冠勇","script":"{enable: \"chooseToRespond\",filterCard: \"true\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\tif(!player.countCards('h')) return false;\n\t\t\t\t},prompt: \"将一张手牌当杀打出\",check: function (card){return 7-get.value(card)},ai: {respondSha: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg!='respond') return false;\n\t\t\t\t\t\tif(!player.countCards('h')) return false;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"你可以将一张手牌当[杀]打出"},"nscaiyi":{"name":"猜疑","script":"{trigger: {global: \"drawAfter\",},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)>=0) return false;\n\t\t\t\t\tif(get.effect(event.player,{name:'sha'},player,player)<=0) return false;\n\t\t\t\t\tif(get.effect(player,{name:'sha'},event.player,player)>=0) return true;\n\t\t\t\t\treturn player.hasShan()&&player.hp>=event.player.hp;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&Array.isArray(event.result)&&event.result.length>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.viewCards(get.translation(trigger.player)+'摸到的牌',trigger.result);\n\t\t\t\t\tif(!event.isMine()){\n\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<trigger.result.length;i++){\n\t\t\t\t\t\tif(trigger.result[i].name=='sha'){\n\t\t\t\t\t\t\tlist.push(trigger.result[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.useCard({name:'sha'},trigger.player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.useCard({name:'sha'},player);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"其他角色摸牌后，你可以观看其摸到的牌，若其中有【杀】，则视为你对其使用一张【杀】，若其中没有【杀】，则视为其对你使用一张【杀】（计入出杀次数）"},"nsgefa":{"name":"割发","script":"{enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<=0;\n\t\t\t\t},filterCard: {suit: \"club\",},position: \"he\",viewAs: {name: \"tao\",},prompt: \"将一张梅花牌当桃使用\",check: function (card){return 15-get.value(card)},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\treturn player.countCards('he',{suit:'club'})>0;\n\t\t\t\t\t},threaten: \"1.5\",save: \"true\",respondTao: \"true\",basic: {order: function (card,player){\n\t\t\t\t\t\t\tif(player.hasSkillTag('pretao')) return 5;\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},useful: [8,6.5,5,4],value: [8,6.5,5,4],},result: {target: \"2\",target_use: function (player,target){\n\t\t\t\t\t\t\t// if(player==target&&player.hp<=0) return 2;\n\t\t\t\t\t\t\tif(player.hasSkillTag('nokeep',true,null,true)) return 2;\n\t\t\t\t\t\t\tvar nd=player.needsToDiscard();\n\t\t\t\t\t\t\tvar keep=false;\n\t\t\t\t\t\t\tif(nd<=0){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nd==1&&target.hp>=2&&target.countCards('h','tao')<=1){\n\t\t\t\t\t\t\t\tkeep=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\t\t\tif(target.hp>=2&&keep&&target.hasFriend()){\n\t\t\t\t\t\t\t\tif(target.hp>2||nd==0) return 0;\n\t\t\t\t\t\t\t\tif(target.hp==2){\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(target!=current&&get.attitude(target,current)>=3){\n\t\t\t\t\t\t\t\t\t\t\tif(current.hp<=1) return true;\n\t\t\t\t\t\t\t\t\t\t\tif((mode=='identity'||mode=='versus'||mode=='chess')&&current.identity=='zhu'&&current.hp<=2) return true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<0&&target!=player&&target.identity!='zhu') return 0;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att<3&&att>=0&&player!=target) return 0;\n\t\t\t\t\t\t\tvar tri=_status.event.getTrigger();\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='fan'&&target.identity=='fan'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='fan'&&tri.source!=target){\n\t\t\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\tif(current.identity=='fan'){\n\t\t\t\t\t\t\t\t\t\t\treturn current.countCards('h','tao');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif(num>1&&player==target) return 2;\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='identity'&&player.identity=='zhu'&&target.identity=='nei'){\n\t\t\t\t\t\t\t\tif(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='zhong'){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(mode=='stone'&&target.isMin()&&\n\t\t\t\t\t\t\tplayer!=target&&tri&&tri.name=='dying'&&player.side==target.side&&\n\t\t\t\t\t\t\ttri.source!=target.getEnemy()){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t},},tag: {recover: \"1\",save: \"1\",},},}","info":"当你的体力值等于0或更低时，你可以将任意一张♣牌当【桃】使用"},"nshaoling":{"name":"号令","script":"{skillAnimation: \"true\",animationColor: \"water\",unique: \"true\",limited: \"true\",enable: \"phaseUse\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('nshaoling');\n\t\t\t\t\tevent.targets=game.filterPlayer();\n\t\t\t\t\tevent.targets.remove(player);\n\t\t\t\t\tevent.targets.remove(target);\n\t\t\t\t\tevent.targets.sortBySeat();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.current=event.targets.shift();\n\t\t\t\t\t\tif(event.current.countCards('he')&&target.isAlive()){\n\t\t\t\t\t\t\tevent.current.chooseToUse({name:'sha'},target,-1,'号令').set('prompt2','选择一项：1. 对'+get.translation(event.current)+'使用一张杀；2. 取消并交给'+get.translation(player)+'一张牌，然后视'+get.translation(player)+'为对你使用一张杀');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\tif(event.current.countCards('he')){\n\t\t\t\t\t\t\tevent.current.chooseCard('he',true,'交给'+get.translation(player)+'一张牌');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.current.give(result.cards,player);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tplayer.useCard({name:'sha'},event.current,false);\n\t\t\t\t\tevent.goto(1);\n\t\t\t\t},ai: {order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tif(player.hp>1){\n\t\t\t\t\t\t\t\tif(game.phaseNumber<game.players.length) return 0;\n\t\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar effect=0;\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=target&&players[i]!=player&&players[i].countCards('he'))\n\t\t\t\t\t\t\t\teffect+=get.effect(target,{name:'sha'},players[i],target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn effect;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以指定一名其他角色，令另外所有其他角色角色选择一项：1、对该角色使用一张【杀】；2、交给你一张牌，然后视为你对其使用一张【杀】"},"nsjianxiong":{"name":"奸雄","script":"{trigger: {target: \"useCardToBefore\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToUse(function(card){\n\t\t\t\t\t\treturn !get.info(card).multitarget;\n\t\t\t\t\t},get.prompt('nsjianxiong',trigger.player),trigger.player,-1);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.damaged){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tif(get.color(trigger.card)=='black'){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {damage: {trigger: {source: \"damageAfter\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.getParent(4).name=='nsjianxiong';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.getParent(4).damaged=true;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},group: \"nsjianxiong_damage\",ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&!player.needsToDiscard(1)&&target.hp>1){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你成为一名角色牌的目标后你可以对该角色使用一张牌，若此牌对其造成伤害，则该角色的牌失效。若失效的为黑色牌，则你摸一张牌"},"nsxionglue":{"name":"雄略","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{color:'black'});\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},filterCard: {color: \"black\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=get.inpile('trick');\n\t\t\t\t\tlist=list.randomGets(3);\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tlist[i]=['锦囊','',list[i]];\n\t\t\t\t\t}\n\t\t\t\t\tvar dialog=ui.create.dialog('选择一张锦囊牌加入你的手牌',[list,'vcard'],'hidden');\n\t\t\t\t\tplayer.chooseButton(dialog,true).set('ai',function(button){\n\t\t\t\t\t\tvar card={name:button.link[2]};\n\t\t\t\t\t\tvar value=get.value(card);\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(game.createCard(result.buttons[0].link[2]),'draw');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张黑色手牌，然后发现一张锦囊牌"},"nsguanxing":{"name":"观星","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hp>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.cards=get.cards(game.countPlayer());\n\t\t\t\t\tevent.chosen=[];\n\t\t\t\t\tevent.num=player.hp;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar js=player.getCards('j');\n\t\t\t\t\tvar pos;\n\t\t\t\t\tvar choice=-1;\n\t\t\t\t\tvar getval=function(card,pos){\n\t\t\t\t\t\tif(js[pos]){\n\t\t\t\t\t\t\treturn (get.judge(js[pos]))(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tfor(pos=0;pos<Math.min(event.cards.length,js.length+2);pos++){\n\t\t\t\t\t\tvar max=getval(event.cards[pos],pos);\n\t\t\t\t\t\tfor(var j=pos+1;j<event.cards.length;j++){\n\t\t\t\t\t\t\tvar current=getval(event.cards[j],pos);\n\t\t\t\t\t\t\tif(current>max){\n\t\t\t\t\t\t\t\tchoice=j;\n\t\t\t\t\t\t\t\tmax=current;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(choice!=-1){\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCardButton('观星：选择要移动的牌（还能移动'+event.num+'张）',event.cards).set('filterButton',function(button){\n\t\t\t\t\t\treturn !_status.event.chosen.contains(button.link);\n\t\t\t\t\t}).set('chosen',event.chosen).set('ai',function(button){\n\t\t\t\t\t\treturn button.link==_status.event.choice?1:0;\n\t\t\t\t\t}).set('choice',event.cards[choice]);\n\t\t\t\t\tevent.pos=pos;\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\tvar index=event.cards.indexOf(card);\n\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\tevent.chosen.push(card);\n\t\t\t\t\t\tevent.cards.remove(event.card);\n\t\t\t\t\t\tvar buttons=event.cards.slice(0);\n\t\t\t\t\t\tplayer.chooseControl(function(){\n\t\t\t\t\t\t\treturn _status.event.controlai;\n\t\t\t\t\t\t}).set('controlai',event.pos||0).set('sortcard',buttons).set('tosort',card);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(typeof result.index=='number'){\n\t\t\t\t\t\tif(result.index>event.cards.length){\n\t\t\t\t\t\t\tui.cardPile.appendChild(event.card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.cards.splice(result.index,0,event.card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\twhile(event.cards.length){\n\t\t\t\t\t\tui.cardPile.insertBefore(event.cards.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tvar js=player.getCards('j');\n\t\t\t\t\tif(js.length==1){\n\t\t\t\t\t\tif((get.judge(js[0]))(ui.cardPile.firstChild)<0){\n\t\t\t\t\t\t\tplayer.addTempSkill('guanxing_fail');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {guanxing: \"true\",},}","info":"锁定技，准备阶段，你观看牌堆的X张牌(X为场上存活人数)并且任意移动Y张牌(Y为你当前体力值)"},"kongcheng":{"name":"空城","script":"{mod: {targetEnabled: function (card,player,target,now){\n\t\t\t\t\t\tif(target.countCards('h')==0){\n\t\t\t\t\t\t\tif(card.name=='sha'||card.name=='juedou') return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"kongcheng1\",audio: \"kongcheng1\",audioname: [\"re_zhugeliang\"],ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\tif(player.countCards('h')!=1) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，当你没有手牌时，你不能成为【杀】或【决斗】的目标。"},"nsyunxing":{"name":"陨星","script":"{trigger: {global: \"dieAfter\",},forced: \"true\",check: function (event,player){\n\t\t\t\t\treturn event.player.group=='wei'||(event.player.group=='wu'&&player.hp==1);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn ['wei','shu','wu','qun'].contains(event.player.group);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tswitch(trigger.player.group){\n\t\t\t\t\t\tcase 'wei':player.draw();break;\n\t\t\t\t\t\tcase 'shu':player.loseHp();break;\n\t\t\t\t\t\tcase 'wu':player.recover();break;\n\t\t\t\t\t\tcase 'qun':{\n\t\t\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\t\t\tif(evt&&evt.name=='phaseUse'){\n\t\t\t\t\t\t\t\tevt.skipped=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar evt=_status.event.getParent('phase');\n\t\t\t\t\t\t\tif(evt&&evt.name=='phase'){\n\t\t\t\t\t\t\t\tevt.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(trigger.player.group!='wei'||!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h');\n\t\t\t\t\t})){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseTarget('弃置一名角色的一张手牌',true,function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(target.hasSkillTag('noh')) return 0;\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.discardPlayerCard(target,true,'h');\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t}\n\t\t\t\t},group: \"nsyunxing_self\",subSkill: {self: {trigger: {player: \"dieBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt('nsyunxing'),function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t\t}).set('prompt2','令一名其他角色翻面').set('ai',function(target){\n\t\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\tif(target.isTurnedOver()){\n\t\t\t\t\t\t\t\t\tif(att>2){\n\t\t\t\t\t\t\t\t\t\treturn att*2;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill('nsyunxing',result.targets);\n\t\t\t\t\t\t\t\tresult.targets[0].turnOver();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，当场上一名角色死亡，若为蜀，你失去一点体力；若为吴，你回复一点体力；若为魏，你摸一张牌并弃置一名角色的手牌；若为群，你强制结束当前回合；若为你，你可以使一名角色翻面"},"nsjianshu":{"name":"剑术","script":"{trigger: {player: \"shaBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.directHit&&player.getEquip(1);\n\t\t\t\t},priority: \"-1\",content: function (){\n\t\t\t\t\tif(typeof trigger.shanRequired=='number'){\n\t\t\t\t\t\ttrigger.shanRequired++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.shanRequired=2;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技：每当你的装备区有武器时，你使用【杀】指定一个目标后，该角色需要依次使用两张【闪】才能抵消此【杀】"},"nscangjian":{"name":"藏剑","script":"{trigger: {source: \"damageEnd\",},direct: \"true\",filter: function (event){\n\t\t\t\t\treturn event.player.isIn()&&event.player.countCards('e');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gainPlayerCard(trigger.player,'e',get.prompt('nscangjian',trigger.player)).logSkill=['nscangjian',trigger.player];\n\t\t\t\t},}","info":"每当你对一名角色造成伤害，你可以获得其装备区一张牌"},"nsyaowang":{"name":"妖妄","script":"{trigger: {player: \"phaseBegin\",},direct: \"true\",group: \"tianshu_remove\",createDialog: function (player,target,onlylist){\n\t\t\t\t\tvar names=[];\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(target.name&&!target.isUnseen(0)) names.add(target.name);\n\t\t\t\t\tif(target.name1&&!target.isUnseen(0)) names.add(target.name1);\n\t\t\t\t\tif(target.name2&&!target.isUnseen(1)) names.add(target.name2);\n\t\t\t\t\tvar pss=player.getSkills();\n\t\t\t\t\tfor(var i=0;i<names.length;i++){\n\t\t\t\t\t\tvar info=lib.character[names[i]];\n\t\t\t\t\t\tif(info){\n\t\t\t\t\t\t\tvar skills=info[3];\n\t\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\t\tif(lib.translate[skills[j]+'_info']&&lib.skill[skills[j]]&&\n\t\t\t\t\t\t\t\t\t!lib.skill[skills[j]].unique&&\n\t\t\t\t\t\t\t\t\t!pss.contains(skills[j])){\n\t\t\t\t\t\t\t\t\tlist.push(skills[j]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(onlylist) return list;\n\t\t\t\t\tvar dialog=ui.create.dialog('forcebutton');\n\t\t\t\t\tdialog.add('选择获得一项技能');\n\t\t\t\t\t_status.event.list=list;\n\t\t\t\t\tvar clickItem=function(){\n\t\t\t\t\t\t_status.event._result=this.link;\n\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t};\n\t\t\t\t\tfor(i=0;i<list.length;i++){\n\t\t\t\t\t\tif(lib.translate[list[i]+'_info']){\n\t\t\t\t\t\t\tvar translation=get.translation(list[i]);\n\t\t\t\t\t\t\tif(translation[0]=='新'&&translation.length==3){\n\t\t\t\t\t\t\t\ttranslation=translation.slice(1,3);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttranslation=translation.slice(0,2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar item=dialog.add('<div class=\"popup pointerdiv\" style=\"width:80%;display:inline-block\"><div class=\"skill\">【'+\n\t\t\t\t\t\t\ttranslation+'】</div><div>'+lib.translate[list[i]+'_info']+'</div></div>');\n\t\t\t\t\t\t\titem.firstChild.addEventListener('click',clickItem);\n\t\t\t\t\t\t\titem.firstChild.link=list[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\treturn dialog;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('nsyaowang'),function(card,player,target){\n\t\t\t\t\t\tvar names=[];\n\t\t\t\t\t\tif(target.name&&!target.isUnseen(0)) names.add(target.name);\n\t\t\t\t\t\tif(target.name1&&!target.isUnseen(0)) names.add(target.name1);\n\t\t\t\t\t\tif(target.name2&&!target.isUnseen(1)) names.add(target.name2);\n\t\t\t\t\t\tvar pss=player.getSkills();\n\t\t\t\t\t\tfor(var i=0;i<names.length;i++){\n\t\t\t\t\t\t\tvar info=lib.character[names[i]];\n\t\t\t\t\t\t\tif(info){\n\t\t\t\t\t\t\t\tvar skills=info[3];\n\t\t\t\t\t\t\t\tfor(var j=0;j<skills.length;j++){\n\t\t\t\t\t\t\t\t\tif(lib.translate[skills[j]+'_info']&&lib.skill[skills[j]]&&\n\t\t\t\t\t\t\t\t\t\t!lib.skill[skills[j]].unique&&!pss.contains(skills[j])){\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)>0) return Math.random();\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('nsyaowang',event.target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.skillai=function(list){\n\t\t\t\t\t\treturn get.max(list,get.skillRank,'item');\n\t\t\t\t\t};\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tevent.dialog=lib.skill.tianshu.createDialog(player,target);\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result=event.skillai(event.list);\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\t_status.imchoosing=true;\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent._result=event.skillai(lib.skill.nsyaowang.createDialog(player,target,true));\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\tif(event.dialog){\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addTempSkill(result);\n\t\t\t\t\tplayer.popup(result);\n\t\t\t\t\tgame.log(player,'获得了','【'+get.translation(result)+'】');\n\n\t\t\t\t\tvar names=[];\n\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\tnames.add(game.players[i].name);\n\t\t\t\t\t\tnames.add(game.players[i].name1);\n\t\t\t\t\t\tnames.add(game.players[i].name2);\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<game.dead.length;i++){\n\t\t\t\t\t\tnames.add(game.dead[i].name);\n\t\t\t\t\t\tnames.add(game.dead[i].name1);\n\t\t\t\t\t\tnames.add(game.dead[i].name2);\n\t\t\t\t\t}\n\t\t\t\t\tvar list=get.gainableSkills(function(info,skill,name){\n\t\t\t\t\t\tif(names.contains(name)) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tvar skill=list.randomGet();\n\t\t\t\t\ttarget.popup(skill);\n\t\t\t\t\ttarget.addTempSkill(skill,{player:'phaseAfter'});\n\t\t\t\t\tgame.log(target,'获得了','【'+get.translation(skill)+'】');\n\t\t\t\t},}","info":"回合开始阶段你可以选择一名角色然后获得其其中一项技能直到回合结束，然后该角色随机获得一项未上场武将的其中一项技能直到其回合结束"},"nshuanhuo":{"name":"幻惑","script":"{trigger: {player: [\"loseHpAfter\",\"damageAfter\"],},filter: function (event,player){\n\t\t\t\t\tif(game.countPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&!current.isUnseen(2);\n\t\t\t\t\t})<2) return false;\n\t\t\t\t\tif(event.name=='damage') return event.num>1;\n\t\t\t\t\treturn true;\n\t\t\t\t},direct: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(2,get.prompt2('nshuanhuo'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!target.isUnseen(2);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\t\treturn get.rank(target,true)-get.rank(ui.selected.targets[0],true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(att>=0){\n\t\t\t\t\t\t\t\treturn 1/(1+get.rank(target,true));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('nshuanhuo',result.targets);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar name1=result.targets[0].name;\n\t\t\t\t\tvar name2=result.targets[1].name;\n\t\t\t\t\tresult.targets[0].reinit(name1,name2,false);\n\t\t\t\t\tresult.targets[1].reinit(name2,name1,false);\n\t\t\t\t},}","info":"每当你流失一点体力或受到一次大于2的伤害时，你可以交换除你之外的两名角色的武将牌（体力及体力上限不变）"},"nsdongcha":{"name":"洞察","script":"{trigger: {player: \"damageBefore\",},forced: \"true\",priority: \"15\",filter: function (event,player){\n\t\t\t\t\tif(get.type(event.card,'trick')=='trick'){\n\t\t\t\t\t\tif(event.getParent(2).name=='useCard'){\n\t\t\t\t\t\t\treturn event.getParent(2).targets.length==1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {notrick: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&get.tag(card,'damage')&&!get.tag(card,'multitarget')){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},group: \"nsdongcha_cancel\",subSkill: {cancel: {trigger: {target: \"useCardToAfter\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn get.type(event.card,'trick')=='trick'&&_status.currentPhase==event.player&&event.player!=player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.addTempSkill('nsdongcha_disable');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},disable: {trigger: {target: \"useCardToBefore\",},forced: \"true\",priority: \"15\",onremove: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn (event.player==_status.currentPhase&&get.type(event.card,'trick')=='trick');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(get.type(card,'trick')=='trick'&&_status.currentPhase==player) return 'zeroplayertarget';\n\t\t\t\t\t\t\t\t},},},sub: \"true\",},},}","info":"锁定技，单体锦囊牌无法对你造成伤害。其它角色于其回合内第二次使用锦囊牌指定你为目标时，取消之"},"nscaijian":{"name":"才鉴","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\treturn nh&&nh<=player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\tevent.num=player.countCards('h');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.directgain(get.cards(event.num));\n\t\t\t\t\tplayer.chooseCard('将'+get.cnNumber(event.num)+'张手牌以按顺序置于牌堆顶（先选择的在上）',event.num,true).set('ai',function(card){\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special)._triggered=null;\n\t\t\t\t\t\tevent.cards=result.cards.slice(0);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(player==game.me&&_status.auto){\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\twhile(event.cards.length){\n\t\t\t\t\t\tvar current=event.cards.pop();\n\t\t\t\t\t\tcurrent.fix();\n\t\t\t\t\t\tui.cardPile.insertBefore(current,ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10\",result: {player: \"1\",},},}","info":"出牌阶段限一次，若你的手牌数不大于你的体力上限，则你可以展示你的手牌，观看牌堆顶相同数量的牌并以任意方式交换之"},"nsgongjian":{"name":"恭俭","script":"{trigger: {player: \"phaseDiscardEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.cards&&event.cards.length>0){\n\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current.hp>player.hp;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('恭俭：将置的牌交给一名体力值大于你的角色',function(card,player,target){\n\t\t\t\t\t\treturn target.hp>player.hp;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target)/Math.sqrt(target.countCards('h')+1);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tresult.targets[0].gain(trigger.cards,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，弃牌阶段，你须将弃牌交给一名体力值大于你的其它角色"},"nsbugua":{"name":"卜卦","script":"{group: \"nsbugua_use\",ai: {threaten: \"1.4\",},subSkill: {use: {enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",check: function (card){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t},filter: function (event,player){\n\t\t\t\t\t\t\t// if(!player.storage.nstuiyan2_done&&player.getStat().skill.nsbugua_use){\n\t\t\t\t\t\t\t// \treturn false;\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\treturn player.countCards('he');\n\t\t\t\t\t\t},position: \"he\",ai: {order: \"9.5\",result: {player: \"1\",},},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.throwDice();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tvar cards=get.cards(6);\n\t\t\t\t\t\t\tvar cards2=cards.slice(0);\n\t\t\t\t\t\t\tvar card=(cards2.splice(event.num-1,1))[0];\n\t\t\t\t\t\t\tplayer.showCards(get.translation(player)+'亮出了'+get.translation(card),cards).set('hiddencards',cards2);\n\t\t\t\t\t\t\tcard.discard();\n\t\t\t\t\t\t\tvar name=null;\n\t\t\t\t\t\t\tswitch(get.suit(card)){\n\t\t\t\t\t\t\t\tcase 'club':{\n\t\t\t\t\t\t\t\t\tif(card.number%2==0){\n\t\t\t\t\t\t\t\t\t\tname='guohe';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tname='jiedao';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase 'spade':{\n\t\t\t\t\t\t\t\t\tif(card.number%2==0){\n\t\t\t\t\t\t\t\t\t\tname='nanman';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tname='juedou';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase 'diamond':{\n\t\t\t\t\t\t\t\t\tif(card.number%2==0){\n\t\t\t\t\t\t\t\t\t\tname='shunshou';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tname='huogong';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcase 'heart':{\n\t\t\t\t\t\t\t\t\tif(card.number%2==0){\n\t\t\t\t\t\t\t\t\t\tname='wuzhong';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tname='wanjian';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar togain=get.cardPile(name,'cardPile');\n\t\t\t\t\t\t\tif(togain){\n\t\t\t\t\t\t\t\tplayer.gain(togain,'gain2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.list=cards2;\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tplayer.chooseCardButton(event.list,true,'按顺序将牌置于牌堆顶（先选择的在上）',event.list.length);\n\t\t\t\t\t\t\t'step 3'\n\t\t\t\t\t\t\tvar list=result.links.slice(0);\n\t\t\t\t\t\t\twhile(list.length){\n\t\t\t\t\t\t\t\tui.cardPile.insertBefore(list.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},twice: {sub: \"true\",},},}","info":"出牌阶段限一次，你可以弃置一张牌，并将牌堆顶的六张牌反面朝上逐张按先后顺序排放，然后抛骰子，展示牌序号与骰子显示的点数一致的牌，然后你根据这张牌的花色、点数按以下规则随机获得牌堆中相应的一张牌：乾（红桃偶数）：无中生有；坤（黑桃奇数）：决斗；震（黑桃偶数）：南蛮入侵；巽（红桃奇数）：万箭齐发；坎（梅花偶数）：过河拆桥、兑（梅花奇数）：借刀杀人、艮（方片偶数）：顺手牵羊、离（方片奇数）：火攻。若牌堆中无此牌则摸一张牌，然后你观看未展示的另外五张牌并按任意顺序将其置于牌堆顶。"},"nstuiyan":{"name":"推演","script":"{trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase==player&&event.getParent('phaseUse',true)&&!player.hasSkill('nstuiyan_fail')&&\n\t\t\t\t\t\ttypeof player.storage.nstuiyan=='number'&&event.card.number>player.storage.nstuiyan;\n\t\t\t\t},frequent: \"true\",priority: \"2\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},onremove: function (player){\n\t\t\t\t\tdelete player.storage.nstuiyan;\n\t\t\t\t\tdelete player.storage.nstuiyan_done;\n\t\t\t\t\tdelete player.storage.nstuiyan2;\n\t\t\t\t\tdelete player.storage.nstuiyan2_done;\n\t\t\t\t},intro: {mark: function (dialog,content,player){\n\t\t\t\t\t\tif(player.storage.nstuiyan_done){\n\t\t\t\t\t\t\tdialog.addText('推演摸牌已结束');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdialog.addText('上一张点数：'+player.storage.nstuiyan);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.storage.nstuiyan2_done){\n\t\t\t\t\t\t\tdialog.addText('总点数8的倍数已达成');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdialog.addText('总点数：'+player.storage.nstuiyan2);\n\t\t\t\t\t\t}\n\t\t\t\t\t},content: function (storage,player){\n\t\t\t\t\t\tvar str='';\n\t\t\t\t\t\tif(player.storage.nstuiyan_done){\n\t\t\t\t\t\t\tstr+='推演摸牌已结束；'\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr+='上一张牌点数：'+storage+'；';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.storage.nstuiyan2_done){\n\t\t\t\t\t\t\tstr+='总点数8的倍数已达成';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr+='总点数：'+player.storage.nstuiyan2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},markcount: function (storage,player){\n\t\t\t\t\t\tif(player.storage.nstuiyan2_done){\n\t\t\t\t\t\t\tif(player.storage.nstuiyan_done){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn player.storage.nstuiyan;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn player.storage.nstuiyan2;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: [\"nstuiyan_use\",\"nstuiyan_clear\"],subSkill: {bugua: {trigger: {player: \"useCardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.countCards('h');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.removeSkill('nstuiyan_bugua');\n\t\t\t\t\t\t\tplayer.chooseToDiscard('he','推演：是否发动一次【卜卦】？').set('ai',function(card){\n\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t}).set('logSkill','nstuiyan');\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tevent.insert(lib.skill.nsbugua.subSkill.use.content,{player:player});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},use: {trigger: {player: \"useCard\",},silent: \"true\",priority: \"-1\",filter: function (event,player){\n\t\t\t\t\t\t\treturn _status.currentPhase==player&&event.getParent('phaseUse',true)&&typeof event.card.number=='number';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(typeof player.storage.nstuiyan2!='number'){\n\t\t\t\t\t\t\t\tplayer.storage.nstuiyan2=0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!player.hasSkill('nstuiyan_fail')&&\n\t\t\t\t\t\t\t\t(trigger.card.number<=player.storage.nstuiyan||typeof trigger.card.number!='number')){\n\t\t\t\t\t\t\t\t\tplayer.storage.nstuiyan_done=true;\n\t\t\t\t\t\t\t\t\tplayer.addTempSkill('nstuiyan_fail');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.storage.nstuiyan=trigger.card.number;\n\t\t\t\t\t\t\tplayer.storage.nstuiyan2+=trigger.card.number;\n\t\t\t\t\t\t\tif(player.storage.nstuiyan2%8==0&&!player.storage.nstuiyan2_done){\n\t\t\t\t\t\t\t\tplayer.storage.nstuiyan2_done=true;\n\t\t\t\t\t\t\t\tplayer.addTempSkill('nstuiyan_bugua');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.markSkill('nstuiyan');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},clear: {trigger: {player: [\"phaseUseAfter\",\"phaseAfter\"],},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.nstuiyan;\n\t\t\t\t\t\t\tdelete player.storage.nstuiyan_done;\n\t\t\t\t\t\t\tdelete player.storage.nstuiyan2;\n\t\t\t\t\t\t\tdelete player.storage.nstuiyan2_done;\n\t\t\t\t\t\t\tplayer.unmarkSkill('nstuiyan');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},fail: {sub: \"true\",},},ai: {threaten: \"1.4\",},}","info":"出牌阶段，若你使用的牌点数比上一张使用的牌点数大，你可以摸一张牌，反之你本回合不能再以此法摸牌；当你使用的牌点数首次达到8的倍数时，你可以在结算后立即发动一次【卜卦】"},"nstianji":{"name":"天机","script":"{trigger: {global: \"dying\",},priority: \"6\",unique: \"true\",skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=0&&event.player!=player;\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('nstianji');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttrigger.player.recover(1-trigger.player.hp);\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttrigger.player.gainMaxHp();\n\t\t\t\t},}","info":"限定技，当一名其他角色进入濒死状态，你可自减一点体力上限，令其回复体力至1并增加一点体力上限"},"nszhaoxin":{"name":"昭心","script":"{mark: \"true\",intro: {mark: function (dialog,content,player){\n\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\t\tdialog.addSmall(hs);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdialog.addText('无手牌');\n\t\t\t\t\t\t}\n\t\t\t\t\t},content: function (content,player){\n\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\tif(hs.length){\n\t\t\t\t\t\t\treturn get.translation(hs);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '无手牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，你始终展示手牌"},"nsxiuxin":{"name":"修穆","script":"{mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\t\tif(suit&&!target.countCards('h',{suit:suit})){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，若你没有某种花色的手牌，你不能成为这种花色的牌的目标"},"nsshijun":{"name":"弑君","script":"{trigger: {source: \"damageBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t\ttrigger.nsshijun=true;\n\t\t\t\t},subSkill: {hp: {trigger: {source: \"damageAfter\",},silent: \"true\",filter: function (event){\n\t\t\t\t\t\t\treturn event.nsshijun;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},group: \"nsshijun_hp\",}","info":"锁定技，你造成伤害时，你令此伤害+1，并在结算后失去一点体力"},"nswulie":{"name":"武烈","script":"{trigger: {player: \"phaseBegin\",},skillAnimation: \"true\",animationColor: \"metal\",unique: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn ui.discardPile.childElementCount>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('nswulie');\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseCardButton(Array.from(ui.discardPile.childNodes),'将至多3张任意顺置于牌堆顶（先选择的在上）',true,[1,3]);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar cards=result.links.slice(0);\n\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(cards.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.addTempSkill('nswulie_end');\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {end: {trigger: {player: \"phaseEnd\",},check: function (){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},filter: function (event,player){\n\t\t\t\t\t\t\treturn ui.discardPile.childElementCount>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.chooseCardButton(Array.from(ui.discardPile.childNodes),'将至多3张任意顺置于牌堆顶（先选择的在上）',true,[1,3]);\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar cards=result.links.slice(0);\n\t\t\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\t\t\tui.cardPile.insertBefore(cards.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"限定技，准备阶段，你可以失去1点体力上限，从弃牌堆选择最多三张牌以任意顺序放置于牌堆顶。若如此做，此回合的结束阶段，你可以重复此操作"},"nshunyou":{"name":"魂佑","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: {type: \"basic\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:'basic'});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar equip=null, trick=null;\n\t\t\t\t\tfor(var i=0;i<ui.discardPile.childElementCount;i++){\n\t\t\t\t\t\tvar type=get.type(ui.discardPile.childNodes[i],'trick');\n\t\t\t\t\t\tif(type=='trick'){\n\t\t\t\t\t\t\ttrick=ui.discardPile.childNodes[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(type=='equip'){\n\t\t\t\t\t\t\tequip=ui.discardPile.childNodes[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(trick&&equip){\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(trick) list.push(trick);\n\t\t\t\t\tif(equip) list.push(equip);\n\t\t\t\t\tif(!list.length){\n\t\t\t\t\t\tplayer.draw(Math.min(3,1+player.maxHp-player.hp));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gain(list,'gain2');\n\t\t\t\t\t\tevent.equip=equip;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.equip&&get.owner(event.equip)==player){\n\t\t\t\t\t\tplayer.chooseTarget('是否将'+get.translation(event.equip)+'装备给一其角色？',function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(att>1){\n\t\t\t\t\t\t\t\tif(!target.getEquip(_status.event.subtype)) return att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}).set('subtype',get.subtype(event.equip));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tplayer.$give(event.equip,result.targets[0]);\n\t\t\t\t\t\tplayer.lose(event.equip,ui.special);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tresult.targets[0].equip(event.equip);\n\t\t\t\t\t'step 5'\n\t\t\t\t\tgame.delay();\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},ai: {order: \"7\",result: {player: \"1\",},},}","info":"出阶段限一次，你可以弃置一张基本牌，获得弃牌堆底的一张装备牌和一张锦囊牌，然后你可以将那张装备牌装备给一名角色（允许替换）。如果弃牌堆没有装备以及锦囊牌，则改为摸X张牌，X为损失的体力加一（最多3张）"},"nscangxi":{"name":"藏玺","script":"{unique: \"true\",global: \"nscangxi2\",zhuSkill: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.nscangxi=0;\n\t\t\t\t},intro: {content: \"手牌上限+#\",},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.storage.nscangxi;\n\t\t\t\t\t},},}","info":"主公技，其他吴势力角色的弃牌阶段结束时，若其弃置了至少两张牌，则可以选择判定，若是黑色，则其选择一项，1，令主公摸一张并且展示；2，主公手牌上限永久加一；3，额外弃置一张牌，令主公获得本回合进入弃牌堆的一张牌"},"nscuanquan":{"name":"篡权","script":"{init: function (player){\n\t\t\t\t\tplayer.storage.nscuanquan=0;\n\t\t\t\t},forced: \"true\",unique: \"true\",forceunique: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",trigger: {player: \"damageAfter\",},filter: function (event,player){\n\t\t\t\t\treturn player.identity=='zhong'&&player.storage.nscuanquan==3&&game.zhu&&game.zhu.isZhu;\n\t\t\t\t},group: \"nscuanquan_count\",subSkill: {count: {trigger: {player: \"damageEnd\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.nscuanquan++;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},logTarget: function (){\n\t\t\t\t\treturn [game.zhu];\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('nscuanquan');\n\t\t\t\t\tvar tmp=player.maxHp;\n\t\t\t\t\tplayer.identity='zhu';\n\t\t\t\t\tplayer.maxHp=game.zhu.hp;\n\t\t\t\t\tplayer.showIdentity();\n\t\t\t\t\tplayer.update();\n\t\t\t\t\tgame.zhu.identity='zhong';\n\t\t\t\t\tgame.zhu.maxHp=tmp;\n\t\t\t\t\tgame.zhu.showIdentity();\n\t\t\t\t\tgame.zhu.update();\n\t\t\t\t\tgame.zhu=player;\n\t\t\t\t},}","info":"锁定技，如果你的身份为忠臣，则在受伤三次后与主公，互换身份和体力上限"},"nsjianning":{"name":"奸佞","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.identity=='nei';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('h')<player.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.swapHandcards(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.damage();\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn get.value(card)>=8;\n\t\t\t\t\t\t\t})&&player.countCards('h')-target.countCards('h')<=1){\n\t\t\t\t\t\t\t\tif(target.hp==1||player.countCards('h',function(card){\n\t\t\t\t\t\t\t\t\treturn get.value(card)<0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn get.damageEffect(target,player,target);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，如果你的身份为内奸，你可以与一名手牌数比你少的角色交换手牌，并对其造成一点伤害"},"nschangshi":{"name":"常仕","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.identity=='fan';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\treturn target.hp!=ui.selected.targets[0].hp;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},multitarget: \"true\",selectTarget: \"2\",content: function (){\n\t\t\t\t\tvar tmp=targets[0].hp;\n\t\t\t\t\ttargets[0].hp=targets[1].hp;\n\t\t\t\t\ttargets[1].hp=tmp;\n\t\t\t\t\ttargets[0].update();\n\t\t\t\t\ttargets[1].update();\n\t\t\t\t\tif(Math.abs(targets[0].hp-targets[1].hp)==1){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\t//else{\n\t\t\t\t\t\t//player.die();\n\t\t\t\t\t//}\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target==game.zhu) return -1;\n\t\t\t\t\t\t\tif(get.attitude(player,target)>3){\n\t\t\t\t\t\t\t\tvar num=game.zhu.hp-target.hp;\n\t\t\t\t\t\t\t\tif(num==1){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(num>1){\n\t\t\t\t\t\t\t\t\tif(player.hp==1) return num;\n\t\t\t\t\t\t\t\t\tif(target.hp==1) return num;\n\t\t\t\t\t\t\t\t\tif(num>=3) return num;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，如果你的身份为反贼，你可以指定两名其他角色互换体力；如果两名角色体力之差等于1，你失去一点体力"},"nsbaquan":{"name":"霸权","script":"{trigger: {player: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player.hasShan()||player.hujia>0) return false;\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tif(player.hp==1){\n\t\t\t\t\t\treturn nh<=3;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.hp==2){\n\t\t\t\t\t\treturn nh<=1;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\tplayer.changeHujia(cards.length);\n\t\t\t\t\tplayer.storage.nsbaquan=true;\n\t\t\t\t},group: \"nsbaquan_clear\",subSkill: {clear: {trigger: {player: \"phaseBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.nsbaquan&&player.hujia>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.changeHujia(-player.hujia);\n\t\t\t\t\t\t\tgame.log(player,'失去了所有护甲');\n\t\t\t\t\t\t\tdelete player.storage.nsbaquan;\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"回合结束时，你可以弃置所有手牌，并获得相应点数的护甲，你的新一回合开始时清除所有护甲"},"nsfuhuo":{"name":"符火","script":"{enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&!target.hasSkill('nsfuhuo2');\n\t\t\t\t},prepare: \"throw\",discard: \"false\",content: function (){\n\t\t\t\t\ttarget.$gain2(cards);\n\t\t\t\t\ttarget.storage.nsfuhuo2=cards[0];\n\t\t\t\t\ttarget.addSkill('nsfuhuo2');\n\t\t\t\t\ttarget.storage.nsfuhuo3=player;\n\t\t\t\t\tui.special.appendChild(cards[0]);\n\t\t\t\t\ttarget.syncStorage('nsfuhuo2');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},ai: {expose: \"0.1\",order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('maixie')) return 0;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},group: [\"nsfuhuo_die\",\"nsfuhuo_gain\"],subSkill: {die: {trigger: {player: \"dieBegin\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\t\t\tif(game.players[i].hasSkill('nsfuhuo2')&&game.players[i].storage.nsfuhuo3==player){\n\t\t\t\t\t\t\t\t\tgame.players[i].removeSkill('nsfuhuo2');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},gain: {trigger: {player: \"phaseBegin\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\t\t\tif(game.players[i].hasSkill('nsfuhuo2')&&game.players[i].storage.nsfuhuo3==player){\n\t\t\t\t\t\t\t\t\tvar card=game.players[i].storage.nsfuhuo2;\n\t\t\t\t\t\t\t\t\tgame.players[i].removeSkill('nsfuhuo2');\n\t\t\t\t\t\t\t\t\tgame.players[i].$give(card,player);\n\t\t\t\t\t\t\t\t\tplayer.gain(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"出牌阶段限一次，你可将一张手牌置于一名武将牌上没有“符”的角色的武将牌上，称为“符”，若如此做，其回合外使用或打出【闪】时，你可令其判定，若结果为：红桃，你对其造成2点火焰伤害；方块，你弃置其一张手牌，然后对其造成1点火焰伤害。你的下个回合开始时，你获得其武将牌上的“符”"},"nswangfeng":{"name":"望风","script":"{trigger: {global: \"judge\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'red'})>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+\n\t\t\t\t\tget.translation(trigger.player.judging[0])+'，'+get.prompt('guidao'),'he',function(card){\n\t\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\tif(attitude==0||result==0) return 0;\n\t\t\t\t\t\tif(attitude>0){\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.respond(result.cards,'highlight');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('nswangfeng');\n\t\t\t\t\t\tplayer.$gain2(trigger.player.judging[0]);\n\t\t\t\t\t\tplayer.gain(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\tif(!get.owner(result.cards[0],'judge')){\n\t\t\t\t\t\t\ttrigger.position.appendChild(result.cards[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',result.cards[0]);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t},ai: {tag: {rejudge: \"1\",},},}","info":"在判定牌生效前，你可以打出一张红色牌替换之"},"nstanbing":{"name":"谈兵","script":"{trigger: {player: \"phaseDrawBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard('h',get.prompt2('nstanbing')).set('ai',function(card){\n\t\t\t\t\t\tif(!player.needsToDiscard(1)){\n\t\t\t\t\t\t\treturn get.translation(card.name).length-1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).logSkill='nstanbing';\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.draw(get.translation(result.cards[0].name).length);\n\t\t\t\t\t\tplayer.addTempSkill('nstanbing_sha');\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {sha: {mod: {cardEnabled: function (card,player){\n\t\t\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},cardUsable: function (card,player){\n\t\t\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"摸牌阶段开始时，你可弃置一张牌，然后摸X张牌(X为你弃置牌的名称字数)，若如此做，本回合你不可使用或打出【杀】"},"nsxinzhan":{"name":"心战","script":"{enable: \"phaseUse\",filterCard: [1,null],filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},usable: \"1\",selectCard: [1,null],check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(player.countCards('h')>=8&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.isDamaged()&&get.attitude(player,current)>3;\n\t\t\t\t\t})){\n\t\t\t\t\t\tif(ui.selected.cards.length>=6){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(ui.selected.cards.length>=2){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.value(card)<0;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn 8-get.value(card,player,'raw');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn 4-get.value(card,player,'raw');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},discard: \"false\",prepare: \"give2\",content: function (){\n\t\t\t\t\ttarget.gain(cards,player);\n\t\t\t\t\tvar num=Math.floor(cards.length/2);\n\t\t\t\t\tif(num>=3){\n\t\t\t\t\t\ttarget.loseMaxHp(true);\n\t\t\t\t\t}\n\t\t\t\t\telse if(num){\n\t\t\t\t\t\ttarget.loseHp(num);\n\t\t\t\t\t}\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},ai: {order: \"10\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>=6){\n\t\t\t\t\t\t\t\tif(target.isDamaged()) return 2;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(ui.selected.cards.length==1){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可将任意张手牌交给一名其他角色，若如此做，该角色失去X点体力(X为你交给其的牌张数的一半，向下取整)，若你给的牌达到六张，则改为该角色失去一点体力上限"},"nsbaiming":{"name":"百鸣","script":"{trigger: {player: \"useCard\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.additionalSkills.nsbaiming) return false;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&player.storage.nsbaiming&&player.storage.nsbaiming.length>0;\n\t\t\t\t},group: \"nsbaiming_clear\",init: function (player){\n\t\t\t\t\tvar check=function(list){\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar info=lib.skill[list[i]];\n\t\t\t\t\t\t\tif(info&&info.shaRelated) return true;\n\t\t\t\t\t\t\tif(info&&info.trigger){\n\t\t\t\t\t\t\t\tfor(var j in info.trigger){\n\t\t\t\t\t\t\t\t\tvar cond=info.trigger[j];\n\t\t\t\t\t\t\t\t\tif(typeof cond=='string'){\n\t\t\t\t\t\t\t\t\t\tcond=[cond];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(j=='player'||j=='global'){\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('shaBefore')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('shaBegin')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('shaEnd')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('shaAfter')!=-1) return true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(j=='source'||j=='global'){\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('damageBefore')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('damageBegin')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('damageBegin1')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('damageBegin2')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('damageEnd')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('damageSource')!=-1) return true;\n\t\t\t\t\t\t\t\t\t\tif(cond.indexOf('damageAfter')!=-1) return true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tplayer.storage.nsbaiming=get.gainableSkills(function(info,skill){\n\t\t\t\t\t\tvar list=[skill];\n\t\t\t\t\t\tgame.expandSkills(list);\n\t\t\t\t\t\treturn check(list);\n\t\t\t\t\t},player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=player.storage.nsbaiming.slice(0);\n\t\t\t\t\tevent.skillai=function(){\n\t\t\t\t\t\treturn get.max(list,get.skillRank,'item');\n\t\t\t\t\t};\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('forcebutton');\n\t\t\t\t\t\tdialog.add(get.prompt('nsbaiming'));\n\t\t\t\t\t\tvar clickItem=function(){\n\t\t\t\t\t\t\t_status.event._result=this.link;\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tif(lib.translate[list[i]+'_info']){\n\t\t\t\t\t\t\t\tvar translation=get.translation(list[i]);\n\t\t\t\t\t\t\t\tif(translation[0]=='新'&&translation.length==3){\n\t\t\t\t\t\t\t\t\ttranslation=translation.slice(1,3);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\ttranslation=translation.slice(0,2);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar item=dialog.add('<div class=\"popup pointerdiv\" style=\"width:80%;display:inline-block\"><div class=\"skill\">【'+\n\t\t\t\t\t\t\t\ttranslation+'】</div><div>'+lib.translate[list[i]+'_info']+'</div></div>');\n\t\t\t\t\t\t\t\titem.firstChild.addEventListener('click',clickItem);\n\t\t\t\t\t\t\t\titem.firstChild.link=list[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.add(ui.create.div('.placeholder'));\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tevent.confirm=ui.create.confirm('c');\n\t\t\t\t\t\tevent.custom.replace.confirm=function(){\n\t\t\t\t\t\t\tevent._result=null;\n\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t};\n\t\t\t\t\t\t_status.imchoosing=true;\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent._result=event.skillai();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\tif(event.confirm){\n\t\t\t\t\t\tevent.confirm.close();\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof result=='string'){\n\t\t\t\t\t\tplayer.logSkill('nsbaiming');\n\t\t\t\t\t\tvar link=result;\n\t\t\t\t\t\tplayer.addAdditionalSkill('nsbaiming',link);\n\t\t\t\t\t\tplayer.logSkill('nsbaiming');\n\t\t\t\t\t\tplayer.popup(link);\n\t\t\t\t\t\tgame.log(player,'获得了技能','【'+get.translation(link)+'】');\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tplayer.storage.nsbaiming.remove(link);\n\t\t\t\t\t\ttrigger.nsbaiming=true;\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {clear: {trigger: {player: \"useCardAfter\",},silent: \"true\",filter: function (event){\n\t\t\t\t\t\t\treturn event.nsbaiming==true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.removeAdditionalSkill('nsbaiming');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"当你使用【杀】时，你可以获得一项未获得过且与杀或伤害相关的技能，此【杀】结算完毕后，你失去以此法获得的技能"},"nsfuge":{"name":"覆戈","script":"{trigger: {player: \"phaseAfter\",},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.nsfuge;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tlib.onwash.push(function(){\n\t\t\t\t\t\tdelete player.storage.nsfuge;\n\t\t\t\t\t});\n\t\t\t\t},skillAnimation: \"true\",check: function (event,player){\n\t\t\t\t\treturn player.hp==1||player.maxHp-player.hp>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.nsfuge=true;\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t},group: \"nsfuge_draw\",subSkill: {draw: {trigger: {player: \"phaseDrawBegin\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tvar evt=event.getParent('phase');\n\t\t\t\t\t\t\treturn evt&&evt.skill=='nsfuge';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.num+=player.maxHp-player.hp;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"你的回合结束后，你可以执行一个额外的回合，此回合的摸牌阶段，你于摸牌阶段额外摸X张牌（X为你已损失的体力值）；若如此做，直到洗牌前，你不能再发动此技能"},"nsqinxue":{"name":"勤学","script":"{trigger: {player: \"useCard\",},init: function (player){\n\t\t\t\t\tplayer.storage.nsqinxue=[];\n\t\t\t\t},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tvar type=get.type(event.card,'trick');\n\t\t\t\t\tif(player.storage.nsqinxue.contains(type)) return false;\n\t\t\t\t\treturn ['basic','trick','equip'].contains(type);\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar type=null;\n\t\t\t\t\tvar type0=get.type(trigger.card,'trick');\n\t\t\t\t\tswitch(type0){\n\t\t\t\t\t\tcase 'basic':type='trick';break;\n\t\t\t\t\t\tcase 'trick':type='equip';break;\n\t\t\t\t\t\tcase 'equip':type='basic';break;\n\t\t\t\t\t}\n\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\treturn get.type(card,'trick')==type;\n\t\t\t\t\t});\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tplayer.gain(card,'gain2');\n\t\t\t\t\t\tplayer.storage.nsqinxue.push(type0);\n\t\t\t\t\t}\n\t\t\t\t},group: \"nsqinxue_clear\",subSkill: {clear: {trigger: {global: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.storage.nsqinxue=[];\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"每个效果每回合只能使用一次。①当你使用一张基本牌时，你从牌堆随机获得一张锦囊牌；②当你使用一张锦囊牌时，你从牌堆随机获得一张装备牌；③当你使用一张装备牌时，你从牌堆随机获得一张基本牌"},"nsbaiyi":{"name":"白衣","script":"{trigger: {player: \"phaseDiscardBefore\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.nsqinxue&&player.storage.nsqinxue.length;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tvar num=player.storage.nsqinxue.length;\n\t\t\t\t\tplayer.chooseToDiscard('白衣：请弃置'+get.cnNumber(num)+'张牌','he',true,num);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.cards.length){\n\t\t\t\t\t\tevent.goon=true;\n\t\t\t\t\t\tif(result.cards.length==3){\n\t\t\t\t\t\t\tvar type=[];\n\t\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\t\ttype.add(get.type(result.cards[i],'trick'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(type.length==3&&trigger.getParent().skill!='nsbaiyi'){\n\t\t\t\t\t\t\t\tevent.goon=false;\n\t\t\t\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.goon){\n\t\t\t\t\t\t\tvar cards=get.cards(result.cards.length);\n\t\t\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\t\t\tplayer.chooseCardButton(cards,'获得一张牌',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.goon&&result.bool&&result.links.length){\n\t\t\t\t\t\tplayer.gain(result.links,'draw');\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(!result.links.contains(event.cards[i])){\n\t\t\t\t\t\t\t\tevent.cards[i].discard();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",combo: \"nsqinxue\",},}","info":"锁定技，若你本回合发动过勤学，你跳过弃牌阶段，改为弃置X张牌（X为本回合发动勤学次数）；若你弃置了3张类别不同的牌，你获得一个额外回合（不可连续获得回合），否则你观看牌堆顶的X张牌并获得其中一张"},"nshunji":{"name":"混击","script":"{enable: \"phaseUse\",viewAs: {name: \"wanjian\",},usable: \"1\",delay: \"0\",selectCard: \"0\",group: [\"nshunji_damage\",\"nshunji_draw\"],subSkill: {draw: {trigger: {player: \"useCard\",},silent: \"true\",filter: function (event){\n\t\t\t\t\t\t\treturn event.skill=='nshunji';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},damage: {trigger: {global: \"damageAfter\",},silent: \"true\",filter: function (event){\n\t\t\t\t\t\t\treturn event.getParent(2).skill=='nshunji';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tif(player.countCards('he')){\n\t\t\t\t\t\t\t\ttrigger.player.discardPlayerCard(player,'混击','he').set('boolline',true).set('prompt2','弃置'+get.translation(player)+'的一张牌，或取消并摸一张牌');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},ai: {wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(get.attitude(viewer,target)>0&&target.countCards('h','shan')){\n\t\t\t\t\t\t\tif(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"9\",useful: \"1\",value: \"5\",},result: {target_use: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tif(get.mode()=='identity'){\n\t\t\t\t\t\t\t\tif(target.isZhu&&nh<=2&&target.hp<=1) return -100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(nh==0) return -2;\n\t\t\t\t\t\t\tif(nh==1) return -1.7\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: \"1\",multitarget: \"1\",multineg: \"1\",},},}","info":"出牌阶段限一次，你可以摸一张牌，视为使用一张【万箭齐发】。此【万箭齐发】造成伤害时，受伤害角色选择一项：①弃置你一张牌；②摸一张牌"},"shibei":{"name":"矢北","script":"{trigger: {player: \"damageEnd\",},forced: \"true\",audio: \"2\",check: function (event,player){\n\t\t\t\t return player.getHistory('damage',function(evt){\n\t\t\t\t\t\treturn evt!=event\n\t\t\t\t\t}).length==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player.getHistory('damage',function(evt){\n\t\t\t\t\t\treturn evt!=trigger\n\t\t\t\t\t}).length>0){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {damaged: {sub: \"true\",},ai: {sub: \"true\",},},ai: {maixie_defend: \"true\",threaten: \"0.9\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing')) return;\n\t\t\t\t\t\t\tif(target.hujia) return;\n\t\t\t\t\t\t\tif(player._shibei_tmp) return;\n\t\t\t\t\t\t\tif(target.hasSkill('shibei_ai')) return;\n\t\t\t\t\t\t\tif(_status.event.getParent('useCard',true)||_status.event.getParent('_wuxie',true)) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(target.getHistory('damage').length>0){\n\t\t\t\t\t\t\t\t\treturn [1,-2];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0&&target.hp>1){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&!player.hasSkillTag('damageBonus')){\n\t\t\t\t\t\t\t\t\t\tif(card.name=='sha') return;\n\t\t\t\t\t\t\t\t\t\tvar sha=false;\n\t\t\t\t\t\t\t\t\t\tplayer._shibei_tmp=true;\n\t\t\t\t\t\t\t\t\t\tvar num=player.countCards('h',function(card){\n\t\t\t\t\t\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\t\t\t\t\t\tif(sha){\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsha=true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn get.tag(card,'damage')&&player.canUse(card,target)&&get.effect(target,card,player,player)>0;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tdelete player._shibei_tmp;\n\t\t\t\t\t\t\t\t\t\tif(player.hasSkillTag('damage')){\n\t\t\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(num<2){\n\t\t\t\t\t\t\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\t\t\t\t\t\t\tif(enemies.length==1&&enemies[0]==target&&player.needsToDiscard()){\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当你受到伤害后：若此伤害是你本回合第一次受到的伤害，则你回复1点体力；否则你失去1点体力。"},"nsguhuo":{"name":"蛊惑","script":"{trigger: {player: \"useCardAfter\",},forced: \"true\",usable: \"2\",filter: function (event,player){\n\t\t\t\t\tif(event.parent.name=='nsguhuo') return false;\n\t\t\t\t\tif(event.card==event.cards[0]){\n\t\t\t\t\t\tvar type=get.type(event.card,'trick');\n\t\t\t\t\t\tvar names=[];\n\t\t\t\t\t\tif(get.cardPile(function(card){\n\t\t\t\t\t\t\tif(get.type(card,'trick')!=type) return false;\n\t\t\t\t\t\t\tif(get.info(card).multitarget) return false;\n\t\t\t\t\t\t\tif(names.contains(card.name)) return false;\n\t\t\t\t\t\t\tif(player.hasUseTarget(card)){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnames.add(card.name);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar type=get.type(trigger.card,'trick');\n\t\t\t\t\tvar names=[];\n\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\tif(get.type(card,'trick')!=type) return false;\n\t\t\t\t\t\tif(get.info(card).multitarget) return false;\n\t\t\t\t\t\tif(names.contains(card.name)) return false;\n\t\t\t\t\t\tif(player.hasUseTarget(card)){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tnames.add(card.name);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn lib.filter.filterTarget(card,player,current);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(targets.length){\n\t\t\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\t\t\tvar select=get.select(info.selectTarget);\n\t\t\t\t\t\t\tif(select[0]==-1||select[1]==-1){\n\t\t\t\t\t\t\t\tplayer.useCard(card,targets,'noai');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(targets.length>=select[0]){\n\t\t\t\t\t\t\t\tvar num=select[0]+Math.floor(Math.random()*(select[1]-select[0]+1));\n\t\t\t\t\t\t\t\tplayer.useCard(card,targets.randomGets(num),'noai');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，你在一个回合中使用前两张牌时，你对一名随机角色从牌堆(牌堆无则从弃牌堆)随机使用一张同类别卡牌"},"nsjuanli":{"name":"狷戾","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h');\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.nsjuanli_win=[];\n\t\t\t\t\tplayer.storage.nsjuanli_lose=[];\n\t\t\t\t},intro: {content: function (storage,player){\n\t\t\t\t\t\tvar str='';\n\t\t\t\t\t\tif(player.storage.nsjuanli_win.length){\n\t\t\t\t\t\t\tstr+=get.translation(player.storage.nsjuanli_win)+'与你距离-1直到与你下次赌牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.storage.nsjuanli_lose.length){\n\t\t\t\t\t\t\tif(str.length){\n\t\t\t\t\t\t\t\tstr+='；';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr+=get.translation(player.storage.nsjuanli_lose)+'与你距离+1直到与你下次赌牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t},},onremove: [\"nsjuanli_win\",\"nsjuanli_lose\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.nsjuanli_win.remove(target);\n\t\t\t\t\tplayer.storage.nsjuanli_lose.remove(target);\n\t\t\t\t\tevent.prompt2='赌牌的两名角色分别亮开一张手牌，若花色相同则赌牌平局，若花色不同，则依次展示牌堆顶的牌直到翻开的牌与其中一人亮出牌的花色相同，则该角色获得赌牌的胜利';\n\t\t\t\t\tplayer.chooseCard('h',true).set('prompt2',event.prompt2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card1=result.cards[0];\n\t\t\t\t\t\ttarget.chooseCard('h',true).set('prompt2',event.prompt2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card2=result.cards[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.$compare(event.card1,event.target,event.card2);\n\t\t\t\t\tgame.delay(0,1500);\n\t\t\t\t\tgame.log(player,'亮出的牌为',event.card1);\n\t\t\t\t\tgame.log(target,'亮出的牌为',event.card2);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tvar suit1=get.suit(event.card1);\n\t\t\t\t\tvar suit2=get.suit(event.card2);\n\t\t\t\t\tif(suit1==suit2){\n\t\t\t\t\t\tgame.broadcastAll(function(str){\n\t\t\t\t\t\t\tvar dialog=ui.create.dialog(str);\n\t\t\t\t\t\t\tdialog.classList.add('center');\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t},1000);\n\t\t\t\t\t\t},'平局');\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t\tif(!player.storage.nsjuanli_win.length&&!player.storage.nsjuanli_lose.length){\n\t\t\t\t\t\t\tplayer.unmarkSkill('nsjuanli');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tfor(var i=0;i<1000;i++){\n\t\t\t\t\t\t\tvar current=get.cards();\n\t\t\t\t\t\t\tif(current&&current.length){\n\t\t\t\t\t\t\t\tcurrent=current[0];\n\t\t\t\t\t\t\t\tcurrent.discard();\n\t\t\t\t\t\t\t\tcards.push(current);\n\t\t\t\t\t\t\t\tvar suit=get.suit(current);\n\t\t\t\t\t\t\t\tif(suit==suit1){\n\t\t\t\t\t\t\t\t\tplayer.showCards(cards,get.translation(player)+'赌牌获胜');\n\t\t\t\t\t\t\t\t\tplayer.storage.nsjuanli_win.add(target);\n\t\t\t\t\t\t\t\t\ttarget.loseHp();\n\t\t\t\t\t\t\t\t\tplayer.markSkill('nsjuanli');\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(suit==suit2){\n\t\t\t\t\t\t\t\t\tplayer.showCards(cards,get.translation(target)+'赌牌获胜');\n\t\t\t\t\t\t\t\t\tplayer.storage.nsjuanli_lose.add(target);\n\t\t\t\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\t\t\t\tplayer.markSkill('nsjuanli');\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},mod: {globalTo: function (from,to,distance){\n\t\t\t\t\t\tif(to.storage.nsjuanli_win&&to.storage.nsjuanli_win.contains(from)){\n\t\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(to.storage.nsjuanli_lose&&to.storage.nsjuanli_lose.contains(from)){\n\t\t\t\t\t\t\treturn distance+1;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},ai: {order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.isHealthy()){\n\t\t\t\t\t\t\t\treturn -1/(1+target.hp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn -0.3/(1+target.hp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以和一名有手牌的其他角色进行赌牌，若你赢，目标角色失去1点体力且该角色与你距离-1直到与你下次赌牌，若你没赢，目标角色回复1点体力，且该角色与你距离+1直到与你的下次赌牌。（赌牌:赌牌的两名角色分别亮开一张手牌，若花色相同则赌牌平局，若花色不同，则依次展示牌堆顶的牌直到翻开的牌与其中一人亮出牌的花色相同，则该角色获得赌牌的胜利）"},"nsyuanchou":{"name":"远筹","script":"{trigger: {target: \"useCardToBefore\",},forced: \"true\",priority: \"15\",check: function (event,player){\n\t\t\t\t\treturn get.effect(event.target,event.card,event.player,player)<0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card,'trick')=='trick'&&get.distance(event.player,player)>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card,'trick')=='trick'&&get.distance(player,target)>1) return 'zeroplayertarget';\n\t\t\t\t\t\t},},},}","info":"锁定技，当你成为锦囊牌的目标时，若来源角色与你的距离大于1，则取消之"},"nsanruo":{"name":"暗弱","script":"{unique: \"true\",init: function (player){\n\t\t\t\t\tif(!player.node.handcards1.cardMod){\n\t\t\t\t\t\tplayer.node.handcards1.cardMod={};\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.node.handcards2.cardMod){\n\t\t\t\t\t\tplayer.node.handcards2.cardMod={};\n\t\t\t\t\t}\n\t\t\t\t\tvar cardMod=function(card){\n\t\t\t\t\t\tif(get.info(card).multitarget) return;\n\t\t\t\t\t\tif(card.name=='sha'||get.type(card)=='trick') return ['暗弱','杀或普通锦囊牌对你不可见'];\n\t\t\t\t\t};\n\t\t\t\t\tplayer.node.handcards1.cardMod.nsanruo=cardMod;\n\t\t\t\t\tplayer.node.handcards2.cardMod.nsanruo=cardMod;\n\t\t\t\t\tplayer.node.handcards1.classList.add('nsanruo');\n\t\t\t\t\tplayer.node.handcards2.classList.add('nsanruo');\n\t\t\t\t\tif(!ui.css.nsanruo){\n\t\t\t\t\t\tui.css.nsanruo=lib.init.sheet(\n\t\t\t\t\t\t\t'.handcards.nsanruo>.card[data-card-type=\"trick\"]:not(*[data-card-multitarget=\"1\"])>*,'+\n\t\t\t\t\t\t\t'.handcards.nsanruo>.card[data-card-name=\"sha\"]>*{visibility:hidden !important}'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},onremove: function (player){\n\t\t\t\t\tplayer.node.handcards1.classList.remove('nsanruo');\n\t\t\t\t\tplayer.node.handcards2.classList.remove('nsanruo');\n\t\t\t\t\tdelete player.node.handcards1.cardMod.nsanruo;\n\t\t\t\t\tdelete player.node.handcards2.cardMod.nsanruo;\n\t\t\t\t},ai: {neg: \"true\",},}","info":"锁定技，你手牌中的[杀]和普通锦囊牌(借刀杀人等带有指向目标的锦囊除外)均对你不可见。但你可以正常使用之"},"nsxunshan":{"name":"循善","script":"{mod: {selectTarget: function (card,player,range){\n\t\t\t\t\t\tif(!player.hasSkill('nsanruo')) return;\n\t\t\t\t\t\tif(_status.auto) return;\n\t\t\t\t\t\tif(get.position(card)!='h'||get.owner(card)!=player) return;\n\t\t\t\t\t\tif(get.info(card).multitarget) return;\n\t\t\t\t\t\tif(card.name=='sha'||get.type(card)=='trick') range[1]=game.countPlayer();\n\t\t\t\t\t},},ai: {combo: \"nsanruo\",},}","info":"锁定技，你使用【暗弱】牌可以为其指定任意名合法目标（托管无效）"},"nskaicheng":{"name":"开城","script":"{enable: \"phaseUse\",usable: \"1\",zhuSkill: \"true\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('nskaicheng')) return false;\n\t\t\t\t\tif(!player.hasCard(function(card){\n\t\t\t\t\t\tif(get.info(card).multitarget) return false;\n\t\t\t\t\t\treturn card.name=='sha'||get.type(card)=='trick';\n\t\t\t\t\t})){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='qun';\n\t\t\t\t\t});\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\tif(get.info(card).multitarget) return false;\n\t\t\t\t\treturn card.name=='sha'||get.type(card)=='trick';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.group=='qun';\n\t\t\t\t},lose: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseBool(function(){\n\t\t\t\t\t\treturn get.attitude(target,player)>0;\n\t\t\t\t\t},'是否将'+get.translation(cards)+'告知'+get.translation(player));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!player.hasUseTarget(cards[0])){\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tplayer.chooseControl('确定').set('prompt','你展示的手牌为'+get.translation(cards));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.hidden=true;\n\t\t\t\t\t\t\tplayer.chooseControl('确定').set('prompt',get.translation(target)+'拒绝告知你卡牌信息');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tplayer.chooseBool('是否使用展示的牌？','你展示的手牌为'+get.translation(cards)+'。如果你使用此牌，则在结算后摸一张牌；如果你不使用此牌，则结束出牌阶段');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.hidden=true;\n\t\t\t\t\t\t\tplayer.chooseBool('是否使用展示的牌？',get.translation(target)+'拒绝告知你卡牌信息。如果你使用此牌，则在结算后摸一张牌；如果你不使用此牌，则结束出牌阶段');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseUseTarget(true,cards[0],event.hidden?'选择此牌的目标':null);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\t\tif(evt){\n\t\t\t\t\t\t\tevt.skipped=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {combo: \"nsanruo\",},}","info":"主公技，你的回合内，你可以将一张【暗弱】牌交给一名群势力其他角色观看，其可以选择是否告诉你此牌的名字。然后你选择一项：使用这张牌并摸一张牌；或结束此回合"},"ns_xiandao":{"name":"仙道","script":"{forced: \"true\",noRemove: \"true\",group: [\"ns_xiandao1\",\"ns_xiandao2\"],}","info":"<font color=#f00>锁定技</font> 游戏开始、你进入游戏时和回合结束阶段，你随机获得技能【雷击】或【鬼道】，直到下个出牌阶段阶段开始。你防止受到任何属性伤害"},"ns_xiuzheng":{"name":"修真","script":"{audio: [\"xinsheng\",2],enable: \"phaseUse\",usable: \"1\",priority: \"10\",filter: function (event,player){\n\t\t\t\t\treturn (ui.cardPile.childElementCount+ui.discardPile.childElementCount)>=2;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.cards=get.cards(2);\n\t\t\t\t\tplayer.showCards(event.cards);\n\t\t\t\t\t\"step 1\"\t\t\t\n\t\t\t\t\tif(get.color(event.cards[0])=='red'&&get.color(event.cards[1])=='red'){\t\t\t\t\t\t\n\t\t\t\t\t\ttarget.damage('fire');\n\t\t\t\t\t}\n\t\t\t\t\tif(get.color(event.cards[0])!=get.color(event.cards[1])){   \n\t\t\t\t\t\tplayer.discardPlayerCard(target,\"he\",true);\n\t\t\t\t\t}\n\t\t\t\t\tif(get.color(event.cards[0])=='black'&&get.color(event.cards[1])=='black'){\t\t\t\t\t\t\n\t\t\t\t\t\ttarget.damage('thunder');\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tplayer.gain(event.cards,'gain2');\t\t\t\t\t\t\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tplayer.chooseToDiscard(2,'he','请弃置两张牌',true);\n\t\t\t\t},ai: {threaten: \"0.5\",order: \"13\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可选择一名其他角色，然后展示牌堆顶的两张牌，若同为红色，则其受到一点火焰伤害；若同为黑色，其受到一点雷电伤害；若颜色不相同，你弃置其一张牌。然后你获得这两张展示的牌后再弃置两张牌"},"ns_chuanshu":{"name":"传术","script":"{audio: [\"xingshuai\",2],trigger: {global: \"dying\",},priority: \"8\",unique: \"true\",skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=0&&event.player!=player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.player.chooseControl('releiji','guidao').set('prompt',''+get.translation(trigger.player)+'获得一项技能');\n\t\t\t\t\tgoon=true;\n\t\t\t\t\tif(!goon){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttrigger.player.addSkillLog(result.control);\n\t\t\t\t\ttrigger.player.recover(1-trigger.player.hp);\n\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t\ttrigger.player.storage.ns_chuanshu2=player;\n\t\t\t\t\ttrigger.player.addSkill('ns_chuanshu2');\n\t\t\t\t\tplayer.awakenSkill('ns_chuanshu');\n\t\t\t\t},}","info":"<span class=yellowtext>限定技</span> 当一名其他角色进入濒死状态时，你可以令其选择获得技能【雷击】或【鬼道】，其回复体力至1并摸两张牌。当该被【传术】的角色造成或受到一次伤害后，你摸一张牌。其阵亡后，你重置技能【传术】"},"nsdingzhou":{"name":"定州","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('hej')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar card=target.getCards('hej').randomGet();\n\t\t\t\t\tevent.card=card;\n\t\t\t\t\tplayer.gain(card,target,'giveAuto','bySelf');\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(Array.isArray(result)&&get.color(card)!=get.color(result[0])) player.loseHp();\n\t\t\t\t},ai: {order: \"7\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以选择一名区域内有牌的其他角色。你随机获得其区域内的一张牌，然后摸一张牌。若你以此法获得了两张颜色不同的牌，则你失去1点体力。"},"nshuaishuang":{"name":"怀霜","script":"{trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\treturn card.name=='tao';\n\t\t\t\t\t});\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tplayer.gain(card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t},}","info":"锁定技，结束阶段，你从牌堆/弃牌堆获得一张【桃】，然后失去1点体力。"},"nsfengli":{"name":"奉礼","script":"{trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&!current.hasSkill('nsfengli_use');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('nsfengli'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!target.hasSkill('nsfengli_use');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target)/(5+target.countCards('h'));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('nsfengli',target);\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tplayer.addGaintag(cards,'nsfengli2');\n\t\t\t\t\t\tplayer.addSkill('nsfengli2');\n\t\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\t\ttarget.addSkill('nsfengli_use');\n\t\t\t\t\t\ttarget.storage.nsfengli_use=player;\n\t\t\t\t\t}\n\t\t\t\t},group: [\"nsfengli_draw\",\"nsfengli_clear\"],onremove: function (player){\n\t\t\t\t\tplayer.removeSkill('nsfengli2');\n\t\t\t\t},}","info":"回合结束时，你可以选择一名其他角色并展示所有手牌。你将所有手牌标记为“礼”。你的“礼”对所有角色可见。当该角色于回合外需要使用或打出牌时，其可移去一张“礼”的标记，然后视为使用或打出一张与此牌名称相同的牌。当你的“礼”减少时，你可令一名手牌数小于你的角色摸一张牌。你的回合开始时，你移去所有“礼”的标记，然后注销该角色对“礼”的操作权限。"},"tongqu":{"name":"通渠","script":"{audio: \"2\",trigger: {global: [\"gameDrawAfter\",\"dying\",\"phaseDrawBegin2\"],player: [\"enterGame\",\"phaseZhunbeiBegin\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.name=='phaseDraw') return event.player.hasMark('tongqu');\n\t\t\t\t\tif(event.name=='dying') return event.player.hasMark('tongqu');\n\t\t\t\t\tif(event.name=='phaseZhunbei') return game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !current.hasMark('tongqu');\n\t\t\t\t\t});\n\t\t\t\t\treturn !player.hasMark('tongqu');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(trigger.name=='phaseDraw'){\n\t\t\t\t\t\tplayer.logSkill('tongqu',trigger.player);\n\t\t\t\t\t\ttrigger.player.draw('nodelay');\n\t\t\t\t\t\ttrigger.player.addTempSkill('tongqu2','phaseDrawAfter');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.name=='dying'){\n\t\t\t\t\t\tplayer.logSkill('tongqu',trigger.player);\n\t\t\t\t\t\ttrigger.player.removeMark('tongqu',1);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.name=='phaseZhunbei'){\n\t\t\t\t\t\tplayer.chooseTarget(get.prompt2('tongqu'),function(card,player,target){\n\t\t\t\t\t\t\treturn !target.hasMark('tongqu');\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tif(_status.event.player.hp<3) return 0;\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.logSkill('tongqu');\n\t\t\t\t\t\tplayer.addMark('tongqu',1);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\tplayer.logSkill('tongqu',target);\n\t\t\t\t\t\ttarget.addMark('tongqu',1);\n\t\t\t\t\t}\n\t\t\t\t},marktext: \"渠\",intro: {content: \"mark\",name2: \"渠\",},}","info":"游戏开始时，你拥有一个“渠”标记。准备阶段，你可以失去1点体力令一名没有“渠”标记的角色获得“渠”标记。有“渠”的角色摸牌阶段额外摸一张牌，然后将一张牌交给其他有“渠”的角色或弃置。若以此法给出的是装备牌则使用之。当有“渠”的角色进入濒死状态时，移除其“渠”标记。"},"xinwanlan":{"name":"挽澜","script":"{audio: \"wanlan\",trigger: {global: \"damageBegin4\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=event.num&&player.countCards('e')>=1;\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<4) return false;\n\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,event.player,'unchanged','cardSavable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\tvar savable=get.info(card).savable;\n\t\t\t\t\t\tif(typeof savable=='function') savable=savable(card,player,event.player);\n\t\t\t\t\t\treturn savable;\n\t\t\t\t\t})>=1+event.num-event.player.hp) return false;\n\t\t\t\t\tif(event.player==player||event.player==get.zhu(player)) return true;\n\t\t\t\t\treturn !player.hasUnknown();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.discard(player.getCards('e'));\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},}","info":"当一名角色受到会令其进入濒死状态的伤害时，你可以弃置装备区中的所有牌（至少一张） 防止此伤害。"},"rejingce":{"name":"精策","script":"{audio: \"jingce\",trigger: {player: \"phaseUseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.getParent('phaseUse')==event;\n\t\t\t\t\t}).length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tplayer.getHistory('useCard',function(evt){\n\t\t\t\t\t\tif(evt.getParent('phaseUse')==trigger) list.add(get.type2(evt.card));\n\t\t\t\t\t});\n\t\t\t\t\tplayer.draw(list.length);\n\t\t\t\t},group: \"rejingce_add\",}","info":"当你于一回合内首次使用某种花色的手牌时，你的手牌上限+1。出牌阶段结束时，你可以摸X张牌（X为你本阶段内使用过的牌的类型数）。"},"junktaoluan":{"name":"滔乱","script":"{audio: \"taoluan\",enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn event.type!='wuxie'&&event.type!='respondShan'&&!player.hasSkill('junktaoluan3')&&player.countCards('he',function(card){\n\t\t\t\t\t\treturn !player.storage.junktaoluan2.contains(get.suit(card));\n\t\t\t\t\t})>0;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.junktaoluan) player.storage.junktaoluan=[];\n\t\t\t\t\tif(!player.storage.junktaoluan2) player.storage.junktaoluan2=[];\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(player.storage.junktaoluan.contains(name)) continue;\n\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length==0){\n\t\t\t\t\t\t\treturn ui.create.dialog('滔乱已无可用牌');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('滔乱',[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\treturn _status.event.getParent().filterCard({name:button.link[2]},player,_status.event.getParent());\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h',button.link[2])>0) return 0;\n\t\t\t\t\t\tif(button.link[2]=='wugu') return;\n\t\t\t\t\t\tvar effect=player.getUseValue(button.link[2]);\n\t\t\t\t\t\tif(effect>0) return effect;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\t\treturn !player.storage.junktaoluan2.contains(get.suit(card));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\taudio:'taoluan',\n\t\t\t\t\t\t\tselectCard:1,\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tcheck:function(card){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3]},\n\t\t\t\t\t\t\tonuse:function(result,player){\n\t\t\t\t\t\t\t\tplayer.storage.junktaoluan2.add(get.suit(result.cards[0],player));\n\t\t\t\t\t\t\t\tvar evt=_status.event.getParent('phase');\n\t\t\t\t\t\t\t\tif(evt&&evt.name=='phase'&&!evt.junktaoluan){\n\t\t\t\t\t\t\t\t\tevt.junktaoluan=true;\n\t\t\t\t\t\t\t\t\tvar next=game.createEvent('taoluan_clear');\n\t\t\t\t\t\t\t\t\t_status.event.next.remove(next);\n\t\t\t\t\t\t\t\t\tevt.after.push(next);\n\t\t\t\t\t\t\t\t\tnext.player=player;\n\t\t\t\t\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\t\t\t\t\t//player.storage.junktaoluan=[];\n\t\t\t\t\t\t\t\t\t\tplayer.storage.junktaoluan2=[];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tplayer.storage.junktaoluan.add(result.card.name);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将一张牌当做'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {order: \"4\",result: {player: function (player){\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=player&&players[i].countCards('he')&&get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: \"1.9\",},group: [\"junktaoluan2\",\"junktaoluan4\",\"junktaoluan5\"],}","info":"你可将一张牌当做任意一张基本牌或普通锦囊牌使用（此牌不得是本局游戏你以此法使用过的牌，且每回合每种花色限一次），然后你令一名其他角色选择一项：1.交给你一张与“滔乱”声明的牌类别不同的牌；2.本回合“滔乱”失效且回合结束时你失去1点体力。"},"buchen":{"name":"不臣","script":"{audio: \"2\",trigger: {player: \"showCharacterAfter\",},filter: function (event,player){\n\t\t\t\t\tvar target=_status.currentPhase;\n\t\t\t\t\treturn target&&target!=player&&target.countGainableCards(player,'he')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\tvar target=_status.currentPhase;\n\t\t\t\t\tplayer.gainPlayerCard(target,'he',get.prompt('buchen',target)).set('logSkill',['buchen',target]);\n\t\t\t\t},}","info":"隐匿技，你于其他角色的回合登场时，可获得当前回合角色的一张牌。"},"smyyingshi":{"name":"鹰视","script":"{audio: \"2\",enable: \"phaseUse\",locked: \"true\",onChooseToUse: function (event){\n\t\t\t\t\tif(game.online) return;\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<event.player.maxHp;i++){\n\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\tif(card) cards.push(card);\n\t\t\t\t\t\telse break;\n\t\t\t\t\t}\n\t\t\t\t\tevent.set('smyyingshi',cards);\n\t\t\t\t},chooseButton: {dialog: function (event){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('鹰视','hidden');\n\t\t\t\t\t\tif(event.smyyingshi&&event.smyyingshi.length) dialog.add(event.smyyingshi);\n\t\t\t\t\t\telse dialog.addText('牌堆无牌');\n\t\t\t\t\t\tfor(var i of dialog.buttons){\n\t\t\t\t\t\t\ti.classList.add('noclick');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.buttons.length=0;\n\t\t\t\t\t\treturn dialog;\n\t\t\t\t\t},filter: function (){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"锁定技，出牌阶段，你可观看牌堆顶的X张牌（X为你的体力上限）。"},"xiongzhi":{"name":"雄志","script":"{audio: \"2\",enable: \"phaseUse\",limited: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('xiongzhi');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar card=get.cards()[0];\n\t\t\t\t\tevent.card=card;\n\t\t\t\t\tplayer.showCards(card);\n\t\t\t\t\tif(!player.hasUseTarget(card)){\n\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar next=player.chooseUseTarget(card,true);\n\t\t\t\t\tif(get.info(card).updateUsable=='phaseUse') next.addCount=false;\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool) event.goto(1);\n\t\t\t\t\telse{\n\t\t\t\t\t\tcard.fix();\n\t\t\t\t\t\tui.cardPile.insertBefore(card,ui.cardPile.firstChild);\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(!player.hasSkill('smyyingshi')) return 1;\n\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\tfor(var i=0;i<Math.min(2,player.maxHp);i++){\n\t\t\t\t\t\t\t\tvar card=ui.cardPile.childNodes[i];\n\t\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\t\tif(!player.hasValueTarget(card)) return 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可展示牌堆顶的一张牌并使用之。若如此做，你重复此流程，直到你以此法展示的牌无法使用。"},"xinquanbian":{"name":"权变","script":"{audio: \"quanbian\",trigger: {player: [\"useCard\",\"respond\"],},filter: function (event,player){\n\t\t\t\t\tvar phase=event.getParent('phaseUse');\n\t\t\t\t\tif(!phase||phase.player!=player) return false;\n\t\t\t\t\tvar suit=get.suit(event.card);\n\t\t\t\t\tif(!lib.suit.contains(suit)||!lib.skill.quanbian.hasHand(event)) return false;\n\t\t\t\t\treturn player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt!=event&&get.suit(evt.card)==suit&&lib.skill.quanbian.hasHand(evt)&&evt.getParent('phaseUse')==phase;\n\t\t\t\t\t}).length+player.getHistory('respond',function(evt){\n\t\t\t\t\t\treturn evt!=event&&get.suit(evt.card)==suit&&lib.skill.quanbian.hasHand(evt)&&evt.getParent('phaseUse')==phase;\n\t\t\t\t\t}).length==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=get.cards(Math.min(5,player.maxHp));\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tvar suit=get.suit(trigger.card);\n\t\t\t\t\tplayer.chooseButton(['权变：获得一张不为'+get.translation(suit)+'花色的牌',cards]).set('suit',suit).set('filterButton',function(button){\n\t\t\t\t\t\treturn get.suit(button)!=_status.event.suit;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\tcards.remove(card);\n\t\t\t\t\t\tplayer.gain(card,'gain2','log');\n\t\t\t\t\t\tif(!cards.length) event.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.chooseCardButton(cards.length,true,cards,'按顺序将卡牌置于牌堆顶（先选择的在上）');\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar list=result.links.slice(0);\n\t\t\t\t\t\twhile(list.length){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(list.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t}\n\t\t\t\t},group: \"xinquanbian_count\",}","info":"出牌阶段，每当你首次使用/打出一种花色的手牌时，你可以从牌堆顶的X张牌中获得一张与此牌花色不同的牌，并将其余牌以任意顺序置于牌堆顶。出牌阶段，你至多可使用X张手牌。（X为你的体力上限）"}},"card":{},"hero":{"sp_key_yuri":{"name":"SP仲村由理","attr":["female","qun",4,["mubing","ziqu","diaoling"]]},"key_lucia":{"name":"此花露西娅","attr":["female","key","1/2",["lucia_duqu","lucia_zhenren"]]},"key_kyousuke":{"name":"枣恭介","attr":["male","key",4,["nk_shekong","key_huanjie"]]},"key_yuri":{"name":"仲村由理","attr":["female","key",3,["yuri_xingdong","key_huanjie","yuri_wangxi"],["zhu"]]},"key_haruko":{"name":"神尾晴子","attr":["female","key",4,["haruko_haofang","haruko_zhuishi"]]},"key_umi":{"name":"加藤うみ","attr":["female","key",3,["umi_chaofan","umi_lunhui","umi_qihuan"]]},"key_umi2":{"name":"鹰原羽未","attr":["female","key",3,[],["unseen"]]},"key_rei":{"name":"零","attr":["male","key",4,["xiandeng","shulv","xisheng"]]},"key_komari":{"name":"神北小毬","attr":["female","key",3,["komari_tiankou","komari_xueshang"]]},"key_yukine":{"name":"宫泽有纪宁","attr":["female","key",3,["yukine_wenzhou"]]},"key_yusa":{"name":"西森柚咲","attr":["female","key",3,["yusa_yanyi","yusa_misa","dualside"],["dualside:key_misa"]]},"key_misa":{"name":"黑羽美砂","attr":["female","key",3,["misa_yehuo","misa_yusa","dualside"],["unseen"]]},"key_masato":{"name":"井之原真人","attr":["male","key","4/8",["masato_baoquan"]]},"key_iwasawa":{"name":"岩泽雅美","attr":["female","key",3,["iwasawa_yinhang","iwasawa_mysong"]]},"key_kengo":{"name":"宫泽谦吾","attr":["male","key",4,["kengo_weishang","kengo_guidui"]]},"key_yoshino":{"name":"吉野晴彦","attr":["male","key",4,["yoshino_jueyi"]]},"key_yui":{"name":"由依","attr":["female","key",3,["yui_jiang","yui_lieyin","yui_takaramono"]]},"key_tsumugi":{"name":"紬文德斯","attr":["female","key",3,["tsumugi_mugyu","tsumugi_huilang"]]},"key_saya":{"name":"朱鹭户沙耶","attr":["female","key",3,["saya_shouji","saya_powei"]]},"key_harukakanata":{"name":"三枝叶留佳&二木佳奈多","attr":["female","key",3,["haruka_shuangche"]]},"key_inari":{"name":"稻荷","attr":["female","key",2,["inari_baiwei","inari_huhun"]]},"key_shiina":{"name":"椎名","attr":["female","key",3,["shiina_qingshen","shiina_feiyan"]]},"key_sunohara":{"name":"春原阳平&春原芽衣","attr":["unknown","key","3/4",["sunohara_chengshuang","sunohara_tiaoyin","sunohara_jianren"]]},"key_rin":{"name":"枣铃","attr":["female","key",3,["rin_baoqiu"]]},"key_sasami":{"name":"笹濑川佐佐美","attr":["female","key",3,["sasami_miaobian"]]},"key_akane":{"name":"千里朱音","attr":["female","key",3,["akane_jugu","akane_quanqing","akane_yifu"],["zhu"]]},"key_doruji":{"name":"多鲁基","attr":["female","key",16,["doruji_feiqu"]]},"key_yuiko":{"name":"来谷唯湖","attr":["female","key",3,["yuiko_fenglun","yuiko_dilve"]]},"key_riki":{"name":"直枝理树","attr":["female","key",3,["riki_spwenji","riki_nvzhuang","riki_mengzhong"]]},"key_hisako":{"name":"久子","attr":["female","key",3,["hisako_yinbao","hisako_zhuanyun"]]},"key_hinata":{"name":"日向秀树","attr":["male","key",4,["hinata_qiulve","hinata_ehou"]]},"key_noda":{"name":"野田","attr":["male","key",4,["noda_fengcheng","noda_xunxin"]]},"key_tomoya":{"name":"冈崎朋也","attr":["male","key",4,["tomoya_shangxian","tomoya_wangjin"]]},"key_nagisa":{"name":"古河渚","attr":["female","key",3,["nagisa_tiandu","nagisa_fuxin"]]},"key_ayato":{"name":"直井文人","attr":["male","key",3,["ayato_jianshen","ayato_zonghuan"]]},"key_ao":{"name":"空门苍","attr":["female","key",3,["ao_xishi","ao_kuihun","ao_shixin"]]},"key_yuzuru":{"name":"音无结弦","attr":["male","key",5,["yuzuru_wuxin","yuzuru_deyi"]]},"sp_key_kanade":{"name":"SP立华奏","attr":["female","key",3,["kanade_mapo","kanade_benzhan"]]},"key_mio":{"name":"西园美鱼","attr":["female","key",3,["mio_tuifu","mio_tishen"]]},"key_midori":{"name":"西园美鸟","attr":["female","key",3,["midori_nonghuan","midori_tishen"]]},"key_kyoko":{"name":"岬镜子","attr":["female","key",3,["kyoko_juwu","kyoko_zhengyi"]]},"key_shizuru":{"name":"中津静流","attr":["female","key",3,["shizuru_nianli","shizuru_benzhan"]]},"key_shiorimiyuki":{"name":"关根诗织&入江美雪","attr":["female","key",3,["shiorimiyuki_banyin","shiorimiyuki_tingxian"]]},"key_miki":{"name":"野村美希","attr":["female","key",3,["miki_shenqiang","miki_huanmeng","miki_zhiluo"]]},"key_shiori":{"name":"美坂栞","attr":["female","key","2/3",["shiori_huijuan"]]},"key_kaori":{"name":"美坂香里","attr":["female","key","3/4",["kaori_siyuan"]]},"key_akiko":{"name":"水濑秋子","attr":["female","key",3,["akiko_dongcha"]]},"key_abyusa":{"name":"游佐","attr":["female","key",3,["abyusa_jueqing","abyusa_dunying"]]},"key_godan":{"name":"松下护騨","attr":["male","key",6,["godan_yuanyi","godan_feiqu","godan_xiaoyuan"]]},"key_yuu":{"name":"乙坂有宇","attr":["male","key",3,["yuu_lveduo"]]},"key_ryoichi":{"name":"三谷良一","attr":["male","key",4,["ryoichi_baoyi","ryoichi_tuipi"]]},"key_kotori":{"name":"神户小鸟","attr":["female","key",3,["kotori_yumo","kotori_huazhan"]]},"key_jojiro":{"name":"高城丈士朗","attr":["male","key",4,["jojiro_shensu","jojiro_shunying"]]},"key_shiroha":{"name":"鸣濑白羽","attr":["female","key",3,["shiroha_yuzhao","shiroha_guying","shiroha_jiezhao"]]},"key_shizuku":{"name":"水织静久","attr":["female","key",3,["shizuku_sizhi","shizuku_biyi","shizuku_sanhua"]]},"key_hiroto":{"name":"铃木央人","attr":["male","key",3,["hiroto_huyu","hiroto_tuolao"]]},"key_sakuya":{"name":"凤咲夜","attr":["male","key",3,["youlong","luanfeng","sakuya_junbu"]]},"key_youta":{"name":"成神阳太","attr":["male","key",4,[]]},"key_rumi":{"name":"七濑留美","attr":["female","key","3/4",["rumi_shuwu"]]},"key_chihaya":{"name":"凤千早","attr":["female","key",3,["chihaya_liewu","chihaya_youfeng"]]},"key_kud":{"name":"库特莉亚芙卡","attr":["female","key",3,["kud_qiaoshou","kud_buhui"]]},"key_misuzu":{"name":"神尾观铃","attr":["female","key",3,["misuzu_hengzhou","misuzu_nongyin","misuzu_zhongxing"]]},"key_kamome":{"name":"久岛鸥","attr":["female","key",3,["kamome_yangfan","kamome_huanmeng","kamome_jieban"]]},"key_nao":{"name":"友利奈绪","attr":["female","key",3,["nao_duyin","nao_wanxin","nao_shouqing"]]},"ns_huangchengyan":{"name":"黄承彦","attr":["male","shu",3,["nslongyue","nszhenyin"]]},"ns_sunchensunjun":{"name":"孙綝孙峻","attr":["male","wu",5,["nsxianhai","nsxingchu"]]},"ns_yuanxi":{"name":"袁熙","attr":["male","qun",4,["nsshengyan","nsdaizhan"]]},"ns_caoshuang":{"name":"曹爽","attr":["male","wei",4,["nsjiquan","nsfuwei"]]},"ns_zhangwei":{"name":"张葳","attr":["female","shu",3,["nsqiyue","nsxuezhu"]]},"diy_wenyang":{"name":"文鸯","attr":["male","wei","4/6",["lvli","choujue"]]},"diy_feishi":{"name":"费诗","attr":["male","shu",3,["nsshuaiyan","moshou"]]},"diy_liuyan":{"name":"刘焉","attr":["male","shu",3,["juedao","geju"]]},"diy_yuji":{"name":"于吉","attr":["male","qun",3,["diyguhuo","diychanyuan"]]},"diy_caiwenji":{"name":"蔡昭姬","attr":["female","qun",3,["beige","guihan"]]},"diy_lukang":{"name":"陆抗","attr":["male","wu",4,["luweiyan","qianxun"]]},"diy_zhenji":{"name":"甄宓","attr":["female","wei",3,["diy_jiaoxia","yiesheng"]]},"diy_liufu":{"name":"刘馥","attr":["male","wei",3,["zhucheng","duoqi"]]},"diy_xizhenxihong":{"name":"习珍习宏","attr":["male","shu",4,["fuchou","jinyan"]]},"diy_liuzan":{"name":"留赞","attr":["male","wu",4,["kangyin"]]},"diy_zaozhirenjun":{"name":"枣祗任峻","attr":["male","wei",3,["liangce","jianbi","diyjuntun"]]},"diy_yangyi":{"name":"杨仪","attr":["male","shu",3,["choudu","liduan"]]},"diy_tianyu":{"name":"田豫","attr":["male","wei",4,["chezhen","youzhan"]]},"ns_zuoci":{"name":"左慈","attr":["male","qun",3,["nsxinsheng","nsdunxing"]]},"ns_lvzhi":{"name":"吕后","attr":["female","qun",3,["nsnongquan","nsdufu"]]},"ns_wangyun":{"name":"王允","attr":["male","qun",4,["liangji","jugong","chengmou"]]},"ns_nanhua":{"name":"南华","attr":["male","qun",3,["nshuanxian","nstaiping","nsshoudao"]]},"ns_nanhua_left":{"name":"幻身·左","attr":["male","qun",2,[],["unseen"]]},"ns_nanhua_right":{"name":"幻身·右","attr":["female","qun",2,[],["unseen"]]},"ns_huamulan":{"name":"SP花木兰","attr":["female","qun",3,["nscongjun","xiaoji","gongji"]]},"ns_huangzu":{"name":"黄祖","attr":["male","qun",4,["nsjihui","nsmouyun"]]},"ns_jinke":{"name":"荆轲","attr":["male","qun",4,["nspinmin","nsshishou"]]},"ns_yanliang":{"name":"颜良","attr":["male","qun",4,["nsduijue","nsshuangxiong","dualside"],["dualside:ns_wenchou"]]},"ns_wenchou":{"name":"文丑","attr":["male","qun",2,["nsguanyong","dualside"],["unseen"]]},"ns_caocao":{"name":"曹操","attr":["male","wei",4,["nscaiyi","nsgefa","nshaoling"]]},"ns_caocaosp":{"name":"SP曹操","attr":["male","qun",3,["nsjianxiong","nsxionglue"]]},"ns_zhugeliang":{"name":"诸葛亮","attr":["male","shu",3,["nsguanxing","kongcheng","nsyunxing"]]},"ns_wangyue":{"name":"王越","attr":["male","qun",4,["nsjianshu","nscangjian"]]},"ns_yuji":{"name":"于吉","attr":["male","qun",3,["nsyaowang","nshuanhuo"]]},"ns_xinxianying":{"name":"辛宪英","attr":["female","wei",3,["nsdongcha","nscaijian","nsgongjian"]]},"ns_guanlu":{"name":"管辂","attr":["male","wei",3,["nsbugua","nstuiyan","nstianji"]]},"ns_simazhao":{"name":"司马昭","attr":["male","wei",3,["nszhaoxin","nsxiuxin","nsshijun"]]},"ns_sunjian":{"name":"孙坚","attr":["male","wu",4,["nswulie","nshunyou","nscangxi"]]},"ns_duangui":{"name":"段珪","attr":["male","qun",3,["nscuanquan","nsjianning","nschangshi","nsbaquan"]]},"ns_zhangbao":{"name":"张宝","attr":["male","qun",3,["nsfuhuo","nswangfeng"]]},"ns_masu":{"name":"马谡","attr":["male","shu",3,["nstanbing","nsxinzhan"]]},"ns_zhangxiu":{"name":"张绣","attr":["male","qun",4,["nsbaiming","nsfuge"]]},"ns_lvmeng":{"name":"吕蒙","attr":["male","wu",3,["nsqinxue","nsbaiyi"]]},"ns_shenpei":{"name":"审配","attr":["male","qun",3,["nshunji","shibei"]]},"ns_yujisp":{"name":"于吉","attr":["male","qun",3,["nsguhuo"]]},"ns_yangyi":{"name":"杨仪","attr":["male","shu",3,["nsjuanli","nsyuanchou"]]},"ns_liuzhang":{"name":"刘璋","attr":["male","qun",3,["nsanruo","nsxunshan","nskaicheng"]]},"ns_xinnanhua":{"name":"南华老仙","attr":["male","qun",3,["ns_xiandao","ns_xiuzheng","ns_chuanshu"],[]]},"ns_caimao":{"name":"蔡瑁","attr":["male","qun",4,["nsdingzhou"]]},"ns_luyusheng":{"name":"陆郁生","attr":["female","wu",3,["nshuaishuang","nsfengli"]]},"old_jiakui":{"name":"贾逵重制","attr":["male","wei",4,["tongqu","xinwanlan"]]},"ol_guohuai":{"name":"三血郭淮","attr":["male","wei",3,["rejingce"]]},"junk_zhangrang":{"name":"四花张让","attr":["male","qun",3,["junktaoluan"]]},"junk_simayi":{"name":"止息司马懿","attr":["male","jin",3,["buchen","smyyingshi","xiongzhi","xinquanbian"],["hiddenSkill"]]}}},"yijiang":{"name":"一将成名","skill":{"xinenyuan":{"name":"恩怨","script":"{audio: \"true\",trigger: {player: \"damageEnd\",},check: function (event,player){\n\t\t\t\t\tvar att=get.attitude(player,event.source);\n\t\t\t\t\tvar num=event.source.countCards('h');\n\t\t\t\t\tif(att<=0) return true;\n\t\t\t\t\tif(num>2) return true;\n\t\t\t\t\tif(num) return att<4;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source!=player&&event.num>0&&event.source.isAlive();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.num=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttrigger.source.chooseCard('交给'+get.translation(player)+'一张手牌或流失一点体力').set('ai',function(card){\n\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.getParent().player)>0){\n\t\t\t\t\t\t\treturn 11-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,trigger.source,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.source.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.num>1){\n\t\t\t\t\t\tevent.num--;\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];\n\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')) return [1,0,0,-0.7];\n\t\t\t\t\t\t},},},group: \"xinenyuan2\",}","info":"当你获得一名其他角色两张或更多的牌后，你可以令其摸一张牌；当你受到1点伤害后，你可以令伤害来源选择一项：1、将一张手牌交给你；2、失去1点体力。"},"xinxuanhuo":{"name":"眩惑","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xinxuanhuo'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\tif(target.countCards('h')<target.hp) att+=2;\n\t\t\t\t\t\t\treturn att-target.countCards('h')/3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\t\tplayer.logSkill('xinxuanhuo',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tevent.target.draw(2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn target.canUse('sha',current);\n\t\t\t\t\t})) player.chooseTarget('选择出杀的目标',true,function(card,player,target){\n\t\t\t\t\t\treturn _status.event.target.canUse('sha',target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},_status.event.target,_status.event.player);\n\t\t\t\t\t}).set('target',event.target);\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool&&result.targets.length){\n\t\t\t\t\t\tgame.log(player,'指定的出杀目标为',result.targets);\n\t\t\t\t\t\tevent.target.line(result.targets);\n\t\t\t\t\t\tevent.target.chooseToUse('对'+get.translation(result.targets)+'使用一张杀，或令'+get.translation(player)+'获得你的两张牌',{name:'sha'},result.targets[0],-1);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.bool=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(event.bool||result.bool==false){\n\t\t\t\t\t\tplayer.gainPlayerCard('he',event.target,Math.min(2,event.target.countCards('he')),true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"摸牌阶段开始时，你可以改为令一名其他角色摸两张牌，然后该角色需对其攻击范围内你选择的另一名角色使用一张【杀】，否则你获得其两张牌。"},"old_fuhun":{"name":"父魂","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=get.cards(2);\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tplayer.showCards(cards,get.translation(player)+'发动了【父魂】');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.gain(cards,'gain2');\n\t\t\t\t\tif(get.color(cards[0])!=get.color(cards[1])){\n\t\t\t\t\t\tplayer.addTempSkill('wusheng');\n\t\t\t\t\t\tplayer.addTempSkill('paoxiao');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段开始时，你可以放弃摸牌，改为从牌堆顶亮出两张牌并获得之，若亮出的牌颜色不同，你获得技能“武圣”、“咆哮”，直到回合结束。"},"oldzhenlie":{"name":"贞烈","script":"{audio: \"2\",trigger: {player: \"judge\",},check: function (event,player){\n\t\t\t\t\treturn event.judge(player.judging[0])<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar card=get.cards()[0];\n\t\t\t\t\tevent.card=card;\n\t\t\t\t\tgame.cardsGotoOrdering(card).relatedEvent=trigger;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.$throw(card);\n\t\t\t\t\tif(trigger.player.judging[0].clone){\n\t\t\t\t\t\ttrigger.player.judging[0].clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\tcard.clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},trigger.player.judging[0]);\n\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));\n\t\t\t\t\t}\n\t\t\t\t\tgame.cardsDiscard(trigger.player.judging[0]);\n\t\t\t\t\ttrigger.player.judging[0]=card;\n\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',card);\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t},}","info":"在你的判定牌生效前，你可以亮出牌堆顶的一张牌代替之"},"oldmiji":{"name":"秘计","script":"{trigger: {player: [\"phaseZhunbeiBegin\",\"phaseJieshuBegin\"],},audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.color(card)=='black'?1:-1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&player.maxHp>player.hp){\n\t\t\t\t\t\tvar cards=get.cards(player.maxHp-player.hp);\n\t\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\t\tplayer.chooseTarget(true).set('ai',function(target){\n\t\t\t\t\t\t\treturn get.attitude(player,target)/Math.sqrt(1+target.countCards('h'));\n\t\t\t\t\t\t}).set('createDialog',['请选择一名角色获得这些牌',event.cards]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.line(result.targets);\n\t\t\t\t\tresult.targets[0].gain(event.cards,'draw');\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'recover')&&target.hp==target.maxHp-1) return [0,0];\n\t\t\t\t\t\t\tif(target.hasFriend()){\n\t\t\t\t\t\t\t\tif((get.tag(card,'damage')==1||get.tag(card,'loseHp'))&&target.hp==target.maxHp) return [0,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 3;\n\t\t\t\t\t\tif(target.hp==2) return 2;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},},}","info":"准备/结束阶段开始时，若你已受伤，你可以判定，若判定结果为黑色，你观看牌堆顶的X张牌（X为你已损失的体力值），然后将这些牌交给一名角色"},"jiangchi":{"name":"将驰","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin2\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseControl('jiangchi_less','jiangchi_more','cancel2',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h')>3&&player.countCards('h','sha')>1){\n\t\t\t\t\t\t\treturn 'jiangchi_less';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.countCards('h','sha')>2){\n\t\t\t\t\t\t\treturn 'jiangchi_less';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.hp-player.countCards('h')>1){\n\t\t\t\t\t\t\treturn 'jiangchi_more';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 'cancel2';\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='jiangchi_less'){\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\tplayer.addTempSkill('jiangchi2','phaseUseEnd');\n\t\t\t\t\t\tplayer.logSkill('jiangchi');\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.control=='jiangchi_more'){\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\tplayer.addTempSkill('jiangchi3','phaseUseEnd');\n\t\t\t\t\t\tplayer.logSkill('jiangchi');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段摸牌时，你可以选择一项：1、额外摸一张牌，若如此做，你不能使用或打出【杀】直到回合结束。 2、少摸一张牌，若如此做，你使用【杀】无距离限制且可以多使用一张【杀】直到回合结束。"},"rejingce":{"name":"精策","script":"{audio: \"jingce\",trigger: {player: \"phaseUseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.getParent('phaseUse')==event;\n\t\t\t\t\t}).length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tplayer.getHistory('useCard',function(evt){\n\t\t\t\t\t\tif(evt.getParent('phaseUse')==trigger) list.add(get.type2(evt.card));\n\t\t\t\t\t});\n\t\t\t\t\tplayer.draw(list.length);\n\t\t\t\t},group: \"rejingce_add\",}","info":"当你于一回合内首次使用某种花色的手牌时，你的手牌上限+1。出牌阶段结束时，你可以摸X张牌（X为你本阶段内使用过的牌的类型数）。"},"rejueqing":{"name":"绝情","script":"{audio: \"jueqing\",trigger: {source: \"damageBegin2\",},skillAnimation: \"true\",animationColor: \"water\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&!player.hasSkill('rejueqing_1st');\n\t\t\t\t},prompt2: function (event,player){\n\t\t\t\t\tvar num=get.cnNumber(2*event.num);\n\t\t\t\t\treturn '防止即将令其造成的伤害，改为令其失去'+num+'点体力并对自己造成'+num+'点伤害';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hp>event.num*2&&event.player.hp>event.num&&event.player.hp<=2*event.num&&get.attitude(player,event.player)<0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\ttrigger.player.loseHp(2*trigger.num);\n\t\t\t\t\tplayer.damage(2*trigger.num);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.addSkill('rejueqing_1st');\n\t\t\t\t},derivation: \"rejueqing_rewrite\",}","info":"当你对其他角色造成伤害时，你可以防止此伤害。若如此做，你令其失去2X点体力，修改〖绝情〗并对自己造成2X点伤害。"},"reshangshi":{"name":"伤逝","script":"{audio: \"shangshi\",trigger: {player: [\"loseAfter\",\"changeHp\",\"gainMaxHpAfter\",\"loseMaxHpAfter\"],global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},frequent: \"true\",prompt: function (event,player){\n\t\t\t\t\treturn '是否发动【伤逝】将手牌摸至'+get.cnNumber(player.getDamagedHp())+'张？'\n\t\t\t\t},prompt2: \"false\",filter: function (event,player){\n\t\t\t\t\tif(event.getl&&!event.getl(player)) return false;\n\t\t\t\t\treturn player.countCards('h')<player.getDamagedHp();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(player.getDamagedHp()-player.countCards('h'));\n\t\t\t\t},ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'&&player.maxHp-player.hp<player.countCards('h')){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"reshangshi_2nd\",}","info":"当你受到伤害时，你可以弃置一张牌。当你的手牌数小于X时，你可以将手牌摸至X张。（X为你已损失的体力值）"},"luoying":{"name":"落英","script":"{group: [\"luoying_discard\",\"luoying_judge\"],subfrequent: [\"judge\"],subSkill: {discard: {audio: \"2\",trigger: {global: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(event.cards2[i],event.player)=='club'&&get.position(event.cards2[i],true)=='d'){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(trigger.cards2[i],trigger.player)=='club'&&get.position(trigger.cards2[i],true)=='d'){\n\t\t\t\t\t\t\t\t\tcards.push(trigger.cards2[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\t\tplayer.chooseButton(['落英：选择要获得的牌',cards],[1,cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\t\t\treturn get.value(button.link,_status.event.player,'raw');\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"step 2\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t\t\t\tplayer.gain(result.links,'gain2','log');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},judge: {audio: \"2\",trigger: {global: \"cardsDiscardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tvar evt=event.getParent().relatedEvent;\n\t\t\t\t\t\t\tif(!evt||evt.name!='judge') return;\n\t\t\t\t\t\t\tif(evt.player==player) return false;\n\t\t\t\t\t\t\tif(get.position(event.cards[0],true)!='d') return false;\n\t\t\t\t\t\t\treturn (get.suit(event.cards[0])=='club');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tplayer.chooseButton(['落英：选择要获得的牌',trigger.cards],[1,trigger.cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\t\treturn get.value(button.link,_status.event.player,'raw');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t\t\t\tplayer.gain(result.links,'gain2','log');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"当其他角色的梅花牌因弃置或判定而进入弃牌堆时，你可以获得之。"},"jiushi":{"name":"酒诗","script":"{audio: \"jiushi1\",group: [\"jiushi1\",\"jiushi2\",\"jiushi3\"],}","info":"当你需要使用一张【酒】时，若你的武将牌正面朝上，则你可以将武将牌翻面并视为使用了一张【酒】；当你受到伤害时，若你的武将牌背面朝上，则你可在此伤害结算后将武将牌翻回正面。"},"chengxiang":{"name":"称象","script":"{trigger: {player: \"damageEnd\",},frequent: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.cards=get.cards(4);\n\t\t\t\t\tgame.cardsGotoOrdering(event.cards);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tgame.broadcastAll(function(player,id,cards,num){\n\t\t\t\t\t\tvar str;\n\t\t\t\t\t\tif(player==game.me&&!_status.auto){\n\t\t\t\t\t\t\tstr='称象：选择任意张点数不大于'+num+'的牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr='称象';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar dialog=ui.create.dialog(str,cards);\n\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t},player,event.videoId,event.cards,event.name=='chengxiang'?13:12);\n\t\t\t\t\tevent.time=get.utc();\n\t\t\t\t\tgame.addVideo('showCards',player,['称象',get.cardsInfo(event.cards)]);\n\t\t\t\t\tgame.addVideo('delay',null,2);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar next=player.chooseButton([0,4]);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tvar num=0\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.buttons[i].link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (num+get.number(button.link)<=_status.event.maxNum);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('maxNum',event.name=='chengxiang'?13:12);\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.links){\n\t\t\t\t\t\t//player.logSkill('chengxiang');\n\t\t\t\t\t\tvar cards2=[];\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tcards2.push(result.links[i]);\n\t\t\t\t\t\t\tcards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.cards2=cards2;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\tvar time=1000-(get.utc()-event.time);\n\t\t\t\t\tif(time>0){\n\t\t\t\t\t\tgame.delay(0,time);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tvar cards2=event.cards2;\n\t\t\t\t\tplayer.gain(cards2,'log','gain2');\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,2];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以亮出牌堆顶的四张牌。然后获得其中任意数量点数之和不大于13的牌"},"renxin":{"name":"仁心","script":"{trigger: {global: \"damageBegin4\",},audio: \"3\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.hp==1&&player.countCards('he',{type:'equip'})>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('renxin',trigger.player),'弃置一张装备牌并将武将牌翻面，然后防止'+get.translation(trigger.player)+'受到的伤害',{type:'equip'},'he');\n\t\t\t\t\tnext.logSkill=['renxin',trigger.player];\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(player,_status.event.getTrigger().player)>3){\n\t\t\t\t\t\t\treturn 11-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {expose: \"0.5\",},}","info":"当体力值为1的一名其他角色受到伤害时，你可以将武将牌翻面并弃置一张装备牌，然后防止此伤害。"},"qice":{"name":"奇策","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"qice_backup\",filter: function (event,player){\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tif(!hs.length) return false;\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tvar mod2=game.checkMod(hs[i],player,'unchanged','cardEnabled2',player);\n\t\t\t\t\tif(mod2===false) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},chooseButton: {dialog: function (player){\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tif(get.type(lib.inpile[i])=='trick') list.push(['锦囊','',lib.inpile[i]]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog(get.translation('qice'),[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\treturn lib.filter.filterCard({name:button.link[2]},player,_status.event.getParent());\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar recover=0,lose=1,players=game.filterPlayer();\n\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\tif(players[i].hp==1&&get.damageEffect(players[i],player,player)>0&&!players[i].hasSha()){\n\t\t\t\t\t\t\t\treturn (button.link[2]=='juedou')?2:-1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!players[i].isOut()){\n\t\t\t\t\t\t\t\tif(players[i].hp<players[i].maxHp){\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\t\tif(players[i].hp<2){\n\t\t\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\t\t\trecover+=0.5;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\t\trecover++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\t\t\tif(players[i].hp<2){\n\t\t\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\t\t\trecover-=0.5;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\t\trecover--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(lose>recover&&lose>0) return (button.link[2]=='nanman')?1:-1;\n\t\t\t\t\t\tif(lose<recover&&recover>0) return (button.link[2]=='taoyuan')?1:-1;\n\t\t\t\t\t\treturn (button.link[2]=='wuzhong')?1:-1;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\taudio:2,\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tviewAs:{name:links[0][2]},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将全部手牌当作'+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\t\tif(cards.length>=3&&player.hp>=3) return 0;\n\t\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\t\tnum+=Math.max(0,get.value(cards[i],player,'raw'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnum/=cards.length;\n\t\t\t\t\t\t\tnum*=Math.min(cards.length,player.hp);\n\t\t\t\t\t\t\treturn 12-num;\n\t\t\t\t\t\t},},threaten: \"1.6\",},}","info":"出牌阶段限一次，你可以将所有的手牌（至少一张）当做任意一张普通锦囊牌使用。"},"zhiyu":{"name":"智愚","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!player.countCards('h')) event.finish();\n\t\t\t\t\telse player.showHandcards();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(!trigger.source) return;\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tvar color=get.color(cards[0],player);\n\t\t\t\t\tfor(var i=1;i<cards.length;i++){\n\t\t\t\t\t\tif(get.color(cards[i],player)!=color) return;\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.source.chooseToDiscard(true);\n\t\t\t\t},ai: {maixie_defend: \"true\",threaten: \"0.9\",},}","info":"当你受到伤害后，你可以摸一张牌，然后展示所有手牌。若颜色均相同，你令伤害来源弃置一张手牌。"},"xinwuyan":{"name":"无言","script":"{audio: \"2\",trigger: {source: \"damageBegin2\",player: \"damageBegin4\",},forced: \"true\",check: function (event,player){\n\t\t\t\t\tif(player==event.player) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card,'trick')=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {notrick: \"true\",notricksource: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},player: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当你使用锦囊牌造成伤害时，你防止此伤害；锁定技，当你受到锦囊牌对你造成的伤害时，你防止此伤害。"},"xinjujian":{"name":"举荐","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>player.countCards('he',{type:'basic'});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:function(card,player){\n\t\t\t\t\t\t\treturn get.type(card)!='basic'&&lib.filter.cardDiscardable(card,player);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')&&get.type(card)=='trick'){\n\t\t\t\t\t\t\t\treturn 20;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\tif(target.isTurnedOver()) att+=3;\n\t\t\t\t\t\t\t\tif(target.hp==1) att+=3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tprompt:get.prompt2('xinjujian')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('xinjujian',target);\n\t\t\t\t\t\tplayer.discard(result.cards);\n\t\t\t\t\t\tif(target.hp==target.maxHp&&\n\t\t\t\t\t\t\t!target.isTurnedOver()&&\n\t\t\t\t\t\t\t!target.isLinked()){\n\t\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar controls=['draw_card'];\n\t\t\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\t\t\tcontrols.push('recover_hp');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.isLinked()|target.isTurnedOver()){\n\t\t\t\t\t\t\t\tcontrols.push('reset_character');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget.chooseControl(controls).ai=function(){\n\t\t\t\t\t\t\t\tif(target.isTurnedOver()){\n\t\t\t\t\t\t\t\t\treturn 'reset_character';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(target.hp==1&&target.maxHp>2){\n\t\t\t\t\t\t\t\t\treturn 'recover_hp';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(target.hp==2&&target.maxHp>2&&target.countCards('h')>1){\n\t\t\t\t\t\t\t\t\treturn 'recover_hp';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn 'draw_card';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tevent.control=result.control;\n\t\t\t\t\tswitch(event.control){\n\t\t\t\t\t\tcase 'recover_hp':event.target.recover();event.finish();break;\n\t\t\t\t\t\tcase 'draw_card':event.target.draw(2);event.finish();break;\n\t\t\t\t\t\tcase 'reset_character':if(event.target.isTurnedOver()) event.target.turnOver();break;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.control=='reset_character'&&event.target.isLinked()){\n\t\t\t\t\t\tevent.target.link();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.4\",},}","info":"结束阶段开始时，你可以弃置一张非基本牌并选择一名其他角色，令其选择一项：1.摸两张牌；2.回复1点体力；3.将其武将牌翻转至正面朝上并重置之。"},"olsanyao":{"name":"散谣","script":"{enable: \"phaseUse\",audio: \"sanyao\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0&&(!player.hasSkill('olsanyao0')||!player.hasSkill('olsanyao1'));\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar list=[\n\t\t\t\t\t\t\t'选择手牌数最多的一名角色',\n\t\t\t\t\t\t\t'选择体力值最大的一名角色',\n\t\t\t\t\t\t];\n\t\t\t\t\t\tvar choiceList=ui.create.dialog('散谣：请选择一项','forcebutton','hidden');\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar str='<div class=\"popup text\" style=\"width:calc(100% - 10px);display:inline-block\">';\n\t\t\t\t\t\t\tvar bool=lib.skill.olsanyao.chooseButton.filter({link:i},player);\n\t\t\t\t\t\t\tif(!bool) str+='<div style=\"opacity:0.5\">';\n\t\t\t\t\t\t\tstr+=list[i];\n\t\t\t\t\t\t\tif(!bool) str+='</div>';\n\t\t\t\t\t\t\tstr+='</div>';\n\t\t\t\t\t\t\tvar next=choiceList.add(str);\n\t\t\t\t\t\t\tnext.firstChild.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tnext.firstChild.link=i;\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\tnext[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchoiceList.buttons.add(next.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn choiceList;\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\treturn !player.hasSkill('olsanyao'+button.link);\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(game.hasPlayer([\n\t\t\t\t\t\t\tfunction(target){\n\t\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=target&&current.countCards('h')>num;\n\t\t\t\t\t\t\t\t})&&get.effect(target,'sanyao',player,player)>0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfunction(target){\n\t\t\t\t\t\t\t\tvar num=target.hp;\n\t\t\t\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=target&&current.hp>num;\n\t\t\t\t\t\t\t\t})&&get.effect(target,'sanyao',player,player)>0;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t][button.link])) return 1+button.link;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},backup: function (links){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\taudio:'sanyao',\n\t\t\t\t\t\t\tfilterTarget:[\n\t\t\t\t\t\t\t\tfunction(card,player,target){\n\t\t\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn current!=target&&current.countCards('h')>num;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfunction(card,player,target){\n\t\t\t\t\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn current!=target&&current.hp>target.hp;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t][links[0]],\n\t\t\t\t\t\t\tindex:links[0],\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\tcheck:function(card){\n\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tcontent:function(){\n\t\t\t\t\t\t\t\tplayer.addTempSkill('olsanyao'+lib.skill[event.name].index)\n\t\t\t\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tai:lib.skill.sanyao.ai,\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (){\n\t\t\t\t\t\treturn '请选择【散谣】的目标'\n\t\t\t\t\t},},ai: {order: \"7\",result: {player: \"1\",},},}","info":"出牌阶段每项各限一次，你可以弃置一张牌并指定一名体力值或手牌数最多(或之一)的角色，并对其造成1点伤害。"},"rezhiman":{"name":"制蛮","script":"{audio: \"zhiman\",audioname: [\"guansuo\",\"re_masu\"],trigger: {source: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\treturn player!=event.player;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(get.damageEffect(event.player,player,player)<0) return true;\n\t\t\t\t\tvar att=get.attitude(player,event.player);\n\t\t\t\t\tif(att>0&&event.player.countCards('j')) return true;\n\t\t\t\t\tif(event.num>1){\n\t\t\t\t\t\tif(att<0) return false;\n\t\t\t\t\t\tif(att>0) return true;\n\t\t\t\t\t}\n\t\t\t\t\tvar cards=event.player.getGainableCards(player,'he');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.equipValue(cards[i])>=6) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\tif(trigger.player.countGainableCards(player,'hej')){\n\t\t\t\t\t\tplayer.gainPlayerCard(trigger.player,'hej',true);\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},}","info":"当你对一名其他角色造成伤害时，你可以防止此伤害，然后获得其区域内的一张牌。"},"danshou":{"name":"胆守","script":"{enable: \"phaseUse\",filterCard: \"true\",position: \"he\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\tvar num=player.getStat().skill.danshou;\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnum=1;\n\t\t\t\t\t}\n\t\t\t\t\treturn player.countCards('he')>=num;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length>=2){\n\t\t\t\t\t\treturn 4-get.value(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},selectCard: function (card){\n\t\t\t\t\tvar num=_status.event.player.getStat().skill.danshou;\n\t\t\t\t\tif(num) return num+1;\n\t\t\t\t\treturn 1;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tvar num=player.getStat().skill.danshou;\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tnum++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnum=1;\n\t\t\t\t\t}\n\t\t\t\t\tif(num<=2&&!target.countCards('he')) return false;\n\t\t\t\t\treturn player.inRange(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=player.getStat().skill.danshou;\n\t\t\t\t\tswitch(num){\n\t\t\t\t\t\tcase 1:player.discardPlayerCard(target,true);break;\n\t\t\t\t\t\tcase 2:target.chooseCard('选择一张牌交给'+get.translation(player),'he',true);break;\n\t\t\t\t\t\tcase 3:target.damage('nocard');break;\n\t\t\t\t\t\tdefault:game.asyncDraw([player,target],2);\n\t\t\t\t\t}\n\t\t\t\t\tif(num!=2) event.finish();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.cards){\n\t\t\t\t\t\tplayer.gain(result.cards,target,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8.6\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar num=player.getStat().skill.danshou;\n\t\t\t\t\t\t\tif(num){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnum=1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(num>3) return 0;\n\t\t\t\t\t\t\tif(num==3) return get.damageEffect(target,player,target);\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以选择你攻击范围内的一名其他角色，然后弃置X张牌（X为此前你于此阶段你发动“胆守”的次数+1）。若X：为1，你弃置该角色的一张牌；为2，令该角色交给你一张牌；为3，你对该角色造成1点伤害；不小于4，你与该角色各摸两张牌。"},"xinpojun":{"name":"破军","script":"{shaRelated: \"true\",trigger: {player: \"useCardToPlayered\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&player.isPhaseUsing()&&event.target.hp>0&&event.target.countCards('he')>0;\n\t\t\t\t},audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.choosePlayerCard(trigger.target,'he',\n\t\t\t\t\t\t[1,Math.min(trigger.target.countCards('he'),trigger.target.hp)],get.prompt('xinpojun',trigger.target));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.links.length){\n\t\t\t\t\t\tplayer.logSkill('xinpojun',trigger.target);\n\t\t\t\t\t\tif(trigger.target.storage.xinpojun2){\n\t\t\t\t\t\t\ttrigger.target.storage.xinpojun2=trigger.target.storage.xinpojun2.concat(result.links);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttrigger.target.storage.xinpojun2=result.links.slice(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.addVideo('storage',trigger.target,['xinpojun2',get.cardsInfo(trigger.target.storage.xinpojun2),'cards']);\n\t\t\t\t\t\ttrigger.target.addSkill('xinpojun2');\n\t\t\t\t\t\ttrigger.target.lose(result.links,ui.special,'toStorage');\n\t\t\t\t\t}\n\t\t\t\t},ai: {unequip_ai: \"true\",directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(get.attitude(player,arg.target)>0||!player.isPhaseUsing()) return false;\n\t\t\t\t\t\tif(tag=='directHit_ai') return arg.target.hp>=Math.max(1,arg.target.countCards('h')-1);\n\t\t\t\t\t\tif(arg&&arg.name=='sha'&&arg.target.getEquip(2)) return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t},},}","info":"当你于出牌阶段内使用【杀】指定一个目标后，你可以将其至多X张牌扣置于该角色的武将牌旁（X为其体力值）。若如此做，当前回合结束后，该角色获得其武将牌旁的所有牌。"},"ganlu":{"name":"甘露","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",selectTarget: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(target.isMin()) return false;\n\t\t\t\t\tif(ui.selected.targets.length==0) return true;\n\t\t\t\t\tif(ui.selected.targets[0].countCards('e')==0&&target.countCards('e')==0) return false;\n\t\t\t\t\treturn Math.abs(ui.selected.targets[0].countCards('e')-target.countCards('e'))<=player.maxHp-player.hp;\n\t\t\t\t},multitarget: \"true\",content: function (){\n\t\t\t\t\ttargets[0].swapEquip(targets[1]);\n\t\t\t\t},ai: {order: \"10\",threaten: function (player,target){\n\t\t\t\t\t\treturn 0.8*Math.max(1+target.maxHp-target.hp);\n\t\t\t\t\t},result: {target: function (player,target){\n\t\t\t\t\t\t\tvar list1=[];\n\t\t\t\t\t\t\tvar list2=[];\n\t\t\t\t\t\t\tvar num=player.maxHp-player.hp;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0) list1.push(players[i]);\n\t\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0) list2.push(players[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlist1.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn a.countCards('e')-b.countCards('e');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlist2.sort(function(a,b){\n\t\t\t\t\t\t\t\treturn b.countCards('e')-a.countCards('e');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar delta;\n\t\t\t\t\t\t\tfor(var i=0;i<list1.length;i++){\n\t\t\t\t\t\t\t\tfor(var j=0;j<list2.length;j++){\n\t\t\t\t\t\t\t\t\tdelta=list2[j].countCards('e')-list1[i].countCards('e');\n\t\t\t\t\t\t\t\t\tif(delta<=0) continue;\n\t\t\t\t\t\t\t\t\tif(delta<=num){\n\t\t\t\t\t\t\t\t\t\tif(target==list1[i]||target==list2[j]){\n\t\t\t\t\t\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(target.hp==target.maxHp&&get.tag(card,'damage')) return 0.2;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择两名装备区内装备数之差不大于X的角色，令其交换装备区内的牌（X为你已损失的体力值）。"},"buyi":{"name":"补益","script":"{trigger: {global: \"dying\",},audio: \"2\",audioname: [\"re_wuguotai\"],filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=0&&event.player.countCards('h')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar check;\n\t\t\t\t\tif(trigger.player.isUnderControl(true,player)){\n\t\t\t\t\t\tcheck=player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tcheck=(get.attitude(player,trigger.player)>0);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.choosePlayerCard(trigger.player,get.prompt('buyi',trigger.player),'h').set('ai',function(button){\n\t\t\t\t\t\tif(!_status.event.check) return 0;\n\t\t\t\t\t\tif(_status.event.target.isUnderControl(true,_status.event.player)){\n\t\t\t\t\t\t\tif(get.type(button.link)!='basic'){\n\t\t\t\t\t\t\t\treturn 10-get.value(button.link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('check',check).set('filterButton',function(button){\n\t\t\t\t\t\tif(_status.event.player==_status.event.target){\n\t\t\t\t\t\t\treturn lib.filter.cardDiscardable(button.link,_status.event.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('buyi',trigger.player);\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\tplayer.showCards([event.card],get.translation(player)+'展示的手牌');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(get.type(event.card)!='basic'){\n\t\t\t\t\t\ttrigger.player.recover();\n\t\t\t\t\t\ttrigger.player.discard(event.card);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.4\",},}","info":"当有角色进入濒死状态时，你可以展示该角色的一张手牌：若此牌不为基本牌，则该角色弃置此牌并回复1点体力。"},"xuanfeng":{"name":"旋风","script":"{audio: \"2\",audioname: [\"boss_lvbu3\",\"re_heqi\"],trigger: {player: [\"loseAfter\",\"phaseDiscardEnd\"],global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.name=='phaseDiscard'){\n\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\t\tif(evt&&evt.getParent('phaseDiscard')==event&&evt.hs) cards.addArray(evt.hs);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn cards.length>1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\t\treturn evt&&evt.es&&evt.es.length>0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=2;\n\t\t\t\t\tevent.logged=false;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('xuanfeng'),'弃置一名其他角色的一张牌',function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\treturn target.countDiscardableCards(player,'he');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.logged){\n\t\t\t\t\t\t\tplayer.logSkill('xuanfeng',result.targets);\n\t\t\t\t\t\t\tevent.logged=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.line(result.targets[0],'green');\n\t\t\t\t\t\tplayer.discardPlayerCard(result.targets[0],'he',true);\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.count) event.goto(1);\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},reverseEquip: \"true\",noe: \"true\",},}","info":"当你失去装备区内的牌时，或于弃牌阶段弃置了两张或更多的手牌后，你可以依次弃置一至两名其他角色的共计两张牌。"},"rezishou":{"name":"自守","script":"{audio: \"zishou\",audioname: [\"re_liubiao\"],trigger: {player: \"phaseDrawBegin2\",},check: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<=(player.hasSkill('zongshi')?player.maxHp:(player.hp-2))||player.skipList.contains('phaseUse')||!player.countCards('h',function(card){\n\t\t\t\t\t\treturn get.tag(card,'damage')&&player.hasUseTarget(card);\n\t\t\t\t\t});\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num+=game.countGroup();\n\t\t\t\t\tplayer.addTempSkill('rezishou2');\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"摸牌阶段，你可以多摸X张牌。若如此做，本回合你对其他角色造成伤害时，防止此伤害。"},"zongshi":{"name":"宗室","script":"{audio: \"2\",mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+game.countGroup();\n\t\t\t\t\t},},}","info":"锁定技，你的手牌上限+X（X为场上现存势力数）。"},"zhiyan":{"name":"直言","script":"{audio: \"2\",audioname: [\"gexuan\",\"re_yufan\"],trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('zhiyan'),'令一名角色摸一张牌并展示之。若为装备牌，则其回复1点体力').set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhiyan',result.targets);\n\t\t\t\t\t\tevent.bool=false;\n\t\t\t\t\t\tevent.target.draw('visible');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar card=result[0];\n\t\t\t\t\tif(get.type(card)=='equip'){\n\t\t\t\t\t\tif(!event.target.isDisabled(get.subtype(card))){\n\t\t\t\t\t\t\tevent.target.chooseUseTarget(card,true,'nopopup');\n\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.bool=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.bool) target.recover();\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.2\",},}","info":"结束阶段，你可以令一名角色摸一张牌并展示之，若为装备牌，其使用此牌并回复一点体力。"},"zongxuan":{"name":"纵玄","script":"{audio: \"2\",trigger: {player: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\tif(get.position(event.cards2[i])=='d'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\tif(get.position(trigger.cards2[i],true)=='d'){\n\t\t\t\t\t\t\tcards.push(trigger.cards2[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCardButton(cards,[1,cards.length],'纵玄：将弃置的牌按任意顺序置于牌堆顶（先选择的在上）').set('ai',function(){\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result&&result.bool&&result.links&&result.links.length){\n\t\t\t\t\t\tvar cards=result.links.slice(0);\n\t\t\t\t\t\twhile(cards.length){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(cards.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill(event.name);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你的牌因弃置而进入弃牌堆时，你可以将其按任意顺序置于牌堆顶"},"mingce":{"name":"明策","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",position: \"he\",filterCard: function (card){\n\t\t\t\t\treturn get.name(card)=='sha'||get.type(card)=='equip';\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0||player.countCards('he',{type:'equip'})>0;\n\t\t\t\t},check: function (card){return 8-get.value(card)},selectTarget: \"2\",multitarget: \"true\",discard: \"false\",lose: \"false\",targetprompt: [\"得到牌\",\"出杀目标\"],filterTarget: function (card,player,target){\n\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn ui.selected.targets[0].inRange(target);\n\t\t\t\t\t}\n\t\t\t\t},delay: \"false\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttargets[0].gain(cards,player,'give');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!lib.filter.filterTarget({name:'sha',isCard:true},targets[0],targets[1])) event._result={control:'draw_card'};\n\t\t\t\t\telse targets[0].chooseControl('draw_card','出杀',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar target=_status.event.target;\n\t\t\t\t\t\tif(get.effect(_status.event.target,{name:'sha'},player,player)>0){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('target',targets[1]).set('prompt','对'+get.translation(targets[1])+'使用一张杀，或摸一张牌');\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.control=='draw_card'){\n\t\t\t\t\t\ttargets[0].draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttargets[0].useCard({name:'sha',isCard:true},targets[1]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {player: function (player){\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=player&&get.attitude(player,players[i])>1&&get.attitude(players[i],player)>1){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\t\t\treturn -0.1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},order: \"8.5\",expose: \"0.2\",},}","info":"出牌阶段，你可以交给一名其他角色一张装备牌或【杀】，然后令该角色选择一项：1. 视为对其攻击范围内的另一名由你指定的角色使用一张【杀】。2. 摸一张牌。每回合限一次。"},"zhichi":{"name":"智迟","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn _status.currentPhase!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('zhichi2',['phaseAfter','phaseBefore']);\n\t\t\t\t},}","info":"锁定技，当你于回合外受到伤害后，所有【杀】或普通锦囊牌对你无效直到回合结束。"},"old_anxu":{"name":"安恤","script":"{enable: \"phaseUse\",usable: \"1\",multitarget: \"true\",audio: \"anxu\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\treturn num<ui.selected.targets[0].countCards('h');\n\t\t\t\t\t}\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(num>players[i].countCards('h')) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},selectTarget: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar gainner,giver;\n\t\t\t\t\tif(targets[0].countCards('h')<targets[1].countCards('h')){\n\t\t\t\t\t\tgainner=targets[0];\n\t\t\t\t\t\tgiver=targets[1];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgainner=targets[1];\n\t\t\t\t\t\tgiver=targets[0];\n\t\t\t\t\t}\n\t\t\t\t\tgainner.gainPlayerCard(giver,true,'h','visibleMove');\n\t\t\t\t\tevent.gainner=gainner;\n\t\t\t\t\tevent.giver=giver;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.cards){\n\t\t\t\t\t\tevent.bool=false;\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tif(get.suit(card)!='spade') event.bool=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.bool){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10.5\",threaten: \"2.3\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\t\t\tif(att>0) return -1;\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar num2=players[i].countCards('h');\n\t\t\t\t\t\t\t\t\tvar att2=get.attitude(player,players[i]);\n\t\t\t\t\t\t\t\t\tif(num2<num){\n\t\t\t\t\t\t\t\t\t\tif(att2>0) return -3;\n\t\t\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},player: \"1\",},},}","info":"出牌阶段限一次，你可以选择两名手牌数不同的其他角色，令其中手牌少的角色获得手牌多的角色的一张手牌并展示之。然后若此牌不为黑桃，则你摸一张牌。"},"zhuiyi":{"name":"追忆","script":"{audio: \"2\",audioname: [\"re_bulianshi\"],trigger: {player: \"die\",},direct: \"true\",skillAnimation: \"true\",animationColor: \"wood\",forceDie: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('zhuiyi'),function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&_status.event.sourcex!=target;\n\t\t\t\t\t}).set('forceDie',true).set('ai',function(target){\n\t\t\t\t\t\tvar num=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(num>0){\n\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<target.maxHp){\n\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}).set('sourcex',trigger.source);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhuiyi',target);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\ttarget.draw(3);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.5\",},}","info":"当你死亡时，你可以令一名其他角色（杀死你的角色除外）摸三张牌，然后其回复1点体力。"},"gongji":{"name":"弓骑","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",position: \"he\",filterCard: \"true\",check: function (card){\n\t\t\t\t\tif(get.type(card)!='equip') return 0;\n\t\t\t\t\tvar player=_status.currentPhase;\n\t\t\t\t\tif(player.countCards('he',{subtype:get.subtype(card)})>1){\n\t\t\t\t\t\treturn 11-get.equipValue(card);\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.equipValue(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.addTempSkill('gongji2');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(get.type(cards[0],null,cards[0].original=='h'?player:false)=='equip'){\n\t\t\t\t\t\tplayer.chooseTarget('是否弃置一名角色的一张牌？',function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0){\n\t\t\t\t\t\t\t\treturn Math.max(0.5,get.effect(target,{name:'sha'},player,player));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.discardPlayerCard(event.target,'he',true).ai=get.buttonValue;\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以弃置一张牌，然后你的攻击范围视为无限直到回合结束。若你以此法弃置的牌为装备牌，则你可以弃置一名其他角色的一张牌。"},"jiefan":{"name":"解烦","script":"{skillAnimation: \"true\",animationColor: \"wood\",audio: \"2\",audioname: [\"re_handang\"],unique: \"true\",limited: \"true\",mark: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.jiefan=false;\n\t\t\t\t},enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.jiefan;\n\t\t\t\t},intro: {content: \"limited\",},filterTarget: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('jiefan');\n\t\t\t\t\tplayer.storage.jiefan=true;\n\t\t\t\t\tevent.players=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=target&&current.inRange(target);\n\t\t\t\t\t});\n\t\t\t\t\tevent.players.sortBySeat(target);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.players.length){\n\t\t\t\t\t\tevent.current=event.players.shift();\n\t\t\t\t\t\tevent.current.animate('target');\n\t\t\t\t\t\tplayer.line(event.current,'green');\n\t\t\t\t\t\tif(event.current.countCards('he')&&target.isAlive()){\n\t\t\t\t\t\t\tevent.current.chooseToDiscard({subtype:'equip1'},'he','弃置一张武器牌或让'+\n\t\t\t\t\t\t\tget.translation(target)+'摸一张牌').set('ai',function(card){\n\t\t\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.target)<0) return 7-get.value(card);\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}).set('target',target);\n\t\t\t\t\t\t\tevent.tempbool=false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.tempbool=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.tempbool||result.bool==false){\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(1);\n\t\t\t\t},ai: {order: \"5\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hp>2){\n\t\t\t\t\t\t\t\tif(game.phaseNumber<game.players.length*2) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=0,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=target&&players[i].inRange(target)){\n\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以选择一名角色，令攻击范围内含有该角色的所有角色依次选择一项：1.弃置一张武器牌；2.令其摸一张牌。"},"qiuyuan":{"name":"求援","script":"{audio: \"2\",trigger: {target: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('qiuyuan'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!_status.event.targets.contains(target)&&_status.event.playerx.canUse('sha',target,false);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,trigger.player,player)+0.1;\n\t\t\t\t\t}).set('targets',trigger.targets).set('playerx',trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('qiuyuan',target);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\ttarget.chooseCard({name:'shan'},'交给'+get.translation(player)+\n\t\t\t\t\t\t'一张闪，或成为此杀的额外目标').set('ai',function(card){\n\t\t\t\t\t\t\treturn get.attitude(target,_status.event.sourcex)>=0?1:-1;\n\t\t\t\t\t\t}).set('sourcex',player);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,event.target,'giveAuto');\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.getParent().targets.push(event.target);\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.push(event.target);\n\t\t\t\t\t\tgame.log(event.target,'成为了额外目标');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(card.name!='sha') return;\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0){\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar target2=players[i];\n\t\t\t\t\t\t\t\t\tif(player!=target2&&target!=target2&&player.canUse(card,target2,false)&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,target)>0&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,player)<0){\n\t\t\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return 0.3;\n\t\t\t\t\t\t\t\t\t\treturn 0.6;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tvar target2=players[i];\n\t\t\t\t\t\t\t\t\tif(player!=target2&&target!=target2&&player.canUse(card,target2,false)&&\n\t\t\t\t\t\t\t\t\t\tget.effect(target2,{name:'shacopy',nature:card.nature,suit:card.suit},player,player)>0){\n\t\t\t\t\t\t\t\t\t\tif(player.canUse(card,target2)) return;\n\t\t\t\t\t\t\t\t\t\tif(target.hp==target.maxHp) return [0,1];\n\t\t\t\t\t\t\t\t\t\treturn [0,0];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标时，你可以令一名其他角色选择一项：①、交给你一张【闪】；②、成为此【杀】的额外目标。"},"zhuikong":{"name":"惴恐","script":"{audio: \"2\",trigger: {global: \"phaseZhunbeiBegin\",},check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<-2){\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tif(cards.length>player.hp) return true;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tvar useful=get.useful(cards[i]);\n\t\t\t\t\t\t\tif(useful<5) return true;\n\t\t\t\t\t\t\tif(cards[i].number>9&&useful<7) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp&&player.canCompare(event.player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(trigger.player);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(event.name=='zhuikong') trigger.player.addTempSkill('zishou2');\n\t\t\t\t\t\telse trigger.player.skip('phaseUse');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.storage.zhuikong_distance=player;\n\t\t\t\t\t\ttrigger.player.addTempSkill('zhuikong_distance');\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {distance: {sub: \"true\",onremove: \"true\",mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\t\t\tif(from.storage.zhuikong_distance==to) return -Infinity;\n\t\t\t\t\t\t\t},},},},}","info":"其他角色的准备阶段，若你已受伤，你可以与该角色拼点。若你赢，该角色本回合使用的牌不能指定除该角色外的角色为目标。若你没赢，其本回合至你的距离视为1。"},"quanji":{"name":"权计","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},frequent: \"true\",locked: \"false\",notemp: \"true\",init: function (player){\n\t\t\t\t\tif(!player.storage.quanji) player.storage.quanji=[];\n\t\t\t\t},filter: function (event){\n\t\t\t\t\treturn event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(player.countCards('h')){\n\t\t\t\t\t\tplayer.chooseCard('将一张手牌置于武将牌上作为“权”',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(4);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.cards&&result.cards.length){\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.storage.quanji=player.storage.quanji.concat(result.cards);\n\t\t\t\t\t\tplayer.syncStorage('quanji');\n\t\t\t\t\t\tplayer.markSkill('quanji');\n\t\t\t\t\t\tgame.log(player,'将',result.cards,'置于武将牌上作为“权”');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(event.count>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('quanji')).set('frequentSkill','quanji');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('quanji');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.storage.quanji.length;\n\t\t\t\t\t},},ai: {maixie: \"true\",maixie_hp: \"true\",threaten: \"0.8\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [0.5,get.tag(card,'damage')*2];\n\t\t\t\t\t\t\t\tif(!target.hasSkill('paiyi')&&target.hp>1) return [0.5,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [0.5,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,get.tag(card,'damage')*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到1点伤害后，你可以摸一张牌，然后将一张手牌置于武将牌上，称为“权”；你的手牌上限+X（X为“权”的数量）。"},"zili":{"name":"自立","script":"{skillAnimation: \"true\",animationColor: \"thunder\",audio: \"2\",audioname: [\"re_zhonghui\"],unique: \"true\",juexingji: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.hasSkill('paiyi')&&player.storage.quanji&&player.storage.quanji.length>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseDrawRecover(2,true,function(event,player){\n\t\t\t\t\t\tif(player.hp==1&&player.isDamaged()) return 'recover_hp';\n\t\t\t\t\t\treturn 'draw_card';\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('paiyi');\n\t\t\t\t\tplayer.awakenSkill('zili');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若“权”的数量不小于3，你减1点体力上限，然后选择一项：1、回复1点体力；2、摸两张牌。然后你获得技能“排异”。"},"qiaoshui":{"name":"巧说","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('qiaoshui'),function(card,player,target){\n\t\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)/target.countCards('h');\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('qiaoshui',result.targets[0]);\n\t\t\t\t\t\tplayer.chooseToCompare(result.targets[0]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('qiaoshui3');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addTempSkill('qiaoshui2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"出牌阶段开始时，你可与一名其他角色拼点。若你赢，你使用的下一张基本牌或普通锦囊牌可以额外指定任意一名其他角色为目标或减少指定一个目标；若你没赢，你不能使用锦囊牌直到回合结束"},"jyzongshi":{"name":"纵适","script":"{audio: \"2\",audioname: [\"re_jianyong\"],trigger: {player: [\"chooseToCompareAfter\",\"compareMultipleAfter\"],target: [\"chooseToCompareAfter\",\"compareMultipleAfter\"],},filter: function (event,player){\n\t\t\t\t\tif(event.preserve) return false;\n\t\t\t\t\tif(player==event.player){\n\t\t\t\t\t\tif(event.num1>event.num2){\n\t\t\t\t\t\t\treturn !get.owner(event.card2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn !get.owner(event.card1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.num1<event.num1){\n\t\t\t\t\t\t\treturn !get.owner(event.card1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn !get.owner(event.card2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tif(player==event.player){\n\t\t\t\t\t\tif(event.num1>event.num2){\n\t\t\t\t\t\t\treturn event.card2.name!='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn event.card1.name!='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.num1<event.num2){\n\t\t\t\t\t\t\treturn event.card1.name!='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn event.card2.name!='du';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\tif(trigger.num1>trigger.num2){\n\t\t\t\t\t\t\tplayer.gain(trigger.card2,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.gain(trigger.card1,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(trigger.num1<trigger.num2){\n\t\t\t\t\t\t\tplayer.gain(trigger.card1,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.gain(trigger.card2,'gain2','log');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你拼点赢时，你可以获得对方此次拼点的牌；当你拼点没赢时，你可以收回你此次拼点的牌。"},"mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-1。"},"oldqianxi":{"name":"潜袭","script":"{audio: \"2\",trigger: {source: \"damageBegin2\",},check: function (event,player){\n\t\t\t\t\tvar att=get.attitude(player,event.player);\n\t\t\t\t\tif(event.player.hp==event.player.maxHp) return att<0;\n\t\t\t\t\tif(event.player.hp==event.player.maxHp-1&&\n\t\t\t\t\t\t(event.player.maxHp<=3||event.player.hasSkillTag('maixie'))) return att<0;\n\t\t\t\t\treturn att>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&get.distance(player,event.player)<=1;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge(function(card){\n\t\t\t\t\t\treturn get.suit(card)!='heart'?1:-1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\ttrigger.player.loseMaxHp(true);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用【杀】对距离为1的目标角色造成伤害时，你可以进行一次判定，若判定结果不为红桃，你防止此伤害，令其减1点体力上限"},"xiansi":{"name":"陷嗣","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",init: function (player){\n\t\t\t\t\tif(!player.storage.xiansi) player.storage.xiansi=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xiansi'),[1,2],function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('he')>0;\n\t\t\t\t\t},function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tresult.targets.sortBySeat();\n\t\t\t\t\t\tplayer.logSkill('xiansi',result.targets);\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar target=event.targets.shift();\n\t\t\t\t\t\tevent.current=target;\n\t\t\t\t\t\tplayer.choosePlayerCard(target,true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.xiansi=player.storage.xiansi.concat(result.links);\n\t\t\t\t\t\tplayer.markSkill('xiansi');\n\t\t\t\t\t\tplayer.syncStorage('xiansi');\n\t\t\t\t\t\tevent.current.lose(result.links,ui.special,'toStorage');\n\t\t\t\t\t\tevent.current.$give(result.links,player,false);\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},ai: {threaten: \"2\",},global: \"xiansi2\",}","info":"准备阶段开始时，你可以将一至两名角色的各一张牌置于你的武将牌上，称为“逆”；当一名角色需要对你使用【杀】时，其可以移去两张“逆”，然后视为对你使用了一张【杀】。"},"junxing":{"name":"峻刑","script":"{enable: \"phaseUse\",audio: \"2\",usable: \"1\",filterCard: \"true\",selectCard: [1,null],filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(ui.selected.cards.length) return -1;\n\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\tif(get.type(card)=='basic') return 8-get.value(card);\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar types=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\ttypes.add(get.type(cards[i],'trick',player));\n\t\t\t\t\t}\n\t\t\t\t\ttarget.chooseToDiscard(function(card){\n\t\t\t\t\t\treturn !_status.event.types.contains(get.type(card,'trick'));\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.player.isTurnedOver()) return -1;\n\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t}).set('types',types).set('dialog',['弃置一张与'+get.translation(player)+'弃置的牌类别均不同的牌，或将武将牌翻面','hidden',cards]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\ttarget.turnOver();\n\t\t\t\t\t\ttarget.draw(cards.length);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"2\",expose: \"0.3\",threaten: \"1.8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('noturn')) return 0;\n\t\t\t\t\t\t\tif(target.isTurnedOver()) return 2;\n\t\t\t\t\t\t\treturn -1/(target.countCards('h')+1);\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置至少一张手牌并选择一名其他角色，该角色需弃置一张与你弃置的牌类别均不同的手牌，否则其先将其武将牌翻面再摸X张牌（X为你以此法弃置的手牌数量）。"},"yuce":{"name":"御策","script":"{audio: \"2\",audioname: [\"re_manchong\"],trigger: {player: \"damageEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseCard(get.prompt2('yuce'));\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(get.type(card)=='basic') return 1;\n\t\t\t\t\t\treturn Math.abs(get.value(card))+1;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yuce');\n\t\t\t\t\t\tplayer.showCards(result.cards);\n\t\t\t\t\t\tvar type=get.type(result.cards[0],'trick');\n\t\t\t\t\t\tif(trigger.source){\n\t\t\t\t\t\t\ttrigger.source.chooseToDiscard('弃置一张不为'+get.translation(type)+'牌的牌或令'+get.translation(player)+'回复一点体力',function(card){\n\t\t\t\t\t\t\t\treturn get.type(card,'trick')!=_status.event.type;\n\t\t\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\t\t\tif(get.recoverEffect(_status.event.getParent().player,_status.event.player,_status.event.player)<0){\n\t\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}).set('type',type);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.recover=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.recover){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.bool){\n\t\t\t\t\t\t//player.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage'&&target.countCards('h'))){\n\t\t\t\t\t\t\t\treturn 0.8\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到伤害后，你可以展示一张手牌，并令伤害来源选择一项：弃置一张与此牌类型不同的手牌，或令你回复一点体力。"},"pindi":{"name":"品第","script":"{audio: \"2\",enable: \"phaseUse\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\tif(player.storage.pindi_target&&\n\t\t\t\t\t\tplayer.storage.pindi_target.contains(target)){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},filterCard: function (card,player){\n\t\t\t\t\tif(player.storage.pindi_type&&\n\t\t\t\t\t\tplayer.storage.pindi_type.contains(get.type2(card))){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},subSkill: {clear: {trigger: {player: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.pindi_target;\n\t\t\t\t\t\t\tdelete player.storage.pindi_type;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},check: function (card){\n\t\t\t\t\tvar num=_status.event.player.getStat('skill').pindi||0;\n\t\t\t\t\treturn 6+num-get.value(card);\n\t\t\t\t},position: \"he\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!player.storage.pindi_target){\n\t\t\t\t\t\tplayer.storage.pindi_target=[];\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.storage.pindi_type){\n\t\t\t\t\t\tplayer.storage.pindi_type=[];\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.pindi_target.push(target);\n\t\t\t\t\tplayer.storage.pindi_type.push(get.type2(cards[0],cards[0].original=='h'?player:false));\n\t\t\t\t\tevent.num=player.getStat('skill').pindi;\n\t\t\t\t\tvar evt=_status.event.getParent('phase');\n\t\t\t\t\tif(evt&&evt.name=='phase'&&!evt.pindi){\n\t\t\t\t\t\tvar next=game.createEvent('rerende_clear');\n\t\t\t\t\t\t_status.event.next.remove(next);\n\t\t\t\t\t\tevt.after.push(next);\n\t\t\t\t\t\tevt.pindi=true;\n\t\t\t\t\t\tnext.player=player;\n\t\t\t\t\t\tnext.setContent(lib.skill.pindi_clear.content);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.syncStorage();\n\t\t\t\t\tif(target.countCards('he')==0) event._result={index:0};\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseControlList([\n\t\t\t\t\t\t\t'令'+get.translation(target)+'摸'+get.cnNumber(event.num)+'张牌',\n\t\t\t\t\t\t\t'令'+get.translation(target)+'弃置'+get.cnNumber(event.num)+'张牌'\n\t\t\t\t\t\t],function(){\n\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t}).set('choice',get.attitude(player,target)>0?0:1);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\ttarget.draw(event.num);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.chooseToDiscard(event.num,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(target.isDamaged()){\n\t\t\t\t\t\tplayer.link(true);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",threaten: \"1.8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tvar num=(player.getStat('skill').pindi||0)+1;\n\t\t\t\t\t\t\tif(att<=0&&target.countCards('he')<num) return 0;\n\t\t\t\t\t\t\treturn get.sgn(att);\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张牌并选择一名其他角色（不能弃置相同类型牌且不能指定相同的角色），然后令其执行一项：摸X张牌；弃置X张牌（X为本回合此技能发动次数）。若其已受伤，你横置。"},"faen":{"name":"法恩","script":"{audio: \"2\",trigger: {global: [\"turnOverAfter\",\"linkAfter\"],},filter: function (event,player){\n\t\t\t\t\tif(event.name=='link') return event.player.isLinked();\n\t\t\t\t\treturn !event.player.isTurnedOver();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"当一名角色翻至正面或横置后，你可以令其摸一张牌。"},"chanhui":{"name":"谮毁","script":"{audio: \"2\",trigger: {player: \"useCardToPlayer\",},filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tif(player.hasSkill('chanhui2')) return false;\n\t\t\t\t\tif(event.targets.length>1) return false;\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\tif(get.color(card)=='black'&&get.type(card)=='trick') return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('chanhui'),function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\tvar trigger=_status.event;\n\t\t\t\t\t\treturn player.canUse(trigger.card,target)&&trigger.targets.contains(target)==false;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player)+0.01;\n\t\t\t\t\t}).set('targets',trigger.targets).set('card',trigger.card);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.delay(0,200);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tplayer.addSkill('chanhui2');\n\t\t\t\t\tplayer.logSkill('chanhui',event.target);\n\t\t\t\t\tevent.target.chooseCard('交给'+get.translation(player)+'一张手牌，或成为'+\n\t\t\t\t\tget.translation(trigger.card)+'的额外目标').set('ai',function(card){\n\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,event.target,'giveAuto');\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.getParent().player=event.target;\n\t\t\t\t\t\tgame.log(event.target,'成为了',trigger.card,'的使用者');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.log(event.target,'成为了',trigger.card,'的额外目标');\n\t\t\t\t\t\ttrigger.getParent().targets.push(event.target);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段限一次，当你使用【杀】或黑色普通锦囊牌指定唯一目标时，你可令可以成为此牌目标的另一名其他角色选择一项：交给你一张牌并成为此牌的使用者；或成为此牌的额外目标。"},"jiaojin":{"name":"骄矜","script":"{audio: \"2\",trigger: {player: \"damageBegin3\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'})&&event.source&&event.source.sex=='male';\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard('he','骄矜：是否弃置一张装备牌令伤害-1？',function(card,player){\n\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.hp==1||_status.event.getTrigger().num>1){\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.hp==2){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\tnext.logSkill='jiaojin';\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到男性角色造成的伤害时，你可以弃置一张装备牌，令此伤害-1。"},"shenxing":{"name":"慎行","script":"{audio: \"2\",enable: \"phaseUse\",position: \"he\",filterCard: \"true\",selectCard: \"2\",prompt: \"弃置两张牌并摸一张牌\",check: function (card){return 4-get.useful(card)},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {order: \"1\",result: {player: \"1\",},},}","info":"出牌阶段，你可以弃置两张牌，然后摸一张牌。"},"bingyi":{"name":"秉壹","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterx: function (event,player){\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tif(cards.length<1) return false;\n\t\t\t\t\tvar color=get.color(cards[0]);\n\t\t\t\t\tfor(var i=1;i<cards.length;i++){\n\t\t\t\t\t\tif(get.color(cards[i])!=color) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(lib.skill.bingyi.filterx(trigger,player)){player.chooseTarget(get.prompt('bingyi'),'展示所有手牌，并令至多'+get.cnNumber(player.countCards('h'))+'名角色各摸一张牌',[1,player.countCards('h')],function(card,player,target){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t});}\n\t\t\t\t\telse player.chooseBool(get.prompt('bingyi'),'展示所有手牌').ai=function(){return false};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('bingyi');\n\t\t\t\t\t\tplayer.showHandcards(get.translation(player)+'发动了【秉壹】');\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(targets&&targets.length){\n\t\t\t\t\t\tplayer.line(targets,'green');\n\t\t\t\t\t\ttargets.sortBySeat();\n\t\t\t\t\t\tgame.asyncDraw(targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"结束阶段开始时，你可以展示所有手牌，若这些牌颜色均相同，则你令至多X名角色各摸一张牌(X为你的手牌数)。"},"qieting":{"name":"窃听","script":"{audio: \"2\",trigger: {global: \"phaseEnd\",},filter: function (event,player){\n\t\t\t\t\tif(event.player==player||!event.player.isAlive()) return false;\n\t\t\t\t\tvar history=event.player.getHistory('useCard');\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tif(!history[i].targets) continue;\n\t\t\t\t\t\tfor(var j=0;j<history[i].targets.length;j++){\n\t\t\t\t\t\t\tif(history[i].targets[j]!=event.player) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next;\n\t\t\t\t\tif(trigger.player.hasCard(function(card){\n\t\t\t\t\t\treturn player.isEmpty(get.subtype(card));\n\t\t\t\t\t},'e')){\n\t\t\t\t\t\tnext=player.chooseControl('移动装备','draw_card','cancel2',function(event,player){\n\t\t\t\t\t\t\tvar source=_status.event.sourcex;\n\t\t\t\t\t\t\tvar att=get.attitude(player,source);\n\t\t\t\t\t\t\tif(source.hasSkillTag('noe')){\n\t\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\t\treturn '移动装备';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(att<=0&&source.countCards('e',function(card){\n\t\t\t\t\t\t\t\t\treturn get.value(card,source)>0&&get.effect(player,card,player,player)>0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn '移动装备';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 'draw_card';\n\t\t\t\t\t\t}).set('sourcex',trigger.player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnext=player.chooseControl('draw_card','cancel2',function(){\n\t\t\t\t\t\t\treturn 'draw_card';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tnext.set('prompt',get.prompt('qieting',trigger.player));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='移动装备'){\n\t\t\t\t\t\tplayer.logSkill('qieting',trigger.player);\n\t\t\t\t\t\tplayer.choosePlayerCard(trigger.player,'e','将一张装备牌移至你的装备区',true).set('filterButton',function(button){\n\t\t\t\t\t\t\treturn _status.event.player.isEmpty(get.subtype(button.link));\n\t\t\t\t\t\t}).set('ai',function(button){\n\t\t\t\t\t\t\treturn get.effect(player,button.link,player,player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(result.control=='draw_card'){\n\t\t\t\t\t\t\tplayer.logSkill('qieting');\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result&&result.links&&result.links.length){\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t\ttrigger.player.$give(result.links[0],player,false);\n\t\t\t\t\t\tplayer.equip(result.links[0]);\n\t\t\t\t\t\tplayer.addExpose(0.2);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"其他角色的结束阶段，若其未于此回合内使用过指定其他角色为目标的牌，你可以选择一项：将其装备区里的一张牌移动至你装备区里的相应位置；或摸一张牌。"},"xianzhou":{"name":"献州","script":"{skillAnimation: \"true\",animationColor: \"gray\",audio: \"2\",unique: \"true\",limited: \"true\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.xianzhou&&player.countCards('e')>0;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.xianzhou=false;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},mark: \"true\",delay: \"false\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('xianzhou');\n\t\t\t\t\tvar cards=player.getCards('e');\n\t\t\t\t\ttarget.gain(cards,player,'give');\n\t\t\t\t\tevent.num=cards.length;\n\t\t\t\t\tplayer.storage.xianzhou=true;\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttarget.chooseTarget([1,event.num],'令'+get.translation(player)+'回复'+\n\t\t\t\t\t\tevent.num+'点体力，或对攻击范围内的'+event.num+'名角色造成一点伤害',function(card,player,target2){\n\t\t\t\t\t\treturn _status.event.player.inRange(target2);\n\t\t\t\t\t}).set('ai',function(target2){\n\t\t\t\t\t\tvar target=_status.event.player;\n\t\t\t\t\t\tvar player=_status.event.getParent().player;\n\t\t\t\t\t\tif(get.attitude(target,player)>0){\n\t\t\t\t\t\t\tif(player.hp+event.num<=player.maxHp||player.hp==1) return -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.damageEffect(target2,target,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.line(result.targets,'green');\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\tevent.num2=0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.recover(event.num);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.num2<event.targets.length){\n\t\t\t\t\t\tevent.targets[event.num2].damage(target);\n\t\t\t\t\t\tevent.num2++;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"limited\",},ai: {order: \"1\",result: {target: \"1\",player: function (player){\n\t\t\t\t\t\t\tvar bool=true,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i]!=player&&get.attitude(player,players[i])>2&&get.attitude(players[i],player)>2){\n\t\t\t\t\t\t\t\t\tbool=false;break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(bool) return -10;\n\t\t\t\t\t\t\tif(player.hp==1) return 1;\n\t\t\t\t\t\t\tif(game.phaseNumber<game.players.length) return -10;\n\t\t\t\t\t\t\tif(player.countCards('e')+player.hp<=player.maxHp) return 1;\n\t\t\t\t\t\t\treturn -10;\n\t\t\t\t\t\t},},},}","info":"限定技。出牌阶段，你可以将装备区内的所有牌交给一名其他角色，然后该角色选择一项：令你回复X点体力；或对其攻击范围内的X名角色各造成1点伤害(X为你以此法交给该角色的牌的数量)。"},"jianying":{"name":"渐营","script":"{audio: \"2\",locked: \"false\",mod: {aiOrder: function (player,card,num){\n\t\t\t\t\t\tif(typeof card=='object'&&player.isPhaseUsing()){\n\t\t\t\t\t\t\tvar evt=player.getLastUsed();\n\t\t\t\t\t\t\tif(evt&&evt.card&&(get.suit(evt.card)&&get.suit(evt.card)==get.suit(card)||evt.card.number&&evt.card.number==card.number)){\n\t\t\t\t\t\t\t\treturn num+10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},trigger: {player: \"useCard\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tvar evt=player.getLastUsed(1);\n\t\t\t\t\tif(!evt||!evt.card) return false;\n\t\t\t\t\tif(!player.isPhaseUsing()) return false;\n\t\t\t\t\tvar evt2=evt.getParent('phaseUse');\n\t\t\t\t\tif(!evt2||evt2.name!='phaseUse'||evt2.player!=player) return false;\n\t\t\t\t\treturn get.suit(evt.card)&&get.suit(evt.card)==get.suit(event.card)||\n\t\t\t\t\t\tevt.card.number&&evt.card.number==event.card.number;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"当你于出牌阶段内使用与此阶段你使用的上一张牌点数或花色相同的牌时，你可以摸一张牌"},"shibei":{"name":"矢北","script":"{trigger: {player: \"damageEnd\",},forced: \"true\",audio: \"2\",check: function (event,player){\n\t\t\t\t return player.getHistory('damage',function(evt){\n\t\t\t\t\t\treturn evt!=event\n\t\t\t\t\t}).length==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(player.getHistory('damage',function(evt){\n\t\t\t\t\t\treturn evt!=trigger\n\t\t\t\t\t}).length>0){\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {damaged: {sub: \"true\",},ai: {sub: \"true\",},},ai: {maixie_defend: \"true\",threaten: \"0.9\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing')) return;\n\t\t\t\t\t\t\tif(target.hujia) return;\n\t\t\t\t\t\t\tif(player._shibei_tmp) return;\n\t\t\t\t\t\t\tif(target.hasSkill('shibei_ai')) return;\n\t\t\t\t\t\t\tif(_status.event.getParent('useCard',true)||_status.event.getParent('_wuxie',true)) return;\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(target.getHistory('damage').length>0){\n\t\t\t\t\t\t\t\t\treturn [1,-2];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0&&target.hp>1){\n\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)<0&&!player.hasSkillTag('damageBonus')){\n\t\t\t\t\t\t\t\t\t\tif(card.name=='sha') return;\n\t\t\t\t\t\t\t\t\t\tvar sha=false;\n\t\t\t\t\t\t\t\t\t\tplayer._shibei_tmp=true;\n\t\t\t\t\t\t\t\t\t\tvar num=player.countCards('h',function(card){\n\t\t\t\t\t\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\t\t\t\t\t\tif(sha){\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsha=true;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn get.tag(card,'damage')&&player.canUse(card,target)&&get.effect(target,card,player,player)>0;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tdelete player._shibei_tmp;\n\t\t\t\t\t\t\t\t\t\tif(player.hasSkillTag('damage')){\n\t\t\t\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(num<2){\n\t\t\t\t\t\t\t\t\t\t\tvar enemies=player.getEnemies();\n\t\t\t\t\t\t\t\t\t\t\tif(enemies.length==1&&enemies[0]==target&&player.needsToDiscard()){\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，当你受到伤害后：若此伤害是你本回合第一次受到的伤害，则你回复1点体力；否则你失去1点体力。"},"qiangzhi":{"name":"强识","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countCards('h')>0;\n\t\t\t\t\t});\n\t\t\t\t},subfrequent: [\"draw\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('qiangzhi'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t\t}).set('ai',function(){\n\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('qiangzhi',target);\n\t\t\t\t\t\tplayer.choosePlayerCard(target,'h',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\tplayer.showCards(card);\n\t\t\t\t\tplayer.storage.qiangzhi_draw=get.type(card,'trick');\n\t\t\t\t\tgame.addVideo('storage',player,['qiangzhi_draw',player.storage.qiangzhi_draw]);\n\t\t\t\t\tplayer.addTempSkill('qiangzhi_draw','phaseUseEnd');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以展示一名其他角色的一张手牌。若如此做，当你于此阶段内使用与此牌类别相同的牌时，你可以摸一张牌。"},"xiantu":{"name":"献图","script":"{audio: \"xiantu1\",group: \"xiantu2\",trigger: {global: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player;\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<5) return false;\n\t\t\t\t\tif(player.maxHp-player.hp>=2) return false;\n\t\t\t\t\tif(player.hp==1) return false;\n\t\t\t\t\tif(player.hp==2&&player.countCards('h')<2) return false;\n\t\t\t\t\tif(event.player.countCards('h')>=event.player.hp) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseCard(2,'he',true,'交给'+get.translation(trigger.player)+'两张牌').set('ai',function(card){\n\t\t\t\t\t\tif(ui.selected.cards.length&&card.name==ui.selected.cards[0].name) return -1;\n\t\t\t\t\t\tif(get.tag(card,'damage')) return 1;\n\t\t\t\t\t\tif(get.type(card)=='equip') return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\ttrigger.player.gain(result.cards,player,'giveAuto');\n\t\t\t\t\ttrigger.player.addSkill('xiantu4');\n\t\t\t\t\ttrigger.player.storage.xiantu4.push(player);\n\t\t\t\t},ai: {threaten: \"1.1\",expose: \"0.3\",},}","info":"一名其他角色的出牌阶段开始时，你可以摸两张牌，然后交给其两张牌。若如此做，此阶段结束时，若该角色未于此阶段内杀死过角色，则你失去1点体力。"},"fenli":{"name":"奋励","script":"{audio: \"2\",group: [\"fenli_draw\",\"fenli_use\",\"fenli_discard\"],subfrequent: [\"discard\"],subSkill: {draw: {audio: \"fenli\",trigger: {player: \"phaseDrawBefore\",},prompt: \"是否发动【奋励】跳过摸牌阶段？\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.isMaxHandcard();\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\tif(player.getHistory('skipped').length>0) return false;\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)<0&&current.hp==1&&get.damageEffect(current,player,player)>0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t},sub: \"true\",},use: {audio: \"fenli\",trigger: {player: \"phaseUseBefore\",},prompt: \"是否发动【奋励】跳过出牌阶段？\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.isMaxHp();\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\tif(!player.needsToDiscard()||(player.countCards('e')&&player.isMaxEquip())) return true;\n\t\t\t\t\t\t\tif(player.getHistory('skipped').length>0) return false;\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)<0&&current.hp==1&&get.damageEffect(current,player,player)>0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t},sub: \"true\",},discard: {audio: \"fenli\",trigger: {player: \"phaseDiscardBefore\",},prompt: \"是否发动【奋励】跳过弃牌阶段？\",frequent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn player.isMaxEquip()&&player.countCards('e');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t},sub: \"true\",},},ai: {combo: \"pingkou\",},}","info":"若你的手牌数为全场最多，你可以跳过摸牌阶段；若你的体力值为全场最多，你可以跳过出牌阶段；若你的装备区里有牌且数量为全场最多，你可以跳过弃牌阶段。"},"pingkou":{"name":"平寇","script":"{audio: \"2\",trigger: {player: \"phaseEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('skipped').length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget([1,player.getHistory('skipped').length],get.prompt2('pingkou'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('pingkou',result.targets);\n\t\t\t\t\t\tevent.targets=result.targets.slice(0).sortBySeat();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets&&event.targets.length){\n\t\t\t\t\t\tevent.targets.shift().damage();\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {combo: \"fenli\",effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='lebu'||card.name=='bingliang') return 0.5;\n\t\t\t\t\t\t},},},}","info":"回合结束时，你可以对至多X名其他角色各造成1点伤害（X为你本回合跳过的阶段数）。"},"qiaoshi":{"name":"樵拾","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.countCards('h')==player.countCards('h')&&event.player.isAlive();\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>=0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\tgame.asyncDraw([trigger.player,player]);\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"其他角色的结束阶段开始时，若你的手牌数与其相等，则你可以与其各摸一张牌。"},"yanyu":{"name":"燕语","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0;\n\t\t\t\t},filterCard: {name: \"sha\",},prepare: function (cards,player){\n\t\t\t\t\tplayer.$throw(cards,1000);\n\t\t\t\t\tgame.log(player,'将',cards,'置入了弃牌堆');\n\t\t\t\t},discard: \"false\",loseTo: \"discardPile\",visible: \"true\",delay: \"0.5\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {basic: {order: \"1\",},result: {player: \"1\",},},group: \"yanyu2\",}","info":"出牌阶段，你可以重铸【杀】。出牌阶段结束时，若你于此阶段以此法重铸了至少两张【杀】，则你可以令一名男性角色摸两张牌。"},"duodao":{"name":"夺刀","script":"{trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0&&event.source&&\n\t\t\t\t\t\tevent.card&&event.card.name=='sha';\n\t\t\t\t},direct: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar prompt='弃置一张牌'\n\t\t\t\t\tif(trigger.source.getEquip(1)) prompt+=('，然后获得'+get.translation(trigger.source)+'装备区中的'+get.translation(trigger.source.getEquip(1)));\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt('duodao',trigger.source),prompt);\n\t\t\t\t\tnext.logSkill=['duodao',trigger.source];\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(!_status.event.getTrigger().source.getEquip(1)) return 0;\n\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.getTrigger().source)<=0){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&trigger.source.getEquip(1)){\n\t\t\t\t\t\tplayer.gain(trigger.source.getEquip(1),trigger.source,'give','bySelf');\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",},}","info":"当你受到【杀】造成的伤害后，你可以弃置一张牌，然后获得伤害来源装备区里的武器牌"},"anjian":{"name":"暗箭","script":"{audio: \"2\",trigger: {source: \"damageBegin1\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<=0;\n\t\t\t\t},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.getParent().name=='sha'&&!event.player.inRange(player);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},}","info":"锁定技，当你使用【杀】对目标角色造成伤害时，若你不在其攻击范围内，则此杀伤害+1。"},"xinzhongyong":{"name":"忠勇","script":"{trigger: {player: \"useCardAfter\",},audio: \"zhongyong\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.sha=trigger.cards.slice(0).filterInD();\n\t\t\t\t\tevent.shan=[];\n\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\tcurrent.getHistory('useCard',function(evt){\n\t\t\t\t\t\t\tif(evt.card.name=='shan'&&evt.getParent(3)==trigger) event.shan.addArray(evt.cards);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tevent.shan.filterInD('d');\n\t\t\t\t\tif(!event.sha.length&&!event.shan.length) event.finish();\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('zhongyong'),function(card,player,target){\n\t\t\t\t\t\treturn !_status.event.source.contains(target)&&target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('source',trigger.targets);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('xinzhongyong',target);\n\t\t\t\t\t\tif(event.sha.length&&event.shan.length){\n\t\t\t\t\t\t\tplayer.chooseControl().set('choiceList',[\n\t\t\t\t\t\t\t\t'将'+get.translation(event.sha)+'交给'+get.translation(target),\n\t\t\t\t\t\t\t\t'将'+get.translation(event.shan)+'交给'+get.translation(target),\n\t\t\t\t\t\t\t]).set('ai',function(){\n\t\t\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t\t\t}).set('choice',function(){\n\t\t\t\t\t\t\t\tif(get.color(event.sha)!='black') return 0;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}());\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event._result={index:event.sha.length?0:1};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar cards=result.index==0?event.sha:event.shan;\n\t\t\t\t\tevent.useSha=false;\n\t\t\t\t\ttarget.gain(cards,'gain2');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.color(cards[i])=='red'){\n\t\t\t\t\t\t\tevent.useSha=true;break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.useSha){\n\t\t\t\t\t\tevent.target.chooseToUse('是否使用一张杀？',{name:'sha'}).set('filterTarget',function(card,player,target){\n\t\t\t\t\t\t\treturn target!=_status.event.sourcex&&_status.event.sourcex.inRange(target)&&lib.filter.targetEnabled.apply(this,arguments);\n\t\t\t\t\t\t}).set('sourcex',player).set('addCount',false);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用的【杀】结算完毕后，你可以将此【杀】或目标角色使用的【闪】交给一名该角色以外的其他角色，以此法获得红色牌的角色可以对你攻击范围内的角色使用一张【杀】"},"longyin":{"name":"龙吟","script":"{audio: \"2\",shaRelated: \"true\",trigger: {global: \"useCard\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&player.countCards('he')>0&&event.player.isPhaseUsing();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar go=false;\n\t\t\t\t\tif(get.attitude(player,trigger.player)>0){\n\t\t\t\t\t\tif(get.color(trigger.card)=='red'){\n\t\t\t\t\t\t\tgo=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(trigger.addCount===false||!trigger.player.isPhaseUsing()) go=false;\n\t\t\t\t\t\telse if(!trigger.player.hasSkill('paoxiao')&&\n\t\t\t\t\t\t\t!trigger.player.hasSkill('tanlin3')&&\n\t\t\t\t\t\t\t!trigger.player.hasSkill('zhaxiang2')&&\n\t\t\t\t\t\t\t!trigger.player.hasSkill('fengnu')&&\n\t\t\t\t\t\t\t!trigger.player.getEquip('zhuge')){\n\t\t\t\t\t\t\tvar nh=trigger.player.countCards('h');\n\t\t\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\t\t\tgo=(player.countCards('h','sha')>0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nh>=4){\n\t\t\t\t\t\t\t\tgo=true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(player.countCards('h','sha')){\n\t\t\t\t\t\t\t\tif(nh==3){\n\t\t\t\t\t\t\t\t\tgo=Math.random()<0.8;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(nh==2){\n\t\t\t\t\t\t\t\t\tgo=Math.random()<0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nh>=3){\n\t\t\t\t\t\t\t\tif(nh==3){\n\t\t\t\t\t\t\t\t\tgo=Math.random()<0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(nh==2){\n\t\t\t\t\t\t\t\t\tgo=Math.random()<0.2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('longyin'),'弃置一张牌'+(get.color(trigger.card)=='red'?'并摸一张牌':'')+'，令'+get.translation(trigger.player)+'本次使用的【杀】不计入使用次数','he');\n\t\t\t\t\tnext.logSkill=['longyin',trigger.player];\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.go){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('go',go);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.addCount!==false){\n\t\t\t\t\t\t\ttrigger.addCount=false;\n\t\t\t\t\t\t\ttrigger.player.getStat().card.sha--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.color(trigger.card)=='red'){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// player.logSkill('longyin',trigger.player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"当一名角色于其出牌阶段使用【杀】时，你可弃置一张牌令此【杀】不计入出牌阶段使用次数，若此【杀】为红色，你摸一张牌。"},"dangxian":{"name":"当先","script":"{trigger: {player: \"phaseBegin\",},forced: \"true\",audio: \"2\",audioname: [\"guansuo\"],content: function (){\n\t\t\t\t\tvar next=player.phaseUse();\n\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\ttrigger.next.push(next);\n\t\t\t\t},}","info":"锁定技，准备阶段，你执行一个额外的出牌阶段"},"fuli":{"name":"伏枥","script":"{skillAnimation: \"true\",animationColor: \"soil\",audio: \"2\",unique: \"true\",limited: \"true\",enable: \"chooseToUse\",init: function (player){\n\t\t\t\t\tplayer.storage.fuli=false;\n\t\t\t\t},mark: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.type!='dying') return false;\n\t\t\t\t\tif(player!=event.dying) return false;\n\t\t\t\t\tif(player.storage.fuli) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('fuli');\n\t\t\t\t\tplayer.recover(game.countGroup()-player.hp);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\tplayer.storage.fuli=true;\n\t\t\t\t},ai: {save: \"true\",skillTagFilter: function (player,arg,target){\n\t\t\t\t\t\treturn player==target&&player.storage.fuli!=true;\n\t\t\t\t\t},result: {player: \"10\",},threaten: function (player,target){\n\t\t\t\t\t\tif(!target.storage.fuli) return 0.9;\n\t\t\t\t\t},},intro: {content: \"limited\",},}","info":"限定技，当你处于濒死状态时，你可以将体力回复至与场上势力数相同，然后翻面"},"lihuo":{"name":"疠火","script":"{trigger: {player: \"useCard1\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},audio: \"2\",audioname: [\"re_chengpu\"],check: function (event,player){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.card.nature='fire';\n\t\t\t\t\tvar next=game.createEvent('lihuo_clear');\n\t\t\t\t\tnext.player=player;\n\t\t\t\t\tnext.card=trigger.card;\n\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\tnext.forceDie=true;\n\t\t\t\t\ttrigger.after.push(next);\n\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\tif(player.isAlive()&&player.getHistory('sourceDamage',function(evt){\n\t\t\t\t\t\t\treturn evt.getParent(2)==event.parent;\n\t\t\t\t\t\t}).length>0) player.loseHp();\n\t\t\t\t\t\tdelete card.nature;\n\t\t\t\t\t});\n\t\t\t\t},group: \"lihuo2\",}","info":"当你声明使用普通【杀】时，你可以将此【杀】改为火【杀】。若以此法使用的【杀】造成了伤害，则此【杀】结算后你失去1点体力；你使用火【杀】选择目标后，可以额外指定一个目标。"},"chunlao":{"name":"醇醪","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",audioname: [\"xin_chengpu\"],filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0&&(_status.connectMode||player.countCards('h','sha')>0)&&!player.storage.chunlao.length;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.chunlao) player.storage.chunlao=[];\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard([1,Math.max(1,player.countCards('h','sha'))],get.prompt('chunlao'),{name:'sha'}).set('ai',function(){\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('chunlao');\n\t\t\t\t\t\tplayer.storage.chunlao=player.storage.chunlao.concat(result.cards);\n\t\t\t\t\t\tplayer.syncStorage('chunlao');\n\t\t\t\t\t\tplayer.markSkill('chunlao');\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.$give(result.cards,player,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return;\n\t\t\t\t\t\t\tif(card.name=='sha'&&!player.needsToDiscard()&&\n\t\t\t\t\t\t\t\t!player.storage.chunlao.length&&target.hp>1){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: \"1.4\",},group: \"chunlao2\",}","info":"结束阶段开始时，若你没有“醇”，你可以将至少一张【杀】置于你的武将牌上，称为“醇”。当一名角色处于濒死状态时，你可以移去一张“醇”，视为该角色使用一张【酒】"},"xinxianzhen":{"name":"陷阵","script":"{audio: \"xianzhen\",inherit: \"xianzhen\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage[event.name]=target;\n\t\t\t\t\t\tplayer.addTempSkill(event.name+2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.addTempSkill(event.name+3);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: function (name,player){\n\t\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\t\tif(player.countCards('h','sha')==0){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(cards[i].name!='sha'&&cards[i].number>11&&get.value(cards[i])<7){\n\t\t\t\t\t\t\t\treturn 9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn get.order({name:'sha'})-1;\n\t\t\t\t\t},result: {player: function (player){\n\t\t\t\t\t\t\tif(player.countCards('h','sha')>0) return 0;\n\t\t\t\t\t\t\tvar num=player.countCards('h');\n\t\t\t\t\t\t\tif(num>player.hp) return 0;\n\t\t\t\t\t\t\tif(num==1) return -2;\n\t\t\t\t\t\t\tif(num==2) return -1;\n\t\t\t\t\t\t\treturn -0.7;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\t\tif(num==1) return -1;\n\t\t\t\t\t\t\tif(num==2) return -0.7;\n\t\t\t\t\t\t\treturn -0.5\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"出牌阶段限一次，你可以与一名角色拼点。若你赢，你获得以下效果直到回合结束：无视该角色的防具且对其使用牌没有次数和距离限制，且当你使用【杀】或普通锦囊牌指定其他角色为唯一目标时可以令该角色也成为此牌的目标。若你没赢，你不能使用【杀】且你的【杀】不计入手牌上限直到回合结束。"},"jinjiu":{"name":"禁酒","script":"{mod: {cardname: function (card,player){\n\t\t\t\t\t\tif(card.name=='jiu') return 'sha';\n\t\t\t\t\t},},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('h','jiu')) return false;\n\t\t\t\t\t},respondSha: \"true\",},audio: \"2\",trigger: {player: [\"useCard1\",\"respond\"],},firstDo: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&!event.skill&&\n\t\t\t\t\tevent.cards.length==1&&event.cards[0].name=='jiu';\n\t\t\t\t},content: function (){},}","info":"锁定技，你的【酒】均视为【杀】。"},"xinsidi":{"name":"司敌","script":"{audio: \"sidi\",trigger: {global: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.player==player||event.player.isDead()) return false;\n\t\t\t\t\treturn player.countCards('e')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar goon=true;\n\t\t\t\t\tif(get.attitude(player,trigger.player)>=-0.8) goon=false;\n\t\t\t\t\telse if(trigger.player.countCards('h')<=3) goon=false;\n\t\t\t\t\telse if(player.countCards('h','shan')==0) goon=false;\n\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\tvar color=[];\n\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\tcolor.add(get.color(es[i]));\n\t\t\t\t\t}\n\t\t\t\t\tif(color.length==2) color='all';\n\t\t\t\t\telse color=color[0];\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt2('xinsidi',trigger.player),'he',function(card){\n\t\t\t\t\t\tif(get.type(card)=='basic') return false;\n\t\t\t\t\t\tif(_status.event.color=='all') return true;\n\t\t\t\t\t\treturn get.color(card)==_status.event.color;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.goon) return 6-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('goon',goon).set('color',color).set('logSkill',['xinsidi',trigger.player]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.addSkill('xinsidi2');\n\t\t\t\t\t\ttrigger.player.storage.xinsidi2=get.color(result.cards[0],result.cards[0].original=='h'?player:false);\n\t\t\t\t\t\ttrigger.player.storage.xinsidi4=player;\n\t\t\t\t\t\ttrigger.player.syncStorage('xinsidi2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"其他角色出牌阶段开始时，你可以弃置一张与你装备区里的牌颜色相同的非基本牌，然后该角色于此阶段内不能使用和打出与此牌颜色相同的牌。此阶段结束时，若其此阶段没有使用【杀】，视为你对其使用了【杀】"},"benxi":{"name":"奔袭","script":"{audio: \"2\",trigger: {player: \"useCard2\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isPhaseUsing();\n\t\t\t\t},content: function (){},mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\tif(_status.currentPhase==from){\n\t\t\t\t\t\t\treturn distance-from.countUsed();\n\t\t\t\t\t\t}\n\t\t\t\t\t},selectTarget: function (card,player,range){\n\t\t\t\t\t\tif(_status.currentPhase==player){\n\t\t\t\t\t\t\tif(card.name=='sha'&&range[1]!=-1){\n\t\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn get.distance(player,current)>1;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\trange[1]++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},ai: {unequip: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn get.distance(player,current)>1;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，你的回合内，你每使用一次牌后，你的进攻距离+1直到回合结束；你的回合内，若你与所有角色的距离均为1，你无视其他角色的防具，且你使用的【杀】可额外指定一个目标"},"shenduan":{"name":"慎断","script":"{trigger: {player: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.type!='discard') return;\n\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\tif(get.color(event.cards2[i],event.hs.contains(event.cards2[i])?event.player:false)=='black'&&get.type(event.cards2[i])=='basic'&&\n\t\t\t\t\t\t\tget.position(event.cards2[i],event.hs.contains(event.cards2[i])?event.player:false)=='d'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},audio: \"2\",direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar cards=[];\n\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\tif(get.color(trigger.cards2[i],trigger.hs.contains(trigger.cards2[i])?trigger.player:false)=='black'&&get.type(trigger.cards2[i],trigger.hs.contains(trigger.cards2[i])?trigger.player:false)=='basic'&&\n\t\t\t\t\t\t\tget.position(trigger.cards2[i])=='d'){\n\t\t\t\t\t\t\tcards.push(trigger.cards2[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!cards.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tplayer.chooseTarget(get.prompt('shenduan'),'将'+get.translation(event.cards)+(event.cards.length>1?'中的一张牌':'')+'当做【兵粮寸断】对一名其他角色使用',function(card,player,target){\n\t\t\t\t\t\t\tvar cs=_status.event.cards;\n\t\t\t\t\t\t\tfor(var i=0;i<cs.length;i++){\n\t\t\t\t\t\t\t\tif(player.canUse({name:'bingliang',cards:[cs[i]]},target,false)) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.effect(target,{name:'bingliang'},player,player);\n\t\t\t\t\t\t}).set('cards',cards);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tevent.current=result.targets[0];\n\t\t\t\t\t\tif(event.cards.length==1){\n\t\t\t\t\t\t\tevent.directCard=event.cards[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdelete event.directCard;\n\t\t\t\t\t\t\tplayer.chooseCardButton('选择一张牌当作兵断寸断使用',event.cards,true).set('filterButton',function(button){\n\t\t\t\t\t\t\t\treturn player.canUse({name:'bingliang',cards:[button.link]},_status.event.target,false);\n\t\t\t\t\t\t\t}).set('target',event.current);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar card;\n\t\t\t\t\tif(event.directCard){\n\t\t\t\t\t\tcard=event.directCard;\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.links&&result.links.length&&\n\t\t\t\t\t\tevent.cards.contains(result.links[0])){\n\t\t\t\t\t\tcard=result.links[0]\n\t\t\t\t\t}\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tevent.cards.remove(card);\n\t\t\t\t\t\tplayer.line(event.current);\n\t\t\t\t\t\tplayer.useCard({name:'bingliang'},event.current,[card],'shenduan').animate=false;\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你的黑色基本牌因弃置而进入弃牌堆后，你可以将其当做【兵粮寸断】使用（无距离限制）。"},"yonglve":{"name":"勇略","script":"{trigger: {global: \"phaseJudgeBegin\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.countCards('j')>0&&player.inRange(event.player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar att=get.attitude(player,trigger.player);\n\t\t\t\t\tvar nh=trigger.player.countCards('h');\n\t\t\t\t\tvar eff=get.effect(trigger.player,{name:'sha',isCard:true},player,player);\n\t\t\t\t\tif(!player.canUse({name:'sha',isCard:true},trigger.player)) eff=0;\n\t\t\t\t\tplayer.discardPlayerCard(get.prompt('yonglve',trigger.player),trigger.player,'j').set('ai',function(button){\n\t\t\t\t\t\tvar name=button.link.viewAs||button.link.name;\n\t\t\t\t\t\tvar att=_status.event.att;\n\t\t\t\t\t\tvar nh=_status.event.nh;\n\t\t\t\t\t\tvar eff=_status.event.eff;\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tif(att>0&&eff>=0) return 1;\n\t\t\t\t\t\tif(att>=0&&eff>0) return 1;\n\t\t\t\t\t\tif(att>0&&(trigger.player.hp>=3||trigger.player.getEquip('bagua')||trigger.player.countCards('h','shan'))){\n\t\t\t\t\t\t\tif(name=='lebu'&&nh>trigger.player.hp) return 1;\n\t\t\t\t\t\t\tif(name=='bingliang'&&nh<trigger.player.hp) return 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('att',att).set('nh',nh).set('eff',eff).set('logSkill',['yonglve',trigger.player]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(player.canUse({name:'sha',isCard:true},trigger.player)){\n\t\t\t\t\t\t\tevent.related=player.useCard({name:'sha',isCard:true},trigger.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!event.related||!game.hasPlayer2(function(current){\n\t\t\t\t\t\treturn current.getHistory('damage',function(evt){\n\t\t\t\t\t\t\treturn evt.getParent(2)==event.related;\n\t\t\t\t\t\t}).length>0;\n\t\t\t\t\t})){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"一名其他角色的判定阶段开始时，若其在你攻击范围内，则你可以弃置其判定区里的一张牌，视为对该角色使用一张【杀】。若此【杀】未造成伤害，你摸一张牌。"},"huituo":{"name":"恢拓","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('huituo')).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\treturn get.recoverEffect(target,player,player)+1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('huituo',result.targets);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\ttarget.judge(function(card){\n\t\t\t\t\t\t\tif(target.hp==target.maxHp){\n\t\t\t\t\t\t\t\tif(get.color(card)=='red') return -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.color(card)=='red') return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.color){\n\t\t\t\t\t\tif(result.color=='red'){\n\t\t\t\t\t\t\tif(event.target.hp<event.target.maxHp) event.target.recover();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.target.draw(trigger.num);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",},}","info":"当你受到伤害后，你可以令一名角色进行一次判定，若结果为红色，该角色回复1点体力；若结果为黑色，该角色摸X张牌（X为此次伤害的伤害点数）"},"mingjian":{"name":"明鉴","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterCard: \"true\",selectCard: \"-1\",discard: \"false\",lose: \"false\",delay: \"false\",content: function (){\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\ttarget.addTempSkill('mingjian2',{player:'phaseAfter'});\n\t\t\t\t\ttarget.storage.mingjian2++;\n\t\t\t\t\ttarget.updateMarks('mingjian2');\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0;\n\t\t\t\t\t\t\tif(player.countCards('h')==player.countCards('h','du')) return -1;\n\t\t\t\t\t\t\tif(target.hasJudge('lebu')) return 0;\n\t\t\t\t\t\t\tif(get.attitude(player,target)>3){\n\t\t\t\t\t\t\t\tvar basis=get.threaten(target);\n\t\t\t\t\t\t\t\tif(player==get.zhu(player)&&player.hp<=2&&player.countCards('h','shan')&&!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn get.attitude(current,player)>3&&current.countCards('h','tao')>0;\n\t\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\t\tif(target.countCards('h')+player.countCards('h')>target.hp+2) return basis*0.8;\n\t\t\t\t\t\t\t\treturn basis;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以将所有手牌交给一名其他角色，若如此做，该角色于其下个回合的手牌上限+1，且使用【杀】的次数上限+1"},"xingshuai":{"name":"兴衰","script":"{skillAnimation: \"true\",animationColor: \"thunder\",audio: \"2\",trigger: {player: \"dying\",},zhuSkill: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.storage.xingshuai) return false;\n\t\t\t\t\tif(player.hp>0) return false;\n\t\t\t\t\tif(!player.hasZhuSkill('xingshuai')) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='wei';\n\t\t\t\t\t});\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(player.hasZhuSkill('xingshuai')){\n\t\t\t\t\t\tplayer.markSkill('xingshuai');\n\t\t\t\t\t\tplayer.storage.xingshuai=false;\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"limited\",},unique: \"true\",limited: \"true\",mark: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.xingshuai=true;\n\t\t\t\t\tplayer.awakenSkill('xingshuai');\n\t\t\t\t\tvar targets=game.filterPlayer();\n\t\t\t\t\ttargets.remove(player);\n\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\tevent.damages=[];\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar current=event.targets.shift();\n\t\t\t\t\t\tif(current.group=='wei'){\n\t\t\t\t\t\t\tcurrent.chooseBool('是否令'+get.translation(player)+'回复一点体力？').set('ai',function(){\n\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player,_status.event.target)>2;\n\t\t\t\t\t\t\t}).set('target',player);\n\t\t\t\t\t\t\tevent.current=current;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(3);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.damages.push(event.current);\n\t\t\t\t\t\tevent.current.line(player,'green');\n\t\t\t\t\t\tgame.log(event.current,'令',player,'回复一点体力');\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.damages.length){\n\t\t\t\t\t\tvar next=game.createEvent('xingshuaI_next');\n\t\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\t\ttrigger.after.push(next);\n\t\t\t\t\t\tnext.targets=event.damages;\n\t\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\t\ttargets.shift().damage();\n\t\t\t\t\t\t\tif(targets.length) event.redo();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},}","info":"主公技，限定技，当你进入濒死状态时，其他魏势力角色可依次令你回复1点体力，然后这些角色依次受到1点伤害。"},"qianju":{"name":"千驹","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-(from.getDamagedHp());\n\t\t\t\t\t},},}","info":"锁定技，若你已受伤，你计算与其他角色的距离时-X（X为你已损失的体力值）。"},"qingxi":{"name":"倾袭","script":"{audio: \"2\",trigger: {source: \"damageBegin1\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.getParent().name=='sha'&&player.getEquip(1);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=1;\n\t\t\t\t\tvar info=get.info(player.getEquip(1));\n\t\t\t\t\tif(info&&info.distance&&info.distance.attackFrom){\n\t\t\t\t\t\tnum-=info.distance.attackFrom;\n\t\t\t\t\t}\n\t\t\t\t\tif(trigger.player.countCards('h')<num){\n\t\t\t\t\t\tevent.directfalse=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.chooseToDiscard(num,'弃置'+get.cnNumber(num)+'张手牌，或令杀的伤害+1').set('ai',function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player.hp==1){\n\t\t\t\t\t\t\t\tif(get.type(card)=='basic'){\n\t\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(num>2){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!event.directfalse&&result.bool){\n\t\t\t\t\t\tvar e1=player.getEquip(1);\n\t\t\t\t\t\tif(e1){\n\t\t\t\t\t\t\tplayer.discard(e1,'notBySelf');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用【杀】对目标角色造成伤害时，若你的装备区里有武器牌，你可以令其选择一项：1、弃置X张手牌（X为此武器牌的攻击范围），若如此做，其弃置你的此武器牌；2、令伤害值+1"},"huomo":{"name":"活墨","script":"{audio: \"2\",group: [\"huomo_count\",\"huomo_count2\",\"huomo_use\"],}","info":"当你需要使用一张本回合内未使用过的基本牌时，你可以将一张黑色非基本牌置于牌堆顶，然后视为你使用了此基本牌"},"zuoding":{"name":"佐定","script":"{trigger: {global: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\tif(event.getParent().triggeredTargets3.length>1) return false;\n\t\t\t\t\treturn get.suit(event.card)=='spade'&&\n\t\t\t\t\t\t_status.currentPhase==event.player&&event.targets&&event.targets.length&&\n\t\t\t\t\t\tevent.player!=player&&game.countPlayer2(function(current){\n\t\t\t\t\t\t\treturn current.getHistory('damage').length>0;\n\t\t\t\t\t\t})==0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('zuoding'),'令一名目标角色摸一张牌',function(card,player,target){\n\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('targets',trigger.targets);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('zuoding',result.targets);\n\t\t\t\t\t\tresult.targets[0].draw();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"当其他角色于其回合内使用♠牌指定目标后，若本回合内没有角色受到过伤害，则你可以令其中一名目标角色摸一张牌"},"zhanjue":{"name":"战绝","script":"{audio: \"2\",enable: \"phaseUse\",filterCard: \"true\",selectCard: \"-1\",filter: function (event,player){\n\t\t\t\t\tif(player.getStat().skill.zhanjue_draw&&player.getStat().skill.zhanjue_draw>=2) return false;\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tif(!hs.length) return false;\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tvar mod2=game.checkMod(hs[i],player,'unchanged','cardEnabled2',player);\n\t\t\t\t\tif(mod2===false) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},viewAs: {name: \"juedou\",},group: [\"zhanjue4\"],ai: {damage: \"true\",order: \"1\",effect: {player: function (card,player,target){\n\t\t\t\t\t\t\tif(_status.event.skill=='zhanjue'){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t},true)) return;\n\t\t\t\t\t\t\t\tif(player.countCards('h')>=3||target.countCards('h')>=3) return 'zeroplayertarget';\n\t\t\t\t\t\t\t\tif(player.countCards('h','tao')) return 'zeroplayertarget';\n\t\t\t\t\t\t\t\tif(target.countCards('h','sha')>1) return 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},wuxie: function (target,card,player,viewer){\n\t\t\t\t\t\tif(player==game.me&&get.attitude(viewer,player)>0){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},basic: {order: \"5\",useful: \"1\",value: \"5.5\",},result: {target: \"-1.5\",player: function (player,target,card){\n\t\t\t\t\t\t\tif(player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,target)>0&&get.attitude(player,target)>0&&get.attitude(target,player)>0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar hs1=target.getCards('h','sha');\n\t\t\t\t\t\t\tvar hs2=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(hs1.length>hs2.length+1){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar hsx=target.getCards('h');\n\t\t\t\t\t\t\tif(hsx.length>2&&hs2.length==0&&hsx[0].number<6){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hsx.length>3&&hs2.length==0){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hs1.length>hs2.length&&(!hs2.length||hs1[0].number>hs2[0].number)){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},tag: {respond: \"2\",respondSha: \"2\",damage: \"1\",},},}","info":"出牌阶段，你可以将所有手牌当作【决斗】使用。此【决斗】结算后，你与以此法受到伤害的角色各摸一张牌。若你在同一阶段内以此法摸了两张或更多的牌，则此技能失效直到回合结束"},"qinwang":{"name":"勤王","script":"{audio: \"qinwang1\",unique: \"true\",group: [\"qinwang1\"],zhuSkill: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('qinwang')||!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='shu';\n\t\t\t\t\t})||!player.countCards('he')) return false;\n\t\t\t\t\treturn !event.jijiang&&(event.type!='phase'||!player.hasSkill('jijiang3'));\n\t\t\t\t},enable: [\"chooseToUse\",\"chooseToRespond\"],viewAs: {name: \"sha\",cards: [],suit: \"none\",number: {},isCard: \"true\",},filterCard: function (card,player,event){\n\t\t\t\tevent=event||_status.event;\n\t\t\t\tif(typeof event!='string') event=event.getParent().name;\n\t\t\t\tvar mod=game.checkMod(card,player,event,'unchanged','cardDiscardable',player);\n\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\treturn true;\n\t\t\t},position: \"he\",check: function (card){\n\t\t\t\t\tvar player=_status.event.player,players=game.filterPlayer();\n\t\t\t\t\tif(player.hasSkill('qinwang_ai')) return false;\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tvar nh=players[i].countCards('h');\n\t\t\t\t\t\tif(players[i]!=player&&players[i].group=='shu'&&get.attitude(players[i],player)>2&&(nh>=3&&players[i].countCards('h','sha'))){\n\t\t\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},ai: {order: function (){\n\t\t\t\t\t\treturn get.order({name:'sha'})-0.3;\n\t\t\t\t\t},respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.hasZhuSkill('qinwang')||!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn current!=player&&current.group=='shu';\n\t\t\t\t\t\t})||!player.countCards('he')) return false;\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"主公技，当你需要使用或打出一张【杀】时，你可以弃置一张牌，然后视为你发动了〖激将〗。若有角色响应，则该角色打出【杀】时摸一张牌。"},"wurong":{"name":"怃戎","script":"{enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('h')>0&&target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(target.countCards('h')==0||player.countCards('h')==0){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar sendback=function(){\n\t\t\t\t\t\tif(_status.event!=event){\n\t\t\t\t\t\t\treturn function(){\n\t\t\t\t\t\t\t\tevent.resultOL=_status.event.resultOL;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tif(player.isOnline()){\n\t\t\t\t\t\tplayer.wait(sendback);\n\t\t\t\t\t\tevent.ol=true;\n\t\t\t\t\t\tplayer.send(function(){\n\t\t\t\t\t\t\tgame.me.chooseCard(true).set('glow_result',true).ai=function(){\n\t\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.localPlayer=true;\n\t\t\t\t\t\tplayer.chooseCard(true).set('glow_result',true).ai=function(){\n\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif(target.isOnline()){\n\t\t\t\t\t\ttarget.wait(sendback);\n\t\t\t\t\t\tevent.ol=true;\n\t\t\t\t\t\ttarget.send(function(){\n\t\t\t\t\t\t\tvar rand=Math.random()<0.4;\n\t\t\t\t\t\t\tgame.me.chooseCard(true).set('glow_result',true).ai=function(card){\n\t\t\t\t\t\t\t\tif(rand) return card.name=='shan'?1:0;\n\t\t\t\t\t\t\t\treturn card.name=='shan'?0:1;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.localTarget=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.localPlayer){\n\t\t\t\t\t\tevent.card1=result.cards[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(event.localTarget){\n\t\t\t\t\t\tvar rand=Math.random()<0.4;\n\t\t\t\t\t\ttarget.chooseCard(true).set('glow_result',true).ai=function(card){\n\t\t\t\t\t\t\tif(rand) return card.name=='shan'?1:0;\n\t\t\t\t\t\t\treturn card.name=='shan'?0:1;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.localTarget){\n\t\t\t\t\t\tevent.card2=result.cards[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(!event.resultOL&&event.ol){\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\ttry{\n\t\t\t\t\t\tif(!event.card1) event.card1=event.resultOL[player.playerid].cards[0];\n\t\t\t\t\t\tif(!event.card2) event.card2=event.resultOL[target.playerid].cards[0];\n\t\t\t\t\t\tif(!event.card1||!event.card2){\n\t\t\t\t\t\t\tthrow('err');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch(e){\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.card2.number>=10||event.card2.number<=4){\n\t\t\t\t\t\tif(target.countCards('h')>2){\n\t\t\t\t\t\t\tevent.addToAI=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgame.broadcastAll(function(card1,card2){\n\t\t\t\t\t\tcard1.classList.remove('glow');\n\t\t\t\t\t\tcard2.classList.remove('glow');\n\t\t\t\t\t},event.card1,event.card2);\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tgame.broadcastAll(function(){\n\t\t\t\t\t\tui.arena.classList.add('thrownhighlight');\n\t\t\t\t\t});\n\t\t\t\t\tgame.addVideo('thrownhighlight1');\n\t\t\t\t\tplayer.$compare(event.card1,target,event.card2);\n\t\t\t\t\tgame.delay(4);\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\tgame.log(player,'展示了',event.card1);\n\t\t\t\t\tgame.log(target,'展示了',event.card2);\n\t\t\t\t\tvar name1=get.name(event.card1);\n\t\t\t\t\tvar name2=get.name(event.card2);\n\t\t\t\t\tif(name1=='sha'&&name2!='shan'){\n\t\t\t\t\t\tplayer.discard(event.card1).set('animate',false);\n\t\t\t\t\t\ttarget.$gain2(event.card2);\n\t\t\t\t\t\tvar clone=event.card1.clone;\n\t\t\t\t\t\tif(clone){\n\t\t\t\t\t\t\tclone.style.transition='all 0.5s';\n\t\t\t\t\t\t\tclone.style.transform='scale(1.2)';\n\t\t\t\t\t\t\tclone.delete();\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\tvar clone=card.clone;\n\t\t\t\t\t\t\tif(clone){\n\t\t\t\t\t\t\t\tclone.style.transition='all 0.5s';\n\t\t\t\t\t\t\t\tclone.style.transform='scale(1.2)';\n\t\t\t\t\t\t\t\tclone.delete();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},event.card1);\n\t\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t\t}\n\t\t\t\t\telse if(name1!='sha'&&name2=='shan'){\n\t\t\t\t\t\tplayer.discard(event.card1).set('animate',false);\n\t\t\t\t\t\ttarget.$gain2(event.card2);\n\t\t\t\t\t\tvar clone=event.card1.clone;\n\t\t\t\t\t\tif(clone){\n\t\t\t\t\t\t\tclone.style.transition='all 0.5s';\n\t\t\t\t\t\t\tclone.style.transform='scale(1.2)';\n\t\t\t\t\t\t\tclone.delete();\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\tvar clone=card.clone;\n\t\t\t\t\t\t\tif(clone){\n\t\t\t\t\t\t\t\tclone.style.transition='all 0.5s';\n\t\t\t\t\t\t\t\tclone.style.transform='scale(1.2)';\n\t\t\t\t\t\t\t\tclone.delete();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},event.card1);\n\t\t\t\t\t\tplayer.gainPlayerCard(target,true,'he');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.$gain2(event.card1);\n\t\t\t\t\t\ttarget.$gain2(event.card2);\n\t\t\t\t\t}\n\t\t\t\t\tgame.broadcastAll(function(){\n\t\t\t\t\t\tui.arena.classList.remove('thrownhighlight');\n\t\t\t\t\t});\n\t\t\t\t\tgame.addVideo('thrownhighlight2');\n\t\t\t\t},ai: {order: \"6\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以令一名其他角色与你同时展示一张手牌：若你展示的是【杀】且该角色展示的不是【闪】，则你弃置此【杀】并对其造成1点伤害；若你展示的不是【杀】且该角色展示的是【闪】，则你弃置你展示的牌并获得其一张牌"},"shizhi":{"name":"矢志","script":"{mod: {cardname: function (card,player,name){\n\t\t\t\t\t\tif(card.name=='shan'&&player.hp==1) return 'sha';\n\t\t\t\t\t},},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('h','shan')) return false;\n\t\t\t\t\t\tif(player.hp!=1) return false;\n\t\t\t\t\t},respondSha: \"true\",},audio: \"2\",trigger: {player: [\"useCard1\",\"respond\"],},firstDo: \"true\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&!event.skill&&\n\t\t\t\t\tevent.cards.length==1&&event.cards[0].name=='shan';\n\t\t\t\t},content: function (){},}","info":"锁定技，当你的体力值为1时，你的【闪】均视为【杀】"},"yanzhu":{"name":"宴诛","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('he')>0&&target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(target.countCards('e')){\n\t\t\t\t\t\ttarget.chooseBool('是否将装备区内的所有牌交给'+get.translation(player)+'？').set('ai',function(){\n\t\t\t\t\t\t\tif(_status.event.player.countCards('e')>=3) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.chooseToDiscard(true,'he');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\tplayer.gain(es,target,'give');\n\t\t\t\t\t\tplayer.removeSkill('yanzhu');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.chooseToDiscard(true,'he');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"6\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar ne=target.countCards('e');\n\t\t\t\t\t\t\tif(!ne) return -2;\n\t\t\t\t\t\t\tif(ne>=2) return -ne;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以令一名有牌的其他角色选择一项：令你获得其装备区里所有的牌，然后你失去技能〖宴诛〗；或弃置一张牌"},"xingxue":{"name":"兴学","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=player.hp;\n\t\t\t\t\tif(!player.hasSkill('yanzhu')){\n\t\t\t\t\t\tnum=player.maxHp;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseTarget([1,num],get.prompt2('xingxue')).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.countCards('he')) return att;\n\t\t\t\t\t\treturn att/10;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xingxue',result.targets);\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar target=event.targets.shift();\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\tevent.current=target;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.current&&event.current.countCards('he')){\n\t\t\t\t\t\tevent.current.chooseCard('选择一张牌置于牌堆顶','he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result&&result.cards){\n\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t\tevent.current.lose(result.cards,ui.cardPile,'visible','insert');\n\t\t\t\t\t\tgame.broadcastAll(function(player){\n\t\t\t\t\t\t\tvar cardx=ui.create.card();\n\t\t\t\t\t\t\tcardx.classList.add('infohidden');\n\t\t\t\t\t\t\tcardx.classList.add('infoflip');\n\t\t\t\t\t\t\tplayer.$throw(cardx,1000,'nobroadcast');\n\t\t\t\t\t\t},event.current);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.card=null;\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.current==game.me) game.delay(0.5);\n\t\t\t\t\tevent.goto(2);\n\t\t\t\t},}","info":"结束阶段开始时，你可以令至多X名角色依次摸一张牌并将一张牌置于牌堆顶（X为你的体力值，若你已失去技能〖宴诛〗，则将X改为你的体力上限）。"},"zhaofu":{"name":"诏缚","script":"{unique: \"true\",global: \"zhaofu2\",zhuSkill: \"true\",}","info":"主公技，锁定技，你距离为1的角色视为在其他吴势力角色的攻击范围内。"},"xinanguo":{"name":"安国","script":"{audio: \"anguo\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\treturn player!=target;\n\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(target.isMinHandcard()){\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\tevent.h=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(target.isMinHp()&&target.isDamaged()){\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\tevent.hp=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar equip=get.cardPile(function(card){\n\t\t\t\t\t\treturn get.type(card)=='equip'&&target.hasUseTarget(card);\n\t\t\t\t\t});\n\t\t\t\t\tif(target.isMinEquip()&&equip){\n\t\t\t\t\t\ttarget.chooseUseTarget(equip,'nothrow','nopopup',true);\n\t\t\t\t\t\tevent.e=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\tif(!event.h&&player.isMinHandcard()){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(!event.hp&&player.isMinHp()&&player.isDamaged()){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(!event.e&&player.isMinEquip()){\n\t\t\t\t\t\tvar equip=get.cardPile(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='equip'&&player.hasUseTarget(card);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(equip) player.chooseUseTarget(equip,'nothrow','nopopup',true);\n\t\t\t\t\t}\n\t\t\t\t\t'step 6'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},ai: {threaten: \"1.6\",order: \"9\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0){\n\t\t\t\t\t\t\t\tif(target.isMinHandcard()||target.isMinEquip()||target.isMinHp()) return -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\tif(player.isMinHandcard()||target.isMinHandcard()) num++;\n\t\t\t\t\t\t\tif(player.isMinEquip()||target.isMinEquip()) num++;\n\t\t\t\t\t\t\tif((player.isMinHp()&&player.isDamaged())||(target.isMinHp()&&target.isDamaged())) num+=2.1;\n\t\t\t\t\t\t\treturn num;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以选择一名其他角色，若其手牌数为全场最少，其摸一张牌；体力值为全场最低，回复1点体力；装备区内牌数为全场最少，随机使用一张装备牌。然后若该角色有未执行的效果且你满足条件，你执行之。"},"yaoming":{"name":"邀名","script":"{audio: \"2\",trigger: {player: \"damageEnd\",source: \"damageSource\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('yaoming2')) return false;\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h')!=nh;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('yaoming'),function(card,player,target){\n\t\t\t\t\t\treturn _status.event.nh!=target.countCards('h');\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.countCards('h')>_status.event.nh) return -att;\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t}).set('nh',nh);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yaoming',result.targets);\n\t\t\t\t\t\tplayer.addTempSkill('yaoming2');\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tif(target.countCards('h')<player.countCards('h')){\n\t\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttarget.discard(target.getCards('h').randomGet());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"每回合限一次，当你造成或受到伤害后，你可以选择一项：1. 弃置手牌数大于你的一名角色的一张手牌；2. 令手牌数小于你的一名角色摸一张牌"},"huaiyi":{"name":"怀异","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",delay: \"false\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{color:'red'})&&player.countCards('h',{color:'black'});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseControl('红色','黑色').set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h',{color:'red'})==1&&\n\t\t\t\t\t\tplayer.countCards('h',{color:'black'})>1) return '红色';\n\t\t\t\t\t\treturn '黑色';\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.control=result.control;\n\t\t\t\t\tvar cards;\n\t\t\t\t\tif(event.control=='红色'){\n\t\t\t\t\t\tcards=player.getCards('h',{color:'red'});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tcards=player.getCards('h',{color:'black'});\n\t\t\t\t\t}\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\tevent.num=cards.length;\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.chooseTarget('请选择至多'+get.cnNumber(event.num)+'名有牌的其他角色，获得这些角色的各一张牌。',[1,event.num],function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)+0.5;\n\t\t\t\t\t});\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool&&result.targets){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\tevent.gained=0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(player.isAlive()&&event.targets.length){\n\t\t\t\t\t\tplayer.gainPlayerCard(event.targets.shift(),'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.gained+=result.cards.length;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.targets.length) event.goto(5);\n\t\t\t\t\t'step 7'\n\t\t\t\t\tif(event.gained>1) player.loseHp();\n\t\t\t\t},ai: {order: function (item,player){\n\t\t\t\t\t\tif(player.countCards('h',{color:'red'})==1) return 10;\n\t\t\t\t\t\tif(player.countCards('h',{color:'black'})==1) return 10;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},result: {player: \"1\",},},}","info":"出牌阶段限一次，你可以展示所有手牌，若这些牌的颜色不全部相同，则你选择一种颜色并弃置该颜色的所有手牌，然后你可以获得至多X名角色的各一张牌（X为你以此法弃置的手牌数）。若你以此法获得的牌不少于两张，则你失去1点体力。"},"jigong":{"name":"急攻","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},check: function (event,player){\n\t\t\t\t\tvar nh=player.countCards('h')-player.countCards('h',{type:'equip'});\n\t\t\t\t\tif(nh<=1) return true;\n\t\t\t\t\tif(player.countCards('h','tao')) return false;\n\t\t\t\t\tif(nh<=2) return Math.random()<0.7;\n\t\t\t\t\tif(nh<=3) return Math.random()<0.4;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.addTempSkill('jigong2');\n\t\t\t\t},}","info":"出牌阶段开始时，你可以摸两张牌。若如此做，你本回合的手牌上限改为X（X为你此阶段造成的伤害点数之和）。"},"shifei":{"name":"饰非","script":"{audio: \"2\",enable: [\"chooseToRespond\",\"chooseToUse\"],filter: function (event,player){\n\t\t\t\t\tif(!_status.currentPhase||event.shifei) return false;\n\t\t\t\t\tif(!event.filterCard({name:'shan',isCard:true},player,event)) return false;\n\t\t\t\t\tif(event.name!='chooseToUse'&&!lib.filter.cardRespondable({name:'shan',isCard:true},player,event)) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},delay: \"false\",checkx: function (player){\n\t\t\t\t\tif(get.attitude(player,_status.currentPhase)>0) return true;\n\t\t\t\t\tvar nh=_status.currentPhase.countCards('h')+1;\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i].countCards('h')>nh){\n\t\t\t\t\t\t\tif(!player.countCards('h','shan')||get.attitude(player,players[i])<=0) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.line(_status.currentPhase,'green');\n\t\t\t\t\t_status.currentPhase.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(_status.currentPhase.isMaxHandcard(true)){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\tvar evt=event.getParent(2);\n\t\t\t\t\t\tevt.set('shifei',true);\n\t\t\t\t\t\tevt.goto(0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.isMaxHandcard();\n\t\t\t\t\t})\n\t\t\t\t\tif(targets.length==1){\n\t\t\t\t\t\tevent.onlytarget=targets[0];\n\t\t\t\t\t}\n\t\t\t\t\telse if(targets.length){\n\t\t\t\t\t\tplayer.chooseTarget('选择一名角色弃置其一张牌',true,function(card,player,target){\n\t\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t\t}).set('targets',targets);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar evt=event.getParent(2);\n\t\t\t\t\tvar target;\n\t\t\t\t\tif(event.onlytarget){\n\t\t\t\t\t\ttarget=event.onlytarget;\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.targets&&result.targets.length){\n\t\t\t\t\t\ttarget=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(target){\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tplayer.discardPlayerCard(target,'he',true);\n\t\t\t\t\t\tevt.result={bool:true,card:{name:'shan',isCard:true},cards:[]};\n\t\t\t\t\t\tevt.redo();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevt.set('shifei',true);\n\t\t\t\t\t\tevt.goto(0);\n\t\t\t\t\t}\n\t\t\t\t},ai: {respondShan: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')&&current<0){\n\t\t\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\t\tif(players[i].countCards('h')>nh) return 0.4;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},order: \"8\",result: {player: function (player){\n\t\t\t\t\t\t\treturn lib.skill.shifei.checkx(player)?1:0;\n\t\t\t\t\t\t},},},}","info":"当你需要使用或打出【闪】时，你可以令当前回合角色摸一张牌。然后若其手牌数不为全场最多，则你弃置全场手牌数最多（或之一）角色的一张牌，视为你使用或打出了一张【闪】。"},"xinjuece":{"name":"绝策","script":"{audio: \"juece\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(player){\n\t\t\t\t\t\treturn player.countCards('h')==0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('xinjuece'),'对一名没有手牌的其他角色造成1点伤害',function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')==0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xinjuece',result.targets);\n\t\t\t\t\t\tresult.targets[0].damage();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以对一名没有手牌的角色造成1点伤害。"},"xinmieji":{"name":"灭计","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h',{type:['trick','delay'],color:'black'});\n\t\t\t\t},filterCard: function (card){\n\t\t\t\t\treturn get.color(card)=='black'&&get.type(card,'trick')=='trick';\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},discard: \"false\",delay: \"false\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},loseTo: \"cardPile\",insert: \"true\",visible: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.chooseToDiscard('he',true).set('prompt','请弃置一张锦囊牌，或依次弃置两张非锦囊牌。');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif((!result.cards||get.type(result.cards[0],'trick',result.cards[0].original=='h'?target:false)!='trick')&&target.countCards('he',function(card){\n\t\t\t\t\t\treturn get.type(card,'trick')!='trick';\n\t\t\t\t\t})){\n\t\t\t\t\t\ttarget.chooseToDiscard('he',true,function(card){\n\t\t\t\t\t\t\treturn get.type(card,'trick')!='trick';\n\t\t\t\t\t\t}).set('prompt','请弃置第二张非锦囊牌');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"9\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以展示一张黑色锦囊牌并将之置于牌堆顶，然后令有手牌的一名其他角色选择一项：弃置一张锦囊牌；或依次弃置两张非锦囊牌。"},"xinfencheng":{"name":"焚城","script":"{skillAnimation: \"epic\",animationColor: \"gray\",audio: \"2\",audioname: [\"re_liru\"],enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.xinfencheng;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},unique: \"true\",limited: \"true\",selectTarget: \"-1\",multitarget: \"true\",multiline: \"true\",mark: \"true\",line: \"fire\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.storage.xinfencheng=true;\n\t\t\t\t\tplayer.awakenSkill('xinfencheng');\n\t\t\t\t\tevent.num=1;\n\t\t\t\t\tevent.targets=targets.slice(0);\n\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.targets.length){\n\t\t\t\t\t\tvar target=event.targets.shift();\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tvar res=get.damageEffect(target,player,target,'fire');\n\t\t\t\t\t\ttarget.chooseToDiscard('he','弃置至少'+get.cnNumber(event.num)+'张牌或受到2点火焰伤害',[num,Infinity]).set('ai',function(card){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>=_status.event.getParent().num) return -1;\n\t\t\t\t\t\t\tif(_status.event.player.hasSkillTag('nofire')) return -1;\n\t\t\t\t\t\t\tif(_status.event.res>=0) return 6-get.value(card);\n\t\t\t\t\t\t\tif(get.type(card)!='basic'){\n\t\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}).set('res',res);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tevent.target.damage(2,'fire');\n\t\t\t\t\t\tevent.num=1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.num=result.cards.length+1;\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(1);\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tvar num=0,eff=0,players=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player;\n\t\t\t\t\t\t\t}).sortBySeat(player);\n\t\t\t\t\t\t\tfor(var target of players){\n\t\t\t\t\t\t\t\tif(get.damageEffect(target,player,target,'fire')>=0){num=0;continue};\n\t\t\t\t\t\t\t\tvar shao=false;\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\tif(target.countCards('he',function(card){\n\t\t\t\t\t\t\t\t\tif(get.type(card)!='basic'){\n\t\t\t\t\t\t\t\t\t\treturn get.value(card)<10;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn get.value(card)<8;\n\t\t\t\t\t\t\t\t})<num) shao=true;\n\t\t\t\t\t\t\t\tif(shao){\n\t\t\t\t\t\t\t\t\teff-=4*(get.realAttitude||get.attitude)(player,target);\n\t\t\t\t\t\t\t\t\tnum=0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse eff-=num*(get.realAttitude||get.attitude)(player,target)/4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(eff<4) return 0;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},},init: function (player){\n\t\t\t\t\tplayer.storage.xinfencheng=false;\n\t\t\t\t},intro: {content: \"limited\",},}","info":"限定技。出牌阶段，你可以令所有其他角色各选择一项：弃置至少X张牌(X为该角色的上家以此法弃置牌的数量+1)；或受到你对其造成的2点火焰伤害。"},"jiaozhao":{"name":"矫诏","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},filterCard: \"true\",discard: \"false\",lose: \"false\",delay: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.storage.jiaozhao2){\n\t\t\t\t\t\tevent.target=player;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar targets=game.filterPlayer();\n\t\t\t\t\t\ttargets.remove(player);\n\t\t\t\t\t\ttargets.sort(function(a,b){\n\t\t\t\t\t\t\treturn Math.max(1,get.distance(player,a))-Math.max(1,get.distance(player,b));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar distance=Math.max(1,get.distance(player,targets[0]));\n\t\t\t\t\t\tfor(var i=1;i<targets.length;i++){\n\t\t\t\t\t\t\tif(Math.max(1,get.distance(player,targets[i]))>distance){\n\t\t\t\t\t\t\t\ttargets.splice(i);break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseTarget(true,function(card,player,target){\n\t\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t\t}).set('targets',targets);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!event.target){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t}\n\t\t\t\t\tif(!event.target){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\telse if(player.storage.jiaozhao1&&get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t}\n\t\t\t\t\tvar choice;\n\t\t\t\t\tif(get.attitude(event.target,player)<=0){\n\t\t\t\t\t\tchoice='shan';\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(!player.storage.jiaozhao1){\n\t\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\t\tif(nh>=5){\n\t\t\t\t\t\t\t\tchoice='jiu';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(nh<=2){\n\t\t\t\t\t\t\t\tchoice='sha';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tchoice=Math.random()<0.5?'sha':'jiu';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar recover=0,lose=1,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(!players[i].isOut()&&players[i]!=player){\n\t\t\t\t\t\t\t\t\tif(players[i].hp<players[i].maxHp){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\t\t\tif(players[i].hp<2){\n\t\t\t\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\t\t\t\trecover+=0.5;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\t\t\trecover++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\t\t\t\tif(players[i].hp<2){\n\t\t\t\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\t\t\t\trecover-=0.5;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\t\t\trecover--;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\t\t\tlose--;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if(get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\t\t\t\tlose++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(lose>recover&&lose>0){\n\t\t\t\t\t\t\t\tchoice=Math.random()<0.7?'nanman':'wanjian';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(lose<recover&&recover>0){\n\t\t\t\t\t\t\t\tchoice='taoyuan';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tchoice=Math.random()<0.5?'guohe':'shunshou';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.target.chooseButton(['矫诏',[list,'vcard']],true).set('ai',function(button){\n\t\t\t\t\t\treturn button.link[2]==_status.event.choice?1:0;\n\t\t\t\t\t}).set('choice',choice);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar chosen=result.links[0][2];\n\t\t\t\t\tvar nature=result.links[0][3];\n\t\t\t\t\tvar fakecard={name:chosen,suit:cards[0].suit,number:cards[0].number,nature:nature};\n\t\t\t\t\tevent.target.showCards(game.createCard(fakecard),get.translation(event.target)+'声明了'+get.translation(chosen));\n\t\t\t\t\tplayer.storage.jiaozhao=cards[0];\n\t\t\t\t\tplayer.storage.jiaozhao_card=fakecard;\n\t\t\t\t\tgame.broadcastAll(function(name){\n\t\t\t\t\t\tlib.skill.jiaozhao2.viewAs=fakecard;\n\t\t\t\t\t},fakecard);\n\t\t\t\t\tvar next=game.createEvent('jiaozhao3');\n\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\tevent.getParent(3).after.push(next);\n\t\t\t\t\tnext.player=player;\n\t\t\t\t\tnext.setContent(lib.skill.jiaozhao3.content);\n\t\t\t\t},ai: {order: \"9\",result: {player: \"1\",},},intro: {content: function (storage,player){\n\t\t\t\t\t\tif(player.storage.jiaozhao2){\n\t\t\t\t\t\t\treturn '出牌阶段限一次，你可以展示一张手牌，然后你声明一张基本牌或普通锦囊牌的牌名。在此出牌阶段内，你可以将此手牌当声明的牌使用且你不能被选择为目标';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn '出牌阶段限一次，你可以展示一张手牌，然后选择距离最近的一名其他角色，该角色声明一张基本牌或普通锦囊牌的牌名。在此出牌阶段内，你可以将此手牌当声明的牌使用且你不能被选择为目标';\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: [\"jiaozhao2\"],}","info":"出牌阶段限一次，你可以展示一张手牌，然后选择距离最近的一名其他角色，该角色声明一张基本牌的牌名。在此出牌阶段内，你可以将此手牌当声明的牌使用且你不能被选择为目标。"},"danxin":{"name":"殚心","script":"{trigger: {player: \"damageEnd\",},frequent: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.storage.jiaozhao1&&player.storage.jiaozhao2){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar list=['draw_card','更改描述'];\n\t\t\t\t\t\tvar prompt;\n\t\t\t\t\t\tif(player.storage.jiaozhao1){\n\t\t\t\t\t\t\tprompt='摸一张牌或更改矫诏的描述<br><br><div class=\"text\">更改描述：将“选择距离最近的一名其他角色，该角色”改为“你”';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tprompt='摸一张牌或更改矫诏的描述<br><br><div class=\"text\">更改描述：将“基本牌”改为“基本牌或普通锦囊牌”';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseControl(list,function(){\n\t\t\t\t\t\t\tif(!_status.event.player.hasSkill('jiaozhao')) return 'draw_card';\n\t\t\t\t\t\t\treturn '更改描述';\n\t\t\t\t\t\t}).set('prompt',prompt);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='draw_card'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgame.log(player,'更改了','【矫诏】','的描述');\n\t\t\t\t\t\tplayer.popup('更改描述');\n\t\t\t\t\t\tplayer.markSkill('jiaozhao');\n\t\t\t\t\t\tif(player.storage.jiaozhao1){\n\t\t\t\t\t\t\tplayer.storage.jiaozhao2=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.storage.jiaozhao1=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到伤害后，你可以摸一张牌，或对“矫诏”的描述依次执行下列一项修改：1.将“基本牌”改为“基本牌或普通锦囊牌”；2.将“选择距离最近的一名其他角色，该角色”改为“你”。"},"xinzhige":{"name":"止戈","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"zhige\",position: \"he\",selectTarget: \"2\",multitarget: \"true\",targetprompt: [\"出杀人\",\"出杀目标\"],filterTarget: function (card,player,target){\n\t\t\t\t\tif(ui.selected.targets.length==0){\n\t\t\t\t\t\treturn target!=player&&target.inRange(player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn ui.selected.targets[0].inRange(target);\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttargets[0].chooseCard('交给'+get.translation(player)+'一张【杀】或武器牌，否则视为对'+get.translation(targets[1])+'使用一张【杀】','he',function(card){\n\t\t\t\t\t\treturn get.name(card)=='sha'||get.subtype(card)=='equip1';\n\t\t\t\t\t}).ai=function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar target=_status.event.getParent('xinzhige').targets[1];\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player)>=0?-1:(9-get.value(card));\n\t\t\t\t\t};\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.cards,targets[0],'give');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(targets[0].canUse('sha',targets[1])) targets[0].useCard({name:'sha',isCard:true},targets[1]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\t\t\tvar from=ui.selected.targets[0];\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},from,target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar effs=[0,0];\n\t\t\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(current!=target&&target.canUse('sha',current)){\n\t\t\t\t\t\t\t\t\tvar eff=get.effect(current,{name:'sha'},target,target);\n\t\t\t\t\t\t\t\t\tif(eff>effs[0]) effs[0]=eff;\n\t\t\t\t\t\t\t\t\tif(eff<effs[1]) effs[1]=eff;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn effs[get.attitude(player,target)>0?0:1];\n\t\t\t\t\t\t},},order: \"8.5\",expose: \"0.2\",},}","info":"出牌阶段限一次，你可以令一名攻击范围内含有你的其他角色交给你一张【杀】或武器牌，否则其视为对你指定的另一名其攻击范围内的角色使用了一张【杀】。"},"xinzongzuo":{"name":"宗祚","script":"{trigger: {global: \"phaseBefore\",},forced: \"true\",priority: \"10\",audio: \"zongzuo\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.xinzongzuo;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.storage.xinzongzuo=true;\n\t\t\t\t\tvar num=game.countGroup();\n\t\t\t\t\tplayer.gainMaxHp(num);\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.recover(event.num);\n\t\t\t\t\t//player.update();\n\t\t\t\t},group: \"xinzongzuo_lose\",subSkill: {lose: {trigger: {global: \"dieAfter\",},forced: \"true\",audio: \"zongzuo\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!lib.group.contains(event.player.group)) return false;\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.group==event.player.group;\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，游戏的第一个回合开始前，你加X点体力上限并回复X点体力（X为全场势力数）；当一名角色死亡后，若没有与其势力相同的角色，你减1点体力上限并摸两张牌。"},"duliang":{"name":"督粮","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h')>0;\n\t\t\t\t},audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.gainPlayerCard(target,'h',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar name=get.translation(target);\n\t\t\t\t\tplayer.chooseControl(function(){\n\t\t\t\t\t\treturn Math.random()<0.5?'选项一':'选项二';\n\t\t\t\t\t}).set('prompt','督粮').set('choiceList',['令'+name+'观看牌堆顶的两张牌，然后获得其中的基本牌','令'+name+'于下个摸牌阶段额外摸一张牌']);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control=='选项一'){\n\t\t\t\t\t\tvar cards=get.cards(2);\n\t\t\t\t\t\ttarget.viewCards('督粮',cards);\n\t\t\t\t\t\tevent.cards2=[];\n\t\t\t\t\t\tevent.tothrow=[];\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(get.type(cards[i])=='basic'){\n\t\t\t\t\t\t\t\tui.special.appendChild(cards[i]);\n\t\t\t\t\t\t\t\tevent.cards2.push(cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.tothrow.push(cards[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhile(event.tothrow.length){\n\t\t\t\t\t\t\tui.cardPile.insertBefore(event.tothrow.pop(),ui.cardPile.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.addSkill('duliang2');\n\t\t\t\t\t\ttarget.updateMarks('duliang2');\n\t\t\t\t\t\ttarget.storage.duliang2++;\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.cards2&&event.cards2.length){\n\t\t\t\t\t\ttarget.gain(event.cards2,'draw');\n\t\t\t\t\t\tgame.log(target,'获得了'+get.cnNumber(event.cards2.length)+'张牌');\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},ai: {order: \"4\",result: {target: \"-1\",player: \"0.1\",},},}","info":"出牌阶段限一次，你可以获得一名其他角色的一张手牌，然后选择一项：1.令其观看牌堆顶的两张牌，然后获得其中的基本牌；2.令其于下个摸牌阶段额外摸一张牌。"},"fulin":{"name":"腹鳞","script":"{trigger: {player: \"phaseDiscardBegin\",},audio: \"2\",forced: \"true\",content: function (){\n\t\t\t\t\tplayer.addTempSkill('fulin2','phaseDiscardAfter');\n\t\t\t\t},group: [\"fulin_count\",\"fulin_reset\"],subSkill: {reset: {trigger: {player: [\"phaseBefore\",\"phaseAfter\"],},silent: \"true\",priority: \"10\",content: function (){\n\t\t\t\t\t\t\tplayer.removeGaintag('fulin');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},count: {trigger: {player: \"gainBegin\",},audio: \"fulin\",forced: \"true\",silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn _status.currentPhase==player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.gaintag.add('fulin');\n\t\t\t\t\t\t},sub: \"true\",popup: \"false\",},},onremove: function (player){\n\t\t\t\t\tplayer.removeGaintag('fulin');\n\t\t\t\t},}","info":"锁定技，你于回合内获得的牌不计入你本回合的手牌上限。"},"kuangbi":{"name":"匡弼","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseCard('he',[1,3],'匡弼：将1~3张牌置于'+get.translation(player)+'的武将牌上',true).set('ai',function(card){\n\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.getParent().player)>0){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.$give(result.cards.length,player,false);\n\t\t\t\t\t\ttarget.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tif(!player.storage.kuangbi_draw) player.storage.kuangbi_draw=[];\n\t\t\t\t\t\tplayer.storage.kuangbi_draw.push([result.cards,target]);\n\t\t\t\t\t\tplayer.addSkill('kuangbi_draw');\n\t\t\t\t\t\tplayer.syncStorage('kuangbi_draw');\n\t\t\t\t\t\tplayer.updateMarks('kuangbi_draw');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\treturn Math.sqrt(target.countCards('he'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},player: \"1\",},},subSkill: {draw: {trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",mark: \"true\",charlotte: \"true\",audio: \"kuangbi\",intro: {onunmark: function (storage,player){\n\t\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\t\twhile(storage.length){\n\t\t\t\t\t\t\t\t\tcards.addArray(storage.shift()[0]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(cards.length){\n\t\t\t\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\t\t\t\tplayer.$throw(cards,1000);\n\t\t\t\t\t\t\t\t\tgame.log(cards,'被置入了弃牌堆');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},markcount: function (content){\n\t\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\t\tfor(var i=0;i<content.length;i++){\n\t\t\t\t\t\t\t\t\tcards.addArray(content[i][0]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn cards.length;\n\t\t\t\t\t\t\t},mark: function (dialog,content,player){\n\t\t\t\t\t\t\t\tif(content&&content.length){\n\t\t\t\t\t\t\t\t\tvar cards=[];\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<content.length;i++){\n\t\t\t\t\t\t\t\t\t\tcards.addArray(content[i][0]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdialog.addText('共有'+get.cnNumber(cards.length)+'张牌');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},content: function (){\n\t\t\t\t\t\t\tvar storage=player.storage.kuangbi_draw;\n\t\t\t\t\t\t\tif(storage.length){\n\t\t\t\t\t\t\t\tvar next=storage.shift();\n\t\t\t\t\t\t\t\tplayer.gain(next[0],'gain2','fromStorage');\n\t\t\t\t\t\t\t\tvar target=next[1];\n\t\t\t\t\t\t\t\tif(target&&target.isAlive()){\n\t\t\t\t\t\t\t\t\ttarget.draw(next[0].length);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse player.removeSkill('kuangbi_draw');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段限一次，你可以选择一名有牌的其他角色，该角色将其的一至三张牌置于你的武将牌上。若如此做，你的下个准备阶段，你获得武将牌上的所有牌，然后其摸等量的牌。"},"jishe":{"name":"极奢","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.getHandcardLimit()>0;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.jishe=0;\n\t\t\t\t},usable: \"20\",content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tplayer.storage.jishe++;\n\t\t\t\t},ai: {order: \"10\",result: {player: function (player){\n\t\t\t\t\t\t\tif(!player.needsToDiscard(1)){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num-player.storage.jishe;\n\t\t\t\t\t},},group: [\"jishe2\",\"jishe3\"],}","info":"出牌阶段限20次，若你的手牌上限大于0，你可以摸一张牌，然后你本回合的手牌上限-1。结束阶段开始时，若你没有手牌，则你可以横置至多X名角色的武将牌（X为你的体力值）"},"lianhuo":{"name":"链祸","script":"{audio: \"2\",trigger: {player: \"damageBegin3\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isLinked()&&event.notLink()&&event.nature=='fire';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},}","info":"锁定技，当你受到火焰伤害时，若你的武将牌处于横置状态且此伤害不为连环伤害，则此伤害+1"},"qinqing":{"name":"寝情","script":"{}","info":"此模式下不可用"},"huisheng":{"name":"贿生","script":"{audio: \"2\",trigger: {player: \"damageBegin4\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\tif(!event.source||event.source==player||!event.source.isIn()) return false;\n\t\t\t\t\tif(player.storage.huisheng&&player.storage.huisheng.contains(event.source)) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(player.storage.huisheng) player.storage.huisheng=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar att=(get.attitude(player,trigger.source)>0);\n\t\t\t\t\tvar goon=false;\n\t\t\t\t\tif(player.hp==1){\n\t\t\t\t\t\tgoon=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar he=player.getCards('he');\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\t\tif(get.value(he[i])<8){\n\t\t\t\t\t\t\t\tnum++;\n\t\t\t\t\t\t\t\tif(num>=2){\n\t\t\t\t\t\t\t\t\tgoon=true;break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCard('he',[1,player.countCards('he')],get.prompt2('huisheng',trigger.source)).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.att){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(_status.event.goon){\n\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('goon',goon).set('att',att);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('huisheng',trigger.source);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tevent.num=result.cards.length;\n\t\t\t\t\t\tvar goon=false;\n\t\t\t\t\t\tif(event.num>2||get.attitude(trigger.source,player)>=0){\n\t\t\t\t\t\t\tgoon=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar forced=false;\n\t\t\t\t\t\tvar str='获得其中一张牌并防止伤害';\n\t\t\t\t\t\tif(trigger.source.countCards('he')<event.num){\n\t\t\t\t\t\t\tforced=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tstr+='，或取消并弃置'+get.cnNumber(result.cards.length)+'张牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger.source.chooseButton([str,result.cards],forced).set('ai',function(button){\n\t\t\t\t\t\t\tif(_status.event.goon){\n\t\t\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn get.value(button.link)-8;\n\t\t\t\t\t\t}).set('goon',goon);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\ttrigger.source.gain(card,player,'giveAuto');\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tif(!player.storage.huisheng) player.storage.huisheng=[];\n\t\t\t\t\t\tplayer.storage.huisheng.push(trigger.source);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.source.chooseToDiscard(event.num,true,'he');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到其他角色对你造成的伤害时，你可以令其观看你任意数量的牌并令其选择一项：1.获得这些牌中的一张，防止此伤害，然后你不能再对其发动〖贿生〗；2.弃置等量的牌"},"taoluan":{"name":"滔乱","script":"{audio: \"2\",enable: \"chooseToUse\",filter: function (event,player){\n\t\t\t\t\treturn event.type!='wuxie'&&event.type!='respondShan'&&!player.hasSkill('taoluan3')&&player.countCards('he')>0;//&&!_status.dying.length;\n\t\t\t\t},hiddenCard: function (player,name){\n\t\t\t\t\treturn (!player.storage.taoluan.contains(name)&&player.countCards('he')>0&&!player.hasSkill('taoluan3')&&lib.inpile.contains(name));\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.taoluan) player.storage.taoluan=[];\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\t\tvar name=lib.inpile[i];\n\t\t\t\t\t\t\tif(player.storage.taoluan.contains(name)) continue;\n\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','fire']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','thunder']);\n\t\t\t\t\t\t\t\tlist.push(['基本','','sha','ice']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.type(name)=='trick') list.push(['锦囊','',name]);\n\t\t\t\t\t\t\telse if(get.type(name)=='basic') list.push(['基本','',name]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(list.length==0){\n\t\t\t\t\t\t\treturn ui.create.dialog('滔乱已无可用牌');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ui.create.dialog('滔乱',[list,'vcard']);\n\t\t\t\t\t},filter: function (button,player){\n\t\t\t\t\t\treturn _status.event.getParent().filterCard({name:button.link[2]},player,_status.event.getParent());\n\t\t\t\t\t},check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h',button.link[2])>0) return 0;\n\t\t\t\t\t\tif(button.link[2]=='wugu') return 0;\n\t\t\t\t\t\tvar effect=player.getUseValue(button.link[2]);\n\t\t\t\t\t\tif(effect>0) return effect;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\t\taudio:'taoluan',\n\t\t\t\t\t\t\tselectCard:1,\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tcheck:function(card){\n\t\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\t\tviewAs:{name:links[0][2],nature:links[0][3]},\n\t\t\t\t\t\t\tonuse:function(result,player){\n\t\t\t\t\t\t\t\tplayer.storage.taoluan.add(result.card.name);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\treturn '将一张牌当做'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'使用';\n\t\t\t\t\t},},ai: {skillTagFilter: function (player){\n\t\t\t\t\t\tif(!player.countCards('he')||player.hasSkill('taoluan3')) return false;\n\t\t\t\t\t\tif(!player.storage.taoluan.contains('tao')){}\n\t\t\t\t\t\telse if(player.isDying()&&!player.storage.taoluan.contains('jiu')){}\n\t\t\t\t\t\telse return false;\n\t\t\t\t\t},order: \"4\",result: {player: function (player){\n\t\t\t\t\t\t\tvar allshown=true,players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i].ai.shown==0){\n\t\t\t\t\t\t\t\t\tallshown=false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(players[i]!=player&&players[i].countCards('h')&&get.attitude(player,players[i])>0){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(allshown) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: \"1.9\",},group: [\"taoluan2\",\"taoluan4\",\"taoluan5\"],}","info":"你可以将一张牌当做任意一张基本牌或普通锦囊牌使用（此牌不得是本局游戏你以此法使用过的牌），然后你令一名其他角色选择一项：1.交给你一张与你以此法使用的牌类别不同的牌；2.你于回合结束时失去1点体力且〖滔乱〗无效直到回合结束"},"guizao":{"name":"瑰藻","script":"{audio: \"2\",trigger: {player: \"phaseDiscardEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.cards&&event.cards.length>1){\n\t\t\t\t\t\tvar suits=[];\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tvar suit=get.suit(event.cards[i]);\n\t\t\t\t\t\t\tif(suits.contains(suit)){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tsuits.push(suit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.chooseDrawRecover(get.prompt('guizao'),'摸一张牌或回复一点体力').logSkill='guizao';\n\t\t\t\t},}","info":"弃牌阶段结束时，若你于此阶段弃置牌的数量不小于2且它们的花色各不相同，你可以回复1点体力或摸一张牌"},"jiyu":{"name":"讥谀","script":"{audio: \"2\",enable: \"phaseUse\",locked: \"false\",filter: function (event,player){\n\t\t\t\t\tif(!player.getStat().skill.jiyu||!player.storage.jiyu2) return true;\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tif(!player.storage.jiyu2.contains(get.suit(hs[i]))){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('h')&&(!player.storage.jiyu||!player.storage.jiyu.contains(target));\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\tif(evt&&evt.name=='phaseUse'&&!evt.jiyu){\n\t\t\t\t\t\tevt.jiyu=true;\n\t\t\t\t\t\tvar next=game.createEvent('jiyu_clear');\n\t\t\t\t\t\t_status.event.next.remove(next);\n\t\t\t\t\t\tevt.after.push(next);\n\t\t\t\t\t\tnext.player=player;\n\t\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\t\tgame.broadcastAll(function(player){\n\t\t\t\t\t\t\t\tdelete player.storage.jiyu;\n\t\t\t\t\t\t\t\tdelete player.storage.jiyu2;\n\t\t\t\t\t\t\t},player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.storage.jiyu) player.storage.jiyu=[];\n\t\t\t\t\tplayer.storage.jiyu.push(target);\n\t\t\t\t\tvar spade=true;\n\t\t\t\t\tif(player.isTurnedOver()||get.attitude(target,player)>0||target.hp<=2){\n\t\t\t\t\t\tspade=false;\n\t\t\t\t\t}\n\t\t\t\t\ttarget.chooseToDiscard('h',true).set('ai',function(card){\n\t\t\t\t\t\tif(get.suit(card)=='spade'){\n\t\t\t\t\t\t\tif(_status.event.spade){\n\t\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn -10-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(_status.event.getParent().player.storage.jiyu2&&_status.event.getParent().player.storage.jiyu2.contains(get.suit(card))){\n\t\t\t\t\t\t\treturn -3-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t}).set('spade',spade);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.cards||!result.cards.length) return;\n\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\tif(get.suit(card,target)=='spade'){\n\t\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\t\ttarget.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.storage.jiyu2) player.storage.jiyu2=[];\n\t\t\t\t\tplayer.storage.jiyu2.add(get.suit(card));\n\t\t\t\t},onremove: [\"jiyu\",\"jiyu2\"],ai: {order: \"9\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.isTurnedOver()||target.countCards('h')<=3) return -1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},mod: {cardEnabled: function (card,player){\n\t\t\t\t\t\tif(player.storage.jiyu2&&player.storage.jiyu2.contains(get.suit(card))) return false;\n\t\t\t\t\t},},}","info":"出牌阶段限一次，你可以令一名角色弃置一张手牌。若如此做，你不能使用与之相同花色的牌，直到回合结束。若其以此法弃置的牌为黑桃，你翻面并令其失去1点体力。若你有未被〖讥谀〗限制的手牌，则你可以继续发动此技能，但不能选择本回合已经选择过的目标。"},"zhongjian":{"name":"忠鉴","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"2\",filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('h')) return false;\n\t\t\t\t\tif(player.getStat('skill').zhongjian&&!player.hasSkill('zhongjian2')) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&Math.min(current.hp,current.countCards('h'))>0;\n\t\t\t\t\t});\n\t\t\t\t},filterCard: \"true\",check: function (){\n\t\t\t\t\treturn Math.random();\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"false\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.hp>0&&target.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.choosePlayerCard(target,'h',Math.min(target.countCards('h'),target.hp),true);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar hs=result.cards;\n\t\t\t\t\ttarget.showCards(hs);\n\t\t\t\t\tvar colors=[];\n\t\t\t\t\tvar numbers=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tcolors.add(get.color(cards[i]));\n\t\t\t\t\t\tnumbers.add(get.number(cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tevent.bool1=false;\n\t\t\t\t\tevent.bool2=false;\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tif(!event.bool1&&colors.contains(get.color(hs[i]))) event.bool1=true;\n\t\t\t\t\t\tif(!event.bool2&&numbers.contains(get.number(hs[i]))) event.bool2=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.bool1){\n\t\t\t\t\t\tvar filterTarget=function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player&&target.countDiscardableCards(player,'he')>0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn filterTarget(null,player,current);\n\t\t\t\t\t\t})) event._result={bool:false};\n\t\t\t\t\t\telse player.chooseTarget(filterTarget,'弃置一名其他角色的一张牌或摸一张牌').set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att>=0) return 0;\n\t\t\t\t\t\t\tif(target.countCards('he',function(card){\n\t\t\t\t\t\t\t\treturn get.value(card)>5;\n\t\t\t\t\t\t\t})) return -att;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.goto(5);\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(!result.bool) player.draw();\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tplayer.discardPlayerCard(target,true,'he');\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.bool2){\n\t\t\t\t\t\tplayer.addTempSkill('zhongjian2');\n\t\t\t\t\t}\n\t\t\t\t\tif(!event.bool1&&!event.bool2){\n\t\t\t\t\t\tplayer.addSkill('caishix');\n\t\t\t\t\t\tif(typeof player.storage.caishix!='number') player.storage.caishix=0;\n\t\t\t\t\t\tplayer.storage.caishix--;\n\t\t\t\t\t\tplayer.markSkill('caishix');\n\t\t\t\t\t\tplayer.popup('杯具');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {player: function (player,target){\n\t\t\t\t\t\t\treturn Math.min(target.hp,target.countCards('h'));\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以展示一张手牌，然后展示一名其他角色的X张手牌（X为其体力值）。若以此法展示的牌与你展示的牌：有颜色相同的，你选择：①摸一张牌。②弃置一名其他角色的一张牌；有点数相同的，本回合此技能改为“出牌阶段限两次”；均不同，你的手牌上限-1"},"caishi":{"name":"才识","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.isHealthy()){\n\t\t\t\t\t\tevent.type=0;\n\t\t\t\t\t\tplayer.chooseBool(get.prompt('caishi'),'令自己的手牌上限+1',function(){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.type=1;\n\t\t\t\t\t\tplayer.chooseControlList(get.prompt('caishi'),'令自己的手牌上限+1','回复1点体力，然后本回合你的牌不能对自己使用',function(){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.type){\n\t\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\t\tplayer.logSkill('caishi');\n\t\t\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\t\t\tplayer.addSkill('caishix');\n\t\t\t\t\t\t\t\tif(typeof player.storage.caishix!='number') player.storage.caishix=0;\n\t\t\t\t\t\t\t\tplayer.storage.caishix++;\n\t\t\t\t\t\t\t\tplayer.markSkill('caishix');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(result.index==1){\n\t\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t\t\tplayer.addTempSkill('caishi3');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tplayer.logSkill('caishi');\n\t\t\t\t\t\t\tplayer.addSkill('caishix');\n\t\t\t\t\t\t\tif(typeof player.storage.caishix!='number') player.storage.caishix=0;\n\t\t\t\t\t\t\tplayer.storage.caishix++;\n\t\t\t\t\t\t\tplayer.markSkill('caishix');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段开始时，你可以选择一项：1.手牌上限+1；2.回复1点体力，然后本回合你的牌不能对自己使用"},"fumian":{"name":"福绵","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.storage.fumian_choice=='draw'){\n\t\t\t\t\t\tplayer.chooseControlList(get.prompt('fumian'),'摸牌阶段多摸一张牌','使用红色牌可以多选择两个目标（限一次）',function(event,player){\n\t\t\t\t\t\t\tif(player.hp==1||player.countCards('h')<=1) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(player.storage.fumian_choice=='red'){\n\t\t\t\t\t\tplayer.chooseControlList(get.prompt('fumian'),'摸牌阶段多摸两张牌','使用红色牌可以多选择一个目标（限一次）',function(event,player){\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseControlList(get.prompt('fumian'),'摸牌阶段多摸一张牌','使用红色牌可以多选择一个目标（限一次）',function(event,player){\n\t\t\t\t\t\t\tif(player.hp==1||player.countCards('h')<player.hp) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.storage.fumian_choice=='draw'){\n\t\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\t\tplayer.storage.fumian_draw=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(result.index==1){\n\t\t\t\t\t\t\tplayer.storage.fumian_red=2;\n\t\t\t\t\t\t\tdelete player.storage.fumian_choice;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(player.storage.fumian_choice=='red'){\n\t\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\t\tplayer.storage.fumian_draw=2;\n\t\t\t\t\t\t\tdelete player.storage.fumian_choice;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(result.index==1){\n\t\t\t\t\t\t\tplayer.storage.fumian_red=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\t\tplayer.storage.fumian_draw=1;\n\t\t\t\t\t\t\tplayer.storage.fumian_choice='draw';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(result.index==1){\n\t\t\t\t\t\t\tplayer.storage.fumian_red=1;\n\t\t\t\t\t\t\tplayer.storage.fumian_choice='red';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.logSkill('fumian');\n\t\t\t\t\t\tplayer.addTempSkill('fumian_draw');\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.index==1){\n\t\t\t\t\t\tplayer.logSkill('fumian');\n\t\t\t\t\t\tplayer.addTempSkill('fumian_red');\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.3\",},subSkill: {draw: {trigger: {player: \"phaseDrawBegin2\",},forced: \"true\",popup: \"false\",onremove: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.num+=player.storage.fumian_draw;\n\t\t\t\t\t\t},sub: \"true\",},red2: {sub: \"true\",},red: {trigger: {player: \"useCard2\",},direct: \"true\",mark: \"true\",onremove: \"true\",intro: {content: \"你使用红色牌可以多选择#个目标（限一次）\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(get.color(event.card)!='red') return false;\n\t\t\t\t\t\t\tif(player.hasSkill('fumian_red2')) return false;\n\t\t\t\t\t\t\tvar info=get.info(event.card);\n\t\t\t\t\t\t\tif(info.allowMultiple==false) return false;\n\t\t\t\t\t\t\tif(event.targets&&!info.multitarget){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(event.card,player,current)&&!event.targets.contains(current);\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar prompt2='额外指定';\n\t\t\t\t\t\t\tif(player.storage.fumian_red==2){\n\t\t\t\t\t\t\t\tprompt2+='至多两';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tprompt2+='一';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprompt2+='名'+get.translation(trigger.card)+'的目标'\n\t\t\t\t\t\t\tplayer.chooseTarget([1,player.storage.fumian_red],get.prompt('fumian'),function(card,player,target){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(_status.event.targets.contains(target)) return false;\n\t\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card,player,target);\n\t\t\t\t\t\t\t}).set('prompt2',prompt2).set('ai',function(target){\n\t\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player);\n\t\t\t\t\t\t\t}).set('targets',trigger.targets).set('card',trigger.card);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tif(!event.isMine()) game.delayx();\n\t\t\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tif(event.targets){\n\t\t\t\t\t\t\t\tplayer.logSkill('fumian',event.targets);\n\t\t\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\n\t\t\t\t\t\t\t\tplayer.addTempSkill('fumian_red2');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"准备阶段，你可以选择一项：1.摸牌阶段多摸一张牌；2.使用红色牌可以多选择一个目标（限一次）。若与你上回合选择的选项不同，则该选项数值+1并复原此技能"},"daiyan":{"name":"怠宴","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",init: function (){\n\t\t\t\t\tlib.onwash.push(function(){\n\t\t\t\t\t\tdelete _status.daiyan_notao;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('daiyan'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\tif(_status.daiyan_notao){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(target==player.storage.daiyan) return 0;\n\t\t\t\t\t\t\t\treturn 2*att/Math.sqrt(1+target.hp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(_status.daiyan_notao){\n\t\t\t\t\t\t\t\tif(target==player.storage.daiyan) return -3*att;\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('daiyan',target);\n\t\t\t\t\t\tvar tao=get.cardPile2(function(card){\n\t\t\t\t\t\t\treturn get.suit(card)=='heart'&&get.type(card)=='basic';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(tao){\n\t\t\t\t\t\t\ttarget.gain(tao,'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t_status.daiyan_notao=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(target==player.storage.daiyan){\n\t\t\t\t\t\t\ttarget.loseHp();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.daiyan=target;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tdelete player.storage.daiyan;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",expose: \"0.2\",},}","info":"结束阶段，你可以令一名其他角色从牌堆中获得一张红桃基本牌，然后若其于上回合成为过该技能目标，则其失去1点体力"},"wengua":{"name":"问卦","script":"{global: \"wengua2\",audio: \"2\",}","info":"其他角色/你的出牌阶段限一次，其可以交给你一张牌，(若当前回合角色为你，则跳过此步骤)，你可以将此牌/一张牌置于牌堆顶或牌堆底，然后你与其/你从另一端摸一张牌"},"fuzhu":{"name":"伏诛","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.sex=='male'&&ui.cardPile.childElementCount<=player.hp*10;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)<0&&get.effect(event.player,{name:'sha'},player,player)>0;\n\t\t\t\t},logTarget: \"player\",skillAnimation: \"true\",animationColor: \"wood\",onWash: function (){\n\t\t\t\t\t_status.event.getParent('fuzhu').washed=false;\n\t\t\t\t\treturn 'remove';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.washed=false;\n\t\t\t\t\tlib.onwash.push(lib.skill.fuzhu.onWash);\n\t\t\t\t\tevent.total=game.players.length+game.dead.length;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.total--;\n\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\treturn card.name=='sha'&&player.canUse(card,trigger.player,false);\n\t\t\t\t\t});\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tcard.remove();\n\t\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\t\tplayer.useCard(card,trigger.player,false);\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.total>0&&!event.washed&&ui.cardPile.childElementCount<=player.hp*10&&trigger.player.isAlive()) event.goto(1);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tlib.onwash.remove(lib.skill.fuzhu.onWash);\n\t\t\t\t\tvar cards=get.cards(ui.cardPile.childElementCount+1);\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tui.cardPile.insertBefore(cards[i],ui.cardPile.childNodes[get.rand(ui.cardPile.childElementCount)]);\n\t\t\t\t\t}\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"一名男性角色的结束阶段，若牌堆剩余牌数不大于你体力值的十倍，则你可以依次对其使用牌堆中所有的【杀】（不能超过游戏人数），然后洗牌"},"shouxi":{"name":"守玺","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},direct: \"true\",init: function (player){\n\t\t\t\t\tif(!player.storage.shouxi) player.storage.shouxi=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.player.isAlive();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=lib.inpile.filter(function(i){\n\t\t\t\t\t\tif(player.storage.shouxi.contains(i)) return false;\n\t\t\t\t\t\tvar type=get.type(i);\n\t\t\t\t\t\tif(type=='basic'||type=='trick') return true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\tlist[i]=[get.type(list[i]),'',list[i]];\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton([get.prompt('shouxi',trigger.player),[list,'vcard']]).set('ai',function(button){\n\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('shouxi');\n\t\t\t\t\t\tvar name=result.links[0][2];\n\t\t\t\t\t\tevent.vcard=result.links;\n\t\t\t\t\t\tevent.cardname=name;\n\t\t\t\t\t\tplayer.storage.shouxi.add(name);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar name=event.cardname;\n\t\t\t\t\ttrigger.player.chooseToDiscard(function(card){\n\t\t\t\t\t\treturn card.name==_status.event.cardname;\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.att<0){\n\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('att',get.attitude(trigger.player,player)).set('cardname',name).set('dialog',['守玺：请弃置一张【'+get.translation(name)+'】，否则此【杀】对'+get.translation(player)+'无效',[event.vcard,'vcard']]);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool==false){\n\t\t\t\t\t\ttrigger.excluded.push(player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.gainPlayerCard(player);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.attitude(player,target)<0){\n\t\t\t\t\t\t\t\treturn 0.3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标后，你可声明一种未以此法声明过的基本牌或锦囊牌的牌名。若使用者弃置一张你声明的牌，其获得你的一张牌；若否，则此【杀】对你无效"},"huimin":{"name":"惠民","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},check: function (event,player){\n\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\tif(current.countCards('h')<current.hp){\n\t\t\t\t\t\t\treturn get.sgn(get.attitude(player,current));\n\t\t\t\t\t\t}\n\t\t\t\t\t})>=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h')<current.hp;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.list=game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h')<current.hp;\n\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\tplayer.draw(event.list.length);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseTarget(true,function(card,player,target){\n\t\t\t\t\t\tvar list=_status.event.list;\n\t\t\t\t\t\treturn list.contains(target);\n\t\t\t\t\t},'选择一名角色作为分牌起点').set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=0) return att;\n\t\t\t\t\t\tvar list=_status.event.list;\n\t\t\t\t\t\tvar index=list.indexOf(target);\n\t\t\t\t\t\tvar prev;\n\t\t\t\t\t\tif(index==0){\n\t\t\t\t\t\t\tprev=list[list.length-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tprev=list[index-1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.attitude(player,prev)<0) return att;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('list',event.list);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar index=event.list.indexOf(result.targets[0]);\n\t\t\t\t\tif(index<0) index=0;\n\t\t\t\t\tvar tmp=event.list.splice(index);\n\t\t\t\t\tevent.list=tmp.concat(event.list);\n\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\tplayer.chooseCard('h','选择要分配的手牌',event.list.length,true);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\tplayer.lose(cards,ui.special);\n\t\t\t\t\tevent.togain=cards;\n\t\t\t\t\tif(result.bool&&cards.length){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('惠民',cards,true);\n\t\t\t\t\t\t_status.dieClose.push(dialog);\n\t\t\t\t\t\tdialog.videoId=lib.status.videoId++;\n\t\t\t\t\t\tevent.dialogID=dialog.videoId;\n\t\t\t\t\t\tgame.addVideo('cardDialog',null,['惠民',get.cardsInfo(cards),dialog.videoId]);\n\t\t\t\t\t\tgame.broadcast(function(cards,id){\n\t\t\t\t\t\t\tvar dialog=ui.create.dialog('惠民',cards,true);\n\t\t\t\t\t\t\t_status.dieClose.push(dialog);\n\t\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t\t},cards,dialog.videoId);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.list.length&&event.togain.length){\n\t\t\t\t\t\tevent.current=event.list.shift();\n\t\t\t\t\t\tvar next=event.current.chooseButton(true,function(button){\n\t\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('dialog',event.dialogID);\n\t\t\t\t\t\tnext.set('closeDialog',false);\n\t\t\t\t\t\tnext.set('dialogdisplay',true);\n\t\t\t\t\t\tnext.set('cardFilter',event.togain.slice(0));\n\t\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\t\treturn _status.event.cardFilter.contains(button.link);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(var i=0;i<ui.dialogs.length;i++){\n\t\t\t\t\t\t\tif(ui.dialogs[i].videoId==event.dialogID){\n\t\t\t\t\t\t\t\tvar dialog=ui.dialogs[i];\n\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t\t_status.dieClose.remove(dialog);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(event.togain.length){\n\t\t\t\t\t\t\tgame.cardsDiscard(event.togain);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.broadcast(function(id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t\t_status.dieClose.remove(dialog);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},event.dialogID);\n\t\t\t\t\t\tgame.addVideo('cardDialog',null,event.dialogID);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 6'\n\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tevent.current.gain(card);\n\t\t\t\t\t\tevent.current.$gain2(card);\n\t\t\t\t\t\tevent.togain.remove(card);\n\t\t\t\t\t}\n\t\t\t\t\tgame.log(event.current,'选择了',card);\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tif(event.togain.length) event.goto(5);\n\t\t\t\t},}","info":"结束阶段，你可以摸X张牌并展示等量手牌（X为手牌数小于其体力值的角色数），然后从你指定的一名角色开始这些角色依次选择并获得其中一张"},"bizhuan":{"name":"辟撰","script":"{audio: \"2\",trigger: {player: \"useCard\",target: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\tif(event.name!='useCard'&&event.player==event.target) return false;\n\t\t\t\t\tif(player.storage.bizhuan.length>=4) return false;\n\t\t\t\t\treturn get.suit(event.card)=='spade';\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.bizhuan) player.storage.bizhuan=[];\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},frequent: \"true\",content: function (){\n\t\t\t\t\tvar card=game.cardsGotoSpecial(get.cards()).cards[0];\n\t\t\t\t\tplayer.$draw(card);\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tplayer.storage.bizhuan.push(card);\n\t\t\t\t\tplayer.markSkill('bizhuan');\n\t\t\t\t},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.storage.bizhuan&&player.storage.bizhuan.length) return num+player.storage.bizhuan.length;\n\t\t\t\t\t},},}","info":"当你使用黑桃牌后，或你成为其他角色使用黑桃牌的目标后，你可以将牌堆顶的一张牌置于武将牌上，称为“书”；你至多拥有四张“书”，你每有一张“书” ，手牌上限+1"},"tongbo":{"name":"通博","script":"{trigger: {player: \"phaseDrawAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.bizhuan&&player.storage.bizhuan.length;\n\t\t\t\t},locked: \"false\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar four=false;\n\t\t\t\t\tvar nofour=!player.hasFriend();\n\t\t\t\t\tif(player.storage.bizhuan.length==4){\n\t\t\t\t\t\tvar suits=['club','spade','heart','diamond'];\n\t\t\t\t\t\tvar list=player.getCards('he').concat(player.storage.bizhuan);\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tsuits.remove(get.suit(list[i]));\n\t\t\t\t\t\t\tif(suits.length==0){\n\t\t\t\t\t\t\t\tfour=true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar suits2=[];\n\t\t\t\t\tif(four){\n\t\t\t\t\t\tsuits2=['club','spade','heart','diamond'];\n\t\t\t\t\t\tfor(var i=0;i<player.storage.bizhuan.length;i++){\n\t\t\t\t\t\t\tsuits2.remove(get.suit(player.storage.bizhuan[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCard('选择任意张牌与“书”交换',[1,Math.min(player.countCards('he'),player.storage.bizhuan.length)],'he').set('ai',function(card){\n\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\tif(_status.event.four&&!_status.event.nofour){\n\t\t\t\t\t\t\tvar suits=_status.event.suits2.slice(0);\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\t\tsuits.remove(get.suit(ui.selected.cards[i]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(suits.contains(get.suit(card))){\n\t\t\t\t\t\t\t\tif(val<0) return 10;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(val<0) return 10;\n\t\t\t\t\t\t\tif(_status.event.player.skipList.contains('phaseUse')){\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 10-val;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('four',four).set('suits2',suits2).set('nofour',nofour).set('promptx',[player.storage.bizhuan]);\n\t\t\t\t\tevent.four=four;\n\t\t\t\t\tevent.nofour=nofour;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('tongbo');\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.storage.bizhuan=player.storage.bizhuan.concat(result.cards);\n\t\t\t\t\t\tplayer.syncStorage('bizhuan');\n\t\t\t\t\t\tevent.num=result.cards.length;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar suits2={\n\t\t\t\t\t\theart:0,\n\t\t\t\t\t\tdiamond:0,\n\t\t\t\t\t\tspade:0,\n\t\t\t\t\t\tclub:0\n\t\t\t\t\t};\n\t\t\t\t\tfor(var i=0;i<player.storage.bizhuan.length;i++){\n\t\t\t\t\t\tsuits2[get.suit(player.storage.bizhuan[i])]++;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCardButton(player.storage.bizhuan,'选择'+event.num+'张牌作为手牌',event.num,true).set('ai',function(button){\n\t\t\t\t\t\tvar val=get.value(button.link);\n\t\t\t\t\t\tif(_status.event.four||_status.event.nofour){\n\t\t\t\t\t\t\tvar suits=get.copy(_status.event.suits2);\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\t\tsuits[get.suit(ui.selected.buttons[i].link)]--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar num=suits[get.suit(button.link)];\n\t\t\t\t\t\t\tif(_status.event.nofour){\n\t\t\t\t\t\t\t\tfor(var i in suits){\n\t\t\t\t\t\t\t\t\tif(suits[i]==0) return val;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(num!=2){\n\t\t\t\t\t\t\t\t\tif(val<=0) return 0.01;\n\t\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(num>1){\n\t\t\t\t\t\t\t\t\tif(val<=0) return 0.01;\n\t\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(val<0) return -10;\n\t\t\t\t\t\t\tif(_status.event.player.skipList.contains('phaseUse')){\n\t\t\t\t\t\t\t\treturn -val;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('four',event.four).set('suits2',suits2).set('nofour',event.nofour);\n\t\t\t\t\tif(player==game.me&&!event.isMine()){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tplayer.gain(result.links,'fromStorage');\n\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\tplayer.storage.bizhuan.remove(result.links[i]);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.syncStorage('bizhuan');\n\t\t\t\t\tif(player==game.me&&_status.auto){\n\t\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tsuits2=['club','spade','heart','diamond'];\n\t\t\t\t\tfor(var i=0;i<player.storage.bizhuan.length;i++){\n\t\t\t\t\t\tsuits2.remove(get.suit(player.storage.bizhuan[i]));\n\t\t\t\t\t}\n\t\t\t\t\tif(suits2.length>0){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tevent.cards=player.storage.bizhuan.slice(0);\n\t\t\t\t\tplayer.storage.bizhuan.length=0;\n\t\t\t\t\tplayer.unmarkSkill('bizhuan');\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\tif(event.cards.length>1){\n\t\t\t\t\t\tplayer.chooseCardButton('将所有“书”交给任意名其他角色',true,event.cards,[1,event.cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\tif(ui.selected.buttons.length==0) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.cards.length==1){\n\t\t\t\t\t\tevent._result={links:event.cards.slice(0),bool:true};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 7\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.togive=result.links.slice(0);\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(result.links)+'交给一名其他角色',true,function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.enemy){\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(att>0){\n\t\t\t\t\t\t\t\treturn att/(1+target.countCards('h'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn att/100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).set('enemy',get.value(event.togive[0],player,'raw')<0);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 8\"\n\t\t\t\t\tif(result.targets.length){\n\t\t\t\t\t\tresult.targets[0].gain(event.togive,'draw');\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tgame.log(result.targets[0],'获得了'+get.cnNumber(event.togive.length)+'张','#g“书”');\n\t\t\t\t\t\tevent.goto(6);\n\t\t\t\t\t}\n\t\t\t\t},ai: {combo: \"bizhuan\",},}","info":"摸牌阶段摸牌后，你可以用任意张牌替换等量的“书”，然后若你的“书”包含四种花色，你将所有“书”交给任意名其他角色"},"qingxian":{"name":"清弦","script":"{audio: \"2\",group: [\"qingxian_jilie\",\"qingxian_rouhe\",\"qingxian_dying\"],ai: {threaten: \"0.8\",maixie: \"true\",maixie_hp: \"true\",maixie_defend: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(target.hp>1&&target.hasFriend()) return 0.4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},subSkill: {dying: {audio: \"qingxian\",trigger: {global: \"dyingAfter\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn player.storage.qingxian&&player.storage.qingxian>0&&!_status.dying.length;\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.storage.qingxian--;\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt('qingxian'),function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\tif(target.isHealthy()&&att>0) return 0;\n\t\t\t\t\t\t\t\tif(target.hp==1&&att!=0){\n\t\t\t\t\t\t\t\t\tif(att>0) return 9;\n\t\t\t\t\t\t\t\t\telse return 10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn Math.sqrt(Math.abs(att));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).set('prompt2','当你回复体力后，你可以令一名其他角色执行一项：失去1点体力，随机使用一张装备牌；回复1点体力，弃置一张装备牌。若其以此法使用或弃置的牌为梅花，你回复1点体力');\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tplayer.logSkill('qingxian',target);\n\t\t\t\t\t\t\t\tevent.insert(lib.skill.qingxian.content_choose,{target:target,player:player});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 2'\n\t\t\t\t\t\t\tif(lib.skill.qingxian_dying.filter(trigger,player)) event.goto(0);\n\t\t\t\t\t\t},sub: \"true\",},rouhe: {audio: \"qingxian\",trigger: {player: \"recoverEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tif(_status.dying.length){\n\t\t\t\t\t\t\t\tif(!player.storage.qingxian) player.storage.qingxian=0;\n\t\t\t\t\t\t\t\tplayer.storage.qingxian++;\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt('qingxian'),function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\tif(target.isHealthy()&&att>0) return 0;\n\t\t\t\t\t\t\t\tif(target.hp==1&&att!=0){\n\t\t\t\t\t\t\t\t\tif(att>0) return 9;\n\t\t\t\t\t\t\t\t\telse return 10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn Math.sqrt(Math.abs(att));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).set('prompt2','当你回复体力后，你可以令一名其他角色执行一项：失去1点体力，随机使用一张装备牌；回复1点体力，弃置一张装备牌。若其以此法使用或弃置的牌为梅花，你回复1点体力');\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tplayer.logSkill('qingxian',target);\n\t\t\t\t\t\t\t\tevent.insert(lib.skill.qingxian.content_choose,{target:target,player:player});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},jilie: {audio: \"qingxian\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.source&&event.source.isIn();\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\tif(get.attitude(player,event.source)>0&&event.source.isHealthy()){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},logTarget: \"source\",prompt2: \"当你受到伤害后，你可以令伤害来源执行一项：失去1点体力，随机使用一张装备牌；回复1点体力，弃置一张装备牌。若其以此法使用或弃置的牌为梅花，你回复1点体力\",content: function (){\n\t\t\t\t\t\t\tevent.insert(lib.skill.qingxian.content_choose,{target:trigger.source,player:player});\n\t\t\t\t\t\t},sub: \"true\",},},content_choose: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(target.isHealthy()){\n\t\t\t\t\t\tevent._result={index:0}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar index;\n\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\tindex=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tindex=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseControlList(\n\t\t\t\t\t\t\t['令'+get.translation(target)+'失去1点体力，随机使用一张装备牌',\n\t\t\t\t\t\t\t'令'+get.translation(target)+'回复1点体力，弃置一张装备牌'],\n\t\t\t\t\t\t\ttrue,function(event,player){\n\t\t\t\t\t\t\treturn _status.event.index;\n\t\t\t\t\t\t}).set('index',index);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\ttarget.loseHp();\n\t\t\t\t\t\tevent.card=get.cardPile(function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='equip'&&!target.isDisabled(get.subtype(card));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(event.card){\n\t\t\t\t\t\t\ttarget.chooseUseTarget(event.card,'nothrow','nopopup',true);\n\t\t\t\t\t\t\tevent.goto(3);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\tif(target.countCards('he',{type:'equip'})){\n\t\t\t\t\t\t\ttarget.chooseToDiscard('he',true,'弃置一张装备牌',function(card){\n\t\t\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\t\t\tvar val=-get.value(card);\n\t\t\t\t\t\t\t\tif(get.suit(card)=='club'){\n\t\t\t\t\t\t\t\t\tval+=_status.event.att*10;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t}).set('att',get.sgnAttitude(target,player));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result&&result.cards){\n\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.card&&get.suit(event.card)=='club'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到伤害/回复体力后，你可以令伤害来源/一名其他角色执行一项：失去1点体力，随机使用一张装备牌；回复1点体力，弃置一张装备牌。若其以此法使用或弃置的牌为梅花，你摸一张牌。"},"juexiang":{"name":"绝响","script":"{audio: \"2\",trigger: {player: \"die\",},direct: \"true\",forceDie: \"true\",skillAnimation: \"true\",animationColor: \"thunder\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('juexiang'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('forceDie',true).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target)/Math.sqrt(target.hp+1);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0]\n\t\t\t\t\t\tplayer.logSkill('juexiang',target);\n\t\t\t\t\t\ttarget.addSkill(lib.skill.juexiang.derivation.randomGet());\n\t\t\t\t\t\ttarget.addTempSkill('juexiang_club',{player:'phaseZhunbeiBegin'});\n\t\t\t\t\t}\n\t\t\t\t},derivation: [\"juexiang_ji\",\"juexiang_lie\",\"juexiang_rou\",\"juexiang_he\"],subSkill: {ji: {audio: \"1\",mark: \"true\",nopop: \"true\",intro: {content: \"info\",},trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.source&&event.source.isIn()&&event.source!=player;\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\treturn get.attitude(player,event.source)<0;\n\t\t\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t\t\ttrigger.source.loseHp();\n\t\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\ttrigger.source.chooseUseTarget(card,'nothrow','nopopup',true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},ai: {maixie_defend: \"true\",},sub: \"true\",},lie: {audio: \"1\",mark: \"true\",nopop: \"true\",intro: {content: \"info\",},trigger: {player: \"recoverEnd\",global: \"dyingAfter\",},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tif(_status.dying.length){\n\t\t\t\t\t\t\t\tif(event.triggername=='recoverEnd'){\n\t\t\t\t\t\t\t\t\tif(!player.storage.juexiang_lie) player.storage.juexiang_lie=0;\n\t\t\t\t\t\t\t\t\tplayer.storage.juexiang_lie++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(event.triggername=='dyingAfter'){\n\t\t\t\t\t\t\t\tif(!player.storage.juexiang_lie){\n\t\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tplayer.storage.juexiang_lie--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt2('juexiang_lie'),function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\treturn -get.attitude(player,target)/(1+target.hp);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tplayer.logSkill('juexiang_lie',target);\n\t\t\t\t\t\t\t\ttarget.loseHp();\n\t\t\t\t\t\t\t\tvar card=get.cardPile(function(card){\n\t\t\t\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\t\ttarget.chooseUseTarget(card,true,'nothrow','nopopup',true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(event.triggername=='dyingAfter'&&player.storage.juexiang_lie>0) event.goto(0);\n\t\t\t\t\t\t},sub: \"true\",},rou: {audio: \"1\",mark: \"true\",nopop: \"true\",intro: {content: \"info\",},trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.source&&event.source.isIn()&&event.source!=player;\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\tvar att=get.attitude(player,event.source);\n\t\t\t\t\t\t\tif(player.isHealthy()){\n\t\t\t\t\t\t\t\treturn att<0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn att>0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t\t\ttrigger.source.recover();\n\t\t\t\t\t\t\tif(trigger.source.countCards('he',{type:'equip'})){\n\t\t\t\t\t\t\t\ttrigger.source.chooseToDiscard('he',true,'弃置一张装备牌',function(card){\n\t\t\t\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},ai: {maixie_defend: \"true\",},sub: \"true\",},he: {audio: \"1\",mark: \"true\",nopop: \"true\",intro: {content: \"info\",},trigger: {player: \"recoverEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseTarget(get.prompt2('juexiang_he'),function(card,player,target){\n\t\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\tif(target.isHealthy()&&target.countCards('he')){\n\t\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\treturn 10*att/(1+target.hp);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tplayer.logSkill('juexiang_he',target);\n\t\t\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\t\t\tif(target.countCards('he',{type:'equip'})){\n\t\t\t\t\t\t\t\t\ttarget.chooseToDiscard('he',true,'弃置一张装备牌',function(card){\n\t\t\t\t\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},club: {mark: \"true\",nopop: \"true\",intro: {content: \"info\",},mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\t\t\tif(get.suit(card)=='club'&&player!=target){\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"当你死亡后，你可以令一名角色随机获得“清弦残谱”其中一个技能，然后直到其下回合开始，其不能被选择为其他角色使用梅花牌的目标"},"jianzheng":{"name":"谏征","script":"{audio: \"2\",trigger: {global: \"useCardToPlayer\",},filter: function (event,player){\n\t\t\t\t\tif(!player.countCards('h')) return false;\n\t\t\t\t\treturn event.player!=player&&event.card.name=='sha'&&!event.targets.contains(player)&&\n\t\t\t\t\tevent.player.inRange(player);\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar effect=0;\n\t\t\t\t\tfor(var i=0;i<trigger.targets.length;i++){\n\t\t\t\t\t\teffect-=get.effect(trigger.targets[i],trigger.card,trigger.player,player);\n\t\t\t\t\t}\n\t\t\t\t\tif(effect>0){\n\t\t\t\t\t\tif(get.color(trigger.card)!='black'){\n\t\t\t\t\t\t\teffect=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\teffect=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(trigger.targets.length==1){\n\t\t\t\t\t\t\tif(trigger.targets[0].hp==1){\n\t\t\t\t\t\t\t\teffect++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(effect>0&&trigger.targets[0].countCards('h')<player.countCards('h')){\n\t\t\t\t\t\t\t\teffect++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(effect>0){\n\t\t\t\t\t\t\teffect+=6;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCard('h',get.prompt2('jianzheng',trigger.player)).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.effect>=0){\n\t\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\t\tif(val<0) return 10-val;\n\t\t\t\t\t\t\treturn _status.event.effect-val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('effect',effect).set('logSkill',['jianzheng',trigger.player]);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool&&result.cards){\n\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t\ttrigger.targets.length=0;\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets1.length=0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(!event.isMine()) game.delayx();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.card){\n\t\t\t\t\t\tplayer.logSkill('jianzheng',trigger.player);\n\t\t\t\t\t\tplayer.lose(event.card,ui.cardPile,'visible','insert');\n\t\t\t\t\t\tplayer.$throw(event.card,1000);\n\t\t\t\t\t\tgame.log(player,'将',card,'置于牌堆顶');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(get.color(trigger.card)!='black'){\n\t\t\t\t\t\ttrigger.getParent().targets.push(player);\n\t\t\t\t\t\ttrigger.player.line(player);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.1\",expose: \"0.25\",},}","info":"当一名其他角色使用【杀】指定目标时，若你在其攻击范围内且你不是目标，则你可以将一张手牌置于牌堆顶，取消所有目标，然后若此【杀】不为黑色，你成为目标"},"zhuandui":{"name":"专对","script":"{shaRelated: \"true\",audio: \"2\",group: [\"zhuandui_respond\",\"zhuandui_use\"],subSkill: {use: {audio: \"zhuandui\",trigger: {player: \"useCardToPlayered\",},check: function (event,player){\n\t\t\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t\t\t},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.name=='sha'&&player.canCompare(event.target);\n\t\t\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseToCompare(trigger.target);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\ttrigger.getParent().directHit.add(trigger.target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},respond: {audio: \"zhuandui\",trigger: {target: \"useCardToTargeted\",},check: function (event,player){\n\t\t\t\t\t\t\treturn get.effect(player,event.card,event.player,player)<0;\n\t\t\t\t\t\t},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.name=='sha'&&player.canCompare(event.player);\n\t\t\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseToCompare(trigger.player);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(player._zhuandui_temp) return false;\n\t\t\t\t\t\tplayer._zhuandui_temp=true;\n\t\t\t\t\t\tvar bool=function(){\n\t\t\t\t\t\t\tif(arg.card.name!='sha'||get.attitude(player,arg.target)>=0||!arg.target.countCards('h')) return false;\n\t\t\t\t\t\t\tif(arg.target.countCards('h')==1&&(!arg.target.getEquip('bagua')||player.hasSkillTag('unequip',false,{\n\t\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\n\t\t\t\t\t\t\t\ttarget:arg.target,\n\t\t\t\t\t\t\t\tcard:arg.card\n\t\t\t\t\t\t\t})||player.hasSkillTag('unequip_ai',false,{\n\t\t\t\t\t\t\t\tname:arg.card?arg.card.name:null,\n\t\t\t\t\t\t\t\ttarget:arg.target,\n\t\t\t\t\t\t\t\tcard:arg.card\n\t\t\t\t\t\t\t}))) return true;\n\t\t\t\t\t\t\treturn player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn card!=arg.card&&(!arg.card.cards||!arg.card.cards.contains(card))&&get.value(card)<=4&&(card.number>=(11+arg.target.countCards('h')/2)||get.suit(card,player)=='heart');\n\t\t\t\t\t\t\t})>0;\n\t\t\t\t\t\t}();\n\t\t\t\t\t\tdelete player._zhuandui_temp;\n\t\t\t\t\t\treturn bool;\n\t\t\t\t\t},effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&current<0) return 0.7;\n\t\t\t\t\t\t},},},}","info":"当你使用【杀】指定目标/成为【杀】的目标后，你可以与目标角色/此【杀】使用者拼点，若你赢，此杀不能被【闪】响应/对你无效"},"tianbian":{"name":"天辩","script":"{audio: \"2\",enable: \"chooseCard\",check: function (event,player){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\treturn (!player.hasCard(function(card){\n\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\treturn val<0||(val<=4&&(card.number>=11||get.suit(card)=='heart'));\n\t\t\t\t\t},'h'))?20:0;\n\t\t\t\t},filter: function (event){\n\t\t\t\t\treturn event.type=='compare'&&!event.directresult;\n\t\t\t\t},onCompare: function (player){\n\t\t\t\t\treturn game.cardsGotoOrdering(get.cards()).cards;\n\t\t\t\t},group: \"tianbian_number\",subSkill: {number: {trigger: {player: \"compare\",target: \"compare\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(event.iwhile) return false;\n\t\t\t\t\t\t\tif(event.player==player){\n\t\t\t\t\t\t\t\treturn get.suit(event.card1)=='heart';//&&event.card1.vanishtag.contains('tianbian');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.suit(event.card2)=='heart';//&&event.card2.vanishtag.contains('tianbian');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tgame.log(player,'拼点牌点数视为','#yK');\n\t\t\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\t\t\ttrigger.num1=13;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttrigger.num2=13;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"你拼点时，可以改为用牌堆顶的一张牌进行拼点；当你拼点的牌亮出后，若此牌花色为红桃，则此牌的点数视为K。"},"funan":{"name":"复难","script":"{audio: \"2\",trigger: {global: [\"respond\",\"useCard\"],},filter: function (event,player){\n\t\t\t\t\tif(!event.respondTo) return false;\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(player!=event.respondTo[0]) return false;\n\t\t\t\t\tif(!player.hasSkill('funan_jiexun')){\n\t\t\t\t\t\tvar cards=[]\n\t\t\t\t\t\tif(get.itemtype(event.respondTo[1])=='card') cards.push(event.respondTo[1]);\n\t\t\t\t\t\telse if(event.respondTo[1].cards) cards.addArray(event.respondTo[1].cards);\n\t\t\t\t\t\treturn cards.filterInD('od').length>0;\n\t\t\t\t\t}\n\t\t\t\t\telse return event.cards.filterInD('od').length>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!player.hasSkill('funan_jiexun')){\n\t\t\t\t\t\tvar cards=[]\n\t\t\t\t\t\tif(get.itemtype(trigger.respondTo[1])=='card') cards.push(trigger.respondTo[1]);\n\t\t\t\t\t\telse if(trigger.respondTo[1].cards) cards.addArray(trigger.respondTo[1].cards);\n\t\t\t\t\t\tcards=cards.filterInD('od');\n\t\t\t\t\t\ttrigger.player.gain(cards,'gain2','log').gaintag.add('funan');\n\t\t\t\t\t\ttrigger.player.addTempSkill('funan_use');\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=trigger.cards.filterInD('od');\n\t\t\t\t\tplayer.gain(cards,'log','gain2');\n\t\t\t\t},subSkill: {jiexun: {charlotte: \"true\",mark: \"true\",intro: {content: \"你发动“复难”时，无须令其他角色获得你使用的牌\",},sub: \"true\",},use: {onremove: function (player){\n\t\t\t\t\t\t\tplayer.removeGaintag('funan');\n\t\t\t\t\t\t},charlotte: \"true\",mod: {cardEnabled2: function (card,player){\n\t\t\t\t\t\t\t\tif(get.itemtype(card)=='card'&&card.hasGaintag('funan')){\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"其他角色使用或打出牌响应你使用的牌时，你可令其获得你使用的牌（其本回合不能使用或打出这些牌），然后你获得其使用或打出的牌。"},"jiexun":{"name":"诫训","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},onremove: \"true\",direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num1=game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('ej',{suit:'diamond'});\n\t\t\t\t\t});\n\t\t\t\t\tvar num2=player.countMark('jiexun');\n\t\t\t\t\tevent.num1=num1;\n\t\t\t\t\tevent.num2=num2;\n\t\t\t\t\tvar str='令目标摸'+get.cnNumber(num1)+'张牌';\n\t\t\t\t\tif(num2){\n\t\t\t\t\t\tstr+='，然后弃置'+get.cnNumber(num2)+'张牌；若目标因此法弃置了所有牌，则你失去“诫训”，然后你发动“复难”时，无须令其获得你使用的牌';\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseTarget(get.prompt('jiexun'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn _status.event.coeff*get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('coeff',num1>=num2?1:-1).set('prompt2',str);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('jiexun',target);\n\t\t\t\t\t\tif(event.num1){\n\t\t\t\t\t\t\ttarget.draw(event.num1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.addMark('jiexun',1,false);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.num2){\n\t\t\t\t\t\tevent.target.chooseToDiscard(event.num2,true,'he');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool&&result.autochoose&&result.cards.length==result.rawcards.length){\n\t\t\t\t\t\tplayer.removeSkill('jiexun');\n\t\t\t\t\t\tplayer.addSkill('funan_jiexun');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可令一名其他角色摸等同于场上方块牌数的牌，然后弃置X张牌（X为此前该技能发动过的次数）。若有角色因此法弃置了所有牌，则你失去〖诫训〗，然后你发动〖复难〗时，无须令对方获得你使用的牌"},"shiyong":{"name":"恃勇","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&(get.color(event.card)=='red'||event.getParent(2).jiu==true);\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t},}","info":"锁定技，当你受到一次红色【杀】或【酒】【杀】造成的伤害后，须减1点体力上限"},"xinzhenjun":{"name":"镇军","script":"{audio: \"jieyue\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tfilterTarget:lib.filter.notMe,\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tprompt:get.prompt2('xinzhenjun'),\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(card.name=='sha'&&get.color(card)=='red'){\n\t\t\t\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\t\t\t\tvar current=game.players[i];\n\t\t\t\t\t\t\t\t\tif(current!=player&&get.attitude(player,current)>0&&current.hasValueTarget(card)) return 7;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar card=ui.selected.cards[0];\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(get.value(card)<0) return -att*2;\n\t\t\t\t\t\t\tif(target.countCards('h',{name:'sha',color:'red'})||target.hasSkill('wusheng')||target.hasSkill('new_rewusheng')||target.hasSkill('wushen')||(card.name=='sha'&&get.color(card)=='red'&&target.hasValueTarget(card))) return att*2;\n\t\t\t\t\t\t\tvar eff=0;\n\t\t\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\t\t\tif(target!=current&&get.distance(target,current,'attack')>1) return;\n\t\t\t\t\t\t\t\tvar eff2=get.damageEffect(current,player,player);\n\t\t\t\t\t\t\t\tif(eff2>eff) eff=eff2;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(att>0&&eff>0) eff+=2*att;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('xinzhenjun',target);\n\t\t\t\t\t\ttarget.gain(result.cards,player,'giveAuto')\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.chooseToUse({\n\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\treturn get.name(card)=='sha'&&get.color(card)!='black'&&lib.filter.cardEnabled.apply(this,arguments);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:'请使用一张不为黑色的【杀】，否则'+get.translation(player)+'可以对你或你攻击范围内的一名其他角色造成1点伤害',\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar num=1;\n\t\t\t\t\t\tgame.countPlayer2(function(current){\n\t\t\t\t\t\t\tcurrent.getHistory('damage',function(evt){\n\t\t\t\t\t\t\t\tif(evt.getParent(evt.notLink()?4:8)==event) num+=evt.num;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget('是否对'+get.translation(target)+'或其攻击范围内的一名角色造成1点伤害？',function(card,player,target){\n\t\t\t\t\t\t\treturn target==_status.event.targetx||_status.event.targetx.inRange(target);\n\t\t\t\t\t\t}).set('targetx',event.target).ai=function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets);\n\t\t\t\t\t\tresult.targets[0].damage('nocard');\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {damage: {trigger: {global: \"damage\",},forced: \"true\",silent: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tvar evt=event.getParent(event.notLink()?4:8);\n\t\t\t\t\t\t\treturn evt&&evt.name=='xinzhenjun'&&evt.player==player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw(trigger.num);\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段开始时，你可以将一张牌交给一名其他角色，令其选择是否使用一张不为黑色的【杀】。若其选择是，则你于此【杀】结算完成后摸1+X张牌(X为此【杀】造成的伤害总点数)。若其选择否，则你对其或其攻击范围内的一名其他角色造成1点伤害。"}},"card":{},"hero":{"xin_fazheng":{"name":"法正","attr":["male","shu",3,["xinenyuan","xinxuanhuo"],["die_audio"]]},"old_guanzhang":{"name":"关兴张苞","attr":["male","shu",4,["old_fuhun"],[]]},"old_wangyi":{"name":"王异","attr":["female","wei",3,["oldzhenlie","oldmiji"],[]]},"caozhang":{"name":"曹彰","attr":["male","wei",4,["jiangchi"],[]]},"guohuai":{"name":"郭淮","attr":["male","wei",4,["rejingce"],[]]},"zhangchunhua":{"name":"张春华","attr":["female","wei",3,["rejueqing","reshangshi"],[]]},"caozhi":{"name":"曹植","attr":["male","wei",3,["luoying","jiushi"],[]]},"caochong":{"name":"曹冲","attr":["male","wei",3,["chengxiang","renxin"],[]]},"xunyou":{"name":"荀攸","attr":["male","wei",3,["qice","zhiyu"],[]]},"xin_xushu":{"name":"徐庶","attr":["male","shu",3,["xinwuyan","xinjujian"],[]]},"xin_masu":{"name":"马谡","attr":["male","shu",3,["olsanyao","rezhiman"],[]]},"zhuran":{"name":"朱然","attr":["male","wu",4,["danshou"],[]]},"xusheng":{"name":"徐盛","attr":["male","wu",4,["xinpojun"],[]]},"wuguotai":{"name":"吴国太","attr":["female","wu",3,["ganlu","buyi"],[]]},"lingtong":{"name":"凌统","attr":["male","wu",4,["xuanfeng"],[]]},"liubiao":{"name":"刘表","attr":["male","qun",3,["rezishou","zongshi"],[]]},"yufan":{"name":"虞翻","attr":["male","wu",3,["zhiyan","zongxuan"],[]]},"chengong":{"name":"陈宫","attr":["male","qun",3,["mingce","zhichi"],[]]},"bulianshi":{"name":"步练师","attr":["female","wu",3,["old_anxu","zhuiyi"],[]]},"handang":{"name":"韩当","attr":["male","wu",4,["gongji","jiefan"],[]]},"fuhuanghou":{"name":"伏皇后","attr":["female","qun",3,["qiuyuan","zhuikong"],[]]},"zhonghui":{"name":"钟会","attr":["male","wei",4,["quanji","zili"],[]]},"jianyong":{"name":"简雍","attr":["male","shu",3,["qiaoshui","jyzongshi"],[]]},"madai":{"name":"马岱","attr":["male","shu",4,["mashu","oldqianxi"],[]]},"liufeng":{"name":"刘封","attr":["male","shu",4,["xiansi"],[]]},"manchong":{"name":"满宠","attr":["male","wei",3,["junxing","yuce"],[]]},"chenqun":{"name":"陈群","attr":["male","wei",3,["pindi","faen"],[]]},"sunluban":{"name":"孙鲁班","attr":["female","wu",3,["chanhui","jiaojin"],[]]},"guyong":{"name":"顾雍","attr":["male","wu",3,["shenxing","bingyi"],[]]},"caifuren":{"name":"蔡夫人","attr":["female","qun",3,["qieting","xianzhou"],[]]},"yj_jushou":{"name":"沮授","attr":["male","qun",3,["jianying","shibei"],[]]},"zhangsong":{"name":"张松","attr":["male","shu",3,["qiangzhi","xiantu"],[]]},"zhuhuan":{"name":"朱桓","attr":["male","wu",4,["fenli","pingkou"],[]]},"xiahoushi":{"name":"夏侯氏","attr":["female","shu",3,["qiaoshi","yanyu"],[]]},"panzhangmazhong":{"name":"潘璋马忠","attr":["male","wu",4,["duodao","anjian"],[]]},"zhoucang":{"name":"周仓","attr":["male","shu",4,["xinzhongyong"],[]]},"guanping":{"name":"关平","attr":["male","shu",4,["longyin"],[]]},"liaohua":{"name":"廖化","attr":["male","shu",4,["dangxian","fuli"],[]]},"chengpu":{"name":"程普","attr":["male","wu",4,["lihuo","chunlao"],[]]},"gaoshun":{"name":"高顺","attr":["male","qun",4,["xinxianzhen","jinjiu"],[]]},"caozhen":{"name":"曹真","attr":["male","wei",4,["xinsidi"],[]]},"wuyi":{"name":"吴懿","attr":["male","shu",4,["benxi"],[]]},"hanhaoshihuan":{"name":"韩浩史涣","attr":["male","wei",4,["shenduan","yonglve"],[]]},"caorui":{"name":"曹叡","attr":["male","wei",3,["huituo","mingjian","xingshuai"],["zhu"]]},"caoxiu":{"name":"曹休","attr":["male","wei",4,["qianju","qingxi"],[]]},"zhongyao":{"name":"钟繇","attr":["male","wei",3,["huomo","zuoding"],[]]},"liuchen":{"name":"刘谌","attr":["male","shu",4,["zhanjue","qinwang"],["zhu"]]},"zhangyi":{"name":"张嶷","attr":["male","shu",4,["wurong","shizhi"],[]]},"sunxiu":{"name":"孙休","attr":["male","wu",3,["yanzhu","xingxue","zhaofu"],["zhu"]]},"zhuzhi":{"name":"朱治","attr":["male","wu",4,["xinanguo"],[]]},"quancong":{"name":"全琮","attr":["male","wu",4,["yaoming"],[]]},"gongsunyuan":{"name":"公孙渊","attr":["male","qun",4,["huaiyi"],[]]},"guotufengji":{"name":"郭图逢纪","attr":["male","qun",3,["jigong","shifei"],[]]},"xin_liru":{"name":"李儒","attr":["male","qun",3,["xinjuece","xinmieji","xinfencheng"],[]]},"guohuanghou":{"name":"郭皇后","attr":["female","wei",3,["jiaozhao","danxin"],[]]},"liuyu":{"name":"刘虞","attr":["male","qun",2,["xinzhige","xinzongzuo"],[]]},"liyan":{"name":"李严","attr":["male","shu",3,["duliang","fulin"],[]]},"sundeng":{"name":"孙登","attr":["male","wu",4,["kuangbi"],[]]},"cenhun":{"name":"岑昏","attr":["male","wu",3,["jishe","lianhuo"],[]]},"huanghao":{"name":"黄皓","attr":["male","shu",3,["qinqing","huisheng"],[]]},"zhangrang":{"name":"张让","attr":["male","qun",3,["taoluan"],[]]},"sunziliufang":{"name":"孙资刘放","attr":["male","wei",3,["guizao","jiyu"],[]]},"xinxianying":{"name":"OL辛宪英","attr":["female","wei",3,["zhongjian","caishi"],[]]},"wuxian":{"name":"吴苋","attr":["female","shu",3,["fumian","daiyan"],[]]},"xushi":{"name":"徐氏","attr":["female","wu",3,["wengua","fuzhu"],[]]},"caojie":{"name":"曹节","attr":["female","qun",3,["shouxi","huimin"],[]]},"caiyong":{"name":"蔡邕","attr":["male","qun",3,["bizhuan","tongbo"],[]]},"jikang":{"name":"嵇康","attr":["male","wei",3,["qingxian","juexiang"],[]]},"qinmi":{"name":"秦宓","attr":["male","shu",3,["jianzheng","zhuandui","tianbian"],[]]},"xuezong":{"name":"薛综","attr":["male","wu",3,["funan","jiexun"],[]]},"old_huaxiong":{"name":"华雄","attr":["male","qun",6,["shiyong"],[]]},"re_yujin":{"name":"于禁","attr":["male","wei",4,["xinzhenjun"],[]]}}},"sp":{"name":"SP","skill":{"zhente":{"name":"贞特","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},logTarget: \"player\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\tif(player==event.player||get.color(event.card)!='black'||event.player.isDead()) return false;\n\t\t\t\t\tvar type=get.type(event.card);\n\t\t\t\t\treturn type=='basic'||type=='trick';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn !event.excluded.contains(player)&&get.effect(player,event.card,event.player,player)<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.player.chooseControl().set('choiceList',[\n\t\t\t\t\t\t'本回合内不能再使用黑色牌',\n\t\t\t\t\t\t'令'+get.translation(trigger.card)+'对'+get.translation(player)+'无效',\n\t\t\t\t\t]).set('prompt',get.translation(player)+'发动了【贞特】，请选择一项').set('ai',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar target=_status.event.getParent().player;\n\t\t\t\t\t\tvar card=_status.event.getTrigger().card;\n\t\t\t\t\t\tif(get.effect(target,card,player,player)<=0) return 1;\n\t\t\t\t\t\tvar hs=player.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.color(card,player)=='black'&&player.hasValueTarget(card,null,true);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(!hs.length) return 0;\n\t\t\t\t\t\tif(hs>1) return 1;\n\t\t\t\t\t\treturn Math.random()>0.5?0:1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==0) trigger.player.addTempSkill('zhente2');\n\t\t\t\t\telse trigger.excluded.add(player);\n\t\t\t\t},}","info":"每回合限一次，当你成为其他角色使用黑色基本牌或黑色普通锦囊牌的目标后，你可令使用者选择一项：1.本回合不能再使用黑色牌；2.此牌对你无效。 "},"zhiwei":{"name":"至微","script":"{audio: \"2\",trigger: {player: [\"enterGame\",\"showCharacterAfter\"],global: [\"gameDrawAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('zhiwei2')) return false;\n\t\t\t\t\tif(get.mode()=='guozhan') return event.name=='showCharacter'&&(event.toShow.contains('gz_luyusheng')||event.toShow.contains('luyusheng'));\n\t\t\t\t\treturn event.name!='showCharacter';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('请选择【至微】的目标','选择一名其他角色。该角色造成伤害后，你摸一张牌，该角色受到伤害后，你随机弃置一张手牌。你弃牌阶段弃置的牌均被该角色获得。',true,lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>0) return 1+att;\n\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhiwei',target);\n\t\t\t\t\t\tplayer.storage.zhiwei2=target;\n\t\t\t\t\t\tplayer.addSkill('zhiwei2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"游戏开始时，你选择一名其他角色。该角色造成伤害后，你摸一张牌，该角色受到伤害后，你随机弃置一张手牌。你弃牌阶段弃置的牌均被该角色获得。 "},"xincaishi":{"name":"才识","script":"{trigger: {player: \"phaseDrawBegin2\",},audio: \"caishi\",direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar choiceList=[\n\t\t\t\t\t\t'手牌上限-1且发动【忠鉴】时可以多展示对方的一张牌'\n\t\t\t\t\t];\n\t\t\t\t\tif(!trigger.numFixed){\n\t\t\t\t\t\tchoiceList.push('摸牌阶段多摸两张牌，然后本回合内不能发动【忠鉴】');\n\t\t\t\t\t\tif(trigger.num>0){\n\t\t\t\t\t\t\tchoiceList.unshift('摸牌阶段少摸一张牌，发动【忠鉴】时可以多展示自己的一张牌直到回合结束');\n\t\t\t\t\t\t\tevent.first=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseControl('cancel2');\n\t\t\t\t\tnext.set('choiceList',choiceList);\n\t\t\t\t\tnext.set('prompt',get.prompt('xincaishi'));\n\t\t\t\t\tnext.set('ai',function(){return 2});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('xincaishi');\n\t\t\t\t\t\tif(!event.first) result.index++;\n\t\t\t\t\t\ttrigger.num+=(result.index>1?2:(result.index-1));\n\t\t\t\t\t\tplayer.addTempSkill('xincaishi_'+result.index);\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {0: {mark: \"true\",intro: {content: \"发动【忠鉴】时可以多展示自己的一张牌\",},sub: \"true\",},1: {mark: \"true\",intro: {content: \"发动【忠鉴】时可以多展示目标角色的一张牌\",},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\t\t\treturn num-1;\n\t\t\t\t\t\t\t},},sub: \"true\",},2: {mark: \"true\",intro: {content: \"不能发动【忠鉴】直到回合结束\",},sub: \"true\",},},}","info":"摸牌阶段，你可以选择一项：1.少摸一张牌，然后本回合发动〖忠鉴〗时可以多展示自己的一张牌；2.本回合手牌上限-1，然后本回合发动〖忠鉴〗时可以多展示对方的一张牌；3.多摸两张牌，本回合不能发动〖忠鉴〗。"},"xinzhongjian":{"name":"忠鉴","script":"{audio: \"zhongjian\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn (!player.hasSkill('xincaishi_2'))&&player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (event,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h')>0;\n\t\t\t\t},filterCard: \"true\",selectCard: function (){\n\t\t\t\t\treturn _status.event.player.hasSkill('xincaishi_0')?[1,2]:[1,1];\n\t\t\t\t},check: function (){return 1},discard: \"false\",lose: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.suits=[];\n\t\t\t\t\tevent.nums=[];\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tevent.suits.push(get.suit(cards[i]));\n\t\t\t\t\t\tevent.nums.push(get.number(cards[i]));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.choosePlayerCard(target,'h',[1,player.hasSkill('xincaishi_1')?4:3],'请选择要展示的牌').ai=function(){return Math.random()};\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.cards2=result.cards.slice(0);\n\t\t\t\t\ttarget.showCards(event.cards2);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar card=event.cards2.shift();\n\t\t\t\t\tvar bool=false;\n\t\t\t\t\tif(event.suits.contains(get.suit(card))){\n\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\tif(event.nums.contains(get.number(card))){\n\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t\t}\n\t\t\t\t\tif(!bool&&player.countCards('h')) player.chooseToDiscard('h',true);\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(event.cards2.length) event.goto(3);\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -target.countCards('h');\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以展示自己的一张手牌，然后展示一名其他角色的至多三张手牌。其展示的牌中：每有一张花色相同，你摸一张牌；点数相同，你对其造成1点伤害；均不同，你弃置一张手牌。"},"wanggui":{"name":"望归","script":"{audio: \"2\",trigger: {player: \"damageEnd\",source: \"damageSource\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hasSkill('wanggui')&&!player.hasSkill('wanggui2');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addTempSkill('wanggui2');\n\t\t\t\t\tvar bool;\n\t\t\t\t\tvar guozhan=get.mode()=='guozhan';\n\t\t\t\t\tif(guozhan) bool=player.isUnseen(2);\n\t\t\t\t\telse bool=!player._xibing;\n\t\t\t\t\tif(bool){\n\t\t\t\t\t\tplayer.chooseTarget('望归：是否对一名'+(guozhan?'势力不同的':'其他')+'角色造成1点伤害？',guozhan?function(card,player,target){\n\t\t\t\t\t\t\treturn target.isEnemyOf(player);\n\t\t\t\t\t\t}:lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.goto(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('wanggui',target);\n\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t}\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\tplayer.chooseBool('望归：是否令所有与自己势力相同的角色各摸一张牌？');\n\t\t\t\t\t}\n\t\t\t\t\telse player.chooseTarget('望归：是否令至多三名角色各摸一张牌？',[1,3]).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.hasSkill('nogain')&&target!=_status.currentPhase) att/=10;\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar targets=result.targets;\n\t\t\t\t\t\tif(get.mode()=='guozhan') targets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\treturn current.isFriendOf(player);\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttargets.sortBySeat();\n\t\t\t\t\t\tplayer.logSkill('wanggui',targets);\n\t\t\t\t\t\tgame.asyncDraw(targets);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},}","info":"每回合限触发一次，当你受到或造成伤害后，若你本局游戏内：未发动过〖息兵〗，则你可对一名其他角色造成1点伤害。已发动过〖息兵〗，则你可令至多三名角色各摸一张牌。"},"xibing":{"name":"息兵","script":"{audio: \"2\",trigger: {global: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\tif(player==event.player||event.targets.length!=1||event.player.countCards('h')>=event.player.hp) return false;\n\t\t\t\t\tvar bool=function(card){\n\t\t\t\t\t\treturn (card.name=='sha'||get.type(card,false)=='trick')&&get.color(card,false)=='black';\n\t\t\t\t\t};\n\t\t\t\t\tif(!bool(event.card)) return false;\n\t\t\t\t\tvar evt=event.getParent('phaseUse');\n\t\t\t\t\tif(evt.player!=event.player) return false;\n\t\t\t\t\treturn event.player.getHistory('useCard',function(evtx){\n\t\t\t\t\t\treturn bool(evtx.card)&&evtx.getParent('phaseUse')==evt;\n\t\t\t\t\t})[0]==event.getParent();\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tvar target=event.player;\n\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\tvar num2=Math.min(5,target.hp-target.countCards('h'));\n\t\t\t\t\tif(num2<=0) return att<=0;\n\t\t\t\t\tvar num=target.countCards('h',function(card){\n\t\t\t\t\t\treturn target.hasValueTarget(card,null,true);\n\t\t\t\t\t});\n\t\t\t\t\tif(!num) return att>0;\n\t\t\t\t\treturn num>num2;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=Math.min(5,trigger.player.hp-trigger.player.countCards('h'));\n\t\t\t\t\tif(num>0) trigger.player.draw(num);\n\t\t\t\t\ttrigger.player.addTempSkill('xibing2');\n\t\t\t\t\tplayer._xibing=true;\n\t\t\t\t\tif(get.mode()!='guozhan'||player.isUnseen(2)||trigger.player.isUnseen(2)) event.finish();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar target=trigger.player;\n\t\t\t\t\tvar players1=[player.name1,player.name2];\n\t\t\t\t\tvar players2=[target.name1,target.name2];\n\t\t\t\t\tplayer.chooseButton(2,[\n\t\t\t\t\t\t'是否暗置自己和'+get.translation(target)+'的各一张武将牌？',\n\t\t\t\t\t\t'<div class=\"text center\">你的武将牌</div>',\n\t\t\t\t\t\t[players1,'character'],\n\t\t\t\t\t\t'<div class=\"text center\">'+get.translation(target)+'的武将牌</div>',\n\t\t\t\t\t\t[players2,'character'],\n\t\t\t\t\t]).set('players',players1).set('complexSelect',true).set('filterButton',function(button){\n\t\t\t\t\t\treturn (ui.selected.buttons.length==0)==(_status.event.players.contains(button.link));\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=trigger.player;\n\t\t\t\t\t\tplayer.hideCharacter(player.name1==result.links[0]?0:1);\n\t\t\t\t\t\ttarget.hideCharacter(target.name1==result.links[1]?0:1);\n\t\t\t\t\t\tplayer.addTempSkill('xibing3');\n\t\t\t\t\t\ttarget.addTempSkill('xibing3');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当一名其他角色在其出牌阶段内使用第一张黑色【杀】或黑色普通锦囊牌指定唯一角色为目标后，你可令该角色将手牌摸至当前体力值(至多摸五张)且本回合不能再使用手牌。"},"youlong":{"name":"游龙","script":"{enable: \"chooseToUse\",audio: \"2\",audioname: [\"key_sakuya\"],zhuanhuanji: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.youlong=false;\n\t\t\t\t\tif(!player.storage.youlong2) player.storage.youlong2=[];\n\t\t\t\t},hiddenCard: function (player,name){\n\t\t\t\t\tif(player.storage.youlong2.contains(name)||player.countDisabled()>=5) return false;\n\t\t\t\t\tif(player.hasSkill('youlong_'+(player.storage.youlong||false))) return false;\n\t\t\t\t\tvar type=get.type(name);\n\t\t\t\t\tif(player.storage.youlong) return type=='basic';\n\t\t\t\t\treturn type=='trick';\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.youlong2.contains(name)||player.countDisabled()>=5) return false;\n\t\t\t\t\tif(player.hasSkill('youlong_'+(player.storage.youlong||false))) return false;\n\t\t\t\t\tvar type=player.storage.youlong?'basic':'trick';\n\t\t\t\t\tfor(var name of lib.inpile){\n\t\t\t\t\t\tif(player.storage.youlong2.contains(name)) continue;\n\t\t\t\t\t\tif(get.type(name)!=type) continue;\n\t\t\t\t\t\tif(event.filterCard({name:name,isCard:true},player,event)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},chooseButton: {dialog: function (event,player){\n\t\t\t\t\t\tvar dialog=ui.create.dialog('游龙','hidden');\n\t\t\t\t\t\tvar table=document.createElement('div');\n\t\t\t\t\t\ttable.classList.add('add-setting');\n\t\t\t\t\t\ttable.style.margin='0';\n\t\t\t\t\t\ttable.style.width='100%';\n\t\t\t\t\t\ttable.style.position='relative';\n\t\t\t\t\t\tfor(var i=1;i<6;i++){\n\t\t\t\t\t\t\tif(player.isDisabled(i)) continue;\n\t\t\t\t\t\t\tvar td=ui.create.div('.shadowed.reduce_radius.pointerdiv.tdnode');\n\t\t\t\t\t\t\ttd.innerHTML='<span>'+get.translation('equip'+i)+'</span>';\n\t\t\t\t\t\t\ttd.link=i;\n\t\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\ttd[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttable.appendChild(td);\n\t\t\t\t\t\t\tdialog.buttons.add(td);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.content.appendChild(table);\n\t\t\t\t\t\tvar type=player.storage.youlong?'basic':'trick';\n\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\tfor(var name of lib.inpile){\n\t\t\t\t\t\t\tif(player.storage.youlong2.contains(name)) continue;\n\t\t\t\t\t\t\tif(get.type(name)!=type) continue;\n\t\t\t\t\t\t\tif(event.filterCard({name:name,isCard:true},player,event)){\n\t\t\t\t\t\t\t\tlist.push([type,'',name]);\n\t\t\t\t\t\t\t\tif(name=='sha'){\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'fire']);\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'thunder']);\n\t\t\t\t\t\t\t\t\tlist.push([type,'',name,'ice']);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.add([list,'vcard']);\n\t\t\t\t\t\treturn dialog;\n\t\t\t\t\t},filter: function (button){\n\t\t\t\t\t\tif(ui.selected.buttons.length&&typeof button.link==typeof ui.selected.buttons[0].link) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},select: \"2\",check: function (button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(typeof button.link=='number'){\n\t\t\t\t\t\t\tvar card=player.getEquip(button.link);\n\t\t\t\t\t\t\tif(card){\n\t\t\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\t\t\tif(val>0) return 0;\n\t\t\t\t\t\t\t\treturn 5-val;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tswitch(button.link){\n\t\t\t\t\t\t\t\tcase 3:return 4.5;break;\n\t\t\t\t\t\t\t\tcase 4:return 4.4;break;\n\t\t\t\t\t\t\t\tcase 5:return 4.3;break;\n\t\t\t\t\t\t\t\tcase 2:return (3-player.hp)*1.5;break;\n\t\t\t\t\t\t\t\tcase 1:{\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn (get.realAttitude||get.attitude)(player,current)<0&&get.distance(player,current)>1;\n\t\t\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\t\t\treturn 3.2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar name=button.link[2];\n\t\t\t\t\t\tvar evt=_status.event.getParent();\n\t\t\t\t\t\tif(get.type(name)=='basic'){\n\t\t\t\t\t\t\tif(name=='shan') return 2;\n\t\t\t\t\t\t\tif(evt.type=='dying'){\n\t\t\t\t\t\t\t\tif(get.attitude(player,evt.dying)<2) return false;\n\t\t\t\t\t\t\t\tif(name=='jiu') return 2.1;\n\t\t\t\t\t\t\t\treturn 1.9;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(evt.type=='phase') return player.getUseValue({name:name,nature:button.link[3],isCard:true});\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!['chuqibuyi','shuiyanqijunx','juedou','nanman','wanjian','shunshou','zhujinqiyuan'].contains(name)) return 0;\n\t\t\t\t\t\tvar card={name:name,isCard:true};\n\t\t\t\t\t\tif(['shunshou','zhujinqiyuan'].contains(card.name)){\n\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn get.attitude(player,current)!=0&&get.distance(player,current)<=1&&player.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\treturn player.getUseValue(card)-7;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn player.getUseValue(card)-4;\n\t\t\t\t\t},backup: function (links,player){\n\t\t\t\t\t\tif(typeof links[1]=='number') links.reverse();\n\t\t\t\t\t\tvar equip=links[0];\n\t\t\t\t\t\tvar name=links[1][2];\n\t\t\t\t\t\tvar nature=links[1][3];\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tfilterCard:function(){return false},\n\t\t\t\t\t\t\tselectCard:-1,\n\t\t\t\t\t\t\tequip:equip,\n\t\t\t\t\t\t\tviewAs:{\n\t\t\t\t\t\t\t\tname:name,\n\t\t\t\t\t\t\t\tnature:nature,\n\t\t\t\t\t\t\t\tisCard:true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpopname:true,\n\t\t\t\t\t\t\tprecontent:function(){\n\t\t\t\t\t\t\t\tplayer.logSkill('youlong');\n\t\t\t\t\t\t\t\tplayer.disableEquip(lib.skill.youlong_backup.equip);\n\t\t\t\t\t\t\t\tdelete event.result.skill;\n\t\t\t\t\t\t\t\tplayer.addTempSkill('youlong_'+(player.storage.youlong||false),'roundStart');\n\t\t\t\t\t\t\t\tplayer.storage.youlong=!player.storage.youlong;\n\t\t\t\t\t\t\t\tplayer.storage.youlong2.add(event.result.card.name);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},prompt: function (links,player){\n\t\t\t\t\t\tif(typeof links[1]=='number') links.reverse();\n\t\t\t\t\t\tvar equip='equip'+links[0];\n\t\t\t\t\t\tvar name=links[1][2];\n\t\t\t\t\t\tvar nature=links[1][3];\n\t\t\t\t\t\treturn '废除自己的'+get.translation(equip)+'栏，视为使用'+(get.translation(nature)||'')+get.translation(name);\n\t\t\t\t\t},},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\tif(arg=='respond') return false;\n\t\t\t\t\t\tif(!player.storage.youlong||player.hasSkill('youlong_true')) return false;\n\t\t\t\t\t\tvar name=(tag=='respondSha'?'sha':'shan');\n\t\t\t\t\t\treturn !player.storage.youlong2.contains(name);\n\t\t\t\t\t},order: \"1\",result: {player: \"1\",},},}","info":"转换技，阴，每轮限一次，你可以废除你的一个装备栏，视为使用一张未以此法使用过的普通锦囊牌；阳，每轮限一次，你可以废除你的一个装备栏，视为使用一张未以此法使用过的基本牌。"},"luanfeng":{"name":"鸾凤","script":"{audio: \"2\",audioname: [\"key_sakuya\"],trigger: {global: \"dying\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.maxHp>=player.maxHp&&event.player.hp<1;\n\t\t\t\t},limited: \"true\",skillAnimation: \"true\",animationColor: \"soil\",logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<4) return false;\n\t\t\t\t\tif(player.countCards('h',function(card){\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,event.player,'unchanged','cardSavable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\tvar savable=get.info(card).savable;\n\t\t\t\t\t\tif(typeof savable=='function') savable=savable(card,player,event.player);\n\t\t\t\t\t\treturn savable;\n\t\t\t\t\t})>=1-event.player.hp) return false;\n\t\t\t\t\tif(event.player==player||event.player==get.zhu(player)) return true;\n\t\t\t\t\treturn !player.hasUnknown();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('luanfeng');\n\t\t\t\t\ttrigger.player.recover(3-trigger.player.hp);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar num=trigger.player.countDisabled();\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tfor(var i=1;i<6;i++){\n\t\t\t\t\t\t\tif(trigger.player.isDisabled(i)) trigger.player.enableEquip(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.player.drawTo(6-num);\n\t\t\t\t\tif(player==trigger.player) player.storage.youlong2=[];\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，一名角色进入濒死状态时，若其体力上限不小于你，你可令其回复至3点体力，恢复其被废除的装备栏，令其手牌补至6-X张（X为以此法恢复的装备栏数量）。若该角色是你，重置你因“游龙”使用过的牌名。"},"mubing":{"name":"募兵","script":"{audio: \"2\",audioname: [\"sp_key_yuri\"],trigger: {player: \"phaseUseBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=player.storage.mubing2?4:3;\n\t\t\t\t\tevent.num=num;\n\t\t\t\t\tevent.cards=game.cardsGotoOrdering(get.cards(num)).cards;\n\t\t\t\t\tgame.log(player,'展示了',event.cards);\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tgame.broadcastAll(function(player,id,cards){\n\t\t\t\t\t\tvar str=get.translation(player)+'发动了【募兵】';\n\t\t\t\t\t\tvar dialog=ui.create.dialog(str,cards);\n\t\t\t\t\t\tdialog.videoId=id;\n\t\t\t\t\t},player,event.videoId,event.cards);\n\t\t\t\t\tgame.addVideo('showCards',player,[get.translation(player)+'发动了【募兵】',get.cardsInfo(event.cards)]);\n\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar numa=0;\n\t\t\t\t\tcards.sort(function(a,b){\n\t\t\t\t\t\treturn a.number-b.number;\n\t\t\t\t\t});\n\t\t\t\t\tfor(var i of cards){\n\t\t\t\t\t\tif(get.value(i,player)>0) numa+=get.number(i);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseToDiscard([1,Infinity],'h').set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar numa=_status.event.numa;\n\t\t\t\t\t\t//if(card.name!='tengjia'&&get.position(card)=='e'&&get.equipValue(card,player)<=0) return 14;\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tfor(var i of ui.selected.cards){\n\t\t\t\t\t\t\tnum+=i.number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num>=numa) return 0;\n\t\t\t\t\t\tif(card.number+num>=numa) return 15-get.value(card);\n\t\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\t\tvar min=_status.event.min;\n\t\t\t\t\t\t\tif(card.number<min&&!player.countCards('h',function(xcard){\n\t\t\t\t\t\t\t\treturn xcard!=card&&card.number+xcard.number>min;\n\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t\treturn card.number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Math.max(5-get.value(card),card.number);\n\t\t\t\t\t}).set('prompt',false).set('numa',numa).set('min',cards[0].number);\n\t\t\t\t\tvar func=function(id){\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\tif(dialog) dialog.content.firstChild.innerHTML='请选择要弃置的牌';\n\t\t\t\t\t};\n\t\t\t\t\tif(player==game.me) func(event.videoId);\n\t\t\t\t\telse if(player.isOnline()) player.send(func,event.videoId);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar numx=0;\n\t\t\t\t\tfor(var i of result.cards){\n\t\t\t\t\t\tnumx+=get.number(i);\n\t\t\t\t\t}\n\t\t\t\t\tevent.numx=numx;\n\t\t\t\t\tvar next=player.chooseButton([0,num]);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tvar num=0\n\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\tnum+=get.number(ui.selected.buttons[i].link);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (num+get.number(button.link)<=_status.event.maxNum);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('maxNum',event.numx);\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\treturn get.value(button.link,_status.event.player);\n\t\t\t\t\t});\n\t\t\t\t\tvar func=function(id){\n\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\tif(dialog) dialog.content.firstChild.innerHTML='请选择要获得的牌';\n\t\t\t\t\t};\n\t\t\t\t\tif(player==game.me) func(event.videoId);\n\t\t\t\t\telse if(player.isOnline()) player.send(func,event.videoId);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(!result.bool) event.cards=[];\n\t\t\t\t\telse event.cards=result.links;\n\t\t\t\t\t'step 4'\n\t\t\t\t\tgame.broadcastAll('closeDialog',event.videoId);\n\t\t\t\t\tif(!cards.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(cards,'log','gain2');\n\t\t\t\t\tif(!player.storage.mubing2){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.given=[];\n\t\t\t\t\t'step 5'\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tcards=cards.filter(function(card){\n\t\t\t\t\t\treturn hs.contains(card);\n\t\t\t\t\t});\n\t\t\t\t\tif(cards.length&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&!event.given.contains(current);\n\t\t\t\t\t})) player.chooseCardTarget({\n\t\t\t\t\t\tprompt:'是否将获得的牌中的任意张交给其他角色？',\n\t\t\t\t\t\tselectCard:[1,cards.length],\n\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\treturn _status.event.cards.contains(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player&&!_status.event.given.contains(target);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcards:cards,\n\t\t\t\t\t\tgiven:event.given,\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\t\tevent.given.push(target);\n\t\t\t\t\t\tevent.cards.removeArray(cards);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\t\tevent.goto(5);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以展示牌堆顶的三张牌。你可弃置任意张手牌，并可获得任意张点数之和不大于你弃置的牌点数之和的牌。"},"ziqu":{"name":"资取","script":"{audio: \"2\",audioname: [\"sp_key_yuri\"],trigger: {source: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&!player.getStorage('ziqu').contains(event.player)&&\n\t\t\t\t\tevent.player.countCards('he')>0;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar target=event.player;\n\t\t\t\t\tvar eff=get.damageEffect(target,player,player);\n\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\tif(eff>=0) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif(eff<=0) return true;\n\t\t\t\t\tif(target.hp==1) return false;\n\t\t\t\t\tif(event.num>1) return false;\n\t\t\t\t\tvar cards=target.getCards('he');\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.number(cards[i])>10) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tif(!player.storage.ziqu) player.storage.ziqu=[];\n\t\t\t\t\tplayer.storage.ziqu.push(trigger.player);\n\t\t\t\t\tplayer.markSkill('ziqu');\n\t\t\t\t\ttrigger.player.chooseCard(true,'he',function(card,player){\n\t\t\t\t\t\treturn !player.countCards('he',function(cardx){\n\t\t\t\t\t\t\treturn cardx.number>card.number;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length) player.gain(result.cards,trigger.player,'giveAuto');\n\t\t\t\t},intro: {content: \"已对$发动过\",},}","info":"每名角色限一次，当你对有牌的其他角色造成伤害后，你可以防止此伤害。然后其将其点数最大的牌交给你。"},"diaoling":{"name":"调令","script":"{audio: \"2\",audioname: [\"sp_key_yuri\"],trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"metal\",filter: function (event,player){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getAllHistory('gain',function(evt){\n\t\t\t\t\t\tvar evt2=evt.getParent();\n\t\t\t\t\t\tif(evt2.name=='mubing'&&evt2.player==player) num+=evt.cards.filter(function(card){\n\t\t\t\t\t\t\treturn card.name=='sha'||get.subtype(card,false)=='equip1'||(get.type2(card,false)=='trick'&&get.tag({name:card.name},'damage'));\n\t\t\t\t\t\t}).length;\n\t\t\t\t\t});\n\t\t\t\t\treturn num>=6;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('diaoling');\n\t\t\t\t\tplayer.storage.mubing2=true;\n\t\t\t\t\tplayer.markSkill('mubing_rewrite');\n\t\t\t\t\tplayer.chooseDrawRecover(2,true);\n\t\t\t\t},derivation: \"mubing_rewrite\",}","info":"觉醒技，准备阶段，若你已因〖募兵〗获得了6张或更多的【杀】或武器牌或伤害锦囊牌，则你回复1点体力或摸两张牌，然后修改〖募兵〗。"},"retuogu":{"name":"托孤","script":"{audio: \"tuogu\",trigger: {global: \"die\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.getStockSkills('仲村由理','天下第一').filter(function(skill){\n\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\treturn info&&!info.juexingji&&!info.hiddenSkill&&!info.zhuSkill&&!info.charlotte&&!info.limited;\n\t\t\t\t\t}).length>0;\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=trigger.player.getStockSkills('仲村由理','天下第一').filter(function(skill){\n\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\treturn info&&!info.juexingji&&!info.hiddenSkill&&!info.zhuSkill&&!info.charlotte&&!info.limited;\n\t\t\t\t\t});\n\t\t\t\t\tif(list.length==1) event._result={control:list[0]};\n\t\t\t\t\telse trigger.player.chooseControl(list).set('prompt','选择令'+get.translation(player)+'获得一个技能').set('forceDie',true).set('ai',function(){\n\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(player.storage.retuogu) player.removeSkill(player.storage.retuogu);\n\t\t\t\t\tplayer.storage.retuogu=result.control;\n\t\t\t\t\tplayer.markSkill('retuogu');\n\t\t\t\t\tplayer.addSkillLog(result.control);\n\t\t\t\t\tgame.broadcastAll(function(skill){\n\t\t\t\t\t\tvar list=[skill];\n\t\t\t\t\t\tgame.expandSkills(list);\n\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\tvar info=lib.skill[i];\n\t\t\t\t\t\t\tif(!info) continue;\n\t\t\t\t\t\t\tif(!info.audioname2) info.audioname2={};\n\t\t\t\t\t\t\tinfo.audioname2.caoshuang='tuogu';\n\t\t\t\t\t\t}\n\t\t\t\t\t},result.control);\n\t\t\t\t},mark: \"true\",intro: {content: \"当前托孤技能：$\",},}","info":"一名角色死亡时，你可以令其选择其武将牌上的一个技能（主公技，限定技，觉醒技，隐匿技等特殊技能除外），然后你获得其选择的技能并失去上次因〖托孤〗获得的技能。"},"shanzhuan":{"name":"擅专","script":"{trigger: {source: \"damageSource\",},audio: \"2\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=event.player&&!event.player.storage._disableJudge&&event.player.countCards('he')&&!event.player.countCards('j');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.choosePlayerCard(trigger.player,'he',get.prompt('shanzhuan',trigger.player)).set('ai',function(card){\n\t\t\t\t\t\tif(get.attitude(_status.event.player,_status.event.target)>=0) return 0;\n\t\t\t\t\t\treturn get.buttonValue(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('shanzhuan',trigger.player);\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\ttrigger.player.$throw(card);\n\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t\tif(get.type(card,false)=='delay') trigger.player.addJudge(card);\n\t\t\t\t\t\telse trigger.player.addJudge({name:get.color(card,false)=='red'?'lebu':'bingliang'},result.cards);\n\t\t\t\t\t}\n\t\t\t\t},group: \"shanzhuan_draw\",subfrequent: [\"draw\"],subSkill: {draw: {audio: \"shanzhuan\",trigger: {player: \"phaseEnd\",},frequent: \"true\",prompt: \"是否发动【擅专】摸一张牌？\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !player.getHistory('sourceDamage').length;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"当你对其他角色造成伤害后，若其判定区没有牌，则你你可以将其的一张牌置于其的判定区。若此牌不为延时锦囊牌且此牌为：红色，此牌视为【乐不思蜀】；黑色，此牌视为【兵粮寸断】。回合结束时，若你本回合内未造成伤害，你可摸一张牌。"},"yanjiao":{"name":"严教","script":"{audio: \"2\",ai: {order: \"10\",result: {player: \"1\",target: \"1.1\",},},enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar num=4;\n\t\t\t\t\tif(player.storage.xingshen){\n\t\t\t\t\t\tnum+=player.storage.xingshen;\n\t\t\t\t\t\tplayer.storage.xingshen=0;\n\t\t\t\t\t\tplayer.unmarkSkill('xingshen');\n\t\t\t\t\t}\n\t\t\t\t\tif(player.storage.olxingshen){\n\t\t\t\t\t\tnum+=player.storage.olxingshen;\n\t\t\t\t\t\tplayer.storage.olxingshen=0;\n\t\t\t\t\t\tplayer.unmarkSkill('olxingshen');\n\t\t\t\t\t}\n\t\t\t\t\tevent.cards=get.cards(num);\n\t\t\t\t\tplayer.showCards(event.cards);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.getedResult=lib.skill.yanjiao.getResult(cards);\n\t\t\t\t\tif(!event.getedResult.length){\n\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\tplayer.addTempSkill('yanjiao2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\ttarget.chooseControl(\"自动分配\",\"手动分配\").set(\"prompt\",\"【严教】：是否让系统自动分配方案？\").ai=function(){\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.control==\"手动分配\"){\n\t\t\t\t\t\tevent.map=[cards,[],[]];\n\t\t\t\t\t\t_status.noclearcountdown=true;\n\t\t\t\t\t\tevent.goto(8);\n\t\t\t\t\t}\n\t\t\t\t\telse if(!_status.connectMode){\n\t\t\t\t\t\tvar choiceList=ui.create.dialog('请选择一种方案','hidden','forcebutton');\n\t\t\t\t\t\tfor(var i=0;i<event.getedResult.length;i++){\n\t\t\t\t\t\t\tvar str='<div class=\"popup text\" style=\"width:calc(100% - 10px);display:inline-block\">方案'+get.cnNumber(i+1,true);\n\t\t\t\t\t\t\tstr+='<br>第一组：';\n\t\t\t\t\t\t\tvar current=event.getedResult[i];\n\t\t\t\t\t\t\tstr+=get.translation(current[0]);\n\t\t\t\t\t\t\tstr+='<br>第二组：';\n\t\t\t\t\t\t\tstr+=get.translation(current[1]);\n\t\t\t\t\t\t\tif(current[2].length){\n\t\t\t\t\t\t\t\tstr+='<br>剩余：';\n\t\t\t\t\t\t\t\tstr+=get.translation(current[2]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr+='</div>';\n\t\t\t\t\t\t\tvar next=choiceList.add(str);\n\t\t\t\t\t\t\tnext.firstChild.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tnext.firstChild.link=i;\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\tnext[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchoiceList.buttons.add(next.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.choiceList=choiceList;\n\t\t\t\t\t\ttarget.chooseButton(choiceList,true,function(button){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.bool&&result.links) event.index=result.links[0];\n\t\t\t\t\telse event.index=0;\n\t\t\t\t\tevent.togain=event.getedResult[event.index];\n\t\t\t\t\ttarget.showCards(event.togain[0],get.translation(target)+'分出的第一份牌');\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\ttarget.showCards(event.togain[1],get.translation(target)+'分出的第二份牌');\n\t\t\t\t\t\"step 6\"\n\t\t\t\t\ttarget.chooseControl().set('choiceList',[\n\t\t\t\t\t\t'获得'+get.translation(event.togain[0]),\n\t\t\t\t\t\t'获得'+get.translation(event.togain[1])\n\t\t\t\t\t]).ai=function(){return Math.random()<0.5?1:0};\n\t\t\t\t\t\"step 7\"\n\t\t\t\t\ttarget.gain(event.togain[result.index],'gain2');\n\t\t\t\t\tplayer.gain(event.togain[1-result.index],'gain2');\n\t\t\t\t\tif(event.togain[2].length){\n\t\t\t\t\t\tgame.cardsDiscard(event.togain[2]);\n\t\t\t\t\t\tif(event.togain[2].length>1) player.addTempSkill('yanjiao2');\n\t\t\t\t\t}\n\t\t\t\t\tevent.finish();\n\t\t\t\t\t\"step 8\"\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar dialogx=['严教：选择要移动的牌'];\n\t\t\t\t\tvar name=[\"未分配\",\"第一组\",\"第二组\"];\n\t\t\t\t\tfor(var i=0;i<event.map.length;i++){\n\t\t\t\t\t\tif(event.map[i].length>0){\n\t\t\t\t\t\t\tdialogx.push('<div class=\"text center\">'+name[i]+'</div>');\n\t\t\t\t\t\t\tdialogx.push(event.map[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\ttarget.send(function(dialogx,id){\n\t\t\t\t\t\t\tui.create.dialog.apply(null,dialogx).videoId=id;\n\t\t\t\t\t\t},dialogx,event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog=ui.create.dialog.apply(null,dialogx);\n\t\t\t\t\tevent.dialog.videoId=event.videoId;\n\t\t\t\t\tif(target!=game.me||_status.auto){\n\t\t\t\t\t\tevent.dialog.style.display='none';\n\t\t\t\t\t}\n\t\t\t\t\tvar next=target.chooseButton();\n\t\t\t\t\tnext.set('selectButton',function(){\n\t\t\t\t\t\tif(!_status.event.map[1].length||!_status.event.map[2].length) return 1;\n\t\t\t\t\t\tvar num1=0;\n\t\t\t\t\t\tfor(var i=0;i<_status.event.map[1].length;i++){\n\t\t\t\t\t\t\tnum1+=_status.event.map[1][i].number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar num2=0;\n\t\t\t\t\t\tfor(var j=0;j<_status.event.map[2].length;j++){\n\t\t\t\t\t\t\tnum2+=_status.event.map[2][j].number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (num1==num2?[0,1]:1);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('map',event.map);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('ai',function(){return -1});\n\t\t\t\t\tnext.set('forceAuto',true);\n\t\t\t\t\t\"step 9\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!result.links.length){\n\t\t\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\t\t\ttarget.send('closeDialog',event.videoId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.togain=[event.map[1],event.map[2],event.map[0]];\n\t\t\t\t\t\t\ttarget.showCards(event.togain[0],get.translation(target)+'分出的第一份牌');\n\t\t\t\t\t\t\tevent.goto(5);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\t\tvar controls=[\"取消分组\",\"移动到第一组\",\"移动到第二组\"];\n\t\t\t\t\t\t\tfor(var i=0;i<event.map.length;i++){\n\t\t\t\t\t\t\t\tif(event.map[i].contains(event.card)){\n\t\t\t\t\t\t\t\t\tcontrols.splice(i,1);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar func=function(card,id){\n\t\t\t\t\t\t\tvar dialog=get.idDialog(id);\n\t\t\t\t\t\t\t\tif(dialog){\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<dialog.buttons.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(dialog.buttons[i].link==card){\n\t\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('glow');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\tdialog.buttons[i].classList.add('unselectable');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\t\t\ttarget.send(func,event.card,event.videoId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target==game.me&&!_status.auto){\n\t\t\t\t\t\t\t\tfunc(event.card,event.videoId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget.chooseControl(controls);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\t\ttarget.send('closeDialog',event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\tplayer.addTempSkill('yanjiao2');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 10\"\n\t\t\t\t\tif(target.isOnline2()){\n\t\t\t\t\t\ttarget.send('closeDialog',event.videoId);\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\tvar position={\n\t\t\t\t\t\t\"取消分组\":0,\n\t\t\t\t\t\t\"移动到第一组\":1,\n\t\t\t\t\t\t\"移动到第二组\":2,\n\t\t\t\t\t}[result.control||\"取消分组\"];\n\t\t\t\t\tfor(var i=0;i<event.map.length;i++){\n\t\t\t\t\t\tif(event.map[i].contains(card)){\n\t\t\t\t\t\t\tevent.map[i].remove(card);\n\t\t\t\t\t\t\tevent.map[position].push(card);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.goto(8);\n\t\t\t\t},getResult: function (cards){\n\t\t\t\t\tvar cl=cards.length;\n\t\t\t\t\tvar maxmium=Math.pow(3,cl);\n\t\t\t\t\tvar filter=function(list){\n\t\t\t\t\t\tif(!list[1].length||!list[0].length) return false;\n\t\t\t\t\t\tvar num1=0;\n\t\t\t\t\t\tfor(var i=0;i<list[1].length;i++){\n\t\t\t\t\t\t\tnum1+=list[1][i].number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar num2=0;\n\t\t\t\t\t\tfor(var j=0;j<list[0].length;j++){\n\t\t\t\t\t\t\tnum2+=list[0][j].number;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num1==num2\n\t\t\t\t\t};\n\t\t\t\t\tvar results=[];\n\t\t\t\t\tfor(var i=0;i<maxmium;i++){\n\t\t\t\t\t\tvar result=[[],[],[]];\n\t\t\t\t\t\tfor(var j=0;j<cl;j++){\n\t\t\t\t\t\t\tresult[Math.floor((i%Math.pow(3,j+1))/Math.pow(3,j))].push(cards[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(filter(result)) results.push(result);\n\t\t\t\t\t}\n\t\t\t\t\tvar filterSame=function(list1,list2){\n\t\t\t\t\t\tif(list1[1].length==list2[0].length&&list1[0].length==list2[1].length){\n\t\t\t\t\t\t\tfor(var i=0;i<list1[0].length;i++){\n\t\t\t\t\t\t\t\tif(!list2[1].contains(list1[0][i])) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor(var i=0;i<list1[1].length;i++){\n\t\t\t\t\t\t\t\tif(!list2[0].contains(list1[1][i])) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0;i<results.length;i++){\n\t\t\t\t\t\tfor(var j=i+1;j<results.length;j++){\n\t\t\t\t\t\t\tif(filterSame(results[i],results[j])) results.splice(j--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresults.sort(function(a,b){\n\t\t\t\t\t\treturn a[2].length-b[2].length;\n\t\t\t\t\t});\n\t\t\t\t\treturn results;\n\t\t\t\t},}","info":"出牌阶段限一次，你可以选择一名其他角色并从牌堆顶亮出四张牌。该角色将这些牌分成点数之和相等的两组，你与其各获得其中一组，然后将剩余未分组的牌置入弃牌堆。若未分组的牌超过一张，则你本回合手牌上限-1。"},"olxingshen":{"name":"省身","script":"{trigger: {player: \"damageEnd\",},frequent: \"true\",audio: \"xingshen\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.draw();\n\t\t\t\t\tif(get.isLuckyStar(player)||Math.random()<0.5) next.num=2;\n\t\t\t\t\tvar num=player.countMark('olxingshen');\n\t\t\t\t\tif(num<6) player.addMark('olxingshen',Math.min(6-num,player.getDamagedHp()),false)\n\t\t\t\t},intro: {content: \"下一次发动〖严教〗时多展示X张牌\",},}","info":"当你受到伤害后，你可以随机摸至多两张牌。若如此做，你获得X个“省”，且下一次发动〖严教〗展示牌时移去所有“省”并多展示等量的牌。（X为你已损失的体力值，且你至多拥有6个“省”）"},"zlhuji":{"name":"虎骑","script":"{mod: {globalFrom: function (player,target,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player!=_status.currentPhase;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar func=function(result){\n\t\t\t\t\t\tif(get.color(result)=='red') return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tif(get.itemtype(trigger.source)!='player'||!player.canUse('sha',trigger.source,false)) func=function(result){\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\telse if(get.effect(trigger.source,{name:'sha'},player,player)<0) func=function(result){\n\t\t\t\t\t\tif(get.color(result)=='red') return -1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t};\n\t\t\t\t\tplayer.judge(func);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.color=='red'&&get.itemtype(trigger.source)=='player'&&player.canUse('sha',trigger.source,false)){\n\t\t\t\t\t\tplayer.useCard({name:'sha',isCard:true},trigger.source,false,'noai');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，你与其他角色的距离-1，当你于回合外受到伤害后，你可进行判定，若结果为红色，视为你对伤害来源使用一张【杀】（无距离限制）。"},"zlshoufu":{"name":"授符","script":"{enable: \"phaseUse\",usable: \"1\",delay: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar filterTarget=function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!target.hasSkill('zlshoufu2');\n\t\t\t\t\t};\n\t\t\t\t\tif(!player.countCards('h')||!game.hasPlayer(function(current){\n\t\t\t\t\t\treturn filterTarget(null,player,current);\n\t\t\t\t\t})) event.finish();\n\t\t\t\t\telse player.chooseCardTarget({\n\t\t\t\t\t\tforced:true,\n\t\t\t\t\t\tprompt:'将一张手牌作为“箓”置于其他角色的武将牌上',\n\t\t\t\t\t\tfilterTarget:filterTarget,\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tposition:'h',\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tif(get.type(card,false)=='equip') return 1-get.value(card);\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att>0) return -att;\n\t\t\t\t\t\t\treturn -att/get.distance(player,target,'absolute');\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\tplayer.lose(cards,ui.special,'toStorage');\n\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\tplayer.$give(cards[0],target,false);\n\t\t\t\t\tgame.log(player,'将',cards[0],'作为“箓”置于',target,'的武将牌上');\n\t\t\t\t\ttarget.addSkill('zlshoufu2');\n\t\t\t\t\t//target.storage.zlshoufu2_markcount=0;\n\t\t\t\t\ttarget.markAuto('zlshoufu2',cards);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},ai: {order: \"1\",result: {player: function (player){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(target){\n\t\t\t\t\t\t\t\treturn target!=player&&!target.hasSkill('zlshoufu2')&&get.attitude(player,target)<0;\n\t\t\t\t\t\t\t})||!game.hasPlayer(function(target){\n\t\t\t\t\t\t\t\treturn target!=player&&!target.hasSkill('zlshoufu2')&&get.attitude(player,target)>0;\n\t\t\t\t\t\t\t})) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可摸一张牌，然后将一张手牌置于一名没有【箓】的角色的武将牌上，称为【箓】；其不能使用和打出与【箓】同类型的牌。该角色受到伤害后，或于弃牌阶段弃置至少两张与【箓】同类型的牌后，将【箓】置入弃牌堆。"},"kuangfu":{"name":"狂斧","script":"{trigger: {source: \"damageSource\",},direct: \"true\",audio: \"2\",filter: function (event){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&event.player.countCards('e');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar neg=get.attitude(player,trigger.player)<=0;\n\t\t\t\t\tplayer.choosePlayerCard('e',trigger.player).set('ai',function(button){\n\t\t\t\t\t\tif(_status.event.neg){\n\t\t\t\t\t\t\treturn get.buttonValue(button);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('neg',neg);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('kuangfu');\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\tif(player.isEmpty(get.subtype(event.card))){\n\t\t\t\t\t\t\tplayer.chooseBool('是否将'+get.translation(event.card)+'置入自己的装备区？').ai=function(){\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event._result={bool:false};\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.$give(event.card,player,false);\n\t\t\t\t\t\tplayer.equip(event.card);\n\t\t\t\t\t}\n\t\t\t\t\telse trigger.player.discard(event.card);\n\t\t\t\t},}","info":"当你使用【杀】造成伤害时，你可以选择一项：弃置其装备区内的一张牌，或将其装备区内的一张牌移动到你的装备区内。"},"bizheng":{"name":"弼政","script":"{trigger: {player: \"phaseDrawEnd\",},direct: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('bizheng'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.countCards('h')>player.maxHp) return 0;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=0||target.hasSkillTag('nogain')) return 0;\n\t\t\t\t\t\tif(target.maxHp-target.countCards('h')>=2) return att;\n\t\t\t\t\t\treturn att/2;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('bizheng',target);\n\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(player.countCards('h')>player.maxHp) player.chooseToDiscard(2,'he',true);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(target.countCards('h')>target.maxHp) target.chooseToDiscard(2,'he',true);\n\t\t\t\t},ai: {expose: \"0.25\",},}","info":"摸牌阶段结束时，你可以令一名其他角色摸两张牌。然后，若你的手牌数大于体力上限，你弃置两张牌。若其的手牌数大于体力上限，其弃置两张牌。"},"yidian":{"name":"佚典","script":"{trigger: {player: \"useCard2\",},filter: function (event,player){\n\t\t\t\t\tvar info=get.info(event.card);\n\t\t\t\t\tif(info.allowMultiple==false) return false;\n\t\t\t\t\tif(event.targets&&!info.multitarget){\n\t\t\t\t\t\tfor(var i=0;i<ui.discardPile.childElementCount;i++){\n\t\t\t\t\t\t\tif(ui.discardPile.childNodes[i].name==event.card.name) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn lib.filter.targetEnabled2(event.card,player,current)&&!event.targets.contains(current);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar prompt2='为'+get.translation(trigger.card)+'增加一个目标'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('yidian'),function(card,player,target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(_status.event.targets.contains(target)) return false;\n\t\t\t\t\t\treturn lib.filter.targetEnabled2(_status.event.card,player,target);\n\t\t\t\t\t}).set('prompt2',prompt2).set('ai',function(target){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,trigger.card,player,player);\n\t\t\t\t\t}).set('targets',trigger.targets).set('card',trigger.card);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.isMine()&&!event.isOnline()) game.delayx();\n\t\t\t\t\t\tevent.targets=result.targets;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.targets){\n\t\t\t\t\t\tplayer.logSkill('yidian',event.targets);\n\t\t\t\t\t\ttrigger.targets.addArray(event.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.25\",},}","info":"当你使用牌选择目标时，若弃牌堆中没有与此牌名称相同的牌，则你可以为此牌增加一个目标（无距离限制）。"},"spyicong":{"name":"义从","script":"{trigger: {player: \"phaseDiscardEnd\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard('he',[1,player.countCards('he')],get.prompt2('spyicong')).set('ai',function(card){\n\t\t\t\t\t\tif(card.name=='du') return 10;\n\t\t\t\t\t\tif(ui.selected.cards.length) return -1;\n\t\t\t\t\t\treturn 4-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('spyicong');\n\t\t\t\t\t\tif(!player.storage.spyicong) player.storage.spyicong=[];\n\t\t\t\t\t\tplayer.storage.spyicong.addArray(result.cards);\n\t\t\t\t\t\tplayer.$giveAuto(result.cards.length,player,false);\n\t\t\t\t\t\tgame.log(player,'扣置了'+get.cnNumber(player.lose(result.cards,'toStorage',ui.special).cards.length)+'张【扈】');\n\t\t\t\t\t\tplayer.markSkill('spyicong');\n\t\t\t\t\t}\n\t\t\t\t},mod: {globalTo: function (from,to,num){\n\t\t\t\t\t\tif(to.storage.spyicong&&to.storage.spyicong.length) return num+to.storage.spyicong.length;\n\t\t\t\t\t},},marktext: \"扈\",intro: {name: \"义从\",content: \"cardCount\",onunmark: \"throw\",},}","info":"弃牌阶段结束时，你可以将任意张牌置于你的武将牌上，称为「扈」。每有一张「扈」，其他角色与你计算距离时便+1。"},"sptuji":{"name":"突骑","script":"{trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.spyicong&&player.storage.spyicong.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=player.storage.spyicong.length;\n\t\t\t\t\tplayer.addMark('sptuji2',num,false);\n\t\t\t\t\tplayer.addTempSkill('sptuji2');\n\t\t\t\t\tplayer.unmarkSkill('spyicong');\n\t\t\t\t\tif(num<=1) player.draw();\n\t\t\t\t},}","info":"准备开始时，你将所有「扈」置于弃牌堆，然后你本回合内计算与其他角色的距离时-X。若X不大于1，你摸一张牌。（X为以此法进入弃牌堆的「扈」的数量）"},"spzhaoxin":{"name":"昭心","script":"{trigger: {player: \"phaseDrawEnd\",},check: function (event,player){\n\t\t\t\t\treturn player.getUseValue({name:'sha',isCard:true})>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.chooseUseTarget('sha',false);\n\t\t\t\t},}","info":"摸牌阶段结束时，你可以展示所有手牌，然后视为使用一张【杀】。"},"splanggu":{"name":"狼顾","script":"{trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn get.itemtype(event.source)=='player';\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.judge();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(trigger.source.countCards('h')>0){\n\t\t\t\t\t\tvar next=player.discardPlayerCard(trigger.source,'h',[1,Infinity]);\n\t\t\t\t\t\tnext.set('suit',result.suit);\n\t\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\t\treturn get.suit(button.link)==_status.event.suit;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('visible',true);\n\t\t\t\t\t}\n\t\t\t\t},group: \"splanggu_rewrite\",}","info":"当你受到有来源的伤害后，你可以进行判定（此判定结果生效前，你可以打出一张手牌替换判定牌）。然后你可以观看伤害来源的手牌并弃置其中的任意张与判定结果花色相同的牌。"},"spfuluan":{"name":"扶乱","script":"{enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.inRange(target);\n\t\t\t\t},selectCard: \"3\",position: \"he\",check: function (card){\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},complexCard: \"true\",filterCard: function (card,player){\n\t\t\t\t\tif(!ui.selected.cards.length) return player.countCards('he',{suit:get.suit(card)})>2;\n\t\t\t\t\treturn get.suit(card)==get.suit(ui.selected.cards[0]);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.turnOver();\n\t\t\t\t\tplayer.addTempSkill('spfuluan2');\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.isTurnedOver()) return 2;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置三张花色相同的牌并选择攻击范围内的一名角色。若如此做，该角色翻面且你不能使用【杀】直到回合结束"},"spshude":{"name":"淑德","script":"{trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')<player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.drawTo(player.maxHp);\n\t\t\t\t},}","info":"结束阶段开始时，你可以将手牌补至体力上限。"},"spmingjian":{"name":"明鉴","script":"{trigger: {global: \"phaseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseCard(get.prompt2('spmingjian',trigger.player),'he');\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tvar target=_status.event.getTrigger().player;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(player,target)>0&&target.countCards('j')>0) return 5-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('filterCard',function(card,player){\n\t\t\t\t\t\tif(get.position(card)=='e') return lib.filter.cardDiscardable.apply(this,arguments);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t//next.set('logSkill',['spmingjian',trigger.player]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('spmingjian',trigger.player);\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\tif(get.position(card)=='e') event._result={index:0};\n\t\t\t\t\t\telse if(!lib.filter.cardDiscardable(card,player,event)) event._result={index:1};\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar name=get.translation(trigger.player);\n\t\t\t\t\t\t\tplayer.chooseControl().set('choiceList',[\n\t\t\t\t\t\t\t\t'令'+name+'跳过本回合的判定阶段',\n\t\t\t\t\t\t\t\t'令'+name+'于本回合的判定中不触发「判定结果生效前」的时机',\n\t\t\t\t\t\t\t]).set('ai',function(){return 0});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.discard(card);\n\t\t\t\t\t\ttrigger.player.skip('phaseJudge');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.lose(card,ui.special,'toStorage');\n\t\t\t\t\t\ttrigger.player.addSkill('spmingjian_charlotte');\n\t\t\t\t\t\ttrigger.player.storage.spmingjian_charlotte.add(card);\n\t\t\t\t\t\ttrigger.player.markSkill('spmingjian_charlotte');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.25\",},}","info":"一名角色的回合开始时，你可以选择一项：①弃置一张牌，然后其跳过本回合的判定阶段。②将一张手牌置于其武将牌上，然后其本回合内进行判定时不触发「判定结果生效前」的时机，且其回合结束时将此牌置入弃牌堆。"},"spyinzhi":{"name":"隐智","script":"{trigger: {player: \"damageEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tvar cards=game.cardsGotoOrdering(get.cards(2)).cards;\n\t\t\t\t\tplayer.showCards(cards);\n\t\t\t\t\tevent.count2=0;\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.suit(cards[i])=='spade'){\n\t\t\t\t\t\t\tevent.count2++;\n\t\t\t\t\t\t\tcards.splice(i--,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevent.cards=cards;\n\t\t\t\t\tif(!event.count2||!trigger.source) event.goto(4);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.count2--;\n\t\t\t\t\tif(trigger.source.countCards('h')>0){\n\t\t\t\t\t\tplayer.chooseTarget('令一名角色获得'+get.translation(trigger.source)+'的一张手牌',function(card,player,target){\n\t\t\t\t\t\t\tvar source=_status.event.source;\n\t\t\t\t\t\t\treturn target!=source&&source.countGainableCards(target,'h')>0;\n\t\t\t\t\t\t}).set('source',trigger.source);\n\t\t\t\t\t}\n\t\t\t\t\telse event.goto(4);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line([trigger.source,target],'green');\n\t\t\t\t\t\ttarget.gainPlayerCard(trigger.source,'h',true);\n\t\t\t\t\t\tif(event.count2) event.goto(2)\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(cards.length) player.gain(cards,'gain2','log');\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.count>0){\n\t\t\t\t\t player.chooseBool(get.prompt2('spyinzhi')).set('frequentSkill','spyinzhi');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('spyinzhi');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t};\n\t\t\t\t},}","info":"当你受到1点伤害后，你可以展示牌堆顶的两张牌。若其中有黑桃牌，则你可以进行至多X次「令一名角色获得伤害来源的一张手牌」的步骤。然后获得其余的牌。（X为其中黑桃牌的数量）"},"sphuangen":{"name":"皇恩","script":"{trigger: {global: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\tif(!event.isFirstTarget) return false;\n\t\t\t\t\tif(get.type(event.card)!='trick') return false;\n\t\t\t\t\tif(get.info(event.card).multitarget) return false;\n\t\t\t\t\tif(event.targets.length<2) return false;\n\t\t\t\t\treturn player.hp>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('sphuangen'),\n\t\t\t\t\t\t[1,Math.min(player.hp,trigger.targets.length)],function(card,player,target){\n\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.effect(target,trigger.card,trigger.player,_status.event.player);\n\t\t\t\t\t}).set('targets',trigger.targets);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('sphuangen',result.targets);\n\t\t\t\t\t\ttrigger.excluded.addArray(result.targets);\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"一名角色使用锦囊牌指定目标时，若此牌的目标数大于1，则你可以令此牌对其中的至多X个目标无效，然后摸一张牌。（X为你的体力值）"},"sphantong":{"name":"汉统","script":"{trigger: {player: \"loseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.type=='discard'&&event.getParent(3).name=='phaseDiscard'&&event.cards.filterInD('d').length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(!player.storage.sphantong) player.storage.sphantong=[];\n\t\t\t\t\tvar cards=trigger.cards.filterInD('d');\n\t\t\t\t\tplayer.storage.sphantong.addArray(cards);\n\t\t\t\t\tplayer.$gain2(cards);\n\t\t\t\t\tgame.log(player,'将',cards,'置于武将牌上');\n\t\t\t\t\tplayer.markSkill('sphantong');\n\t\t\t\t},group: [\"sphantong_gain\"],derivation: [\"hujia\",\"jijiang\",\"jiuyuan\",\"xueyi\"],marktext: \"诏\",intro: {content: \"cards\",onunmark: \"throw\",},}","info":"当你的牌因弃牌阶段的游戏规则要求而进入弃牌堆后，你可以将这些牌置于你的武将牌上，称为「诏」。一名角色的回合开始时，你可以弃置一张「诏」并获得〖护驾〗/〖激将〗/〖救援〗/〖血裔〗中的一个技能直至当前回合结束。"},"xinfenyue":{"name":"奋钺","script":"{enable: \"phaseUse\",audio: \"fenyue\",filter: function (event,player){\n\t\t\t\t\tvar num=game.players.length-player.getFriends(true).length;\n\t\t\t\t\tif((player.getStat().skill.xinfenyue||0)>=num) return false;\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (event,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool) event.finish();\n\t\t\t\t\tevent.num=result.num1;\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(num<=5&&target.countGainableCards(player,'he')>0) player.gainPlayerCard(target,'he',true);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(num<=9){\n\t\t\t\t\t\tvar card=get.cardPile2(function(x){\n\t\t\t\t\t\t\treturn x.name=='sha';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card) player.gain(card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(num<=13){\n\t\t\t\t\t\tvar card={name:'sha',nature:'thunder'};\n\t\t\t\t\t\tif(player.canUse(card,target,false)) player.useCard(card,target,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar sort=function(a,b){\n\t\t\t\t\t\t\t\treturn b.number-a.number;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar ps=player.getCards('h').sort(sort);\n\t\t\t\t\t\t\tvar ts=target.getCards('h').sort(sort);\n\t\t\t\t\t\t\tif(ps[0].number>ts[0].number){\n\t\t\t\t\t\t\t\tvar effect=get.effect(target,{name:'sha',nature:'thunder'},player,player)\n\t\t\t\t\t\t\t\tif(ps[0].number<6&&target.countCards('he')>1) effect-=2;\n\t\t\t\t\t\t\t\tif(ps[0].number<10) effect-=1;\n\t\t\t\t\t\t\t\treturn effect;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn ps.length>=ts.length?-0.5:0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限X次（X为与你不同阵营的存活角色数），你可以与一名其他角色拼点，若你赢，根据你拼点牌的点数依次执行以下效果：不大于5，你获得其一张牌；不大于9，你获得牌堆里的一张【杀】; 不大于K，视为你对其使用一张雷【杀】。"},"neifa":{"name":"内伐","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\t_status.noclearcountdown=true;\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countGainableCards(player,'ej')>0;\n\t\t\t\t\t})){\n\t\t\t\t\t\tplayer.chooseControl('cancel2').set('choiceList',[\n\t\t\t\t\t\t\t'摸两张牌，然后弃置一张牌',\n\t\t\t\t\t\t\t'获得场上的一张牌，然后弃置一张牌',\n\t\t\t\t\t\t]).set('prompt',get.prompt('neifa')).set('ai',function(){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\tvar att=get.attitude(player,current);\n\t\t\t\t\t\t\t\tif(att==0) return false;\n\t\t\t\t\t\t\t\tif(att<0) return current.countCards('e',function(card){\n\t\t\t\t\t\t\t\t\treturn get.value(card,current)>5;\n\t\t\t\t\t\t\t\t})>0;\n\t\t\t\t\t\t\t\treturn current.countCards('ej',function(card){\n\t\t\t\t\t\t\t\t\treturn get.position(card)=='j'||get.value(card,current)<=0;\n\t\t\t\t\t\t\t\t})>0;\n\t\t\t\t\t\t\t})) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseControl('ok','cancel2').set('prompt',get.prompt2('neifa'));\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2'){\n\t\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.index==1){\n\t\t\t\t\t\tplayer.chooseTarget('请选择一名角色，获得其装备区或判定区内的一张牌',true,function(card,player,target){\n\t\t\t\t\t\t\treturn target.countGainableCards(player,'ej')>0;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att>0&&target.countCards('ej',function(card){\n\t\t\t\t\t\t\t\treturn get.position(card)=='j'||get.value(card,target)<=0;\n\t\t\t\t\t\t\t})) return 2*att;\n\t\t\t\t\t\t\telse if(att<0&&target.countCards('e',function(card){\n\t\t\t\t\t\t\t\treturn get.value(card,target)>5;\n\t\t\t\t\t\t\t})) return -att;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('neifa');\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\tevent.goto(3)\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tdelete _status.noclearcountdown;\n\t\t\t\t\tif(!_status.noclearcountdown){\n\t\t\t\t\t\tgame.stopCountChoose();\n\t\t\t\t\t}\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('neifa',target);\n\t\t\t\t\t\tplayer.gainPlayerCard(target,'ej',true);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.chooseToDiscard(true,'he').set('ai',function(cardx){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\tvar muniu=player.getEquip('muniu');\n\t\t\t\t\t\tvar subs=[];\n\t\t\t\t\t\tif(muniu&&muniu.cards) hs=hs.concat(muniu.cards);\n\t\t\t\t\t\tif(get.type(cardx)=='basic'){\n\t\t\t\t\t\t\tvar shas=hs.filter(function(card){\n\t\t\t\t\t\t\t\treturn card!=cardx&&get.name(card,player)=='sha'&&player.hasValueTarget(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar numx=player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn get.type(card,player)!='basic';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnum+=Math.min(numx,Math.max(0,shas.length-player.getCardUsable('sha')))*0.7;\n\t\t\t\t\t\t\tnum+=Math.min(player.getCardUsable('sha')+numx,shas.filter(function(card){\n\t\t\t\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn player.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t\t\t})>1;\n\t\t\t\t\t\t\t}).length)*1.1;\n\t\t\t\t\t\t\tvar taos=Math.min(player.maxHp-player.hp,hs.filter(function(card){\n\t\t\t\t\t\t\t\treturn cardx!=card&&get.name(card,player)=='tao';\n\t\t\t\t\t\t\t}).length);\n\t\t\t\t\t\t\tnum+=taos*player.getDamagedHp()*1.2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar numx=Math.sqrt(Math.min(5,player.countCards('h',function(card){\n\t\t\t\t\t\t\t\treturn get.type(card,player)=='basic';\n\t\t\t\t\t\t\t})));\n\t\t\t\t\t\t\tif(numx) num+=numx*Math.min(2,hs.filter(function(card){\n\t\t\t\t\t\t\t\tif(card==cardx||get.type(card)!='equip'||!player.hasUseTarget(card)) return false;\n\t\t\t\t\t\t\t\tsubs.add(get.subtype(card));\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}).length)*(2.5+player.countCards('e'))/2.5;\n\t\t\t\t\t\t\tnum+=hs.filter(function(card){\n\t\t\t\t\t\t\t\treturn card!=cardx&&get.type2(card)=='trick'&&player.hasValueTarget(card);\n\t\t\t\t\t\t\t}).length*0.65;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.position(cardx)=='e'&&cardx.name!='muniu'&&subs.contains(get.subtype(card))) num+=3;\n\t\t\t\t\t\treturn num*1.5-get.value(cardx);\n\t\t\t\t\t});\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool&&result.cards&&result.cards.length){\n\t\t\t\t\t\tvar name=get.type(result.cards[0])=='basic'?'neifa_basic':'neifa_nobasic';\n\t\t\t\t\t\tplayer.addTempSkill(name);\n\t\t\t\t\t\tvar num=Math.min(5,player.countCards('h',function(cardx){\n\t\t\t\t\t\t\treturn (name=='neifa_basic')!=(get.type(cardx,player)=='basic')\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tif(num>0) player.addMark(name,num,false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"3\",},}","info":"出牌阶段开始时，你可以摸两张牌或获得场上的一张牌，然后弃置一张牌。若弃置的牌是基本牌，本回合你不能使用锦囊和装备牌，且【杀】的使用次数+X且目标+1；若弃置的不是基本牌，本回合你不能使用基本牌，且使用普通锦囊牌选择目标时可以增加或减少一个目标，前两次使用装备牌时摸X张牌（X为你发动〖内伐〗弃牌后手牌中因〖内伐〗而不能使用的牌的数量且最多为5）。"},"yuxu":{"name":"誉虚","script":"{audio: \"2\",trigger: {player: \"useCardEnd\",},filter: function (event,player){\n\t\t\t\t\tif(event!=player.getLastUsed()) return false;\n\t\t\t\t\tvar\tevt=event.getParent('phaseUse');\n\t\t\t\t\tif(!evt||evt.player!=player) return false;\n\t\t\t\t\tvar history=player.getHistory('useCard',function(evtt){\n\t\t\t\t\t\treturn evtt.getParent('phaseUse')==evt;\n\t\t\t\t\t});\n\t\t\t\t\tvar index=history.indexOf(event);\n\t\t\t\t\tif(index==0) return true;\n\t\t\t\t\treturn history[index-1].yuxu!=true&&player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.yuxu=true;\n\t\t\t\t\tplayer.addTempSkill('yuxu2');\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"当你于出牌阶段内使用的牌结算完成时，你可以摸一张牌。若如此做，当你于出牌阶段内使用的下一张牌结算完成时，你不能发动〖誉虚〗，且需弃置一张牌。"},"xjshijian":{"name":"实荐","script":"{audio: \"2\",trigger: {global: \"useCardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tvar evt=event.getParent('phaseUse');\n\t\t\t\t\tif(!evt||evt.player!=event.player) return false;\n\t\t\t\t\treturn event.player.getHistory('useCard',function(evtt){\n\t\t\t\t\t\treturn evtt.getParent('phaseUse')==evt;\n\t\t\t\t\t}).indexOf(event)==1&&player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt('xjshijian',trigger.player),'弃置一张牌并令其获得技能〖誉虚〗至回合结束');\n\t\t\t\t\tnext.set('logSkill',['xjshijian',trigger.player]);\n\t\t\t\t\tnext.set('check',get.attitude(player,trigger.player)>0&&trigger.player.countCards('h')>2);\n\t\t\t\t\tnext.ai=function(card){\n\t\t\t\t\t\tif(_status.event.check) return 5-get.value(card);\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool) trigger.player.addTempSkill('yuxu');\n\t\t\t\t},ai: {expose: \"0.25\",},}","info":"一名其他角色于其回合内使用的第二张牌结算完成后，你可弃置一张牌并令其获得技能〖誉虚〗直到回合结束。"},"cuorui":{"name":"挫锐","script":"{audio: \"2\",trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.maxHp>0&&!get.is.single();\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(Math.min(5,player.maxHp),false);\n\t\t\t\t},group: \"cuorui_nojudge\",subSkill: {nojudge: {trigger: {player: \"phaseJudgeBefore\",},forced: \"true\",audio: \"cuorui\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !player.storage.cuorui&&(get.is.single()||player.countCards('j'));\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.storage.cuorui=true;\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t\tgame.log(player,'跳过了','#g判定阶段');\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"锁定技，游戏开始时，你摸X张牌（X为你的体力上限）。锁定技，限定技，判定阶段开始前，若你的判定区有牌，你跳过此阶段。"},"liewei":{"name":"裂围","script":"{audio: \"2\",trigger: {source: \"dieAfter\",},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t},}","info":"当你杀死一名角色后，你可以摸三张牌。"},"weicheng":{"name":"伪诚","script":"{audio: \"2\",trigger: {global: \"gainAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.source==player&&event.player!=player&&player.hp>player.countCards('h')){\n\t\t\t\t\t\treturn event.relatedLose&&event.relatedLose.hs&&event.relatedLose.hs.length>0;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"当其他角色获得你的手牌后，若你的手牌数小于体力值，你可以摸一张牌。"},"daoshu":{"name":"盗书","script":"{audio: \"2\",enable: \"phaseUse\",filterTarget: function (c,p,t){\n\t\t\t\t\treturn t!=p&&t.countGainableCards(p,'h')>0;\n\t\t\t\t},filter: function (e,p){\n\t\t\t\t\treturn !p.hasSkill('daoshu_used')\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControl(lib.suit).set('prompt','请选择一个花色').ai=function(){return lib.suit.randomGet()};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tevent.suit=result.control;\n\t\t\t\t\tplayer.popup(event.suit+2);\n\t\t\t\t\tgame.log(player,'选择了',event.suit+2);\n\t\t\t\t\tplayer.gainPlayerCard(target,true,'h','visibleMove');\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar suit2=get.suit(result.cards[0]);\n\t\t\t\t\t\tif(suit2==event.suit){\n\t\t\t\t\t\t\ttarget.damage();\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.addTempSkill('daoshu_used','phaseUseEnd');\n\t\t\t\t\t\t\tif(player.countCards('h',function(card){return get.suit(card)!=suit2})==0){\n\t\t\t\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse player.chooseCard('h',true,function(card){\n\t\t\t\t\t\t\t\treturn get.suit(card)!=_status.event.suit2\n\t\t\t\t\t\t\t},'交给'+get.translation(target)+'一张不为'+get.translation(suit2)+'花色的牌').set('suit2',suit2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tplayer.give(result.cards,target,true);\n\t\t\t\t},ai: {order: \"1\",result: {target: \"-1\",},},subSkill: {used: {sub: \"true\",},},}","info":"出牌阶段，你可以选择一个花色并获得一名其他角色的一张手牌。若此牌花色与你选择的相同，则你对其造成1点伤害。否则你须交给其一张与此牌花色不同的手牌（没有则展示手牌），且本阶段内不能再发动〖盗书〗"},"xinfu_lingren":{"name":"凌人","script":"{usable: \"1\",audio: \"2\",trigger: {player: \"useCardToPlayered\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.getParent().triggeredTargets3.length>1) return false;\n\t\t\t\t\tif(!player.isPhaseUsing()) return false;\n\t\t\t\t\tif(!['basic','trick'].contains(get.type(event.card))) return false;\n\t\t\t\t\tif(get.tag(event.card,'damage')) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xinfu_lingren'),function(card,player,target){\n\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn 2-get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('targets',trigger.targets);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xinfu_lingren',result.targets);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tevent.choice={\n\t\t\t\t\t\t\tbasic:false,\n\t\t\t\t\t\t\ttrick:false,\n\t\t\t\t\t\t\tequip:false,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseBool('是否押基本牌？').ai=function(event,player){\n\t\t\t\t\t\t\tvar rand=0.95;\n\t\t\t\t\t\t\tif(!target.countCards('h',{type:['basic']})) rand=0.05;\n\t\t\t\t\t\t\tif(!target.countCards('h')) rand=0;\n\t\t\t\t\t\t\treturn Math.random()<rand?true:false;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.counttrigger.xinfu_lingren--;\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.choice.basic=true;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseBool('是否押锦囊牌？').ai=function(event,player){\n\t\t\t\t\t\tvar rand=0.9;\n\t\t\t\t\t\t\tif(!target.countCards('h',{type:['trick','delay']})) rand=0.1;\n\t\t\t\t\t\t\tif(!target.countCards('h')) rand=0;\n\t\t\t\t\t\t\treturn Math.random()<rand?true:false;\n\t\t\t\t\t};\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.choice.trick=true;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseBool('是否押装备牌？').ai=function(event,player){\n\t\t\t\t\t\tvar rand=0.75;\n\t\t\t\t\t\t\tif(!target.countCards('h',{type:['equip']})) rand=0.25;\n\t\t\t\t\t\t\tif(!target.countCards('h')) rand=0;\n\t\t\t\t\t\t\treturn Math.random()<rand?true:false;\n\t\t\t\t\t};\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.choice.equip=true;\n\t\t\t\t\t}\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tvar reality={\n\t\t\t\t\t\tbasic:false,\n\t\t\t\t\t\ttrick:false,\n\t\t\t\t\t\tequip:false,\n\t\t\t\t\t}\n\t\t\t\t\tvar he=target.getCards('h');\n\t\t\t\t\tfor(var i=0;i<he.length;i++){\n\t\t\t\t\t\treality[get.type(he[i],'trick')]=true;\n\t\t\t\t\t}\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tvar tl=['basic','trick','equip'];\n\t\t\t\t\tfor(var i=0;i<tl.length;i++){\n\t\t\t\t\t\tif(event.choice[tl[i]]==reality[tl[i]]) event.num++;\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tplayer.popup('猜对'+get.cnNumber(event.num)+'项');\n\t\t\t\t\tgame.log(player,'猜对了'+get.cnNumber(event.num)+'项');\n\t\t\t\t\tif(event.num>0){\n\t\t\t\t\t\ttarget.addTempSkill('lingren_adddamage');\n\t\t\t\t\t\ttarget.storage.lingren={\n\t\t\t\t\t\t\tcard:trigger.card,\n\t\t\t\t\t\t\t//player:event.targett,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(event.num>1) player.draw(2);\n\t\t\t\t\tif(event.num>2){\n\t\t\t\t\t\tplayer.addTempSkill('lingren_jianxiong',{player:'phaseBegin'});\n\t\t\t\t\t\tplayer.addTempSkill('lingren_xingshang',{player:'phaseBegin'});\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"2.4\",},}","info":"每回合限一次。当你于出牌阶段使用带有「伤害」这一标签的基本牌或普通锦囊牌指定目标后，你可以猜测其中的一个目标的手牌中是否有基本牌，锦囊牌或装备牌。若你猜中的项目数：≥1，此牌对该角色的伤害+1；≥2，你摸两张牌；≥3，你获得技能〖奸雄〗和〖行殇〗直到下回合开始。"},"xinfu_fujian":{"name":"伏间","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.countCards('h')==0;\n\t\t\t\t\t});\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tvar list=game.filterPlayer(function(target){\n\t\t\t\t\t\tif(target.isMinHandcard()) event.num=target.countCards('h');\n\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t});\n\t\t\t\t\tif(event.num<1){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar target=list.randomGet();\n\t\t\t\t\t\tvar cards=target.getCards('h').randomGets(event.num);\n\t\t\t\t\t\tplayer.line(target);\n\t\t\t\t\t\tvar content=[get.translation(target)+'的部分手牌',cards];\n\t\t\t\t\t\tgame.log(player,'观看了',target,'的部分手牌');\n\t\t\t\t\t\tplayer.chooseControl('ok').set('dialog',content);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，结束阶段开始时，你观看一名随机的其他角色的随机X张手牌。(X为场上手牌最少的角色的手牌数)"},"xinfu_jianjie":{"name":"荐杰","script":"{derivation: [\"jianjie_faq\"],group: [\"xinfu_jianjie1\",\"xinfu_jianjie2\"],audio: \"3\",trigger: {player: \"phaseZhunbeiBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.phaseNumber>1) return false;\n\t\t\t\t\treturn !game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hasSkill('smh_huoji')||current.hasSkill('smh_lianhuan');\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget('请将「龙印」交给一名角色',true,function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn 10+get.attitude(player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('xinfu_jianjie',target);\n\t\t\t\t\t\tplayer.line(target,'fire');\n\t\t\t\t\t\ttarget.addSkill('smh_huoji');\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !current.hasSkill('smh_huoji')&&current!=player\n\t\t\t\t\t})){\n\t\t\t\t\t\tplayer.chooseTarget('请将「凤印」交给一名角色',true,function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player&&!target.hasSkill('smh_huoji');\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\treturn 10+get.attitude(player,target);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('xinfu_jianjie',target);\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.addSkill('smh_lianhuan');\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"你的第一个准备阶段，你令两名其他角色分别获得龙印与凤印；出牌阶段限一次（你的第一个回合除外），或当拥有龙印、凤印的角色死亡时，你可以转移龙印、凤印。"},"xinfu_chenghao":{"name":"称好","script":"{audio: \"2\",trigger: {global: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn event.lianhuanable==true&&event.player.isAlive();\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.cards=get.cards(game.countPlayer(function(current){\n\t\t\t\t\t\treturn current.isLinked();\n\t\t\t\t\t})+1);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.cards.length>1){\n\t\t\t\t\t\tplayer.chooseCardButton('【称好】：请选择要分配的牌',true,event.cards,[1,event.cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\tif(ui.selected.buttons.length==0) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.cards.length==1){\n\t\t\t\t\t\tevent._result={links:event.cards.slice(0),bool:true};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(result.links[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.togive=result.links.slice(0);\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(result.links)+'交给一名角色',true).set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.enemy){\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(att>0){\n\t\t\t\t\t\t\t\treturn att/(1+target.countCards('h'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn att/100;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).set('enemy',get.value(event.togive[0],player,'raw')<0);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.targets.length){\n\t\t\t\t\t\tresult.targets[0].gain(event.togive,'draw');\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tgame.log(result.targets[0],'获得了'+get.cnNumber(event.togive.length)+'张牌');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当一名角色受到属性伤害后，若其存活且其武将牌横置且是伤害传导的起点，则你可以观看牌堆顶的X张牌并分配给任意角色。（X为横置的角色数量且包含该角色）"},"xinfu_yinshi":{"name":"隐士","script":"{audio: \"2\",trigger: {player: \"damageBegin4\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.hasSkill('smh_huoji')||player.hasSkill('smh_lianhuan')) return false;\n\t\t\t\t\tif(!player.isEmpty(2)) return false;\n\t\t\t\t\tif(event.nature) return true;\n\t\t\t\t\treturn get.type(event.card,'trick')=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t},ai: {notrick: \"true\",nofire: \"true\",nothunder: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(target.hasSkill('smh_huoji')||target.hasSkill('smh_lianhuan')) return;\n\t\t\t\t\t\t\tif(player==target&&get.subtype(card)=='equip2'){\n\t\t\t\t\t\t\t\tif(get.equipValue(card)<=8) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!target.isEmpty(2)) return;\n\t\t\t\t\t\t\tif(get.tag(card,'natureDamage')) return 'zerotarget';\n\t\t\t\t\t\t\tif(get.type(card)=='trick'&&get.tag(card,'damage')){\n\t\t\t\t\t\t\t\treturn 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"锁定技，若你没有龙印、凤印且防具栏为空，则当你受到属性伤害或锦囊牌造成的伤害时，防止此伤害。"},"xinfu_wuniang":{"name":"武娘","script":"{trigger: {player: [\"useCard\",\"respond\"],},audio: \"2\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('xinfu_wuniang'),'获得一名其他角色的一张牌，然后其和场上所有的“关索”摸一张牌。',function(card,player,target){\n\t\t\t\t\t\tif(player==target) return false;\n\t\t\t\t\t\treturn target.countGainableCards(player,'he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn 10-get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('xinfu_wuniang',target);\n\t\t\t\t\t\tplayer.line(target,'fire');\n\t\t\t\t\t\tevent.draws=game.filterPlayer(function(current){\n\t\t\t\t\t\t\tif(current==target) return true;\n\t\t\t\t\t\t\treturn ['guansuo','old_guansuo'].contains(current.name)||['guansuo','old_guansuo'].contains(current.name2);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tplayer.gainPlayerCard(target,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tgame.asyncDraw(event.draws,1);\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"当你使用或打出【杀】时，你可以获得一名其他角色的一张牌。若如此做，该角色和场上所有的“关索”各摸一张牌。"},"xinfu_xushen":{"name":"许身","script":"{derivation: [\"xinfu_zhennan\"],audio: \"2\",subSkill: {count: {trigger: {player: \"recoverBegin\",},forced: \"true\",silent: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!event.card||event.card.name!='tao') return false;\n\t\t\t\t\t\t\tif(!event.source||event.source.sex!='male') return false;\n\t\t\t\t\t\t\tif(!player.isDying()) return false;\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.name=='guansuo'||current.name2=='guansuo';\n\t\t\t\t\t\t\t})) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\ttrigger.xinfu_xushen=true;\n\t\t\t\t\t\t},sub: \"true\",},},group: [\"xinfu_xushen_count\"],trigger: {player: \"recoverAfter\",},limited: \"true\",init: function (player){\n\t\t\t\t\tplayer.storage.xinfu_xushen=false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(player.storage.xinfu_xushen) return false;\n\t\t\t\t\tif(player.isDying()) return false;\n\t\t\t\t\treturn event.xinfu_xushen==true;\n\t\t\t\t},direct: \"true\",skillAnimation: \"true\",animationColor: \"fire\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttrigger.source.chooseBool('【许身】：是否将自己的一张武将牌替换为“关索”？').set('ai',function(){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.awakenSkill('xinfu_xushen');\n\t\t\t\t\t\tplayer.logSkill('xinfu_xushen',trigger.source);\n\t\t\t\t\t\tif(trigger.source.name2!=undefined){\n\t\t\t\t\t\t\ttrigger.source.chooseControl(trigger.source.name,trigger.source.name2).set('prompt','请选择要更换的武将牌');\n\t\t\t\t\t\t}else event._result={control:trigger.source.name};\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\ttrigger.source.reinit(result.control,'guansuo');\n\t\t\t\t\tif(_status.characterlist){\n\t\t\t\t\t\t_status.characterlist.add(result.control);\n\t\t\t\t\t\t_status.characterlist.remove('guansuo');\n\t\t\t\t\t}\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.addSkill('xinfu_zhennan');\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},}","info":"限定技，当一名男性角色使用【桃】令你脱离濒死状态时，若场上没有“关索”，则其可以将自己的一张武将牌变更为“关索”。然后你回复一点体力，并获得技能〖镇南〗。"},"xinfu_yanyu":{"name":"燕语","script":"{trigger: {global: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('xinfu_yanyu'),get.translation('xinfu_yanyu_info'),'he').set('logSkill','xinfu_yanyu');\n\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\tnext.set('goon',function(){\n\t\t\t\t\t\t\tvar map={\n\t\t\t\t\t\t\t\tbasic:0,\n\t\t\t\t\t\t\t\ttrick:0.1,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar hs=trigger.player.getCards('h');\n\t\t\t\t\t\t\tvar sha=false;\n\t\t\t\t\t\t\tvar jiu=false;\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(trigger.player.hasValueTarget(hs[i])){\n\t\t\t\t\t\t\t\t\tif(hs[i].name=='sha'&&!sha){\n\t\t\t\t\t\t\t\t\t\tsha=true;\n\t\t\t\t\t\t\t\t\t\tmap.basic+=2;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(hs[i].name=='tao') map.basic+=6;\n\t\t\t\t\t\t\t\t\tif(hs[i].name=='jiu'){jiu=true;map.basic+=2.5;}\n\t\t\t\t\t\t\t\t\tif(get.type(hs[i])=='trick') map.trick+=get.value(hs[i],player,'raw');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn map;\n\t\t\t\t\t\t}());\n\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\tvar map=_status.event.goon;\n\t\t\t\t\t\t\tvar type=get.type(card,'trick');\n\t\t\t\t\t\t\tif(!map[type]) return -1;\n\t\t\t\t\t\t\treturn map[type]-get.value(card);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnext.set('ai',function(cardx){\n\t\t\t\t\t\t\tvar map={\n\t\t\t\t\t\t\t\tbasic:0,\n\t\t\t\t\t\t\t\ttrick:0,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar hs=trigger.player.getCards('h');\n\t\t\t\t\t\t\tvar sha=false;\n\t\t\t\t\t\t\tvar jiu=false;\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(hs[i]!=cardx&&trigger.player.hasValueTarget(hs[i])){\n\t\t\t\t\t\t\t\t\tif(hs[i].name=='sha'&&!sha){\n\t\t\t\t\t\t\t\t\t\tsha=true;\n\t\t\t\t\t\t\t\t\t\tmap.basic+=2;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif(hs[i].name=='tao') map.basic+=6;\n\t\t\t\t\t\t\t\t\tif(hs[i].name=='jiu'){jiu=true;map.basic+=3;}\n\t\t\t\t\t\t\t\t\tif(get.type(hs[i])=='trick') map.trick+=player.getUseValue(hs[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar type=get.type(cardx,'trick');\n\t\t\t\t\t\t\tif(!map[type]) return -get.value(cardx);\n\t\t\t\t\t\t\treturn map[type]-get.value(cardx);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.xinfu_yanyu=get.type(result.cards[0],'trick');\n\t\t\t\t\t\tplayer.addTempSkill('xinfu_yanyu2','phaseUseAfter');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"一名角色的出牌阶段开始时，你可以弃置一张牌。若如此做，则该出牌阶段内，当有与你弃置的牌类别相同的其他牌进入弃牌堆时，你可令任意一名角色获得此牌。每阶段以此法获得的牌不能超过三张。"},"xinfu_xiaode":{"name":"孝德","script":"{subSkill: {remove: {unique: \"true\",charlotte: \"true\",trigger: {player: \"phaseAfter\",},forced: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\t\t\tplayer.removeAdditionalSkill('xinfu_xiaode');\n\t\t\t\t\t\t\tplayer.removeSkill('xinfu_xiaode_remove');\n\t\t\t\t\t\t},sub: \"true\",},},trigger: {global: \"dieAfter\",},direct: \"true\",filter: function (skill,event){\n\t\t\t\t\treturn !event.hasSkill('xinfu_xiaode_remove');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar listm=[];\n\t\t\t\t\tvar listv=[];\n\t\t\t\t\tif(trigger.player.name1!=undefined) listm=lib.character[trigger.player.name1][3];\n\t\t\t\t\telse listm=lib.character[trigger.player.name][3];\n\t\t\t\t\tif(trigger.player.name2!=undefined) listv=lib.character[trigger.player.name2][3];\n\t\t\t\t\tlistm=listm.concat(listv);\n\t\t\t\t\tvar func=function(skill){\n\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\tif(info.charlotte||info.zhuSkill||(info.unique&&!info.limited)||info.juexingji) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t};\n\t\t\t\t\tfor(var i=0;i<listm.length;i++){\n\t\t\t\t\t\tif(func(listm[i])) list.add(listm[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.chooseControl(list,'cancel2').set('prompt',get.prompt('xinfu_xiaode')).set('prompt2',get.translation('xinfu_xiaode_info')).set('ai',function(){\n\t\t\t\t\t\t\treturn list.randomGet();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control&&result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('xinfu_xiaode');\n\t\t\t\t\t\tplayer.popup(result.control,'thunder');\n\t\t\t\t\t\tgame.log(player,'获得了技能','#g【'+get.translation(result.control)+'】');\n\t\t\t\t\t\tplayer.addAdditionalSkill('xinfu_xiaode',[result.control]);\n\t\t\t\t\t\tplayer.addSkill('xinfu_xiaode_remove');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"其他角色死亡后，你可以声明该角色武将牌上的一个不为主公技或觉醒技的技能。若如此做，你获得此技能且不能再发动〖孝德〗直到你的回合结束。"},"jilei":{"name":"鸡肋","script":"{trigger: {player: \"damageEnd\",},audio: \"2\",direct: \"true\",filter: function (event){\n\t\t\t\t\treturn event&&event.source;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControl('basic','trick','equip','cancel2',function(){\n\t\t\t\t\t\tvar source=_status.event.source;\n\t\t\t\t\t\tif(get.attitude(_status.event.player,source)>0) return 'cancel2';\n\t\t\t\t\t\tvar list=['basic','trick','equip'].filter(function(name){\n\t\t\t\t\t\t\treturn (!source.storage.jilei2||!source.storage.jilei2.contains(name));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(!list.length) return 'cancel2';\n\t\t\t\t\t\tif(list.contains('trick')&&source.countCards('h',function(card){\n\t\t\t\t\t\t\treturn get.type(card,source)=='trick'&&source.hasValueTarget(card);\n\t\t\t\t\t\t})>1) return 'trick';\n\t\t\t\t\t\treturn list[0];\n\t\t\t\t\t}).set('prompt',get.prompt2('jilei',trigger.source)).set('source',trigger.source);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('jilei',trigger.source);\n\t\t\t\t\t\tplayer.popup(get.translation(result.control)+'牌');\n\t\t\t\t\t\ttrigger.source.addTempSkill('jilei2',{player:'phaseBegin'});\n\t\t\t\t\t\ttrigger.source.storage.jilei2.add(result.control);\n\t\t\t\t\t\ttrigger.source.updateMarks('jilei2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",threaten: \"0.7\",},}","info":"当你受到有来源的伤害后，你可以声明一种牌的类别。若如此做，你令伤害来源不能使用、打出或弃置此类别的手牌，直到其下个回合开始。"},"danlao":{"name":"啖酪","script":"{audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn (event.card.name=='sha'||get.type(event.card)=='trick')&&event.targets&&event.targets.length>1;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn event.getParent().excluded.contains(player)||get.tag(event.card,'multineg')||get.effect(player,event.card,event.player,player)<=0;\n\t\t\t\t},trigger: {target: \"useCardToTargeted\",},content: function (){\n\t\t\t\t\ttrigger.getParent().excluded.add(player);\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},ai: {effect: {target: function (card){\n\t\t\t\t\t\t\tif(get.type(card)!='trick') return;\n\t\t\t\t\t\t\tif(card.name=='tiesuo') return [0,0];\n\t\t\t\t\t\t\tif(card.name=='yihuajiemu') return [0,1];\n\t\t\t\t\t\t\tif(get.tag(card,'multineg')) return [0,2];\n\t\t\t\t\t\t},},},}","info":"当你成为一张指定了多个目标的【杀】或普通锦囊牌的目标时，你可以摸一张牌，令此牌对你无效。"},"bifa":{"name":"笔伐","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i].storage.bifa){\n\t\t\t\t\t\t\tplayers[i].addSkill('bifa2');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target&&!target.storage.bifa;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar num=target.hasSkillTag('maixie')?2:0;\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)-num;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt2('bifa')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('bifa',result.targets[0]);\n\t\t\t\t\t\tresult.targets[0].addSkill('bifa2');\n\t\t\t\t\t\tresult.targets[0].storage.bifa=[result.cards[0],player];\n\t\t\t\t\t\tplayer.lose(result.cards[0],result.targets[0].node.special,'toStorage');\n\t\t\t\t\t\tplayer.$give(1,result.targets[0],false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.7\",expose: \"0.3\",},}","info":"结束阶段开始时，你可以将一张手牌移出游戏并指定一名其他角色。该角色的准备阶段开始时，其观看你移出游戏的牌并选择一项：交给你一张与此牌类型相同的手牌并获得此牌；或将此牌置入弃牌堆，然后失去1点体力。"},"songci":{"name":"颂词","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tif(!player.storage.songci) return true;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !player.storage.songci.contains(current);\n\t\t\t\t\t});\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.songci) player.storage.songci=[];\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn (!player.storage.songci||!player.storage.songci.contains(target));\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(target.countCards('h')>target.hp){\n\t\t\t\t\t\ttarget.chooseToDiscard(2,'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.storage.songci) player.storage.songci=[];\n\t\t\t\t\tplayer.storage.songci.push(target);\n\t\t\t\t\tplayer.storage.songci.sortBySeat();\n\t\t\t\t\tplayer.markSkill('songci');\n\t\t\t\t},intro: {content: \"已对$发动过〖颂词〗\",},ai: {order: \"7\",threaten: \"1.6\",expose: \"0.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.countCards('h')<=target.hp){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(target.countCards('h')>target.hp){\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},group: \"songci_draw\",}","info":"①出牌阶段，你可以选择一名未以此法选择过的角色。若其手牌数：大于其体力值，其弃置两张牌；不小于其体力值，其摸两张牌。②弃牌阶段结束时，若你已对场上所有存活角色发动过〖颂词①〗，则你摸一张牌。"},"yuanhu":{"name":"援护","script":"{audio: \"3\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:function(card){\n\t\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t\t},\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target.isEmpty(get.subtype(card));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target)-3;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprompt:get.prompt2('yuanhu')\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('yuanhu',result.targets);\n\t\t\t\t\t\tvar thisTarget=result.targets[0];\n\t\t\t\t\t\tvar thisCard=result.cards[0];\n\t\t\t\t\t\tthisTarget.equip(thisCard);\n\t\t\t\t\t\tevent.target=thisTarget;\n\t\t\t\t\t\tif(thisTarget!=player){\n\t\t\t\t\t\t\tplayer.$give(thisCard,thisTarget,false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch(get.subtype(thisCard)){\n\t\t\t\t\t\t\tcase 'equip1':{\n\t\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn get.distance(thisTarget,current)<=1;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\t\t\tplayer.chooseTarget(true,function(card,player,target){\n\t\t\t\t\t\t\t\t\treturn get.distance(_status.event.thisTarget,target)<=1&&target.countCards('hej');\n\t\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\t\tvar attitude=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\t\tif(attitude>0&&target.countCards('j')){\n\t\t\t\t\t\t\t\t\t\treturn attitude*1.5;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -attitude;\n\t\t\t\t\t\t\t\t}).set('thisTarget',thisTarget);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 'equip2':{\n\t\t\t\t\t\t\t\tthisTarget.draw();event.finish();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcase 'equip5':{\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdefault:{\n\t\t\t\t\t\t\t\tthisTarget.recover();\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.targets.length){\n\t\t\t\t\t\tplayer.discardPlayerCard(true,result.targets[0],'hej');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段开始时，你可以将一张装备牌置于一名角色的装备区里，然后根据此装备牌的类型执行以下对应效果。武器牌：弃置该角色距离1以内的一名角色区域中的一张牌；防具牌：该角色摸一张牌；坐骑牌：该角色回复1点体力。"},"baobian":{"name":"豹变","script":"{audio: \"2\",trigger: {player: [\"phaseBefore\",\"changeHp\"],},forced: \"true\",popup: \"false\",init: function (player){\n\t\t\t\t\tif(game.online) return;\n\t\t\t\t\tplayer.removeAdditionalSkill('baobian');\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(player.hp<=3){\n\t\t\t\t\t\t//if(trigger.num!=undefined&&trigger.num<0&&player.hp-trigger.num>1) player.logSkill('baobian');\n\t\t\t\t\t\tlist.push('retiaoxin');\n\t\t\t\t\t}\n\t\t\t\t\tif(player.hp<=2){\n\t\t\t\t\t\tlist.push('olpaoxiao');\n\t\t\t\t\t}\n\t\t\t\t\tif(player.hp<=1){\n\t\t\t\t\t\tlist.push('xinshensu');\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.addAdditionalSkill('baobian',list);\n\t\t\t\t\t}\n\t\t\t\t},derivation: [\"retiaoxin\",\"olpaoxiao\",\"xinshensu\"],content: function (){\n\t\t\t\t\tplayer.removeAdditionalSkill('baobian');\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(player.hp<=3){\n\t\t\t\t\t\tif(trigger.num!=undefined&&trigger.num<0&&player.hp-trigger.num>1) player.logSkill('baobian');\n\t\t\t\t\t\tlist.push('retiaoxin');\n\t\t\t\t\t}\n\t\t\t\t\tif(player.hp<=2){\n\t\t\t\t\t\tlist.push('olpaoxiao');\n\t\t\t\t\t}\n\t\t\t\t\tif(player.hp<=1){\n\t\t\t\t\t\tlist.push('xinshensu');\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.addAdditionalSkill('baobian',list);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [0,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.tag(card,'recover')&&player.hp>=player.maxHp-1) return [0,0];\n\t\t\t\t\t\t},},},}","info":"锁定技，若你的体力值为3或更少，你视为拥有技能〖挑衅〗；若你的体力值为2或更少；你视为拥有技能〖咆哮〗；若你的体力值为1，你视为拥有技能〖神速〗。"},"yongsi":{"name":"庸肆","script":"{group: [\"yongsi1\",\"yongsi2\"],ai: {threaten: \"2.2\",},}","info":"锁定技，摸牌阶段，你多摸X张牌。弃牌阶段开始时，你弃置X张牌。（X为场上势力数）"},"weidi":{"name":"伪帝","script":"{trigger: {global: [\"gameStart\",\"zhuUpdate\"],},forced: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\treturn (mode=='identity'||(mode=='versus'&&_status.mode=='four'));\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar zhu=get.zhu(player);\n\t\t\t\t\tif(zhu&&zhu!=player&&zhu.skills){\n\t\t\t\t\t\tfor(var i=0;i<zhu.skills.length;i++){\n\t\t\t\t\t\t\tif(lib.skill[zhu.skills[i]]&&lib.skill[zhu.skills[i]].zhuSkill){\n\t\t\t\t\t\t\t\tlist.push(zhu.skills[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addAdditionalSkill('weidi',list);\n\t\t\t\t\tplayer.storage.zhuSkill_weidi=list;\n\t\t\t\t\tgame.broadcastAll(function(list){\n\t\t\t\t\t\tgame.expandSkills(list);\n\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\tvar info=lib.skill[i];\n\t\t\t\t\t\t\tif(!info) continue;\n\t\t\t\t\t\t\tif(!info.audioname2) info.audioname2={};\n\t\t\t\t\t\t\tinfo.audioname2.yuanshu='weidi';\n\t\t\t\t\t\t}\n\t\t\t\t\t},list);\n\t\t\t\t},}","info":"锁定技，你视为拥有当前主公的主公技。"},"lihun":{"name":"离魂","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.sex=='male';\n\t\t\t\t},filterCard: \"true\",position: \"he\",content: function (){\n\t\t\t\t\tplayer.gain(target.getCards('h'),target,'giveAuto');\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t\tplayer.addSkill('lihun2');\n\t\t\t\t\tplayer.storage.lihun=target;\n\t\t\t\t},check: function (card){return 8-get.value(card)},ai: {order: \"10\",result: {player: function (player){\n\t\t\t\t\t\t\tif(player.classList.contains('turnedover')) return 10;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},target: function (player,target){\n\t\t\t\t\t\t\tif(target.countCards('h')>target.hp) return target.hp-target.countCards('h');\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: \"1.5\",effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='guiyoujie') return [0,2];\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌并选择一名其他男性角色。若如此做，你将武将牌翻面并获得其所有手牌。出牌阶段结束时，你交给其X张牌。（X为该角色的体力值）"},"rebiyue":{"name":"闭月","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},frequent: \"true\",content: function (){\n\t\t\t\t\tvar num=1;\n\t\t\t\t\tif(!player.countCards('h')){\n\t\t\t\t\t\tnum=2;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.draw(num);\n\t\t\t\t},}","info":"结束阶段，你可以摸一张牌，若你没有手牌，则改为摸两张牌。"},"ollongdan":{"name":"龙胆","script":"{audio: \"longdan_sha\",audioname: [\"re_zhaoyun\"],hiddenCard: function (player,name){\n\t\t\t\t\tif(name=='tao') return player.countCards('h','jiu')>0;\n\t\t\t\t\tif(name=='jiu') return player.countCards('h','tao')>0;\n\t\t\t\t\treturn false;\n\t\t\t\t},enable: [\"chooseToUse\",\"chooseToRespond\"],prompt: \"将杀当做闪，或将闪当做杀，或将桃当做酒，或将酒当做桃使用或打出\",viewAs: function (cards,player){\n\t\t\t\t\tvar name=false;\n\t\t\t\t\tswitch(get.name(cards[0],player)){\n\t\t\t\t\t\tcase 'sha':name='shan';break;\n\t\t\t\t\t\tcase 'shan':name='sha';break;\n\t\t\t\t\t\tcase 'tao':name='jiu';break;\n\t\t\t\t\t\tcase 'jiu':name='tao';break;\n\t\t\t\t\t}\n\t\t\t\t\tif(name) return {name:name};\n\t\t\t\t\treturn null;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(_status.event.type=='phase'){\n\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\tvar name2;\n\t\t\t\t\t\tvar list=['sha','tao','jiu'];\n\t\t\t\t\t\tvar map={sha:'shan',tao:'jiu',jiu:'tao'}\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t\t\t\t\tif(player.countCards('h',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){\n\t\t\t\t\t\t\t\tvar temp=get.order({name:name});\n\t\t\t\t\t\t\t\tif(temp>max){\n\t\t\t\t\t\t\t\t\tmax=temp;\n\t\t\t\t\t\t\t\t\tname2=map[name];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(name2==get.name(card,player)) return 1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn 1;\n\t\t\t\t},filterCard: function (card,player,event){\n\t\t\t\t\tevent=event||_status.event;\n\t\t\t\t\tvar filter=event._backup.filterCard;\n\t\t\t\t\tvar name=get.name(card,player);\n\t\t\t\t\tif(name=='sha'&&filter({name:'shan',cards:[card]},player,event)) return true;\n\t\t\t\t\tif(name=='shan'&&filter({name:'sha',cards:[card]},player,event)) return true;\n\t\t\t\t\tif(name=='tao'&&filter({name:'jiu',cards:[card]},player,event)) return true;\n\t\t\t\t\tif(name=='jiu'&&filter({name:'tao',cards:[card]},player,event)) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar filter=event.filterCard;\n\t\t\t\t\tif(filter({name:'sha'},player,event)&&player.countCards('h','shan')) return true;\n\t\t\t\t\tif(filter({name:'shan'},player,event)&&player.countCards('h','sha')) return true;\n\t\t\t\t\tif(filter({name:'tao'},player,event)&&player.countCards('h','jiu')) return true;\n\t\t\t\t\tif(filter({name:'jiu'},player,event)&&player.countCards('h','tao')) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tvar name;\n\t\t\t\t\t\tswitch(tag){\n\t\t\t\t\t\t\tcase 'respondSha':name='shan';break;\n\t\t\t\t\t\t\tcase 'respondShan':name='sha';break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!player.countCards('h',name)) return false;\n\t\t\t\t\t},order: function (item,player){\n\t\t\t\t\t\tif(player&&_status.event.type=='phase'){\n\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\tvar list=['sha','tao','jiu'];\n\t\t\t\t\t\t\tvar map={sha:'shan',tao:'jiu',jiu:'tao'}\n\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t\t\t\t\t\tif(player.countCards('h',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){\n\t\t\t\t\t\t\t\t\tvar temp=get.order({name:name});\n\t\t\t\t\t\t\t\t\tif(temp>max) max=temp;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(max>0) max+=0.3;\n\t\t\t\t\t\t\treturn max;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 4;\n\t\t\t\t\t},},}","info":"你可以将一张【杀】当做【闪】、【闪】当做【杀】、【酒】当做【桃】、【桃】当做【酒】使用或打出。"},"chongzhen":{"name":"冲阵","script":"{group: [\"chongzhen1\",\"chongzhen2\"],audio: \"chongzhen1\",ai: {combo: \"ollongdan\",mingzhi: \"false\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')||get.tag(card,'respondSha')){\n\t\t\t\t\t\t\t\tif(get.attitude(target,player)<=0){\n\t\t\t\t\t\t\t\t\tif(current>0) return;\n\t\t\t\t\t\t\t\t\tif(target.countCards('h')==0) return 1.6;\n\t\t\t\t\t\t\t\t\tif(target.countCards('h')==1) return 1.2;\n\t\t\t\t\t\t\t\t\tif(target.countCards('h')==2) return [0.8,0.2,0,-0.2];\n\t\t\t\t\t\t\t\t\treturn [0.4,0.7,0,-0.7];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你发动〖龙胆〗使用或打出一张牌时，你可以获得对方的一张手牌。"},"chixin":{"name":"赤心","script":"{group: [\"chixin1\",\"chixin2\"],mod: {cardUsableTarget: function (card,player,target){\n\t\t\t\t\t\tif(card.name=='sha'&&!target.hasSkill('chixin3')&&player.inRange(target)) return true;\n\t\t\t\t\t},},trigger: {player: \"useCardToPlayered\",},silent: \"true\",firstDo: \"true\",content: function (){\n\t\t\t\t\ttrigger.target.addTempSkill('chixin3');\n\t\t\t\t},forced: \"true\",popup: \"false\",}","info":"你可以将♦牌当作【杀】或【闪】使用或打出。出牌阶段，你对在你攻击范围内且本回合内未成为过你使用的【杀】的目标的角色使用的【杀】没有次数限制。"},"reyicong":{"name":"义从","script":"{trigger: {player: [\"changeHp\"],},audio: \"2\",audioname: {gongsunzan: \"yicong\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.sgn(player.hp-2.5)!=get.sgn(player.hp-2.5-event.num);\n\t\t\t\t},content: function (){},mod: {globalFrom: function (from,to,current){\n\t\t\t\t\t\treturn current-1;\n\t\t\t\t\t},globalTo: function (from,to,current){\n\t\t\t\t\t\tif(to.hp<=2) return current+1;\n\t\t\t\t\t},},ai: {threaten: \"0.8\",},}","info":"锁定技，你计算与其他角色的距离时-1。若你的体力值不大于2，则其他角色计算与你的距离时+1。"},"suiren":{"name":"随仁","script":"{trigger: {player: \"phaseZhunbeiBegin\",},skillAnimation: \"true\",animationColor: \"gray\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.suiren;\n\t\t\t\t},intro: {content: \"limited\",},mark: \"true\",direct: \"true\",unique: \"true\",limited: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar check=(player.hp==1||(player.hp==2&&player.countCards('h')<=1));\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('suiren')).set('ai',function(target){\n\t\t\t\t\t\tif(!_status.event.check) return 0;\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('check',check);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.suiren=true;\n\t\t\t\t\t\tplayer.awakenSkill('suiren');\n\t\t\t\t\t\tplayer.logSkill('suiren',result.targets);\n\t\t\t\t\t\tplayer.removeSkill('reyicong');\n\t\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\tresult.targets[0].draw(3);\n\t\t\t\t\t}\n\t\t\t\t},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，准备阶段开始时，你可以失去技能〖义从〗，然后加1点体力上限并回复1点体力，然后令一名角色摸三张牌。"},"tianming":{"name":"天命","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},check: function (event,player){\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tif(cards.length<=2){\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(cards[i].name=='shan'||cards[i].name=='tao') return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToDiscard(2,true,'he');\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tplayers.sort(function(a,b){\n\t\t\t\t\t\treturn b.hp-a.hp;\n\t\t\t\t\t});\n\t\t\t\t\tif(players[0].hp>players[1].hp&&players[0]!=player){\n\t\t\t\t\t\tplayers[0].chooseBool(get.prompt2('tianming'));\n\t\t\t\t\t\tevent.player=players[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseToDiscard(2,true,'he');\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha') return [1,0.5];\n\t\t\t\t\t\t},},},}","info":"当你成为【杀】的目标时，你可以弃置两张牌（不足则全弃，无牌则不弃），然后摸两张牌；若此时全场体力值最多的角色仅有一名且不是你，该角色也可以如此做。"},"mizhao":{"name":"密诏","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},filterCard: \"true\",selectCard: \"-1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"false\",ai: {order: \"1\",result: {player: \"0\",target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) return 0;\n\t\t\t\t\t\t\tif(player.countCards('h')>1){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\t\t\tif(players[i].countCards('h')&&players[i]!=target&&players[i]!=player&&get.attitude(player,players[i])<0){\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(i==players.length){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -2/(target.countCards('h')+1);\n\t\t\t\t\t\t},},},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.target1=targets[0];\n\t\t\t\t\ttargets[0].gain(cards,player,'giveAuto');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!targets[0].countCards('h')){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar players=game.filterPlayer();\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tif(players[i]!=event.target1&&players[i]!=player&&event.target1.canCompare(players[i])){\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(i==players.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.chooseTarget(true,'选择拼点目标',function(card,player,target){\n\t\t\t\t\t\treturn _status.event.target1.canCompare(target)&&target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar eff=get.effect(target,{name:'sha'},_status.event.target1,player);\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\treturn eff-10;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn eff;\n\t\t\t\t\t}).set('target1',event.target1).set('forceDie',true);\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.targets.length){\n\t\t\t\t\t\tevent.target2=result.targets[0];\n\t\t\t\t\t\tevent.target1.line(event.target2);\n\t\t\t\t\t\tevent.target1.chooseToCompare(event.target2);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(!result.tie){\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tif(event.target1.canUse({name:'sha',isCard:true},event.target2,false)) event.target1.useCard({name:'sha',isCard:true},event.target2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.target2.canUse({name:'sha',isCard:true},event.target1,false)){\n\t\t\t\t\t\t\tevent.target2.useCard({name:'sha',isCard:true},event.target1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段限一次，你可以将所有手牌交给一名其他角色。若如此做，你令该角色与你指定的另一名有手牌的角色拼点，视为拼点赢的角色对没赢的角色使用一张【杀】。"},"hongyuan":{"name":"弘援","script":"{trigger: {player: \"phaseDrawBegin2\",},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed&&event.num>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar check;\n\t\t\t\t\tif(player.countCards('h')==0){\n\t\t\t\t\t\tcheck=false;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tcheck=(game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn player!=current&&get.attitude(player,current)>1;\n\t\t\t\t\t\t})>=2);\n\t\t\t\t\t}\n\t\t\t\t\tif(get.is.versus()){\n\t\t\t\t\t\tevent.versus=true;\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('hongyuan')).ai=function(){\n\t\t\t\t\t\t\treturn game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.side==current.side;\n\t\t\t\t\t\t\t})>2;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget(get.prompt2('hongyuan'),[1,2],function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t},function(target){\n\t\t\t\t\t\t\tif(!_status.event.check) return 0;\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t\t}).set('check',check);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar targets;\n\t\t\t\t\t\tif(event.versus){\n\t\t\t\t\t\t\ttargets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.side==player.side;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttargets=result.targets;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.logSkill('hongyuan',targets);\n\t\t\t\t\t\tgame.asyncDraw(targets);\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段，你可以少摸一张牌并指定至多两名其他角色。若如此做，这些角色各摸一张牌。"},"huanshi":{"name":"缓释","script":"{audio: \"2\",trigger: {global: \"judge\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)<=0) return false;\n\t\t\t\t\tvar cards=player.getCards('he');\n\t\t\t\t\tvar judge=event.judge(event.player.judging[0]);\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tvar judge2=event.judge(cards[i]);\n\t\t\t\t\t\tif(judge2>judge) return true;\n\t\t\t\t\t\tif(_status.currentPhase!=player&&judge2==judge&&get.color(cards[i])=='red'&&get.useful(cards[i])<5) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar target=trigger.player;\n\t\t\t\t\tvar judge=trigger.judge(target.judging[0]);\n\t\t\t\t\tvar attitude=get.attitude(target,player);\n\t\t\t\t\ttarget.choosePlayerCard('请选择代替判定的牌','he','visible',true,player).set('ai',function(button){\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar judge=_status.event.judge;\n\t\t\t\t\t\tvar attitude=_status.event.attitude;\n\t\t\t\t\t\tvar result=trigger.judge(card)-judge;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(result>0){\n\t\t\t\t\t\t\treturn 20+result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(result==0){\n\t\t\t\t\t\t\tif(_status.currentPhase==player) return 0;\n\t\t\t\t\t\t\tif(attitude>=0){\n\t\t\t\t\t\t\t\treturn get.color(card)=='red'?7:0-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn get.color(card)=='black'?10:0+get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(attitude>=0){\n\t\t\t\t\t\t\treturn get.color(card)=='red'?0:-10+result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn get.color(card)=='black'?0:-10+result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('filterButton',function(button){\n\t\t\t\t\t\tvar player=_status.event.target;\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('judge',judge).set('attitude',attitude);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=result.links[0];\n\t\t\t\t\t\tplayer.respond(event.card,'highlight').nopopup=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.player.judging[0].clone){\n\t\t\t\t\t\t\ttrigger.player.judging[0].clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\t\tcard.clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},trigger.player.judging[0]);\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=event.card;\n\t\t\t\t\t\ttrigger.orderingCards.add(event.card);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',event.card);\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"1\",},},}","info":"一名角色的判定牌生效前，你可令其观看你的手牌。若如此做，该角色选择你的一张牌，你打出此牌代替之。"},"mingzhe":{"name":"明哲","script":"{audio: \"2\",trigger: {player: [\"useCard\",\"respond\",\"loseAfter\"],},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==_status.currentPhase) return false;\n\t\t\t\t\tif(event.name!='lose') return get.color(event.card)=='red';\n\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\tif(event.cards2){\n\t\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\t\tif(get.color(event.cards2[i],player)=='red') return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=1;\n\t\t\t\t\tif(trigger.name=='lose'){\n\t\t\t\t\t\tevent.count=0;\n\t\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\t\tif(get.color(trigger.cards2[i],player)=='red') event.count++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tevent.count--;\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.count){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('mingzhe')).set('frequentSkill','mingzhe');\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('mingzhe');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.7\",},}","info":"当你于回合外使用或打出红色牌，或因弃置失去一张红色牌后，你可以摸一张牌。"},"aocai":{"name":"傲才","script":"{audio: \"2\",enable: [\"chooseToUse\",\"chooseToRespond\"],hiddenCard: function (player,name){\n\t\t\t\t\tif(player!=_status.currentPhase&&get.type(name)=='basic'&&lib.inpile.contains(name)) return true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(event.responded||player==_status.currentPhase||event.aocai) return false;\n\t\t\t\t\tfor(var i of lib.inpile){\n\t\t\t\t\t\tif(get.type(i)=='basic'&&event.filterCard({name:i},player,event)) return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},delay: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar evt=event.getParent(2);\n\t\t\t\t\tevt.set('aocai',true);\n\t\t\t\t\tvar cards=get.cards(player.countCards('h')==0?4:2);\n\t\t\t\t\tfor(var i=cards.length-1;i>=0;i--){\n\t\t\t\t\t\tui.cardPile.insertBefore(cards[i].fix(),ui.cardPile.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton(['傲才：选择要'+(evt.name=='chooseToUse'?'使用':'打出')+'的牌',cards]).set('filterButton',function(button){\n\t\t\t\t\t\treturn _status.event.cards.contains(button.link);\n\t\t\t\t\t}).set('cards',cards.filter(function(card){\n\t\t\t\t\t\treturn evt.filterCard(card,evt.player,evt)\n\t\t\t\t\t})).set('ai',function(button){\n\t\t\t\t\t\tvar evt=_status.event.getParent(3);\n\t\t\t\t\t\tif(evt&&evt.ai){\n\t\t\t\t\t\t\tvar tmp=_status.event;\n\t\t\t\t\t\t\t_status.event=evt;\n\t\t\t\t\t\t\tvar result=(evt.ai||event.ai1)(button.link,_status.event.player,evt);\n\t\t\t\t\t\t\t_status.event=tmp;\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar evt=event.getParent(2);\n\t\t\t\t\tif(result.bool&&result.links&&result.links.length){\n\t\t\t\t\t\tif(evt.name=='chooseToUse'){\n\t\t\t\t\t\tgame.broadcastAll(function(result){\n\t\t\t\t\t\t\t\tlib.skill.aocai_backup.viewAs={name:result.name,cards:[result],isCard:true};\n\t\t\t\t\t\t\t\tlib.skill.aocai_backup.prompt='选择'+get.translation(result)+'的目标';\n\t\t\t\t\t\t\t},result.links[0]);\n\t\t\t\t\t\t\tevt.set('_backupevent','aocai_backup');\n\t\t\t\t\t\t\tevt.backup('aocai_backup');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdelete evt.result.skill;\n\t\t\t\t\t\t\tdelete evt.result.used;\n\t\t\t\t\t\t\tevt.result.card=get.autoViewAs(result.links[0]);\n\t\t\t\t\t\t\tevt.result.cards=[result.links[0]];\n\t\t\t\t\t\t\tevt.redo();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tevt.goto(0);\n\t\t\t\t},ai: {effect: {target: function (card,player,target,effect){\n\t\t\t\t\t\t\tif(get.tag(card,'respondShan')) return 0.7;\n\t\t\t\t\t\t\tif(get.tag(card,'respondSha')) return 0.7;\n\t\t\t\t\t\t},},order: \"11\",respondShan: \"true\",respondSha: \"true\",result: {player: function (player){\n\t\t\t\t\t\t\tif(_status.event.dying) return get.attitude(player,_status.event.dying);\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"当你于回合外需要使用或打出一张基本牌时，你可以观看牌堆顶的两张牌（若你没有手牌则改为四张）。若你观看的牌中有此牌，你可以使用打出之。"},"duwu":{"name":"黩武","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.hasSkill('duwu2')==false&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.hp>0&&current.hp<=player.countCards('he')&&player.inRange(current);\n\t\t\t\t\t});\n\t\t\t\t},filterCard: function (){\n\t\t\t\t\tif(ui.selected.targets.length) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},position: \"he\",selectCard: [1,null],complexSelect: \"true\",complexCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.hp>0&&player.inRange(target)&&ui.selected.cards.length==target.hp;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.hp>0&&player.inRange(current)&&ui.selected.cards.length==current.hp&&get.damageEffect(current,player,player)>0;\n\t\t\t\t\t})) return 0;\n\t\t\t\t\tswitch(ui.selected.cards.length){\n\t\t\t\t\t\tcase 0:return 8-get.value(card);\n\t\t\t\t\t\tcase 1:return 6-get.value(card);\n\t\t\t\t\t\tcase 2:return 3-get.value(card);\n\t\t\t\t\t\tdefault:return 0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addTempSkill('duwu3');\n\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t},ai: {damage: \"true\",order: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn get.damageEffect(target,player);\n\t\t\t\t\t\t},},threaten: \"1.5\",expose: \"0.3\",},}","info":"出牌阶段，你可以弃置X张牌对你攻击范围内的一名其他角色造成1点伤害（X为该角色的体力值）。若该角色因此法进入濒死状态且存活，则你于濒死状态结算后失去1点体力，且本回合不能再发动〖黩武〗。"},"huxiao":{"name":"虎啸","script":"{trigger: {source: \"damageSource\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn event.nature=='fire';\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(!player.storage.huxiao3){\n\t\t\t\t\t\tplayer.storage.huxiao3=[];\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.huxiao3.add(trigger.player);\n\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\tplayer.addTempSkill('huxiao3');\n\t\t\t\t},subSkill: {clear: {trigger: {source: \"damageSource\",},priority: \"-7\",silent: \"true\",content: function (){\n\t\t\t\t\t\t\tdelete player.storage.huxiao;\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},}","info":"锁定技，当你造成火属性伤害时，该角色摸一张牌。然后，你于此回合内对其使用牌没有次数限制。"},"xueji":{"name":"雪恨","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'red'})>0;\n\t\t\t\t},filterTarget: \"true\",selectTarget: function (){\n\t\t\t\t\tvar player=_status.event.player\n\t\t\t\t\treturn [1,Math.max(1,player.getDamagedHp())];\n\t\t\t\t},position: \"he\",filterCard: {color: \"red\",},check: function (card){\n\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t},multitarget: \"true\",multiline: \"true\",line: \"fire\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.delay=false;\n\t\t\t\t\tfor(var i=0;i<targets.length;i++){\n\t\t\t\t\t\tif(!targets[i].isLinked()){\n\t\t\t\t\t\t\ttargets[i].link(true);\n\t\t\t\t\t\t\tevent.delay=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.delay){\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttargets[0].damage('fire','nocard');\n\t\t\t\t},ai: {damage: \"true\",fireAttack: \"true\",threaten: \"1.5\",order: \"7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar eff=get.damageEffect(target,player,target,'fire');\n\t\t\t\t\t\t\tif(target.isLinked()){\n\t\t\t\t\t\t\t\treturn eff/10;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张红色牌，然后选择至多X名角色，横置这些角色并对其中一名角色造成1点火焰伤害。（X为你已损失的体力值且至少为1）"},"wuji":{"name":"武继","script":"{skillAnimation: \"true\",animationColor: \"orange\",audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},forced: \"true\",unique: \"true\",juexingji: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getStat('damage')>=3&&!player.storage.wuji;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.removeSkill('huxiao');\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.awakenSkill('wuji');\n\t\t\t\t\tplayer.storage.wuji=true;\n\n\t\t\t\t\tvar card=get.cardPile('qinglong','field');\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tplayer.gain(card,'gain2','log');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"觉醒技，结束阶段开始时，若你于此回合内造成过3点或更多伤害，你加1点体力上限并回复1点体力，失去〖虎啸〗，然后从场上、牌堆或弃牌堆中获得【青龙偃月刀】"},"junbing":{"name":"郡兵","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.countCards('h')<=1&&(player==event.player||player.hasSkill('junbing'));\n\t\t\t\t},direct: \"true\",checkx: function (target,player){\n\t\t\t\t\tif(target){\n\t\t\t\t\t\tvar num=target.countCards('h');\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(num==0) return true;\n\t\t\t\t\t\tif(num==1) return att>-1;\n\t\t\t\t\t\tif(num==2) return att>0;\n\t\t\t\t\t\treturn att>1;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.target=player;\n\t\t\t\t\tevent.player=trigger.player;\n\t\t\t\t var prompt;\n\t\t\t\t if(player==event.player) prompt='是否发动【郡兵】摸一张牌？';\n\t\t\t\t else prompt=('###是否对'+get.translation(event.target)+'发动【郡兵】？###'+(event.player==event.target?'摸一张牌':'摸一张牌，将所有手牌交给该角色，然后该角色交给你等量的手牌'));\n\t\t\t\t\tevent.player.chooseBool(prompt).set('choice',lib.skill.junbing.checkx(event.target,event.player));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!result.bool){event.finish();return}\n\t\t\t\t\ttarget.logSkill('junbing',player);\n\t\t\t\t\tif(player==target) event.finish();\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\tevent.num=cards.length;\n\t\t\t\t\tgame.delay();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\ttarget.chooseCard('选择还给'+get.translation(player)+'的牌',true,event.num);\n\t\t\t\t\tgame.delay(0.2);\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tplayer.gain(result.cards,target,'giveAuto');\n\t\t\t\t\tgame.delay();\n\t\t\t\t},}","info":"一名角色的结束阶段开始时，若其手牌数不大于1，该角色可以摸一张牌。若如此做，该角色将所有手牌交给你，然后你交给其等量的牌。"},"quji":{"name":"去疾","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",position: \"he\",filterCard: \"true\",selectCard: function (){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\treturn player.getDamagedHp();\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.hp<target.maxHp;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.hp<player.maxHp;\n\t\t\t\t},selectTarget: function (){\n\t\t\t\t\treturn [1,ui.selected.cards.length];\n\t\t\t\t},complexSelect: \"true\",check: function (card){\n\t\t\t\t\tif(get.color(card)=='black') return -1;\n\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(target==targets[targets.length-1]){\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tif(get.color(cards[i],player)=='black'){\n\t\t\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: \"1\",},order: \"6\",},}","info":"出牌阶段限一次，你可以弃置X张牌（X为你已损失的体力值），然后令至多X名已受伤的角色各回复1点体力。若你以此法弃置的牌中有黑色牌，你失去一点体力。"},"shenxian":{"name":"甚贤","script":"{audio: \"2\",trigger: {global: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.type!='discard'||event.player==player||_status.currentPhase==player) return false;\n\t\t\t\t\tif(player.hasSkill('shenxian2')) return false;\n\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards2[i],null,event.hs.contains(event.cards2[i])?event.player:false)=='basic'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},frequent: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tif(event.name=='shenxian') player.addTempSkill('shenxian2');\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"每名角色的回合限一次，你的回合外，当有其他角色因弃置而失去基本牌时，你可以摸一张牌。"},"qiangwu":{"name":"枪舞","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.judge();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.storage.qiangwu=result.number;\n\t\t\t\t\tplayer.addTempSkill('qiangwu3','phaseUseEnd');\n\t\t\t\t},ai: {result: {player: \"1\",},order: \"11\",},}","info":"出牌阶段，你可以进行判定。若如此做，直到回合结束，你使用点数小于判定结果的【杀】时不受距离限制，且你使用点数大于判定结果的【杀】时不计入出牌阶段的使用次数限制。"},"moukui":{"name":"谋溃","script":"{trigger: {player: \"useCardToPlayered\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha';\n\t\t\t\t},audio: \"2\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar controls=['draw_card'];\n\t\t\t\t\tif(trigger.target.countCards('he')){\n\t\t\t\t\t\tcontrols.push('discard_card');\n\t\t\t\t\t}\n\t\t\t\t\tcontrols.push('cancel');\n\t\t\t\t\tplayer.chooseControl(controls).set('ai',function(){\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tif(trigger.target.countCards('he')&&get.attitude(_status.event.player,trigger.target)<0){\n\t\t\t\t\t\t\treturn 'discard_card';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn 'draw_card';\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('prompt',get.prompt2('moukui'));\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.control=='draw_card'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tplayer.logSkill('moukui');\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.control=='discard_card'&&trigger.target.countCards('he')){\n\t\t\t\t\t\tplayer.discardPlayerCard(trigger.target,'he',true).logSkill=['moukui',trigger.target];\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.addTempSkill('moukui2','shaEnd');\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"当你使用【杀】指定目标后，你可以选择一项：摸一张牌，或弃置其一张牌。若如此做，当此【杀】被【闪】抵消时，目标角色弃置你的一张牌。 "},"liangzhu":{"name":"良助","script":"{audio: \"2\",trigger: {global: \"recoverAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player.isPhaseUsing();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player==trigger.player){\n\t\t\t\t\t\tplayer.chooseControl('摸一张','摸两张','cancel2',function(){\n\t\t\t\t\t\t\treturn '摸两张';\n\t\t\t\t\t\t}).set('prompt',get.prompt2('liangzhu'));\n\t\t\t\t\t\tevent.single=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget(get.prompt2('liangzhu'),function(card,player,target){\n\t\t\t\t\t\t\treturn target==_status.event.player||target==_status.event.target;\n\t\t\t\t\t\t}).set('target',trigger.player).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player==target) return 1;\n\t\t\t\t\t\t\treturn get.attitude(player,target)-1.5;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.single){\n\t\t\t\t\t\tif(result.control!='cancel2'){\n\t\t\t\t\t\t\tplayer.logSkill('liangzhu',player);\n\t\t\t\t\t\t\tif(result.control=='摸一张'){\n\t\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t\t\t\tif(!player.storage.liangzhu) player.storage.liangzhu=[];\n\t\t\t\t\t\t\t\tplayer.storage.liangzhu.add(player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('liangzhu',target);\n\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t\t\tif(target.storage.liangzhu){\n\t\t\t\t\t\t\t\ttarget.storage.liangzhu.add(player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttarget.storage.liangzhu=[player];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"当一名角色于其出牌阶段内回复体力时，你可以选择一项：1、摸一张牌；2、令该角色摸两张牌。"},"fanxiang":{"name":"返乡","script":"{skillAnimation: \"true\",animationColor: \"fire\",audio: \"2\",unique: \"true\",juexingji: \"true\",forceunique: \"true\",derivation: \"xiaoji\",trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\tif(player.storage.fanxiang) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current.storage.liangzhu&&current.storage.liangzhu.contains(player)&&current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.storage.fanxiang=true;\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tplayer.removeSkill('liangzhu');\n\t\t\t\t\tplayer.addSkill('xiaoji');\n\t\t\t\t\tplayer.awakenSkill('fanxiang');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若场上有已受伤且你发动过〖良助〗的选项二的角色，则你加1点体力上限并回复1点体力，失去技能〖良助〗并获得技能〖枭姬〗"},"kaikang":{"name":"慷忾","script":"{audio: \"2\",trigger: {global: \"useCardToTargeted\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&get.distance(player,event.target)<=1;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.target)>=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\tif(trigger.target!=player){\n\t\t\t\t\t\tplayer.chooseCard(true,'he','交给'+get.translation(trigger.target)+'一张牌').set('ai',function(card){\n\t\t\t\t\t\t\tif(get.position(card)=='e') return -1;\n\t\t\t\t\t\t\tif(card.name=='shan') return 1;\n\t\t\t\t\t\t\tif(get.type(card)=='equip') return 0.5;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\ttrigger.target.gain(result.cards,player,'give');\n\t\t\t\t\tgame.delay();\n\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(trigger.target.getCards('h').contains(card)&&get.type(card)=='equip'){\n\t\t\t\t\t\ttrigger.target.chooseUseTarget(card);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.1\",},}","info":"当一名角色成为【杀】的目标后，若你至该角色的距离为1，你可以摸一张牌。若如此做，你交给其一张牌并展示之。若为装备牌，该角色可以使用此牌。"},"weikui":{"name":"伪溃","script":"{audio: \"kuiwei\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(target.countCards('h','shan')){\n\t\t\t\t\t\tplayer.viewHandcards(target);\n\t\t\t\t\t\tif(player.canUse({name:'sha',isCard:true},target,false)) player.useCard({name:'sha',isCard:true},target,false);\n\t\t\t\t\t\tplayer.storage.weikui2=target;\n\t\t\t\t\t\tplayer.addTempSkill('weikui2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.discardPlayerCard(target,'visible',true,'h').set('ai',function(button){\n\t\t\t\t\t\t\treturn get.value(button.link,_status.event.target);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hp<=2) return 0;\n\t\t\t\t\t\t\tif(player.hp==3) return target.hp<=2?-1:0;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以失去1点体力并选择一名有手牌的其他角色，你观看其手牌：若其手牌中有【闪】，则视为你对其使用【杀】，且本回合你计算与其的距离视为1；若其手牌中没有【闪】，你弃置其中一张牌。"},"lizhan":{"name":"励战","script":"{audio: \"yanzheng\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\tif(game.players[i].isDamaged()){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('lizhan'),'令任意名已受伤的角色各摸一张牌',[1,Infinity],function(card,player,target){\n\t\t\t\t\t\treturn target.isDamaged();\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('lizhan',result.targets);\n\t\t\t\t\t\tgame.asyncDraw(result.targets);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",threaten: \"1.3\",},}","info":"结束阶段，你可以令任意名已受伤的角色摸一张牌。"},"rezhoufu":{"name":"咒缚","script":"{audio: \"zhoufu\",enable: \"phaseUse\",usable: \"1\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},filterCard: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&!target.getStorage('rezhoufu2').length;\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card)\n\t\t\t\t},position: \"he\",discard: \"false\",toStorage: \"true\",prepare: \"give\",content: function (){\n\t\t\t\t\tif(!target.storage.rezhoufu2_markcount) target.storage.rezhoufu2_markcount=0;\n\t\t\t\t\ttarget.markAuto('rezhoufu2',cards);\n\t\t\t\t},ai: {order: \"1\",result: {target: \"-1\",},},group: [\"rezhoufu_judge\",\"rezhoufu_losehp\"],subSkill: {judge: {audio: \"zhoufu\",trigger: {global: \"judgeBefore\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn !event.directresult&&event.player.getStorage('rezhoufu2').length;\n\t\t\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t\t\tvar cards=[trigger.player.getStorage('rezhoufu2')[0]];\n\t\t\t\t\t\t\ttrigger.directresult=cards[0];\n\t\t\t\t\t\t\ttrigger.player.unmarkAuto('rezhoufu2',cards);\n\t\t\t\t\t\t},sub: \"true\",},losehp: {audio: \"zhoufu\",trigger: {global: \"phaseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.hasSkill('rezhoufu3');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},logTarget: function (current){\n\t\t\t\t\t\t\treturn game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.hasSkill('rezhoufu3');\n\t\t\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar targets=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.hasSkill('rezhoufu3');\n\t\t\t\t\t\t\t}).sortBySeat();\n\t\t\t\t\t\t\twhile(targets.length){\n\t\t\t\t\t\t\t\ttargets.shift().loseHp();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段限一次，你可以用一张牌对一名其他角色施“咒”。当有“咒”的角色判定时，将“咒”作为判定牌；一名角色的回合结束时，你令本回合移除过“咒”的角色各失去1点体力"},"reyingbing":{"name":"影兵","script":"{audio: \"yingbin\",trigger: {global: \"useCard\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\tvar cards=event.player.getStorage('rezhoufu2');\n\t\t\t\t\treturn cards.length&&get.color(cards[0])==get.color(event.card);\n\t\t\t\t},logTarget: \"player\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttrigger.player.storage.rezhoufu2_markcount++;\n\t\t\t\t\tif(trigger.player.storage.rezhoufu2_markcount>=2){\n\t\t\t\t\t\tvar cards=trigger.player.getStorage('rezhoufu2');\n\t\t\t\t\t\ttrigger.player.$throw(cards);\n\t\t\t\t\t\tgame.delayx();\n\t\t\t\t\t\tplayer.gain(cards,'gain2','log');\n\t\t\t\t\t\tcards.length=0;\n\t\t\t\t\t\ttrigger.player.unmarkSkill('rezhoufu2');\n\t\t\t\t\t}\n\t\t\t\t\telse trigger.player.markSkill('rezhoufu2');\n\t\t\t\t},}","info":"锁定技，有“咒”的角色使用与“咒”颜色相同的牌时，你摸一张牌；若这是你第二次因该“咒”摸牌，你获得该\"咒\"。"},"fulu":{"name":"符箓","script":"{trigger: {player: \"useCard1\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name=='sha'&&!event.card.nature) return true;\n\t\t\t\t},audio: \"true\",check: function (event,player){\n\t\t\t\t\tvar eff=0;\n\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\n\t\t\t\t\t\tvar target=event.targets[i];\n\t\t\t\t\t\tvar eff1=get.damageEffect(target,player,player);\n\t\t\t\t\t\tvar eff2=get.damageEffect(target,player,player,'thunder');\n\t\t\t\t\t\teff+=eff2;\n\t\t\t\t\t\teff-=eff1;\n\t\t\t\t\t}\n\t\t\t\t\treturn eff>=0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.card.nature='thunder';\n\t\t\t\t\tif(get.itemtype(trigger.card)=='card'){\n\t\t\t\t\t\tvar next=game.createEvent('fulu_clear');\n\t\t\t\t\t\tnext.card=trigger.card;\n\t\t\t\t\t\tevent.next.remove(next);\n\t\t\t\t\t\ttrigger.after.push(next);\n\t\t\t\t\t\tnext.setContent(function(){\n\t\t\t\t\t\t\tdelete card.nature;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你声明使用普通【杀】时，你可以将此【杀】改为雷【杀】。"},"fuji":{"name":"助祭","script":"{trigger: {global: \"damageBegin1\",},filter: function (event){\n\t\t\t\t\treturn event.source&&event.nature=='thunder';\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.source)>0&&get.attitude(player,event.player)<0;\n\t\t\t\t},prompt: function (event){\n\t\t\t\t\treturn get.translation(event.source)+'即将对'+get.translation(event.player)+'造成伤害，'+get.prompt('fuji');\n\t\t\t\t},logTarget: \"source\",content: function (){\n\t\t\t\t\ttrigger.source.judge().callback=lib.skill.fuji.callback;\n\t\t\t\t},callback: function (){\n\t\t\t\t\tvar evt=event.getParent(2);\n\t\t\t\t\tif(event.judgeResult.color=='black'){\n\t\t\t\t\t\t//game.cardsDiscard(card);\n\t\t\t\t\t\tevt._trigger.num++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevt._trigger.source.gain(card,'gain2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当一名角色造成雷属性伤害时，你可以令其进行判定，若结果为黑色，此伤害+1；若结果为红色，该角色获得判定牌。"},"zishu":{"name":"自书","script":"{audio: \"2\",locked: \"true\",subSkill: {discard: {trigger: {global: \"phaseEnd\",},audio: \"zishu\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player){\n\t\t\t\t\t\t\t\tvar he=player.getCards('h');\n\t\t\t\t\t\t\t\tvar bool=false;\n\t\t\t\t\t\t\t\tplayer.getHistory('gain',function(evt){\n\t\t\t\t\t\t\t\t\tif(!bool&&evt&&evt.cards){\n\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<evt.cards.length;i++){\n\t\t\t\t\t\t\t\t\t\t\tif(he.contains(evt.cards[i])) bool=true;break;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn bool;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tvar he=player.getCards('h');\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tplayer.getHistory('gain',function(evt){\n\t\t\t\t\t\t\t\tif(evt&&evt.cards){\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<evt.cards.length;i++){\n\t\t\t\t\t\t\t\t\t\tif(he.contains(evt.cards[i])) list.add(evt.cards[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tplayer.$throw(list,1000);\n\t\t\t\t\t\t\tplayer.lose(list,ui.discardPile,'visible');\n\t\t\t\t\t\t\tgame.log(player,'将',list,'置入弃牌堆');\n\t\t\t\t\t\t},sub: \"true\",},mark: {trigger: {player: \"gainBegin\",global: \"phaseBeginStart\",},silent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.name!='gain'||player!=_status.currentPhase;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tif(trigger.name=='gain') trigger.gaintag.add('zishu');\n\t\t\t\t\t\t\telse player.removeGaintag('zishu');\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},draw: {trigger: {player: \"gainAfter\",},audio: \"zishu\",forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\t\t\treturn event.getParent(2).name!='zishu_draw';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw('nodelay');\n\t\t\t\t\t\t},sub: \"true\",},},ai: {threaten: \"1.2\",nogain: \"1\",skillTagFilter: function (player){\n\t\t\t\t\t\treturn player!=_status.currentPhase;\n\t\t\t\t\t},},group: [\"zishu_draw\",\"zishu_discard\",\"zishu_mark\"],}","info":"锁定技，你的回合外，你获得的牌均会在当前回合结束后置入弃牌堆；你的回合内，当你不因〖自书〗而获得牌时，你摸一张牌。"},"xinyingyuan":{"name":"应援","script":"{audio: \"yingyuan\",trigger: {player: \"useCardAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tvar type=get.type(event.card,'trick');\n\t\t\t\t\treturn player.getHistory('custom',function(evt){\n\t\t\t\t\t\treturn evt.xinyingyuan_name==type;\n\t\t\t\t\t}).length==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.type=get.type(trigger.card,'trick');\n\t\t\t\t\tplayer.chooseTarget(get.prompt('xinyingyuan'),'令一名其他角色从牌堆中获得一张'+get.translation(event.type)+'牌',function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att<3) return 0;\n\t\t\t\t\t\tif(target.hasJudge('lebu')) att/=2;\n\t\t\t\t\t\tif(target.hasSkillTag('nogain')) att/=10;\n\t\t\t\t\t\treturn att/(1+get.distance(player,target,'absolute'));\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xinyingyuan',result.targets[0]);\n\t\t\t\t\t\tvar card=get.cardPile2(function(cardx){\n\t\t\t\t\t\t\treturn get.type(cardx,'trick')==event.type;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(card) result.targets[0].gain(card,'log','gain2');\n\t\t\t\t\t\tplayer.getHistory('custom').push({xinyingyuan_name:event.type});\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你于回合内使用一张牌后，你可以令一名其他角色从牌堆获得一张与该牌类型相同的牌（每种类型的牌每回合限一次）。"},"xinmanjuan":{"name":"漫卷","script":"{audio: \"manjuan\",forced: \"true\",priority: \"15\",trigger: {player: \"gainAfter\",},filter: function (event,player){\n\t\t\t\t\treturn event.type!='xinmanjuan';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.lose(trigger.cards,ui.discardPile,'visible');\n\t\t\t\t\tplayer.$throw(trigger.cards,1000);\n\t\t\t\t\tgame.log(player,'将',trigger.cards,'置入了弃牌堆')\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.cards=trigger.cards.slice(0);\n\t\t\t\t\tif(_status.currentPhase!=player) event.finish();\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tevent.card=event.cards.shift();\n\t\t\t\t\tevent.togain=[];\n\t\t\t\t\tvar number=get.number(event.card);\n\t\t\t\t\tfor(var i=0;i<ui.discardPile.childNodes.length;i++){\n\t\t\t\t\t\tvar current=ui.discardPile.childNodes[i];\n\t\t\t\t\t\tif((!trigger.cards.contains(current))&&get.number(current)==number) event.togain.push(current);\n\t\t\t\t\t}\n\t\t\t\t\tif(!event.togain.length) event.goto(5);\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tplayer.chooseButton(['是否获得其中的一张牌？',event.togain]).ai=function(button){\n\t\t\t\t\t\treturn get.value(button.link);\n\t\t\t\t\t};\n\t\t\t\t\t\"step 4\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.gain(result.links[0],'gain2').type='xinmanjuan';\n\t\t\t\t\t}\n\t\t\t\t\t\"step 5\"\n\t\t\t\t\tif(event.cards.length) event.goto(2);\n\t\t\t\t},ai: {threaten: \"4.2\",nogain: \"1\",skillTagFilter: function (player){\n\t\t\t\t\t\treturn player!=_status.currentPhase;\n\t\t\t\t\t},},}","info":"锁定技，当你不因【漫卷】或【醉乡】而获得牌时，你将此牌置入弃牌堆。然后若此时处于你的回合内，则你可以从弃牌堆中选择获得一张与此牌点数相同的其他牌。"},"zuixiang":{"name":"醉乡","script":"{skillAnimation: \"true\",animationColor: \"gray\",audio: \"true\",unique: \"true\",limited: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('zuixiang');\n\t\t\t\t\tevent.cards=player.showCards(get.cards(3)).cards;\n\t\t\t\t\tplayer.markAuto('zuixiang2',event.cards);\n\t\t\t\t\tgame.cardsGotoSpecial(event.cards);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(lib.skill.zuixiang.filterSame(cards)){\n\t\t\t\t\t\tplayer.gain(cards,'gain2').type='xinmanjuan';\n\t\t\t\t\t\tdelete player.storage.zuixiang2;\n\t\t\t\t\t\tplayer.unmarkSkill('zuixiang2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger._zuixiang=true;\n\t\t\t\t\t\tplayer.addSkill('zuixiang2');\n\t\t\t\t\t}\n\t\t\t\t},filterSame: function (c){\n\t\t\t\t\tfor(var i=0;i<c.length;i++){\n\t\t\t\t\t\tfor(var j=i+1;j<c.length;j++){\n\t\t\t\t\t\t\tif(get.number(c[i])==get.number(c[j])) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，准备阶段开始时，你可以展示牌堆顶的3张牌并置于你的武将牌上。你不能使用或打出与该些牌同类的牌，所有同类牌对你无效。之后的每个准备阶段，你须重复展示一次，直到这些牌中任意两张点数相同。然后，你获得这些牌。"},"gongao":{"name":"功獒","script":"{audio: \"2\",trigger: {global: \"dieAfter\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.gainMaxHp();\n\t\t\t\t\tplayer.recover();\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"锁定技，当一名角色死亡后，你增加一点体力上限，回复一点体力。"},"juyi":{"name":"举义","script":"{skillAnimation: \"true\",animationColor: \"thunder\",audio: \"true\",derivation: [\"benghuai\",\"weizhong\"],trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.maxHp>game.players.length&&!player.storage.juyi;\n\t\t\t\t},forced: \"true\",unique: \"true\",juexingji: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(player.maxHp);\n\t\t\t\t\tplayer.addSkill('benghuai');\n\t\t\t\t\tplayer.addSkill('weizhong');\n\t\t\t\t\tplayer.storage.juyi=true;\n\t\t\t\t\tplayer.awakenSkill('juyi');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若你的体力上限大于存活角色数，你摸等同于体力上限张数的牌，然后获得技能〖崩坏〗和〖威重〗。"},"kunfen":{"name":"困奋","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(player.storage.kunfen||\n\t\t\t\t\t(get.mode()=='guozhan'&&player.hiddenSkills.contains('kunfen'))){\n\t\t\t\t\t\tif(!player.storage.kunfen){\n\t\t\t\t\t\t\tevent.skillHidden=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseBool(get.prompt('kunfen'),'结束阶段开始时，你可以失去1点体力，然后摸两张牌。').set('ai',function(){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player.hp>3) return true;\n\t\t\t\t\t\t\tif(player.hp==3&&player.countCards('h')<3) return true;\n\t\t\t\t\t\t\tif(player.hp==2&&player.countCards('h')==0) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.forced=true;\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.forced||result.bool){\n\t\t\t\t\t\tplayer.logSkill('kunfen');\n\t\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"锁定技，结束阶段开始时，你失去1点体力，然后摸两张牌。"},"fengliang":{"name":"逢亮","script":"{skillAnimation: \"true\",animationColor: \"thunder\",unique: \"true\",juexingji: \"true\",audio: \"2\",derivation: \"retiaoxin\",trigger: {player: \"dying\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.kunfen;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(player.hp<2){\n\t\t\t\t\t\tplayer.recover(2-player.hp);\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tplayer.addSkill('retiaoxin');\n\t\t\t\t\tplayer.storage.kunfen=true;\n\t\t\t\t\tplayer.awakenSkill('fengliang');\n\t\t\t\t},}","info":"觉醒技，当你进入濒死状态时，你减1点体力上限，将体力值回复至2点，获得技能〖挑衅〗并将〖困奋〗改为非锁定技。"},"zhuiji":{"name":"追击","script":"{mod: {globalFrom: function (from,to){\n\t\t\t\t\t\tif(from.hp>=to.hp) return -Infinity;\n\t\t\t\t\t},},}","info":"锁定技，你与体力值不大于你的角色的距离视为1。"},"ol_shichou":{"name":"誓仇","script":"{audio: \"2\",trigger: {player: \"useCard2\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha';//&&player.isDamaged();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=Math.max(1,player.getDamagedHp());\n\t\t\t\t\tplayer.chooseTarget('是否发动【誓仇】，令至多'+num+'名其他角色也成为此【杀】的目标？',[1,num],function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&!trigger.targets.contains(target)&&player.canUse({name:'sha'},target);\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\treturn get.effect(target,{name:'sha'},_status.event.player);\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tvar targets=result.targets;\n\t\t\t\t\t\tplayer.logSkill('ol_shichou',targets);\n\t\t\t\t\t\tplayer.line(targets,trigger.card.nature);\n\t\t\t\t\t\ttrigger.targets.addArray(targets);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用【杀】时，你可以令至多X名角色也成为此【杀】的目标。（X为你已损失的体力值且至少为1）"},"recanshi":{"name":"残蚀","script":"{audio: \"canshi\",trigger: {player: \"phaseDrawBegin2\",},check: function (event,player){\n\t\t\t\t\tif(player.skipList.contains('phaseUse')||!player.countCards('h',function(card){\n\t\t\t\t\t\treturn get.type(card,'trick')=='trick'&&player.hasUseTarget(card);\n\t\t\t\t\t})) return true;\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\tif(player.hasZhuSkill('guiming')&&current.group=='wu') return true;\n\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t\treturn num>1;\n\t\t\t\t},prompt: function (event,player){\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\tif(player.hasZhuSkill('guiming')&&current.group=='wu'&&current!=player) return true;\n\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t\treturn '残蚀：是否多摸'+get.cnNumber(num)+'张牌？';\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed&&game.hasPlayer(function(current){\n\t\t\t\t\t\tif(player.hasZhuSkill('guiming')&&current.group=='wu'&&current!=player) return true;\n\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\tif(player.hasZhuSkill('guiming')&&current.group=='wu'&&current!=player) return true;\n\t\t\t\t\t\treturn current.isDamaged();\n\t\t\t\t\t});\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\ttrigger.num+=num;\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addTempSkill('recanshi2');\n\t\t\t\t},}","info":"摸牌阶段开始时，你可以多摸X张牌（X为已受伤的角色数），若如此做，当你于此回合内使用【杀】或普通锦囊牌时，你弃置一张牌。"},"rechouhai":{"name":"仇海","script":"{audio: \"chouhai\",trigger: {player: \"damageBegin3\",},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&player.countCards('h')==0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'&&target.countCards('h')==0) return [1,-2];\n\t\t\t\t\t\t},},},}","info":"锁定技，当你受到渠道为【杀】的伤害时，若你没有手牌，此伤害+1。"},"guiming":{"name":"归命","script":"{unique: \"true\",zhuSkill: \"true\",}","info":"主公技，锁定技，你将残蚀描述中的“已受伤角色”改为“已受伤角色或其他吴势力角色”"},"rebiluan":{"name":"避乱","script":"{audio: \"biluan\",trigger: {player: \"phaseJieshuBegin\",},checkx: function (player){\n\t\t\t\t\tvar ng=Math.min(4,game.countPlayer());\n\t\t\t\t\tvar nai=0;\n\t\t\t\t\tfor(var i=0;i<game.players.length;i++){\n\t\t\t\t\t\tif(game.players[i]!=player){\n\t\t\t\t\t\t\tvar dist=get.distance(game.players[i],player,'attack');\n\t\t\t\t\t\t\tif(dist<=1&&dist+ng>1){\n\t\t\t\t\t\t\t\tnai++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn nai>=2;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&get.distance(current,player)<=1;\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseToDiscard('he',get.prompt2('rebiluan')).set('logSkill','rebiluan').set('check',lib.skill.rebiluan.checkx(player)).set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.check) return 6-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addSkill('rebiluan2');\n\t\t\t\t\t\tvar ng=Math.min(4,game.countPlayer());\n\t\t\t\t\t\tplayer.$damagepop(ng,'unknownx');\n\t\t\t\t\t\tplayer.storage.rebiluan2+=ng;\n\t\t\t\t\t\tplayer.markSkill('rebiluan2');\n\t\t\t\t\t\tgame.addVideo('storage',player,['rebiluan2',player.storage.rebiluan2]);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段开始时，若有与你距离不大于1的其他角色，你可以弃置一张牌。若如此做，本局内其他角色计算与你的距离时+X。（X为场上角色数且至多为4）"},"relixia":{"name":"礼下","script":"{audio: \"lixia\",trigger: {global: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.isAlive()&&event.player!=player&&!player.inRangeOf(event.player);\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(trigger.player.isDead()){\n\t\t\t\t\t\tevent._result={bool:true,links:[0]};\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tevent.videoId=lib.status.videoId++;\n\t\t\t\t\tvar func=function(card,id,bool){\n\t\t\t\t\t\tvar list=[\n\t\t\t\t\t\t\t'令自己摸一张牌',\n\t\t\t\t\t\t\t'令XXX摸两张牌',\n\t\t\t\t\t\t\t'令XXX回复1点体力',\n\t\t\t\t\t\t];\n\t\t\t\t\t\tvar choiceList=ui.create.dialog('【礼下】：请选择一至两项','forcebutton');\n\t\t\t\t\t\tchoiceList.videoId=id;\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\tlist[i]=list[i].replace(/XXX/g,card);\n\t\t\t\t\t\t\tvar str='<div class=\"popup text\" style=\"width:calc(100% - 10px);display:inline-block\">';\n\t\t\t\t\t\t\tif(i==2&&!bool) str+='<div style=\"opacity:0.5\">';\n\t\t\t\t\t\t\tstr+=list[i];\n\t\t\t\t\t\t\tif(i==2&&!bool) str+='</div>';\n\t\t\t\t\t\t\tstr+='</div>';\n\t\t\t\t\t\t\tvar next=choiceList.add(str);\n\t\t\t\t\t\t\tnext.firstChild.addEventListener(lib.config.touchscreen?'touchend':'click',ui.click.button);\n\t\t\t\t\t\t\tnext.firstChild.link=i;\n\t\t\t\t\t\t\tfor(var j in lib.element.button){\n\t\t\t\t\t\t\t\tnext[j]=lib.element.button[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchoiceList.buttons.add(next.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn choiceList;\n\t\t\t\t\t};\n\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\tplayer.send(func,get.translation(trigger.player),event.videoId,trigger.player.isDamaged());\n\t\t\t\t\t}\n\t\t\t\t\tevent.dialog=func(get.translation(trigger.player),event.videoId,trigger.player.isDamaged());\n\t\t\t\t\tif(player!=game.me||_status.auto){\n\t\t\t\t\t\tevent.dialog.style.display='none';\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseButton(true,[1,2]);\n\t\t\t\t\tnext.set('dialog',event.videoId);\n\t\t\t\t\tnext.set('filterButton',function(button){\n\t\t\t\t\t\tif(button.link==2){\n\t\t\t\t\t\t\treturn _status.event.bool1;\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('bool1',trigger.player.isDamaged());\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar event=_status.event.getTrigger();\n\t\t\t\t\t\tif(button.link&&get.attitude(player,event.player)<=0) return 0;\n\t\t\t\t\t\treturn button.link*Math.random();\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.videoId!=undefined){\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send('closeDialog',event.videoId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t}\n\t\t\t\t\tvar map=[\n\t\t\t\t\t\tfunction(trigger,player,event){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(trigger,player,event){\n\t\t\t\t\t\t\tif(!result.links.contains(2)) player.line(trigger.player);\n\t\t\t\t\t\t\ttrigger.player.draw(2);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(trigger,player,event){\n\t\t\t\t\t\t\tplayer.line(trigger.player);\n\t\t\t\t\t\t\ttrigger.player.recover();\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t\tresult.links.sort();\n\t\t\t\t\tfor(var i=0;i<result.links.length;i++){\n\t\t\t\t\t\tgame.log(player,'选择了','#g【礼下】','的','#y选项'+get.cnNumber(result.links[i]+1,true));\n\t\t\t\t\t\tmap[result.links[i]](trigger,player,event);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addSkill('rebiluan2');\n\t\t\t\t\tplayer.storage.rebiluan2-=result.links.length;\n\t\t\t\t\tplayer.markSkill('rebiluan2');\n\t\t\t\t\tgame.addVideo('storage',player,['rebiluan2',player.storage.rebiluan2]);\n\t\t\t\t},}","info":"锁定技，其他角色的结束阶段开始时，若你不在其攻击范围内，你选择一至两项：1.摸一张牌；2.其摸两张牌；3.其回复1点体力。本局内其他角色计算与你的距离时-X（X为你选择的选项数）。"},"fengpo":{"name":"凤魄","script":"{shaRelated: \"true\",audio: \"2\",trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\tif(event.targets.length!=1||!['sha','juedou'].contains(event.card.name)) return false;\n\t\t\t\t\tvar evt2=event.getParent('phaseUse');\n\t\t\t\t\tif(evt2.player!=player) return false;\n\t\t\t\t\treturn player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.card.name==event.card.name&&evt.getParent('phaseUse')==evt2;\n\t\t\t\t\t}).indexOf(event.getParent())==0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseControl('draw_card','加伤害','cancel2').set('prompt',get.prompt2('fengpo'));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control&&result.control!='cancel2'){\n\t\t\t\t\t\tplayer.logSkill('fengpo',trigger.target);\n\t\t\t\t\t\tvar nd=trigger.target.countCards('h',{suit:'diamond'});\n\t\t\t\t\t\tif(result.control=='draw_card'){\n\t\t\t\t\t\t\tplayer.draw(nd);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar trigger2=trigger.getParent();\n\t\t\t\t\t\t\tif(typeof trigger2.baseDamage!='number'){\n\t\t\t\t\t\t\ttrigger2.baseDamage=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger2.baseDamage+=nd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每种牌名限一次，当你于出牌阶段内第一次使用【杀】或【决斗】指定目标后，若目标角色数为1，你可以选择一项：1.摸X张牌；2.令此牌的伤害值基数+X。（X为其手牌中方牌的数量）"},"mashu":{"name":"马术","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-1;\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-1。"},"yishe":{"name":"义舍","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},init: function (player){\n\t\t\t\t\tif(!player.storage.yishe) player.storage.yishe=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn !player.storage.yishe||!player.storage.yishe.length;\n\t\t\t\t},intro: {content: \"cards\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.chooseCard(2,'he',true,'选择两张牌作为“米”');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.storage.yishe=result.cards;\n\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\tplayer.syncStorage('yishe');\n\t\t\t\t\tplayer.markSkill('yishe');\n\t\t\t\t},}","info":"结束阶段开始时，若你的武将牌上没有「米」，则你可以摸两张牌。若如此做，你将两张牌置于武将牌上，称为「米」；当有「米」移至其他区域后，若你的武将牌上没有「米」，则你回复1点体力。"},"bushi":{"name":"布施","script":"{audio: \"2\",trigger: {player: \"damageEnd\",source: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn player.storage.yishe&&player.storage.yishe.length&&event.player.isAlive();\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttrigger.player.chooseCardButton('选择获得一张“米”',player.storage.yishe);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t\tplayer.logSkill('bushi');\n\t\t\t\t\t\ttrigger.player.gain(result.links[0],'draw2','log','fromStorage');\n\t\t\t\t\t\tplayer.storage.yishe.remove(result.links[0]);\n\t\t\t\t\t\tplayer.syncStorage('yishe');\n\t\t\t\t\t\tif(player.storage.yishe.length==0){\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t\tplayer.unmarkSkill('yishe');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.markSkill('yishe');\n\t\t\t\t\t\t\tif(event.count>0) event.goto(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到1点伤害后，或其他角色受到你造成的1点伤害后，受到伤害的角色可以获得你的一张「米」"},"midao":{"name":"米道","script":"{audio: \"2\",trigger: {global: \"judge\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.yishe&&player.storage.yishe.length&&event.player.isAlive();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar list=player.storage.yishe;\n\t\t\t\t\tplayer.chooseButton([get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+get.translation(trigger.player.judging[0])+\n\t\t\t\t\t\t'，'+get.prompt('midao'),list,'hidden'],function(button){\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar judging=_status.event.judging;\n\t\t\t\t\t\tvar result=trigger.judge(card)-trigger.judge(judging);\n\t\t\t\t\t\tvar attitude=get.attitude(player,trigger.player);\n\t\t\t\t\t\treturn result*attitude;\n\t\t\t\t\t}).set('judging',trigger.player.judging[0]).set('filterButton',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar card=button.link;\n\t\t\t\t\t\tvar mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);\n\t\t\t\t\t\tif(mod2!='unchanged') return mod2;\n\t\t\t\t\t\tvar mod=game.checkMod(card,player,'unchanged','cardRespondable',player);\n\t\t\t\t\t\tif(mod!='unchanged') return mod;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.forceDie=true;\n\t\t\t\t\t\tplayer.respond(result.links,'midao','highlight','noOrdering');\n\t\t\t\t\t\tresult.cards=result.links;\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\tplayer.storage.yishe.remove(card);\n\t\t\t\t\t\tif(player.storage.yishe.length==0){\n\t\t\t\t\t\t\tplayer.unmarkSkill('yishe');\n\t\t\t\t\t\t\tif(player.hasSkill('yishe')){\n\t\t\t\t\t\t\t\tplayer.logSkill('yishe');\n\t\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.markSkill('yishe');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(trigger.player.judging[0].clone){\n\t\t\t\t\t\t\ttrigger.player.judging[0].clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\tgame.broadcast(function(card){\n\t\t\t\t\t\t\t\tif(card.clone){\n\t\t\t\t\t\t\t\t\tcard.clone.classList.remove('thrownhighlight');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},trigger.player.judging[0]);\n\t\t\t\t\t\t\tgame.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(trigger.player.judging[0]);\n\t\t\t\t\t\ttrigger.player.judging[0]=result.cards[0];\n\t\t\t\t\t\ttrigger.orderingCards.addArray(result.cards);\n\t\t\t\t\t\tgame.log(trigger.player,'的判定牌改为',card);\n\t\t\t\t\t\tgame.delay(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {rejudge: \"true\",tag: {rejudge: \"0.6\",},},}","info":"一名角色的判定牌生效前，你可以打出一张「米」代替之。"},"ranshang":{"name":"燃殇","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\treturn event.nature=='fire';\n\t\t\t\t},forced: \"true\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addMark('ranshang',trigger.num);\n\t\t\t\t},intro: {name2: \"燃\",content: \"mark\",},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'){\n\t\t\t\t\t\t\t\tif(card.nature=='fire'||player.hasSkill('zhuque_skill')) return 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.tag(card,'fireDamage')&&current<0) return 2;\n\t\t\t\t\t\t},},},group: \"ranshang2\",}","info":"锁定技，当你受到1点火焰伤害后，你获得1枚“燃”标记；结束阶段开始时，你失去X点体力。若X大于2，则你减2点体力上限并摸两张牌。（X为“燃”标记的数量）"},"hanyong":{"name":"悍勇","script":"{trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\treturn event.card&&(event.card.name=='nanman'||event.card.name=='wanjian'||(event.card.name=='sha'&&!event.card.nature&&get.suit(event.card)=='spade'));\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.baseDamage++;\n\t\t\t\t\tif(game.roundNumber<=player.hp) player.addMark('ranshang',1);\n\t\t\t\t},}","info":"当你使用【南蛮入侵】或【万箭齐发】或黑桃【杀】时，若你的体力值小于游戏轮数，你可以令此牌的伤害值基数+1。然后若你的体力值不小于游戏轮数，则你获得一枚“燃”标记。"},"chenqing":{"name":"陈情","script":"{audio: \"2\",trigger: {global: \"dying\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.hp<=0&&!player.hasSkill('chenqing2');\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('chenqing'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target!=_status.event.getTrigger().player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tif(get.attitude(player,trigger.player)>0){\n\t\t\t\t\t\t\tvar att1=get.attitude(target,player);\n\t\t\t\t\t\t\tvar att2=get.attitude(target,trigger.player);\n\t\t\t\t\t\t\tvar att3=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att3<0) return 0;\n\t\t\t\t\t\t\treturn att1/2+att2+att3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t// return get.attitude(player,target);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.addTempSkill('chenqing2','roundStart');\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tevent.target.draw(4);\n\t\t\t\t\t\tplayer.logSkill('chenqing',event.target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar target=event.target;\n\t\t\t\t\tvar tosave=trigger.player;\n\t\t\t\t\tvar att=get.attitude(target,tosave);\n\t\t\t\t\tvar hastao=target.countCards('h','tao');\n\t\t\t\t\ttarget.chooseToDiscard(4,true,'he').set('ai',function(card){\n\t\t\t\t\t\tvar hastao=_status.event.hastao;\n\t\t\t\t\t\tvar att=_status.event.att;\n\t\t\t\t\t\tif(!hastao&&att>0){\n\t\t\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(ui.selected.cards[i])==suit){\n\t\t\t\t\t\t\t\t\treturn -4-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(att<0&&ui.selected.cards.length==3){\n\t\t\t\t\t\t\tvar suit=get.suit(card);\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(ui.selected.cards[i])==suit){\n\t\t\t\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -10-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -get.value(card);\n\t\t\t\t\t}).set('hastao',hastao).set('att',att);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.cards&&result.cards.length==4){\n\t\t\t\t\t\tvar suits=[];\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tsuits.add(get.suit(result.cards[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(suits.length==4&&game.checkMod({name:'tao',isCard:true},player,trigger.player,'unchanged','cardSavable',player)){\n\t\t\t\t\t\t\tevent.target.useCard({name:'tao',isCard:true},trigger.player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.5\",},}","info":"每轮限一次，当一名角色处于濒死状态时，你可以令另一名其他角色摸四张牌，然后其弃置四张牌。若其以此法弃置的四张牌花色各不相同，则视为该角色对濒死的角色使用一张【桃】。"},"mozhi":{"name":"默识","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.isPhaseUsing()&&['basic','trick'].contains(get.type(evt.card));\n\t\t\t\t\t}).length>0&&player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=2;\n\t\t\t\t\tevent.history=player.getHistory('useCard',function(evt){\n\t\t\t\t\t\treturn evt.isPhaseUsing()&&['basic','trick'].contains(get.type(evt.card));\n\t\t\t\t\t})\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent._result={};\n\t\t\t\t\tif(event.count&&event.history.length&&player.countCards('h')){\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t\tvar card=event.history.shift().card;\n\t\t\t\t\t\tcard={name:card.name,nature:card.nature};\n\t\t\t\t\t\tif(card.name!='jiu'&&lib.filter.cardEnabled(card)){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player.canUse(card,current);\n\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\tlib.skill.mozhix.viewAs=card;\n\t\t\t\t\t\t\t\tvar next=player.chooseToUse();\n\t\t\t\t\t\t\t\tif(next.isOnline()){\n\t\t\t\t\t\t\t\t\tplayer.send(function(card){\n\t\t\t\t\t\t\t\t\t\tlib.skill.mozhix.viewAs=card;\n\t\t\t\t\t\t\t\t\t},card)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnext.logSkill='mozhi';\n\t\t\t\t\t\t\t\tnext.set('openskilldialog','默识：将一张手牌当'+get.translation(card)+'使用');\n\t\t\t\t\t\t\t\tnext.set('norestore',true);\n\t\t\t\t\t\t\t\tnext.set('_backupevent','mozhix');\n\t\t\t\t\t\t\t\tnext.set('custom',{\n\t\t\t\t\t\t\t\t\tadd:{},\n\t\t\t\t\t\t\t\t\treplace:{window:function(){}}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnext.backup('mozhix');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result&&result.bool) event.goto(1);\n\t\t\t\t},}","info":"结束阶段开始时，你可以将一张手牌当作你本回合出牌阶段内使用的第一张基本或普通锦囊牌使用。然后，你可以将一张手牌当做你本回合出牌阶段内使用的第二张基本或普通锦囊牌使用。（你不能通过此技能使用【酒】）"},"yuhua":{"name":"羽化","script":"{trigger: {player: \"phaseDiscardBegin\",},forced: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>player.getHandcardLimit();\n\t\t\t\t},content: function (){},mod: {ignoredHandcard: function (card,player){\n\t\t\t\t\t\tif(get.type(card)!='basic'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},cardDiscardable: function (card,player,name){\n\t\t\t\t\t\tif(name=='phaseDiscard'&&get.type(card)!='basic') return false;\n\t\t\t\t\t},},}","info":"锁定技，弃牌阶段内，你的非基本牌不计入手牌上限。"},"qirang":{"name":"祈禳","script":"{audio: \"2\",trigger: {player: \"equipEnd\",},frequent: \"true\",content: function (){\n\t\t\t\t\tplayer.gain(get.cardPile(function(card){\n\t\t\t\t\t\treturn get.type(card,'trick')=='trick';\n\t\t\t\t\t}),'gain2');\n\t\t\t\t},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"当有装备牌进入你的装备区时，你可以随机获得牌堆中的一张锦囊牌。"},"jieyuan":{"name":"竭缘","script":"{group: [\"jieyuan_more\",\"jieyuan_less\"],subSkill: {more: {audio: \"true\",trigger: {source: \"damageBegin1\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.countCards(player.hasSkill('fenxin_nei')?'he':'h',function(card){\n\t\t\t\t\t\t\t\tif(player.hasSkill('fenxin_nei')||(_status.connectMode&&get.position(card)=='h')) return true;\n\t\t\t\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t\t\t\t})) return false;\n\t\t\t\t\t\t\treturn (event.player.hp>=player.hp||player.hasSkill('fenxin_fan'))&&player!=event.player;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar goon=(get.attitude(player,trigger.player)<0);\n\t\t\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('jieyuan',trigger.player),player.hasSkill('fenxin_nei')?'he':'h');\n\t\t\t\t\t\t\tif(!player.hasSkill('fenxin_nei')){\n\t\t\t\t\t\t\t\tnext.set('filterCard',function(card){\n\t\t\t\t\t\t\t\t\treturn get.color(card)=='black';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnext.set('prompt2','弃置一张黑色手牌令伤害+1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnext.set('prompt2','弃置一张手牌令伤害+1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\t\tif(_status.event.goon){\n\t\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.set('goon',goon);\n\t\t\t\t\t\t\tnext.logSkill=['jieyuan_more',trigger.player];\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\ttrigger.num++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},less: {audio: \"true\",trigger: {player: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.countCards(player.hasSkill('fenxin_nei')?'he':'h',function(card){\n\t\t\t\t\t\t\t\tif(player.hasSkill('fenxin_nei')||(_status.connectMode&&get.position(card)=='h')) return true;\n\t\t\t\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t\t\t\t})) return false;\n\t\t\t\t\t\t\treturn event.source&&(event.source.hp>=player.hp||player.hasSkill('fenxin_zhong'))&&player!=event.source;\n\t\t\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('jieyuan'),player.hasSkill('fenxin_nei')?'he':'h');\n\t\t\t\t\t\t\tif(!player.hasSkill('fenxin_nei')){\n\t\t\t\t\t\t\t\tnext.set('filterCard',function(card){\n\t\t\t\t\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnext.set('prompt2','弃置一张红色手牌令伤害-1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnext.set('prompt2','弃置一张手牌令伤害-1');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(player.hp==1||_status.event.getTrigger().num>1){\n\t\t\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(player.hp==2){\n\t\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.logSkill='jieyuan_less';\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},ai: {expose: \"0.2\",threaten: \"1.5\",},}","info":"当你对一名其他角色造成伤害时，若其体力值大于或等于你的体力值，你可弃置一张黑色手牌，令此伤害+1；当你受到一名其他角色造成的伤害时，若其体力值大于或等于你的体力值，你可弃置一张红色手牌，令此伤害-1。"},"fenxin":{"name":"焚心","script":"{}","info":"此模式下不可用"},"yawang":{"name":"雅望","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar num=game.countPlayer(function(target){\n\t\t\t\t\t\treturn target.hp==player.hp;\n\t\t\t\t\t});\n\t\t\t\t\tif(!player.hasSkill('xunzhi2')){\n\t\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\t\tif(nh>5) return false;\n\t\t\t\t\t\tif(num==3&&nh>3) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn num>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\tvar num=game.countPlayer(function(target){\n\t\t\t\t\t\treturn target.hp==player.hp;\n\t\t\t\t\t});\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.yawang=num;\n\t\t\t\t\tplayer.addTempSkill('yawang2');\n\t\t\t\t},}","info":"锁定技，摸牌阶段开始时，你改为摸X张牌，然后你于本回合的出牌阶段内至多使用X张牌（X为与你体力值相等的角色数）"},"xunzhi":{"name":"殉志","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},init: function (player){\n\t\t\t\t\tplayer.storage.xunzhi=0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tvar previous=player.getPrevious();\n\t\t\t\t\tvar next=player.getNext();\n\t\t\t\t\tif(previous&&next){\n\t\t\t\t\t\treturn player.hp!=previous.hp&&player.hp!=next.hp;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\treturn player.hp>=3&&player.countCards('h')>player.hp+1+player.storage.xunzhi;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.loseHp();\n\t\t\t\t\tplayer.storage.xunzhi+=2;\n\t\t\t\t},mark: \"true\",intro: {content: function (storage,player){\n\t\t\t\t\t\treturn '手牌上限+'+player.storage.xunzhi;\n\t\t\t\t\t},},mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\tif(typeof player.storage.xunzhi=='number'){\n\t\t\t\t\t\t\treturn num+player.storage.xunzhi;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"准备阶段开始时，若你的上家和下家与你的体力值均不相等，你可以失去1点体力。若如此做，你本局内手牌上限+2。"},"jie":{"name":"嫉恶","script":"{audio: \"1\",trigger: {source: \"damageBegin1\",},filter: function (event){\n\t\t\t\t\treturn event.card&&event.card.name=='sha'&&get.color(event.card)=='red'&&event.notLink();\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},}","info":"锁定技，当你使用红色【杀】造成伤害时，此伤害+1。"},"dahe":{"name":"大喝","script":"{audio: \"1\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target).set('preserve','win');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.target){\n\t\t\t\t\t\tevent.type=true;\n\t\t\t\t\t\tevent.card=result.target;\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(result.target)+'交给一名角色',function(card,player,target){\n\t\t\t\t\t\t\treturn target.hp<=player.hp;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.du) return -att;\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t}).set('du',event.card.name=='du');\n\t\t\t\t\t\ttarget.addTempSkill('dahe2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.type=false;\n\t\t\t\t\t\tif(player.countCards('h')){\n\t\t\t\t\t\t\tplayer.showHandcards();\n\t\t\t\t\t\t\tplayer.chooseToDiscard('h',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.type){\n\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\t\tresult.targets[0].gain(event.card,'gain2');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tif(hs.length<3) return 0;\n\t\t\t\t\t\t\tvar bool=false;\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(hs[i].number>=9&&get.value(hs[i])<7){\n\t\t\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!bool) return 0;\n\t\t\t\t\t\t\tif(player.canUse('sha',target)&&(player.countCards('h','sha'))){\n\t\t\t\t\t\t\t\treturn -2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},order: \"9\",},}","info":"出牌阶段限一次，你可以与一名其他角色拼点。若你赢，该角色不能使用或打出不为♥花色的【闪】直到回合结束，且你可将该角色拼点的牌交给场上一名体力不多于你的角色。若你没赢，你须展示手牌并弃置其中的一张。"},"new_rewusheng":{"name":"武圣","script":"{mod: {targetInRange: function (card){\n\t\t\t\t\t\tif(get.suit(card)=='diamond'&&card.name=='sha') return true;\n\t\t\t\t\t},},audio: \"wusheng\",audioname: [\"re_guanyu\",\"guanzhang\",\"jsp_guanyu\",\"guansuo\"],enable: [\"chooseToRespond\",\"chooseToUse\"],filterCard: function (card,player){\n\t\t\t\t\tif(get.zhu(player,'shouyue')) return true;\n\t\t\t\t\treturn get.color(card)=='red';\n\t\t\t\t},position: \"he\",viewAs: {name: \"sha\",},viewAsFilter: function (player){\n\t\t\t\t\tif(get.zhu(player,'shouyue')){\n\t\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t\t}\n\t\t\t\t},prompt: \"将一张红色牌当杀使用或打出\",check: function (card){return 4-get.value(card)},ai: {respondSha: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(get.zhu(player,'shouyue')){\n\t\t\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(!player.countCards('he',{color:'red'})) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},order: function (item,player){\n\t\t\t\t\t\tif(player.hasSkillTag('presha',true,null,true)) return 10;\n\t\t\t\t\t\tif(lib.linked.contains(get.nature(item))){\n\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);\n\t\t\t\t\t\t\t})&&game.countPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;\n\t\t\t\t\t\t\t})>1) return 3.1;\n\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 3.05;\n\t\t\t\t\t},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},}","info":"你可以将一张红色牌当做【杀】使用或打出。你使用的方片杀没有距离限制。"},"danji":{"name":"单骑","script":"{skillAnimation: \"true\",animationColor: \"water\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",unique: \"true\",juexingji: \"true\",filter: function (event,player){\n\t\t\t\t\tvar zhu=get.zhu(player);\n\t\t\t\t\tif(zhu&&zhu.isZhu){\n\t\t\t\t\t\tvar name=zhu.name\n\t\t\t\t\t\twhile(name.indexOf('_')!=-1){\n\t\t\t\t\t\t\tname=name.slice(name.indexOf('_')+1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(name.indexOf('liubei')==0) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn !player.storage.danji&&player.countCards('h')>player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.danji=true;\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('mashu');\n\t\t\t\t\tplayer.addSkill('nuzhan');\n\t\t\t\t\tplayer.awakenSkill('danji');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若你的手牌数大于你的体力值且本局游戏的主公不为刘备，你减1点体力上限，然后获得〖马术〗和〖怒斩〗"},"jiqiao":{"name":"机巧","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'})>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt2('jiqiao'),[1,player.countCards('he',{type:'equip'})],'he',function(card){\n\t\t\t\t\t\treturn get.type(card)=='equip';\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\tif(card.name=='bagua') return 10;\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t}).logSkill='jiqiao';\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.cards=get.cards(2*result.cards.length);\n\t\t\t\t\t\tplayer.showCards(event.cards);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar gained=[];\n\t\t\t\t\tvar tothrow=[];\n\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\tif(get.type(event.cards[i])!='equip'){\n\t\t\t\t\t\t\tgained.push(event.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttothrow.push(event.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.gain(gained,'gain2');\n\t\t\t\t\tgame.cardsDiscard(tothrow);\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"出牌阶段开始时，你可以弃置任意张装备牌，然后亮出牌堆顶两倍数量的牌并获得其中的非装备牌。"},"linglong":{"name":"玲珑","script":"{audio: \"2\",group: \"linglong_bagua\",mod: {cardUsable: function (card,player,num){\n\t\t\t\t\t\tif(card.name=='sha'&&!player.getEquip(1)) return num+1;\n\t\t\t\t\t},maxHandcard: function (player,num){\n\t\t\t\t\t\tif(player.getEquip(3)||player.getEquip(4)||player.getEquip(6)) return;\n\t\t\t\t\t\treturn num+1;\n\t\t\t\t\t},targetInRange: function (card,player,target,now){\n\t\t\t\t\t\tif(player.getEquip(5)) return;\n\t\t\t\t\t\tvar type=get.type(card);\n\t\t\t\t\t\tif(type=='trick'||type=='delay') return true;\n\t\t\t\t\t},canBeDiscarded: function (card,source,player){\n\t\t\t\t\t\tif(player.getEquip(5)) return;\n\t\t\t\t\t\tif(get.position(card)=='e'&&['equip2','equip5'].contains(get.subtype(card))) return false;\n\t\t\t\t\t},},}","info":"锁定技，若你的装备区没有武器牌，则你使用【杀】的次数上限+1；若你的装备区没有防具牌，视为你装备着【八卦阵】；若你的装备区没有坐骑牌，你的手牌上限+1；若你的装备区没有宝物牌，则你视为拥有技能〖奇才〗。"},"new_meibu":{"name":"魅步","script":"{audio: \"meibu\",trigger: {global: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.player.isAlive()&&player.countCards('he')>0&&event.player.inRange(player);\n\t\t\t\t},direct: \"true\",derivation: [\"new_zhixi\"],checkx: function (event,player){\n\t\t\t\t\tif(get.attitude(player,event.player)>=0) return false;\n\t\t\t\t\tvar e2=player.getEquip(2);\n\t\t\t\t\tif(e2){\n\t\t\t\t\t\tif(e2.name=='tengjia') return true;\n\t\t\t\t\t\tif(e2.name=='bagua') return true;\n\t\t\t\t\t}\n\t\t\t\t\treturn event.player.countCards('h')>event.player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar check=lib.skill.new_meibu.checkx(trigger,player);\n\t\t\t\t\tplayer.chooseToDiscard(get.prompt2('new_meibu',trigger.player),'he').set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.check) return 6-get.value(card);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('check',check).set('logSkill','new_meibu');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=trigger.player;\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.addTempSkill('new_zhixi','phaseUseEnd');\n\t\t\t\t\t\tif(card.name!='sha'&&get.type(card)!='trick'&&get.color(card)!='black'){\n\t\t\t\t\t\t\ttarget.addTempSkill('new_meibu_range','phaseUseEnd');\n\t\t\t\t\t\t\ttarget.storage.meibu=player;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget.markSkillCharacter('new_meibu',player,'魅步','锁定技，出牌阶段，你至多可使用X张牌，你使用了锦囊牌后不能再使用牌（X为你的体力值）。');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},subSkill: {range: {mod: {globalFrom: function (from,to,num){\n\t\t\t\t\t\t\t\tif(to==from.storage.meibu){\n\t\t\t\t\t\t\t\t\treturn -Infinity;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"其他角色的出牌阶段开始时，若你在其攻击范围内，你可以弃置一张牌，令该角色于本回合内获得技能〖止息〗。若你以此法弃置的牌不是【杀】或黑色锦囊牌，则本回合其与你的距离视为1。"},"new_mumu":{"name":"穆穆","script":"{audio: \"mumu\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('new_mumu'),'弃置一名角色装备区内的一张牌，或者获得一名角色装备区内的防具牌',function(card,player,target){\n\t\t\t\t\t\tif(target==player) return target.getEquip(2)!=undefined;\n\t\t\t\t\t\treturn target.countCards('e')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target)\n\t\t\t\t\t\tif(target.getEquip(2)&&player.isEmpty(2)){\n\t\t\t\t\t\t\treturn -2*att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -att;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('new_mumu',event.target);\n\t\t\t\t\t\tplayer.line(event.target,'green');\n\t\t\t\t\t\tvar e=event.target.getEquip(2);\n\t\t\t\t\t\tevent.e=e;\n\t\t\t\t\t\tif(target==player) event.choice='获得一张防具牌';\n\t\t\t\t\t\telse if(e){\n\t\t\t\t\t\t\tplayer.chooseControl('弃置一张装备牌','获得一张防具牌').set('ai',function(){\n\t\t\t\t\t\t\t\tif(_status.event.player.getEquip(2)){\n\t\t\t\t\t\t\t\t\treturn '弃置一张装备牌';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn '获得一张防具牌';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.choice='弃置一张装备牌';\n\t\t\t\t\t\t}\n\t\t\t\t\t}else event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar choice=event.choice||result.control;\n\t\t\t\t\tif(choice=='弃置一张装备牌'){\n\t\t\t\t\t\tplayer.discardPlayerCard(event.target,'e',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.e){\n\t\t\t\t\t\t\tplayer.gain(event.e,event.target,'give');\n\t\t\t\t\t\t\tplayer.addTempSkill('new_mumu2')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以选择一项：1.弃置一名其他角色装备区里的一张牌；2.获得一名角色装备区里的一张防具牌，若如此做，你本回合不能使用【杀】。"},"fentian":{"name":"焚天","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')>=player.hp) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn player!=current&&player.inRange(current)&&current.countCards('he');\n\t\t\t\t\t});\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},init: function (player,skill){\n\t\t\t\t\tif(!player.storage[skill]) player.storage.fentian=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('焚天：选择一名攻击范围内的角色，将其一张牌置于你的武将牌上',true,function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&player.inRange(target)&&target.countCards('he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('fentian',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.choosePlayerCard(result.targets[0],'he',true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target.$give(result.links,player,false);\n\t\t\t\t\t\tevent.target.lose(result.links,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.storage.fentian=player.storage.fentian.concat(result.links);\n\t\t\t\t\t\tplayer.syncStorage('fentian');\n\t\t\t\t\t\tplayer.markSkill('fentian');\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delayx();\n\t\t\t\t},mod: {attackFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-from.storage.fentian.length;\n\t\t\t\t\t},},}","info":"锁定技，结束阶段开始时，若你的手牌数少于体力值，你须选择一名攻击范围内的角色，将其一张牌置于你的武将牌上，称为「焚」。锁定技，你的攻击范围+X（X为「焚」的数量）"},"zhiri":{"name":"炙日","script":"{trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",unique: \"true\",juexingji: \"true\",audio: \"2\",skillAnimation: \"true\",animationColor: \"fire\",derivation: \"xintan\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.fentian&&player.storage.fentian.length>=3&&!player.storage.zhiri;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.loseMaxHp();\n\t\t\t\t\tplayer.addSkill('xintan');\n\t\t\t\t\tplayer.storage.zhiri=true;\n\t\t\t\t\tplayer.awakenSkill('zhiri');\n\t\t\t\t},}","info":"觉醒技，准备阶段开始时，若你的「焚」的数量不小于3，你减1点体力上限，然后获得技能〖心惔〗"},"yinbing":{"name":"引兵","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",init: function (player){\n\t\t\t\t\tif(!player.storage.yinbing) player.storage.yinbing=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'basic'})<player.countCards('he');\n\t\t\t\t},marktext: \"兵\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCard([1,player.countCards('he')-player.countCards('he',{type:'basic'})],'he',get.prompt('yinbing'),function(card){\n\t\t\t\t\t\treturn get.type(card)!='basic';\n\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.$give(result.cards,player,false);\n\t\t\t\t\t\tplayer.logSkill('yinbing');\n\t\t\t\t\t\tgame.log(player,'将',result.cards,'置于武将牌上');\n\t\t\t\t\t\tplayer.storage.yinbing=player.storage.yinbing.concat(result.cards);\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.markSkill('yinbing');\n\t\t\t\t\t\tplayer.syncStorage('yinbing');\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},ai: {effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(card.name=='sha'||card.name=='juedou'){\n\t\t\t\t\t\t\t\tif(current<0) return 1.2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},threaten: function (player,target){\n\t\t\t\t\t\tif(target.storage.yinbing&&target.storage.yinbing.length) return 2;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},},subSkill: {discard: {trigger: {player: \"damageEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card&&player.storage.yinbing.length>0&&\n\t\t\t\t\t\t\t(event.card.name=='sha'||event.card.name=='juedou');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tplayer.chooseCardButton('移去一张引兵牌',true,player.storage.yinbing);\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\t\tplayer.storage.yinbing.remove(card);\n\t\t\t\t\t\t\tgame.cardsDiscard(card);\n\t\t\t\t\t\t\tplayer.$throw(card);\n\t\t\t\t\t\t\tgame.log(player,'将',card,'置入弃牌堆');\n\t\t\t\t\t\t\tplayer.syncStorage('yinbing');\n\t\t\t\t\t\t\tif(player.storage.yinbing.length==0){\n\t\t\t\t\t\t\t\tplayer.unmarkSkill('yinbing');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},group: \"yinbing_discard\",}","info":"结束阶段开始时，你可以将至少一张非基本牌置于武将牌上。每当你受到【杀】或【决斗】的伤害后，你移去一张「引兵」牌。"},"juedi":{"name":"绝地","script":"{trigger: {player: \"phaseZhunbeiBegin\",},filter: function (event,player){\n\t\t\t\t\treturn player.storage.yinbing&&player.storage.yinbing.length>0;\n\t\t\t\t},forced: \"true\",audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('juedi'),true,function(card,player,target){\n\t\t\t\t\t\treturn player.hp>=target.hp;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<2) return att-10;\n\t\t\t\t\t\tvar num=att/10;\n\t\t\t\t\t\tif(target==player){\n\t\t\t\t\t\t\tnum+=player.maxHp-player.countCards('h')+0.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tnum+=_status.event.n2*2;\n\t\t\t\t\t\t\tif(target.isDamaged()){\n\t\t\t\t\t\t\t\tif(target.hp==1){\n\t\t\t\t\t\t\t\t\tnum+=3;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(target.hp==2){\n\t\t\t\t\t\t\t\t\tnum+=2;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tnum+=0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(target.hasJudge('lebu')){\n\t\t\t\t\t\t\tnum/=2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t}).set('n2',player.storage.yinbing.length);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.line(result.targets[0],'green');\n\t\t\t\t\t\tif(result.targets[0]==player){\n\t\t\t\t\t\t\tplayer.$throw(player.storage.yinbing,1000);\n\t\t\t\t\t\t\tvar num=player.maxHp-player.countCards('h');\n\t\t\t\t\t\t\tif(num>0) player.draw(num);\n\t\t\t\t\t\t\tgame.cardsDiscard(player.storage.yinbing);\n\t\t\t\t\t\t\tplayer.storage.yinbing=[];\n\t\t\t\t\t\t\tplayer.syncStorage('yinbing');\n\t\t\t\t\t\t\tplayer.unmarkSkill('yinbing');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\t\ttarget.gain(player.storage.yinbing.slice(0),'gain2','log','fromStorage');\n\t\t\t\t\t\t\ttarget.draw(player.storage.yinbing.length);\n\t\t\t\t\t\t\tplayer.storage.yinbing.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.syncStorage('yinbing');\n\t\t\t\t\t\tplayer.unmarkSkill('yinbing');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，准备阶段，若你的武将牌上有「引兵」牌，你选择一项：1.移去「引兵」牌，将手牌补至体力上限数；2.将「引兵」牌交给一名体力值不大于你的其他角色，其回复1点体力并摸等量的牌。"},"zhenwei":{"name":"镇卫","script":"{audio: \"2\",trigger: {global: \"useCardToTarget\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(player==event.target||player==event.player) return false;\n\t\t\t\t\tif(!player.countCards('he')) return false;\n\t\t\t\t\tif(event.targets.length>1) return false;\n\t\t\t\t\tif(!event.target) return false;\n\t\t\t\t\tif(event.target.hp>=player.hp) return false;\n\n\t\t\t\t\tvar card=event.card;\n\t\t\t\t\tif(card.name=='sha') return true;\n\t\t\t\t\tif(get.color(card)=='black'&&get.type(card,'trick')=='trick') return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar save=false;\n\t\t\t\t\tif(get.attitude(player,trigger.target)>2){\n\t\t\t\t\t\tif(trigger.card.name=='sha'){\n\t\t\t\t\t\t\tif(player.countCards('h','shan')||player.getEquip(2)||\n\t\t\t\t\t\t\ttrigger.target.hp==1||player.hp>trigger.target.hp+1){\n\t\t\t\t\t\t\t\tif(!trigger.target.countCards('h','shan')||trigger.target.countCards('h')<player.countCards('h')){\n\t\t\t\t\t\t\t\t\tsave=true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(trigger.card.name=='juedou'&&trigger.target.hp==1){\n\t\t\t\t\t\t\tsave=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(trigger.card.name=='shunshou'&&\n\t\t\t\t\t\t\tget.attitude(player,trigger.player)<0&&\n\t\t\t\t\t\t\tget.attitude(trigger.player,trigger.target)<0){\n\t\t\t\t\t\t\tsave=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseToDiscard('he',get.prompt2('zhenwei'));\n\t\t\t\t\tnext.logSkill=['zhenwei',trigger.target];\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.aisave){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('aisave',save);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseControl('转移','失效',function(){\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(trigger.card.name=='sha'){\n\t\t\t\t\t\t\t\tif(player.countCards('h','shan')) return '转移';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(trigger.card.name=='juedou'){\n\t\t\t\t\t\t\t\tif(player.countCards('h','sha')) return '转移';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn '失效';\n\t\t\t\t\t\t}).set('prompt','将'+get.translation(trigger.card)+'转移给你，或令其失效');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.control=='转移'){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\ttrigger.getParent().targets.remove(trigger.target);\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.remove(trigger.target);\n\t\t\t\t\t\ttrigger.getParent().targets.push(player);\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t\ttrigger.player.line(player);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(get.itemtype(trigger.cards)=='cards'){\n\t\t\t\t\t\t\ttrigger.player.$gain2(trigger.cards);\n\t\t\t\t\t\t\tif(!trigger.player.storage.zhenwei2){\n\t\t\t\t\t\t\t\ttrigger.player.storage.zhenwei2=trigger.cards.slice(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttrigger.player.storage.zhenwei2.addArray(trigger.cards);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgame.cardsGotoSpecial(trigger.cards);\n\t\t\t\t\t\t\t//ui.special.appendChild(trigger.card);\n\t\t\t\t\t\t\ttrigger.player.addSkill('zhenwei2');\n\t\t\t\t\t\t\ttrigger.player.markSkill('zhenwei2');\n\t\t\t\t\t\t\t//event.trigger(\"addCardToStorage\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrigger.targets.length=0;\n\t\t\t\t\t\ttrigger.getParent().triggeredTargets2.length=0;\n\t\t\t\t\t}\n\t\t\t\t\tgame.delay();\n\t\t\t\t},ai: {threaten: \"1.1\",},}","info":"当一名其他角色成为【杀】或黑色锦囊牌的目标时（使用者不是你），若该角色的体力值小于你且此牌的目标角色数为1，你可以弃置一张牌。若如此做，你选择一项：1、摸一张牌，然后将此【杀】或黑色锦囊牌转移给你；2、令此【杀】或黑色锦囊牌无效，然后将此【杀】或黑色锦囊牌置于使用者的武将牌旁，若如此做，当前回合结束后，使用者获得使用者武将牌旁的这些牌。"},"new_xingwu":{"name":"星舞","script":"{audio: \"xingwu\",trigger: {player: \"phaseDiscardBegin\",},direct: \"true\",intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},init: function (player){\n\t\t\t\t\tif(!player.storage.new_xingwu) player.storage.new_xingwu=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard(get.prompt2('new_xingwu')).set('ai',function(card){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tfor(var i=0;i<player.storage.new_xingwu.length;i++){\n\t\t\t\t\t\t\tif(get.suit(player.storage.new_xingwu[i])==get.suit(card)) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(player.storage.new_xingwu.length==2){\n\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn (current!=player&&\n\t\t\t\t\t\t\t\t\tget.damageEffect(current,player,player)>0&&\n\t\t\t\t\t\t\t\t\tget.attitude(player,current)<0)\n\t\t\t\t\t\t\t})) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('new_xingwu');\n\t\t\t\t\t\tif(player.storage.new_xingwu.length<2){\n\t\t\t\t\t\t\tplayer.$give(result.cards,player,false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.storage.new_xingwu=player.storage.new_xingwu.concat(result.cards);\n\t\t\t\t\t\tplayer.markSkill('new_xingwu');\n\t\t\t\t\t\tplayer.syncStorage('new_xingwu');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar suitlist=[];\n\t\t\t\t\tfor(var i=0;i<player.storage.new_xingwu.length;i++){\n\t\t\t\t\t\tif(!suitlist.contains(get.suit(player.storage.new_xingwu[i]))){\n\t\t\t\t\t\t\tsuitlist.push(get.suit(player.storage.new_xingwu[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(suitlist.length==3){\n\t\t\t\t\t\tplayer.chooseButton(['请选择要弃置的「星舞」牌',player.storage.new_xingwu],true,3).set('filterButton',function(button){\n\t\t\t\t\t\tif(ui.selected.buttons.length){\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\t\tif(get.suit(ui.selected.buttons[i])==get.suit(button.link)) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(button){\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.links){\n\t\t\t\t\t\tplayer.$throw(result.links);\n\t\t\t\t\t\tfor(var i=0;i<result.links.length;i++) player.storage.new_xingwu.remove(result.links[i]);\n\t\t\t\t\t\tgame.cardsDiscard(result.links);\n\t\t\t\t\t\tplayer.syncStorage('new_xingwu');\n\t\t\t\t\t\tplayer.updateMarks('new_xingwu');\n\t\t\t\t\t\tif(!player.storage.new_xingwu.length) player.unmarkSkill('new_xingwu');\n\t\t\t\t\t\tplayer.chooseTarget(function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t},'对一名男/女性角色造成两/一点伤害并弃置其装备区内的牌').set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(get.attitude(player,target)>0) return -1;\n\t\t\t\t\t\t\treturn get.damageEffect(target,player,player)*target.sex=='male'?2:1+target.countCards('e')/2;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tvar num=target.sex==\"male\"?2:1;\n\t\t\t\t\t\ttarget.damage(num);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.target&&event.target.isAlive()){\n\t\t\t\t\t\tvar es=event.target.getCards('e');\n\t\t\t\t\t\tif(es.length){\n\t\t\t\t\t\t\tevent.target.discard(es);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.5\",},}","info":"弃牌阶段开始时，你可以将一张手牌置于武将牌上，称之为「舞」。然后若你的「舞」中包含三种花色，则你须移去三张花色不同的「舞」并选择一名角色，该角色受到2点伤害（若为女性，则改为1点）并弃置其装备区的所有牌。"},"new_luoyan":{"name":"落雁","script":"{group: [\"new_luoyan_tianxiang\",\"new_luoyan_liuli\"],}","info":"锁定技。若你的武将牌上有「舞」，则你视为拥有技能〖天香〗和〖流离〗。"},"yanxiao":{"name":"言笑","script":"{audio: \"2\",enable: \"phaseUse\",filterCard: {suit: \"diamond\",},filterTarget: \"true\",check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},position: \"he\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{suit:'diamond'})>0;\n\t\t\t\t},discard: \"false\",visible: \"true\",toStorage: \"true\",prepare: \"give\",content: function (){\n\t\t\t\t\t//player.lose(cards,ui.special,'toStorage','visible');\n\t\t\t\t\tif(target.hasSkill('yanxiao2')&&target.storage.yanxiao2){\n\t\t\t\t\t\ttarget.storage.yanxiao2.push(cards[0]);\n\t\t\t\t\t\ttarget.syncStorage('yanxiao2');\n\t\t\t\t\t\ttarget.markSkill('yanxiao2');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.storage.yanxiao2=cards.slice(0);\n\t\t\t\t\t\ttarget.syncStorage('yanxiao2');\n\t\t\t\t\t\ttarget.addSkill('yanxiao2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.storage.yanxiao2&&target.storage.yanxiao2.length) return 0;\n\t\t\t\t\t\t\tif(target.countCards('j')) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以将一张♦牌置于一名角色的武将牌上。武将牌上有〖言笑〗牌的角色下个判定阶段开始时，获得〖言笑〗牌及其判定区里的所有牌。"},"anxian":{"name":"安娴","script":"{audio: \"2\",group: [\"anxian_source\",\"anxian_target\"],subSkill: {source: {audio: \"anxian\",trigger: {source: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card&&event.card.name=='sha';\n\t\t\t\t\t\t},check: function (event,player){\n\t\t\t\t\t\t\tif(get.damageEffect(event.player,player,player)<=0) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tif(trigger.player.countCards('h')){\n\t\t\t\t\t\t\t\ttrigger.player.chooseToDiscard(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\t},sub: \"true\",},target: {audio: \"anxian\",trigger: {target: \"useCardToTargeted\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn event.card.name=='sha'&&player.countCards('h');\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\t\"step 0\"\n\t\t\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt2('anxian'));\n\t\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\t\tif(get.attitude(player,trigger.player)>0){\n\t\t\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(player.countCards('h',{name:'shan'})) return -1;\n\t\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext.logSkill='anxian';\n\t\t\t\t\t\t\t\"step 1\"\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\ttrigger.player.draw();\n\t\t\t\t\t\t\t\ttrigger.getParent().excluded.push(player);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"当你使用【杀】对目标角色造成伤害时，你可以防止此伤害，令其弃置一张手牌，然后你摸一张牌；当你成为【杀】的目标后，你可以弃置一张手牌，令此【杀】对你无效，然后此【杀】的使用者摸一张牌。"},"yinling":{"name":"银铃","script":"{enable: \"phaseUse\",filterCard: {color: \"black\",},position: \"he\",intro: {content: \"cards\",onunmark: \"throw\",},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{color:'black'})>0&&player.storage.yinling.length<4;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('he')>0&&target!=player;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.yinling=[];\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.choosePlayerCard('hej',target,true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool&&result.links&&result.links.length){\n\t\t\t\t\t\ttarget.$give(result.links,player,false);\n\t\t\t\t\t\ttarget.lose(result.links,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.storage.yinling.push(result.links[0]);\n\t\t\t\t\t\tplayer.markSkill('yinling');\n\t\t\t\t\t\tplayer.syncStorage('yinling');\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"10.1\",expose: \"0.1\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkill('tuntian')) return 0;\n\t\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\t\tvar noe=(es.length==0||target.hasSkillTag('noe'));\n\t\t\t\t\t\t\tvar noe2=(es.length==1&&es[0].name=='baiyin'&&target.hp<target.maxHp);\n\t\t\t\t\t\t\tvar noh=(nh==0||target.hasSkillTag('noh'));\n\t\t\t\t\t\t\tif(noh&&noe) return 0;\n\t\t\t\t\t\t\tif(noh&&noe2) return 0.01;\n\t\t\t\t\t\t\tif(get.attitude(player,target)<=0) return (target.countCards('he'))?-1.5:1.5;\n\t\t\t\t\t\t\tvar js=target.getCards('j');\n\t\t\t\t\t\t\tif(js.length){\n\t\t\t\t\t\t\t\tvar jj=js[0].viewAs?{name:js[0].viewAs}:js[0];\n\t\t\t\t\t\t\t\tif(jj.name=='guohe') return 3;\n\t\t\t\t\t\t\t\tif(js.length==1&&get.effect(target,jj,target,player)>=0){\n\t\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，若你的“锦”小于四张，你可以弃置一张黑色牌并指定一名其他角色。若如此做，你将其的一张牌置于你的武将牌上，称为“锦”。"},"junwei":{"name":"军威","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.storage.yinling&&player.storage.yinling.length>=3;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.storage.yinling.length>3){\n\t\t\t\t\t\tplayer.chooseButton(3,[get.prompt('junwei'),'hidden',player.storage.yinling]).set('ai',function(button){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseBool().set('createDialog',[get.prompt('junwei'),'hidden',player.storage.yinling]).set('dialogselectx',true).set('choice',true);\n\t\t\t\t\t\tevent.cards=player.storage.yinling.slice(0);\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('junwei');\n\t\t\t\t\t\tvar cards=event.cards||result.links;\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tplayer.storage.yinling.remove(cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.cardsDiscard(cards);\n\t\t\t\t\t\tplayer.$throw(cards);\n\t\t\t\t\t\tplayer.syncStorage('yinling');\n\t\t\t\t\t\tif(player.storage.yinling.length==0){\n\t\t\t\t\t\t\tplayer.unmarkSkill('yinling');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.markSkill('yinling');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tplayer.chooseTarget(true,function(card,player,target){\n\t\t\t\t\t\t\treturn player!=target;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\treturn -get.attitude(_status.event.player,target)/Math.sqrt(1+target.hp);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(result.targets);\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tvar nshan=target.countCards('h',function(card){\n\t\t\t\t\t\t\tif(_status.connectMode) return true;\n\t\t\t\t\t\t\treturn card.name=='shan';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(nshan==0){\n\t\t\t\t\t\t\tevent.directfalse=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttarget.chooseCard('交给'+get.translation(player)+'一张【闪】，或失去一点体力',function(card){\n\t\t\t\t\t\t\t\treturn card.name=='shan';\n\t\t\t\t\t\t\t}).set('ai',function(card){\n\t\t\t\t\t\t\t\tif(_status.event.nshan>1) return 1;\n\t\t\t\t\t\t\t\tif(_status.event.player.hp>=3) return 0;\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}).set('nshan',nshan);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(!event.directfalse&&result.bool) game.delay();\n\t\t\t\t\tui.clear();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(!event.directfalse&&result.bool){\n\t\t\t\t\t\tevent.cards=result.cards;\n\t\t\t\t\t\tevent.target.$throw(result.cards);\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(event.cards)+'交给一名角色',true,function(card,player,target){\n\t\t\t\t\t\t\treturn target!=_status.event.getParent().target;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target)/(target.countCards('h','shan')+1);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.target.loseHp();\n\t\t\t\t\t\tdelete event.cards;\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(event.cards){\n\t\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\t\tresult.targets[0].gain(event.cards,'gain2');\n\t\t\t\t\t\tgame.log(player,'将',event.cards,'交给',result.targets[0]);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(event.target.countCards('e')){\n\t\t\t\t\t\t\tplayer.choosePlayerCard('e','将'+get.translation(event.target)+'的一张装备牌移出游戏',true,event.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 6'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.links[0];\n\t\t\t\t\t\tif(event.target.storage.junwei2){\n\t\t\t\t\t\t\tevent.target.storage.junwei2.push(card);\n\t\t\t\t\t\t\tevent.target.markSkill('junwei2');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.target.storage.junwei2=[card];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.target.lose(card,ui.special,'toStorage');\n\t\t\t\t\t\tevent.target.addSkill('junwei2');\n\t\t\t\t\t\tevent.target.syncStorage('junwei2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段开始时，你可以移去三张“锦”。若如此做，你须指定一名角色并令其选择一项：1.展示一张【闪】，然后你将此【闪】交给一名其他角色。2.该角色失去1点体力，然后你将其装备区内的一张牌移出游戏。该角色的回合结束后，将以此法移出游戏的装备牌移回原处。"},"fenyong":{"name":"愤勇","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},content: function (){\n\t\t\t\t\tplayer.addTempSkill('fenyong2');\n\t\t\t\t},}","info":"每当你受到一次伤害后，你可以获得一枚「愤勇」标记；当你拥有「愤勇」标记时，防止你受到的所有伤害。"},"xuehen":{"name":"雪恨","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.hasSkill('fenyong2')&&event.player.isAlive();\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.removeSkill('fenyong2');\n\t\t\t\t\tplayer.chooseControl('弃牌','出杀',function(){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\tif(get.attitude(player,trigger.player)<0){\n\t\t\t\t\t\t\tvar he=trigger.player.countCards('he');\n\t\t\t\t\t\t\tif(he<2) return '出杀';\n\t\t\t\t\t\t\tif(player.maxHp-player.hp>=2&&he<=3){\n\t\t\t\t\t\t\t\treturn '弃牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.maxHp-player.hp>=3&&he<=5){\n\t\t\t\t\t\t\t\treturn '弃牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.maxHp-player.hp>3){\n\t\t\t\t\t\t\t\treturn '弃牌';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn '出杀';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn '出杀';\n\t\t\t\t\t}).set('prompt','弃置'+get.translation(trigger.player)+get.cnNumber(player.maxHp-player.hp)+'张牌，或对任意一名角色使用一张杀');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='弃牌'){\n\t\t\t\t\t\tplayer.line(trigger.player,'green');\n\t\t\t\t\t\tif(player.hp<player.maxHp&&trigger.player.countCards('he')){\n\t\t\t\t\t\t\tplayer.discardPlayerCard(trigger.player,true,'he',player.maxHp-player.hp);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseUseTarget({name:'sha'},true,false,'nodistance');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"每个角色的结束阶段开始时，若你有愤勇标记，你弃置之，然后选择一项：1.弃置当前回合角色X张牌（X为你已损失的体力值）；2.视为对一名任意角色使用一张【杀】。"},"tanhu":{"name":"探虎","script":"{audio: \"1\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.addTempSkill('tanhu2');\n\t\t\t\t\t}\n\t\t\t\t},ai: {result: {target: function (player,target){\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tif(hs.length<3) return 0;\n\t\t\t\t\t\t\tvar bool=false;\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(hs[i].number>=9&&get.value(hs[i])<7){\n\t\t\t\t\t\t\t\t\tbool=true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!bool) return 0;\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},order: \"9\",},group: \"tanhu3\",}","info":"出牌阶段限一次，你可以与一名其他角色拼点。若你赢，你获得以下效果直到回合结束：你与该角色的距离为1，你对该角色使用的普通锦囊牌不能被【无懈可击】响应。"},"mouduan":{"name":"谋断","script":"{audio: \"1\",init2: function (player){\n\t\t\t\t\tgame.broadcastAll(function(player){\n\t\t\t\t\t\tplayer._mouduan_mark=player.mark('武',{\n\t\t\t\t\t\t\tcontent:'拥有技能【激昂】、【谦逊】'\n\t\t\t\t\t\t});\n\t\t\t\t\t},player);\n\t\t\t\t\tplayer.addAdditionalSkill('mouduan',['jiang','qianxun']);\n\t\t\t\t},onremove: function (player){\n\t\t\t\t\tgame.broadcastAll(function(player){\n\t\t\t\t\t\tif(player._mouduan_mark){\n\t\t\t\t\t\t\tplayer._mouduan_mark.delete();\n\t\t\t\t\t\t\tdelete player._mouduan_mark;\n\t\t\t\t\t\t}\n\t\t\t\t\t},player);\n\t\t\t\t\tplayer.removeAdditionalSkill('mouduan');\n\t\t\t\t},trigger: {player: \"loseEnd\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player._mouduan_mark&&player._mouduan_mark.name=='武'&&player.countCards('h')<=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tgame.broadcastAll(function(player){\n\t\t\t\t\t\tif(!player._mouduan_mark) return;\n\t\t\t\t\t\tplayer._mouduan_mark.name='文';\n\t\t\t\t\t\tplayer._mouduan_mark.skill='文';\n\t\t\t\t\t\tplayer._mouduan_mark.firstChild.innerHTML='文';\n\t\t\t\t\t\tplayer._mouduan_mark.info.content='拥有技能【英姿】、【克己】';\n\t\t\t\t\t},player);\n\t\t\t\t\tplayer.addAdditionalSkill('mouduan',['yingzi','keji']);\n\t\t\t\t},group: \"mouduan2\",}","info":"游戏开始时，你获得标记“武”并获得技能〖激昂〗和〖谦逊〗。当你失去手牌后，若手牌数不大于2，你须将你的标记变为“文”，将这两项技能改为〖英姿〗和〖克己〗。一名角色的回合开始前，你可弃一张牌将标记翻回。"},"xinzhengnan":{"name":"征南","script":"{audio: \"zhengnan\",trigger: {global: \"dying\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.xinzhengnan||!player.storage.xinzhengnan.contains(event.player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(!player.storage.xinzhengnan) player.storage.xinzhengnan=[];\n\t\t\t\t\tplayer.storage.xinzhengnan.add(trigger.player);\n\t\t\t\t\tplayer.storage.xinzhengnan.sortBySeat();\n\t\t\t\t\tplayer.markSkill('xinzhengnan');\n\t\t\t\t\tplayer.recover();\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tif(!player.hasSkill('new_rewusheng')){\n\t\t\t\t\t\tlist.push('new_rewusheng');\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.hasSkill('xindangxian')){\n\t\t\t\t\t\tlist.push('xindangxian');\n\t\t\t\t\t}\n\t\t\t\t\tif(!player.hasSkill('rezhiman')){\n\t\t\t\t\t\tlist.push('rezhiman');\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tevent.list=list;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.list.length==1) event._result={control:event.list[0]};\n\t\t\t\t\telse player.chooseControl(event.list).set('prompt','征南：选择获得下列技能中的一个').set('ai',function(){\n\t\t\t\t\t\tif(event.list.contains('xindangxian')) return 'xindangxian';\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control=='xindangxian') player.storage.xinfuli=true;\n\t\t\t\t\tplayer.addSkill(result.control);\n\t\t\t\t\tplayer.popup(result.control);\n\t\t\t\t\tgame.log(player,'获得了技能','#g【'+get.translation(result.control)+'】');\n\t\t\t\t},ai: {threaten: \"1.3\",},intro: {content: \"已因$发动过技能\",},derivation: [\"new_rewusheng\",\"xindangxian\",\"rezhiman\"],}","info":"当一名角色进入濒死状态时，若你未因其发动过〖征南〗，则你回复1点体力并摸一张牌并获得下列技能中的任意一个：〖武圣〗、 〖当先〗和〖制蛮〗（若技能全部拥有则改为摸三张牌。你以此法获得的〖当先〗结算时视为已发动过〖伏枥〗）。"},"xiefang":{"name":"撷芳","script":"{mod: {globalFrom: function (from,to,distance){\n\t\t\t\t\t\treturn distance-game.countPlayer(function(current){\n\t\t\t\t\t\t\treturn current.sex=='female';\n\t\t\t\t\t\t});\n\t\t\t\t\t},},}","info":"锁定技，你计算与其他角色的距离时-X。（X为女性角色数）"},"reluanzhan":{"name":"乱战","script":"{audio: \"luanzhan\",trigger: {player: \"damageEnd\",source: \"damageSource\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.addMark('reluanzhan',1,false);\n\t\t\t\t},intro: {content: \"mark\",},ai: {notemp: \"true\",},group: [\"reluanzhan_add\",\"reluanzhan_remove\"],}","info":"当你受到或造成伤害后，你获得一个“乱”。当你使用【杀】或黑色普通锦囊牌选择目标后，你可为此牌增加至多X个目标。当你使用这些牌指定第一个目标后，若此牌目标数小于X，则你移去X/2（向上取整）个“乱”。（X为“乱”数）"},"zhidao":{"name":"雉盗","script":"{audio: \"2\",trigger: {source: \"damageSource\",},filter: function (event,player){\n\t\t\t\t\tif(event._notrigger.contains(event.player)) return false;\n\t\t\t\t\treturn _status.currentPhase==player&&event.player.isAlive()&&\n\t\t\t\t\tevent.player.countCards('hej')>0&&event.player!=player&&!player.hasSkill('zhidao2');\n\t\t\t\t},forced: \"true\",content: function (){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tif(trigger.player.countCards('h')) num++;\n\t\t\t\t\tif(trigger.player.countCards('e')) num++;\n\t\t\t\t\tif(trigger.player.countCards('j')) num++;\n\t\t\t\t\tif(num){\n\t\t\t\t\t\tplayer.gainPlayerCard(trigger.player,num,'hej',true).set('filterButton',function(button){\n\t\t\t\t\t\t\tfor(var i=0;i<ui.selected.buttons.length;i++){\n\t\t\t\t\t\t\t\tif(get.position(button.link)==get.position(ui.selected.buttons[i].link)) return false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tplayer.addTempSkill('zhidao2');\n\t\t\t\t},}","info":"锁定技，当你于你的回合内第一次对区域里有牌的其他角色造成伤害后，你获得其手牌、装备区和判定区里的各一张牌，然后直到回合结束，其他角色不能被选择为你使用牌的目标。"},"jili":{"name":"寄篱","script":"{audio: \"2\",trigger: {global: \"useCardToTarget\",},forced: \"true\",check: function (event,player){\n\t\t\t\t\treturn get.effect(player,event.card,event.player,player)>0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\tif(get.color(event.card)!='red') return false;\n\t\t\t\t\tif(!event.targets) return false;\n\t\t\t\t\tif(event.player==player) return false;\n\t\t\t\t\tif(event.targets.contains(player)) return false;\n\t\t\t\t\tif(get.info(event.card).multitarget) return false;\n\t\t\t\t\tvar type=get.type(event.card);\n\t\t\t\t\tif(type!='basic'&&type!='trick') return false;\n\t\t\t\t\tif(lib.filter.targetEnabled2(event.card,event.player,player)){\n\t\t\t\t\t\tfor(var i=0;i<event.targets.length;i++){\n\t\t\t\t\t\t\tif(get.distance(event.targets[i],player)<=1) return true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},autodelay: \"true\",content: function (){\n\t\t\t\t\ttrigger.getParent().targets.add(player);\n\t\t\t\t\ttrigger.player.line(player,'green');\n\t\t\t\t},}","info":"锁定技，当一名其他角色成为红色基本牌或红色普通锦囊牌的目标时，若其与你的距离为1且你既不是此牌的使用者也不是目标，你也成为此牌的目标。"},"shefu":{"name":"设伏","script":"{trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",audio: \"2\",init: function (player){\n\t\t\t\t\tif(!player.storage.shefu) player.storage.shefu=[];\n\t\t\t\t\tif(!player.storage.shefu2) player.storage.shefu2=[];\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t\tstorage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.storage.shefu2=[];\n\t\t\t\t\t},mark: function (dialog,content,player){\n\t\t\t\t\t\tif(content&&content.length){\n\t\t\t\t\t\t\tdialog.addAuto(content);\n\t\t\t\t\t\t\tif(player.isUnderControl(true)){\n\t\t\t\t\t\t\t\tvar str='';\n\t\t\t\t\t\t\t\tfor(var i=0;i<player.storage.shefu2.length;i++){\n\t\t\t\t\t\t\t\t\tstr+=get.translation(player.storage.shefu2[i]);\n\t\t\t\t\t\t\t\t\tif(i<player.storage.shefu2.length-1){\n\t\t\t\t\t\t\t\t\t\tstr+='、';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdialog.add('<div class=\"text center\">'+str+'</div>')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar list1=[],list2=[],list3=[];\n\t\t\t\t\tfor(var i=0;i<lib.inpile.length;i++){\n\t\t\t\t\t\tvar type=get.type(lib.inpile[i]);\n\t\t\t\t\t\tif(type=='basic'){\n\t\t\t\t\t\t\tlist1.push(['基本','',lib.inpile[i]]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(type=='trick'){\n\t\t\t\t\t\t\tlist2.push(['锦囊','',lib.inpile[i]]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(type=='delay'){\n\t\t\t\t\t\t\tlist3.push(['锦囊','',lib.inpile[i]]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseButton([get.prompt('shefu'),[list1.concat(list2).concat(list3),'vcard']]).set('filterButton',function(button){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(player.storage.shefu2&&player.storage.shefu2.contains(button.link[2])) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}).set('ai',function(button){\n\t\t\t\t\t\tvar rand=_status.event.rand;\n\t\t\t\t\t\tswitch(button.link[2]){\n\t\t\t\t\t\t\tcase 'sha':return 5+rand[1];\n\t\t\t\t\t\t\tcase 'tao':return 4+rand[2];\n\t\t\t\t\t\t\tcase 'lebu':return 3+rand[3];\n\t\t\t\t\t\t\tcase 'shan':return 4.5+rand[4];\n\t\t\t\t\t\t\tcase 'wuzhong':return 4+rand[5];\n\t\t\t\t\t\t\tcase 'shunshou':return 3+rand[6];\n\t\t\t\t\t\t\tcase 'nanman':return 2+rand[7];\n\t\t\t\t\t\t\tcase 'wanjian':return 2+rand[8];\n\t\t\t\t\t\t\tdefault:return rand[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}).set('rand',[Math.random(),Math.random(),Math.random(),Math.random(),\n\t\t\t\t\tMath.random(),Math.random(),Math.random(),Math.random(),Math.random()]);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.storage.shefu2.push(result.links[0][2]);\n\t\t\t\t\t\tplayer.logSkill('shefu');\n\t\t\t\t\t\tplayer.chooseCard('h','选择一张手牌作为“伏兵”',true);\n\t\t\t\t\t\tif(player.isOnline2()){\n\t\t\t\t\t\t\tplayer.send(function(storage){\n\t\t\t\t\t\t\t\tgame.me.storage.shefu2=storage;\n\t\t\t\t\t\t\t},player.storage.shefu2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar card=result.cards[0];\n\t\t\t\t\t\tplayer.lose(card,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.storage.shefu.push(card);\n\t\t\t\t\t\tplayer.syncStorage('shefu');\n\t\t\t\t\t\tplayer.markSkill('shefu');\n\t\t\t\t\t\tplayer.$give(card,player,false);\n\t\t\t\t\t}\n\t\t\t\t},group: [\"shefu2\"],}","info":"结束阶段开始时，你可以将一张手牌移出游戏，称为「伏兵」。然后为「伏兵」记录一个基本牌或锦囊牌的名称（须与其他「伏兵」记录的名称均不同）。你的回合外，当有其他角色使用与你记录的「伏兵」牌名相同的牌时，你可以取消此牌的所有目标，然后移去该「伏兵」"},"benyu":{"name":"贲育","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},filter: function (event,player){\n\t\t\t\t\tif(!event.source) return false;\n\t\t\t\t\tvar nh1=player.countCards('h');\n\t\t\t\t\tvar nh2=event.source.countCards('h');\n\t\t\t\t\tif(nh1==nh2) return false;\n\t\t\t\t\tif(nh2<nh2&&nh1>=5) return false;\n\t\t\t\t\tif(nh2>nh2&&event.source.isDead()) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar num1=player.countCards('h');\n\t\t\t\t\tvar num2=trigger.source.countCards('h');\n\t\t\t\t\tif(num1>num2){\n\t\t\t\t\t\tvar next=player.chooseToDiscard([num2+1,num1],'贲育：是否弃置至少'+(num2+1)+'张手牌,并对'+get.translation(trigger.source)+'造成一点伤害？');\n\t\t\t\t\t\tnext.logSkill=['benyu',trigger.source];\n\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(ui.selected.cards.length>=_status.event.num){\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.damageEffect(trigger.source,player,player)>0&&_status.event.num<=2){\n\t\t\t\t\t\t\t\treturn 8-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnext.set('num',num2+1);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.draw=true;\n\t\t\t\t\t\tevent.num=Math.min(num2,5)-num1;\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('benyu'));\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(event.draw){\n\t\t\t\t\t\t\tplayer.logSkill('benyu',trigger.source);\n\t\t\t\t\t\t\tplayer.draw(event.num);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttrigger.source.damage(player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你受到伤害后，若你的手牌数不大于伤害来源的手牌数，你可以将手牌摸至与伤害来源手牌数相同（至多摸至5张）；否则你可以弃置大于伤害来源手牌数的手牌，然后对其造成1点伤害。"},"gushe":{"name":"鼓舌","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t},selectTarget: [1,3],filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},multitarget: \"true\",multiline: \"true\",content: function (){\n\t\t\t\t\tplayer.chooseToCompare(targets).callback=lib.skill.gushe.callback;\n\t\t\t\t},intro: {name: \"饶舌\",content: \"mark\",},chat: [\"粗鄙之语\",\"天地不容\",\"谄谀之臣\",\"皓首匹夫，苍髯老贼\",\"二臣贼子\",\"断脊之犬\",\"我从未见过有如此厚颜无耻之人！\"],callback: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(event.num1<=event.num2){\n\t\t\t\t\t\ttarget.chat(lib.skill.gushe.chat[player.countMark('gushe')]);\n\t\t\t\t\t\tgame.delay();\n\t\t\t\t\t\tplayer.addMark('gushe',1);\n\t\t\t\t\t\tif(player.countMark('gushe')>=7){\n\t\t\t\t\t\t\tplayer.die();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(event.num1>=event.num2){\n\t\t\t\t\t\ttarget.chooseToDiscard('he','弃置一张牌，或令'+get.translation(player)+'摸一张牌').set('ai',function(card){\n\t\t\t\t\t\t\tif(_status.event.goon) return 6-get.value(card);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}).set('goon',get.attitude(target,player)<0);\n\t\t\t\t\t}\n\t\t\t\t\telse event.goto(3);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.num1<=event.num2){\n\t\t\t\t\t\tplayer.chooseToDiscard('he','弃置一张牌，或摸一张牌').set('ai',function(){return -1;});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(!result.bool) player.draw();\n\t\t\t\t},ai: {order: \"7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tvar num=ui.selected.targets.length+1;\n\t\t\t\t\t\t\tif(num>3) num=3;\n\t\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\t\t\tif(get.value(hs[i])<=6){\n\t\t\t\t\t\t\t\t\tswitch(hs[i].number){\n\t\t\t\t\t\t\t\t\t\tcase 13:return -1;\n\t\t\t\t\t\t\t\t\t\tcase 12:if(player.countMark('gushe')+num<=8) return -1;break;\n\t\t\t\t\t\t\t\t\t\tcase 11:if(player.countMark('gushe')+num<=7) return -1;break;\n\t\t\t\t\t\t\t\t\t\tdefault:if(hs[i].number>5&&player.countMark('gushe')+num<=6) return -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以用一张手牌与至多三名角色同时拼点，然后依次结算拼点结果，没赢的角色选择一项：1.弃置一张牌；2.令你摸一张牌。若你没赢，你获得一个“饶舌”标记。当你获得第7个“饶舌”标记时，你死亡。"},"jici":{"name":"激词","script":"{audio: \"2\",trigger: {player: \"compare\",},filter: function (event,player){\n\t\t\t\t\treturn event.getParent().name=='gushe'&&!event.iwhile&&event.num1<=player.countMark('gushe');\n\t\t\t\t},content: function (){\n\t\t\t\t\tif(trigger.num1<player.countMark('gushe')){\n\t\t\t\t\t\ttrigger.num1+=player.countMark('gushe');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.getStat().skill.gushe--;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你因发动〖鼓舌〗而扣置的拼点牌亮出后，若点数小于X，你可令点数+X；若点数等于X，你可令你本回合发动〖鼓舌〗的次数上限+1。（X为你“饶舌”标记的数量）"},"juesi":{"name":"决死","script":"{audio: \"2\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he')>0;\n\t\t\t\t},filterCard: {name: \"sha\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.chooseToDiscard('he',true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(target.hp>=player.hp&&result.bool&&result.cards[0].name!='sha'){\n\t\t\t\t\t\tplayer.useCard({name:'juedou',isCard:true},target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.effect(target,{name:'juedou'},player,player)<=0){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target.hp<player.hp){\n\t\t\t\t\t\t\t\tif(player.countCards('h')>player.hp) return -0.1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar hs1=target.getCards('h','sha');\n\t\t\t\t\t\t\tvar hs2=player.getCards('h','sha');\n\t\t\t\t\t\t\tif(hs1.length>hs2.length){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar hsx=target.getCards('h');\n\t\t\t\t\t\t\tif(hsx.length>2&&hs2.length<=1&&hsx[0].number<6){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hsx.length>3&&hs2.length<=1){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(hs1.length>hs2.length-1&&hs1.length>0&&(hs2.length<=1||hs1[0].number>hs2[0].number)){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张【杀】并选择攻击范围内的一名有牌的其他角色，该角色弃置一张牌，然后若弃置的牌不是【杀】且你的体力值不大于该角色，你视为对其使用【决斗】。"},"zhenlue":{"name":"缜略","script":"{audio: \"2\",trigger: {player: \"useCard\",},forced: \"true\",filter: function (event){\n\t\t\t\t\treturn get.type(event.card)=='trick';\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.nowuxie=true;\n\t\t\t\t},mod: {targetEnabled: function (card,player,target){\n\t\t\t\t\t\tif(get.type(card)=='delay'){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},}","info":"锁定技，你使用的普通锦囊牌不能被【无懈可击】响应；你不能成为延时锦囊牌的目标。"},"jianshu":{"name":"间书","script":"{audio: \"2\",unique: \"true\",limited: \"true\",enable: \"phaseUse\",animationColor: \"thunder\",skillAnimation: \"epic\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.jianshu&&player.countCards('h',{color:'black'})>0;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.jianshu=false;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(target==player) return false;\n\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\treturn ui.selected.targets[0]!=target&&!ui.selected.targets[0].hasSkillTag('noCompareSource')&&target.countCards('h')\n\t\t\t\t\t\t&&!target.hasSkillTag('noCompareTarget');\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},filterCard: {color: \"black\",},mark: \"true\",discard: \"false\",lose: \"false\",delay: \"false\",check: function (card){\n\t\t\t\t\tif(_status.event.player.hp==1) return 8-get.value(card);\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},selectTarget: \"2\",multitarget: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('jianshu');\n\t\t\t\t\tplayer.storage.jianshu=true;\n\t\t\t\t\ttargets[0].gain(cards,player,'give');\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttargets[0].chooseToCompare(targets[1]);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttargets[0].chooseToDiscard('he',2,true);\n\t\t\t\t\t\ttargets[1].loseHp();\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.tie){\n\t\t\t\t\t\ttargets[0].loseHp()\n\t\t\t\t\t\ttargets[1].loseHp()\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttargets[1].chooseToDiscard('he',2,true);\n\t\t\t\t\t\ttargets[0].loseHp();\n\t\t\t\t\t}\n\t\t\t\t},intro: {content: \"limited\",},ai: {expose: \"0.4\",order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\tif(ui.selected.targets.length) return -1;\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},},}","info":"限定技，出牌阶段，你可以将一张黑色手牌交给一名其他角色，并选择另一名其他角色，然后令这两名角色拼点。赢的角色弃置两张牌，没赢的角色失去一点体力。"},"yongdi":{"name":"拥嫡","script":"{audio: \"2\",unique: \"true\",limited: \"true\",trigger: {player: \"phaseZhunbeiBegin\",},animationColor: \"thunder\",skillAnimation: \"legend\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.yongdi;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.yongdi=false;\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('yongdi'),function(card,player,target){\n\t\t\t\t\t\treturn (target.sex=='male'||target.name=='key_yuri')&&target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(att<=1) return 0;\n\t\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\t\tif(mode=='identity'||(mode=='versus'&&_status.mode=='four')){\n\t\t\t\t\t\t\tif(target.name&&lib.character[target.name]){\n\t\t\t\t\t\t\t\tfor(var i=0;i<lib.character[target.name][3].length;i++){\n\t\t\t\t\t\t\t\t\tif(lib.skill[lib.character[target.name][3][i]].zhuSkill){\n\t\t\t\t\t\t\t\t\t\treturn att*2;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t}).set('goon',!player.hasUnknown());\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.awakenSkill('yongdi');\n\t\t\t\t\t\tplayer.storage.yongdi=true;\n\t\t\t\t\t\tplayer.logSkill('yongdi',result.targets);\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\ttarget.gainMaxHp(true);\n\t\t\t\t\t\ttarget.recover();\n\t\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\t\tif(mode=='identity'||(mode=='versus'&&_status.mode=='four')){\n\t\t\t\t\t\t\tif(target.name&&lib.character[target.name]){\n\t\t\t\t\t\t\t\tvar skills=lib.character[target.name][3];\n\t\t\t\t\t\t\t\ttarget.storage.zhuSkill_yongdi=[];\n\t\t\t\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\t\t\t\tvar info=lib.skill[skills[i]];\n\t\t\t\t\t\t\t\t\tif(info.zhuSkill){\n\t\t\t\t\t\t\t\t\t\ttarget.storage.zhuSkill_yongdi.push(skills[i]);\n\t\t\t\t\t\t\t\t\t\tif(info.init){\n\t\t\t\t\t\t\t\t\t\t\tinfo.init(target);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(info.init2){\n\t\t\t\t\t\t\t\t\t\t\tinfo.init2(target);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"限定技，准备阶段开始时，你可令一名其他男性角色增加一点体力上限并回复1点体力，然后若该角色的武将牌上有主公技且其不为主公，其获得此主公技。"},"tuifeng":{"name":"推锋","script":"{audio: \"2\",trigger: {player: \"damageEnd\",},direct: \"true\",notemp: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he')>0;\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(!player.storage.tuifeng) player.storage.tuifeng=[];\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseCard(get.prompt2('tuifeng'),'he',[1,trigger.num]).set('ai',function(card){\n\t\t\t\t\t\tif(card.name=='du') return 20;\n\t\t\t\t\t\treturn 7-get.useful(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('tuifeng');\n\t\t\t\t\t\tplayer.lose(result.cards,ui.special,'toStorage');\n\t\t\t\t\t\tplayer.$give(result.cards,player,false);\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tplayer.storage.tuifeng.push(result.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.markSkill('tuifeng');\n\t\t\t\t\t}\n\t\t\t\t},marktext: \"锋\",intro: {content: \"cards\",onunmark: function (storage,player){\n\t\t\t\t\t\tif(storage&&storage.length){\n\t\t\t\t\t\t\tplayer.$throw(storage,1000);\n\t\t\t\t\t\t\tgame.cardsDiscard(storage);\n\t\t\t\t\t\t\tgame.log(storage,'被置入了弃牌堆');\n\t\t\t\t\t\t storage.length=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},group: \"tuifeng2\",ai: {threaten: \"0.8\",maixie: \"true\",maixie_hp: \"true\",},}","info":"1.当你受到1点伤害后，你可以将一张牌置于武将牌上，称为“锋”。2.准备阶段开始时，若你的武将牌上有“锋”，你移去所有“锋”，摸2X张牌，然后你于此回合的出牌阶段内使用【杀】的次数上限+X。（X为你此次移去的“锋”数）"},"ziyuan":{"name":"资援","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterCard: function (card){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t}\n\t\t\t\t\treturn get.number(card)+num<=13;\n\t\t\t\t},complexCard: \"true\",selectCard: function (){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(num==13) return ui.selected.cards.length;\n\t\t\t\t\treturn ui.selected.cards.length+2;\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"false\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<ui.selected.cards.length;i++){\n\t\t\t\t\t\tnum+=get.number(ui.selected.cards[i]);\n\t\t\t\t\t}\n\t\t\t\t\tif(num+get.number(card)==13) return 9-get.value(card);\n\t\t\t\t\tif(ui.selected.cards.length==0){\n\t\t\t\t\t\tvar cards=_status.event.player.getCards('h');\n\t\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\t\tfor(var j=i+1;j<cards.length;j++){\n\t\t\t\t\t\t\t\tif(cards[i].number+cards[j].number==13){\n\t\t\t\t\t\t\t\t\tif(cards[i]==card||cards[j]==card) return 8.5-get.value(card);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\ttarget.recover();\n\t\t\t\t},ai: {order: function (skill,player){\n\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\treturn (current.hp<current.maxHp&&current!=player&&\n\t\t\t\t\t\t\t\tget.recoverEffect(current,player,player)>0);\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\treturn 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},result: {player: function (player,target){\n\t\t\t\t\t\t\tif(get.attitude(player,target)<0) return -1;\n\t\t\t\t\t\t\tvar eff=get.recoverEffect(target,player,player);\n\t\t\t\t\t\t\tif(eff<0) return 0;\n\t\t\t\t\t\t\tif(eff>0){\n\t\t\t\t\t\t\t\tif(target.hp==1) return 3;\n\t\t\t\t\t\t\t\treturn 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.needsToDiscard()) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},threaten: \"1.3\",},}","info":"出牌阶段限一次，你可以将任意张点数之和为13的手牌交给一名其他角色，然后该角色回复1点体力。"},"jugu":{"name":"巨贾","script":"{audio: \"2\",mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\treturn num+player.maxHp;\n\t\t\t\t\t},},trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",content: function (){\n\t\t\t\t\tplayer.draw(player.maxHp);\n\t\t\t\t},}","info":"锁定技，1.你的手牌上限+X。2.游戏开始时，你摸X张牌（X为你的体力上限）"},"hongde":{"name":"弘德","script":"{audio: \"2\",trigger: {player: [\"loseAfter\",\"gainAfter\"],global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(event.name=='gain'&&event.player==player) return event.cards&&event.cards.length>1;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.cards2&&evt.cards2.length>1;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('hongde'),'令一名其他角色摸一张牌',function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(player,target);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('hongde',result.targets);\n\t\t\t\t\t\tresult.targets[0].draw();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你一次获得或失去至少两张牌后，你可以令一名其他角色摸一张牌。"},"dingpan":{"name":"定叛","script":"{enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\tvar num;\n\t\t\t\t\tvar mode=get.mode();\n\t\t\t\t\tif(mode=='identity'){\n\t\t\t\t\t\tif(_status.mode=='purple') num=player.getEnemies().length;\n\t\t\t\t\t\telse num=get.population('fan');\n\t\t\t\t\t}\n\t\t\t\t\telse if(mode=='versus'){\n\t\t\t\t\t\tnum=player.getEnemies().length;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnum=1;\n\t\t\t\t\t}\n\t\t\t\t\tif((player.getStat().skill.dingpan||0)>=num) return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target.countCards('e')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.draw();\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar goon=get.damageEffect(target,player,target)>=0;\n\t\t\t\t\tif(!goon&&target.hp>=4&&get.attitude(player,target)<0){\n\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\tif(get.equipValue(es[i],target)>=8){\n\t\t\t\t\t\t\t\tgoon=true;break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttarget.chooseControl(function(){\n\t\t\t\t\t\tif(_status.event.goon) return '选项二';\n\t\t\t\t\t\treturn '选项一';\n\t\t\t\t\t}).set('goon',goon).set('prompt','定叛').set('choiceList',['令'+get.translation(player)+'弃置你装备区里的一张牌','获得你装备区内的所有牌并受到一点伤害']);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.control=='选项一'){\n\t\t\t\t\t\tplayer.discardPlayerCard(target,true,'e');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.gain(target.getCards('e'),'gain2');\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tgame.delay(0.5);\n\t\t\t\t\ttarget.damage();\n\t\t\t\t},ai: {order: \"7\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,target)>=0) return 2;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att==0) return 0;\n\t\t\t\t\t\t\tvar es=target.getCards('e');\n\t\t\t\t\t\t\tif(att>0&&(target.countCards('h')>2||target.needsToDiscard(1))) return 0;\n\t\t\t\t\t\t\tif(es.length==1&&att>0) return 0;\n\t\t\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\t\t\tvar val=get.equipValue(es[i],target);\n\t\t\t\t\t\t\t\tif(val<=4){\n\t\t\t\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(val>=7){\n\t\t\t\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限X次，你可以令一名装备区里有牌的角色摸一张牌，然后其选择一项：1.令你弃置其装备区里的一张牌；2.获得其装备区里的所有牌，若如此做，你对其造成1点伤害。（X为场上存活的敌方角色数）"},"zhaolie":{"name":"昭烈","script":"{trigger: {player: \"phaseDrawBegin2\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('zhaolie'),function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&player.inRange(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(get.attitude(player,target)>0) return 0;\n\t\t\t\t\t\treturn get.damageEffect(target,player,player);\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t\tplayer.storage.zhaolie=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('zhaolie',result.targets);\n\t\t\t\t\t\tplayer.addTempSkill('zhaolie2','phaseDrawAfter');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"摸牌阶段摸牌时，你可以少摸一张牌并指定攻击范围内的一名角色。你展示牌堆顶的三张牌，将其中的非基本牌和【桃】置于弃牌堆，然后该角色选择一项：1.你对其造成X点伤害，然后其获得这些基本牌；2.其弃置X张牌，然后你获得这些基本牌。（X为其中非基本牌的数量）"},"shichou":{"name":"誓仇","script":"{skillAnimation: \"true\",animationColor: \"orange\",unique: \"true\",limited: \"true\",mark: \"false\",trigger: {player: \"phaseZhunbeiBegin\",},zhuSkill: \"true\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\tif(!player.hasZhuSkill('shichou'))return false;\n\t\t\t\t\tif(player.countCards('he')<2) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.group=='shu';\n\t\t\t\t\t});\n\t\t\t\t},init: function (player){\n\t\t\t\t\tif(player.hasZhuSkill('shichou')){\n\t\t\t\t\t\tplayer.markSkill('shichou');\n\t\t\t\t\t\tplayer.storage.shichou=false;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tprompt:get.prompt2('shichou'),\n\t\t\t\t\t\tselectCard:2,\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target.group=='shu'&&target!=player;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tposition:'he',\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att<=0){\n\t\t\t\t\t\t\t\tif(target.hp==1) return (10-att)/2;\n\t\t\t\t\t\t\t\treturn 10-att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(target.hp==1) return 0;\n\t\t\t\t\t\t\t\treturn (10-att)/4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!result.bool) return;\n\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\tvar cards=result.cards;\n\t\t\t\t\tplayer.storage.shichou=true;\n\t\t\t\t\tplayer.logSkill('shichou',target);\n\t\t\t\t\tplayer.awakenSkill('shichou');\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\tplayer.storage.shichou_target=target;\n\t\t\t\t\tplayer.addSkill('shichou2');\n\t\t\t\t\ttarget.markSkillCharacter('shichou',player,'誓仇','代替'+get.translation(player)+'承受伤害直到首次进入濒死状态');\n\t\t\t\t},intro: {content: \"limited\",},}","info":"主公技，限定技，准备阶段，你可指定一名蜀势力角色并交给其两张牌。本局游戏中，当你受到伤害时，改为该角色受到等量的伤害并摸等量的牌，直至该角色第一次进入濒死状态。"},"xinshanjia":{"name":"缮甲","script":"{group: [\"xinshanjia_count\"],locked: \"false\",mod: {aiValue: function (player,card,num){\n\t\t\t\t\t\tif((player.storage.xinshanjia||0)<3&&get.type(card)=='equip'&&!get.cardtag(card,'gifts')){\n\t\t\t\t\t\t\tif(get.position(card)=='e') return num/player.hp;\n\t\t\t\t\t\t\treturn num*player.hp;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},subSkill: {count: {forced: \"true\",silent: \"true\",popup: \"false\",trigger: {player: \"loseEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn event.es.length>0;\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tlib.skill.xinshanjia.sync(player);\n\t\t\t\t\t\t},sub: \"true\",},},audio: \"shanjia\",trigger: {player: \"phaseUseBegin\",},intro: {content: \"本局游戏内已失去过#张装备区内的牌\",},frequent: \"true\",sync: function (player){\n\t\t\t\t\tvar history=player.actionHistory;\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tfor(var i=0;i<history.length;i++){\n\t\t\t\t\t\tfor(var j=0;j<history[i].lose.length;j++){\n\t\t\t\t\t\t\tnum+=history[i].lose[j].es.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.storage.xinshanjia=num;\n\t\t\t\t\tif(num>0) player.markSkill('xinshanjia');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tlib.skill.xinshanjia.sync(player);\n\t\t\t\t\tvar num=3-player.storage.xinshanjia;\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\tplayer.chooseToDiscard('he',true,num).ai=get.disvalue;\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar bool=true;\n\t\t\t\t\tif(result.cards){\n\t\t\t\t\t\tfor(var i=0;i<result.cards.length;i++){\n\t\t\t\t\t\t\tif(['basic','trick'].contains(get.type(result.cards[i],'trick',result.cards[i].original=='h'?player:false))){\n\t\t\t\t\t\t\t\tbool=false;break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(bool){\n\t\t\t\t\t\tplayer.chooseUseTarget({name:'sha'},'是否视为使用一张【杀】？',false);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"3\",noe: \"true\",reverseOrder: \"true\",skillTagFilter: function (player){\n\t\t\t\t\t\tif(player.storage.xinshanjia>2) return false;\n\t\t\t\t\t},effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(player.storage.xinshanjia<3&&get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];\n\t\t\t\t\t\t},},},}","info":"出牌阶段开始时，你可以摸三张牌，然后弃置3-X张牌(X为你本局游戏内失去过的装备区内的牌的数目且至多为3)。若你没有以此法弃置基本牌或锦囊牌，则你可以视为使用了一张不计入出牌阶段使用次数的【杀】。"},"lianzhu":{"name":"连诛","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterCard: \"true\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar num=get.value(card);\n\t\t\t\t\tif(get.color(card)=='black'){\n\t\t\t\t\t\tif(num>=6) return 0;\n\t\t\t\t\t\treturn 20-num;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(_status.event.player.needsToDiscard()){\n\t\t\t\t\t\t\treturn 7-num;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\tif(get.color(cards[0])=='black'){\n\t\t\t\t\t\ttarget.chooseToDiscard(2,'he','弃置两张牌，或令'+get.translation(player)+'摸两张牌').set('ai',function(card){\n\t\t\t\t\t\t\tif(_status.event.goon) return 7-get.value(card);\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}).set('goon',get.attitude(target,player)<0);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(!result.bool){\n\t\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",expose: \"0.2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.cards.length&&get.color(ui.selected.cards[0])=='red'){\n\t\t\t\t\t\t\t\tif(target.countCards('h')<player.countCards('h')) return 1;\n\t\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以展示并交给一名其他角色一张牌，若此牌为黑色，其选择一项：1.你摸两张牌；2.弃置两张牌"},"xiehui":{"name":"黠慧","script":"{mod: {ignoredHandcard: function (card,player){\n\t\t\t\t\t\tif(get.color(card)=='black'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t},cardDiscardable: function (card,player,name){\n\t\t\t\t\t\tif(name=='phaseDiscard'&&get.color(card)=='black') return false;\n\t\t\t\t\t},},trigger: {global: \"gainAfter\",},forced: \"true\",popup: \"false\",filter: function (event,player){\n\t\t\t\t\tif(event.player!=player){\n\t\t\t\t\t\tvar hs=event.player.getCards('h');\n\t\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\t\treturn evt&&evt.cards2&&evt.cards2.filter(function(card){\n\t\t\t\t\t\t\treturn hs.contains(card)&&get.color(card,event.player)=='black';\n\t\t\t\t\t\t}).length>0;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.player.addSkill('xiehui2');\n\t\t\t\t\tvar hs=trigger.player.getCards('h');\n\t\t\t\t\tvar cards=trigger.getl(player).cards2.filter(function(card){\n\t\t\t\t\t\treturn hs.contains(card)&&get.color(card,trigger.player)=='black';\n\t\t\t\t\t});\n\t\t\t\t\ttrigger.player.addGaintag(cards,'xiehui');\n\t\t\t\t},}","info":"锁定技，你的黑色牌不计入手牌上限；其他角色获得你的黑色牌时，其不能使用、打出、弃置这些牌直到其体力值减少为止。"},"refanghun":{"name":"芳魂","script":"{audio: \"fanghun\",inherit: \"fanghun\",trigger: {player: \"useCard\",target: \"useCardToTargeted\",},hiddenCard: function (player,name){\n\t\t\t\t\tif(!player.storage.fanghun||player.storage.fanghun<=0) return false;\n\t\t\t\t\tif(name=='tao') return player.countCards('h','jiu')>0;\n\t\t\t\t\tif(name=='jiu') return player.countCards('h','tao')>0;\n\t\t\t\t\treturn false;\n\t\t\t\t},marktext: \"影\",intro: {content: \"mark\",name: \"梅影\",},forced: \"true\",locked: \"false\",filter: function (event){\n\t\t\t\t\treturn event.card&&event.card.name=='sha';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.addMark('fanghun',trigger.num||1);\n\t\t\t\t\tplayer.addMark('fanghun2',trigger.num||1,false);\n\t\t\t\t},group: [\"fanghun_sha\",\"fanghun_draw\"],subSkill: {draw: {trigger: {player: [\"useCardAfter\",\"respondAfter\"],},forced: \"true\",popup: \"false\",filter: function (event){\n\t\t\t\t\t\t\treturn event.skill=='fanghun_sha'||event.skill=='fanghun_shan';\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\t},sub: \"true\",},sha: {audio: \"fanghun\",enable: [\"chooseToUse\",\"chooseToRespond\"],prompt: \"弃置一枚【梅影】标记，将杀当做闪，或将闪当做杀，或将桃当做酒，或将酒当做桃使用或打出\",viewAs: function (cards,player){\n\t\t\t\t\t\t\tvar name=false;\n\t\t\t\t\t\t\tswitch(get.name(cards[0],player)){\n\t\t\t\t\t\t\t\tcase 'sha':name='shan';break;\n\t\t\t\t\t\t\t\tcase 'shan':name='sha';break;\n\t\t\t\t\t\t\t\tcase 'tao':name='jiu';break;\n\t\t\t\t\t\t\t\tcase 'jiu':name='tao';break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(name) return {name:name};\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t},check: function (card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tif(_status.event.type=='phase'){\n\t\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\t\tvar name2;\n\t\t\t\t\t\t\t\tvar list=['sha','tao','jiu'];\n\t\t\t\t\t\t\t\tvar map={sha:'shan',tao:'jiu',jiu:'tao'}\n\t\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t\t \t\t\t\tif(player.countCards('h',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){\n\t\t\t\t \t\t\t\t\tvar temp=get.order({name:name});\n\t\t\t\t \t\t\t\t\tif(temp>max){\n\t\t\t\t \t\t\t\t\t\tmax=temp;\n\t\t\t\t \t\t\t\t\t\tname2=map[name];\n\t\t\t\t \t\t\t\t\t}\n\t\t\t\t \t\t\t\t}\n\t\t\t\t \t\t\t}\n\t\t\t\t \t\t\tif(name2==get.name(card,player)) return 1;\n\t\t\t\t \t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},filterCard: function (card,player,event){\n\t\t\t\t\t\t\tevent=event||_status.event;\n\t\t\t\t\t\t\tvar filter=event._backup.filterCard;\n\t\t\t\t\t\t\tvar name=get.name(card,player);\n\t\t\t\t\t\t\tif(name=='sha'&&filter({name:'shan',cards:[card]},player,event)) return true;\n\t\t\t\t\t\t\tif(name=='shan'&&filter({name:'sha',cards:[card]},player,event)) return true;\n\t\t\t\t\t\t\tif(name=='tao'&&filter({name:'jiu',cards:[card]},player,event)) return true;\n\t\t\t\t\t\t\tif(name=='jiu'&&filter({name:'tao',cards:[card]},player,event)) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},filter: function (event,player){\n\t\t\t\t\t\t\tif(!player.storage.fanghun||player.storage.fanghun<=0) return false;\n\t\t\t\t\t\t\tvar filter=event.filterCard;\n\t\t\t\t\t\t\tif(filter({name:'sha'},player,event)&&player.countCards('h','shan')) return true;\n\t\t\t\t\t\t\tif(filter({name:'shan'},player,event)&&player.countCards('h','sha')) return true;\n\t\t\t\t\t\t\tif(filter({name:'tao'},player,event)&&player.countCards('h','jiu')) return true;\n\t\t\t\t\t\t\tif(filter({name:'jiu'},player, event)&&player.countCards('h','tao')) return true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},onrespond: function (){return this.onuse.apply(this,arguments)},onuse: function (result,player){\n\t\t\t \t\t\tplayer.removeMark('fanghun',1);\n\t\t\t\t\t\t},ai: {respondSha: \"true\",respondShan: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\t\t\tif(!player.storage.fanghun||player.storage.fanghun<0) return false;\n\t\t\t\t\t\t\t\tvar name;\n\t\t\t\t\t\t\t\tswitch(tag){\n\t\t\t\t\t\t\t\t\tcase 'respondSha':name='shan';break;\n\t\t\t\t\t\t\t\t\tcase 'respondShan':name='sha';break;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(!player.countCards('h',name)) return false;\n\t\t\t\t\t\t\t},order: function (item,player){\n\t\t\t\t\t\t\t\tif(player&&_status.event.type=='phase'){\n\t\t\t\t\t\t\t\t\tvar max=0;\n\t\t\t\t\t\t\t\t\tvar list=['sha','tao','jiu'];\n\t\t\t\t\t\t\t\t\tvar map={sha:'shan',tao:'jiu',jiu:'tao'}\n\t\t\t\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\n\t\t\t\t\t\t\t\t\t\tvar name=list[i];\n\t\t\t\t\t \t\t\t\tif(player.countCards('h',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){\n\t\t\t\t\t \t\t\t\t\tvar temp=get.order({name:name});\n\t\t\t\t\t \t\t\t\t\tif(temp>max) max=temp;\n\t\t\t\t\t \t\t\t\t}\n\t\t\t\t\t \t\t\t}\n\t\t\t\t\t \t\t\tif(max>0) max+=0.3;\n\t\t\t\t\t \t\t\treturn max;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 4;\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"当你使用【杀】或成为【杀】的目标后，你获得1个“梅影”标记；你可以移去1个“梅影”标记来发动〖龙胆〗并摸一张牌。"},"refuhan":{"name":"扶汉","script":"{audio: \"fuhan\",trigger: {player: \"phaseZhunbeiBegin\",},unique: \"true\",limited: \"true\",skillAnimation: \"true\",animationColor: \"orange\",forceunique: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('fanghun')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tif(player.storage.fanghun) player.draw(player.storage.fanghun);\n\t\t\t\t\tplayer.removeMark('fanghun',player.storage.fanghun);\n\t\t\t\t\tplayer.awakenSkill('refuhan');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar list;\n\t\t\t\t\tif(_status.characterlist){\n\t\t\t\t\t\tlist=[];\n\t\t\t\t\t\tfor(var i=0;i<_status.characterlist.length;i++){\n\t\t\t\t\t\t\tvar name=_status.characterlist[i];\n\t\t\t\t\t\t\tif(lib.character[name][1]=='shu') list.push(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(_status.connectMode){\n\t\t\t\t\t\tlist=get.charactersOL(function(i){\n\t\t\t\t\t\t\treturn lib.character[i][1]!='shu';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tlist=get.gainableCharacters(function(info){\n\t\t\t\t\t\t\treturn info[1]=='shu';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tvar players=game.players.concat(game.dead);\n\t\t\t\t\tfor(var i=0;i<players.length;i++){\n\t\t\t\t\t\tlist.remove(players[i].name);\n\t\t\t\t\t\tlist.remove(players[i].name1);\n\t\t\t\t\t\tlist.remove(players[i].name2);\n\t\t\t\t\t}\n\t\t\t\t\tlist.remove('zhaoyun');\n\t\t\t\t\tlist.remove('re_zhaoyun');\n\t\t\t\t\tlist.remove('ol_zhaoyun');\n\t\t\t\t\tlist=list.randomGets(Math.max(4,game.countPlayer()));\n\t\t\t\t\tvar skills=[];\n\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\tskills.addArray((lib.character[i][3]||[]).filter(function(skill){\n\t\t\t\t\t\t\tvar info=get.info(skill);\n\t\t\t\t\t\t\treturn info&&!info.zhuSkill&&!info.limited&&!info.juexingji&&!info.hiddenSkill&&!info.charlotte;\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t\tif(!list.length||!skills.length){event.finish();return;}\n\t\t\t\t\tif(player.isUnderControl()){\n\t\t\t\t\t\tgame.swapPlayerAuto(player);\n\t\t\t\t\t}\n\t\t\t\t\tvar switchToAuto=function(){\n\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\tevent._result={\n\t\t\t\t\t\t\tbool:true,\n\t\t\t\t\t\t\tskills:skills.randomGets(2),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif(event.dialog) event.dialog.close();\n\t\t\t\t\t\tif(event.control) event.control.close();\n\t\t\t\t\t};\n\t\t\t\t\tvar chooseButton=function(list,skills){\n\t\t\t\t\t\tvar event=_status.event;\n\t\t\t\t\t\tif(!event._result) event._result={};\n\t\t\t\t\t\tevent._result.skills=[];\n\t\t\t\t\t\tvar rSkill=event._result.skills;\n\t\t\t\t\t\tvar dialog=ui.create.dialog('请选择获得至多两个技能',[list,'character'],'hidden');\n\t\t\t\t\t\tevent.dialog=dialog;\n\t\t\t\t\t\tvar table=document.createElement('div');\n\t\t\t\t\t\ttable.classList.add('add-setting');\n\t\t\t\t\t\ttable.style.margin='0';\n\t\t\t\t\t\ttable.style.width='100%';\n\t\t\t\t\t\ttable.style.position='relative';\n\t\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\t\tvar td=ui.create.div('.shadowed.reduce_radius.pointerdiv.tdnode');\n\t\t\t\t\t\t\ttd.link=skills[i];\n\t\t\t\t\t\t\ttable.appendChild(td);\n\t\t\t\t\t\t\ttd.innerHTML='<span>'+get.translation(skills[i])+'</span>';\n\t\t\t\t\t\t\ttd.addEventListener(lib.config.touchscreen?'touchend':'click',function(){\n\t\t\t\t\t\t\t\tif(_status.dragged) return;\n\t\t\t\t\t\t\t\tif(_status.justdragged) return;\n\t\t\t\t\t\t\t\t_status.tempNoButton=true;\n\t\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\t\t_status.tempNoButton=false;\n\t\t\t\t\t\t\t\t},500);\n\t\t\t\t\t\t\t\tvar link=this.link;\n\t\t\t\t\t\t\t\tif(!this.classList.contains('bluebg')){\n\t\t\t\t\t\t\t\t\tif(rSkill.length>=2) return;\n\t\t\t\t\t\t\t\t\trSkill.add(link);\n\t\t\t\t\t\t\t\t\tthis.classList.add('bluebg');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tthis.classList.remove('bluebg');\n\t\t\t\t\t\t\t\t\trSkill.remove(link);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdialog.content.appendChild(table);\n\t\t\t\t\t\tdialog.add('　　');\n\t\t\t\t\t\tdialog.open();\n\t\t\t\t\t\t\n\t\t\t\t\t\tevent.switchToAuto=function(){\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tevent.control=ui.create.control('ok',function(link){\n\t\t\t\t\t\t\tevent.dialog.close();\n\t\t\t\t\t\t\tevent.control.close();\n\t\t\t\t\t\t\tgame.resume();\n\t\t\t\t\t\t\t_status.imchoosing=false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor(var i=0;i<event.dialog.buttons.length;i++){\n\t\t\t\t\t\t\tevent.dialog.buttons[i].classList.add('selectable');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t\tgame.countChoose();\n\t\t\t\t\t};\n\t\t\t\t\tif(event.isMine()){\n\t\t\t\t\t\tchooseButton(list,skills);\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.isOnline()){\n\t\t\t\t\t\tevent.player.send(chooseButton,list,skills);\n\t\t\t\t\t\tevent.player.wait();\n\t\t\t\t\t\tgame.pause();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tswitchToAuto();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar map=event.result||result;\n\t\t\t\t\tif(map&&map.skills&&map.skills.length){\n\t\t\t\t\t\tfor(var i of map.skills) player.addSkillLog(i);\n\t\t\t\t\t}\n\t\t\t\t\tgame.broadcastAll(function(list){\n\t\t\t\t\t\tgame.expandSkills(list);\n\t\t\t\t\t\tfor(var i of list){\n\t\t\t\t\t\t\tvar info=lib.skill[i];\n\t\t\t\t\t\t\tif(!info) continue;\n\t\t\t\t\t\t\tif(!info.audioname2) info.audioname2={};\n\t\t\t\t\t\t\tinfo.audioname2.old_yuanshu='weidi';\n\t\t\t\t\t\t}\n\t\t\t\t\t},map.skills);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(player.isMinHp()) player.recover();\n\t\t\t\t},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，回合开始时，你可以移去所有\"梅影\"标记并摸等量的牌，然后从X张蜀势力武将牌中选择并获得至多两个技能（限定技、觉醒技、主公技除外）。若此时你是体力值最低的角色，你回复1点体力（X为场上角色数，且X∈[4,+∞)）。"},"fuman":{"name":"抚蛮","script":"{audio: \"2\",enable: \"phaseUse\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn !target.hasSkill('fuman2')&&target!=player;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h','sha');\n\t\t\t\t},discard: \"false\",lose: \"false\",delay: \"false\",filterCard: {name: \"sha\",},content: function (){\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto').gaintag.add('fuman');\n\t\t\t\t\ttarget.storage.fuman2=player;\n\t\t\t\t\ttarget.addTempSkill('fuman2',{player:'phaseAfter'});\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},ai: {order: \"2\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(!target.hasSha()) return 1.2;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以将一张【杀】交给一名本回合未获得过〖抚蛮〗牌的其他角色，其于下个回合结束之前使用〖抚蛮〗牌时，你摸一张牌。"},"bingzheng":{"name":"秉正","script":"{audio: \"2\",trigger: {player: \"phaseUseEnd\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('bingzheng'),function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')!=target.hp;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tvar nh=target.countCards('h');\n\t\t\t\t\t\tif(att>0){\n\t\t\t\t\t\t\tif(nh==target.hp-1){\n\t\t\t\t\t\t\t\tif(player==target) return att+1;\n\t\t\t\t\t\t\t\treturn att+2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player==target&&player.needsToDiscard()) return att/3;\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(nh==target.hp+1) return -att;\n\t\t\t\t\t\t\tif(nh==0) return 0;\n\t\t\t\t\t\t\treturn -att/2;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('bingzheng',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tif(event.target.countCards('h')){\n\t\t\t\t\t\t\tplayer.chooseControl(function(event,player){\n\t\t\t\t\t\t\t\tvar target=event.target;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)<0) return 1;\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}).set('choiceList',['令'+get.translation(event.target)+'摸一张牌',\n\t\t\t\t\t\t\t'令'+get.translation(event.target)+'弃置一张手牌']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tevent.directfalse=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.directfalse||result.index==0){\n\t\t\t\t\t\tevent.target.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.target.chooseToDiscard('h',true);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(event.target.countCards('h')==event.target.hp){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t\tif(event.target==player){\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar next=player.chooseCard('是否交给'+get.translation(event.target)+'一张牌？','he');\n\t\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\t\tif(get.position(card)!='h') return 0;\n\t\t\t\t\t\t\tif(_status.event.shan&&card.name=='shan'){\n\t\t\t\t\t\t\t\treturn 11;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.goon){\n\t\t\t\t\t\t\t\treturn 10-get.value(card);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn -get.value(card,_status.event.player,'raw');\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(get.attitude(player,event.target)>1&&\n\t\t\t\t\t\t\tplayer.countCards('h','shan')>1&&player.countCards('h')>event.target.countCards('h')){\n\t\t\t\t\t\t\tnext.set('shan',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(get.attitude(player,event.target)>0&&player.needsToDiscard()){\n\t\t\t\t\t\t\tnext.set('goon',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target.gain(result.cards,player,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",threaten: \"1.4\",},}","info":"出牌阶段结束时，你可以令手牌数不等于体力值的一名角色弃置一张手牌或摸一张牌。然后若其手牌数等于体力值，你摸一张牌，且可以交给该角色一张牌。"},"sheyan":{"name":"舍宴","script":"{audio: \"2\",trigger: {target: \"useCardToTarget\",},filter: function (event,player){\n\t\t\t\t\tif(!event.targets||!event.targets.contains(player)) return false;\n\t\t\t\t\tvar info=get.info(event.card);\n\t\t\t\t\tif(info.type!='trick') return false;\n\t\t\t\t\tif(info.multitarget) return false;\n\t\t\t\t\tif(event.targets.length>1) return true;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !event.targets.contains(current)&&lib.filter.targetEnabled2(event.card,event.player,current);\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar bool1=(trigger.targets.length>1);\n\t\t\t\t\tvar bool2=game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !trigger.targets.contains(current)&&lib.filter.targetEnabled2(trigger.card,trigger.player,current);\n\t\t\t\t\t});\n\t\t\t\t\tif(bool1&&bool2){\n\t\t\t\t\t\tplayer.chooseControlList(get.prompt('sheyan'),['为'+get.translation(trigger.card)+'增加一个目标','为'+get.translation(trigger.card)+'减少一个目标'],function(event,player){\n\t\t\t\t\t\t\tif(_status.event.add) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}).set('add',get.effect(player,trigger.card,trigger.player,player)>=0);\n\t\t\t\t\t}\n\t\t\t\t\telse if(bool2){\n\t\t\t\t\t\tevent.type='add';\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t\tevent.unchosen=true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.type='remove';\n\t\t\t\t\t\tevent.goto(2);\n\t\t\t\t\t\tevent.unchosen=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='cancel2'){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(result.index==1){\n\t\t\t\t\t\tevent.type='remove';\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.type='add';\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(event.type=='add'){\n\t\t\t\t\t\tplayer.chooseTarget(event.unchosen?get.prompt('sheyan'):null,'为'+get.translation(trigger.card)+'增加一个目标',function(card,player,target){\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\treturn !trigger.targets.contains(target)&&lib.filter.targetEnabled2(trigger.card,trigger.player,target);\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\treturn get.effect(target,trigger.card,trigger.player,_status.event.player);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chooseTarget(event.unchosen?get.prompt('sheyan'):null,'为'+get.translation(trigger.card)+'减少一个目标',function(card,player,target){\n\t\t\t\t\t\t\treturn _status.event.targets.contains(target);\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar trigger=_status.event.getTrigger();\n\t\t\t\t\t\t\treturn -get.effect(target,trigger.card,trigger.player,_status.event.player);\n\t\t\t\t\t\t}).set('targets',trigger.targets);\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.isMine()&&!event.isOnline()) game.delayx();\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tplayer.logSkill('sheyan',event.target);\n\t\t\t\t\tif(event.type=='add'){\n\t\t\t\t\t\ttrigger.targets.push(event.target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.getParent().excluded.add(event.target);\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"当你成为普通锦囊牌的目标时（【借刀杀人】等带有指向目标的锦囊除外），你可以为此牌增加一个目标或令其对其中一个目标无效。（有效目标数至少为一）"},"xiashu":{"name":"下书","script":"{audio: \"2\",trigger: {player: \"phaseUseBegin\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar maxval=0;\n\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\tfor(var i=0;i<hs.length;i++){\n\t\t\t\t\t\tmaxval=Math.max(maxval,get.value(hs[i]));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('xiashu'),lib.filter.notMe).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tvar maxval=_status.event.maxval;\n\t\t\t\t\t\tvar dh=target.countCards('h')-player.countCards('h');\n\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\tif(target.hasSkill('qingjian')) return false;\n\t\t\t\t\t\tif(dh<=0) return 0;\n\t\t\t\t\t\tif(att>0) return 0.1;\n\t\t\t\t\t\tif(maxval>=8) return 0;\n\t\t\t\t\t\tif(att==0) return 0.2;\n\t\t\t\t\t\tif(dh>=3) return dh;\n\t\t\t\t\t\tif(dh==2){\n\t\t\t\t\t\t\tif(maxval<=7) return dh;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(maxval<=6) return dh;\n\t\t\t\t\t\treturn 0;\n\n\t\t\t\t\t}).set('maxval',maxval);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('xiashu',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tvar hs=player.getCards('h');\n\t\t\t\t\t\tevent.target.gain(hs,player,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar hs=event.target.getCards('h');\n\t\t\t\t\tif(!hs.length){\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ths.sort(function(a,b){\n\t\t\t\t\t\treturn get.value(b,player,'raw')-get.value(a,player,'raw');\n\t\t\t\t\t});\n\t\t\t\t\tevent.target.chooseCard([1,hs.length],'展示至少一张手牌',true).set('ai',function(card){\n\t\t\t\t\t\tvar rand=_status.event.rand;\n\t\t\t\t\t\tvar list=_status.event.list;\n\t\t\t\t\t\tif(_status.event.att){\n\t\t\t\t\t\t\tif(ui.selected.cards.length>=Math.ceil(list.length/2)) return 0;\n\t\t\t\t\t\t\tvar value=get.value(card);\n\t\t\t\t\t\t\tif(_status.event.getParent().player.isHealthy()){\n\t\t\t\t\t\t\t\tvalue+=(get.tag(card,'damage')?1.5:0)+(get.tag(card,'draw')?2:0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(ui.selected.cards.length>=Math.floor(list.length/2)) return 0;\n\t\t\t\t\t\treturn (list.indexOf(card)%2==rand)?1:0;\n\t\t\t\t\t}).set('rand',(Math.random()<0.6)?1:0).set('list',hs).set('att',get.attitude(event.target,player)>0);\n\t\t\t\t\t'step 3'\n\t\t\t\t\tevent.target.showCards(result.cards);\n\t\t\t\t\tevent.cards1=result.cards;\n\t\t\t\t\tevent.cards2=event.target.getCards('h',function(card){\n\t\t\t\t\t\treturn !event.cards1.contains(card);\n\t\t\t\t\t});\n\t\t\t\t\t'step 4'\n\t\t\t\t\tvar choice;\n\t\t\t\t\tvar num1=event.cards1.length;\n\t\t\t\t\tvar num2=event.cards2.length;\n\t\t\t\t\tif(get.attitude(event.target,player)>0&&num1>=num2){\n\t\t\t\t\t\tchoice=0;\n\t\t\t\t\t}\n\t\t\t\t\telse if(num1==num2){\n\t\t\t\t\t\tchoice=(Math.random()<0.45)?0:1;\n\t\t\t\t\t}\n\t\t\t\t\telse if(num1>num2){\n\t\t\t\t\t\tif(num1-num2==1){\n\t\t\t\t\t\t\tchoice=(Math.random()<0.6)?0:1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tchoice=0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(num2-num1==1){\n\t\t\t\t\t\t\tchoice=(Math.random()<0.6)?1:0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tchoice=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseControl(function(event,player){\n\t\t\t\t\t\treturn _status.event.choice;\n\t\t\t\t\t}).set('choiceList',['获得'+get.translation(event.target)+'展示的牌',\n\t\t\t\t\t'获得'+get.translation(event.target)+'未展示的牌']).set('choice',choice);\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.index==0){\n\t\t\t\t\t\tplayer.gain(event.cards1,target,'give');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.gain(event.cards2,target,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",},}","info":"出牌阶段开始时，你可以将所有手牌交给一名其他角色，然后该角色亮出任意数量的手牌（至少一张）。你选择一项：1.获得其亮出的手牌；2.获得其未亮出的手牌。"},"kuanshi":{"name":"宽释","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('kuanshi')).set('ai',function(target){\n\t\t\t\t\t\tif(get.attitude(_status.event.player,target)>0){\n\t\t\t\t\t\t\treturn 1/Math.sqrt(target.hp+1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).animate=false;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('kuanshi');\n\t\t\t\t\t\ttarget.storage.kuanshi2=player;\n\t\t\t\t\t\ttarget.addSkill('kuanshi2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段，你可以选择一名角色。直到你的下回合开始，该角色第一次受到大于1的伤害时，防止此伤害，然后你跳过下个回合的摸牌阶段。"},"qizhou":{"name":"绮胄","script":"{trigger: {player: [\"phaseBefore\",\"equipEnd\",\"loseEnd\"],},forced: \"true\",popup: \"false\",derivation: [\"mashu\",\"reyingzi\",\"duanbing\",\"fenwei\"],filter: function (event,player){\n\t\t\t\t\tif(player.equiping) return false;\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\tsuits.add(get.suit(es[i]));\n\t\t\t\t\t}\n\t\t\t\t\tif(player.additionalSkills.qizhou){\n\t\t\t\t\t\treturn player.additionalSkills.qizhou.length!=suits.length;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn suits.length>0;\n\t\t\t\t\t}\n\t\t\t\t},content: function (){\n\t\t\t\t\tvar suits=[];\n\t\t\t\t\tvar es=player.getCards('e');\n\t\t\t\t\tfor(var i=0;i<es.length;i++){\n\t\t\t\t\t\tsuits.add(get.suit(es[i]));\n\t\t\t\t\t}\n\t\t\t\t\tplayer.removeAdditionalSkill('qizhou');\n\t\t\t\t\tswitch(suits.length){\n\t\t\t\t\t\tcase 1:player.addAdditionalSkill('qizhou',['mashu']);break;\n\t\t\t\t\t\tcase 2:player.addAdditionalSkill('qizhou',['mashu','reyingzi']);break;\n\t\t\t\t\t\tcase 3:player.addAdditionalSkill('qizhou',['mashu','reyingzi','duanbing']);break;\n\t\t\t\t\t\tcase 4:player.addAdditionalSkill('qizhou',['mashu','reyingzi','duanbing','fenwei']);break;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"1.2\",},}","info":"锁定技，你根据装备区里牌的花色数获得以下技能：1种或以上：〖马术〗；2种或以上：〖英姿〗；3种或以上：〖短兵〗；4种：〖奋威〗。"},"shanxi":{"name":"闪袭","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterCard: {color: \"red\",type: \"basic\",},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player&&target.countCards('he')&&player.inRange(target);\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.discardPlayerCard(target,true);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(get.name(result.cards[0],result.cards[0].original=='h'?player:false)=='shan'){\n\t\t\t\t\t\t\tplayer.viewHandcards(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttarget.viewHandcards(player);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"8\",result: {target: \"-1\",},},}","info":"出牌阶段限一次，你可以弃置一张红色基本牌，然后弃置攻击范围内的一名其他角色的一张牌。若弃置的牌是【闪】，你观看其手牌，若弃置的不是【闪】，其观看你的手牌。"},"shushen":{"name":"淑慎","script":"{audio: \"2\",trigger: {player: \"recoverAfter\",},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('shushen'),'令一名其他角色选择摸两张牌或回复1点体力',function(card,player,target){\n\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.count--;\n\t\t\t\t\t\tplayer.logSkill('shushen',result.targets);\n\t\t\t\t\t\tresult.targets[0].chooseDrawRecover(2,true);\n\t\t\t\t\t\tif(event.count) event.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",expose: \"0.1\",},}","info":"当你回复1点体力时，你可以令一名其他角色选择回复1点体力或摸两张牌。"},"shenzhi":{"name":"神智","script":"{audio: \"2\",trigger: {player: \"phaseZhunbeiBegin\",},check: function (event,player){\n\t\t\t\t\tif(player.hp>2) return false;\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tif(cards.length<player.hp) return false;\n\t\t\t\t\tif(cards.length>3) return false;\n\t\t\t\t\tfor(var i=0;i<cards.length;i++){\n\t\t\t\t\t\tif(get.value(cards[i])>7||get.tag(cards[i],'recover')>=1) return false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h')>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tevent.bool=cards.length>=player.hp;\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.bool){\n\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"准备阶段开始时，你可以弃置所有手牌。若你以此法弃置的牌数不小于X，你回复1点体力（X为你的体力值）。"},"guixiu":{"name":"闺秀","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&player.countCards('h')<player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw();\n\t\t\t\t},}","info":"当你成为【杀】的目标后，若你的手牌数小于体力值，则你可以摸一张牌。"},"cunsi":{"name":"存嗣","script":"{skillAnimation: \"true\",animationColor: \"orange\",audio: \"2\",unique: \"true\",enable: \"phaseUse\",mark: \"true\",limited: \"true\",derivation: \"yongjue\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.cunsi&&player.countCards('h')&&!player.isTurnedOver();\n\t\t\t\t},init: function (player){\n\t\t\t\t\tplayer.storage.cunsi=false;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.sex=='male';\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('cunsi');\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\ttarget.gain(cards,player,'giveAuto');\n\t\t\t\t\tplayer.storage.cunsi=true;\n\t\t\t\t\tgame.delay();\n\t\t\t\t\ttarget.addSkill('yongjue');\n\t\t\t\t\ttarget.markSkillCharacter('yongjue',player,'存嗣','<div class=\"skill\">【勇决】</div><div>每当其他角色于回合内使用一张杀，若目标不是你，你可以获得之，每回合限一次</div>');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tplayer.turnOver();\n\t\t\t\t},intro: {content: \"limited\",},ai: {order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.isMin()) return 0;\n\t\t\t\t\t\t\tif(player.hp>1){\n\t\t\t\t\t\t\t\tif(game.phaseNumber<game.players.length) return 0;\n\t\t\t\t\t\t\t\tif(target.hp==1&&target.maxHp>2) return 0;\n\t\t\t\t\t\t\t\tif(get.attitude(player,target)<5) return 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(get.attitude(player,target)<5) return 0;\n\t\t\t\t\t\t\tif(target.hp==1&&target.maxHp>2) return 0.2;\n\t\t\t\t\t\t\tif(target==game.me) return 1.2;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},expose: \"0.5\",threaten: \"1.5\",},}","info":"限定技，出牌阶段，你可以将所有手牌交给一名男性角色。该角色获得技能【勇决】，然后你将武将牌翻面。"},"xiongyi":{"name":"雄异","script":"{skillAnimation: \"true\",animationColor: \"gray\",unique: \"true\",enable: \"phaseUse\",audio: \"2\",limited: \"true\",filterTarget: function (card,player,target){\n\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\tif(player==target) return true;\n\t\t\t\t\t\tif(player.identity=='ye') return false;\n\t\t\t\t\t\tif(player.identity=='unknown'){\n\t\t\t\t\t\t\tif(_status.yeidentity.contains(player._group)){\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(get.zhu(player)||get.population(player._group)+1<=get.population()/2){\n\t\t\t\t\t\t\t\treturn player._group==target.identity;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn player.identity==target.identity;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t},multitarget: \"true\",multiline: \"true\",selectTarget: function (){\n\t\t\t\t\tif(get.mode()=='guozhan') return -1;\n\t\t\t\t\treturn [1,3];\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.awakenSkill('xiongyi');\n\t\t\t\t\tgame.asyncDraw(targets,3);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(player.isDamaged()){\n\t\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\t\tif(player.isMinor(true)){\n\t\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(targets.length<=2){\n\t\t\t\t\t\t\tplayer.recover();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"1\",result: {target: function (player){\n\t\t\t\t\t\t\tvar num=player.countCards('h');\n\t\t\t\t\t\t\tif(player.hp==1) return 1;\n\t\t\t\t\t\t\tif(player.hp==2&&num<=2) return 1;\n\t\t\t\t\t\t\tif(player.hp==3&&num<=1) return 1;\n\t\t\t\t\t\t\tif(game.phaseNumber<game.players.length*2) return 0;\n\t\t\t\t\t\t\tif(player.hasUnknown()) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以选择至多三名角色，这些角色各摸三张牌；若你选择的角色数不超过2，你回复1点体力"},"sijian":{"name":"死谏","script":"{trigger: {player: \"loseAfter\",global: [\"equipAfter\",\"addJudgeAfter\",\"gainAfter\",\"loseAsyncAfter\"],},direct: \"true\",audio: \"2\",filter: function (event,player){\n\t\t\t\t\tif(player.countCards('h')) return false;\n\t\t\t\t\tif(event.name=='gain'&&event.player==player) return false;\n\t\t\t\t\tvar evt=event.getl(player);\n\t\t\t\t\treturn evt&&evt.hs&&evt.hs.length>0;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseTarget(get.prompt('sijian'),'弃置一名其他角色的一张牌',function(card,player,target){\n\t\t\t\t\t\treturn player!=target&&target.countCards('he')>0;\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('sijian',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.discardPlayerCard(event.target,true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.2\",},}","info":"当你失去最后的手牌时，你可以弃置一名其他角色的一张牌。"},"suishi":{"name":"随势","script":"{audio: \"2\",trigger: {global: \"dying\",},forced: \"true\",popup: \"false\",check: function (){\n\t\t\t\t\treturn false;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn event.player!=player&&event.parent.name=='damage'&&event.parent.source&&event.parent.source!=event.player;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar str;\n\t\t\t\t\tif(trigger.parent.source==player){\n\t\t\t\t\t\tstr='随势：是否摸一张牌？';\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstr='随势：是否令'+get.translation(player)+'摸一张牌？'\n\t\t\t\t\t}\n\t\t\t\t\ttrigger.parent.source.chooseBool(str).set('ai',function(){\n\t\t\t\t\t\treturn get.attitude(_status.event.player,_status.event.target)>0;\n\t\t\t\t\t}).set('target',player);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('suishi');\n\t\t\t\t\t\ttrigger.parent.source.line(player,'green');\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t},group: \"suishi2\",}","info":"当其他角色进入濒死状态时，伤害来源可以令你摸一张牌；当其他角色死亡时，伤害来源可以令你失去1点体力"},"xiaoguo":{"name":"骁果","script":"{audio: \"2\",trigger: {global: \"phaseJieshuBegin\",},filter: function (event,player){\n\t\t\t\t\treturn event.player.isAlive()&&event.player!=player&&player.countCards('h',function(card){\n\t\t\t\t\t\tif(_status.connectMode) return true;\n\t\t\t\t\t\treturn get.type(card)=='basic';\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar nono=(Math.abs(get.attitude(player,trigger.player))<3);\n\t\t\t\t\tif(get.damageEffect(trigger.player,player,player)<=0){\n\t\t\t\t\t\tnono=true;\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt('xiaoguo',trigger.player),{type:'basic'});\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.nono) return 0;\n\t\t\t\t\t\treturn 8-get.useful(card);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('logSkill',['xiaoguo',trigger.player]);\n\t\t\t\t\tnext.set('nono',nono);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar nono=(get.damageEffect(trigger.player,player,trigger.player)>=0);\n\t\t\t\t\t\ttrigger.player.chooseToDiscard('he','弃置一张装备牌并令'+get.translation(player)+'摸一张牌，或受到一点伤害',{type:'equip'}).set('ai',function(card){\n\t\t\t\t\t\t\tif(_status.event.nono){\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.player.hp==1) return 10-get.value(card);\n\t\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t\t}).set('nono',nono);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.draw();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.damage();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.3\",threaten: \"1.3\",},}","info":"其他角色的结束阶段开始时，你可以弃置一张基本牌，令该角色选择一项：1.弃置一张装备牌，然后你摸一张牌；2.受到你对其造成的1点伤害。"},"duanxie":{"name":"断绁","script":"{enable: \"phaseUse\",usable: \"1\",audio: \"2\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&!target.isLinked();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(!target.isLinked()) target.link();\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(!player.isLinked()) player.link();\n\t\t\t\t},ai: {result: {target: \"-1\",player: function (player){\n\t\t\t\t\t\t\treturn player.isLinked()?0:-0.8;\n\t\t\t\t\t\t},},order: \"2\",expose: \"0.3\",effect: {target: function (card){\n\t\t\t\t\t\t\tif(card.name=='tiesuo'){\n\t\t\t\t\t\t\t\treturn 0.5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以令一名其他角色横置，若如此做，你横置。"},"fenming":{"name":"奋命","script":"{audio: \"2\",trigger: {player: \"phaseJieshuBegin\",},check: function (event,player){\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\tif(current.isLinked()&&current.countCards('he')){\n\t\t\t\t\t\t\treturn get.attitude(player,current);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn num<0;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn player.isLinked();\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.targets=game.filterPlayer(function(current){\n\t\t\t\t\t\tif(current.isLinked()&&current.countCards('he')){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\tevent.targets.sort(lib.sort.seat);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.num<event.targets.length){\n\t\t\t\t\t\tvar target=event.targets[event.num];\n\t\t\t\t\t\tif(player==target){\n\t\t\t\t\t\t\tplayer.chooseToDiscard(true,'he');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.discardPlayerCard(true,'he',target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"结束阶段开始时，若你处于横置状态，你可以弃置所有处于横置状态的角色的各一张牌。"},"hengzheng":{"name":"横征","script":"{audio: \"2\",trigger: {player: \"phaseDrawBegin1\",},filter: function (event,player){\n\t\t\t\t\treturn !event.numFixed&&(player.hp==1||player.countCards('h')==0);\n\t\t\t\t},check: function (event,player){\n\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\tif(current.countCards('he')&&current!=player&&get.attitude(player,current)<=0){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(current.countCards('j')&&current!=player&&get.attitude(player,current)>0){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn num>=2;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar targets=game.filterPlayer();\n\t\t\t\t\ttargets.remove(player);\n\t\t\t\t\ttargets.sort(lib.sort.seat);\n\t\t\t\t\tevent.targets=targets;\n\t\t\t\t\tevent.num=0;\n\t\t\t\t\ttrigger.changeToZero();\n\t\t\t\t\tplayer.line(targets,'green');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(num<event.targets.length){\n\t\t\t\t\t\tif(event.targets[num].countCards('hej')){\n\t\t\t\t\t\t\tplayer.gainPlayerCard(event.targets[num],'hej',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevent.num++;\n\t\t\t\t\t\tevent.redo();\n\t\t\t\t\t}\n\t\t\t\t},ai: {noh: \"true\",skillTagFilter: function (player,tag){\n\t\t\t\t\t\tif(tag=='noh'){\n\t\t\t\t\t\t\tif(player.countCards('h')!=1) return false;\n\t\t\t\t\t\t}\n\t\t\t\t\t},threaten: function (player,target){\n\t\t\t\t\t\tif(target.hp==1) return 2.5;\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t},},}","info":"摸牌阶段开始时，若你的体力值为1或你没有手牌，则你可以放弃摸牌，改为获得每名其他角色区域内的一张牌。"},"shengxi":{"name":"生息","script":"{trigger: {player: \"phaseDiscardBegin\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn !player.getStat('damage');\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t},audio: \"2\",audioname: [\"liushan\"],}","info":"弃牌阶段开始时，若你本回合内未造成过伤害，则你可以摸两张牌。"},"shoucheng":{"name":"守成","script":"{trigger: {global: [\"equipAfter\",\"addJudgeAfter\",\"loseAfter\",\"gainAfter\",\"loseAsyncAfter\"],},audio: \"2\",direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\tif(current==_status.currentPhase) return false;\n\t\t\t\t\t\tvar evt=event.getl(current);\n\t\t\t\t\t\treturn evt&&evt.hs&&evt.hs.length&&current.countCards('h')==0;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.list=game.filterPlayer(function(current){\n\t\t\t\t\t\tif(current==_status.currentPhase) return false;\n\t\t\t\t\t\tvar evt=trigger.getl(current);\n\t\t\t\t\t\treturn evt&&evt.hs&&evt.hs.length;\n\t\t\t\t\t}).sortBySeat(_status.currentPhase);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tvar target=event.list.shift();\n\t\t\t\t\tevent.target=target;\n\t\t\t\t\tif(target.isAlive()&&target.countCards('h')==0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('shoucheng',target)).set('ai',function(){\n\t\t\t\t\t\t\treturn get.attitude(_status.event.player,_status.event.getParent().target)>0;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.goto(3);\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill(event.name,target);\n\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(event.list.length) event.goto(1);\n\t\t\t\t},ai: {threaten: \"1.3\",expose: \"0.2\",noh: \"true\",},}","info":"当一名其他角色于其回合外失去手牌时，若其没有手牌，则你可令该角色摸一张牌。"},"shangyi":{"name":"尚义","script":"{audio: \"2\",enable: \"phaseUse\",usable: \"1\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn player!=target&&target.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tplayer.chooseCardButton(target,target.getCards('h')).set('filterButton',function(button){\n\t\t\t\t\t\treturn get.color(button.link)=='black';\n\t\t\t\t\t});\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttarget.discard(result.links[0]);\n\t\t\t\t\t}\n\t\t\t\t},ai: {order: \"11\",result: {target: function (player,target){\n\t\t\t\t\t\t\treturn -target.countCards('h');\n\t\t\t\t\t\t},},threaten: \"1.1\",},}","info":"出牌阶段限一次，你可以观看一名其他角色的手牌，然后弃置其中的一张黑色牌。"},"zniaoxiang":{"name":"鸟翔","script":"{shaRelated: \"true\",audio: \"2\",trigger: {player: \"useCardToPlayered\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&!event.getParent().directHit.contains(event.target);\n\t\t\t\t},logTarget: \"target\",content: function (){\n\t\t\t\t\tvar id=trigger.target.playerid;\n\t\t\t\t\tvar map=trigger.getParent().customArgs;\n\t\t\t\t\tif(!map[id]) map[id]={};\n\t\t\t\t\tif(typeof map[id].shanRequired=='number'){\n\t\t\t\t\t\tmap[id].shanRequired++;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tmap[id].shanRequired=2;\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，当你使用【杀】指定目标后，你令目标角色响应此【杀】所需要使用的【闪】的数目+1。"},"zhendu":{"name":"鸩毒","script":"{audio: \"2\",trigger: {global: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn /*(get.mode()!='guozhan'||event.player!=player)&&*/player.countCards('h')>0;\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar nono=(Math.abs(get.attitude(player,trigger.player))<3);\n\t\t\t\t\tif(player==trigger.player||get.damageEffect(trigger.player,player,player)<=0){\n\t\t\t\t\t\tnono=true\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.player.hp>2){\n\t\t\t\t\t\tnono=true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.player.hp>1&&player.countCards('h')<3){\n\t\t\t\t\t\tnono=true;\n\t\t\t\t\t}\n\t\t\t\t\telse if(trigger.player.canUse('sha',player)&&!player.countCards('h','shan')&&trigger.player.countCards('h')>=3){\n\t\t\t\t\t\tnono=true;\n\t\t\t\t\t}\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt2('zhendu',trigger.player));\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\tif(_status.event.nono) return -1;\n\t\t\t\t\t\treturn 7-get.useful(card);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('logSkill',['zhendu',trigger.player]);\n\t\t\t\t\tnext.set('nono',nono);\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.player.chooseUseTarget({name:'jiu'},true,'noTargetDelay','nodelayx');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool&&trigger.player!=player) trigger.player.damage();\n\t\t\t\t},ai: {threaten: \"2\",expose: \"0.3\",},}","info":"一名角色的出牌阶段开始时，你可以弃置一张手牌，视为该角色使用了一张【酒】。若该角色不是你，你对其造成一点伤害。"},"qiluan":{"name":"戚乱","script":"{audio: \"qiluan2\",trigger: {global: \"phaseEnd\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer2(function(current){\n\t\t\t\t\t\treturn current.getStat('kill')>0\n\t\t\t\t\t});\n\t\t\t\t},prompt: function (event,player){\n\t\t\t\t\tvar num=game.countPlayer2(function(current){\n\t\t\t\t\t\treturn (current.getStat('kill')||0)*(current==player?3:1);\n\t\t\t\t\t});\n\t\t\t\t\treturn get.prompt('qiluan')+'（可摸'+get.cnNumber(num)+'张牌）';\n\t\t\t\t},content: function (){\n\t\t\t\t\t//if(get.mode()=='guozhan'){\n\t\t\t\t\t//\tplayer.draw(3);\n\t\t\t\t\t//}\n\t\t\t\t\t//else{\n\t\t\t\t\t\tplayer.draw(game.countPlayer2(function(current){\n\t\t\t\t\t\t\treturn (current.getStat('kill')||0)*(current==player?3:1);\n\t\t\t\t\t\t}));\n\t\t\t\t\t//}\n\t\t\t\t},subSkill: {draw: {trigger: {global: \"dieAfter\",},frequent: \"true\",filter: function (event,player){\n\t\t\t\t\t\t\treturn /*get.mode()!='guozhan'&&*/player!=event.source;\n\t\t\t\t\t\t},content: function (){player.draw()},sub: \"true\",},},}","info":"一名角色的回合结束时，你可以摸3X+Y张牌。（X为你本回合内杀死过的角色数，Y为本回合内其他角色杀死过的角色数）"},"lirang":{"name":"礼让","script":"{audio: \"2\",trigger: {player: \"loseAfter\",},filter: function (event,player){\n\t\t\t\t\tif(event.type!='discard') return false;\n\t\t\t\t\tfor(var i=0;i<event.cards2.length;i++){\n\t\t\t\t\t\tif(get.position(event.cards2[i])=='d'){\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},direct: \"true\",popup: \"false\",content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tif(trigger.delay==false) game.delay();\n\t\t\t\t\tevent.cards=[];\n\t\t\t\t\tevent.logged=false;\n\t\t\t\t\tfor(var i=0;i<trigger.cards2.length;i++){\n\t\t\t\t\t\tif(get.position(trigger.cards2[i],true)=='d'){\n\t\t\t\t\t\t\tevent.cards.push(trigger.cards2[i]);\n\t\t\t\t\t\t\t//ui.special.appendChild(trigger.cards[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(event.cards.length){\n\t\t\t\t\t\tvar goon=false;\n\t\t\t\t\t\tfor(var i=0;i<event.cards.length;i++){\n\t\t\t\t\t\t\tif(event.cards[i].name=='du'){\n\t\t\t\t\t\t\t\tgoon=true;break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!goon){\n\t\t\t\t\t\t\tgoon=game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn player!=current&&get.attitude(player,current)>1;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplayer.chooseCardButton(get.prompt('lirang'),event.cards,[1,event.cards.length]).set('ai',function(button){\n\t\t\t\t\t\t\tif(!_status.event.goon||ui.selected.buttons.length) return 0;\n\t\t\t\t\t\t\tif(button.link.name=='du') return 2;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}).set('goon',goon);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.togive=result.links.slice(0);\n\t\t\t\t\t\tplayer.chooseTarget('将'+get.translation(result.links)+'交给一名角色',true,function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tif(_status.event.enemy){\n\t\t\t\t\t\t\t\treturn -att;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(att>2) return att/Math.sqrt(1+target.countCards('h'));\n\t\t\t\t\t\t\t\treturn att/Math.sqrt(1+target.countCards('h'))/5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).set('enemy',get.value(event.togive[0],player,'raw')<0);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t//game.cardsDiscard(event.cards);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.logged){\n\t\t\t\t\t\t\tplayer.logSkill('lirang',result.targets);\n\t\t\t\t\t\t\tevent.logged=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse player.line(result.targets,'green');\n\t\t\t\t\t\tfor(var i=0;i<event.togive.length;i++){\n\t\t\t\t\t\t\tevent.cards.remove(event.togive[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult.targets[0].gain(event.togive);\n\t\t\t\t\t\tresult.targets[0].$gain2(event.togive);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t//game.cardsDiscard(event.cards);\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t},ai: {expose: \"0.1\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(target.hasFriend()&&get.tag(card,'discard')){\n\t\t\t\t\t\t\t\tif(current<0) return 0;\n\t\t\t\t\t\t\t\treturn [1,1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你的牌因弃置而置入弃牌堆后，你可以将其中的任意张牌交给其他角色。"},"mingshi":{"name":"名士","script":"{audio: \"2\",trigger: {player: \"damageBegin3\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.source&&event.source.hp>player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tvar next=player.chooseToDiscard(get.prompt2('mingshi'),{color:'black'});\n\t\t\t\t\tnext.set('ai',function(card){\n\t\t\t\t\t\treturn 9-get.value(card);\n\t\t\t\t\t});\n\t\t\t\t\tnext.set('logSkill','mingshi');\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\ttrigger.num--;\n\t\t\t\t\t}\n\t\t\t\t},ai: {threaten: \"0.8\",},}","info":"当你受到伤害时，若伤害来源的体力值大于你，你可以弃置一张黑色手牌，令伤害值-1。"},"fenxun":{"name":"奋迅","script":"{enable: \"phaseUse\",usable: \"1\",position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.storage.fenxun2=target;\n\t\t\t\t\tplayer.addTempSkill('fenxun2');\n\t\t\t\t},check: function (card){\n\t\t\t\t\tif(card.name=='sha'&&_status.event.player.countCards('h','sha')<=1) return 0;\n\t\t\t\t\treturn 6-get.value(card);\n\t\t\t\t},filterCard: \"true\",ai: {order: \"4\",result: {player: function (player,target){\n\t\t\t\t\t\t\tif(get.distance(player,target)<=1) return 0;\n\t\t\t\t\t\t\tvar hs=player.getCards('h','shunshou');\n\t\t\t\t\t\t\tif(hs.length&&player.canUse(hs[0],target,false)){\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar geteff=function(current){\n\t\t\t\t\t\t\t\treturn player.canUse('sha',current,false,true)&&get.effect(current,{name:'sha'},player,player)>0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.hasSha()&&geteff(target)){\n\t\t\t\t\t\t\t\tvar num=game.countPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=player&&get.distance(player,current)<=1&&geteff(current);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(num==0){\n\t\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\t\treturn player.canUse('sha',current)&&geteff(current)&&current!=target;\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(num==1){\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张牌并选择一名其他角色，你于本回合内至其的距离视为1。"},"duanbing":{"name":"短兵","script":"{audio: \"2\",audioname: [\"heqi\"],trigger: {player: \"useCard2\",},filter: function (event,player){\n\t\t\t\t\tif(event.card.name!='sha') return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn !event.targets.contains(current)&&get.distance(player,current)<=1&&player.canUse(event.card,current);\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt('duanbing'),'为'+get.translation(trigger.card)+'增加一个目标',function(card,player,target){\n\t\t\t\t\t\treturn !_status.event.sourcex.contains(target)&&get.distance(player,target)<=1&&player.canUse(_status.event.card,target);\n\t\t\t\t\t}).set('sourcex',trigger.targets).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\treturn get.effect(target,_status.event.card,player,player);\n\t\t\t\t\t}).set('card',trigger.card);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tif(!event.isMine()&&!event.isOnline()) game.delayx();\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tplayer.logSkill('duanbing',event.target);\n\t\t\t\t\ttrigger.targets.push(event.target);\n\t\t\t\t},ai: {effect: {player: function (card,player,target,current,isLink){\n\t\t\t\t\t\t\tif(!isLink&&card.name=='sha'){\n\t\t\t\t\t\t\t\tif(player._duanbingtmp) return;\n\t\t\t\t\t\t\t\tplayer._duanbingtmp=true;\n\t\t\t\t\t\t\t\tif(get.effect(target,card,player,player)<=0){\n\t\t\t\t\t\t\t\t\tdelete player._duanbingtmp;\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=target&&get.distance(player,current)<=1&&\n\t\t\t\t\t\t\t\t\tplayer.canUse(card,current)&&get.effect(current,card,player,player)>0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\tdelete player._duanbingtmp;\n\t\t\t\t\t\t\t\t\treturn [1,1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdelete player._duanbingtmp;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你使用【杀】选择目标后，你可以令一名距离为1的其他角色也成为此牌的目标。"},"wanwei":{"name":"挽危","script":"{trigger: {target: [\"rewriteGainResult\",\"rewriteDiscardResult\"],},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn event.player!=player;\n\t\t\t\t},audio: \"2\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar prompt='即将失去'+get.translation(trigger.result.cards)+'，是否发动【挽危】？';\n\t\t\t\t\tvar next=player.choosePlayerCard(player,prompt,trigger.position);\n\t\t\t\t\tnext.set('ai',function(button){\n\t\t\t\t\t\treturn 20-get.value(button.link);\n\t\t\t\t\t});\n\t\t\t\t\tnext.filterButton=trigger.filterButton;\n\t\t\t\t\tnext.selectButton=trigger.result.cards.length;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('wanwei');\n\t\t\t\t\t\ttrigger.result.cards=result.links.slice(0);\n\t\t\t\t\t\ttrigger.result.links=result.links.slice(0);\n\t\t\t\t\t\ttrigger.cards=result.links.slice(0);\n\t\t\t\t\t\ttrigger.untrigger();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你因被其他角色获得或弃置而失去牌时，你可以改为自己选择失去的牌。"},"yuejian":{"name":"约俭","script":"{trigger: {global: \"phaseDiscardBegin\",},audio: \"2\",filter: function (event,player){\n\t\t\t\t\treturn event.player.countUsed()<event.player.maxHp;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.player.addTempSkill('yuejian_num');\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,event.player)>0&&event.player.needsToDiscard();\n\t\t\t\t},subSkill: {num: {mod: {maxHandcard: function (player,num){\n\t\t\t\t\t\t\t\treturn num+player.maxHp;\n\t\t\t\t\t\t\t},},sub: \"true\",},},}","info":"一名角色的弃牌阶段开始时，若其本回合内使用过的牌数小于X，则你可以令其本回合的手牌上限+X。(X为其的体力上限)"},"gzjili":{"name":"蒺藜","script":"{mod: {aiOrder: function (player,card,num){\n\t\t\t\t\t\tif(player.isPhaseUsing()&&get.subtype(card)=='equip1'&&!get.cardtag(card,'gifts')){\n\t\t\t\t\t\t\tvar range0=player.getAttackRange();\n\t\t\t\t\t\t\tvar range=0;\n\t\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\t\tif(info&&info.distance&&info.distance.attackFrom){\n\t\t\t\t\t\t\t\trange-=info.distance.attackFrom;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(player.getEquip(1)){\n\t\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\t\tvar info=get.info(player.getEquip(1));\n\t\t\t\t\t\t\t\tif(info&&info.distance&&info.distance.attackFrom){\n\t\t\t\t\t\t\t\t\tnum-=info.distance.attackFrom;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\trange0-=num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trange0+=range;\n\t\t\t\t\t\t\tif(range0==(player.getHistory('useCard').length+player.getHistory('respond').length+2)&&player.countCards('h',function(cardx){\n\t\t\t\t\t\t\t\treturn get.subtype(cardx)!='equip1'&&player.getUseValue(cardx)>0;\n\t\t\t\t\t\t\t})) return num+10;\n\t\t\t\t\t\t}\n\t\t\t\t\t},},trigger: {player: [\"useCard\",\"respond\"],},frequent: \"true\",locked: \"false\",filter: function (event,player){\n\t\t\t\t\treturn player.getHistory('useCard').length+player.getHistory('respond').length==player.getAttackRange();\n\t\t\t\t},audio: \"2\",content: function (){\n\t\t\t\t\tplayer.draw(player.getHistory('useCard').length+player.getHistory('respond').length);\n\t\t\t\t},ai: {threaten: \"1.8\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\tif(player!=target||!player.isPhaseUsing()) return;\n\t\t\t\t\t\t\tif(get.subtype(card)=='equip1'&&!get.cardtag(card,'gifts')){\n\t\t\t\t\t\t\t\tvar range0=player.getAttackRange();\n\t\t\t\t\t\t\t\tvar range=0;\n\t\t\t\t\t\t\t\tvar info=get.info(card);\n\t\t\t\t\t\t\t\tif(info&&info.distance&&info.distance.attackFrom){\n\t\t\t\t\t\t\t\t\trange-=info.distance.attackFrom;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(player.getEquip(1)){\n\t\t\t\t\t\t\t\t\tvar num=0;\n\t\t\t\t\t\t\t\t\tvar info=get.info(player.getEquip(1));\n\t\t\t\t\t\t\t\t\tif(info&&info.distance&&info.distance.attackFrom){\n\t\t\t\t\t\t\t\t\t\tnum-=info.distance.attackFrom;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\trange0-=num;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\trange0+=range;\n\t\t\t\t\t\t\t\tvar delta=range0-(player.getHistory('useCard').length+player.getHistory('respond').length);\n\t\t\t\t\t\t\t\tif(delta<0) return;\n\t\t\t\t\t\t\t\tvar num=player.countCards('h',function(card){\n\t\t\t\t\t\t\t\t\treturn (get.cardtag(card,'gifts')||get.subtype(card)!='equip1')&&player.getUseValue(card)>0;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif(delta==2&&num>0) return [1,3];\n\t\t\t\t\t\t\t\tif(num>=delta) return 'zeroplayertarget';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你于一回合内使用或打出第X张牌时，你可以摸X张牌（X为你的攻击范围）。"},"xiongsuan":{"name":"凶算","script":"{limited: \"true\",enable: \"phaseUse\",filterCard: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h');\n\t\t\t\t},check: function (card){\n\t\t\t\t\treturn 7-get.value(card);\n\t\t\t\t},filterTarget: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('xiongsuan');\n\t\t\t\t\ttarget.damage('nocard');\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.draw(3);\n\t\t\t\t\tvar list=[];\n\t\t\t\t\tvar skills=target.getOriginalSkills();\n\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\tif(lib.skill[skills[i]].limited&&target.awakenedSkills.contains(skills[i])){\n\t\t\t\t\t\t\tlist.push(skills[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(list.length==1){\n\t\t\t\t\t\ttarget.storage.xiongsuan_restore=list[0];\n\t\t\t\t\t\ttarget.addTempSkill('xiongsuan_restore','phaseZhunbeiBegin');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\telse if(list.length>1){\n\t\t\t\t\t\tplayer.chooseControl(list).set('prompt','选择一个限定技在回合结束后重置之');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\ttarget.storage.xiongsuan_restore=result.control;\n\t\t\t\t\ttarget.addTempSkill('xiongsuan_restore','phaseZhunbeiBegin');\n\t\t\t\t},subSkill: {restore: {trigger: {global: \"phaseAfter\",},silent: \"true\",content: function (){\n\t\t\t\t\t\t\tplayer.restoreSkill(player.storage.xiongsuan_restore);\n\t\t\t\t\t\t},sub: \"true\",forced: \"true\",popup: \"false\",},},ai: {order: \"4\",damage: \"true\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hp>1){\n\t\t\t\t\t\t\t\tvar skills=target.getOriginalSkills();\n\t\t\t\t\t\t\t\tfor(var i=0;i<skills.length;i++){\n\t\t\t\t\t\t\t\t\tif(lib.skill[skills[i]].limited&&target.awakenedSkills.contains(skills[i])){\n\t\t\t\t\t\t\t\t\t\treturn 8;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(target!=player) return 0;\n\t\t\t\t\t\t\tif(get.damageEffect(target,player,player)>=0) return 10;\n\t\t\t\t\t\t\tif(target.hp>=4) return 5;\n\t\t\t\t\t\t\tif(target.hp==3){\n\t\t\t\t\t\t\t\tif(player.countCards('h')<=2&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current.hp<=1&&get.attitude(player,current)<0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn 3;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},},},mark: \"true\",intro: {content: \"limited\",},skillAnimation: \"true\",init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以弃置一张手牌并选择一名角色，对其造成1点伤害，然后你摸三张牌。若该角色有已发动的限定技，则你选择其中一个限定技。此回合结束后，视为该限定技未发动过。"},"diaodu":{"name":"调度","script":"{audio: \"2\",group: \"diaodu_use\",subfrequent: [\"use\"],subSkill: {use: {trigger: {player: \"useCard\",},audio: \"diaodu\",frequent: \"true\",prompt: \"是否发动【调度】摸一张牌？\",filter: function (event,player){\n\t\t\t\t\t\t\treturn get.type(event.card)=='equip'\n\t\t\t\t\t\t},content: function (){\n\t\t\t\t\t\t\tplayer.draw('nodelay');\n\t\t\t\t\t\t},ai: {reverseEquip: \"true\",effect: {target: function (card,player,target,current){\n\t\t\t\t\t\t\t\t\tif(player==target&&get.type(card)=='equip') return [1,3];\n\t\t\t\t\t\t\t\t},},},sub: \"true\",},},trigger: {player: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\treturn game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.countGainableCards(player,'e')>0;\n\t\t\t\t\t});\n\t\t\t\t},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('diaodu'),function(card,player,current){\n\t\t\t\t\t\treturn current!=player&&current.countGainableCards(player,'e')>0;\n\t\t\t\t\t}).ai=function(target){\n\t\t\t\t\t\tvar num=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(target.isDamaged()&&target.getEquip('baiyin')&&num>0) return 2*num\n\t\t\t\t\t\treturn -num;\n\t\t\t\t\t};\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.target1=result.targets[0];\n\t\t\t\t\t\tplayer.logSkill('diaodu',event.target1);\n\t\t\t\t\t\tplayer.line(event.target1,'diaodu');\n\t\t\t\t\t\tplayer.gainPlayerCard(event.target1,'e',true);\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tevent.card=result.cards[0];\n\t\t\t\t\t\tplayer.chooseTarget('是否将'+get.translation(event.card)+'交给一名其他角色？',function(card,player,current){\n\t\t\t\t\t\t\treturn current!=player&&current!=event.target1;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\ttarget.gain(card,player,'give');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你使用装备牌时，你可以摸一张牌；出牌阶段开始时，你可以获得一名其他角色装备区里的一张牌，然后你可以将此牌交给另一名角色。"},"diancai":{"name":"典财","script":"{audio: \"2\",trigger: {global: \"phaseUseEnd\",},filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase==player) return false;\n\t\t\t\t\tvar num=0;\n\t\t\t\t\tplayer.getHistory('lose',function(evt){\n\t\t\t\t\t\tif(evt.cards2&&evt.getParent('phaseUse')==event) num+=evt.cards2.length;\n\t\t\t\t\t});\n\t\t\t\t\treturn num>=player.hp;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar num=player.maxHp-player.countCards('h');\n\t\t\t\t\tif(num>0){\n\t\t\t\t\t\tplayer.draw(num);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"其他角色的出牌阶段结束时，若你于此阶段失去了X张或更多的牌，则你可以将手牌摸至体力上限。（X为你的体力值）"},"zhengbi":{"name":"征辟","script":"{trigger: {player: \"phaseUseBegin\",},filter: function (event,player){\n\t\t\t\t\t//if(event.player!=player) return false;\n\t\t\t\t\treturn game.hasPlayer(function(current){return current!=player&&current.isHealthy()})||player.countCards('h',{type:'basic'});\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar choices=[];\n\t\t\t\t\tif(game.hasPlayer(function(current){return current.isHealthy()})) choices.push('选择一名未受伤的角色');\n\t\t\t\t\tif(player.countCards('h',{type:'basic'})) choices.push('交给一名角色一张基本牌');\n\t\t\t\t\tplayer.chooseControl(choices,ui.create.dialog('征辟</br></br><div class=\"center text\">选择一项</div>','hidden')).set('ai',function(){\n\t\t\t\t\t\tif(choices.length>1){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.control=='选择一名未受伤的角色') player.chooseTarget('征辟</br></br><div class=\"center text\">选择一名未受伤的角色，你对其使用牌没有次数和距离限制直到回合结束</div>',function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&target.isHealthy();\n\t\t\t\t\t},true);\n\t\t\t\t\telse player.chooseCardTarget({\n\t\t\t\t\t\tprompt:'征辟</br></br><div class=\"center text\">交给一名其他角色一张基本牌，然后该角色交给你一张非基本牌或两张基本牌</div>',\n\t\t\t\t\t\tposition:'h',\n\t\t\t\t\t\tfilterCard:function(card){return get.type(card)=='basic'},\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai1:function(card){return 7-get.value(card)},\n\t\t\t\t\t\t//ai2:function(card,player,target){}\n\t\t\t\t\t}).set('forced',true);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\tplayer.line(result.targets,'green');\n\t\t\t\t\tif(result.cards.length){\n\t\t\t\t\t\tevent.cards=result.cards;\n\t\t\t\t\t\tresult.targets[0].gain(result.cards,player,'give');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.storage.zhengbi_eff1=result.targets[0];\n\t\t\t\t\t\tplayer.addTempSkill('zhengbi_eff1');\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tvar choices=[];\n\t\t\t\t\tif(target.countCards('he',{type:['trick','delay','equip']})) choices.push('一张非基本牌');\n\t\t\t\t\tif(target.countCards('h',{type:'basic'})>1) choices.push('两张基本牌');\n\t\t\t\t\tif(choices.length) target.chooseControl(choices,ui.create.dialog('征辟</br></br><div class=\"center text\">交给'+get.translation(player)+'</div>')).set('ai',function(event,player){\n\t\t\t\t\t\tif(choices.length>1){\n\t\t\t\t\t\t\tif(player.countCards('he',{type:['trick','delay','equip']},function(card){return get.value(card)<7})) return 0;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(target.countCards('h')){\n\t\t\t\t\t\t\tvar cards=target.getCards('h');\n\t\t\t\t\t\t\tplayer.gain(cards,target,'giveAuto');\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse event.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tvar check=(result.control=='一张非基本牌');\n\t\t\t\t\ttarget.chooseCard('he',(check?1:2),{type:(check?['trick','delay','equip']:'basic')},true);\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.cards){\n\t\t\t\t\t\tplayer.gain(result.cards,target,'giveAuto');\n\t\t\t\t\t}\n\t\t\t\t},subSkill: {eff1: {sub: \"true\",mod: {targetInRange: function (card,player,target){\n\t\t\t\t\t\t\t\tif(target==player.storage.zhengbi_eff1) return true;\n\t\t\t\t\t\t\t},cardUsableTarget: function (card,player,target){\n\t\t\t\t\t\t\t\tif(player.storage.zhengbi_eff1==target) return true;\n\t\t\t\t\t\t\t},},onremove: \"true\",},eff2: {sub: \"true\",},},}","info":"出牌阶段开始时，你可以选择一项：选择一名未受伤的其他角色，你对其使用的牌无距离限制且不计入使用次数直到回合结束；或将一张基本牌交给一名其他角色，然后其交给你一张非基本牌或两张基本牌。"},"fengying":{"name":"奉迎","script":"{limited: \"true\",enable: \"phaseUse\",position: \"h\",filterCard: \"true\",selectCard: \"-1\",filter: function (event,player){\n\t\t\t\t\treturn !player.storage.fengying&&player.countCards('h')>0;\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\treturn target==player;\n\t\t\t\t},selectTarget: \"-1\",discard: \"false\",lose: \"false\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.awakenSkill('fengying');\n\t\t\t\t\tplayer.storage.fengying=true;\n\t\t\t\t\tplayer.insertPhase();\n\t\t\t\t\tvar evt=_status.event.getParent('phaseUse');\n\t\t\t\t\tif(evt&&evt.name=='phaseUse'){\n\t\t\t\t\t\tevt.skipped=true;\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tvar cards=player.getCards('h');\n\t\t\t\t\tplayer.discard(cards);\n\t\t\t\t\tplayer.chooseTarget('请选择至多'+cards.length+'名角色，令这些角色将手牌摸至手牌上限。',[1,cards.length],function(card,player,target){\n\t\t\t\t\t\treturn target.countCards('h')<Math.min(target.maxHp,5);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>2){\n\t\t\t\t\t\t\treturn Math.min(5,target.maxHp)-target.countCards('h');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn att/3;\n\t\t\t\t\t});\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar list=result.targets;\n\t\t\t\t\t\tlist.sort(lib.sort.seat);\n\t\t\t\t\t\tplayer.line(list,'thunder');\n\t\t\t\t\t\tgame.asyncDraw(list,function(current){\n\t\t\t\t\t\t\treturn current.maxHp-current.countCards('h');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},skillAnimation: \"epic\",animationColor: \"gray\",ai: {order: \"0.1\",result: {player: \"0\",},},mark: \"true\",intro: {content: \"limited\",},init: function (player,skill){\n\t\t\t\t\tplayer.storage[skill]=false;\n\t\t\t\t},}","info":"限定技，出牌阶段，你可以弃置所有手牌。若如此做，你可以令等量的角色将手牌摸至X张(X为其体力上限且至多为5)。然后，你结束出牌阶段，并在当前回合结束后进行一个新的回合。"},"shuangren":{"name":"双刃","script":"{trigger: {player: \"phaseUseBegin\",},direct: \"true\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar goon;\n\t\t\t\t\tif(player.needsToDiscard()>1){\n\t\t\t\t\t\tgoon=player.hasCard(function(card){\n\t\t\t\t\t\t\treturn card.number>10&&get.value(card)<=5;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tgoon=player.hasCard(function(card){\n\t\t\t\t\t\t\treturn (card.number>=9&&get.value(card)<=5)||get.value(card)<=3;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('shuangren'),function(card,player,target){\n\t\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\tif(_status.event.goon&&get.attitude(player,target)<0){\n\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}).set('goon',goon);\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tevent.target=target;\n\t\t\t\t\t\tplayer.logSkill('shuangren',target);\n\t\t\t\t\t\tplayer.chooseToCompare(target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=event.target;\n\t\t\t\t\t\tif(target.identity!='ye'&&target.identity!='unknown'&&game.hasPlayer(function(current){\n\t\t\t\t\t\t\tif(!player.canUse('sha',current,false)) return false;\n\t\t\t\t\t\t\tif(target==current) return false;\n\t\t\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\t\t\treturn target.identity==current.identity;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t})){\n\t\t\t\t\t\t\tvar str='对一名';\n\t\t\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\t\t\tstr+=get.translation(target.identity)+'势力的';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplayer.chooseTarget(str+'角色使用一张杀',true,function(card,player,target){\n\t\t\t\t\t\t\t\tif(!player.canUse('sha',target,false)) return false;\n\t\t\t\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\t\t\t\treturn target.identity==_status.event.identity;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\treturn get.effect(target,{name:'sha'},player,player);\n\t\t\t\t\t\t\t}).set('identity',target.identity);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tplayer.useCard({name:'sha',isCard:true},target,false);\n\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool&&result.targets&&result.targets.length){\n\t\t\t\t\t\tplayer.useCard({name:'sha',isCard:true},result.targets[0],false);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段开始时，你可以与一名角色拼点。若你赢，你视为对任意一名角色使用一张【杀】（不计入出牌阶段的次数限制）；若你没赢，你结束出牌阶段。"},"rehengjiang":{"name":"横江","script":"{audio: \"hengjiang\",trigger: {player: \"damageEnd\",},check: function (event,player){\n\t\t\t\t\treturn get.attitude(player,_status.currentPhase)<0||!_status.currentPhase.needsToDiscard(2);\n\t\t\t\t},filter: function (event){\n\t\t\t\t\treturn _status.currentPhase&&_status.currentPhase.isIn()&&event.num>0;\n\t\t\t\t},logTarget: function (){\n\t\t\t\t\treturn _status.currentPhase;\n\t\t\t\t},content: function (){\n\t\t\t\t\t\"step 0\"\n\t\t\t\t\tevent.count=trigger.num;\n\t\t\t\t\t\"step 1\"\n\t\t\t\t\tevent.count--;\n\t\t\t\t\tvar source=_status.currentPhase;\n\t\t\t\t\tif(source.hasSkill('rehengjiang2')){\n\t\t\t\t\t\tsource.storage.rehengjiang2++;\n\t\t\t\t\t\tsource.storage.rehengjiang3.push(player);\n\t\t\t\t\t\tsource.storage.rehengjiang3.sortBySeat(source);\n\t\t\t\t\t\tsource.updateMarks();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tsource.storage.rehengjiang3=[player];\n\t\t\t\t\t\tsource.storage.rehengjiang2=1;\n\t\t\t\t\t\tsource.addTempSkill('rehengjiang2');\n\t\t\t\t\t}\n\t\t\t\t\t\"step 2\"\n\t\t\t\t\tif(event.count){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('rehengjiang',_status.currentPhase)).set('ai',function(){\n\t\t\t\t\t\t\treturn lib.skill.rehengjiang.check(_status.event.getTrigger(),_status.event.player);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t\"step 3\"\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('rehengjiang',_status.currentPhase);\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie_defend: \"true\",notemp: \"true\",},}","info":"当你受到1点伤害后，你可以令当前回合角色本回合的手牌上限-1。然后若其弃牌阶段内没有弃牌，则你摸X张牌（X为你本回合内对其发动过〖横江〗的次数）。"},"chuanxin":{"name":"穿心","script":"{audio: \"2\",trigger: {source: \"damageBegin2\",},filter: function (event,player){\n\t\t\t\t\tif(_status.currentPhase!=player) return false;\n\t\t\t\t\tif(!_status.event.getParent('phaseUse')) return false;\n\t\t\t\t\tif(event.card&&(event.card.name=='sha'||event.card.name=='juedou')&&event.getParent().name==event.card.name){\n\t\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\t\treturn (event.player.identity!='qun'||player.identity=='ye')&&\n\t\t\t\t\t\t\t!event.player.isUnseen()&&event.player.hasViceCharacter();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar info=lib.character[event.player.name];\n\t\t\t\t\t\t\tif(!info) return false;\n\t\t\t\t\t\t\tvar skills=event.player.getSkills();\n\t\t\t\t\t\t\tfor(var i=0;i<info[3].length;i++){\n\t\t\t\t\t\t\t\tif(lib.skill[info[3][i]].fixed) continue;\n\t\t\t\t\t\t\t\tif(skills.contains(info[3][i])) return true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},logTarget: \"player\",check: function (event,player){\n\t\t\t\t\tif(get.mode()=='guozhan'){\n\t\t\t\t\t\tif(!event.player.isUnseen(1)&&get.guozhanRank(event.player.name2,event.player)<4) return false;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.player.hasSkill('subplayer')) return false;\n\t\t\t\t\tif(get.attitude(player,event.player)<0){\n\t\t\t\t\t\tif(event.player.hp==1&&event.player.countCards('e')<2&&event.player.name2!='gz_pangtong') return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttrigger.cancel();\n\t\t\t\t\tif(trigger.player.countCards('e')){\n\t\t\t\t\t\ttrigger.player.chooseControl(function(event,player){\n\t\t\t\t\t\t\tif(get.mode()=='guozhan'&&get.guozhanRank(player.name2,player)<4) return 1;\n\t\t\t\t\t\t\tif(player.hp==1) return 1;\n\t\t\t\t\t\t\tif(player.hp==2&&player.countCards('e')>=2) return 1;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}).set('choiceList',['弃置装备区内的所有牌并失去一点体力',get.mode()=='guozhan'?'移除副将牌':'随机移除武将牌上的一个技能']);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent._result={index:1};\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.index==1){\n\t\t\t\t\t\tif(get.mode()!='guozhan'){\n\t\t\t\t\t\t\tvar info=lib.character[trigger.player.name];\n\t\t\t\t\t\t\tvar skills=trigger.player.getSkills();\n\t\t\t\t\t\t\tvar list=[];\n\t\t\t\t\t\t\tfor(var i=0;i<info[3].length;i++){\n\t\t\t\t\t\t\t\tif(lib.skill[info[3][i]].fixed) continue;\n\t\t\t\t\t\t\t\tif(skills.contains(info[3][i])){\n\t\t\t\t\t\t\t\t\tlist.push(info[3][i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(list.length){\n\t\t\t\t\t\t\t\tvar skill=list.randomGet();\n\t\t\t\t\t\t\t\ttrigger.player.popup(skill);\n\t\t\t\t\t\t\t\ttrigger.player.disableSkill('chuanxin_disable',skill,true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\ttrigger.player.removeCharacter(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttrigger.player.discard(trigger.player.getCards('e'));\n\t\t\t\t\t\ttrigger.player.loseHp();\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你于出牌阶段内使用【杀】或【决斗】对目标角色造成伤害时，你可以防止此伤害。若如此做，该角色选择一项：1.弃置装备区里的所有牌，若如此做，其失去1点体力；2.随机移除主武将牌上的一个技能。"},"zfengshi":{"name":"锋矢","script":"{audio: \"2\",trigger: {player: \"useCardToPlayered\",},filter: function (event,player){\n\t\t\t\t\treturn event.card.name=='sha'&&event.target.countCards('e');\n\t\t\t\t},logTarget: \"target\",check: function (event,player){\n\t\t\t\t\tif(event.target.hasSkillTag('noe')) return false;\n\t\t\t\t\treturn get.attitude(player,event.target)<0;\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.target.chooseToDiscard('e',true);\n\t\t\t\t},}","info":"当你使用【杀】指定目标后，你可以令目标弃置装备区内的一张牌。"},"zhuoshui":{"name":"祸水","script":"{audio: \"huoshui\",trigger: {player: \"phaseZhunbeiBegin\",},forced: \"true\",content: function (){\n\t\t\t\t\tgame.countPlayer(function(current){\n\t\t\t\t\t\tif(current!=player&&!current.hasSkill('fengyin')){\n\t\t\t\t\t\t\tplayer.line(current,'green');\n\t\t\t\t\t\t\tcurrent.addTempSkill('fengyin');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},}","info":"锁定技，准备阶段，你令所有其他角色的非锁定技失效直到回合结束。"},"zqingcheng":{"name":"倾城","script":"{audio: \"qingcheng\",enable: \"phaseUse\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('he',{type:'equip'});\n\t\t\t\t},filterCard: {type: \"equip\",},position: \"he\",filterTarget: function (card,player,target){\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},check: function (card){\n\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn get.attitude(player,current)>2&&current.isTurnedOver();\n\t\t\t\t\t})){\n\t\t\t\t\t\treturn 10-get.value(card,player);\n\t\t\t\t\t}\n\t\t\t\t\treturn 6-get.value(card,player);\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\ttarget.turnOver();\n\t\t\t\t\t'step 1'\n\t\t\t\t\ttarget.draw(2);\n\t\t\t\t},ai: {order: \"8\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(target.hasSkillTag('noturn')) return 0;\n\t\t\t\t\t\t\tif(target.isTurnedOver()) return 2;\n\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t},},},}","info":"出牌阶段，你可以弃置一张装备牌，然后令一名角色翻面并摸两张牌。"},"xinlianji":{"name":"连计","script":"{enable: \"phaseUse\",audio: \"wylianji\",usable: \"1\",check: function (card){\n\t\t\t\t\treturn 5-get.value(card);\n\t\t\t\t},filterTarget: function (card,player,target){\n\t\t\t\t\tif(ui.selected.targets.length) return true;\n\t\t\t\t\treturn target!=player;\n\t\t\t\t},filterCard: \"true\",selectTarget: \"2\",multitarget: \"true\",targetprompt: [\"打人\",\"被打\"],content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.addMark('xinlianji',1,false);\n\t\t\t\t\tvar card=get.cardPile2(function(card){\n\t\t\t\t\t\treturn get.subtype(card)=='equip1'&&targets[0].hasUseTarget(card);\n\t\t\t\t\t});\n\t\t\t\t\tif(card){\n\t\t\t\t\t\tif(card.name=='qinggang'&&!lib.inpile.contains('qibaodao')){\n\t\t\t\t\t\t\tcard.remove();\n\t\t\t\t\t\t\tcard=game.createCard('qibaodao',card.suit,card.number);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttargets[0].chooseUseTarget(card,true,'nopopup','nothrow');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tplayer.chat('没有装备牌了吗');\n\t\t\t\t\t\tgame.log('但是牌堆里已经没有装备牌了！');\n\t\t\t\t\t}\n\t\t\t\t\t'step 1'\n\t\t\t\t\tgame.updateRoundNumber();\n\t\t\t\t\ttargets[0].chooseToUse('对'+get.translation(targets[1])+'使用一张杀，或将装备区里的武器牌交给一名其他角色',\n\t\t\t\t\t\t\t{name:'sha'}).set('targetRequired',true).set('complexSelect',true).set('filterTarget',function(card,player,target){\n\t\t\t\t\t\tif(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;\n\t\t\t\t\t\treturn lib.filter.filterTarget.apply(this,arguments);\n\t\t\t\t\t}).set('sourcex',targets[1]).set('addCount',false);\n\t\t\t\t\t'step 2'\n\t\t\t\t\tvar card=targets[0].getEquip(1);\n\t\t\t\t\tif(!result.bool&&card){\n\t\t\t\t\t\tevent.card=card;\n\t\t\t\t\t\tplayer.chooseTarget(true,'将'+get.translation(card)+'交给一名其他角色').set('ai',function(target){\n\t\t\t\t\t\t\tvar card=_status.event.getParent().card;\n\t\t\t\t\t\t\treturn (target.hasSkillTag('nogain')?0:get.attitude(_status.event.player,target))*Math.max(0.1,target.getUseValue(card));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse event.finish();\n\t\t\t\t\t'step 3'\n\t\t\t\t\tresult.targets[0].gain(card,targets[0],'give');\n\t\t\t\t},ai: {order: \"4\",result: {target: function (player,target){\n\t\t\t\t\t\t\tif(ui.selected.targets.length){\n\t\t\t\t\t\t\t\tvar pretarget=ui.selected.targets[0];\n\t\t\t\t\t\t\t\tif(pretarget.hasSha()&&pretarget.canUse({name:'sha'},target)) return get.effect(target,{name:'sha'},pretarget,target);\n\t\t\t\t\t\t\t\treturn Math.random();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!target.getEquip(1)){\n\t\t\t\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn current!=target&&!current.hasSkillTag('nogain')&&get.attitude(current,target)>0;\n\t\t\t\t\t\t\t\t})) return 3;\n\t\t\t\t\t\t\t\treturn -3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current!=target&&!current.hasSkillTag('nogain')&&get.attitude(current,target)>0;\n\t\t\t\t\t\t\t})) return -6;\n\t\t\t\t\t\t\treturn 4-get.value(target.getEquip(1));\n\t\t\t\t\t\t},},},}","info":"出牌阶段限一次，你可以弃置一张手牌，令一名角色使用牌堆中的一张随机武器牌。然后其选择一项：对你指定的一名角色使用一张【杀】，或令你将其装备区里的武器牌交给任意角色。"},"xinmoucheng":{"name":"谋逞","script":"{trigger: {player: \"phaseZhunbeiBegin\",},audio: \"moucheng\",forced: \"true\",juexingji: \"true\",skillAnimation: \"true\",animationColor: \"gray\",derivation: \"xinjingong\",unique: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countMark('xinlianji')>2;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.awakenSkill('xinmoucheng');\n\t\t\t\t\tplayer.addSkill('xinjingong');\n\t\t\t\t\tplayer.removeSkill('xinlianji');\n\t\t\t\t},}","info":"觉醒技，准备阶段，若你已经发动了3次以上的〖连计〗，则你失去〖连计〗并获得〖矜功〗。"},"qianya":{"name":"谦雅","script":"{audio: \"2\",trigger: {target: \"useCardToTargeted\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn get.type(event.card,'trick')=='trick'&&player.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tvar nh=player.countCards('h');\n\t\t\t\t\tplayer.chooseCardTarget({\n\t\t\t\t\t\tfilterCard:true,\n\t\t\t\t\t\tfilterTarget:function(card,player,target){\n\t\t\t\t\t\t\treturn target!=player;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tselectCard:[1,nh],\n\t\t\t\t\t\tai1:function(card){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar cardname=_status.event.cardname;\n\t\t\t\t\t\t\tif(_status.event.du) return -get.value(card,player,'raw');\n\t\t\t\t\t\t\telse if(_status.event.shuimeng){\n\t\t\t\t\t\t\t\tif(cardname=='wuzhong'){\n\t\t\t\t\t\t\t\t\tif(player.needsToDiscard(2-ui.selected.cards.length)){\n\t\t\t\t\t\t\t\t\t\treturn 10-get.value(card,player,'raw');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(cardname=='guohe'){\n\t\t\t\t\t\t\t\t\tif(player.needsToDiscard(-1-ui.selected.cards.length)){\n\t\t\t\t\t\t\t\t\t\treturn 10-get.value(card,player,'raw');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(cardname=='lebu'){\n\t\t\t\t\t\t\t\tif(player.needsToDiscard(1-ui.selected.cards.length)){\n\t\t\t\t\t\t\t\t\treturn 8-get.value(card,player,'raw');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(!ui.selected.cards.length){\n\t\t\t\t\t\t\t\t\t\treturn 6-get.value(card,player,'raw');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(cardname=='shunshou'){\n\t\t\t\t\t\t\t\tif(_status.event.nh<=2) return get.value(card,player,'raw');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(cardname=='huogong'){\n\t\t\t\t\t\t\t\tif(player.hp==1) return get.value(card,player,'raw');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(ui.selected.cards.length) return 0;\n\t\t\t\t\t\t\treturn 7-get.value(card,player,'raw');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tai2:function(target){\n\t\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\tvar nh2=target.countCards('h');\n\t\t\t\t\t\t\tvar num=Math.sqrt(1+nh2);\n\t\t\t\t\t\t\tvar cardname=_status.event.cardname;\n\t\t\t\t\t\t\tif(_status.event.du) return 0.5-att;\n\t\t\t\t\t\t\telse if(_status.event.shuimeng){\n\t\t\t\t\t\t\t\treturn att/num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(cardname=='lebu'){\n\t\t\t\t\t\t\t\treturn att/num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(cardname=='shunshou'){\n\t\t\t\t\t\t\t\tif(_status.event.nh<=2) return att/num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(cardname=='huogong'){\n\t\t\t\t\t\t\t\tif(_status.event.player.hp==1) return att/num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(_status.event.nh>nh2+1){\n\t\t\t\t\t\t\t\treturn att/num;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdu:player.hasCard(function(card){\n\t\t\t\t\t\t\treturn get.value(card,player,'raw')<0;\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tshuimeng:trigger.getParent(2).name=='shuimeng',\n\t\t\t\t\t\tnh:nh,\n\t\t\t\t\t\tcardname:trigger.card.name,\n\t\t\t\t\t\tprompt:get.prompt2('qianya')\n\t\t\t\t\t});\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('qianya',result.targets);\n\t\t\t\t\t\tplayer.give(result.cards,result.targets[0]);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"当你成为锦囊牌的目标后，你可以将任意张手牌交给一名其他角色。"},"shuimeng":{"name":"说盟","script":"{audio: \"true\",trigger: {player: \"phaseUseAfter\",},direct: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.countCards('h');\n\t\t\t\t},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget(get.prompt2('shuimeng'),function(card,player,target){\n\t\t\t\t\t\treturn player.canCompare(target);\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tif(!_status.event.goon) return 0;\n\t\t\t\t\t\treturn -get.attitude(_status.event.player,target);\n\t\t\t\t\t}).set('goon',player.needsToDiscard()||player.hasCard(function(card){\n\t\t\t\t\t\tvar val=get.value(card);\n\t\t\t\t\t\tif(val<0) return true;\n\t\t\t\t\t\tif(val<=5){\n\t\t\t\t\t\t\treturn card.number>=11;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(val<=6){\n\t\t\t\t\t\t\treturn card.number>=12;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}));\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('shuimeng',result.targets);\n\t\t\t\t\t\tevent.target=result.targets[0];\n\t\t\t\t\t\tplayer.chooseToCompare(event.target);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 2'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.chooseUseTarget({name:'wuzhong',isCard:true},true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.target.useCard({name:'guohe',isCard:true},player);\n\t\t\t\t\t}\n\t\t\t\t},}","info":"出牌阶段结束时，你可以与一名角色拼点，若你赢，视为你使用【无中生有】；若你没赢，视为其对你使用【过河拆桥】。"},"tiandu":{"name":"天妒","script":"{audio: \"2\",audioname: [\"re_guojia\",\"xizhicai\",\"gz_nagisa\"],trigger: {player: \"judgeEnd\",},frequent: function (event){\n\t\t\t\t\tif(event.result.card.name=='du') return false;\n\t\t\t\t\t//if(get.mode()=='guozhan') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},check: function (event){\n\t\t\t\t\tif(event.result.card.name=='du') return false;\n\t\t\t\t\treturn true;\n\t\t\t\t},filter: function (event,player){\n\t\t\t\t\treturn get.position(event.result.card,true)=='o';\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.gain(trigger.result.card,'gain2');\n\t\t\t\t},}","info":"当你的判定牌生效后，你可以获得之。"},"xianfu":{"name":"先辅","script":"{trigger: {global: \"gameDrawAfter\",player: \"enterGame\",},forced: \"true\",filter: function (){\n\t\t\t\t\treturn game.players.length>1;\n\t\t\t\t},audio: \"6\",content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tplayer.chooseTarget('请选择【先辅】的目标',lib.translate.xianfu_info,true,function(card,player,target){\n\t\t\t\t\t\treturn target!=player&&(!player.storage.xianfu2||!player.storage.xianfu2.contains(target));\n\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\tvar att=get.attitude(_status.event.player,target);\n\t\t\t\t\t\tif(att>0) return att+1;\n\t\t\t\t\t\tif(att==0) return Math.random();\n\t\t\t\t\t\treturn att;\n\t\t\t\t\t}).animate=false;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tif(!player.storage.xianfu2) player.storage.xianfu2=[];\n\t\t\t\t\t\tplayer.storage.xianfu2.push(target);\n\t\t\t\t\t\tplayer.addSkill('xianfu2');\n\t\t\t\t\t}\n\t\t\t\t},}","info":"锁定技，游戏开始时，你选择一名其他角色，当其受到伤害后，你受到等量的伤害，当其回复体力后，你回复等量的体力。"},"chouce":{"name":"筹策","script":"{trigger: {player: \"damageEnd\",},content: function (){\n\t\t\t\t\t'step 0'\n\t\t\t\t\tevent.num=trigger.num;\n\t\t\t\t\t'step 1'\n\t\t\t\t\tplayer.judge();\n\t\t\t\t\t'step 2'\n\t\t\t\t\tevent.color=result.color;\n\t\t\t\t\tif(event.color=='black'){\n\t\t\t\t\t\tplayer.chooseTarget('弃置一名角色区域内的一张牌',function(card,player,target){\n\t\t\t\t\t\t\treturn target.countCards('hej');\n\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target);\n\t\t\t\t\t\t\tif(att<0){\n\t\t\t\t\t\t\t\tatt=-Math.sqrt(-att);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tatt=Math.sqrt(att);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn att*lib.card.guohe.ai.result.target(player,target);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar next=player.chooseTarget('令一名角色摸一张牌');\n\t\t\t\t\t\tif(player.storage.xianfu2&&player.storage.xianfu2.length){\n\t\t\t\t\t\t\tnext.set('prompt2','（若目标为'+get.translation(player.storage.xianfu2)+'则改为摸两张牌）');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnext.set('ai',function(target){\n\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\tvar att=get.attitude(player,target)/Math.sqrt(1+target.countCards('h'));\n\t\t\t\t\t\t\tif(target.hasSkillTag('nogain')) att/=10;\n\t\t\t\t\t\t\tif(player.storage.xianfu2&&player.storage.xianfu2.contains(target)) return att*2;\n\t\t\t\t\t\t\treturn att;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t'step 3'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\tif(event.color=='black'){\n\t\t\t\t\t\t\tplayer.discardPlayerCard(target,'hej',true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(player.storage.xianfu2&&player.storage.xianfu2.contains(target)){\n\t\t\t\t\t\t\t\tif(!target.storage.xianfu_mark) target.storage.xianfu_mark=[];\n\t\t\t\t\t\t\t\ttarget.storage.xianfu_mark.add(player);\n\t\t\t\t\t\t\t\ttarget.storage.xianfu_mark.sortBySeat();\n\t\t\t\t\t\t\t\ttarget.markSkill('xianfu_mark');\n\t\t\t\t\t\t\t\ttarget.draw(2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\ttarget.draw();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t'step 4'\n\t\t\t\t\tif(--event.num>0){\n\t\t\t\t\t\tplayer.chooseBool(get.prompt2('chouce'));\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t}\n\t\t\t\t\t'step 5'\n\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\tplayer.logSkill('chouce');\n\t\t\t\t\t\tevent.goto(1);\n\t\t\t\t\t}\n\t\t\t\t},ai: {maixie: \"true\",maixie_hp: \"true\",effect: {target: function (card,player,target){\n\t\t\t\t\t\t\tif(get.tag(card,'damage')){\n\t\t\t\t\t\t\t\tif(player.hasSkillTag('jueqing',false,target)) return [1,-2];\n\t\t\t\t\t\t\t\tif(!target.hasFriend()) return;\n\t\t\t\t\t\t\t\tif(target.hp>=4) return [1,get.tag(card,'damage')*1.5];\n\t\t\t\t\t\t\t\tif(target.hp==3) return [1,get.tag(card,'damage')*1];\n\t\t\t\t\t\t\t\tif(target.hp==2) return [1,get.tag(card,'damage')*0.5];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},},},}","info":"当你受到1点伤害后，你可以判定，若结果为：黑色，你弃置一名角色区域里的一张牌；红色，你选择一名角色，其摸一张牌，若其是〖先辅〗选择的角色，改为其摸两张牌。"},"fuqi":{"name":"伏骑","script":"{audio: \"2\",forced: \"true\",trigger: {player: \"useCard\",},filter: function (event,player){\n\t\t\t\t\treturn event.card&&(get.type(event.card)=='trick'||get.type(event.card)=='basic'&&!['shan','tao','jiu','du'].contains(event.card.name))&&game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&get.distance(current,player)<=1;\n\t\t\t\t\t});\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.directHit.addArray(game.filterPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&get.distance(current,player)<=1;\n\t\t\t\t\t}));\n\t\t\t\t},ai: {directHit_ai: \"true\",skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\treturn get.distance(arg.target,player)<=1;\n\t\t\t\t\t},},}","info":"锁定技，当你使用牌时，你令所有与你距离为1的其他角色不能使用或打出牌响应此牌。"},"jiaozi":{"name":"骄恣","script":"{audio: \"2\",trigger: {player: \"damageBegin3\",source: \"damageBegin1\",},forced: \"true\",filter: function (event,player){\n\t\t\t\t\treturn player.isMaxHandcard(true);\n\t\t\t\t},content: function (){\n\t\t\t\t\ttrigger.num++;\n\t\t\t\t},ai: {presha: \"true\",},}","info":"锁定技，若你的手牌数为全场唯一最多，则当你造成或受到伤害时，此伤害+1。"},"qingzhongx":{"name":"清忠","script":"{audio: \"weijing\",trigger: {player: \"phaseUseBegin\",},check: function (event,player){\n\t\t\t\t\tif(game.hasPlayer(function(current){\n\t\t\t\t\t\treturn current!=player&&current.isMinHandcard()&&get.attitude(player,current)>0;\n\t\t\t\t\t})){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif(player.countCards('h')<=2) return true;\n\t\t\t\t\t// if(player.countCards('h')<=3&&!player.countCards('h','shan')) return true;\n\t\t\t\t\t//if(player.countCards('h',{type:'basic'})<=1) return true;\n\t\t\t\t\treturn false;\n\t\t\t\t},content: function (){\n\t\t\t\t\tplayer.draw(2);\n\t\t\t\t\tplayer.addTempSkill('qingzhongx_give');\n\t\t\t\t},subSkill: {give: {trigger: {player: \"phaseUseEnd\",},filter: function (event,player){\n\t\t\t\t\t\t\treturn !player.isMinHandcard(true);\n\t\t\t\t\t\t},audio: \"weijing\",forced: \"true\",content: function (){\n\t\t\t\t\t\t\t'step 0'\n\t\t\t\t\t\t\tvar list=game.filterPlayer(function(current){\n\t\t\t\t\t\t\t\treturn current.isMinHandcard();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif(list.length==1){\n\t\t\t\t\t\t\t\tif(list[0]!=player){\n\t\t\t\t\t\t\t\t\tplayer.line(list[0],'green');\n\t\t\t\t\t\t\t\t\tplayer.swapHandcards(list[0]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tevent.finish();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tplayer.chooseTarget(true,'清忠：选择一名手牌最少的角色与其交换手牌',function(card,player,target){\n\t\t\t\t\t\t\t\t\treturn target.isMinHandcard();\n\t\t\t\t\t\t\t\t}).set('ai',function(target){\n\t\t\t\t\t\t\t\t\treturn get.attitude(_status.event.player,target);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t'step 1'\n\t\t\t\t\t\t\tif(result.bool){\n\t\t\t\t\t\t\t\tvar target=result.targets[0];\n\t\t\t\t\t\t\t\tif(target!=player){\n\t\t\t\t\t\t\t\t\tplayer.line(target,'green');\n\t\t\t\t\t\t\t\t\tplayer.swapHandcards(target);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sub: \"true\",},},}","info":"出牌阶段开始时，你可以摸两张牌，若如此做，此阶段结束时，你与手牌数最少的角色交换手牌。"},"weijing":{"name":"卫境","script":"{audio: \"2\",group: [\"weijing_sha\",\"weijing_shan\"],subSkill: {sha: {audio: \"qingzhong\",enable: \"chooseToUse\",viewAs: {name: \"sha\",isCard: \"true\",},filterCard: function (){return false},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(player.hasSkill('weijing_disable')) return false;\n\t\t\t\t\t\t},selectCard: \"-1\",mark: \"false\",precontent: function (){\n\t\t\t\t\t\t\tplayer.addTempSkill('weijing_disable','roundStart');\n\t\t\t\t\t\t},prompt: \"视为使用一张杀\",ai: {order: function (){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(!player.hasShan()&&!game.hasPlayer(function(current){\n\t\t\t\t\t\t\t\t\treturn player.canUse('sha',current)&&current.hp==1&&get.effect(current,{name:'sha'},player,player)>0;\n\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn 2.95;\n\t\t\t\t\t\t\t},skillTagFilter: function (player,tag,arg){\n\t\t\t\t\t\t\t\tif(player.hasSkill('weijing_disable')) return false;\n\t\t\t\t\t\t\t\tif(arg!='use') return false;\n\t\t\t\t\t\t\t},respondSha: \"true\",canLink: function (player,target,card){\n\t\t\t\t\t\tif(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;\n\t\t\t\t\t\tif(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t},true)) return false;\n\t\t\t\t\t\tif(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},basic: {useful: [5,1],value: [5,1],},result: {target: function (player,target,card,isLink){\n\t\t\t\t\t\t\tvar eff=function(){\n\t\t\t\t\t\t\t\tif(!isLink&&player.hasSkill('jiu')){\n\t\t\t\t\t\t\t\t\tif(!target.hasSkillTag('filterDamage',null,{\n\t\t\t\t\t\t\t\t\t\tplayer:player,\n\t\t\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t\t\t\tjiu:true,\n\t\t\t\t\t\t\t\t\t})){\n\t\t\t\t\t\t\t\t\t\tif(get.attitude(player,target)>0){\n\t\t\t\t\t\t\t\t\t\t\treturn -7;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\treturn -4;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn -0.5;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn -1.5;\n\t\t\t\t\t\t\t}();\n\t\t\t\t\t\t\tif(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{\n\t\t\t\t\t\t\t\ttarget:target,\n\t\t\t\t\t\t\t\tcard:card,\n\t\t\t\t\t\t\t},true)) return eff/1.2;\n\t\t\t\t\t\t\treturn eff;\n\t\t\t\t\t\t},},tag: {respond: \"1\",respondShan: \"1\",damage: function (card){\n\t\t\t\t\t\t\tif(card.nature=='poison') return;\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},natureDamage: function (card){\n\t\t\t\t\t\t\tif(card.nature) return 1;\n\t\t\t\t\t\t},fireDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='fire') return 1;\n\t\t\t\t\t\t},thunderDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='thunder') return 1;\n\t\t\t\t\t\t},poisonDamage: function (card,nature){\n\t\t\t\t\t\t\tif(card.nature=='poison') return 1;\n\t\t\t\t\t\t},},},sub: \"true\",},shan: {audio: \"qingzhong\",enable: \"chooseToUse\",viewAs: {name: \"shan\",isCard: \"true\",},mark: \"false\",filterCard: function (){return false},viewAsFilter: function (player){\n\t\t\t\t\t\t\tif(player.hasSkill('weijing_disable')) return false;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t},onuse: function (event,player){\n\t\t\t\t\t\t\tplayer.addTempSkill('weijing_disable','roundStart');\n\t\t\t\t\t\t},selectCard: \"-1\",prompt: \"视为使用一张闪\",ai: {order: function (){\n\t\t\t\t\t\t\t\tvar player=_status.event.player;\n\t\t\t\t\t\t\t\tif(player.hasSkill('qingzhongx_give')) return 2.95;\n\t\t\t\t\t\t\t\treturn 3.15;\n\t\t\t\t\t\t\t},skillTagFilter: function (player){\n\t\t\t\t\t\t\t\tif(player.hasSkill('weijing_disable')) return false;\n\t\t\t\t\t\t\t},respondShan: \"true\",basic: {useful: [7,2],value: [7,2],},result: {player: \"1\",},},sub: \"true\",},disable: {mark: \"true\",intro: {content: \"本轮已发动\",},sub: \"true\",},},}","info":"每轮限一次，当你需要使用【杀】或【闪】时，你可以视为使用一张【杀】或【闪】。"}},"card":{},"hero":{"luyusheng":{"name":"陆郁生","attr":["female","wu",3,["zhente","zhiwei"],[]]},"ol_xinxianying":{"name":"辛宪英","attr":["female","wei",3,["xincaishi","xinzhongjian"],[]]},"huaxin":{"name":"华歆","attr":["male","wei",3,["wanggui","xibing"],[]]},"wolongfengchu":{"name":"卧龙凤雏","attr":["male","shu",4,["youlong","luanfeng"],[]]},"sp_zhangliao":{"name":"SP张辽","attr":["male","qun",4,["mubing","ziqu","diaoling"],[]]},"caoshuang":{"name":"曹爽","attr":["male","wei",4,["retuogu","shanzhuan"],[]]},"ol_zhangchangpu":{"name":"OL张昌蒲","attr":["female","wei",3,["yanjiao","olxingshen"],[]]},"zhangling":{"name":"张陵","attr":["male","qun",3,["zlhuji","zlshoufu"],[]]},"caiyang":{"name":"蔡阳","attr":["male","qun",1,["yinka"],["forbidai","unseen"]]},"panfeng":{"name":"OL潘凤","attr":["male","qun",4,["kuangfu"],[]]},"sunshao":{"name":"孙邵","attr":["male","wu",3,["bizheng","yidian"],[]]},"sp_gongsunzan":{"name":"SP公孙瓒","attr":["male","qun",4,["spyicong","sptuji"],[]]},"sp_simazhao":{"name":"SP司马昭","attr":["male","wei",3,["spzhaoxin","splanggu"],[]]},"sp_wangyuanji":{"name":"SP王元姬","attr":["female","wei",3,["spfuluan","spshude"],[]]},"sp_xinxianying":{"name":"SP辛宪英","attr":["female","wei",3,["spmingjian","spyinzhi"],[]]},"sp_liuxie":{"name":"SP刘协","attr":["male","qun",3,["sphuangen","sphantong"],[]]},"huangfusong":{"name":"皇甫嵩","attr":["male","qun",4,["xinfenyue"],[]]},"yuantanyuanshang":{"name":"袁谭袁尚","attr":["male","qun",4,["neifa"],[]]},"xujing":{"name":"许靖","attr":["male","shu",3,["yuxu","xjshijian"],[]]},"niujin":{"name":"牛金","attr":["male","wei",4,["cuorui","liewei"],[]]},"jianggan":{"name":"蒋干","attr":["male","wei",3,["weicheng","daoshu"],[]]},"caoying":{"name":"曹婴","attr":["female","wei",4,["xinfu_lingren","xinfu_fujian"],[]]},"simahui":{"name":"司马徽","attr":["male","qun",3,["xinfu_jianjie","xinfu_chenghao","xinfu_yinshi"],[]]},"baosanniang":{"name":"OL鲍三娘","attr":["female","shu",3,["xinfu_wuniang","xinfu_xushen"],[]]},"sp_xiahoushi":{"name":"SP夏侯氏","attr":["female","shu",3,["xinfu_yanyu","xinfu_xiaode"],[]]},"yangxiu":{"name":"杨修","attr":["male","wei",3,["jilei","danlao"],[]]},"chenlin":{"name":"陈琳","attr":["male","wei",3,["bifa","songci"],[]]},"caohong":{"name":"曹洪","attr":["male","wei",4,["yuanhu"],[]]},"xiahouba":{"name":"夏侯霸","attr":["male","shu",4,["baobian"],[]]},"yuanshu":{"name":"SP袁术","attr":["male","qun",4,["yongsi","weidi"],[]]},"sp_diaochan":{"name":"SP貂蝉","attr":["female","qun",3,["lihun","rebiyue"],[]]},"sp_zhaoyun":{"name":"SP赵云","attr":["male","qun",3,["ollongdan","chongzhen"],[]]},"jsp_zhaoyun":{"name":"☆SP赵云","attr":["male","qun",3,["chixin","reyicong","suiren"],[]]},"liuxie":{"name":"刘协","attr":["male","qun",3,["tianming","mizhao"],[]]},"zhugejin":{"name":"诸葛瑾","attr":["male","wu",3,["hongyuan","huanshi","mingzhe"],[]]},"zhugeke":{"name":"诸葛恪","attr":["male","wu",3,["aocai","duwu"],[]]},"guanyinping":{"name":"关银屏","attr":["female","shu",3,["huxiao","xueji","wuji"],[]]},"simalang":{"name":"司马朗","attr":["male","wei",3,["junbing","quji"],[]]},"zhangxingcai":{"name":"张星彩","attr":["female","shu",3,["shenxian","qiangwu"],[]]},"fuwan":{"name":"伏完","attr":["male","qun",4,["moukui"],[]]},"sp_sunshangxiang":{"name":"SP孙尚香","attr":["female","shu",3,["liangzhu","fanxiang"],[]]},"caoang":{"name":"曹昂","attr":["male","wei",4,["kaikang"],[]]},"sp_caoren":{"name":"SP曹仁","attr":["male","wei",4,["weikui","lizhan"],[]]},"zhangbao":{"name":"张宝","attr":["male","qun",3,["rezhoufu","reyingbing"],[]]},"huangjinleishi":{"name":"黄巾雷使","attr":["female","qun",3,["fulu","fuji"],[]]},"maliang":{"name":"马良","attr":["male","shu",3,["zishu","xinyingyuan"],[]]},"sp_pangtong":{"name":"SP庞统","attr":["male","qun",3,["xinmanjuan","zuixiang"],[]]},"zhugedan":{"name":"诸葛诞","attr":["male","wei",4,["gongao","juyi"],[]]},"sp_jiangwei":{"name":"SP姜维","attr":["male","wei",4,["kunfen","fengliang"],[]]},"sp_machao":{"name":"SP马超","attr":["male","qun",4,["zhuiji","ol_shichou"],[]]},"sunhao":{"name":"孙皓","attr":["male","wu",5,["recanshi","rechouhai","guiming"],["zhu"]]},"shixie":{"name":"士燮","attr":["male","qun",3,["rebiluan","relixia"],[]]},"mayunlu":{"name":"马云騄","attr":["female","shu",4,["fengpo","mashu"],[]]},"zhanglu":{"name":"张鲁","attr":["male","qun",3,["yishe","bushi","midao"],[]]},"wutugu":{"name":"兀突骨","attr":["male","qun",15,["ranshang","hanyong"],[]]},"sp_caiwenji":{"name":"SP蔡文姬","attr":["female","wei",3,["chenqing","mozhi"],[]]},"zhugeguo":{"name":"诸葛果","attr":["female","shu",3,["yuhua","qirang"],[]]},"lingju":{"name":"灵雎","attr":["female","qun",3,["jieyuan","fenxin"],[]]},"cuiyan":{"name":"崔琰","attr":["male","wei",3,["yawang","xunzhi"],[]]},"sp_zhangfei":{"name":"☆SP张飞","attr":["male","shu",4,["jie","dahe"],[]]},"jsp_guanyu":{"name":"SP关羽","attr":["male","wei",4,["new_rewusheng","danji"],[]]},"jsp_huangyueying":{"name":"SP黄月英","attr":["female","qun",3,["jiqiao","linglong"],[]]},"sunluyu":{"name":"OL孙鲁育","attr":["female","wu",3,["new_meibu","new_mumu"],[]]},"hanba":{"name":"旱魃","attr":["female","qun",4,["fentian","zhiri"],[]]},"zumao":{"name":"祖茂","attr":["male","wu",4,["yinbing","juedi"],[]]},"wenpin":{"name":"文聘","attr":["male","wei",4,["zhenwei"],[]]},"daxiaoqiao":{"name":"大小乔","attr":["female","wu",3,["new_xingwu","new_luoyan"],[]]},"sp_daqiao":{"name":"☆SP大乔","attr":["female","wu",3,["yanxiao","anxian"],[]]},"sp_ganning":{"name":"☆SP甘宁","attr":["male","qun",4,["yinling","junwei"],[]]},"sp_xiahoudun":{"name":"☆SP夏侯惇","attr":["male","wei",4,["fenyong","xuehen"],["die_audio"]]},"sp_lvmeng":{"name":"☆SP吕蒙","attr":["male","wu",3,["tanhu","mouduan"],[]]},"guansuo":{"name":"关索","attr":["male","shu",4,["xinzhengnan","xiefang"],[]]},"tadun":{"name":"蹋顿","attr":["male","qun",4,["reluanzhan"],[]]},"yanbaihu":{"name":"严白虎","attr":["male","qun",4,["zhidao","jili"],[]]},"chengyu":{"name":"程昱","attr":["male","wei",3,["shefu","benyu"],[]]},"wanglang":{"name":"王朗","attr":["male","wei",3,["gushe","jici"],[]]},"sp_pangde":{"name":"SP庞德","attr":["male","wei",4,["mashu","juesi"],[]]},"sp_jiaxu":{"name":"SP贾诩","attr":["male","wei",3,["zhenlue","jianshu","yongdi"],[]]},"litong":{"name":"李通","attr":["male","wei",4,["tuifeng"],[]]},"mizhu":{"name":"糜竺","attr":["male","shu",3,["ziyuan","jugu"],[]]},"buzhi":{"name":"步骘","attr":["male","wu",3,["hongde","dingpan"],[]]},"sp_liubei":{"name":"☆SP刘备","attr":["male","shu",4,["zhaolie","shichou"],["zhu"]]},"caochun":{"name":"曹纯","attr":["male","wei",4,["xinshanjia"],[]]},"dongbai":{"name":"董白","attr":["female","qun",3,["lianzhu","xiehui"],[]]},"zhaoxiang":{"name":"赵襄","attr":["female","shu",4,["refanghun","refuhan"],[]]},"mazhong":{"name":"马忠","attr":["male","shu",4,["fuman"],[]]},"dongyun":{"name":"董允","attr":["male","shu",3,["bingzheng","sheyan"],[]]},"kanze":{"name":"阚泽","attr":["male","wu",3,["xiashu","kuanshi"],[]]},"heqi":{"name":"贺齐","attr":["male","wu",4,["qizhou","shanxi"],[]]},"ganfuren":{"name":"甘夫人","attr":["female","shu",3,["shushen","shenzhi"],[]]},"mifuren":{"name":"糜夫人","attr":["female","shu",3,["guixiu","cunsi"],[]]},"mateng":{"name":"马腾","attr":["male","qun",4,["xiongyi","mashu"],[]]},"tianfeng":{"name":"田丰","attr":["male","qun",3,["sijian","suishi"],[]]},"yuejin":{"name":"乐进","attr":["male","wei",4,["xiaoguo"],[]]},"chendong":{"name":"陈武董袭","attr":["male","wu",4,["duanxie","fenming"],[]]},"sp_dongzhuo":{"name":"SP董卓","attr":["male","qun",5,["hengzheng"],[]]},"jiangfei":{"name":"蒋琬费祎","attr":["male","shu",3,["shengxi","shoucheng"],[]]},"jiangqing":{"name":"蒋钦","attr":["male","wu",4,["shangyi","zniaoxiang"],[]]},"hetaihou":{"name":"何太后","attr":["female","qun",3,["zhendu","qiluan"],[]]},"kongrong":{"name":"孔融","attr":["male","qun",3,["lirang","mingshi"],[]]},"dingfeng":{"name":"丁奉","attr":["male","wu",4,["fenxun","duanbing"],[]]},"bianfuren":{"name":"卞夫人","attr":["female","wei",3,["wanwei","yuejian"],[]]},"shamoke":{"name":"沙摩柯","attr":["male","shu",4,["gzjili"],[]]},"liqueguosi":{"name":"李傕郭汜","attr":["male","qun",4,["xiongsuan"],[]]},"lvfan":{"name":"吕范","attr":["male","wu",3,["diaodu","diancai"],[]]},"cuimao":{"name":"崔琰毛玠","attr":["male","wei",3,["zhengbi","fengying"],[]]},"jiling":{"name":"纪灵","attr":["male","qun",4,["shuangren"],[]]},"zangba":{"name":"臧霸","attr":["male","wei",4,["rehengjiang"],[]]},"zhangren":{"name":"张任","attr":["male","qun",4,["chuanxin","zfengshi"],[]]},"zoushi":{"name":"邹氏","attr":["female","qun",3,["zhuoshui","zqingcheng"],[]]},"wangyun":{"name":"王允","attr":["male","qun",4,["xinlianji","xinmoucheng"],[]]},"sunqian":{"name":"孙乾","attr":["male","shu",3,["qianya","shuimeng"],[]]},"xizhicai":{"name":"戏志才","attr":["male","wei",3,["tiandu","xianfu","chouce"],[]]},"quyi":{"name":"OL麴义","attr":["male","qun",4,["fuqi","jiaozi"],[]]},"luzhi":{"name":"鲁芝","attr":["male","wei",3,["qingzhongx","weijing"],[]]}}}}